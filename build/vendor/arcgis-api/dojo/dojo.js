//>>built
(function(q,t){var b,s=function(){},r=function(e){for(var h in e)return 0;return 1},m={}.toString,k=function(e){return"[object Function]"==m.call(e)},g=function(e){return"[object String]"==m.call(e)},f=function(e){return"[object Array]"==m.call(e)},a=function(e,h){if(e)for(var n=0;n<e.length;)h(e[n++])},c=function(e,h){for(var n in h)e[n]=h[n];return e},d=function(e,h){return c(Error(e),{src:"dojoLoader",info:h})},u=1,B=function(){return"_"+u++},x=function(e,h,n){return Ja(e,h,n,0,x)},y=this,w=y.document,
E=w&&w.createElement("DiV"),D=x.has=function(e){return k(A[e])?A[e]=A[e](y,w,E):A[e]},A=D.cache=t.hasCache;D.add=function(e,h,n,l){(void 0===A[e]||l)&&(A[e]=h);return n&&D(e)};D.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);D("host-webworker")&&(c(t.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),t.loaderPatch={injectUrl:function(e,h){try{importScripts(e),h()}catch(n){console.error(n)}}});
for(var H in q.has)D.add(H,q.has[H],0,1);x.async=1;var G=D("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");x.eval=function(e,h){return G(e+"\r\n//# sourceURL\x3d"+h)};var I={},M=x.signal=function(e,h){var n=I[e];a(n&&n.slice(0),function(e){e.apply(null,f(h)?h:[h])})},J=x.on=function(e,h){var n=I[e]||(I[e]=[]);n.push(h);return{remove:function(){for(var e=0;e<n.length;e++)if(n[e]===h){n.splice(e,1);break}}}},S=[],L={},Q=[],R={},X=x.map={},V=[],O={},U="",v={},K={};H={};var C=
0,l=function(e){var h,n,l,z;for(h in K)n=K[h],(l=h.match(/^url\:(.+)/))?v["url:"+Ra(l[1],e)]=n:"*now"==h?z=n:"*noref"!=h&&(l=Aa(h,e,!0),v[l.mid]=v["url:"+l.url]=n);z&&z(Da(e));K={}},e=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},h=function(h,n){n.splice(0,n.length);for(var l in h)n.push([l,h[l],RegExp("^"+e(l)+"(/|$)"),l.length]);n.sort(function(e,h){return h[3]-e[3]});return n},n=function(h,n){a(h,function(h){n.push([g(h[0])?RegExp("^"+e(h[0])+"$"):h[0],
h[1]])})},z=function(e){var h=e.name;h||(h=e,e={name:h});e=c({main:"main"},e);e.location=e.location?e.location:h;e.packageMap&&(X[h]=e.packageMap);e.main.indexOf("./")||(e.main=e.main.substring(2));R[h]=e},F=[],N=function(e,v,N){for(var T in e){"waitSeconds"==T&&(x.waitms=1E3*(e[T]||0));"cacheBust"==T&&(U=e[T]?g(e[T])?e[T]:(new Date).getTime()+"":"");if("baseUrl"==T||"combo"==T)x[T]=e[T];e[T]!==A&&(x.rawConfig[T]=e[T],"has"!=T&&D.add("config-"+T,e[T],0,v))}x.baseUrl||(x.baseUrl="./");/\/$/.test(x.baseUrl)||
(x.baseUrl+="/");for(T in e.has)D.add(T,e.has[T],0,v);a(e.packages,z);for(var W in e.packagePaths)a(e.packagePaths[W],function(e){var h=W+"/"+e;g(e)&&(e={name:e});e.location=h;z(e)});h(c(X,e.map),V);a(V,function(e){e[1]=h(e[1],[]);"*"==e[0]&&(V.star=e)});h(c(L,e.paths),Q);n(e.aliases,S);if(v)F.push({config:e.config});else for(T in e.config)v=Ba(T,N),v.config=c(v.config||{},e.config[T]);e.cache&&(l(),K=e.cache,e.cache["*noref"]&&l());M("config",[e,x.rawConfig])},T=w.getElementsByTagName("script");
b=0;for(var W,ea,na;b<T.length;){W=T[b++];if((ea=W.getAttribute("src"))&&(na=ea.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))ea=na[3]||"",t.baseUrl=t.baseUrl||ea,C=W;if(ea=W.getAttribute("data-dojo-config")||W.getAttribute("djConfig"))H=x.eval("({ "+ea+" })","data-dojo-config"),C=W}x.rawConfig={};N(t,1);N(q,1);N(H,1);var sa=function(e){Y(function(){a(e.deps,$)})},Ja=function(e,h,n,l,z){var F;if(g(e)){if((F=Ba(e,l,!0))&&F.executed)return F.result;throw d("undefinedModule",e);}f(e)||(N(e,0,l),e=h,h=n);if(f(e))if(e.length){n=
"require*"+B();for(var v,T=[],a=0;a<e.length;)v=e[a++],T.push(Ba(v,l));F=c(ta("",n,0,""),{injected:2,deps:T,def:h||s,require:l?l.require:x,gc:1});O[F.mid]=F;sa(F);var W=ga&&0!="sync";Y(function(){ia(F,W)});F.executed||pa.push(F);ba()}else h&&h();return z},Da=function(e){if(!e)return x;var h=e.require;h||(h=function(n,l,z){return Ja(n,l,z,e,h)},e.require=c(h,x),h.module=e,h.toUrl=function(h){return Ra(h,e)},h.toAbsMid=function(h){return Pa(h,e)});return h},pa=[],ka=[],qa={},za=function(e){e.injected=
1;qa[e.mid]=1;e.url&&(qa[e.url]=e.pack||1);vb()},la=function(e){e.injected=2;delete qa[e.mid];e.url&&delete qa[e.url];r(qa)&&eb()},Ia=x.idle=function(){return!ka.length&&r(qa)&&!pa.length&&!ga},Ea=function(e,h){if(h)for(var n=0;n<h.length;n++)if(h[n][2].test(e))return h[n];return 0},Ca=function(e){var h=[],n,l;for(e=e.replace(/\\/g,"/").split("/");e.length;)n=e.shift(),".."==n&&h.length&&".."!=l?(h.pop(),l=h[h.length-1]):"."!=n&&h.push(l=n);return h.join("/")},ta=function(e,h,n,l){return{pid:e,mid:h,
pack:n,url:l,executed:0,def:0}},oa=function(e,h,n,l,z,F,v,N,T){var W,c,w,b;b=/^\./.test(e);if(/(^\/)|(\:)|(\.js$)/.test(e)||b&&!h)return ta(0,e,0,e);e=Ca(b?h.mid+"/../"+e:e);if(/^\./.test(e))throw d("irrationalPath",e);h&&(w=Ea(h.mid,F));(w=(w=w||F.star)&&Ea(e,w[1]))&&(e=w[1]+e.substring(w[3]));h=(na=e.match(/^([^\/]+)(\/(.+))?$/))?na[1]:"";(W=n[h])?e=h+"/"+(c=na[3]||W.main):h="";var C=0;a(N,function(h){var n=e.match(h[0]);n&&0<n.length&&(C=k(h[1])?e.replace(h[0],h[1]):h[1])});if(C)return oa(C,0,
n,l,z,F,v,N,T);if(n=l[e])return T?ta(n.pid,n.mid,n.pack,n.url):l[e];l=(w=Ea(e,v))?w[1]+e.substring(w[3]):h?W.location+"/"+c:D("config-tlmSiblingOfDojo")?"../"+e:e;/(^\/)|(\:)/.test(l)||(l=z+l);return ta(h,e,W,Ca(l+".js"))},Aa=function(e,h,n){return oa(e,h,R,O,x.baseUrl,n?[]:V,n?[]:Q,n?[]:S)},Na=function(e,h,n){return e.normalize?e.normalize(h,function(e){return Pa(e,n)}):Pa(h,n)},Sa=0,Ba=function(e,h,n){var l,z;(l=e.match(/^(.+?)\!(.*)$/))?(z=Ba(l[1],h,n),5===z.executed&&!z.load&&va(z),z.load?(l=
Na(z,l[2],h),e=z.mid+"!"+(z.dynamic?++Sa+"!":"")+l):(l=l[2],e=z.mid+"!"+ ++Sa+"!waitingForPlugin"),e={plugin:z,mid:e,req:Da(h),prid:l}):e=Aa(e,h);return O[e.mid]||!n&&(O[e.mid]=e)},Pa=x.toAbsMid=function(e,h){return Aa(e,h).mid},Ra=x.toUrl=function(e,h){var n=Aa(e+"/x",h),l=n.url;return P(0===n.pid?e:l.substring(0,l.length-5))},Ua={injected:2,executed:5,def:3,result:3},T=function(e){return O[e]=c({mid:e},Ua)},Va=T("require"),Wa=T("exports"),Oa=T("module"),Z={},ua=0,va=function(e){var h=e.result;e.dynamic=
h.dynamic;e.normalize=h.normalize;e.load=h.load;return e},ca=function(e){var h={};a(e.loadQ,function(n){var l=Na(e,n.prid,n.req.module),z=e.dynamic?n.mid.replace(/waitingForPlugin$/,l):e.mid+"!"+l,l=c(c({},n),{mid:z,prid:l,injected:0});if(!O[z]||!O[z].injected)ha(O[z]=l);h[n.mid]=O[z];la(n);delete O[n.mid]});e.loadQ=0;var n=function(e){for(var n=e.deps||[],l=0;l<n.length;l++)(e=h[n[l].mid])&&(n[l]=e)},l;for(l in O)n(O[l]);a(pa,n)},xa=function(e){x.trace("loader-finish-exec",[e.mid]);e.executed=5;
e.defOrder=ua++;e.loadQ&&(va(e),ca(e));for(b=0;b<pa.length;)pa[b]===e?pa.splice(b,1):b++;/^require\*/.test(e.mid)&&delete O[e.mid]},Fa=[],ia=function(e,h){if(4===e.executed)return x.trace("loader-circular-dependency",[Fa.concat(e.mid).join("-\x3e")]),!e.def||h?Z:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return Z;var n=e.mid,l=e.deps||[],z,F=[],v=0;for(e.executed=4;z=l[v++];){z=z===Va?Da(e):z===Wa?e.cjs.exports:z===Oa?e.cjs:ia(z,h);if(z===Z)return e.executed=0,x.trace("loader-exec-module",["abort",
n]),Z;F.push(z)}x.trace("loader-run-factory",[e.mid]);n=e.def;F=k(n)?n.apply(null,F):n;e.result=void 0===F&&e.cjs?e.cjs.exports:F;xa(e)}return e.result},ga=0,Y=function(e){try{ga++,e()}catch(h){throw h;}finally{ga--}Ia()&&M("idle",[])},ba=function(){ga||Y(function(){for(var e,h,n=0;n<pa.length;)e=ua,h=pa[n],ia(h),e!=ua?n=0:n++})};void 0===D("dojo-loader-eval-hint-url")&&D.add("dojo-loader-eval-hint-url",1);var P="function"==typeof q.fixupUrl?q.fixupUrl:function(e){e+="";return e+(U?(/\?/.test(e)?
"\x26":"?")+U:"")},ha=function(e){var h=e.plugin;5===h.executed&&!h.load&&va(h);var n=function(h){e.result=h;la(e);xa(e);ba()};h.load?h.load(e.prid,e.req,n):h.loadQ?h.loadQ.push(e):(h.loadQ=[e],pa.unshift(h),$(h))},ja=0,ma=0,da=0,fa=function(e,h){D("config-stripStrict")&&(e=e.replace(/(["'])use strict\1/g,""));da=1;e===ja?ja.call(null):x.eval(e,D("dojo-loader-eval-hint-url")?h.url:h.mid);da=0},$=function(e){var h=e.mid,n=e.url;if(!e.executed&&!e.injected&&!(qa[h]||e.url&&(e.pack&&qa[e.url]===e.pack||
1==qa[e.url])))if(za(e),e.plugin)ha(e);else{var l=function(){xb(e);if(2!==e.injected){if(D("dojo-enforceDefine")){M("error",d("noDefine",e));return}la(e);c(e,Ua);x.trace("loader-define-nonmodule",[e.url])}ba()};(ja=v[h]||v["url:"+e.url])?(x.trace("loader-inject",["cache",e.mid,n]),fa(ja,e),l()):(x.trace("loader-inject",["script",e.mid,n]),ma=e,x.injectUrl(P(n),l,e),ma=0)}},nb=function(e,h,n){x.trace("loader-define-module",[e.mid,h]);if(2===e.injected)return M("error",d("multipleDefine",e)),e;c(e,
{deps:h,def:n,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(h){e.cjs.exports=h},config:function(){return e.config}}});for(var l=0;h[l];l++)h[l]=Ba(h[l],e);la(e);!k(n)&&!h.length&&(e.result=n,xa(e));return e},xb=function(e,h){for(var n=[],z,F;ka.length;)F=ka.shift(),h&&(F[0]=h.shift()),z=F[0]&&Ba(F[0])||e,n.push([z,F[1],F[2]]);l(e);a(n,function(e){sa(nb.apply(null,e))})},eb=s,vb=s;D.add("ie-event-behavior",w.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||
"[object Opera]"!=opera.toString()));var bb=function(e,h,n,l){if(D("ie-event-behavior"))return e.attachEvent(n,l),function(){e.detachEvent(n,l)};e.addEventListener(h,l,!1);return function(){e.removeEventListener(h,l,!1)}},yb=bb(window,"load","onload",function(){x.pageLoaded=1;try{"complete"!=w.readyState&&(w.readyState="complete")}catch(e){}yb()}),T=w.getElementsByTagName("script");for(b=0;!C;)if(!/^dojo/.test((W=T[b++])&&W.type))C=W;x.injectUrl=function(e,h,n){n=n.node=w.createElement("script");
var l=bb(n,"load","onreadystatechange",function(e){e=e||window.event;var n=e.target||e.srcElement;if("load"===e.type||/complete|loaded/.test(n.readyState))l(),z(),h&&h()}),z=bb(n,"error","onerror",function(h){l();z();M("error",d("scriptError",[e,h]))});n.type="text/javascript";n.charset="utf-8";n.src=e;C.parentNode.insertBefore(n,C);return n};x.log=s;x.trace=s;W=function(e,h,n){var z=arguments.length,F=["require","exports","module"],v=[0,e,h];1==z?v=[0,k(e)?F:[],e]:2==z&&g(e)?v=[e,k(h)?F:[],h]:3==
z&&(v=[e,h,n]);x.trace("loader-define",v.slice(0,2));if((z=v[0]&&Ba(v[0]))&&!qa[z.mid])sa(nb(z,v[1],v[2]));else if(!D("ie-event-behavior")||da)ka.push(v);else{z=z||ma;if(!z)for(e in qa)if((F=O[e])&&F.node&&"interactive"===F.node.readyState){z=F;break}z?(l(z),sa(nb(z,v[1],v[2]))):M("error",d("ieDefineFailed",v[0]));ba()}};W.amd={vendor:"dojotoolkit.org"};c(c(x,t.loaderPatch),q.loaderPatch);J("error",function(e){try{if(console.error(e),e instanceof Error)for(var h in e);}catch(n){}});c(x,{uid:B,cache:v,
packs:R});y.define||(y.define=W,y.require=x,a(F,function(e){N(e)}),J=H.deps||q.deps||t.deps,H=H.callback||q.callback||t.callback,x.boot=J||H?[J||[],H]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../esri",
name:"esri"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../moment",main:"moment.js",name:"moment"},{location:"../xstyle",name:"xstyle"}]});
require({cache:{"esri/toolbars/draw":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/sniff dojo/keys dojo/dom-construct dojo/dom-style dojo/dom-geometry ../kernel ../sniff ./_toolbar ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic ../geometry/jsonUtils ../geometry/webMercatorUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/Rect dojo/i18n!../nls/jsapi".split(" "),function(q,
t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S){var L=q(x,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(a,c){this.markerSymbol=new y(y.STYLE_SOLID,10,new w(w.STYLE_SOLID,new r([255,0,0]),2),new r([0,0,0,0.25]));this.lineSymbol=new w(w.STYLE_SOLID,new r([255,0,0]),2);this.fillSymbol=new E(E.STYLE_SOLID,new w(w.STYLE_SOLID,new r([255,0,0]),2),new r([0,0,0,0.25]));this._points=[];this._mouse=!k("esri-touch")&&!k("esri-pointer");this._defaultOptions=
{showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=t.mixin(t.mixin({},this._defaultOptions),c||{});if(g("ios")||g("android"))this._options.showTooltips=!1;this._onKeyDownHandler=t.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=t.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=t.hitch(this,this._onMouseUpHandler);this._onClickHandler=t.hitch(this,this._onClickHandler);this._onMouseMoveHandler=t.hitch(this,this._onMouseMoveHandler);this._onMouseDragHandler=
t.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=t.hitch(this,this._onDblClickHandler);this._updateTooltip=t.hitch(this,this._updateTooltip);this._hideTooltip=t.hitch(this,this._hideTooltip);this._redrawGraphic=t.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(a){this.respectDrawingVertexOrder=a},setMarkerSymbol:function(a){this.markerSymbol=a},setLineSymbol:function(a){this.lineSymbol=a},setFillSymbol:function(a){this.fillSymbol=
a},activate:function(a,c){this._geometryType&&this.deactivate();var d=this.map,w=s.connect,b=L;this._options=t.mixin(t.mixin({},this._options),c||{});d.navigationManager.setImmediateClick(!1);switch(a){case b.ARROW:case b.LEFT_ARROW:case b.RIGHT_ARROW:case b.UP_ARROW:case b.DOWN_ARROW:case b.TRIANGLE:case b.CIRCLE:case b.ELLIPSE:case b.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=w(d,"onClick",this._onClickHandler);this._mouse?(this._onMouseDownHandler_connect=w(d,
"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=w(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=w(d,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler2_connect=w(d,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=w(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=w(d,"onMouseDragEnd",this._onMouseUpHandler));k("esri-touch")&&!k("esri-pointer")&&(this._onMouseDownHandler2_connect=
w(d,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=w(d,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=w(d,"onSwipeEnd",this._onMouseUpHandler));break;case b.POINT:this._onClickHandler_connect=w(d,"onClick",this._onClickHandler);break;case b.LINE:case b.EXTENT:case b.FREEHAND_POLYLINE:case b.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._mouse?(this._onMouseDownHandler_connect=w(d,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=
w(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=w(d,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=w(d,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=w(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=w(d,"onMouseDragEnd",this._onMouseUpHandler));k("esri-touch")&&!k("esri-pointer")&&(this._onMouseDownHandler2_connect=w(d,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=
w(d,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=w(d,"onSwipeEnd",this._onMouseUpHandler));break;case b.POLYLINE:case b.POLYGON:case b.MULTI_POINT:d.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=w(d,"onClick",this._onClickHandler);this._onDblClickHandler_connect=w(d,"onDblClick",this._onDblClickHandler);this._dblClickZoom=d.isDoubleClickZoom;d.disableDoubleClickZoom();break;default:console.error("Unsupported geometry type: "+a);return}this._onKeyDown_connect=
w(d,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=w(d,"onExtentChange",this._redrawGraphic);this._geometryType=a;this._toggleTooltip(!0);d.snappingManager&&("freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType)&&(d.snappingManager._startSelectionLayerQuery(),d.snappingManager._setUpSnapping());this.onActivate(this._geometryType)},deactivate:function(){var a=this.map;this._clear();var c=s.disconnect;c(this._onMouseMoveHandler_connect);c(this._onMouseDownHandler_connect);
c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);c(this._onMouseDownHandler2_connect);c(this._onMouseDragHandler2_connect);c(this._onMouseUpHandler2_connect);c(this._onClickHandler_connect);c(this._onDblClickHandler_connect);c(this._onKeyDown_connect);c(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=
this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;a.snappingManager&&(a.snappingManager._stopSelectionLayerQuery(),a.snappingManager._killOffSnapping());switch(this._geometryType){case L.CIRCLE:case L.ELLIPSE:case L.TRIANGLE:case L.ARROW:case L.LEFT_ARROW:case L.RIGHT_ARROW:case L.UP_ARROW:case L.DOWN_ARROW:case L.RECTANGLE:case L.LINE:case L.EXTENT:case L.FREEHAND_POLYLINE:case L.FREEHAND_POLYGON:this._activateMapTools(!0,!1,!1,!0);break;
case L.POLYLINE:case L.POLYGON:case L.MULTI_POINT:this._dblClickZoom&&a.enableDoubleClickZoom()}c=this._geometryType;this._geometryType=null;a.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(c)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._tGraphic&&this.map.graphics.remove(this._tGraphic,!0);this._graphic=this._tGraphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[]},finishDrawing:function(){var a,
c=this._points,d=this.map.spatialReference,w=L,c=c.slice(0,c.length);switch(this._geometryType){case w.POLYLINE:if(!this._graphic||2>c.length)return;a=new G(d);a.addPath([].concat(c));break;case w.POLYGON:if(!this._graphic||3>c.length)return;a=new I(d);c=[].concat(c,[c[0].offset(0,0)]);!I.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&c.reverse();a.addRing(c);break;case w.MULTI_POINT:a=new M(d),b.forEach(c,function(c){a.addPoint(c)})}s.disconnect(this._onMouseMoveHandler_connect);this._clear();
this._setTooltipMessage(0);this._drawEnd(a)},_drawEnd:function(a){if(a){var c=this.map.spatialReference,d;this.onDrawEnd(a);c&&(c.isWebMercator()?d=H.webMercatorToGeographic(a,!0):4326===c.wkid&&(d=A.fromJson(a.toJson())));this.onDrawComplete({geometry:a,geographicGeometry:d})}},_normalizeRect:function(a,c,d){var w=a.x;a=a.y;var b=c.x;c=c.y;var u=Math.abs(w-b),v=Math.abs(a-c);return{x:Math.min(w,b),y:Math.max(a,c),width:u,height:v,spatialReference:d}},_onMouseDownHandler:function(a){this._dragged=
!1;var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);var d=c||a.mapPoint,w=L;c=this.map;var b=c.spatialReference;this._points.push(d.offset(0,0));switch(this._geometryType){case w.LINE:this._graphic=c.graphics.add(new D(new G({paths:[[[d.x,d.y],[d.x,d.y]]],spatialReference:b}),this.lineSymbol),!0);c.snappingManager&&c.snappingManager._setGraphic(this._graphic);break;case w.FREEHAND_POLYLINE:this._oldPoint=a.screenPoint;d=new G(b);d.addPath(this._points);this._graphic=c.graphics.add(new D(d,
this.lineSymbol),!0);c.snappingManager&&c.snappingManager._setGraphic(this._graphic);break;case w.CIRCLE:case w.ELLIPSE:case w.TRIANGLE:case w.ARROW:case w.LEFT_ARROW:case w.RIGHT_ARROW:case w.UP_ARROW:case w.DOWN_ARROW:case w.RECTANGLE:case w.FREEHAND_POLYGON:this._oldPoint=a.screenPoint,d=new I(b),d.addRing(this._points),this._graphic=c.graphics.add(new D(d,this.fillSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic)}k("esri-touch")&&a.preventDefault()},_onMouseMoveHandler:function(a){var c;
this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);var d=this._points[this._points.length-1];a=c||a.mapPoint;c=this._tGraphic;var w=c.geometry;switch(this._geometryType){case L.POLYLINE:case L.POLYGON:w.setPoint(0,0,{x:d.x,y:d.y}),w.setPoint(0,1,{x:a.x,y:a.y}),c.setGeometry(w)}},_onMouseDragHandler:function(a){if(this._graphic||this._points.length)if(k("esri-touch")&&!this._points.length)a.preventDefault();else{this._dragged=!0;var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);
var d=this._points[0],w=c||a.mapPoint,b=this.map,u=b.spatialReference;c=this._graphic;var v=L,f=b.toScreen(d),C=b.toScreen(w),l=[],l=C.x-f.x,C=C.y-f.y,e=Math.sqrt(l*l+C*C);switch(this._geometryType){case v.CIRCLE:this._hideTooltip();c.geometry=I.createCircle({center:f,r:e,numberOfPoints:60,map:b});c.setGeometry(c.geometry);break;case v.ELLIPSE:this._hideTooltip();c.geometry=I.createEllipse({center:f,longAxis:l,shortAxis:C,numberOfPoints:60,map:b});c.setGeometry(c.geometry);break;case v.TRIANGLE:this._hideTooltip();
l=[[0,-e],[0.8660254037844386*e,0.5*e],[-0.8660254037844386*e,0.5*e],[0,-e]];c.geometry=this._toPolygon(l,f.x,f.y);c.setGeometry(c.geometry);break;case v.ARROW:this._hideTooltip();d=C/e;b=l/e;w=0.25*b*e;u=0.25*e/(C/l);e*=0.25*d;l=[[l,C],[l-w*(1+24/u),C+24*b-e],[l-w*(1+12/u),C+12*b-e],[-12*d,12*b],[12*d,-12*b],[l-w*(1-12/u),C-12*b-e],[l-w*(1-24/u),C-24*b-e],[l,C]];c.geometry=this._toPolygon(l,f.x,f.y);c.setGeometry(c.geometry);break;case v.LEFT_ARROW:this._hideTooltip();l=0>=l?[[l,0],[0.75*l,C],[0.75*
l,0.5*C],[0,0.5*C],[0,-0.5*C],[0.75*l,-0.5*C],[0.75*l,-C],[l,0]]:[[0,0],[0.25*l,C],[0.25*l,0.5*C],[l,0.5*C],[l,-0.5*C],[0.25*l,-0.5*C],[0.25*l,-C],[0,0]];c.geometry=this._toPolygon(l,f.x,f.y);c.setGeometry(c.geometry);break;case v.RIGHT_ARROW:this._hideTooltip();l=0<=l?[[l,0],[0.75*l,C],[0.75*l,0.5*C],[0,0.5*C],[0,-0.5*C],[0.75*l,-0.5*C],[0.75*l,-C],[l,0]]:[[0,0],[0.25*l,C],[0.25*l,0.5*C],[l,0.5*C],[l,-0.5*C],[0.25*l,-0.5*C],[0.25*l,-C],[0,0]];c.geometry=this._toPolygon(l,f.x,f.y);c.setGeometry(c.geometry);
break;case v.UP_ARROW:this._hideTooltip();l=0>=C?[[0,C],[-l,0.75*C],[-0.5*l,0.75*C],[-0.5*l,0],[0.5*l,0],[0.5*l,0.75*C],[l,0.75*C],[0,C]]:[[0,0],[-l,0.25*C],[-0.5*l,0.25*C],[-0.5*l,C],[0.5*l,C],[0.5*l,0.25*C],[l,0.25*C],[0,0]];c.geometry=this._toPolygon(l,f.x,f.y);c.setGeometry(c.geometry);break;case v.DOWN_ARROW:this._hideTooltip();l=0<=C?[[0,C],[-l,0.75*C],[-0.5*l,0.75*C],[-0.5*l,0],[0.5*l,0],[0.5*l,0.75*C],[l,0.75*C],[0,C]]:[[0,0],[-l,0.25*C],[-0.5*l,0.25*C],[-0.5*l,C],[0.5*l,C],[0.5*l,0.25*C],
[l,0.25*C],[0,0]];c.geometry=this._toPolygon(l,f.x,f.y);c.setGeometry(c.geometry);break;case v.RECTANGLE:this._hideTooltip();l=[[0,0],[l,0],[l,C],[0,C],[0,0]];c.geometry=this._toPolygon(l,f.x,f.y);c.setGeometry(c.geometry);break;case v.LINE:c.setGeometry(t.mixin(c.geometry,{paths:[[[d.x,d.y],[w.x,w.y]]]}));break;case v.EXTENT:c&&b.graphics.remove(c,!0);c=new J(this._normalizeRect(d,w,u));c._originOnly=!0;this._graphic=b.graphics.add(new D(c,this.fillSymbol),!0);b.snappingManager&&b.snappingManager._setGraphic(this._graphic);
break;case v.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){k("esri-touch")&&a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));c.geometry._insertPoints([w.offset(0,0)],0);c.setGeometry(c.geometry);break;case v.FREEHAND_POLYGON:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){k("esri-touch")&&a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));c.geometry._insertPoints([w.offset(0,0)],0);c.setGeometry(c.geometry)}k("esri-touch")&&
a.preventDefault()}},_canDrawFreehandPoint:function(a){if(!this._oldPoint)return!1;var c=this._oldPoint.x-a.screenPoint.x,d=this._oldPoint.y-a.screenPoint.y,w=this._options.tolerance;if((0>c?-1*c:c)<w&&(0>d?-1*d:d)<w)return!1;c=new Date;if(c-this._startTime<this._options.drawTime)return!1;this._startTime=c;this._oldPoint=a.screenPoint;return!0},_onMouseUpHandler:function(a){if(!this._dragged||!this._graphic)this._clear();else{0===this._points.length&&this._points.push(a.mapPoint.offset(0,0));var c;
this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);var d=this._points[0];c=c||a.mapPoint;var w=this.map.spatialReference,b=L,u;switch(this._geometryType){case b.CIRCLE:case b.ELLIPSE:case b.TRIANGLE:case b.ARROW:case b.LEFT_ARROW:case b.RIGHT_ARROW:case b.UP_ARROW:case b.DOWN_ARROW:case b.RECTANGLE:u=this._graphic.geometry;break;case b.LINE:u=new G({paths:[[[d.x,d.y],[c.x,c.y]]],spatialReference:w});break;case b.EXTENT:u=(new J(this._normalizeRect(d,c,w))).getExtent();break;case b.FREEHAND_POLYLINE:u=
new G(w);u.addPath([].concat(this._points,[c.offset(0,0)]));break;case b.FREEHAND_POLYGON:u=new I(w),d=[].concat(this._points,[c.offset(0,0),this._points[0].offset(0,0)]),!I.prototype.isClockwise(d)&&!this.respectDrawingVertexOrder&&d.reverse(),u.addRing(d)}k("esri-touch")&&a.preventDefault();this._clear();this._drawEnd(u)}},_onClickHandler:function(a){var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);a=c||a.mapPoint;c=this.map;var d=c.toScreen(a),w=L;this._points.push(a.offset(0,
0));switch(this._geometryType){case w.POINT:this._drawEnd(a.offset(0,0));this._setTooltipMessage(0);break;case w.POLYLINE:1===this._points.length?(d=new G(c.spatialReference),d.addPath(this._points),this._graphic=c.graphics.add(new D(d,this.lineSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=s.connect(c,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=c.graphics.add(new D(new G({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:c.spatialReference}),
this.lineSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),c=this._tGraphic,d=c.geometry,d.setPoint(0,0,a.offset(0,0)),d.setPoint(0,1,a.offset(0,0)),c.setGeometry(d));break;case w.POLYGON:1===this._points.length?(d=new I(c.spatialReference),d.addRing(this._points),this._graphic=c.graphics.add(new D(d,this.fillSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=
s.connect(c,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=c.graphics.add(new D(new G({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:c.spatialReference}),this.fillSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol),c=this._tGraphic,d=c.geometry,d.setPoint(0,0,a.offset(0,0)),d.setPoint(0,1,a.offset(0,0)),c.setGeometry(d));break;case w.MULTI_POINT:a=this._points;1===a.length?(d=new M(c.spatialReference),
d.addPoint(a[a.length-1]),this._graphic=c.graphics.add(new D(d,this.markerSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic)):(this._graphic.geometry.addPoint(a[a.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case w.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],d.x,d.y);break;case w.LEFT_ARROW:this._addShape([[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],d.x,
d.y);break;case w.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],d.x,d.y);break;case w.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],d.x,d.y);break;case w.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],d.x,d.y);break;case w.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]],d.x,d.y);break;case w.RECTANGLE:this._addShape([[0,
-96],[96,-96],[96,0],[0,0],[0,-96]],d.x-48,d.y+48);break;case w.CIRCLE:this._clear();this._drawEnd(I.createCircle({center:d,r:48,numberOfPoints:60,map:c}));break;case w.ELLIPSE:this._clear(),this._drawEnd(I.createEllipse({center:d,longAxis:48,shortAxis:24,numberOfPoints:60,map:c}))}this._setTooltipMessage(this._points.length)},_addShape:function(a,c,d){this._setTooltipMessage(0);this._clear();this._drawEnd(this._toPolygon(a,c,d))},_toPolygon:function(a,c,d){var w=this.map,u=new I(w.spatialReference);
u.addRing(b.map(a,function(a){return w.toMap({x:a[0]+c,y:a[1]+d})}));return u},_onDblClickHandler:function(a){var c,d=this._points,w=this.map.spatialReference,u=L;k("esri-touch")&&d.push(a.mapPoint);var f=d[d.length-1],v=d[d.length-2],d=f&&v&&f.x===v.x&&f.y===v.y?d.slice(0,d.length-1):d.slice(0,d.length);switch(this._geometryType){case u.POLYLINE:if(!this._graphic||2>d.length){s.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(a);return}c=new G(w);c.addPath([].concat(d));
break;case u.POLYGON:if(!this._graphic||2>d.length){s.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(a);return}c=new I(w);a=[].concat(d,[d[0].offset(0,0)]);!I.prototype.isClockwise(a)&&!this.respectDrawingVertexOrder&&a.reverse();c.addRing(a);break;case u.MULTI_POINT:c=new M(w),b.forEach(d,function(v){c.addPoint(v)})}s.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(c)},_onKeyDownHandler:function(a){a.keyCode===f.ESCAPE&&
(s.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(w){this._options.showTooltips&&(w?this._tooltip||(this._tooltip=a.create("div",{"class":"tooltip"},this.map.container),d.isBodyLtr()||c.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=s.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=
s.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=s.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(s.disconnect(this._onTooltipMouseEnterHandler_connect),s.disconnect(this._onTooltipMouseLeaveHandler_connect),s.disconnect(this._onTooltipMouseMoveHandler_connect),a.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var a=this._tooltip;a&&(a.style.display="none")},_setTooltipMessage:function(a){var c=this._tooltip;if(c){var d=
"";switch(this._geometryType){case L.POINT:d=S.toolbars.draw.addPoint;break;case L.ARROW:case L.LEFT_ARROW:case L.RIGHT_ARROW:case L.UP_ARROW:case L.DOWN_ARROW:case L.TRIANGLE:case L.RECTANGLE:case L.CIRCLE:case L.ELLIPSE:d=S.toolbars.draw.addShape;break;case L.LINE:case L.EXTENT:case L.FREEHAND_POLYLINE:case L.FREEHAND_POLYGON:d=S.toolbars.draw.freehand;break;case L.POLYLINE:case L.POLYGON:d=S.toolbars.draw.start;1===a?d=S.toolbars.draw.resume:2<=a&&(d=S.toolbars.draw.complete);break;case L.MULTI_POINT:d=
S.toolbars.draw.addMultipoint,1<=a&&(d=S.toolbars.draw.finish)}c.innerHTML=d}},_updateTooltip:function(a){var d=this._tooltip;if(d){var w;a.clientX||a.pageY?(w=a.clientX,a=a.clientY):(w=a.clientX+m.body().scrollLeft-m.body().clientLeft,a=a.clientY+m.body().scrollTop-m.body().clientTop);d.style.display="none";c.set(d,{left:w+this._options.tooltipOffset+"px",top:a+"px"});d.style.display=""}},_redrawGraphic:function(a,c,d,w){if(d||this.map.wrapAround180)(a=this._graphic)&&a.setGeometry(a.geometry),(a=
this._tGraphic)&&a.setGeometry(a.geometry)},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});t.mixin(L,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});
k("extend-esri")&&t.setObject("toolbars.Draw",L,u);return L})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(q,t,b){function s(a,c){throw Error("declare"+(c?" "+c:"")+": "+a);}function r(a,c,d){var w,b,u,f,y,v,x,C=this._inherited=this._inherited||{};"string"==typeof a&&(w=a,a=c,c=d);d=0;f=a.callee;(w=w||f.nom)||s("can't deduce a name to call inherited()",this.declaredClass);y=this.constructor._meta;u=y.bases;x=C.p;if(w!=M){if(C.c!==f&&(x=0,v=u[0],y=v._meta,y.hidden[w]!==
f)){(b=y.chains)&&"string"==typeof b[w]&&s("calling chained method with inherited: "+w,this.declaredClass);do if(y=v._meta,b=v.prototype,y&&(b[w]===f&&b.hasOwnProperty(w)||y.hidden[w]===f))break;while(v=u[++x]);x=v?x:-1}if(v=u[++x])if(b=v.prototype,v._meta&&b.hasOwnProperty(w))d=b[w];else{f=A[w];do if(b=v.prototype,(d=b[w])&&(v._meta?b.hasOwnProperty(w):d!==f))break;while(v=u[++x])}d=v&&d||A[w]}else{if(C.c!==f&&(x=0,(y=u[0]._meta)&&y.ctor!==f)){b=y.chains;for((!b||"manual"!==b.constructor)&&s("calling chained constructor with inherited",
this.declaredClass);(v=u[++x])&&!((y=v._meta)&&y.ctor===f););x=v?x:-1}for(;(v=u[++x])&&!(d=(y=v._meta)?y.ctor:v););d=v&&d}C.c=d;C.p=x;if(d)return!0===c?d:d.apply(this,c||a)}function m(a,c){return"string"==typeof a?this.__inherited(a,c,!0):this.__inherited(a,!0)}function k(a,c,d){var w=this.getInherited(a,c);if(w)return w.apply(this,d||c||a)}function g(a){for(var c=this.constructor._meta.bases,d=0,w=c.length;d<w;++d)if(c[d]===a)return!0;return this instanceof a}function f(a,c){for(var d in c)d!=M&&
c.hasOwnProperty(d)&&(a[d]=c[d]);if(t("bug-for-in-skips-shadowed"))for(var w=b._extraNames,u=w.length;u;)d=w[--u],d!=M&&c.hasOwnProperty(d)&&(a[d]=c[d])}function a(a){E.safeMixin(this.prototype,a);return this}function c(a,c){a instanceof Array||"function"==typeof a||(c=a,a=void 0);c=c||{};a=a||[];return E([this].concat(a),c)}function d(a,c){return function(){var d=arguments,b=d,u=d[0],f,y;y=a.length;var x;if(!(this instanceof d.callee))return w(d);if(c&&(u&&u.preamble||this.preamble)){x=Array(a.length);
x[0]=d;for(f=0;;){if(u=d[0])(u=u.preamble)&&(d=u.apply(this,d)||d);u=a[f].prototype;(u=u.hasOwnProperty("preamble")&&u.preamble)&&(d=u.apply(this,d)||d);if(++f==y)break;x[f]=d}}for(f=y-1;0<=f;--f)u=a[f],(u=(y=u._meta)?y.ctor:u)&&u.apply(this,x?x[f]:d);(u=this.postscript)&&u.apply(this,b)}}function u(a,c){return function(){var d=arguments,b=d,u=d[0];if(!(this instanceof d.callee))return w(d);c&&(u&&(u=u.preamble)&&(b=u.apply(this,b)||b),(u=this.preamble)&&u.apply(this,b));a&&a.apply(this,d);(u=this.postscript)&&
u.apply(this,d)}}function B(a){return function(){var c=arguments,d=0,b,u;if(!(this instanceof c.callee))return w(c);for(;b=a[d];++d)if(b=(u=b._meta)?u.ctor:b){b.apply(this,c);break}(b=this.postscript)&&b.apply(this,c)}}function x(a,c,d){return function(){var w,b,u=0,f=1;d&&(u=c.length-1,f=-1);for(;w=c[u];u+=f)b=w._meta,(w=(b?b.hidden:w.prototype)[a])&&w.apply(this,arguments)}}function y(a){G.prototype=a.prototype;a=new G;G.prototype=null;return a}function w(a){var c=a.callee,d=y(c);c.apply(d,a);return d}
function E(w,k,q){"string"!=typeof w&&(q=k,k=w,w="");q=q||{};var t,G,V,O,U,v,K,C=1,l=k;if("[object Array]"==H.call(k)){C=w;V=[];O=[{cls:0,refs:[]}];v={};for(var e=1,h=k.length,n=0,z,F,N,T;n<h;++n){(z=k[n])?"[object Function]"!=H.call(z)&&s("mixin #"+n+" is not a callable constructor.",C):s("mixin #"+n+" is unknown. Did you use dojo.require to pull it in?",C);F=z._meta?z._meta.bases:[z];N=0;for(z=F.length-1;0<=z;--z)T=F[z].prototype,T.hasOwnProperty("declaredClass")||(T.declaredClass="uniqName_"+I++),
T=T.declaredClass,v.hasOwnProperty(T)||(v[T]={count:0,refs:[],cls:F[z]},++e),T=v[T],N&&N!==T&&(T.refs.push(N),++N.count),N=T;++N.count;O[0].refs.push(N)}for(;O.length;){N=O.pop();V.push(N.cls);for(--e;G=N.refs,1==G.length;){N=G[0];if(!N||--N.count){N=0;break}V.push(N.cls);--e}if(N){n=0;for(h=G.length;n<h;++n)N=G[n],--N.count||O.push(N)}}e&&s("can't build consistent linearization",C);z=k[0];V[0]=z?z._meta&&z===V[V.length-z._meta.bases.length]?z._meta.bases.length:1:0;v=V;V=v[0];C=v.length-V;k=v[C]}else v=
[0],k?"[object Function]"==H.call(k)?(V=k._meta,v=v.concat(V?V.bases:k)):s("base class is not a callable constructor.",w):null!==k&&s("unknown base class. Did you use dojo.require to pull it in?",w);if(k)for(G=C-1;;--G){t=y(k);if(!G)break;V=v[G];(V._meta?f:D)(t,V.prototype);O=new Function;O.superclass=k;O.prototype=t;k=t.constructor=O}else t={};E.safeMixin(t,q);V=q.constructor;V!==A.constructor&&(V.nom=M,t.constructor=V);for(G=C-1;G;--G)(V=v[G]._meta)&&V.chains&&(K=D(K||{},V.chains));t["-chains-"]&&
(K=D(K||{},t["-chains-"]));V=!K||!K.hasOwnProperty(M);v[0]=O=K&&"manual"===K.constructor?B(v):1==v.length?u(q.constructor,V):d(v,V);O._meta={bases:v,hidden:q,chains:K,parents:l,ctor:q.constructor};O.superclass=k&&k.prototype;O.extend=a;O.createSubclass=c;O.prototype=t;t.constructor=O;t.getInherited=m;t.isInstanceOf=g;t.inherited=J;t.__inherited=r;w&&(t.declaredClass=w,b.setObject(w,O));if(K)for(U in K)t[U]&&("string"==typeof K[U]&&U!=M)&&(V=t[U]=x(U,v,"after"===K[U]),V.nom=U);return O}var D=b.mixin,
A=Object.prototype,H=A.toString,G,I=0,M="constructor";G=t("csp-restrictions")?function(){}:new Function;var J=q.config.isDebug?k:r;q.safeMixin=E.safeMixin=function(a,c){var d,w;for(d in c)if(w=c[d],(w!==A[d]||!(d in A))&&d!=M)"[object Function]"==H.call(w)&&(w.nom=d),a[d]=w;if(t("bug-for-in-skips-shadowed")&&c)for(var u=b._extraNames,f=u.length;f;)if(d=u[--f],w=c[d],(w!==A[d]||!(d in A))&&d!=M)"[object Function]"==H.call(w)&&(w.nom=d),a[d]=w;return a};return q.declare=E})},"dojo/_base/kernel":function(){define(["../has",
"./config","require","module"],function(q,t,b,s){var r,m=function(){return this}(),k={},g={},f={config:t,global:m,dijit:k,dojox:g},k={dojo:["dojo",f],dijit:["dijit",k],dojox:["dojox",g]};s=b.map&&b.map[s.id.match(/[^\/]+/)[0]];for(r in s)k[r]?k[r][0]=s[r]:k[r]=[s[r],{}];for(r in k)s=k[r],s[1]._scopeName=s[0],t.noGlobals||(m[s[0]]=s[1]);f.scopeMap=k;f.baseUrl=f.config.baseUrl=b.baseUrl;f.isAsync=b.async;f.locale=t.locale;t="$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/);f.version={major:1,minor:11,patch:2,
flag:"",revision:t?t[0]:NaN,toString:function(){var a=f.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};q("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(f);f.exit=function(){};q("host-webworker");q.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});b="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");
var a;for(t=0;a=b[t++];)console[a]?q("console-as-object")&&(console[a]=Function.prototype.bind.call(console[a],console)):function(){var c=a+"";console[c]="log"in console?function(){var a=Array.prototype.slice.call(arguments);a.unshift(c+":");console.log(a.join(" "))}:function(){};console[c]._fake=!0}();f.deprecated=f.experimental=function(){};f._hasResource={};return f})},"dojo/has":function(){define(["require","module"],function(q,t){var b=q.has||function(){};b.add("dom-addeventlistener",!!document.addEventListener);
b.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);b.add("touch-events","ontouchstart"in document);b.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window);b.add("MSPointer",window.navigator.msPointerEnabled);b.add("device-width",screen.availWidth||innerWidth);var s=document.createElement("form");b.add("dom-attributes-explicit",0==s.attributes.length);b.add("dom-attributes-specified-flag",
0<s.attributes.length&&40>s.attributes.length);b.clearElement=function(b){b.innerHTML="";return b};b.normalize=function(r,m){var k=r.match(/[\?:]|[^:\?]*/g),g=0,f=function(a){var c=k[g++];if(":"==c)return 0;if("?"==k[g++]){if(!a&&b(c))return f();f(!0);return f(a)}return c||0};return(r=f())&&m(r)};b.load=function(b,m,k){b?m([b],k):k()};return b})},"dojo/_base/config":function(){define(["../has","require"],function(q,t){var b={},s=t.rawConfig,r;for(r in s)b[r]=s[r];if(!b.locale&&"undefined"!=typeof navigator&&
(s=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage))b.locale=s.toLowerCase();return b})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(q,t){t.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var b=t("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],s=b.length,r=function(a,c,
d){d||(d=a[0]&&q.scopeMap[a[0]]?q.scopeMap[a.shift()][1]:q.global);try{for(var b=0;b<a.length;b++){var f=a[b];if(!(f in d))if(c)d[f]={};else return;d=d[f]}return d}catch(x){}},m=Object.prototype.toString,k=function(a,c,d){return(d||[]).concat(Array.prototype.slice.call(a,c||0))},g=/\{([^\}]+)\}/g,f={_extraNames:b,_mixin:function(a,c,d){var u,f,x,y={};for(u in c)if(f=c[u],!(u in a)||a[u]!==f&&(!(u in y)||y[u]!==f))a[u]=d?d(f):f;if(t("bug-for-in-skips-shadowed")&&c)for(x=0;x<s;++x)if(u=b[x],f=c[u],
!(u in a)||a[u]!==f&&(!(u in y)||y[u]!==f))a[u]=d?d(f):f;return a},mixin:function(a,c){a||(a={});for(var d=1,b=arguments.length;d<b;d++)f._mixin(a,arguments[d]);return a},setObject:function(a,c,d){var b=a.split(".");a=b.pop();return(d=r(b,!0,d))&&a?d[a]=c:void 0},getObject:function(a,c,d){return!a?d:r(a.split("."),c,d)},exists:function(a,c){return void 0!==f.getObject(a,!1,c)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:Array.isArray||function(a){return"[object Array]"==
m.call(a)},isFunction:function(a){return"[object Function]"===m.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||f.isArray(a)||f.isFunction(a))},isArrayLike:function(a){return!!a&&!f.isString(a)&&!f.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(f.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!f.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,c){for(var d=1,b=arguments.length;d<b;d++)f._mixin(a.prototype,
arguments[d]);return a},_hitchArgs:function(a,c){var d=f._toArray(arguments,2),b=f.isString(c);return function(){var g=f._toArray(arguments),x=b?(a||q.global)[c]:c;return x&&x.apply(a||this,d.concat(g))}},hitch:function(a,c){if(2<arguments.length)return f._hitchArgs.apply(q,arguments);c||(c=a,a=null);if(f.isString(c)){a=a||q.global;if(!a[c])throw['lang.hitch: scope["',c,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[c].apply(a,arguments||[])}}return!a?c:function(){return c.apply(a,
arguments||[])}},delegate:function(){function a(){}return function(c,d){a.prototype=c;var b=new a;a.prototype=null;d&&f._mixin(b,d);return b}}(),_toArray:t("ie")?function(){function a(a,d,b){b=b||[];for(d=d||0;d<a.length;d++)b.push(a[d]);return b}return function(c){return(c.item?a:k).apply(this,arguments)}}():k,partial:function(a){return f.hitch.apply(q,[null].concat(f._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||f.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);
if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var c,d,b;if(f.isArray(a)){c=[];d=0;for(b=a.length;d<b;++d)d in a&&(c[d]=f.clone(a[d]))}else c=a.constructor?new a.constructor:{};return f._mixin(c,a,f.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,c,d){return a.replace(d||g,f.isFunction(c)?c:function(a,d){return f.getObject(d,!1,c)})}};f.mixin(q,f);return f})},
"dojo/sniff":function(){define(["./has"],function(q){var t=navigator,b=t.userAgent,t=t.appVersion,s=parseFloat(t);q.add("air",0<=b.indexOf("AdobeAIR"));q.add("wp",parseFloat(b.split("Windows Phone")[1])||void 0);q.add("msapp",parseFloat(b.split("MSAppHost/")[1])||void 0);q.add("khtml",0<=t.indexOf("Konqueror")?s:void 0);q.add("edge",parseFloat(b.split("Edge/")[1])||void 0);q.add("opr",parseFloat(b.split("OPR/")[1])||void 0);q.add("webkit",!q("wp")&&!q("edge")&&parseFloat(b.split("WebKit/")[1])||void 0);
q.add("chrome",!q("edge")&&!q("opr")&&parseFloat(b.split("Chrome/")[1])||void 0);q.add("android",!q("wp")&&parseFloat(b.split("Android ")[1])||void 0);q.add("safari",0<=t.indexOf("Safari")&&!q("wp")&&!q("chrome")&&!q("android")&&!q("edge")&&!q("opr")?parseFloat(t.split("Version/")[1]):void 0);q.add("mac",0<=t.indexOf("Macintosh"));q.add("quirks","BackCompat"==document.compatMode);if(!q("wp")&&b.match(/(iPhone|iPod|iPad)/)){var r=RegExp.$1.replace(/P/,"p"),m=b.match(/OS ([\d_]+)/)?RegExp.$1:"1",m=
parseFloat(m.replace(/_/,".").replace(/_/g,""));q.add(r,m);q.add("ios",m)}q.add("bb",(0<=b.indexOf("BlackBerry")||0<=b.indexOf("BB10"))&&parseFloat(b.split("Version/")[1])||void 0);q.add("trident",parseFloat(t.split("Trident/")[1])||void 0);q.add("svg","undefined"!==typeof SVGAngle);q("webkit")||(0<=b.indexOf("Opera")&&q.add("opera",9.8<=s?parseFloat(b.split("Version/")[1])||s:s),0<=b.indexOf("Gecko")&&(!q("wp")&&!q("khtml")&&!q("trident")&&!q("edge"))&&q.add("mozilla",s),q("mozilla")&&q.add("ff",
parseFloat(b.split("Firefox/")[1]||b.split("Minefield/")[1])||void 0),document.all&&!q("opera")&&(b=parseFloat(t.split("MSIE ")[1])||void 0,(t=document.documentMode)&&(5!=t&&Math.floor(b)!=t)&&(b=t),q.add("ie",b)),q.add("wii","undefined"!=typeof opera&&opera.wiiremote));return q})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(q,t,b){function s(a){return k[a]=new Function("item","index","array",a)}function r(a){var c=!a;return function(d,b,f){var x=0,y=d&&d.length||
0,w;y&&"string"==typeof d&&(d=d.split(""));"string"==typeof b&&(b=k[b]||s(b));if(f)for(;x<y;++x){if(w=!b.call(f,d[x],x,d),a^w)return!w}else for(;x<y;++x)if(w=!b(d[x],x,d),a^w)return!w;return c}}function m(a){var c=1,d=0,b=0;a||(c=d=b=-1);return function(k,x,y,w){if(w&&0<c)return f.lastIndexOf(k,x,y);w=k&&k.length||0;var E=a?w+b:d;y===g?y=a?d:w+b:0>y?(y=w+y,0>y&&(y=d)):y=y>=w?w+b:y;for(w&&"string"==typeof k&&(k=k.split(""));y!=E;y+=c)if(k[y]==x)return y;return-1}}var k={},g,f={every:r(!1),some:r(!0),
indexOf:m(!0),lastIndexOf:m(!1),forEach:function(a,c,d){var b=0,f=a&&a.length||0;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=k[c]||s(c));if(d)for(;b<f;++b)c.call(d,a[b],b,a);else for(;b<f;++b)c(a[b],b,a)},map:function(a,c,d,b){var f=0,x=a&&a.length||0;b=new (b||Array)(x);x&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=k[c]||s(c));if(d)for(;f<x;++f)b[f]=c.call(d,a[f],f,a);else for(;f<x;++f)b[f]=c(a[f],f,a);return b},filter:function(a,c,d){var b=0,f=a&&a.length||0,x=
[],y;f&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=k[c]||s(c));if(d)for(;b<f;++b)y=a[b],c.call(d,y,b,a)&&x.push(y);else for(;b<f;++b)y=a[b],c(y,b,a)&&x.push(y);return x},clearCache:function(){k={}}};b.mixin(q,f);return f})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(q,t,b,s,r,m,k,g){function f(a,c,d,b,f){b=g.hitch(d,b);if(!a||!a.addEventListener&&!a.attachEvent)return s.after(a||q.global,c,
b,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));a||(a=q.global);if(!f)switch(c){case "keypress":c=B;break;case "mouseenter":c=m.enter;break;case "mouseleave":c=m.leave}return t(a,c,b,f)}function a(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}k.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(c){}return 0==
a.charCode&&!k("opera")});var c={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},d=k("mac")?"metaKey":"ctrlKey",u=function(c,d){var b=g.mixin({},c,d);a(b);b.preventDefault=function(){c.preventDefault()};b.stopPropagation=function(){c.stopPropagation()};return b},B;B=k("events-keypress-typed")?function(a,d){var b=t(a,"keydown",function(a){var b=a.keyCode,f=13!=b&&32!=b&&(27!=b||!k("ie"))&&(48>b||90<b)&&(96>b||111<b)&&(186>b||192<b)&&(219>b||222<b)&&
229!=b;if(f||a.ctrlKey){f=f?0:b;if(a.ctrlKey){if(3==b||13==b)return d.call(a.currentTarget,a);f=95<f&&106>f?f-48:!a.shiftKey&&65<=f&&90>=f?f+32:c[f]||f}b=u(a,{type:"keypress",faux:!0,charCode:f});d.call(a.currentTarget,b);if(k("ie"))try{a.keyCode=b.keyCode}catch(x){}}}),f=t(a,"keypress",function(a){var c=a.charCode;a=u(a,{charCode:32<=c?c:0,faux:!0});return d.call(this,a)});return{remove:function(){b.remove();f.remove()}}}:k("opera")?function(a,c){return t(a,"keypress",function(a){var d=a.which;3==
d&&(d=99);d=32>d&&!a.shiftKey?0:d;a.ctrlKey&&(!a.shiftKey&&65<=d&&90>=d)&&(d+=32);return c.call(this,u(a,{charCode:d}))})}:function(c,d){return t(c,"keypress",function(c){a(c);return d.call(this,c)})};var x={_keypress:B,connect:function(a,c,d,b,u){var x=arguments,g=[],k=0;g.push("string"==typeof x[0]?null:x[k++],x[k++]);var B=x[k+1];g.push("string"==typeof B||"function"==typeof B?x[k++]:null,x[k++]);for(B=x.length;k<B;k++)g.push(x[k]);return f.apply(this,g)},disconnect:function(a){a&&a.remove()},
subscribe:function(a,c,d){return b.subscribe(a,g.hitch(c,d))},publish:function(a,c){return b.publish.apply(b,[a].concat(c))},connectPublisher:function(a,c,d){var b=function(){x.publish(a,arguments)};return d?x.connect(c,d,b):x.connect(c,b)},isCopyKey:function(a){return a[d]}};x.unsubscribe=x.disconnect;g.mixin(q,x);return x})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(q,t,b){function s(a,c,w,u,x){if(u=c.match(/(.*):(.*)/))return c=u[2],
u=u[1],g.selector(u,c).call(x,a,w);b("touch")&&(f.test(c)&&(w=I(w)),!b("event-orientationchange")&&"orientationchange"==c&&(c="resize",a=window,w=I(w)));B&&(w=B(w));if(a.addEventListener){var y=c in d,D=y?d[c]:c;a.addEventListener(D,w,y);return{remove:function(){a.removeEventListener(D,w,y)}}}if(E&&a.attachEvent)return E(a,"on"+c,w);throw Error("Target must be an event emitter");}function r(){this.cancelable=!1;this.defaultPrevented=!0}function m(){this.bubbles=!1}var k=window.ScriptEngineMajorVersion;
b.add("jscript",k&&k()+ScriptEngineMinorVersion()/10);b.add("event-orientationchange",b("touch")&&!b("android"));b.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);b.add("event-focusin",function(a,c,d){return"onfocusin"in d});b("touch")&&b.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var c=new a;c.target=null;return null===c.target}catch(d){return!1}});
var g=function(a,c,d,b){return"function"==typeof a.on&&"function"!=typeof c&&!a.nodeType?a.on(c,d):g.parse(a,c,d,s,b,this)};g.pausable=function(a,c,d,b){var w;a=g(a,c,function(){if(!w)return d.apply(this,arguments)},b);a.pause=function(){w=!0};a.resume=function(){w=!1};return a};g.once=function(a,c,d,b){var w=g(a,c,function(){w.remove();return d.apply(this,arguments)});return w};g.parse=function(a,c,d,b,w,f){var u;if(c.call)return c.call(f,a,d);c instanceof Array?u=c:-1<c.indexOf(",")&&(u=c.split(/\s*,\s*/));
if(u){var x=[];c=0;for(var y;y=u[c++];)x.push(g.parse(a,y,d,b,w,f));x.remove=function(){for(var a=0;a<x.length;a++)x[a].remove()};return x}return b(a,c,d,w,f)};var f=/^touch/;g.matches=function(a,c,d,b,w){w=w&&"function"==typeof w.matches?w:t.query;b=!1!==b;1!=a.nodeType&&(a=a.parentNode);for(;!w.matches(a,c,d);)if(a==d||!1===b||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};g.selector=function(a,c,d){return function(b,w){function f(c){return g.matches(c,a,b,d,u)}var u="function"==typeof a?{matches:a}:
this,x=c.bubble;return x?g(b,x(f),w):g(b,c,function(a){var c=f(a.target);if(c)return a.selectorTarget=c,w.call(c,a)})}};var a=[].slice,c=g.emit=function(c,d,b){var w=a.call(arguments,2),f="on"+d;if("parentNode"in c){var u=w[0]={},x;for(x in b)u[x]=b[x];u.preventDefault=r;u.stopPropagation=m;u.target=c;u.type=d;b=u}do c[f]&&c[f].apply(c,w);while(b&&b.bubbles&&(c=c.parentNode));return b&&b.cancelable&&b},d=b("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!b("event-stopimmediatepropagation"))var u=
function(){this.modified=this.immediatelyStopped=!0},B=function(a){return function(c){if(!c.immediatelyStopped)return c.stopImmediatePropagation=u,a.apply(this,arguments)}};if(b("dom-addeventlistener"))g.emit=function(a,d,b){if(a.dispatchEvent&&document.createEvent){var w=(a.ownerDocument||document).createEvent("HTMLEvents");w.initEvent(d,!!b.bubbles,!!b.cancelable);for(var f in b)f in w||(w[f]=b[f]);return a.dispatchEvent(w)&&w}return c.apply(g,arguments)};else{g._fixEvent=function(a,c){a||(a=(c&&
(c.ownerDocument||c.document||c).parentWindow||window).event);if(!a)return a;try{x&&(a.type==x.type&&a.srcElement==x.target)&&(a=x)}catch(d){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=c||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=D,a.preventDefault=A),a.type){case "keypress":var b="charCode"in a?a.charCode:a.keyCode;10==b?(b=0,a.keyCode=13):13==b||27==b?b=0:3==b&&(b=99);a.charCode=
b;b=a;b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}return a};var x,y=function(a){this.handle=a};y.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var w=function(a){return function(c){c=g._fixEvent(c,this);var d=a.call(this,c);c.modified&&(x||setTimeout(function(){x=null}),x=c);return d}},E=function(a,c,d){d=w(d);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>b("jscript"))&&!b("config-_allow_leaks")){"undefined"==
typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var f=a[c];if(!f||!f.listeners){var u=f,f=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");f.listeners=[];a[c]=f;f.global=this;u&&f.listeners.push(_dojoIEListeners_.push(u)-1)}f.listeners.push(a=f.global._dojoIEListeners_.push(d)-1);return new y(a)}return q.after(a,c,d,!0)},D=function(){this.cancelBubble=
!0},A=g._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(b("touch"))var H=function(){},G=window.orientation,I=function(a){return function(c){var d=c.corrected;if(!d){var w=c.type;try{delete c.type}catch(f){}if(c.type){if(b("touch-can-modify-event-delegate"))H.prototype=c,d=new H;else{var d={},u;for(u in c)d[u]=c[u]}d.preventDefault=function(){c.preventDefault()};d.stopPropagation=
function(){c.stopPropagation()}}else d=c,d.type=w;c.corrected=d;if("resize"==w){if(G==window.orientation)return null;G=window.orientation;d.type="orientationchange";return a.call(this,d)}"rotation"in d||(d.rotation=0,d.scale=1);var w=d.changedTouches[0],x;for(x in w)delete d[x],d[x]=w[x]}return a.call(this,d)}};return g})},"dojo/topic":function(){define(["./Evented"],function(q){var t=new q;return{publish:function(b,s){return t.emit.apply(t,arguments)},subscribe:function(b,s){return t.on.apply(t,
arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(q,t){function b(){}var s=q.after;b.prototype={on:function(b,m){return t.parse(this,b,m,function(b,g){return s(b,"on"+g,m,!0)})},emit:function(b,m){var k=[this];k.push.apply(k,arguments);return t.emit.apply(t,k)}};return b})},"dojo/aspect":function(){define([],function(){function q(b,g,f,a){var c=b[g],d="around"==g,u;if(d){var B=f(function(){return c.advice(this,arguments)});u={remove:function(){B&&(B=b=f=null)},advice:function(a,
d){return B?B.apply(a,d):c.advice(a,d)}}}else u={remove:function(){if(u.advice){var a=u.previous,c=u.next;!c&&!a?delete b[g]:(a?a.next=c:b[g]=c,c&&(c.previous=a));b=f=u.advice=null}},id:b.nextId++,advice:f,receiveArguments:a};if(c&&!d)if("after"==g){for(;c.next&&(c=c.next););c.next=u;u.previous=c}else"before"==g&&(b[g]=u,u.next=c,c.previous=u);else b[g]=u;return u}function t(k){return function(g,f,a,c){var d=g[f],u;if(!d||d.target!=g)g[f]=u=function(){for(var a=u.nextId,c=arguments,d=u.before;d;)d.advice&&
(c=d.advice.apply(this,c)||c),d=d.next;if(u.around)var w=u.around.advice(this,c);for(d=u.after;d&&d.id<a;){if(d.advice)if(d.receiveArguments)var f=d.advice.apply(this,c),w=f===b?w:f;else w=d.advice.call(this,w,c);d=d.next}return w},d&&(u.around={advice:function(a,c){return d.apply(a,c)}}),u.target=g,u.nextId=u.nextId||0;g=q(u||d,k,a,c);a=null;return g}}var b,s=t("after"),r=t("before"),m=t("around");return{before:r,around:m,after:s}})},"dojo/_base/event":function(){define(["./kernel","../on","../has",
"../dom-geometry"],function(q,t,b,s){if(t._fixEvent){var r=t._fixEvent;t._fixEvent=function(b,g){(b=r(b,g))&&s.normalizeEvent(b);return b}}var m={fix:function(b,g){return t._fixEvent?t._fixEvent(b,g):b},stop:function(k){b("dom-addeventlistener")||k&&k.preventDefault?(k.preventDefault(),k.stopPropagation()):(k=k||window.event,k.cancelBubble=!0,t._preventDefault.call(k))}};q.fixEvent=m.fix;q.stopEvent=m.stop;return m})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],
function(q,t,b,s){function r(a,c,d,b,f,x){x=x||"px";a=a.style;isNaN(c)||(a.left=c+x);isNaN(d)||(a.top=d+x);0<=b&&(a.width=b+x);0<=f&&(a.height=f+x)}function m(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function k(a){return"border-box"==g.boxModel||"table"==a.tagName.toLowerCase()||m(a)}var g={boxModel:"content-box"};q("ie")&&(g.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");g.getPadExtents=
function(a,c){a=b.byId(a);var d=c||s.getComputedStyle(a),f=s.toPixelValue,g=f(a,d.paddingLeft),x=f(a,d.paddingTop),y=f(a,d.paddingRight),d=f(a,d.paddingBottom);return{l:g,t:x,r:y,b:d,w:g+y,h:x+d}};g.getBorderExtents=function(a,c){a=b.byId(a);var d=s.toPixelValue,f=c||s.getComputedStyle(a),g="none"!=f.borderLeftStyle?d(a,f.borderLeftWidth):0,x="none"!=f.borderTopStyle?d(a,f.borderTopWidth):0,y="none"!=f.borderRightStyle?d(a,f.borderRightWidth):0,d="none"!=f.borderBottomStyle?d(a,f.borderBottomWidth):
0;return{l:g,t:x,r:y,b:d,w:g+y,h:x+d}};g.getPadBorderExtents=function(a,c){a=b.byId(a);var d=c||s.getComputedStyle(a),f=g.getPadExtents(a,d),d=g.getBorderExtents(a,d);return{l:f.l+d.l,t:f.t+d.t,r:f.r+d.r,b:f.b+d.b,w:f.w+d.w,h:f.h+d.h}};g.getMarginExtents=function(a,c){a=b.byId(a);var d=c||s.getComputedStyle(a),f=s.toPixelValue,g=f(a,d.marginLeft),x=f(a,d.marginTop),y=f(a,d.marginRight),d=f(a,d.marginBottom);return{l:g,t:x,r:y,b:d,w:g+y,h:x+d}};g.getMarginBox=function(a,c){a=b.byId(a);var d=c||s.getComputedStyle(a),
f=g.getMarginExtents(a,d),k=a.offsetLeft-f.l,x=a.offsetTop-f.t,y=a.parentNode,w=s.toPixelValue;if(q("mozilla")){var E=parseFloat(d.left),d=parseFloat(d.top);!isNaN(E)&&!isNaN(d)?(k=E,x=d):y&&y.style&&(y=s.getComputedStyle(y),"visible"!=y.overflow&&(k+="none"!=y.borderLeftStyle?w(a,y.borderLeftWidth):0,x+="none"!=y.borderTopStyle?w(a,y.borderTopWidth):0))}else if((q("opera")||8==q("ie")&&!q("quirks"))&&y)y=s.getComputedStyle(y),k-="none"!=y.borderLeftStyle?w(a,y.borderLeftWidth):0,x-="none"!=y.borderTopStyle?
w(a,y.borderTopWidth):0;return{l:k,t:x,w:a.offsetWidth+f.w,h:a.offsetHeight+f.h}};g.getContentBox=function(a,c){a=b.byId(a);var d=c||s.getComputedStyle(a),f=a.clientWidth,k=g.getPadExtents(a,d),x=g.getBorderExtents(a,d);f?(d=a.clientHeight,x.w=x.h=0):(f=a.offsetWidth,d=a.offsetHeight);q("opera")&&(k.l+=x.l,k.t+=x.t);return{l:k.l,t:k.t,w:f-k.w-x.w,h:d-k.h-x.h}};g.setContentSize=function(a,c,d){a=b.byId(a);var f=c.w;c=c.h;k(a)&&(d=g.getPadBorderExtents(a,d),0<=f&&(f+=d.w),0<=c&&(c+=d.h));r(a,NaN,NaN,
f,c)};var f={l:0,t:0,w:0,h:0};g.setMarginBox=function(a,c,d){a=b.byId(a);var u=d||s.getComputedStyle(a);d=c.w;var B=c.h,x=k(a)?f:g.getPadBorderExtents(a,u),u=g.getMarginExtents(a,u);if(q("webkit")&&m(a)){var y=a.style;0<=d&&!y.width&&(y.width="4px");0<=B&&!y.height&&(y.height="4px")}0<=d&&(d=Math.max(d-x.w-u.w,0));0<=B&&(B=Math.max(B-x.h-u.h,0));r(a,c.l,c.t,d,B)};g.isBodyLtr=function(a){a=a||t.doc;return"ltr"==(t.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};g.docScroll=function(a){a=
a||t.doc;var c=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=q("quirks")?t.body(a):a.documentElement)&&{x:g.fixIeBiDiScrollLeft(c.scrollLeft||0,a),y:c.scrollTop||0}};g.getIeDocumentElementOffset=function(a){return{x:0,y:0}};g.fixIeBiDiScrollLeft=function(a,c){c=c||t.doc;var d=q("ie");if(d&&!g.isBodyLtr(c)){var b=q("quirks"),f=b?t.body(c):c.documentElement,x=t.global;6==d&&(!b&&x.frameElement&&f.scrollHeight>f.clientHeight)&&(a+=f.clientLeft);return 8>
d||b?a+f.clientWidth-f.scrollWidth:-a}return a};g.position=function(a,c){a=b.byId(a);var d=t.body(a.ownerDocument),f=a.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-f.left,h:f.bottom-f.top};9>q("ie")&&(f.x-=q("quirks")?d.clientLeft+d.offsetLeft:0,f.y-=q("quirks")?d.clientTop+d.offsetTop:0);c&&(d=g.docScroll(a.ownerDocument),f.x+=d.x,f.y+=d.y);return f};g.getMarginSize=function(a,c){a=b.byId(a);var d=g.getMarginExtents(a,c||s.getComputedStyle(a)),f=a.getBoundingClientRect();return{w:f.right-
f.left+d.w,h:f.bottom-f.top+d.h}};g.normalizeEvent=function(a){"layerX"in a||(a.layerX=a.offsetX,a.layerY=a.offsetY);if(!("pageX"in a)){var c=a.target,c=c&&c.ownerDocument||document,d=q("quirks")?c.body:c.documentElement;a.pageX=a.clientX+g.fixIeBiDiScrollLeft(d.scrollLeft||0,c);a.pageY=a.clientY+(d.scrollTop||0)}};return g})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(q,t,b){var s={global:q.global,doc:q.global.document||null,body:function(b){b=b||q.doc;return b.body||
b.getElementsByTagName("body")[0]},setContext:function(b,m){q.global=s.global=b;q.doc=s.doc=m},withGlobal:function(b,m,k,g){var f=q.global;try{return q.global=s.global=b,s.withDoc.call(null,b.document,m,k,g)}finally{q.global=s.global=f}},withDoc:function(r,m,k,g){var f=s.doc,a=b("quirks"),c=b("ie"),d,u,B;try{q.doc=s.doc=r;q.isQuirks=b.add("quirks","BackCompat"==q.doc.compatMode,!0,!0);if(b("ie")&&(B=r.parentWindow)&&B.navigator)d=parseFloat(B.navigator.appVersion.split("MSIE ")[1])||void 0,(u=r.documentMode)&&
(5!=u&&Math.floor(d)!=u)&&(d=u),q.isIE=b.add("ie",d,!0,!0);k&&"string"==typeof m&&(m=k[m]);return m.apply(k,g||[])}finally{q.doc=s.doc=f,q.isQuirks=b.add("quirks",a,!0,!0),q.isIE=b.add("ie",c,!0,!0)}}};t.mixin(q,s);return s})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(q,t,b){if(7>=q("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(s){}var r={};q("ie")?r.byId=function(b,g){if("string"!=typeof b)return b;var f=g||t.doc,a=b&&f.getElementById(b);
if(a&&(a.attributes.id.value==b||a.id==b))return a;f=f.all[b];if(!f||f.nodeName)f=[f];for(var c=0;a=f[c++];)if(a.attributes&&a.attributes.id&&a.attributes.id.value==b||a.id==b)return a}:r.byId=function(b,g){return("string"==typeof b?(g||t.doc).getElementById(b):b)||null};b=b.global.document||null;q.add("dom-contains",!(!b||!b.contains));r.isDescendant=q("dom-contains")?function(b,g){return!(!(g=r.byId(g))||!g.contains(r.byId(b)))}:function(b,g){try{b=r.byId(b);for(g=r.byId(g);b;){if(b==g)return!0;
b=b.parentNode}}catch(f){}return!1};q.add("css-user-select",function(b,g,f){if(!f)return!1;b=f.style;g=["Khtml","O","Moz","Webkit"];f=g.length;var a="userSelect";do if("undefined"!==typeof b[a])return a;while(f--&&(a=g[f]+"UserSelect"));return!1});var m=q("css-user-select");r.setSelectable=m?function(b,g){r.byId(b).style[m]=g?"":"none"}:function(b,g){b=r.byId(b);var f=b.getElementsByTagName("*"),a=f.length;if(g)for(b.removeAttribute("unselectable");a--;)f[a].removeAttribute("unselectable");else for(b.setAttribute("unselectable",
"on");a--;)f[a].setAttribute("unselectable","on")};return r})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(q,t){function b(d,b,f){b=b.toLowerCase();if("auto"==f){if("height"==b)return d.offsetHeight;if("width"==b)return d.offsetWidth}if("fontweight"==b)switch(f){case 700:return"bold";default:return"normal"}b in a||(a[b]=c.test(b));return a[b]?m(d,f):f}var s,r={};s=q("webkit")?function(a){var c;if(1==a.nodeType){var d=a.ownerDocument.defaultView;c=d.getComputedStyle(a,null);!c&&
a.style&&(a.style.display="",c=d.getComputedStyle(a,null))}return c||{}}:q("ie")&&(9>q("ie")||q("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};r.getComputedStyle=s;var m;m=q("ie")?function(a,c){if(!c)return 0;if("medium"==c)return 4;if(c.slice&&"px"==c.slice(-2))return parseFloat(c);var d=a.style,b=a.runtimeStyle,w=d.left,f=b.left;b.left=a.currentStyle.left;try{d.left=c,c=d.pixelLeft}catch(D){c=
0}d.left=w;b.left=f;return c}:function(a,c){return parseFloat(c)||0};r.toPixelValue=m;var k=function(a,c){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){return c?{}:null}},g=9>q("ie")||10>q("ie")&&q("quirks")?function(a){try{return k(a).Opacity/100}catch(c){return 1}}:function(a){return s(a).opacity},f=9>q("ie")||10>q("ie")&&q("quirks")?function(a,c){""===c&&(c=1);var d=100*c;1===c?(a.style.zoom="",k(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,
""))):(a.style.zoom=1,k(a)?k(a,1).Opacity=d:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+d+")",k(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(d=a.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&f(d,c);return c}:function(a,c){return a.style.opacity=c},a={left:!0,top:!0},c=/margin|padding|width|height|max|min|offset/,d={cssFloat:1,styleFloat:1,"float":1};r.get=function(a,c){var f=t.byId(a),y=arguments.length;if(2==y&&"opacity"==c)return g(f);c=d[c]?"cssFloat"in
f.style?"cssFloat":"styleFloat":c;var w=r.getComputedStyle(f);return 1==y?w:b(f,c,w[c]||f.style[c])};r.set=function(a,c,b){var y=t.byId(a),w=arguments.length,g="opacity"==c;c=d[c]?"cssFloat"in y.style?"cssFloat":"styleFloat":c;if(3==w)return g?f(y,b):y.style[c]=b;for(var D in c)r.set(a,D,c[D]);return r.getComputedStyle(y)};return r})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(q,t,b,s,r){function m(b,g){var f=function(a,c){return t(a,b,function(d){if(g)return g(d,
c);if(!s.isDescendant(d.relatedTarget,a))return c.call(this,d)})};f.bubble=function(a){return m(b,function(c,d){var b=a(c.target),f=c.relatedTarget;if(b&&b!=(f&&1==f.nodeType&&a(f)))return d.call(b,c)})};return f}b.add("dom-quirks",r.doc&&"BackCompat"==r.doc.compatMode);b.add("events-mouseenter",r.doc&&"onmouseenter"in r.doc.createElement("div"));b.add("events-mousewheel",r.doc&&"onmousewheel"in r.doc);r=b("dom-quirks")&&b("ie")||!b("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(b,
g){return b.button&g},isLeft:function(b){return b.button&1},isMiddle:function(b){return b.button&4},isRight:function(b){return b.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(b,g){return b.button==g},isLeft:function(b){return 0==b.button},isMiddle:function(b){return 1==b.button},isRight:function(b){return 2==b.button}};q.mouseButtons=r;q=b("events-mousewheel")?"mousewheel":function(b,g){return t(b,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;g.call(this,b)})};return{_eventHandler:m,
enter:m("mouseover"),leave:m("mouseout"),wheel:q,isLeft:r.isLeft,isMiddle:r.isMiddle,isRight:r.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(q,t,b){q._name="browser";t.mixin(q,{isBrowser:!0,isFF:b("ff"),isIE:b("ie"),isKhtml:b("khtml"),isWebKit:b("webkit"),isMozilla:b("mozilla"),isMoz:b("mozilla"),isOpera:b("opera"),isSafari:b("safari"),isChrome:b("chrome"),isMac:b("mac"),isIos:b("ios"),isAndroid:b("android"),isWii:b("wii"),isQuirks:b("quirks"),isAir:b("air")});
return b})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(q,t){return q.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,
NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(q,t,b,s){var r=q.Color=function(b){b&&this.setColor(b)};
r.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:s.transparentColor||[0,0,0,0]};t.extend(r,{r:255,g:255,b:255,a:1,_set:function(b,k,g,f){this.r=b;this.g=k;this.b=g;this.a=f},setColor:function(b){t.isString(b)?r.fromString(b,this):t.isArray(b)?r.fromArray(b,
this):(this._set(b.r,b.g,b.b,b.a),b instanceof r||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+b.map(["r","g","b"],function(b){b=this[b].toString(16);return 2>b.length?"0"+b:b},this).join("")},toCss:function(b){var k=this.r+", "+this.g+", "+this.b;return(b?"rgba("+k+", "+this.a:"rgb("+k)+")"},toString:function(){return this.toCss(!0)}});r.blendColors=q.blendColors=
function(m,k,g,f){var a=f||new r;b.forEach(["r","g","b","a"],function(c){a[c]=m[c]+(k[c]-m[c])*g;"a"!=c&&(a[c]=Math.round(a[c]))});return a.sanitize()};r.fromRgb=q.colorFromRgb=function(b,k){var g=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return g&&r.fromArray(g[1].split(/\s*,\s*/),k)};r.fromHex=q.colorFromHex=function(m,k){var g=k||new r,f=4==m.length?4:8,a=(1<<f)-1;m=Number("0x"+m.substr(1));if(isNaN(m))return null;b.forEach(["b","g","r"],function(c){var d=m&a;m>>=f;g[c]=4==f?17*d:d});g.a=
1;return g};r.fromArray=q.colorFromArray=function(b,k){var g=k||new r;g._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(g.a)&&(g.a=1);return g.sanitize()};r.fromString=q.colorFromString=function(b,k){var g=r.named[b];return g&&r.fromArray(g,k)||r.fromRgb(b,k)||r.fromHex(b,k)};return r})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(q,t,b,s,r,m){function k(a,c){var d=c.parentNode;d&&d.insertBefore(a,c)}function g(a){if("innerHTML"in
a)try{a.innerHTML="";return}catch(c){}for(var d;d=a.lastChild;)a.removeChild(d)}var f={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},a=/<\s*([\w\:]+)/,c={},d=0,u="__"+t._scopeName+"ToDomId",B;for(B in f)f.hasOwnProperty(B)&&(t=f[B],t.pre="option"==B?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+t.join("\x3e\x3c")+
"\x3e",t.post="\x3c/"+t.reverse().join("\x3e\x3c/")+"\x3e");var x;8>=b("ie")&&(x=function(a){a.__dojo_html5_tested="yes";var c=y("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==c.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(c){a.createElement(c)});w(c)});q.toDom=function(w,y){y=y||s.doc;var A=y[u];A||(y[u]=A=++d+"",c[A]=y.createElement("div"));
8>=b("ie")&&!y.__dojo_html5_tested&&y.body&&x(y);w+="";var g=w.match(a),k=g?g[1].toLowerCase():"",A=c[A];if(g&&f[k]){g=f[k];A.innerHTML=g.pre+w+g.post;for(g=g.length;g;--g)A=A.firstChild}else A.innerHTML=w;if(1==A.childNodes.length)return A.removeChild(A.firstChild);for(k=y.createDocumentFragment();g=A.firstChild;)k.appendChild(g);return k};q.place=function(a,c,d){c=r.byId(c);"string"==typeof a&&(a=/^\s*</.test(a)?q.toDom(a,c.ownerDocument):r.byId(a));if("number"==typeof d){var b=c.childNodes;!b.length||
b.length<=d?c.appendChild(a):k(a,b[0>d?0:d])}else switch(d){case "before":k(a,c);break;case "after":d=a;(b=c.parentNode)&&(b.lastChild==c?b.appendChild(d):b.insertBefore(d,c.nextSibling));break;case "replace":c.parentNode.replaceChild(a,c);break;case "only":q.empty(c);c.appendChild(a);break;case "first":if(c.firstChild){k(a,c.firstChild);break}default:c.appendChild(a)}return a};var y=q.create=function(a,c,d,b){var w=s.doc;d&&(d=r.byId(d),w=d.ownerDocument);"string"==typeof a&&(a=w.createElement(a));
c&&m.set(a,c);d&&q.place(a,d,b);return a};q.empty=function(a){g(r.byId(a))};var w=q.destroy=function(a){if(a=r.byId(a)){var c=a;a=a.parentNode;c.firstChild&&g(c);a&&(b("ie")&&a.canHaveChildren&&"removeNode"in c?c.removeNode(!1):a.removeChild(c))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(q,t,b,s,r,m){function k(a,c){var d=a.getAttributeNode&&a.getAttributeNode(c);return!!d&&d.specified}var g={innerHTML:1,textContent:1,className:1,
htmlFor:t("ie"),value:1},f={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};q.has=function(a,c){var d=c.toLowerCase();return g[m.names[d]||c]||k(s.byId(a),f[d]||c)};q.get=function(a,c){a=s.byId(a);var d=c.toLowerCase(),u=m.names[d]||c,B=a[u];if(g[u]&&"undefined"!=typeof B)return B;if("textContent"==u)return m.get(a,u);if("href"!=u&&("boolean"==typeof B||b.isFunction(B)))return B;d=f[d]||c;return k(a,d)?a.getAttribute(d):null};q.set=function(a,c,d){a=s.byId(a);if(2==arguments.length){for(var u in c)q.set(a,
u,c[u]);return a}u=c.toLowerCase();var k=m.names[u]||c,x=g[k];if("style"==k&&"string"!=typeof d)return r.set(a,d),a;if(x||"boolean"==typeof d||b.isFunction(d))return m.set(a,c,d);a.setAttribute(f[u]||c,d);return a};q.remove=function(a,c){s.byId(a).removeAttribute(f[c.toLowerCase()]||c)};q.getNodeProp=function(a,c){a=s.byId(a);var d=c.toLowerCase(),b=m.names[d]||c;if(b in a&&"href"!=b)return a[b];d=f[d]||c;return k(a,d)?a.getAttribute(d):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),
function(q,t,b,s,r,m,k,g){function f(a){var c="";a=a.childNodes;for(var d=0,b;b=a[d];d++)8!=b.nodeType&&(c=1==b.nodeType?c+f(b):c+b.nodeValue);return c}var a={},c=1,d=t._scopeName+"attrid";b.add("dom-textContent",function(a,c,d){return"textContent"in d});q.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};q.get=function(a,c){a=r.byId(a);var d=c.toLowerCase(),
d=q.names[d]||c;return"textContent"==d&&!b("dom-textContent")?f(a):a[d]};q.set=function(f,B,x){f=r.byId(f);if(2==arguments.length&&"string"!=typeof B){for(var y in B)q.set(f,y,B[y]);return f}y=B.toLowerCase();y=q.names[y]||B;if("style"==y&&"string"!=typeof x)return m.set(f,x),f;if("innerHTML"==y)return b("ie")&&f.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(k.empty(f),f.appendChild(k.toDom(x,f.ownerDocument))):f[y]=x,f;if("textContent"==y&&!b("dom-textContent"))return k.empty(f),
f.appendChild(f.ownerDocument.createTextNode(x)),f;if(s.isFunction(x)){var w=f[d];w||(w=c++,f[d]=w);a[w]||(a[w]={});var E=a[w][y];if(E)g.disconnect(E);else try{delete f[y]}catch(D){}x?a[w][y]=g.connect(f,y,x):f[y]=null;return f}f[y]=x;return f}})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(q,t,b){var s=function(){return this}(),r=s.location,m=r.pathname,k=r.protocol,r={version:"3.18",_appBaseUrl:k+"//"+r.host+m.substring(0,m.lastIndexOf(m.split("/")[m.split("/").length-
1]))};t.noGlobals||(s.esri=r);q.isAsync||b.add("extend-esri",1);(r.dijit=r.dijit||{})._arcgisUrl=("http:"===k||"https:"===k?k:"http:")+"//www.arcgis.com/sharing/rest";return r})},"esri/sniff":function(){define(["dojo/_base/sniff","./kernel"],function(q,t){var b=function(){return this}(),s=q("ff"),r=q("ie"),m=void 0===r&&7<=q("trident"),k=q("edge"),g=q("webkit"),f=q("opera"),a=q("chrome"),c=q("safari"),d=navigator.userAgent,u;(u=d.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&q.add("esri-iphone",
parseFloat(u[2].replace("_",".")));(u=d.match(/Android\s+(\d+\.\d+)/i))&&q.add("esri-android",parseFloat(u[1]));(u=d.match(/Fennec\/(\d+\.\d+)/i))&&q.add("esri-fennec",parseFloat(u[1]));0<=d.indexOf("BlackBerry")&&0<=d.indexOf("WebKit")&&q.add("esri-blackberry",1);q.add("esri-touch",q("esri-iphone")||q("esri-android")||q("esri-blackberry")||6<=q("esri-fennec")||(s||g)&&document.createTouch?!0:!1);(u=d.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&q.add("esri-mobile",u);
q.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);t._getDOMAccessor=function(a){var c="";s?c="Moz":g?c="Webkit":r?c="ms":f&&(c="O");return c+a.charAt(0).toUpperCase()+a.substr(1)};q.add("esri-phonegap",!!b.cordova);q.add("esri-cors",q("esri-phonegap")||b.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);q.add("esri-file-upload",b.FormData&&b.FileList?!0:!1);q.add("esri-workers",b.Worker?!0:!1);q.add("esri-transforms",m||k||9<=r||3.5<=s||4<=a||3.1<=c||10.5<=f||3.2<=q("esri-iphone")||
2.1<=q("esri-android"));q.add("esri-transitions",m||k||10<=r||4<=s||4<=a||3.1<=c||10.5<=f||3.2<=q("esri-iphone")||2.1<=q("esri-android"));q.add("esri-transforms3d",m||k||10<=s||12<=a||4<=c||3.2<=q("esri-iphone")||3<=q("esri-android"));q.add("esri-url-encodes-apostrophe",function(){if(b.document)return!1;var a=b.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")});3>q("esri-android")&&(q.add("esri-transforms",!1,!1,!0),q.add("esri-transitions",!1,!1,!0),q.add("esri-transforms3d",
!1,!1,!0));q.add("esri-will-change",q("esri-transforms")&&(52<=a||9.1<=c));t._css=function(d){var b=q("esri-transforms3d");if(void 0!==d&&null!==d)b=d;else if(b&&(a||c&&!q("esri-iphone")))b=!1;var u=b?"translate3d(":"translate(",w=b?a?",-1px)":",0px)":")",k=b?"scale3d(":"scale(",D=b?",1)":")",A=b?"rotate3d(0,0,1,":"rotate(",m=b?"matrix3d(":"matrix(",t=b?",0,0,":",",I=b?",0,0,0,0,1,0,":",",M=b?",0,1)":")";return{names:{transition:g&&"-webkit-transition"||s&&"MozTransition"||f&&"OTransition"||r&&"msTransition"||
"transition",transform:g&&"-webkit-transform"||s&&"MozTransform"||f&&"OTransform"||r&&"msTransform"||"transform",transformName:g&&"-webkit-transform"||s&&"-moz-transform"||f&&"-o-transform"||r&&"-ms-transform"||"transform",origin:g&&"-webkit-transform-origin"||s&&"MozTransformOrigin"||f&&"OTransformOrigin"||r&&"msTransformOrigin"||"transformOrigin",endEvent:g&&"webkitTransitionEnd"||s&&"transitionend"||f&&"oTransitionEnd"||r&&"MSTransitionEnd"||"transitionend"},translate:function(a,c){return u+a+
"px,"+c+"px"+w},scale:function(a){return k+a+","+a+D},rotate:function(a){return A+a+"deg)"},matrix:function(a){return m+a.xx+","+a.xy+t+a.yx+","+a.yy+I+a.dx.toFixed(10)+(s?"px,":",")+a.dy.toFixed(10)+(s?"px":"")+M},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var c=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(c.length,a.indexOf(",")))}}};q("extend-esri")&&(t.isiPhone=q("esri-iphone"),t.isAndroid=q("esri-android"),t.isFennec=q("esri-fennec"),t.isBlackBerry=
q("esri-blackberry"),t.isTouchEnabled=q("esri-touch"),t.isPointerEnabled=q("esri-pointer"),t._hasCors=q("esri-cors"),t._hasFileUpload=q("esri-file-upload"),t._hasTransforms=q("esri-transforms"),t._hasTransitions=q("esri-transitions"),t._has3DTransforms=q("esri-transforms3d"));return q})},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(q,t,b,s,r){q=q([r],{declaredClass:"esri.toolbars._Toolbar",constructor:function(b){this.map=
b},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(b,k,g,f){var a=this.map;b&&(this._mapNavState={isDoubleClickZoom:a.isDoubleClickZoom,isClickRecenter:a.isClickRecenter,isPan:a.isPan,isRubberBandZoom:a.isRubberBandZoom,isKeyboardNavigation:a.isKeyboardNavigation,isScrollWheelZoom:a.isScrollWheelZoom},a.disableDoubleClickZoom(),
a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),a.disableKeyboardNavigation());k&&a.hideZoomSlider();g&&a.hidePanArrows();f&&a.graphics.disableMouseEvents()},_activateMapTools:function(b,k,g,f){var a=this.map,c=this._mapNavState;b&&c&&(c.isDoubleClickZoom&&a.enableDoubleClickZoom(),c.isClickRecenter&&a.enableClickRecenter(),c.isPan&&a.enablePan(),c.isRubberBandZoom&&a.enableRubberBandZoom(),c.isKeyboardNavigation&&a.enableKeyboardNavigation(),c.isScrollWheelZoom&&a.enableScrollWheelZoom());
k&&a.showZoomSlider();g&&a.showPanArrows();f&&a.graphics.enableMouseEvents()}});b("extend-esri")&&t.setObject("toolbars._Toolbar",q,s);return q})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(q,t,b,s,r,m){q=q([s],{declaredClass:"esri.Evented",registerConnectEvents:function(){var b=this.constructor,g=this.constructor._meta.parents,f=[{}],a={},c,d,u=function(a,c){t.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var b=
a[d];b._meta&&b._meta.parents&&u(b._meta.parents,c);b.prototype._eventMap&&c.push(t.mixin({},b.prototype._eventMap))}return c};if(!b._onMap){u(g,f);f.push(this._eventMap);g=t.mixin.apply(this,f);for(c in this)/^on\w/.test(c)&&t.isFunction(this[c])&&(f=this._hyphenLower(c).toLowerCase(),g[f]||(a[f]={method:c}));for(d in g)c=this._onCamelCase(d),a[d]={method:c,argKeys:g[d]};b._onMap=a;return b._onMap}},on:function(k,g){if(-1<k.indexOf(",")){for(var f=k.split(/\s*,\s*/),a=f.length,c=[];a--;)c.push(this.on(f[a],
g));c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c}var f=this.constructor._onMap||this.registerConnectEvents(),a="string"==typeof k&&k.toLowerCase(),d=this._onCamelCase(a),u=f&&f[a];return(d=u&&u.method||this[d]&&t.isFunction(this[d])&&d)?u&&t.isArray(u.argKeys)?(f=this._onArr2Obj(g,f[a].argKeys),b.after(this,d,f,!0)):b.after(this,d,function(a){a=a||{};a.target||(a.target=this);g.call(this,a)},!0):this.inherited(arguments)},emit:function(b,g){var f,a,c,d,u=b.toLowerCase();
d=this._onCamelCase(b);var B=this.constructor._onMap||this.registerConnectEvents();d=(c=B&&B[u]&&B[u].method||t.isFunction(this[d])&&d)&&this[c];c&&(B&&B[u])&&this._onObj2Arr(function(){a=Array.prototype.slice.call(arguments)},B[u].argKeys)(g);g=g||{};g.target||(g.target=this);d&&(f=a&&a.length?a:[g],f=d.apply(this,f));this.inherited(arguments,[b,g]);return f},_onObj2Arr:function(b,g){if(g){var f=this;return function(a){var c,d=[],u=g.length;for(c=0;c<u;c++)d[c]=a[g[c]];b.apply(f,d)}}return b},_onArr2Obj:function(b,
g){if(g){var f=this;return function(){var a,c={},d=arguments.length;for(a=0;a<d;a++)c[g[a]]=arguments[a];c.target||(c.target=f);b.call(f,c)}}return b},_hyphenLower:function(b){return b.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(b,f){return(f?"-":"")+b.toLowerCase()})},_onCamelCase:function(b){return"on"+b.substr(0,1).toUpperCase()+b.substr(1).replace(/\-([a-z])/g,function(b,f){return f.toUpperCase()})}});r("extend-esri")&&(m.Evented=q);return q})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(q,t,b,s,r,m,k,g,f){var a={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},c={style:a.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};q=q(g,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(d,u,
g,x){d?t.isString(d)?(this.style=d,u&&(this.size=u),g&&(this.outline=g),x&&(this.color=x)):(this.style=k.valueOf(this._styles,this.style),d.outline&&(this.outline=new f(d.outline))):(t.mixin(this,c),this.size=r.pt2px(this.size),this.outline=new f(this.outline),this.color=new b(this.color));this.style||(this.style=a.STYLE_CIRCLE)},setStyle:function(a){this.style=a;return this},setPath:function(c){this.path=c;this.setStyle(a.STYLE_PATH);return this},setOutline:function(a){this.outline=a;return this},
getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(a,c,b){this._targetWidth=a;this._targetHeight=c;this._spikeSize=b},getShapeDescriptors:function(){var b,f,g,x=this.style,y=(this.size||r.pt2px(c.size))/2,w=0-y,k=0+y,D=0-y,A=0+y;switch(x){case a.STYLE_CIRCLE:b={type:"circle",cx:0,cy:0,r:y};f=this.getFill();if(g=this.getStroke())g.style=g.style||"Solid";break;case a.STYLE_CROSS:b={type:"path",path:"M "+w+",0 L "+k+",0 M 0,"+D+
" L 0,"+A+" E"};f=null;g=this.getStroke();break;case a.STYLE_DIAMOND:b={type:"path",path:"M "+w+",0 L 0,"+D+" L "+k+",0 L 0,"+A+" L "+w+",0 Z"};f=this.getFill();g=this.getStroke();break;case a.STYLE_SQUARE:b={type:"path",path:"M "+w+","+A+" L "+w+","+D+" L "+k+","+D+" L "+k+","+A+" L "+w+","+A+" Z"};f=this.getFill();g=this.getStroke();break;case a.STYLE_X:b={type:"path",path:"M "+w+","+A+" L "+k+","+D+" M "+w+","+D+" L "+k+","+A+" E"};f=null;g=this.getStroke();break;case a.STYLE_PATH:b={type:"path",
path:this.path||""},f=this.getFill(),g=this.getStroke()}return{defaultShape:b,fill:f,stroke:g}},toJson:function(){var a=t.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),c=this.outline;c&&(a.outline=c.toJson());a.path=this.path;return k.fixJson(a)}});t.mixin(q,a);q.defaultProps=c;s("extend-esri")&&(t.setObject("symbol.SimpleMarkerSymbol",q,m),m.symbol.defaultSimpleMarkerSymbol=c);return q})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(q,t,b,s,r,m,k,g,f){var a=t.getObject("dojox.gfx",!0),c=a._base={};a._hasClass=function(a,c){var b=a.getAttribute("className");return b&&0<=(" "+b+" ").indexOf(" "+c+" ")};a._addClass=function(a,c){var b=a.getAttribute("className")||"";if(!b||0>(" "+b+" ").indexOf(" "+c+" "))a.setAttribute("className",b+(b?" ":"")+c)};a._removeClass=function(a,c){var b=a.getAttribute("className");b&&a.setAttribute("className",b.replace(RegExp("(^|\\s+)"+c+"(\\s+|$)"),"$1$2"))};c._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c,b;s("ie")&&(b=r.doc.documentElement.style.fontSize||"",b||(r.doc.documentElement.style.fontSize="100%"));var d=g.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},r.body());for(c in a)d.style.fontSize=c,a[c]=16*Math.round(12*d.offsetHeight/16)/12/1E3;
s("ie")&&(r.doc.documentElement.style.fontSize=b);r.body().removeChild(d);return a};var d=null;c._getCachedFontMeasurements=function(a){if(a||!d)d=c._getFontMeasurements();return d};var u=null,B={};c._getTextBox=function(a,c,b){var d,x,y=arguments.length,k;u||(u=g.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},r.body()));d=u;d.className="";x=d.style;x.borderWidth="0";x.margin="0";x.padding="0";x.outline="0";if(1<y&&c)for(k in c)k in B||(x[k]=c[k]);2<y&&b&&(d.className=
b);d.innerHTML=a;d.getBoundingClientRect?(x=d.getBoundingClientRect(),x={l:x.left,t:x.top,w:x.width||x.right-x.left,h:x.height||x.bottom-x.top}):x=f.getMarginBox(d);d.innerHTML="";return x};c._computeTextLocation=function(a,c,b,d){var f={};switch(a.align){case "end":f.x=a.x-c;break;case "middle":f.x=a.x-c/2;break;default:f.x=a.x}f.y=a.y-b*(d?0.75:1);return f};c._computeTextBoundingBox=function(b){if(!a._base._isRendered(b))return{x:0,y:0,width:0,height:0};var d;d=b.getShape();var f=b.getFont()||a.defaultFont;
b=b.getTextWidth();f=a.normalizedLength(f.size);d=c._computeTextLocation(d,b,f,!0);return{x:d.x,y:d.y,width:b,height:f}};c._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var x=0;c._getUniqueId=function(){var a;do a=q._scopeName+"xUnique"+ ++x;while(k.byId(a));return a};var y=s("pointer-events")?"touchAction":s("MSPointer")?"msTouchAction":null;c._fixMsTouchAction=y?function(a){a.rawNode.style[y]="none"}:function(){};t.mixin(a,{defaultPath:{type:"path",path:""},
defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},
defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var c=
{};return function(b){var d=c[b];if(d)return new d;d=c[b]=new Function;d.prototype=a["default"+b];return new d}}(),normalizeColor:function(a){return a instanceof b?a:new b(a)},normalizeParameters:function(a,c){var b;if(c){var d={};for(b in a)b in c&&!(b in d)&&(a[b]=c[b])}return a},makeParameters:function(a,c){var b=null;if(!c)return t.delegate(a);var d={};for(b in a)b in d||(d[b]=t.clone(b in c?c[b]:a[b]));return d},formatNumber:function(a,c){var b=a.toString();if(0<=b.indexOf("e"))b=a.toFixed(4);
else{var d=b.indexOf(".");0<=d&&5<b.length-d&&(b=a.toFixed(4))}return 0>a?b:c?" "+b:b},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(c){var b=a.getDefault("Font");c=c.split(/\s+/);if(!(5>c.length)){b.style=c[0];b.variant=c[1];b.weight=c[2];var d=c[3].indexOf("/");b.size=0>d?c[3]:c[3].substring(0,d);var f=4;0>d&&("/"==c[4]?f=6:"/"==c[4].charAt(0)&&(f=5));f<c.length&&(b.family=c.slice(f).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/
2.54,px_in_pt:function(){return a._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(c){return c*a.px_in_pt()},px2pt:function(c){return c/a.px_in_pt()},normalizedLength:function(c){if(0===c.length)return 0;if(2<c.length){var b=a.px_in_pt(),d=parseFloat(c);switch(c.slice(-2)){case "px":return d;case "pt":return d*b;case "in":return 72*d*b;case "pc":return 12*d*b;case "mm":return d*a.mm_in_pt*b;case "cm":return d*a.cm_in_pt*b}}return parseFloat(c)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,
pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,c){return a&&c&&a===c},switchTo:function(c){var b="string"==typeof c?a[c]:c;b&&(m.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(c){a[c]=b[c]}),"string"==typeof c?a.renderer=c:m.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(c){return a.renderer=a[c]&&a[c].Surface===a.Surface?c:null}))}});return a})},
"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(q,t,b,s,r,m,k,g,f){function a(a,c,d){return[s.isString(a)?a.split(""):a,c||b.global,s.isString(d)?new Function("item","index","array",d):d]}function c(a){return void 0!==a&&null!==a}function d(a,b,d){var f=d.match(/([^\(]+)(\([^\)]+\))?/i),u=s.trim(f[1]);d=b[a];var f=t.fromJson((f[2]?s.trim(f[2]):"()").replace(/^\(/,"({").replace(/\)$/,
"})")),x=f.utcOffset;if(-1===q.indexOf(B,u))u=s.getObject(u),s.isFunction(u)&&(d=u(d,a,b,f));else if("number"===typeof d||"string"===typeof d&&d&&!isNaN(Number(d)))switch(d=Number(d),u){case "NumberFormat":return k.format(d,f);case "DateString":a=new Date(d);if(f.local||f.systemLocale)return f.systemLocale?a.toLocaleDateString()+(f.hideTime?"":" "+a.toLocaleTimeString()):a.toDateString()+(f.hideTime?"":" "+a.toTimeString());a=a.toUTCString();f.hideTime&&(a=a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,
""));return a;case "DateFormat":return a=new Date(d),c(x)&&(a=r.add(a,"minute",a.getTimezoneOffset()-x)),g.format(a,f)}return c(d)?d:""}function u(a,c){var b;if(c)for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b]instanceof Object&&u(a[b],!0));else for(b in a)a.hasOwnProperty(b)&&void 0===a[b]&&delete a[b];return a}var B=["NumberFormat","DateString","DateFormat"],x=/<\/?[^>]+>/g,y={valueOf:function(a,c){for(var b in a)if(a[b]==c)return b;return null},stripTags:function(a){if(a){var c=
typeof a;if("string"===c)a=a.replace(x,"");else if("object"===c)for(var b in a)(c=a[b])&&"string"===typeof c&&(c=c.replace(x,"")),a[b]=c}return a},substitute:function(a,b,f){var u,x,y;c(f)&&(s.isObject(f)?(u=f.first,x=f.dateFormat,y=f.numberFormat):u=f);if(!b||"${*}"===b){b=[];for(var g in a){f=a[g];if(x&&-1!==q.indexOf(x.properties||"",g))f=d(g,a,x.formatter||"DateString");else if(y&&-1!==q.indexOf(y.properties||"",g))f=d(g,a,y.formatter||"NumberFormat");b.push(g+" \x3d "+(c(f)?f:"")+"\x3cbr/\x3e");
if(u)break}return b.join("")}return s.replace(b,s.hitch({obj:a},function(a,b){var w=b.split(":");return 1<w.length?(b=w[0],w.shift(),d(b,this.obj,w.join(":"))):x&&-1!==q.indexOf(x.properties||"",b)?d(b,this.obj,x.formatter||"DateString"):y&&-1!==q.indexOf(y.properties||"",b)?d(b,this.obj,y.formatter||"NumberFormat"):c(this.obj[b])?this.obj[b]:""}),/\$\{([^\}]+)\}/g)},filter:function(c,b,d){b=a(c,d,b);d={};var f;c=b[0];for(f in c)b[2].call(b[f],c[f],f,c)&&(d[f]=c[f]);return d},isDefined:c,fixJson:u};
m("extend-esri")&&(s.mixin(f,y),f._isDefined=c,f._getParts=a,f._sanitize=u);return y})},"dojo/_base/json":function(){define(["./kernel","../json"],function(q,t){q.fromJson=function(b){return eval("("+b+")")};q._escapeString=t.stringify;q.toJsonIndentStr="\t";q.toJson=function(b,s){return t.stringify(b,function(b,m){if(m){var k=m.__json__||m.json;if("function"==typeof k)return k.call(m)}return m},s&&q.toJsonIndentStr)};return q})},"dojo/json":function(){define(["./has"],function(q){var t="undefined"!=
typeof JSON;q.add("json-parse",t);q.add("json-stringify",t&&'{"a":1}'==JSON.stringify({a:0},function(b,r){return r||1}));if(q("json-stringify"))return JSON;var b=function(b){return('"'+b.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:q("json-parse")?JSON.parse:function(b,r){if(r&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b))throw new SyntaxError("Invalid characters in JSON");
return eval("("+b+")")},stringify:function(s,r,m){function k(f,a,c){r&&(f=r(c,f));var d;d=typeof f;if("number"==d)return isFinite(f)?f+"":"null";if("boolean"==d)return f+"";if(null===f)return"null";if("string"==typeof f)return b(f);if("function"==d||"undefined"==d)return g;if("function"==typeof f.toJSON)return k(f.toJSON(c),a,c);if(f instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,c,b){a=f["getUTC"+c]()+(b?1:0);return 10>a?"0"+
a:a});if(f.valueOf()!==f)return k(f.valueOf(),a,c);var u=m?a+m:"",B=m?" ":"",x=m?"\n":"";if(f instanceof Array){var B=f.length,y=[];for(c=0;c<B;c++)d=k(f[c],u,c),"string"!=typeof d&&(d="null"),y.push(x+u+d);return"["+y.join(",")+x+a+"]"}y=[];for(c in f){var w;if(f.hasOwnProperty(c)){if("number"==typeof c)w='"'+c+'"';else if("string"==typeof c)w=b(c);else continue;d=k(f[c],u,c);"string"==typeof d&&y.push(x+u+w+":"+B+d)}}return"{"+y.join(",")+x+a+"}"}var g;"string"==typeof r&&(m=r,r=null);return k(s,
"","")}}})},"dojo/date":function(){define(["./has","./_base/lang"],function(q,t){var b={getDaysInMonth:function(s){var r=s.getMonth();return 1==r&&b.isLeapYear(s)?29:[31,28,31,30,31,30,31,31,30,31,30,31][r]},isLeapYear:function(b){b=b.getFullYear();return!(b%400)||!(b%4)&&!!(b%100)},getTimezoneName:function(b){var r=b.toString(),m="",k=r.indexOf("(");if(-1<k)m=r.substring(++k,r.indexOf(")"));else if(k=/([A-Z\/]+) \d{4}$/,r=r.match(k))m=r[1];else if(r=b.toLocaleString(),k=/ ([A-Z\/]+)$/,r=r.match(k))m=
r[1];return"AM"==m||"PM"==m?"":m},compare:function(b,r,m){b=new Date(+b);r=new Date(+(r||new Date));"date"==m?(b.setHours(0,0,0,0),r.setHours(0,0,0,0)):"time"==m&&(b.setFullYear(0,0,0),r.setFullYear(0,0,0));return b>r?1:b<r?-1:0},add:function(b,r,m){var k=new Date(+b),g=!1,f="Date";switch(r){case "day":break;case "weekday":var a;(r=m%5)?a=parseInt(m/5):(r=0<m?5:-5,a=0<m?(m-5)/5:(m+5)/5);var c=b.getDay(),d=0;6==c&&0<m?d=1:0==c&&0>m&&(d=-1);c+=r;if(0==c||6==c)d=0<m?2:-2;m=7*a+r+d;break;case "year":f=
"FullYear";g=!0;break;case "week":m*=7;break;case "quarter":m*=3;case "month":g=!0;f="Month";break;default:f="UTC"+r.charAt(0).toUpperCase()+r.substring(1)+"s"}if(f)k["set"+f](k["get"+f]()+m);g&&k.getDate()<b.getDate()&&k.setDate(0);return k},difference:function(s,r,m){r=r||new Date;m=m||"day";var k=r.getFullYear()-s.getFullYear(),g=1;switch(m){case "quarter":s=s.getMonth();r=r.getMonth();s=Math.floor(s/3)+1;r=Math.floor(r/3)+1;g=r+4*k-s;break;case "weekday":k=Math.round(b.difference(s,r,"day"));
m=parseInt(b.difference(s,r,"week"));g=k%7;if(0==g)k=5*m;else{var f=0,a=s.getDay();r=r.getDay();m=parseInt(k/7);g=k%7;s=new Date(s);s.setDate(s.getDate()+7*m);s=s.getDay();if(0<k)switch(!0){case 6==a:f=-1;break;case 0==a:f=0;break;case 6==r:f=-1;break;case 0==r:f=-2;break;case 5<s+g:f=-2}else if(0>k)switch(!0){case 6==a:f=0;break;case 0==a:f=1;break;case 6==r:f=2;break;case 0==r:f=1;break;case 0>s+g:f=2}k=k+f-2*m}g=k;break;case "year":g=k;break;case "month":g=r.getMonth()-s.getMonth()+12*k;break;
case "week":g=parseInt(b.difference(s,r,"day")/7);break;case "day":g/=24;case "hour":g/=60;case "minute":g/=60;case "second":g/=1E3;case "millisecond":g*=r.getTime()-s.getTime()}return Math.round(g)}};t.mixin(t.getObject("dojo.date",!0),b);return b})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(q,t,b,s,r){var m={};q.setObject("dojo.number",m);m.format=function(b,f){f=q.mixin({},f||{});var a=t.normalizeLocale(f.locale),a=t.getLocalization("dojo.cldr",
"number",a);f.customs=a;a=f.pattern||a[(f.type||"decimal")+"Format"];return isNaN(b)||Infinity==Math.abs(b)?null:m._applyPattern(b,a,f)};m._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;m._applyPattern=function(b,f,a){a=a||{};var c=a.customs.group,d=a.customs.decimal;f=f.split(";");var u=f[0];f=f[0>b?1:0]||"-"+u;if(-1!=f.indexOf("%"))b*=100;else if(-1!=f.indexOf("\u2030"))b*=1E3;else if(-1!=f.indexOf("\u00a4"))c=a.customs.currencyGroup||c,d=a.customs.currencyDecimal||d,f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,
function(c,b,d,f){c=a[["symbol","currency","displayName"][d.length-1]]||a.currency||"";return!c?"":b+c+f});else if(-1!=f.indexOf("E"))throw Error("exponential notation not supported");var k=m._numberPatternRE,u=u.match(k);if(!u)throw Error("unable to find a number expression in pattern: "+f);!1===a.fractional&&(a.places=0);return f.replace(k,m._formatAbsolute(b,u[0],{decimal:d,group:c,places:a.places,round:a.round}))};m.round=function(b,f,a){a=10/(a||10);return(a*+b).toFixed(f)/a};if(0==(0.9).toFixed()){var k=
m.round;m.round=function(b,f,a){var c=Math.pow(10,-f||0),d=Math.abs(b);if(!b||d>=c)c=0;else if(d/=c,0.5>d||0.95<=d)c=0;return k(b,f,a)+(0<b?c:-c)}}m._formatAbsolute=function(b,f,a){a=a||{};!0===a.places&&(a.places=0);Infinity===a.places&&(a.places=6);f=f.split(".");var c="string"==typeof a.places&&a.places.indexOf(","),d=a.places;c?d=a.places.substring(c+1):0<=d||(d=(f[1]||[]).length);0>a.round||(b=m.round(b,d,a.round));b=String(Math.abs(b)).split(".");var u=b[1]||"";f[1]||a.places?(c&&(a.places=
a.places.substring(0,c)),c=void 0!==a.places?a.places:f[1]&&f[1].lastIndexOf("0")+1,c>u.length&&(b[1]=s.pad(u,c,"0",!0)),d<u.length&&(b[1]=u.substr(0,d))):b[1]&&b.pop();d=f[0].replace(",","");c=d.indexOf("0");-1!=c&&(c=d.length-c,c>b[0].length&&(b[0]=s.pad(b[0],c)),-1==d.indexOf("#")&&(b[0]=b[0].substr(b[0].length-c)));var d=f[0].lastIndexOf(","),k,x;-1!=d&&(k=f[0].length-d-1,f=f[0].substr(0,d),d=f.lastIndexOf(","),-1!=d&&(x=f.length-d-1));f=[];for(d=b[0];d;)c=d.length-k,f.push(0<c?d.substr(c):d),
d=0<c?d.slice(0,c):"",x&&(k=x,delete x);b[0]=f.reverse().join(a.group||",");return b.join(a.decimal||".")};m.regexp=function(b){return m._parseInfo(b).regexp};m._parseInfo=function(b){b=b||{};var f=t.normalizeLocale(b.locale),f=t.getLocalization("dojo.cldr","number",f),a=b.pattern||f[(b.type||"decimal")+"Format"],c=f.group,d=f.decimal,u=1;if(-1!=a.indexOf("%"))u/=100;else if(-1!=a.indexOf("\u2030"))u/=1E3;else{var k=-1!=a.indexOf("\u00a4");k&&(c=f.currencyGroup||c,d=f.currencyDecimal||d)}f=a.split(";");
1==f.length&&f.push("-"+f[0]);f=r.buildGroupRE(f,function(a){a="(?:"+r.escapeString(a,".")+")";return a.replace(m._numberPatternRE,function(a){var w={signed:!1,separator:b.strict?c:[c,""],fractional:b.fractional,decimal:d,exponent:!1};a=a.split(".");var f=b.places;1==a.length&&1!=u&&(a[1]="###");1==a.length||0===f?w.fractional=!1:(void 0===f&&(f=b.pattern?a[1].lastIndexOf("0")+1:Infinity),f&&void 0==b.fractional&&(w.fractional=!0),!b.places&&f<a[1].length&&(f+=","+a[1].length),w.places=f);a=a[0].split(",");
1<a.length&&(w.groupSize=a.pop().length,1<a.length&&(w.groupSize2=a.pop().length));return"("+m._realNumberRegexp(w)+")"})},!0);k&&(f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,c,d,f){a=r.escapeString(b[["symbol","currency","displayName"][d.length-1]]||b.currency||"");if(!a)return"";c=c?"[\\s\\xa0]":"";f=f?"[\\s\\xa0]":"";return!b.strict?(c&&(c+="*"),f&&(f+="*"),"(?:"+c+a+f+")?"):c+a+f}));return{regexp:f.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:c,decimal:d,factor:u}};m.parse=function(b,
f){var a=m._parseInfo(f),c=RegExp("^"+a.regexp+"$").exec(b);if(!c)return NaN;var d=c[1];if(!c[1]){if(!c[2])return NaN;d=c[2];a.factor*=-1}d=d.replace(RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return d*a.factor};m._realNumberRegexp=function(b){b=b||{};"places"in b||(b.places=Infinity);"string"!=typeof b.decimal&&(b.decimal=".");if(!("fractional"in b)||/^0/.test(b.places))b.fractional=[!0,!1];"exponent"in b||(b.exponent=[!0,!1]);"eSigned"in b||(b.eSigned=[!0,!1]);var f=m._integerRegexp(b),
a=r.buildGroupRE(b.fractional,function(a){var c="";a&&0!==b.places&&(c="\\"+b.decimal,c=Infinity==b.places?"(?:"+c+"\\d+)?":c+("\\d{"+b.places+"}"));return c},!0),c=r.buildGroupRE(b.exponent,function(a){return a?"([eE]"+m._integerRegexp({signed:b.eSigned})+")":""}),f=f+a;a&&(f="(?:(?:"+f+")|(?:"+a+"))");return f+c};m._integerRegexp=function(b){b=b||{};"signed"in b||(b.signed=[!0,!1]);"separator"in b?"groupSize"in b||(b.groupSize=3):b.separator="";var f=r.buildGroupRE(b.signed,function(a){return a?
"[-+]":""},!0),a=r.buildGroupRE(b.separator,function(a){if(!a)return"(?:\\d+)";a=r.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var d=b.groupSize,f=b.groupSize2;return f?(a="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+a+"]\\d{"+f+"})*["+a+"]\\d{"+d+"})",0<d-f?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+a+"]\\d{"+d+"})*)"},!0);return f+a};return m})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(q,t,b,s,r,m,k,g,f){b.add("dojo-preload-i18n-Api",1);k=q.i18n={};var a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,c=function(a,b,c,d){var w=[c+d];b=b.split("-");for(var f="",u=0;u<b.length;u++)if(f+=(f?"-":"")+b[u],!a||a[f])w.push(c+f+"/"+d),w.specificity=f;return w},d={},u=function(a,b,c){c=c?c.toLowerCase():q.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},B=q.getL10nName=function(a,b,c){return f.id+"!"+u(a,b,c)},x=function(a,b,w,
f,u,x){a([b],function(y){var A=m.clone(y.root||y.ROOT),D=c(!y._v1x&&y,u,w,f);a(D,function(){for(var a=1;a<D.length;a++)A=m.mixin(m.clone(A),arguments[a]);d[b+"/"+u]=A;A.$locale=D.specificity;x()})})},y=function(a){var b=r.extraLocale||[],b=m.isArray(b)?b:[b];b.push(a);return b},w=function(c,w,f){if(b("dojo-preload-i18n-Api")){var u=c.split("*"),k="preload"==u[1];k&&(d[c]||(d[c]=1,H(u[2],g.parse(u[3]),1,w)),f(1));if(!(u=k))D&&A.push([c,w,f]),u=D;if(u)return}c=a.exec(c);var E=c[1]+"/",B=c[5]||c[4],
r=E+B,u=(c=c[5]&&c[4])||q.locale||"",t=r+"/"+u;c=c?[u]:y(u);var O=c.length,U=function(){--O||f(m.delegate(d[t]))};s.forEach(c,function(v){var a=r+"/"+v;b("dojo-preload-i18n-Api")&&G(a);d[a]?U():x(w,r,E,B,v,U)})};b("dojo-preload-i18n-Api");var E=k.normalizeLocale=function(a){a=a?a.toLowerCase():q.locale;return"root"==a?"ROOT":a},D=0,A=[],H=k._preloadLocalizations=function(a,b,c,f){function u(a,b){f([a],b)}function x(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}
function y(){for(--D;!D&&A.length;)w.apply(null,A.shift())}function k(c){c=E(c);x(c,function(w){if(0<=s.indexOf(b,w)){var A=a.replace(/\./g,"/")+"_"+w;D++;u(A,function(v){for(var a in v){var b=v[a],l=a.match(/(.+)\/([^\/]+)$/),e;if(l&&(e=l[2],l=l[1]+"/",b._localized)){var h;if("ROOT"===w){var n=h=b._localized;delete b._localized;n.root=b;d[t.toAbsMid(a)]=n}else h=b._localized,d[t.toAbsMid(l+e+"/"+w)]=b;w!==c&&function(e,h,n,l){var v=[],a=[];x(c,function(n){l[n]&&(v.push(t.toAbsMid(e+n+"/"+h)),a.push(t.toAbsMid(e+
h+"/"+n)))});v.length?(D++,f(v,function(){for(var l=v.length-1;0<=l;l--)n=m.mixin(m.clone(n),arguments[l]),d[a[l]]=n;d[t.toAbsMid(e+h+"/"+c)]=m.clone(n);y()})):d[t.toAbsMid(e+h+"/"+c)]=n}(l,e,b,h)}}y()});return!0}return!1})}f=f||t;k();s.forEach(q.config.extraLocale,k)},G=function(){};new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}");
G=function(a){for(var b,c=a.split("/"),w=q.global[c[0]],f=1;w&&f<c.length-1;w=w[c[f++]]);w&&((b=w[c[f]])||(b=w[c[f].replace(/-/g,"_")]),b&&(d[a]=b));return b};k.getLocalization=function(a,b,c){var d;a=u(a,b,c);w(a,t,function(a){d=a});return d};return m.mixin(k,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:w,cache:d,getL10nName:B})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){q._xhrObj=x._create;var w=q.config;q.objectToQuery=s.objectToQuery;q.queryToObject=s.queryToObject;q.fieldToObject=m.fieldToObject;q.formToObject=m.toObject;q.formToQuery=m.toQuery;q.formToJson=m.toJson;q._blockAsync=!1;t.add("native-xhr2-blob",function(){if(t("native-xhr2")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var E=q._contentHandlers=q.contentHandlers={text:function(a){return a.responseText},
json:function(a){return f.fromJson(a.responseText||null)},"json-comment-filtered":function(a){g.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");a=a.responseText;var b=a.indexOf("/*"),c=a.lastIndexOf("*/");if(-1==b||-1==c)throw Error("JSON was not comment filtered");
return f.fromJson(a.substring(b+2,c))},javascript:function(a){return q.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&(t("dom-qsa2.1")&&!b.querySelectorAll&&t("dom-parser"))&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(t("ie")&&(!b||!b.documentElement)){var d=function(a){return"MSXML"+a+".DOMDocument"},d=["Microsoft.XMLDOM",d(6),d(4),d(3),d(2)];c.some(d,function(c){try{var d=new ActiveXObject(c);d.async=!1;d.loadXML(a.responseText);b=d}catch(w){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?E["json-comment-filtered"](a):E.json(a)}};t("native-xhr2")&&(E.arraybuffer=E.blob=E.document=function(a,b){return"blob"===b.args.handleAs&&!t("native-xhr2-blob")?new Blob([a.response],{type:a.getResponseHeader("Content-Type")}):a.response});q._ioSetArgs=function(b,c,d,f){var u={args:b,url:b.url},x=null;if(b.form){var x=r.byId(b.form),y=x.getAttributeNode("action");u.url=u.url||(y?y.value:q.doc?q.doc.URL:
null);x=m.toObject(x)}y=[{}];x&&y.push(x);b.content&&y.push(b.content);b.preventCache&&y.push({"dojo.preventCache":(new Date).valueOf()});u.query=s.objectToQuery(a.mixin.apply(null,y));u.handleAs=b.handleAs||"text";var A=new k(function(v){v.canceled=!0;c&&c(v);var a=v.ioArgs.error;a||(a=Error("request cancelled"),a.dojoType="cancel",v.ioArgs.error=a);return a});A.addCallback(d);var D=b.load;D&&a.isFunction(D)&&A.addCallback(function(v){return D.call(b,v,u)});var g=b.error;g&&a.isFunction(g)&&A.addErrback(function(v){return g.call(b,
v,u)});var E=b.handle;E&&a.isFunction(E)&&A.addBoth(function(v){return E.call(b,v,u)});A.addErrback(function(v){return f(v,A)});w.ioPublish&&(q.publish&&!1!==u.args.ioPublish)&&(A.addCallbacks(function(v){q.publish("/dojo/io/load",[A,v]);return v},function(v){q.publish("/dojo/io/error",[A,v]);return v}),A.addBoth(function(v){q.publish("/dojo/io/done",[A,v]);return v}));A.ioArgs=u;return A};var D=function(a){a=E[a.ioArgs.handleAs](a.ioArgs.xhr,a.ioArgs);return void 0===a?null:a},A=function(a,b){b.ioArgs.args.failOk||
console.error(a);return a},H=function(a){0>=G&&(G=0,w.ioPublish&&(q.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish))&&q.publish("/dojo/io/stop"))},G=0;u.after(B,"_onAction",function(){G-=1});u.after(B,"_onInFlight",H);q._ioCancelAll=B.cancelAll;q._ioNotifyStart=function(a){w.ioPublish&&(q.publish&&!1!==a.ioArgs.args.ioPublish)&&(G||q.publish("/dojo/io/start"),G+=1,q.publish("/dojo/io/send",[a]))};q._ioWatch=function(b,c,d,w){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(a){return c(b)},
isReady:function(a){return d(b)},handleResponse:function(a){return w(b)}});B(b);H(b)};q._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};q.xhr=function(a,b,c){var d,w=q._ioSetArgs(b,function(a){d&&d.cancel()},D,A),f=w.ioArgs;"postData"in b?f.query=b.postData:"putData"in b?f.query=b.putData:"rawBody"in b?f.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&q._ioAddQueryToUrl(f);var u;t("native-xhr2")&&(u=
{arraybuffer:1,blob:1,document:1});u=t("native-xhr2")&&u[b.handleAs]?b.handleAs:"text";"blob"===u&&!t("native-xhr2-blob")&&(u="arraybuffer");u={method:a,handleAs:u,responseType:b.responseType,timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:f};"undefined"!==typeof b.headers&&(u.headers=b.headers);"undefined"!==typeof b.contentType&&(u.headers||(u.headers={}),u.headers["Content-Type"]=b.contentType);"undefined"!==typeof f.query&&(u.data=f.query);"undefined"!==typeof b.sync&&(u.sync=b.sync);
q._ioNotifyStart(w);try{d=x(f.url,u,!0)}catch(y){return w.cancel(),w}w.ioArgs.xhr=d.response.xhr;d.then(function(){w.resolve(w)}).otherwise(function(a){f.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);w.reject(a)});return w};q.xhrGet=function(a){return q.xhr("GET",a)};q.rawXhrPost=q.xhrPost=function(a){return q.xhr("POST",a,!0)};q.rawXhrPut=q.xhrPut=function(a){return q.xhr("PUT",a,!0)};q.xhrDelete=function(a){return q.xhr("DELETE",a)};q._isDocumentOk=
function(a){return y.checkStatus(a.status)};q._getText=function(a){var b;q.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(q.xhr,{_xhrObj:q._xhrObj,fieldToObject:m.fieldToObject,formToObject:m.toObject,objectToQuery:s.objectToQuery,formToQuery:m.toQuery,formToJson:m.toJson,queryToObject:s.queryToObject,contentHandlers:E,_ioSetArgs:q._ioSetArgs,_ioCancelAll:q._ioCancelAll,_ioNotifyStart:q._ioNotifyStart,_ioWatch:q._ioWatch,_ioAddQueryToUrl:q._ioAddQueryToUrl,_isDocumentOk:q._isDocumentOk,
_getText:q._getText,get:q.xhrGet,post:q.xhrPost,put:q.xhrPut,del:q.xhrDelete});return q.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(q){var t={};return{objectToQuery:function(b){var s=encodeURIComponent,r=[],m;for(m in b){var k=b[m];if(k!=t[m]){var g=s(m)+"\x3d";if(q.isArray(k))for(var f=0,a=k.length;f<a;++f)r.push(g+s(k[f]));else r.push(g+s(k))}}return r.join("\x26")},queryToObject:function(b){var s=decodeURIComponent;b=b.split("\x26");for(var r={},m,k,g=0,f=b.length;g<f;++g)if(k=
b[g],k.length){var a=k.indexOf("\x3d");0>a?(m=s(k),k=""):(m=s(k.slice(0,a)),k=s(k.slice(a+1)));"string"==typeof r[m]&&(r[m]=[r[m]]);q.isArray(r[m])?r[m].push(k):r[m]=k}return r}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(q,t,b,s){var r={fieldToObject:function(b){var k=null;if(b=t.byId(b)){var g=b.name,f=(b.type||"").toLowerCase();if(g&&f&&!b.disabled)if("radio"==f||"checkbox"==f)b.checked&&(k=b.value);else if(b.multiple){k=[];for(b=[b.firstChild];b.length;)for(g=
b.pop();g;g=g.nextSibling)if(1==g.nodeType&&"option"==g.tagName.toLowerCase())g.selected&&k.push(g.value);else{g.nextSibling&&b.push(g.nextSibling);g.firstChild&&b.push(g.firstChild);break}}else k=b.value}return k},toObject:function(b){var k={};b=t.byId(b).elements;for(var g=0,f=b.length;g<f;++g){var a=b[g],c=a.name,d=(a.type||"").toLowerCase();if(c&&d&&0>"file|submit|image|reset|button".indexOf(d)&&!a.disabled){var u=k,B=c,a=r.fieldToObject(a);if(null!==a){var x=u[B];"string"==typeof x?u[B]=[x,a]:
q.isArray(x)?x.push(a):u[B]=a}"image"==d&&(k[c+".x"]=k[c+".y"]=k[c].x=k[c].y=0)}}return k},toQuery:function(m){return b.objectToQuery(r.toObject(m))},toJson:function(b,k){return s.stringify(r.toObject(b),null,k?4:0)}};return r})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(q,t,b,s,r,m,k){var g=function(){},f=Object.freeze||function(){},a=q.Deferred=function(c){function d(a){if(x)throw Error("This deferred has already been resolved");
k=a;x=!0;u()}function u(){for(var a;!a&&A;){var b=A;A=A.next;if(a=b.progress==g)x=!1;var c=E?b.error:b.resolved;r("config-useDeferredInstrumentation")&&E&&t.instrumentRejected&&t.instrumentRejected(k,!!c);if(c)try{var d=c(k);d&&"function"===typeof d.then?d.then(m.hitch(b.deferred,"resolve"),m.hitch(b.deferred,"reject"),m.hitch(b.deferred,"progress")):(c=a&&void 0===d,a&&!c&&(E=d instanceof Error),b.deferred[c&&E?"reject":"resolve"](c?k:d))}catch(w){b.deferred.reject(w)}else E?b.deferred.reject(k):
b.deferred.resolve(k)}}var k,x,y,w,E,D,A,q=this.promise=new b;this.isResolved=q.isResolved=function(){return 0==w};this.isRejected=q.isRejected=function(){return 1==w};this.isFulfilled=q.isFulfilled=function(){return 0<=w};this.isCanceled=q.isCanceled=function(){return y};this.resolve=this.callback=function(a){this.fired=w=0;this.results=[a,null];d(a)};this.reject=this.errback=function(a){E=!0;this.fired=w=1;r("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(a,!!A);
d(a);this.results=[null,a]};this.progress=function(a){for(var b=A;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,g);return this};q.then=this.then=function(b,c,d){var w=d==g?this:new a(q.cancel);b={resolved:b,error:c,progress:d,deferred:w};A?D=D.next=b:A=D=b;x&&u();return w.promise};var G=this;q.cancel=this.cancel=function(){if(!x){var a=c&&c(G);x||(a instanceof Error||(a=new s(a)),a.log=!1,G.reject(a))}y=!0};f(q)};m.extend(a,{addCallback:function(a){return this.addCallbacks(m.hitch.apply(q,
arguments))},addErrback:function(a){return this.addCallbacks(null,m.hitch.apply(q,arguments))},addBoth:function(a){var b=m.hitch.apply(q,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=q.when=k;return a})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(q,t,b,s,r){var m=Object.freeze||function(){},k=function(a,b,f,x,y){2===b&&(c.instrumentRejected&&0===a.length)&&c.instrumentRejected(f,!1,x,y);for(y=
0;y<a.length;y++)g(a[y],b,f,x)},g=function(b,u,k,x){var y=b[u],w=b.deferred;if(y)try{var g=y(k);if(0===u)"undefined"!==typeof g&&a(w,u,g);else{if(g&&"function"===typeof g.then){b.cancel=g.cancel;g.then(f(w,1),f(w,2),f(w,0));return}a(w,1,g)}}catch(D){a(w,2,D)}else a(w,u,k);2===u&&c.instrumentRejected&&c.instrumentRejected(k,!!y,x,w.promise)},f=function(b,c){return function(f){a(b,c,f)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},
c=function(a){var f=this.promise=new s,B=this,x,y,w,E=!1,D=[];Error.captureStackTrace&&(Error.captureStackTrace(B,c),Error.captureStackTrace(f,c));this.isResolved=f.isResolved=function(){return 1===x};this.isRejected=f.isRejected=function(){return 2===x};this.isFulfilled=f.isFulfilled=function(){return!!x};this.isCanceled=f.isCanceled=function(){return E};this.progress=function(a,b){if(x){if(!0===b)throw Error("This deferred has already been fulfilled.");return f}k(D,0,a,null,B);return f};this.resolve=
function(a,b){if(x){if(!0===b)throw Error("This deferred has already been fulfilled.");return f}k(D,x=1,y=a,null,B);D=null;return f};var A=this.reject=function(a,b){if(x){if(!0===b)throw Error("This deferred has already been fulfilled.");return f}Error.captureStackTrace&&Error.captureStackTrace(w={},A);k(D,x=2,y=a,w,B);D=null;return f};this.then=f.then=function(a,b,d){var A=[d,a,b];A.cancel=f.cancel;A.deferred=new c(function(a){return A.cancel&&A.cancel(a)});x&&!D?g(A,x,y,w):D.push(A);return A.deferred.promise};
this.cancel=f.cancel=function(c,w){if(x){if(!0===w)throw Error("This deferred has already been fulfilled.");}else{if(a){var f=a(c);c="undefined"===typeof f?c:f}E=!0;if(x){if(2===x&&y===c)return c}else return"undefined"===typeof c&&(c=new b),A(c),c}};m(f)};c.prototype.toString=function(){return"[object Deferred]"};r&&r(c);return c})},"dojo/errors/CancelError":function(){define(["./create"],function(q){return q("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],
function(q){return function(t,b,s,r){s=s||Error;var m=function(k){if(s===Error){Error.captureStackTrace&&Error.captureStackTrace(this,m);var g=Error.call(this,k),f;for(f in g)g.hasOwnProperty(f)&&(this[f]=g[f]);this.message=k;this.stack=g.stack}else s.apply(this,arguments);b&&b.apply(this,arguments)};m.prototype=q.delegate(s.prototype,r);m.prototype.name=t;return m.prototype.constructor=m}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(q){function t(){throw new TypeError("abstract");
}return q.extend(function(){},{then:function(b,s,r){t()},cancel:function(b,s){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(b){return this.then(b,b)},otherwise:function(b){return this.then(null,b)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],
function(q,t,b,s){function r(a,b,c){var f="";a&&a.stack&&(f+=a.stack);b&&b.stack&&(f+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(f+="\n    ----------------------------------------\n"+c.stack);console.error(a,f)}function m(a,b,c,f){b||r(a,c,f)}function k(b,u,k,x){s.some(f,function(a){if(a.error===b)return u&&(a.handled=!0),!0})||f.push({error:b,rejection:k,handled:u,deferred:x,timestamp:(new Date).getTime()});
a||(a=setTimeout(g,c))}function g(){var b=(new Date).getTime(),u=b-c;f=s.filter(f,function(a){return a.timestamp<u?(a.handled||r(a.error,a.rejection,a.deferred),!1):!0});a=f.length?setTimeout(g,f[0].timestamp+c-b):!1}t.add("config-useDeferredInstrumentation","report-unhandled-rejections");var f=[],a=!1,c=1E3;return function(a){var f=t("config-useDeferredInstrumentation");if(f){q.on("resolved",b.hitch(console,"log","resolved"));q.on("rejected",b.hitch(console,"log","rejected"));q.on("progress",b.hitch(console,
"log","progress"));var g=[];"string"===typeof f&&(g=f.split(","),f=g.shift());if("report-rejections"===f)a.instrumentRejected=m;else if("report-unhandled-rejections"===f||!0===f||1===f)a.instrumentRejected=k,c=parseInt(g[0],10)||c;else throw Error("Unsupported instrumentation usage \x3c"+f+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(q,t,b){function s(b){setTimeout(function(){m.apply(r,b)},0)}var r=new b,m=r.emit;r.emit=null;t.prototype.trace=
function(){var b=q._toArray(arguments);this.then(function(g){s(["resolved",g].concat(b))},function(g){s(["rejected",g].concat(b))},function(g){s(["progress",g].concat(b))});return this};t.prototype.traceRejected=function(){var b=q._toArray(arguments);this.otherwise(function(g){s(["rejected",g].concat(b))});return this};return r})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(q,t){return function(b,s,r,m){var k=b&&"function"===typeof b.then,g=k&&b instanceof t;if(k)g||
(k=new q(b.cancel),b.then(k.resolve,k.reject,k.progress),b=k.promise);else return 1<arguments.length?s?s(b):b:(new q).resolve(b);return s||r||m?b.then(s,r,m):b}})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(q,t,b,s,r,m){function k(){for(var b=+new Date,d=0,u;d<a.length&&(u=a[d]);d++){var k=u.response,x=k.options;if(u.isCanceled&&u.isCanceled()||
u.isValid&&!u.isValid(k))a.splice(d--,1),g._onAction&&g._onAction();else if(u.isReady&&u.isReady(k))a.splice(d--,1),u.handleResponse(k),g._onAction&&g._onAction();else if(u.startTime&&u.startTime+(x.timeout||0)<b)a.splice(d--,1),u.cancel(new t("Timeout exceeded",k)),g._onAction&&g._onAction()}g._onInFlight&&g._onInFlight(u);a.length||(clearInterval(f),f=null)}function g(b){b.response.options.timeout&&(b.startTime=+new Date);b.isFulfilled()||(a.push(b),f||(f=setInterval(k,50)),b.response.options.sync&&
k())}var f=null,a=[];g.cancelAll=function(){try{s.forEach(a,function(a){try{a.cancel(new b("All requests canceled."))}catch(c){}})}catch(c){}};r&&(m&&r.doc.attachEvent)&&m(r.global,"unload",function(){g.cancelAll()});return g})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),function(q,t,b,s,r,m,k,g){function f(a){return c(a)}function a(a){return void 0!==a.data?a.data:
a.text}q.deepCopy=function(a,b){for(var c in b){var f=a[c],y=b[c];f!==y&&(f&&"object"===typeof f&&y&&"object"===typeof y?q.deepCopy(f,y):a[c]=y)}return a};q.deepCreate=function(a,b){b=b||{};var c=k.delegate(a),f,y;for(f in a)(y=a[f])&&"object"===typeof y&&(c[f]=q.deepCreate(y,b[f]));return q.deepCopy(c,b)};var c=Object.freeze||function(a){return a};q.deferred=function(d,u,m,x,y,w){var E=new s(function(a){u&&u(E,d);return!a||!(a instanceof t)&&!(a instanceof b)?new b("Request canceled",d):a});E.response=
d;E.isValid=m;E.isReady=x;E.handleResponse=y;m=E.then(f).otherwise(function(a){a.response=d;throw a;});q.notify&&m.then(k.hitch(q.notify,"emit","load"),k.hitch(q.notify,"emit","error"));x=m.then(a);y=new g;for(var D in x)x.hasOwnProperty(D)&&(y[D]=x[D]);y.response=m;c(y);w&&E.then(function(a){w.call(E,a)},function(a){w.call(E,d,a)});E.promise=y;E.then=y.then;return E};q.addCommonMethods=function(a,b){m.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,
f){f=k.delegate(f||{});f.method=b;return a(c,f)}})};q.parseArgs=function(a,b,c){var f=b.data,y=b.query;if(f&&!c&&"object"===typeof f&&!(f instanceof ArrayBuffer||f instanceof Blob))b.data=r.objectToQuery(f);y?("object"===typeof y&&(y=r.objectToQuery(y)),b.preventCache&&(y+=(y?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(y="request.preventCache\x3d"+ +new Date);a&&y&&(a+=(~a.indexOf("?")?"\x26":"?")+y);return{url:a,options:b,getHeader:function(a){return null}}};q.checkStatus=
function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(q){return q("RequestError",function(q,b){this.response=b})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(q,t){return q("RequestTimeoutError",null,t,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(q,t,b,s,r){function m(a,c){var d=
a.xhr;a.status=a.xhr.status;try{a.text=d.responseText}catch(w){}"xml"===a.options.handleAs&&(a.data=d.responseXML);if(!c)try{b(a)}catch(f){c=f}var u;if(c)this.reject(c);else{try{b(a)}catch(x){u=x}s.checkStatus(d.status)?u?this.reject(u):this.resolve(a):(c=u?new q("Unable to load "+a.url+" status: "+d.status+" and an error in handleAs: transformation of response",a):new q("Unable to load "+a.url+" status: "+d.status,a),this.reject(c))}}function k(a){return this.xhr.getResponseHeader(a)}function g(b,
w,y){var H=r("native-formdata")&&w&&w.data&&w.data instanceof FormData,G=s.parseArgs(b,s.deepCreate(x,w),H);b=G.url;w=G.options;var I,M=s.deferred(G,u,a,c,m,function(){I&&I()}),J=G.xhr=g._create();if(!J)return M.cancel(new q("XHR was not created")),y?M:M.promise;G.getHeader=k;d&&(I=d(J,M,G));var S=w.data,L=!w.sync,Q=w.method;try{J.open(Q,b,L,w.user||B,w.password||B);w.withCredentials&&(J.withCredentials=w.withCredentials);r("native-response-type")&&w.handleAs in f&&(J.responseType=f[w.handleAs]);
var R=w.headers;b=H?!1:"application/x-www-form-urlencoded";if(R)for(var X in R)"content-type"===X.toLowerCase()?b=R[X]:R[X]&&J.setRequestHeader(X,R[X]);b&&!1!==b&&J.setRequestHeader("Content-Type",b);(!R||!("X-Requested-With"in R))&&J.setRequestHeader("X-Requested-With","XMLHttpRequest");s.notify&&s.notify.emit("send",G,M.promise.cancel);J.send(S)}catch(V){M.reject(V)}t(M);J=null;return y?M:M.promise}r.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});r.add("dojo-force-activex-xhr",
function(){return r("activex")&&"file:"===window.location.protocol});r.add("native-xhr2",function(){if(r("native-xhr")&&!r("dojo-force-activex-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});r.add("native-formdata",function(){return"undefined"!==typeof FormData});r.add("native-response-type",function(){return r("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});r.add("native-xhr2-blob",
function(){if(r("native-response-type")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var f={blob:r("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},a,c,d,u;r("native-xhr2")?(a=function(a){return!this.isFulfilled()},u=function(a,b){b.xhr.abort()},d=function(a,b,c){function d(a){b.handleResponse(c)}function w(a){a=new q("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,
a)}function f(a){a.lengthComputable?(c.loaded=a.loaded,c.total=a.total,b.progress(c)):3===c.xhr.readyState&&(c.loaded="loaded"in a?a.loaded:a.position,b.progress(c))}a.addEventListener("load",d,!1);a.addEventListener("error",w,!1);a.addEventListener("progress",f,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",w,!1);a.removeEventListener("progress",f,!1);a=null}}):(a=function(a){return a.xhr.readyState},c=function(a){return 4===a.xhr.readyState},u=function(a,
b){var c=b.xhr,d=typeof c.abort;("function"===d||"object"===d||"unknown"===d)&&c.abort()});var B,x={data:null,query:null,sync:!1,method:"GET"};g._create=function(){throw Error("XMLHTTP not available");};if(r("native-xhr")&&!r("dojo-force-activex-xhr"))g._create=function(){return new XMLHttpRequest};else if(r("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),g._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(y){try{new ActiveXObject("Microsoft.XMLHTTP"),g._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(w){}}s.addCommonMethods(g);
return g})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(q,t,b,s){function r(b){var d=a[b.options.handleAs];b.data=d?d(b):b.data||b.text;return b}s.add("activex","undefined"!==typeof ActiveXObject);s.add("dom-parser",function(a){return"DOMParser"in a});var m;if(s("activex")){var k=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],g;m=function(a){function d(a){try{var b=
new ActiveXObject(a);b.async=!1;b.loadXML(m);f=b;g=a}catch(c){return!1}return!0}var f=a.data,m=a.text;f&&(s("dom-qsa2.1")&&!f.querySelectorAll&&s("dom-parser"))&&(f=(new DOMParser).parseFromString(m,"application/xml"));if(!f||!f.documentElement)(!g||!d(g))&&b.some(k,d);return f}}var f=function(a){return!s("native-xhr2-blob")&&"blob"===a.options.handleAs&&"undefined"!==typeof Blob?new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")}):a.xhr.response},a={javascript:function(a){return t.eval(a.text||
"")},json:function(a){return q.parse(a.text||null)},xml:m,blob:f,arraybuffer:f,document:f};r.register=function(b,d){a[b]=d};return r})},"dojo/selector/_loader":function(){define(["../has","require"],function(q,t){if("undefined"!==typeof document){var b=document.createElement("div");q.add("dom-qsa2.1",!!b.querySelectorAll);q.add("dom-qsa3",function(){try{return b.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==b.querySelectorAll(".TEST:empty").length}catch(r){}})}var s;return{load:function(b,m,
k,g){if(g&&g.isBuild)k();else{g=t;b="default"==b?q("config-selectorEngine")||"css3":b;b="css2"==b||"lite"==b?"./lite":"css2.1"==b?q("dom-qsa2.1")?"./lite":"./acme":"css3"==b?q("dom-qsa3")?"./lite":"./acme":"acme"==b?"./acme":(g=m)&&b;if("?"==b.charAt(b.length-1)){b=b.substring(0,b.length-1);var f=!0}if(f&&(q("dom-compliant-qsa")||s))return k(s);g([b],function(a){"./lite"!=b&&(s=a);k(a)})}}}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(q,t){var b=/[&<>'"\/]/g,s={"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},r={};t.setObject("dojo.string",r);r.escape=function(m){return!m?"":m.replace(b,function(b){return s[b]})};r.rep=function(b,k){if(0>=k||!b)return"";for(var g=[];;){k&1&&g.push(b);if(!(k>>=1))break;b+=b}return g.join("")};r.pad=function(b,k,g,f){g||(g="0");b=String(b);k=r.rep(g,Math.ceil((k-b.length)/g.length));return f?b+k:k+b};r.substitute=function(b,k,g,f){f=f||q.global;g=g?t.hitch(f,g):function(a){return a};return b.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,
function(a,b,d){if(""==b)return"$";a=t.getObject(b,!1,k);d&&(a=t.getObject(d,!1,f).call(f,a,b));return g(a,b).toString()})};r.trim=String.prototype.trim?t.trim:function(b){b=b.replace(/^\s+/,"");for(var k=b.length-1;0<=k;k--)if(/\S/.test(b.charAt(k))){b=b.substring(0,k+1);break}return b};return r})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(q,t){var b={};t.setObject("dojo.regexp",b);b.escapeString=function(b,r){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return r&&
-1!=r.indexOf(b)?b:"\\"+b})};b.buildGroupRE=function(s,r,m){if(!(s instanceof Array))return r(s);for(var k=[],g=0;g<s.length;g++)k.push(r(s[g]));return b.group(k.join("|"),m)};b.group=function(b,r){return"("+(r?"?:":"")+b+")"};return b})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(q,t,b,s,r,m,k,g,f){function a(a,b,c,d){return d.replace(/([a-z])\1*/ig,function(f){var x,
g,m=f.charAt(0);f=f.length;var B=["abbr","wide","narrow"];switch(m){case "G":x=b[4>f?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":x=a.getFullYear();switch(f){case 1:break;case 2:if(!c.fullYear){x=String(x);x=x.substr(x.length-2);break}default:g=!0}break;case "Q":case "q":x=Math.ceil((a.getMonth()+1)/3);g=!0;break;case "M":case "L":x=a.getMonth();3>f?(x+=1,g=!0):(m=["months","L"==m?"standAlone":"format",B[f-3]].join("-"),x=b[m][x]);break;case "w":x=u._getWeekOfYear(a,0);g=!0;break;case "d":x=
a.getDate();g=!0;break;case "D":x=u._getDayOfYear(a);g=!0;break;case "e":case "c":if(x=a.getDay(),2>f){x=(x-s.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":x=a.getDay();3>f?(x+=1,g=!0):(m=["days","c"==m?"standAlone":"format",B[f-3]].join("-"),x=b[m][x]);break;case "a":m=12>a.getHours()?"am":"pm";x=c[m]||b["dayPeriods-format-wide-"+m];break;case "h":case "H":case "K":case "k":g=a.getHours();switch(m){case "h":x=g%12||12;break;case "H":x=g;break;case "K":x=g%12;break;case "k":x=g||24}g=!0;break;case "m":x=
a.getMinutes();g=!0;break;case "s":x=a.getSeconds();g=!0;break;case "S":x=Math.round(a.getMilliseconds()*Math.pow(10,f-3));g=!0;break;case "v":case "z":if(x=u._getZone(a,!0,c))break;f=4;case "Z":m=u._getZone(a,!1,c);m=[0>=m?"+":"-",k.pad(Math.floor(Math.abs(m)/60),2),k.pad(Math.abs(m)%60,2)];4==f&&(m.splice(0,0,"GMT"),m.splice(3,0,":"));x=m.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+d);}g&&(x=k.pad(x,f));return x})}function c(a,b,c,d){var f=function(a){return a};
b=b||f;c=c||f;d=d||f;var u=a.match(/(''|[^'])+/g),x="'"==a.charAt(0);t.forEach(u,function(a,d){a?(u[d]=(x?c:b)(a.replace(/''/g,"'")),x=!x):u[d]=""});return d(u.join(""))}function d(a,b,c,d){d=m.escapeString(d);c.strict||(d=d.replace(" a"," ?a"));return d.replace(/([a-z])\1*/ig,function(d){var f;f=d.charAt(0);var u=d.length,x="",g="";c.strict?(1<u&&(x="0{"+(u-1)+"}"),2<u&&(g="0{"+(u-2)+"}")):(x="0?",g="0{0,2}");switch(f){case "y":f="\\d{2,4}";break;case "M":case "L":f=2<u?"\\S+?":"1[0-2]|"+x+"[1-9]";
break;case "D":f="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+x+"[1-9][0-9]|"+g+"[1-9]";break;case "d":f="3[01]|[12]\\d|"+x+"[1-9]";break;case "w":f="[1-4][0-9]|5[0-3]|"+x+"[1-9]";break;case "E":case "e":case "c":f=".+?";break;case "h":f="1[0-2]|"+x+"[1-9]";break;case "k":f="1[01]|"+x+"\\d";break;case "H":f="1\\d|2[0-3]|"+x+"\\d";break;case "K":f="1\\d|2[0-4]|"+x+"[1-9]";break;case "m":case "s":f="[0-5]\\d";break;case "S":f="\\d{"+u+"}";break;case "a":u=c.am||b["dayPeriods-format-wide-am"];x=c.pm||b["dayPeriods-format-wide-pm"];
f=u+"|"+x;c.strict||(u!=u.toLowerCase()&&(f+="|"+u.toLowerCase()),x!=x.toLowerCase()&&(f+="|"+x.toLowerCase()),-1!=f.indexOf(".")&&(f+="|"+f.replace(/\./g,"")));f=f.replace(/\./g,"\\.");break;default:f=".*"}a&&a.push(d);return"("+f+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var u={};q.setObject(f.id.replace(/\//g,"."),u);u._getZone=function(a,c,d){return c?b.getTimezoneName(a):a.getTimezoneOffset()};u.format=function(b,d){d=d||{};var f=r.normalizeLocale(d.locale),x=d.formatLength||"short",f=u._getGregorianBundle(f),
g=[],k=q.hitch(this,a,b,f,d);if("year"==d.selector)return c(f["dateFormatItem-yyyy"]||"yyyy",k);var m;"date"!=d.selector&&(m=d.timePattern||f["timeFormat-"+x])&&g.push(c(m,k));"time"!=d.selector&&(m=d.datePattern||f["dateFormat-"+x])&&g.push(c(m,k));return 1==g.length?g[0]:f["dateTimeFormat-"+x].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return g[b]})};u.regexp=function(a){return u._parseInfo(a).regexp};u._parseInfo=function(a){a=a||{};var b=r.normalizeLocale(a.locale),b=u._getGregorianBundle(b),
f=a.formatLength||"short",x=a.datePattern||b["dateFormat-"+f],g=a.timePattern||b["timeFormat-"+f],f="date"==a.selector?x:"time"==a.selector?g:b["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(a,b){return[g,x][b]}),k=[];return{regexp:c(f,q.hitch(this,d,k,b,a)),tokens:k,bundle:b}};u.parse=function(a,c){var d=/[\u200E\u200F\u202A\u202E]/g,f=u._parseInfo(c),x=f.tokens,g=f.bundle,d=RegExp("^"+f.regexp.replace(d,"")+"$",f.strict?"":"i").exec(a&&a.replace(d,""));if(!d)return null;var k=["abbr","wide",
"narrow"],m=[1970,0,1,0,0,0,0],B="",d=t.every(d,function(a,b){if(!b)return!0;var d=x[b-1],f=d.length,d=d.charAt(0);switch(d){case "y":if(2!=f&&c.strict)m[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),f=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),m[0]=a<d?f+a:f-100+a;else{if(c.strict)return!1;m[0]=a}break;case "M":case "L":if(2<f){if(f=g["months-"+("L"==d?"standAlone":"format")+"-"+k[f-3]].concat(),c.strict||(a=a.replace(".","").toLowerCase(),f=t.map(f,function(a){return a.replace(".",
"").toLowerCase()})),a=t.indexOf(f,a),-1==a)return!1}else a--;m[1]=a;break;case "E":case "e":case "c":f=g["days-"+("c"==d?"standAlone":"format")+"-"+k[f-3]].concat();c.strict||(a=a.toLowerCase(),f=t.map(f,function(a){return a.toLowerCase()}));a=t.indexOf(f,a);if(-1==a)return!1;break;case "D":m[1]=0;case "d":m[2]=a;break;case "a":f=c.am||g["dayPeriods-format-wide-am"];d=c.pm||g["dayPeriods-format-wide-pm"];if(!c.strict){var u=/\./g;a=a.replace(u,"").toLowerCase();f=f.replace(u,"").toLowerCase();d=
d.replace(u,"").toLowerCase()}if(c.strict&&a!=f&&a!=d)return!1;B=a==d?"p":a==f?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;m[3]=a;break;case "m":m[4]=a;break;case "s":m[5]=a;break;case "S":m[6]=a}return!0}),f=+m[3];"p"===B&&12>f?m[3]=f+12:"a"===B&&12==f&&(m[3]=0);f=new Date(m[0],m[1],m[2],m[3],m[4],m[5],m[6]);c.strict&&f.setFullYear(m[0]);var r=x.join(""),s=-1!=r.indexOf("d"),r=-1!=r.indexOf("M");if(!d||r&&f.getMonth()>m[1]||s&&f.getDate()>m[2])return null;if(r&&
f.getMonth()<m[1]||s&&f.getDate()<m[2])f=b.add(f,"hour",1);return f};var B=[],x={};u.addCustomFormats=function(a,b){B.push({pkg:a,name:b});x={}};u._getGregorianBundle=function(a){if(x[a])return x[a];var b={};t.forEach(B,function(c){c=r.getLocalization(c.pkg,c.name,a);b=q.mixin(b,c)},this);return x[a]=b};u.addCustomFormats(f.id.replace(/\/date\/locale$/,".cldr"),"gregorian");u.getNames=function(a,b,c,d){var f;d=u._getGregorianBundle(d);a=[a,c,b];"standAlone"==c&&(c=a.join("-"),f=d[c],1==f[0]&&(f=void 0));
a[1]="format";return(f||d[a.join("-")]).concat()};u.isWeekend=function(a,b){var c=s.getWeekend(b),d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));return d>=c.start&&d<=c.end};u._getDayOfYear=function(a){return b.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};u._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((u._getDayOfYear(a)+(c-b+7)%7-1)/7);c==b&&d++;return d};return u})},"dojo/cldr/supplemental":function(){define(["../_base/lang",
"../i18n"],function(q,t){var b={};q.setObject("dojo.cldr.supplemental",b);b.getFirstDayOfWeek=function(s){s={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[b._region(s)];
return void 0===s?1:s};b._region=function(b){b=t.normalizeLocale(b);b=b.split("-");var r=b[1];r?4==r.length&&(r=b[2]):r={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",
gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",
nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",
zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",
dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",
kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",
pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",
tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[b[0]];return r};b.getWeekend=function(s){var r=b._region(s);s={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[r];r={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[r];void 0===s&&(s=6);void 0===r&&(r=0);return{start:s,
end:r}};return b})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(q,t,b,s,r,m){q=q(m,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(b){b&&t.isObject(b)&&(this.size="auto"===this.size?this.size:s.pt2px(this.size),this.xoffset=s.pt2px(this.xoffset),this.yoffset=s.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(b){this.angle=b;return this},
setSize:function(b){this.size=b;return this},setOffset:function(b,g){this.xoffset=b;this.yoffset=g;return this},toJson:function(){var b=s.px2pt(this.size),b=isNaN(b)?void 0:b,g=s.px2pt(this.xoffset),g=isNaN(g)?void 0:g,f=s.px2pt(this.yoffset),f=isNaN(f)?void 0:f;return t.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:b,angle:this.angle&&-1*this.angle,xoffset:g,yoffset:f})}});b("extend-esri")&&t.setObject("symbol.MarkerSymbol",q,r);return q})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),
function(q,t,b,s,r,m){q=q(null,{declaredClass:"esri.symbol.Symbol",color:new m([0,0,0,1]),type:null,constructor:function(b){if(b&&t.isObject(b)&&(t.mixin(this,b),this.color&&r.isDefined(this.color[0])&&(this.color=m.toDojoColor(this.color)),(b=this.type)&&0===b.indexOf("esri")))this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[b]},
setColor:function(b){this.color=b;return this},toJson:function(){return{color:m.toJsonColor(this.color)}}});b("extend-esri")&&t.setObject("symbol.Symbol",q,s);return q})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(q,t,b,s){q=q([t],{declaredClass:"esri.Color"});q.toJsonColor=function(b){return b&&[b.r,b.g,b.b,1<b.a?b.a:Math.round(255*b.a)]};q.toDojoColor=function(b){return b&&new t([b[0],b[1],b[2],b[3]/255])};var r,m="named blendColors fromRgb fromHex fromArray fromString".split(" ");
for(r=0;r<m.length;r++)q[m[r]]=t[m[r]];b("extend-esri")&&(s.Color=q);return q})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(q,t,b,s,r,m,k,g){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},a={color:[0,0,0,1],style:f.STYLE_SOLID,width:1};q=q(g,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",
longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(c,d,u){c?t.isString(c)?(this.style=c,d&&(this.color=d),u&&(this.width=u)):this.style=k.valueOf(this._styles,c.style)||f.STYLE_SOLID:(t.mixin(this,a),this.color=new b(this.color),this.width=r.pt2px(this.width))},setStyle:function(a){this.style=a;return this},getStroke:function(){return this.style===f.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},
getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return k.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}))}});t.mixin(q,f);q.defaultProps=a;s("extend-esri")&&(t.setObject("symbol.SimpleLineSymbol",q,m),m.symbol.defaultSimpleLineSymbol=a);return q})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(q,t,b,s,r,m){q=q(m,{declaredClass:"esri.symbol.LineSymbol",constructor:function(b){t.isObject(b)?this.width=s.pt2px(this.width):this.width=12},setWidth:function(b){this.width=b;return this},toJson:function(){var b=s.px2pt(this.width),b=isNaN(b)?void 0:b;return t.mixin(this.inherited("toJson",arguments),{width:b})}});b("extend-esri")&&t.setObject("symbol.LineSymbol",q,r);return q})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),
function(q,t,b,s,r,m,k,g,f,a){var c={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},d={style:c.STYLE_SOLID,color:[0,0,0,0.25]};q=q(g,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",
_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(a,c,x){a?t.isString(a)?(this.style=a,void 0!==c&&(this.outline=c),void 0!==x&&(this.color=x)):this.style=k.valueOf(this._styles,a.style):(t.mixin(this,d),this.outline=new f(this.outline),this.color=new b(this.color))},setStyle:function(a){this.style=
a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var b=this.style;return b===c.STYLE_NULL?null:b===c.STYLE_SOLID?this.color:t.mixin({},r.defaultPattern,{src:a.toUrl("../images/symbol/sfs/"+b+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return k.fixJson(t.mixin(this.inherited("toJson",
arguments),{type:"esriSFS",style:this._styles[this.style]}))}});t.mixin(q,c);q.defaultProps=d;s("extend-esri")&&(t.setObject("symbol.SimpleFillSymbol",q,m),m.symbol.defaultSimpleFillSymbol=d);return q})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(q,t,b,s,r,m){q=q(r,{declaredClass:"esri.symbol.FillSymbol",constructor:function(b){b&&(t.isObject(b)&&b.outline)&&(this.outline=new m(b.outline))},setOutline:function(b){this.outline=
b;return this},toJson:function(){var b=this.inherited("toJson",arguments);this.outline&&(b.outline=this.outline.toJson());return b}});b("extend-esri")&&t.setObject("symbol.FillSymbol",q,s);return q})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(q,t,b,s,r,m,k,g,f){q=q(null,{declaredClass:"esri.Graphic",constructor:function(a,b,d,u){a&&!a.declaredClass?(this.geometry=
a.geometry?g.fromJson(a.geometry):null,this.symbol=a.symbol?f.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new k(a.infoTemplate):null):(this.geometry=a,this.symbol=b,this.attributes=d,this.infoTemplate=u)},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();
return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),b,d,f=a.length,g=[];for(d=0;d<f;d++)(b=a[d]&&a[d].getNode())&&b.nodeType&&g.push(b);return g},getLayer:function(){return this._layer},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;if(a=this._graphicsLayer)a._updateExtent(this),a._draw(this,!0);return this},setSymbol:function(a,b){var d=this._graphicsLayer,f=this._shape;this.symbol=a;d&&(b&&f&&d._removeShape(this),
d._draw(this,!0));return this},setAttributes:function(a){this.attributes=a;this._clearCache();return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),b=a&&a.title;if(t.isFunction(b))b=b.call(a,this);else if(t.isString(b))var d=(a=this.getLayer())&&a._getDateOpts,b=m.substitute(this.attributes,
b,{first:!0,dateFormat:d&&d.call(a)});return b},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(t.isFunction(b))b=b.call(a,this);else if(t.isString(b))var d=(a=this.getLayer())&&a._getDateOpts,b=m.substitute(this.attributes,b,{dateFormat:d&&d.call(a)});return b},attr:function(a,b){var d=this.getNodes(),f,g=d.length;for(f=0;f<g;f++)null==b?d[f].removeAttribute(a):d[f].setAttribute(a,b);return this},show:function(){this.visible=this._visible=!0;var a,b,d;if(this.getShapes().length){a=
this.getNodes();d=a.length;this.attr("data-hidden");for(b=0;b<d;b++)r.show(a[b])}else this._graphicsLayer&&this._graphicsLayer._draw(this,!0);return this},hide:function(){this.visible=this._visible=!1;var a=this._graphicsLayer,b,d;if(a)if("canvas-2d"===a.surfaceType)a._removeShape(this);else if(a=this.getNodes(),d=a.length){this.attr("data-hidden","");for(b=0;b<d;b++)r.hide(a[b])}return this},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=
t.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a},_getDataValue:function(a,b,d){var f=this._getCacheItem(a,b);if(void 0===f.value){var g=null,x=this.attributes,y=a.field;if(b.exprTree)g=d.executeExpression(b.exprTree,d.createExecContext(this));else if(t.isFunction(y))g=y(this);else if(x&&(g=x[y],(a=a.normalizationField)&&this._isValidNumber(g)))x=parseFloat(x[a]),g=this._isValidNumber(x)&&0!==x?g/x:null;
this._isValidNumber(g)||(g=null);f.value=g}return f.value},_isValidNumber:function(a){return"number"===typeof a&&!isNaN(a)},_getCacheItem:function(a,b){var d=this._findCacheItem(a);d?d.version!==b.version&&(d.version=b.version,d.value=void 0):d=this._createCacheItem(a,b);return d},_findCacheItem:function(a){var b,d=this._cache;if(d){var f,g=d.length;for(f=0;f<g;f++){var x=d[f];if(x.variable===a){b=x;break}}}return b},_createCacheItem:function(a,b){var d=this._cache;d||(d=this._cache=[]);var f={variable:a,
version:b.version,value:void 0};d.push(f);return f},_clearCache:function(){this._cache=null}});q.prototype.getShape=q.prototype.getDojoShape;b("extend-esri")&&(s.Graphic=q);return q})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(q,t,b,s,r){var m={show:function(b){if(b=m.getNode(b))b.style.display="block"},getNode:function(b){return b&&b.domNode||b},hide:function(b){if(b=m.getNode(b))b.style.display="none"},toggle:function(b){if(b=
m.getNode(b))b.style.display="none"===b.style.display?"block":"none"},documentBox:8>=r("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(b){if(b=this.getNode(b)){var g=0,f=0,a=0,c=0,d=0,u=0;return[t.connect(b,"ontouchstart",function(m){g=m.touches[0].screenX;f=m.touches[0].screenY;a=b.scrollWidth;c=b.scrollHeight;d=b.clientWidth;u=b.clientHeight}),t.connect(b,"ontouchmove",function(m){m.preventDefault();
var x=b.firstChild;x instanceof Text&&(x=b.childNodes[1]);var y=x._currentX||0,w=x._currentY||0,y=y+(m.touches[0].screenX-g);0<y?y=0:0>y&&Math.abs(y)+d>a&&(y=-1*(a-d));x._currentX=y;w+=m.touches[0].screenY-f;0<w?w=0:0>w&&Math.abs(w)+u>c&&(w=-1*(c-u));x._currentY=w;s.set(x,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+y+"px, "+w+"px)"});g=m.touches[0].screenX;f=m.touches[0].screenY})]}}};r("extend-esri")&&b.mixin(q,m);return m})},"esri/InfoTemplate":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","./kernel","./lang"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.InfoTemplate",constructor:function(b,k){b&&t.isObject(b)&&!t.isFunction(b)?t.mixin(this,b):(this.title=b||"${*}",this.content=k||"${*}")},setTitle:function(b){this.title=b;return this},setContent:function(b){this.content=b;return this},toJson:function(){return r.fixJson({title:this.title,content:this.content})}});b("extend-esri")&&(s.InfoTemplate=q);return q})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(q,t,b,s,r,m,k,g){var f={fromJson:function(a){if(void 0!==a.x&&void 0!==a.y)return new s(a);if(void 0!==a.paths)return new r(a);if(void 0!==a.rings)return new m(a);if(void 0!==a.points)return new k(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new g(a)},getJsonType:function(a){return a instanceof s?"esriGeometryPoint":a instanceof r?"esriGeometryPolyline":a instanceof m?"esriGeometryPolygon":a instanceof g?"esriGeometryEnvelope":a instanceof k?"esriGeometryMultipoint":
null},getGeometryType:function(a){return"esriGeometryPoint"===a?s:"esriGeometryPolyline"===a?r:"esriGeometryPolygon"===a?m:"esriGeometryEnvelope"===a?g:"esriGeometryMultipoint"===a?k:null}};t("extend-esri")&&q.mixin(q.getObject("geometry",!0,b),f);return f})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(q,t,b,s,r,m,k,g){function f(a,b){89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);
var d=b*B;return[a*B*c,c/2*Math.log((1+Math.sin(d))/(1-Math.sin(d)))]}function a(a,b,f){a=a/c*u;if(f)return b=d/2-2*Math.atan(Math.exp(-1*b/c)),[a,b*u];f=a-360*Math.floor((a+180)/360);b=d/2-2*Math.atan(Math.exp(-1*b/c));return[f,b*u]}var c=6378137,d=3.141592653589793,u=57.29577951308232,B=0.017453292519943,x={type:"point",x:0,y:0};q=q(k,{declaredClass:"esri.geometry.Point",constructor:function(a,b,c){t.mixin(this,x);t.isArray(a)?(this.x=a[0],this.y=a[1],this.spatialReference=b):t.isObject(a)?(t.mixin(this,
a),r.isDefined(this.latitude)&&(this.y=this.latitude),r.isDefined(this.longitude)&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=g.createSpatialReference(this.spatialReference))):(this.x=a,this.y=b,this.spatialReference=c);this.verifySR()},offset:function(a,b){return new this.constructor(this.x+a,this.y+b,this.spatialReference)},setX:function(a){this.x=a;this.clearCache();return this},setY:function(a){this.y=a;this.clearCache();return this},setLongitude:function(a){var b=this.spatialReference;
b&&(b._isWebMercator()?this.setX(f(a,this.y)[0]):4326===b.wkid&&this.setX(a));return this},setLatitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.setY(f(this.x,a)[1]):4326===b.wkid&&this.setY(a));return this},getLongitude:function(){var b=this.spatialReference,c;b&&(b._isWebMercator()?c=a(this.x,this.y)[0]:4326===b.wkid&&(c=this.x));return c},getLatitude:function(){var b=this.spatialReference,c;b&&(b._isWebMercator()?c=a(this.x,this.y)[1]:4326===b.wkid&&(c=this.y));return c},
update:function(a,b){this.x=a;this.y=b;this.clearCache();return this},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var c=b._getInfo();if(c){var d=c.valid[0],f=c.valid[1],c=2*f;a>f?(d=Math.ceil(Math.abs(a-f)/c),a-=d*c):a<d&&(d=Math.ceil(Math.abs(a-d)/c),a+=d*c)}}return new this.constructor(a,this.y,b)},toJson:function(){var a={x:this.x,y:this.y},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});q.lngLatToXY=f;q.xyToLngLat=a;q.defaultProps=x;b("extend-esri")&&
(t.setObject("geometry.Point",q,s),s.geometry.defaultPoint=x);return q})},"esri/SpatialReference":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ./kernel ./lang".split(" "),function(q,t,b,s,r,m){var k=[-2.0037508342788905E7,2.0037508342788905E7],g=[-2.0037508342787E7,2.0037508342787E7];q=q(null,{declaredClass:"esri.SpatialReference",constructor:function(f){f&&(b.isObject(f)?b.mixin(this,f):b.isString(f)?this.wkt=f:this.wkid=f)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:k,origin:g,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:k,origin:g,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:k,origin:g,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:k,origin:g,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==t.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==t.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(b){var a=!1;b&&(a=this.isWebMercator()&&4326===b.wkid||b.isWebMercator()&&4326===this.wkid);return a},isWebMercator:function(){return this._isWebMercator()},equals:function(b){var a=!1;b&&(this===b&&
(a=!0),this.wkid||b.wkid?a=this.wkid===b.wkid||this.isWebMercator()&&b.isWebMercator()||this.wkid===b.latestWkid||b.wkid===this.latestWkid:this.wkt&&b.wkt&&(a=this.wkt.toUpperCase()===b.wkt.toUpperCase()));return a},toJson:function(){var b=null,a=m.isDefined;a(this.wkid)?b={wkid:this.wkid}:a(this.wkt)&&(b={wkt:this.wkt});b&&a(this.latestWkid)&&(b.latestWkid=this.latestWkid);return b}});s("extend-esri")&&(r.SpatialReference=q);return q})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(b){this.spatialReference=b;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new r(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(b){return this.cache&&this.cache[b]},setCacheValue:function(b,k){this.cache||
(this.cache={});this.cache[b]=k}});b("extend-esri")&&t.setObject("geometry.Geometry",q,s);return q})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(q,t,b,s,r){function m(b){var f=!1;if(b&&(b.ics||b.icsid))f=!0;return f}var k={isICS:m,createSpatialReference:function(b){var f=null;b&&(f=m(b)?new t(b):new q(b));return f}};s("extend-esri")&&r.mixin(b,k);return k})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(q,t,b,s,r,m){q=q(m,{declaredClass:"esri.ImageSpatialReference",constructor:function(b){b&&(t.isObject(b)&&t.mixin(this,b),this.url||console.error("ImageSpatialReference: must provide image service URL."))},icsid:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(b){var g=!1;b&&(this.icsid&&b.icsid?g=this.icsid===b.icsid:this.ics&&b.ics&&(g=this.ics===b.ics));return g},toJson:function(b){var g=null,f=r.isDefined;b=f(b)?b:!0;f(this.icsid)?g=
{icsid:this.icsid}:f(this.ics)&&(g={ics:this.ics});f(this.url)&&(f(g)&&b)&&(g.url=this.url);return g}});b("extend-esri")&&(s.ImageSpatialReference=q);return q})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(q,t,b,s,r,m,k,g,f,a,c){var d={type:"polyline",paths:null};q=q(g,{declaredClass:"esri.geometry.Polyline",constructor:function(a){b.mixin(this,
d);this.paths=[];this._path=0;a&&(b.isArray(a)?this.paths=b.isArray(a[0][0])?a:[a]:a.paths?b.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(a){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];b.isArray(a[0])?t.forEach(a,this._addPointArr,this):t.forEach(a,this._addPoint,this);return this},_addPointArr:function(a){this.paths[this._path].push(a)},_addPoint:function(a){this.paths[this._path].push([a.x,
a.y])},_insertPoints:function(a,b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);t.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new f(this.paths[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.paths[a][b]=
[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&m.isDefined(b)&&0<=b&&b<=this.paths[a].length)return this.clearCache(),this.paths[a].splice(b,0,[c.x,c.y]),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var b,c=a.length,d=this.spatialReference;for(b=0;b<c;b++)a[b]=new f(a[b],d);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new f(this.paths[a].splice(b,1)[0],this.spatialReference)},
getExtent:function(){var b;b=this.getCacheValue("_extent");var c=this.getCacheValue("_partwise");if(b)return b=new a(b),b._partwise=c,b;b=this.paths;var d=b.length;if(d&&b[0].length){var f,w,g,D,A,k,m,r,s=D=b[0][0][0],q=A=b[0][0][1],t=Math.min,L=Math.max,Q=this.spatialReference,c=[],R,X,V,O;for(k=0;k<d;k++){f=b[k];R=X=f[0]&&f[0][0];V=O=f[0]&&f[0][1];r=f.length;for(m=0;m<r;m++)w=f[m],g=w[0],w=w[1],s=t(s,g),q=t(q,w),D=L(D,g),A=L(A,w),R=t(R,g),V=t(V,w),X=L(X,g),O=L(O,w);c.push(new a({xmin:R,ymin:V,xmax:X,
ymax:O,spatialReference:Q?Q.toJson():null}))}b={xmin:s,ymin:q,xmax:D,ymax:A,spatialReference:Q?Q.toJson():null};c=1<c.length?c:null;this.setCacheValue("_extent",b);this.setCacheValue("_partwise",c);b=new a(b);b._partwise=c;return b}},toJson:function(){var a={paths:b.clone(this.paths)},c=this.spatialReference;c&&(a.spatialReference=c.toJson());return a}});q.defaultProps=d;s("extend-esri")&&(b.setObject("geometry.Polyline",q,r),r.geometry.defaultPolyline=d);return q})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d){var u={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},B=q(g,{declaredClass:"esri.geometry.Extent",constructor:function(a,c,f,g,D){b.mixin(this,u);b.isObject(a)?(b.mixin(this,a),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):this.update(a,c,f,g,D);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new f((this.xmin+
this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},centerAt:function(a){var b=this.getCenter(),c=a.x-b.x;a=a.y-b.y;return new B(this.xmin+c,this.ymin+a,this.xmax+c,this.ymax+a,this.spatialReference)},update:function(a,b,c,d,f){this.xmin=a;this.ymin=b;this.xmax=c;this.ymax=d;this.spatialReference=f;this.clearCache();return this},offset:function(a,b){return new B(this.xmin+a,this.ymin+b,this.xmax+a,this.ymax+b,this.spatialReference)},expand:function(a){var b=(1-a)/2;a=this.getWidth()*b;b*=
this.getHeight();return new B(this.xmin+a,this.ymin+b,this.xmax-a,this.ymax-b,this.spatialReference)},intersects:function(b){if(!b)return!1;var c=b.type,d=this.spatialReference,f=b.spatialReference;d&&(f&&!d.equals(f)&&d._canProject(f))&&(b=d.isWebMercator()?a.geographicToWebMercator(b):a.webMercatorToGeographic(b,!0));switch(c){case "point":return this.contains(b);case "multipoint":return this._intersectsMultipoint(b);case "extent":return this._intersectsExtent(b);case "polygon":return this._intersectsPolygon(b);
case "polyline":return this._intersectsPolyline(b)}},normalize:function(){var a=this._normalize(!1,!0);b.isArray(a)||(a=[a]);return a},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var a=this.spatialReference,b=a&&a._getInfo(),c=[],d=0;if(b&&this._isOutOfBounds(b)){var f=this,d=f.xmin,u=f.ymin,g=f.ymax,m=b.valid[0],r=b.valid[1];f.getWidth()>2*r&&(f=f.getCenter(),f=new B(f.x-r,u,f.x+r,g,new k(a.toJson())));var d=f.xmin-d,s=this._normalizeX(f.xmin,b),b=this._normalizeX(f.xmax,
b);s.frameId===b.frameId?c.push(new B(s.x,u,b.x,g,new k(a.toJson()))):c.push(new B(s.x,u,r,g,new k(a.toJson())),new B(m,u,b.x,g,new k(a.toJson())))}else c.push(this.getExtent());return{extents:c,marginLeft:d}},_intersectsMultipoint:function(a){var b=a.points.length,c;for(c=0;c<b;c++)if(this.contains(a.getPoint(c)))return!0;return!1},_intersectsExtent:function(a){var b,c,d,f,u=!1;this.xmin<=a.xmin?(b=a.xmin,this.xmax<b?u=!0:d=Math.min(this.xmax,a.xmax)-b):(b=this.xmin,a.xmax<b?u=!0:d=Math.min(this.xmax,
a.xmax)-b);this.ymin<=a.ymin?(c=a.ymin,this.ymax<c?u=!0:f=Math.min(this.ymax,a.ymax)-c):(c=this.ymin,a.ymax<c?u=!0:f=Math.min(this.ymax,a.ymax)-c);return u?null:new B(b,c,b+d,c+f,this.spatialReference)},_intersectsPolygon:function(a){var b=[this.xmin,this.ymax],c=[this.xmax,this.ymax],d=[this.xmin,this.ymin],u=[this.xmax,this.ymin],g=[b,c,d,u],b=[[d,b],[b,c],[c,u],[u,d]],d=a.rings,u=d.length,k,m=new f(0,0,this.spatialReference);k=g.length;for(c=0;c<k;c++)if(m.update(g[c][0],g[c][1]),a.contains(m))return!0;
m.setSpatialReference(a.spatialReference);for(var B,r,c=0;c<u;c++)if(g=d[c],k=g.length){B=g[0];m.update(B[0],B[1]);if(this.contains(m))return!0;for(a=1;a<k;a++){r=g[a];m.update(r[0],r[1]);if(this.contains(m)||this._intersectsLine([B,r],b))return!0;B=r}}return!1},_intersectsPolyline:function(a){var b=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],c,d=a.paths,u=
d.length,g,k,m,B,r=new f(0,0,a.spatialReference);for(a=0;a<u;a++)if(g=d[a],k=g.length){m=g[0];r.update(m[0],m[1]);if(this.contains(r))return!0;for(c=1;c<k;c++){B=g[c];r.update(B[0],B[1]);if(this.contains(r)||this._intersectsLine([m,B],b))return!0;m=B}}return!1},_intersectsLine:function(a,b){var d=c._getLineIntersection2,f,u=b.length;for(f=0;f<u;f++)if(d(a,b[f]))return!0;return!1},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var c=this.spatialReference,d=a.spatialReference,b=a.x;
a=a.y;c&&(d&&!c.equals(d)&&c._canProject(d))&&(a=c.isWebMercator()?f.lngLatToXY(b,a):f.xyToLngLat(b,a,!0),b=a[0],a=a[1]);return b>=this.xmin&&b<=this.xmax&&a>=this.ymin&&a<=this.ymax}return"extent"===b?this._containsExtent(a):!1},_containsExtent:function(a){var b=a.xmin,c=a.ymin,d=a.xmax,u=a.ymax,g=a.spatialReference;a=new f(b,c,g);b=new f(b,u,g);u=new f(d,u,g);c=new f(d,c,g);return this.contains(a)&&this.contains(b)&&this.contains(u)&&this.contains(c)?!0:!1},union:function(a){return new B(Math.min(this.xmin,
a.xmin),Math.min(this.ymin,a.ymin),Math.max(this.xmax,a.xmax),Math.max(this.ymax,a.ymax),this.spatialReference)},getExtent:function(){var a=this.spatialReference;return new B(this.xmin,this.ymin,this.xmax,this.ymax,a&&new k(a.toJson()))},_shiftCM:function(b){var c=this.getCacheValue("_shifted");if(!c){var c=new B(this.toJson()),d=c.spatialReference;if(b=b||d._getInfo()){var f=this._getCM(b);if(f){var u=d._isWebMercator()?a.webMercatorToGeographic(f):f;c.xmin-=f.x;c.xmax-=f.x;d._isWebMercator()||(u.x=
this._normalizeX(u.x,b).x);c.setSpatialReference(new k(m.substitute({Central_Meridian:u.x},4326===d.wkid?b.altTemplate:b.wkTemplate)))}}this.setCacheValue("_shifted",c)}return c},_getCM:function(a){var b;this._isOutOfBounds(a)&&(b=this.getCenter());return b},_isOutOfBounds:function(a){var b=a.valid[0];a=a.valid[1];var c=this.xmin,d=this.xmax;return!(c>=b&&c<=a&&d>=b&&d<=a)},_normalize:function(a,b,c){var d=new B(this.toJson()),f=d.spatialReference;if(f&&(c=c||f._getInfo())){var u=t.map(this._getParts(c),
function(a){return a.extent});return 2<u.length?a?this._shiftCM(c):d.update(c.valid[0],d.ymin,c.valid[1],d.ymax,f):2===u.length?a?this._shiftCM(c):b?u:{rings:t.map(u,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:f}:u[0]||d}return d},_getParts:function(a){var b=this.getCacheValue("_parts");if(!b){var b=[],c=this.xmin,d=this.xmax,f=this.ymin,u=this.ymax,g=this.spatialReference,k=this.getWidth(),m=c,r=d,s=0,q=0,t,Q;a=a||g._getInfo();
t=a.valid[0];Q=a.valid[1];q=this._normalizeX(c,a);c=q.x;s=q.frameId;q=this._normalizeX(d,a);d=q.x;q=q.frameId;a=c===d&&0<k;if(k>2*Q){k=new B(m<r?c:d,f,Q,u,g);c=new B(t,f,m<r?d:c,u,g);Q=new B(0,f,Q,u,g);f=new B(t,f,0,u,g);g=[];t=[];k.contains(Q)&&g.push(s);k.contains(f)&&t.push(s);c.contains(Q)&&g.push(q);c.contains(f)&&t.push(q);for(u=s+1;u<q;u++)g.push(u),t.push(u);b.push({extent:k,frameIds:[s]},{extent:c,frameIds:[q]},{extent:Q,frameIds:g},{extent:f,frameIds:t})}else c>d||a?b.push({extent:new B(c,
f,Q,u,g),frameIds:[s]},{extent:new B(t,f,d,u,g),frameIds:[q]}):b.push({extent:new B(c,f,d,u,g),frameIds:[s]});this.setCacheValue("_parts",b)}return b},_normalizeX:function(a,b){var c=0,d=b.valid[0],f=b.valid[1],u=2*f;a>f?(c=Math.ceil(Math.abs(a-f)/u),a-=c*u):a<d&&(c=Math.ceil(Math.abs(a-d)/u),a+=c*u,c=-c);return{x:a,frameId:c}},toJson:function(){var a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});B.defaultProps=
u;s("extend-esri")&&(b.setObject("geometry.Extent",B,r),r.geometry.defaultExtent=u);return B})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(q,t,b,s,r,m){function k(a,b,d,f){if("point"===a.type){var g=b(a.x,a.y,f);return new a.constructor(g[0],g[1],new r(d))}if("extent"===a.type){var g=b(a.xmin,a.ymin,f),x=b(a.xmax,a.ymax,f);return new a.constructor(g[0],g[1],x[0],x[1],new r(d))}if("polyline"===
a.type||"polygon"===a.type){var g="polyline"===a.type,y=[],w;q.forEach(g?a.paths:a.rings,function(a){y.push(w=[]);q.forEach(a,function(a){w.push(b(a[0],a[1],f))})});return g?new a.constructor({paths:y,spatialReference:new r(d)}):new a.constructor({rings:y,spatialReference:new r(d)})}if("multipoint"===a.type){var k=[];q.forEach(a.points,function(a){k.push(b(a[0],a[1],f))});return new a.constructor({points:k,spatialReference:new r(d)})}}function g(a,b){var d=a&&(null!=a.wkid?a:a.spatialReference),f=
b&&(null!=b.wkid?b:b.spatialReference);return!d||!f?!1:f.equals(d)?!0:f._canProject(d)}var f={canProject:g,project:function(a,b){var d=a&&a.spatialReference,f=b&&(null!=b.wkid?b:b.spatialReference);d&&f?d.equals(f)?a=new a.constructor(a.toJson()):g(d,f)?f.isWebMercator()?a=k(a,m.lngLatToXY,{wkid:102100}):4326===f.wkid&&(a=k(a,m.xyToLngLat,{wkid:4326})):a=null:a=null;return a},lngLatToXY:m.lngLatToXY,xyToLngLat:m.xyToLngLat,geographicToWebMercator:function(a){return k(a,m.lngLatToXY,{wkid:102100})},
webMercatorToGeographic:function(a,b){return k(a,m.xyToLngLat,{wkid:4326},b)}};b("extend-esri")&&t.mixin(t.getObject("geometry",!0,s),f);return f})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(q,t,b,s){function r(b,a,c){return b instanceof s?new s(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y)):[b[0]+c*(a[0]-b[0]),b[1]+c*(a[1]-b[1])]}function m(b,a){return 1E-8>Math.abs(b-a)}function k(b,a,c,d){var u,g=m(b[0],a[0])?1E10:(b[1]-a[1])/(b[0]-a[0]),x=m(c[0],
d[0])?1E10:(c[1]-d[1])/(c[0]-d[0]),y=b[1]-g*b[0],w=c[1]-x*c[0];if(m(g,x)){if(m(y,w)){if(m(b[0],a[0]))if(Math.min(b[1],a[1])<Math.max(c[1],d[1])||Math.max(b[1],a[1])>Math.min(c[1],d[1]))b=(b[1]+a[1]+c[1]+d[1]-Math.min(b[1],a[1],c[1],d[1])-Math.max(b[1],a[1],c[1],d[1]))/2,u=(b-y)/g;else return null;else if(Math.min(b[0],a[0])<Math.max(c[0],d[0])||Math.max(b[0],a[0])>Math.min(c[0],d[0]))u=(b[0]+a[0]+c[0]+d[0]-Math.min(b[0],a[0],c[0],d[0])-Math.max(b[0],a[0],c[0],d[0]))/2,b=g*u+y;else return null;return[u,
b]}return null}m(g,1E10)?(u=b[0],b=x*u+w):m(x,1E10)?(u=c[0],b=g*u+y):(u=-(y-w)/(g-x),b=b[1]===a[1]?b[1]:c[1]===d[1]?c[1]:g*u+y);return[u,b]}var g={getLength:function(b,a){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)},_getLength:function(b,a){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)},getPointOnLine:r,getMidpoint:function(b,a){return r(b,a,0.5)},_equals:m,_getLineIntersection:k,getLineIntersection:function(b,a,c,d,u){(b=k([b.x,b.y],[a.x,a.y],[c.x,c.y],[d.x,d.y]))&&(b=new s(b[0],b[1],
u));return b},_getLineIntersection2:function(b,a){var c=b[0],d=b[1],u=a[0],g=a[1],x=c[0],c=c[1],y=d[0],d=d[1],w=u[0],k=u[1],u=g[0]-w,w=x-w,D=y-x,g=g[1]-k,k=c-k,A=d-c,m=g*D-u*A;if(0===m)return!1;u=(u*k-g*w)/m;w=(D*k-A*w)/m;return 0<=u&&1>=u&&0<=w&&1>=w?[x+u*(y-x),c+u*(d-c)]:!1},_pointLineDistance:function(b,a){var c=a[0],d=a[1],u=c[0],g=c[1],c=b[0],x=b[1],y=d[0]-u,w=d[1]-g,k=c-u,D=x-g,d=Math.sqrt,A=Math.pow,m=d(A(y,2)+A(w,2)),k=(k*y+D*w)/(m*m),g=g+k*w;return d(A(c-(u+k*y),2)+A(x-g,2))}};t("extend-esri")&&
q.mixin(q.getObject("geometry",!0,b),g);return g})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d){var u={type:"polygon",rings:null},B=q(g,{declaredClass:"esri.geometry.Polygon",constructor:function(a){b.mixin(this,u);this.rings=[];this._ring=0;a&&(b.isArray(a)?this.rings=b.isArray(a[0][0])?a:[a]:a.rings?b.mixin(this,
a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(a){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];b.isArray(a[0])?t.forEach(a,this._addPointArr,this):t.forEach(a,this._addPoint,this);return this},_addPointArr:function(a){this.rings[this._ring].push(a)},_addPoint:function(a){this.rings[this._ring].push([a.x,a.y])},_insertPoints:function(a,b){this.clearCache();this._ring=
b;this.rings[this._ring]||(this.rings[this._ring]=[]);t.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new f(this.rings[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.rings[a][b]=[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&
m.isDefined(b)&&0<=b&&b<=this.rings[a].length)return this.clearCache(),this.rings[a].splice(b,0,[c.x,c.y]),this},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,c=a.length,d=this.spatialReference;for(b=0;b<c;b++)a[b]=new f(a[b],d);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new f(this.rings[a].splice(b,1)[0],this.spatialReference)},getExtent:function(){var b;b=this.getCacheValue("_extent");var c=
this.getCacheValue("_partwise");if(b)return b=new a(b),b._partwise=c,b;b=this.rings;var d=b.length;if(d&&b[0].length){var f,u,g,k,m,r,B,s,q=k=b[0][0][0],t=m=b[0][0][1],Q=Math.min,R=Math.max,X=this.spatialReference,c=[],V,O,U,v;for(r=0;r<d;r++){f=b[r];V=O=f[0]&&f[0][0];U=v=f[0]&&f[0][1];s=f.length;for(B=0;B<s;B++)u=f[B],g=u[0],u=u[1],q=Q(q,g),t=Q(t,u),k=R(k,g),m=R(m,u),V=Q(V,g),U=Q(U,u),O=R(O,g),v=R(v,u);c.push(new a({xmin:V,ymin:U,xmax:O,ymax:v,spatialReference:X?X.toJson():null}))}b={xmin:q,ymin:t,
xmax:k,ymax:m,spatialReference:X?X.toJson():null};c=1<c.length?c:null;this.setCacheValue("_extent",b);this.setCacheValue("_partwise",c);b=new a(b);b._partwise=c;return b}},contains:function(a){var b=this.rings,c,d=!1,u,g,k,m,r,B,s=b.length;c=this.spatialReference;u=a.spatialReference;var q=a.x;a=a.y;c&&(u&&!c.equals(u)&&c._canProject(u))&&(a=c.isWebMercator()?f.lngLatToXY(q,a):f.xyToLngLat(q,a,!0),q=a[0],a=a[1]);for(B=0;B<s;B++){c=b[B];k=c.length;for(r=m=0;r<k;r++)if(m++,m===k&&(m=0),u=c[r],g=c[m],
(u[1]<a&&g[1]>=a||g[1]<a&&u[1]>=a)&&u[0]+(a-u[1])/(g[1]-u[1])*(g[0]-u[0])<q)d=!d}return d},getCentroid:function(){var a=this.getCacheValue("_centroid");if(void 0!==a)return a;var a=this.rings,b,c,d,u,g=[],k,m,r=Infinity,B=-Infinity,s=Infinity,q=-Infinity;t.forEach(a,function(a){b=c=d=0;t.forEach(a,function(f,u){u<a.length-1&&(k=a[u+1],m=f[0]*k[1]-k[0]*f[1],b+=(f[0]+k[0])*m,c+=(f[1]+k[1])*m,d+=m,f[0]<r&&(r=f[0]),f[0]>B&&(B=f[0]),f[1]<s&&(s=f[1]),f[1]>q&&(q=f[1]))});0<d&&(d*=-1);d&&g.push([b,c,d/2])});
g.sort(function(a,b){return a[2]-b[2]});b=c=void 0;if(g[0]&&(u=6*g[0][2],b=g[0][0]/u,c=g[0][1]/u,b<r||b>B||c<s||c>q))b=c=void 0;if(void 0===b||void 0===c)if(a=a[0]&&a[0].length?this._getLineCentroid(a[0]):null)b=a.x,c=a.y;a=isNaN(b)||isNaN(c)?null:new f(b,c,this.spatialReference);this.setCacheValue("_centroid",a);return a},_getLineCentroid:function(a){var b,d=0,f=0,u=0,g,k,m={x:0,y:0},r={x:0,y:0},B,s=a.length,q;for(B=0;B<s-1;B++)g=a[B],k=a[B+1],g&&k&&(m.x=g[0],m.y=g[1],r.x=k[0],r.y=k[1],b=c.getLength(m,
r),0<b&&(d+=b,g=c.getMidpoint(g,k),f+=b*g[0],u+=b*g[1]));0<d?q={x:f/d,y:u/d}:a[0]&&(q={x:a[0][0],y:a[0][1]});return q},isClockwise:function(a){var c=0,d,f=a.length,u=b.isArray(a[0])?function(a,b){return a[0]*b[1]-b[0]*a[1]}:function(a,b){return a.x*b.y-b.x*a.y};for(d=0;d<f;d++)c+=u(a[d],a[(d+1)%f]);return 0>=c/2},isSelfIntersecting:function(a){a=a||this;var b,d,f,u,g,k,m,r=a.rings.length,B;for(f=0;f<r;f++){for(b=0;b<a.rings[f].length-1;b++){g=[[a.rings[f][b][0],a.rings[f][b][1]],[a.rings[f][b+1][0],
a.rings[f][b+1][1]]];for(d=f+1;d<r;d++)for(u=0;u<a.rings[d].length-1;u++)if(k=[[a.rings[d][u][0],a.rings[d][u][1]],[a.rings[d][u+1][0],a.rings[d][u+1][1]]],(m=c._getLineIntersection2(g,k))&&!(m[0]===g[0][0]&&m[1]===g[0][1]||m[0]===k[0][0]&&m[1]===k[0][1]||m[0]===g[1][0]&&m[1]===g[1][1]||m[0]===k[1][0]&&m[1]===k[1][1]))return!0}u=a.rings[f].length;if(!(4>=u))for(b=0;b<u-3;b++){B=u-1;0===b&&(B=u-2);g=[[a.rings[f][b][0],a.rings[f][b][1]],[a.rings[f][b+1][0],a.rings[f][b+1][1]]];for(d=b+2;d<B;d++)if(k=
[[a.rings[f][d][0],a.rings[f][d][1]],[a.rings[f][d+1][0],a.rings[f][d+1][1]]],(m=c._getLineIntersection2(g,k))&&!(m[0]===g[0][0]&&m[1]===g[0][1]||m[0]===k[0][0]&&m[1]===k[0][1]||m[0]===g[1][0]&&m[1]===g[1][1]||m[0]===k[1][0]&&m[1]===k[1][1]))return!0}}return!1},toJson:function(){var a={rings:b.clone(this.rings)},c=this.spatialReference;c&&(a.spatialReference=c.toJson());return a}});B.defaultProps=u;B.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.longAxis,f=a.shortAxis,u=a.numberOfPoints,
g=a.map,k,m,r;a=[];var s=2*Math.PI/u;for(m=0;m<u;m++)k=Math.cos(m*s),r=Math.sin(m*s),k=g.toMap({x:d*k+b,y:f*r+c}),a.push(k);a.push(a[0]);b=new B(g.spatialReference);b.addRing(a);return b};B.createCircle=function(a){return B.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})};B.fromExtent=function(a){var b=a.normalize();a=a.spatialReference;return new B({rings:t.map(b,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],
[a.xmin,a.ymin]]}),spatialReference:a?a.toJson():null})};s("extend-esri")&&(b.setObject("geometry.Polygon",B,r),r.geometry.defaultPolygon=u,r.geometry.createEllipse=B.createEllipse,r.geometry.createCircle=B.createCircle,r.geometry.isClockwise=B.prototype.isClockwise,r.geometry.polygonSelfIntersecting=B.prototype.isSelfIntersecting);return B})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(q,t,b,s,r,m,k,g,f){var a={type:"multipoint",points:null};q=q(m,{declaredClass:"esri.geometry.Multipoint",constructor:function(b){t.mixin(this,a);this.points=[];b&&(b.points?t.mixin(this,b):this.spatialReference=b,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(a){this.clearCache();t.isArray(a)?this.points.push(a):this.points.push([a.x,a.y]);return this},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),
new k(this.points.splice(a,1)[0],this.spatialReference)},getExtent:function(){var a=this.getCacheValue("_extent");if(a)return new g(a);var a=this.points,b=a.length;if(b){var f=a[0],k,x,y=k=f[0],w=x=f[1],m=Math.min,D=Math.max,A=this.spatialReference,r,s;for(s=0;s<b;s++)f=a[s],r=f[0],f=f[1],y=m(y,r),w=m(w,f),k=D(k,r),x=D(x,f);a={xmin:y,ymin:w,xmax:k,ymax:x,spatialReference:A?A.toJson():null};this.setCacheValue("_extent",a);return new g(a)}},_validateInputs:function(a){return null===a||0>a||a>=this.points.length?
!1:!0},getPoint:function(a){if(this._validateInputs(a))return a=this.points[a],new k(a[0],a[1],this.spatialReference)},setPoint:function(a,b){if(this._validateInputs(a))return this.clearCache(),this.points[a]=[b.x,b.y],this},toJson:function(){var a={points:t.clone(this.points)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});q.defaultProps=a;b("extend-esri")&&(t.setObject("geometry.Multipoint",q,s),s.geometry.defaultMultipoint=a);return q})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),
function(q,t,b,s,r,m,k,g,f,a){var c={fromJson:function(b){var c=null;switch(b.type){case "esriSMS":c=new s(b);break;case "esriPMS":c=new r(b);break;case "esriTS":c=new a(b);break;case "esriSLS":c=void 0!==b.cap?new k(b):new m(b);break;case "esriCLS":c=new k(b);break;case "esriSFS":c=new g(b);break;case "esriPFS":c=new f(b)}return c},getShapeDescriptors:function(a){return a&&a.getShapeDescriptors?a.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};t("extend-esri")&&q.mixin(q.getObject("symbol",
!0,b),c);return c})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(q,t,b,s,r,m,k,g){var f={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};q=q(g,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(a,c,d){a?t.isString(a)?(this.url=a,c&&(this.width=c),d&&(this.height=d)):(this.width=s.pt2px(a.width),this.height=s.pt2px(a.height),
c=a.imageData,!(9>b("ie"))&&c&&(d=this.url,this.url="data:"+(a.contentType||"image")+";base64,"+c,this.imageData=d)):(t.mixin(this,f),this.width=s.pt2px(this.width),this.height=s.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",
x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:"))var d=a,a=b,b=d.indexOf(";base64,")+8,b=d.substr(b);if(t.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=k.getAbsoluteUrl(a);var d=s.px2pt(this.width),d=isNaN(d)?void 0:d,f=s.px2pt(this.height),f=isNaN(f)?void 0:f,a=m.fixJson(t.mixin(this.inherited("toJson",
arguments),{type:"esriPMS",url:a,imageData:b,contentType:this.contentType,width:d,height:f}));delete a.color;delete a.size;a.imageData||delete a.imageData;return a}});q.defaultProps=f;b("extend-esri")&&(t.setObject("symbol.PictureMarkerSymbol",q,r),r.symbol.defaultPictureMarkerSymbol=f);return q})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/io-query ./kernel ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(q,t,b,s,r,m,k,g){var f=function(){return this}(),
a={},c=m.defaults.io,d=/^[a-z][a-z0-9\+\-\.]*:/i;a.isHTTP=function(a){var b=f.location.protocol;return null==a?"http:"===b||"https:"===b:a?"https:"===b:"http:"===b};a.getProtocolForWebResource=function(b){return a.isHTTP()?f.location.protocol:b?"https:":"http:"};a.urlToObject=function(a){var c={},d=new b(a),f=a.indexOf("?");null===d.query?c={path:a,query:null}:(c.path=a.substring(0,f),c.query=s.queryToObject(d.query));d.fragment&&(c.hash=d.fragment,null===d.query&&(c.path=c.path.substring(0,c.path.length-
(d.fragment.length+1))));return c};a.getProxyUrl=function(b,d){var k=q.isString(b)?0===q.trim(b).toLowerCase().indexOf("https:"):b,y=c.proxyUrl,w,m,D=g.io.proxyNotSet;if(q.isString(b)&&(m=a.getProxyRule(b)))y=m.proxyUrl;if(!y)throw Error(D);k&&(!1!==d&&0!==f.location.href.toLowerCase().indexOf("https:"))&&(k=y,0!==k.toLowerCase().indexOf("http")&&(k=a.getAbsoluteUrl(k)),k=k.replace(/^http:/i,"https:"),a.canUseXhr(k)&&(y=k,w=1));y=a.urlToObject(y);y._xo=w;return y};a.addProxy=function(b){var d=a.getProxyRule(b),
f;d?f=a.urlToObject(d.proxyUrl):c.alwaysUseProxy&&(f=a.getProxyUrl());f&&(d=a.urlToObject(b),b=f.path+"?"+d.path,(f=s.objectToQuery(q.mixin(f.query||{},d.query)))&&(b+="?"+f));return b};a.addProxyRule=function(b){var d=b.urlPrefix=a.urlToObject(b.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),f=c.proxyRules,g,w=f.length,k,m=w;for(g=0;g<w;g++)if(k=f[g].urlPrefix,0===d.indexOf(k)){if(d.length===k)return-1;m=g;break}else 0===k.indexOf(d)&&(m=g+1);f.splice(m,0,b);
return m};a.getProxyRule=function(b){var d=c.proxyRules,f=d.length,g=a.urlToObject(b).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),w;for(b=0;b<f;b++)if(0===g.indexOf(d[b].urlPrefix)){w=d[b];break}return w};a.hasSameOrigin=function(a,c,d){a=a.toLowerCase();c=c.toLowerCase();var g=f.location.href.toLowerCase();a=0===a.indexOf("http")?new b(a):g=new b(g);c=0===c.indexOf("http")?new b(c):q.isString(g)?new b(g):g;return(d||a.scheme===c.scheme)&&a.host===c.host&&a.port===c.port};
a.canUseXhr=function(b,d){var f=k("esri-phonegap")?!0:!1,g=a.hasSameOrigin,w=c.corsEnabledServers,m,D=-1;!f&&(k("esri-cors")&&w&&w.length)&&(f=t.some(w,function(a,c){var d=a&&"object"===typeof a?a.host:a;return d&&(m=0!==q.trim(d).toLowerCase().indexOf("http"),g(b,m?"http://"+d:d)||m&&g(b,"https://"+d))?(D=c,!0):!1}));return d?D:f};a.getAbsoluteUrl=function(b){var c=a.getProtocolForWebResource();return q.isString(b)&&!d.test(b)?0===b.indexOf("//")?c+b:0===b.indexOf("/")?c+"//"+f.location.host+b:r._appBaseUrl+
b:b};a.fixUrl=function(b){/^\/\//i.test(b)&&(b=a.getProtocolForWebResource()+b);return b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")};a.normalize=function(b){b=a._ensureProtocol(b);return b=a._ensureProperProtocolForAGOResource(b)};a._ensureProtocol=function(b){if(!b)return b;/^\/\//i.test(b)&&(b=a.getProtocolForWebResource(!0)+b);return b};a._ensureProperProtocolForAGOResource=function(b){return!a.isHTTP(!1)&&(/^http\:\/\/server\.arcgisonline\.com(?!:)/i.test(b)||/^http\:\/\/services\.arcgisonline\.com(?!:)/i.test(b)||
/^http\:\/\/.+\.arcgis\.com(?!:)/i.test(b))?b.replace(/http:/i,"https:"):b};k("extend-esri")&&(q.mixin(r,a),r._getProxyUrl=a.getProxyUrl,r._getProxiedUrl=a.addProxy,r._hasSameOrigin=a.hasSameOrigin,r._canDoXOXHR=a.canUseXhr,r._getAbsoluteUrl=a.getAbsoluteUrl,r.fixUrl=a.fixUrl);return a})},"dojo/_base/url":function(){define(["./kernel"],function(q){var t=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,b=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,s=function(){for(var r=
arguments,m=[r[0]],k=1;k<r.length;k++)if(r[k]){var g=new s(r[k]+""),m=new s(m[0]+"");if(""==g.path&&!g.scheme&&!g.authority&&!g.query)null!=g.fragment&&(m.fragment=g.fragment),g=m;else if(!g.scheme&&(g.scheme=m.scheme,!g.authority&&(g.authority=m.authority,"/"!=g.path.charAt(0)))){for(var m=(m.path.substring(0,m.path.lastIndexOf("/")+1)+g.path).split("/"),f=0;f<m.length;f++)"."==m[f]?f==m.length-1?m[f]="":(m.splice(f,1),f--):0<f&&(!(1==f&&""==m[0])&&".."==m[f]&&".."!=m[f-1])&&(f==m.length-1?(m.splice(f,
1),m[f-1]=""):(m.splice(f-1,2),f-=2));g.path=m.join("/")}m=[];g.scheme&&m.push(g.scheme,":");g.authority&&m.push("//",g.authority);m.push(g.path);g.query&&m.push("?",g.query);g.fragment&&m.push("#",g.fragment)}this.uri=m.join("");r=this.uri.match(t);this.scheme=r[2]||(r[1]?"":null);this.authority=r[4]||(r[3]?"":null);this.path=r[5];this.query=r[7]||(r[6]?"":null);this.fragment=r[9]||(r[8]?"":null);null!=this.authority&&(r=this.authority.match(b),this.user=r[3]||null,this.password=r[4]||null,this.host=
r[6]||r[7],this.port=r[9]||null)};s.prototype.toString=function(){return this.uri};return q._Url=s})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(q,t,b,s){var r=function(){return this}(),m={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},
sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:r.Worker&&!1,io:{errorHandler:function(b,g){t.publish("esri.Error",[b])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com basemaps.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com basemapsdev.arcgis.com".split(" "),
corsDetection:r.cordova?!1:!0,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5}}};b("extend-esri")&&(s.config=m);q.noGlobals||(r.esriConfig=m);return m})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(q,t,b,s,r,m,k,g){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",
STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},a={color:[0,0,0,1],style:f.STYLE_SOLID,width:1,cap:f.CAP_BUTT,join:f.JOIN_MITER,miterLimit:10};q=q(g,{declaredClass:"esri.symbol.CartographicLineSymbol",
type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(c,d,f,g,x,y){c?t.isString(c)?(this.style=c,d&&(this.color=d),void 0!==f&&(this.width=f),g&&(this.cap=g),x&&(this.join=x),void 0!==y&&(this.miterLimit=y)):(this.cap=k.valueOf(this._caps,c.cap),this.join=k.valueOf(this._joins,c.join),this.width=r.pt2px(c.width),this.miterLimit=r.pt2px(c.miterLimit)):(t.mixin(this,
a),this.color=new b(this.color),this.width=r.pt2px(this.width),this.miterLimit=r.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return t.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===f.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},
fill:null,stroke:this.getStroke()}},toJson:function(){var a=r.px2pt(this.miterLimit),a=isNaN(a)?void 0:a;return k.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});t.mixin(q,f);q.defaultProps=a;s("extend-esri")&&(t.setObject("symbol.CartographicLineSymbol",q,m),m.symbol.defaultCartographicLineSymbol=a);return q})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),
function(q,t,b,s,r,m,k,g){var f={xoffset:0,yoffset:0,width:12,height:12};q=q(g,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(a,c,d,u){a?t.isString(a)?(this.url=a,void 0!==c&&(this.outline=c),void 0!==d&&(this.width=d),void 0!==u&&(this.height=u)):(this.xoffset=s.pt2px(a.xoffset),this.yoffset=s.pt2px(a.yoffset),this.width=s.pt2px(a.width),this.height=s.pt2px(a.height),c=a.imageData,!(9>b("ie"))&&c&&(d=this.url,this.url=
"data:"+(a.contentType||"image")+";base64,"+c,this.imageData=d)):(t.mixin(this,f),this.width=s.pt2px(this.width),this.height=s.pt2px(this.height))},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setXScale:function(a){this.xscale=a;return this},setYScale:function(a){this.yscale=a;
return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return t.mixin({},s.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:"))var d=a,a=b,b=d.indexOf(";base64,")+
8,b=d.substr(b);if(t.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=k.getAbsoluteUrl(a);var d=s.px2pt(this.width),d=isNaN(d)?void 0:d,f=s.px2pt(this.height),f=isNaN(f)?void 0:f,g=s.px2pt(this.xoffset),g=isNaN(g)?void 0:g,x=s.px2pt(this.yoffset),x=isNaN(x)?void 0:x,a=m.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:a,imageData:b,contentType:this.contentType,width:d,height:f,xoffset:g,yoffset:x,xscale:this.xscale,yscale:this.yscale}));
a.imageData||delete a.imageData;return a}});q.defaultProps=f;b("extend-esri")&&(t.setObject("symbol.PictureFillSymbol",q,r),r.symbol.defaultPictureFillSymbol=f);return q})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(q,t,b,s,r,m,k,g,f){var a={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:s.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},
c={start:"left",middle:"center",end:"right"},d={left:"start",center:"middle",right:"end",justify:"start"},u={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},B=document.createElement("canvas");q=q(g,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(b,c,d){t.mixin(this,a);this.font=new f(this.font);this.color=new k(this.color);b&&(t.isObject(b)?(t.mixin(this,b),this.color&&m.isDefined(this.color[0])&&(this.color=k.toDojoColor(this.color)),
this.type="textsymbol",this.font=new f(this.font),this.xoffset=s.pt2px(this.xoffset),this.yoffset=s.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=s.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=k.toDojoColor(this.haloColor))):(this.text=b,c&&(this.font=c),d&&(this.color=d)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(a){this.font=a;return this},setSize:function(a){this.font.size=a;return this},setAngle:function(a){this.angle=a;return this},
setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setHaloColor:function(a){this.haloColor=a;return this},setHaloSize:function(a){this.haloSize=a;return this},setAlign:function(a){this.align=a;this.setHorizontalAlignment(a&&c[a.toLowerCase()]||"center");return this},setHorizontalAlignment:function(a){this.horizontalAlignment=a;return this},getSVGAlign:function(){var a=this.horizontalAlignment;return a=a&&d[a.toLowerCase()]||"middle"},setVerticalAlignment:function(a){this.verticalAlignment=
a;return this},getSVGBaseline:function(){var a=this.verticalAlignment;return a&&u[a.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(a){this.decoration=a;this.font||this.setFont(new f);this.font.setDecoration(a);return this},setRotated:function(a){this.rotated=a;return this},setKerning:function(a){this.kerning=a;return this},setText:function(a){this.text=a;return this},getStroke:function(){return null},getFill:function(){return this.color},
getWidth:function(){var a=B&&B.getContext&&B.getContext("2d");if(a){var b=this.font;a.font=(b.style?b.style:s.defaultFont.style)+" "+(b.weight?b.weight:s.defaultFont.weight)+" "+(b.size?b.size:s.defaultFont.size)+"px "+(b.family?b.family:s.defaultFont.family);return a.measureText(this.text).width}var a=this.getHeight(),b=0,c,d;for(c=0;c<this.text.length;c++)d=this.text.charAt(c),b=d==d.toUpperCase()?b+0.7*a:b+0.5*a;return b},getHeight:function(){return s.normalizedLength(this.font.size)},getShapeDescriptors:function(){var a=
this.font,b;a&&(b={},a.size&&(b.size=a.size),a.style&&(b.style=a.style),a.variant&&(b.variant=a.variant),a.decoration&&(b.decoration=a.decoration),a.weight&&(b.weight=a.weight),a.family&&(b.family=a.family));return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||a&&a.decoration,rotated:this.rotated,kerning:this.kerning},font:b,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=s.px2pt(this.xoffset),b=s.px2pt(this.yoffset),
c=s.px2pt(this.haloSize),a=isNaN(a)?void 0:a,b=isNaN(b)?void 0:b,c=isNaN(c)?void 0:c;return m.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:c,haloColor:this.haloColor&&k.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:a,
yoffset:b,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});t.mixin(q,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});q.defaultProps=a;b("extend-esri")&&(t.setObject("symbol.TextSymbol",q,r),r.symbol.defaultTextSymbol=a);return q})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),
function(q,t,b,s,r,m){q=q(null,{declaredClass:"esri.symbol.Font",constructor:function(k,g,f,a,c){k?t.isObject(k)?t.mixin(this,k):(this.size=k,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==g&&(this.style=g),void 0!==f&&(this.variant=f),void 0!==a&&(this.weight=a),void 0!==c&&(this.family=c)):t.mixin(this,s.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>b("ie")&&(this.size&&t.isString(this.size)&&-1<this.size.indexOf("em"))&&(this.size=s.pt2px(12*parseFloat(this.size))+
"px");this.size=this._convert2PxSize(this.size)},setSize:function(b){this.size=this._convert2PxSize(b);return this},_convert2PxSize:function(b){var g;parseFloat(b)==b?g=b:t.isString(b)&&(-1<b.indexOf("pt")?g=s.pt2px(parseFloat(b)):-1<b.indexOf("px")?g=parseFloat(b):-1<b.indexOf("em")?g=s.pt2px(12*parseFloat(b)):-1<b.indexOf("%")&&(g=s.pt2px(0.12*parseFloat(b))));return g},setStyle:function(b){this.style=b;return this},setVariant:function(b){this.variant=b;return this},setWeight:function(b){this.weight=
b;return this},setFamily:function(b){this.family=b;return this},setDecoration:function(b){this.decoration=b;return this},toJson:function(){return m.fixJson({size:s.px2pt(this.size),style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})}});t.mixin(q,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});
b("extend-esri")&&t.setObject("symbol.Font",q,r);return q})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(q,t,b,s,r,m,k,g,f,a){function c(a){return new f(parseFloat(a.x),parseFloat(a.y)-parseFloat(a.height),parseFloat(a.x)+parseFloat(a.width),parseFloat(a.y),a.spatialReference)}var d=q(k,{declaredClass:"esri.geometry.Rect",constructor:function(b,c,d,f,w){t.mixin(this,
s.defaultRect);t.isObject(b)&&"extent"===b.type&&(c=b.ymax,d=b.getWidth(),f=b.getHeight(),w=b.spatialReference,b=b.xmin);t.isObject(b)?(t.mixin(this,b),this.spatialReference&&(this.spatialReference=a.createSpatialReference(this.spatialReference))):(this.x=b,this.y=c,this.width=d,this.height=f,this.spatialReference=w);this.verifySR()},getCenter:function(){return new g(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(a,b){return new d(this.x+a,this.y+b,this.width,this.height,
this.spatialReference)},intersects:function(a){return a.x+a.width<=this.x||a.y+a.height<=this.y||a.y>=this.y+this.height||a.x>=this.x+this.width?!1:!0},getExtent:function(){return c(this)},update:function(a,b,c,d,f){this.x=a;this.y=b;this.width=c;this.height=d;this.spatialReference=f;this.clearCache();return this}});b("extend-esri")&&(t.setObject("geometry.Rect",d,r),r.geometry._rectToExtent=c,r.geometry._extentToRect=function(a){return new d(a)});return d})},"esri/geometry/scaleUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../config ../lang ../WKIDUnitConversion".split(" "),
function(q,t,b,s,r,m){function k(b,d,u){return b&&d?b.getWidth()/d*(u||a)*f*c.screenDPI:0}function g(b,u,g,w,k){return b.expand(w*u/(((k?g:d.values[d[g]])||a)*f*c.screenDPI)/b.getWidth())}var f=39.37,a=6370997*Math.PI/180,c=s.defaults,d=m,u={getUnitValueForSR:function(b){return this.getUnitValue(b)||a},getUnitValue:function(a){var b,c,f;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?f=d.values[d[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(c))&&
a[1]&&(f=parseFloat(a[1].split(",")[1]));return f},getScale:function(a,b,c){var d,f,g;1<arguments.length&&r.isDefined(b)&&!b.declaredClass?(d=a,f=b,b=null,g=u.getUnitValue(c)):(d=b||a.extent,f=a.width,g=u.getUnitValue(d&&d.spatialReference));return k(d,f,g)},getExtentForScale:function(a,b,c){return g(c||a.extent,a.width,u.getUnitValue(a.spatialReference),b,!0)}};t("extend-esri")&&(q.mixin(q.getObject("geometry",!0,b),u),b.geometry._getScale=k,b.geometry._getExtentForScale=g);return u})},"esri/WKIDUnitConversion":function(){define(["dojo/has",
"./kernel"],function(q,t){var b,s={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,
2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,
3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,
3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,
4083:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,
5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,
6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,
6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,
6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,
6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6984:0,6991:0,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,
7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,
20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,
29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,
102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,
103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,
103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,
103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,
103569:2,103570:2,103584:0,103585:2,103695:2};for(b=2E3;2045>=b;b++)s[b]=0;for(b=2056;2065>=b;b++)s[b]=0;for(b=2067;2135>=b;b++)s[b]=0;for(b=2137;2154>=b;b++)s[b]=0;for(b=2161;2170>=b;b++)s[b]=0;for(b=2172;2193>=b;b++)s[b]=0;for(b=2195;2198>=b;b++)s[b]=0;for(b=2200;2203>=b;b++)s[b]=0;for(b=2205;2217>=b;b++)s[b]=0;for(b=2222;2224>=b;b++)s[b]=1;for(b=2225;2250>=b;b++)s[b]=2;for(b=2251;2253>=b;b++)s[b]=1;for(b=2257;2264>=b;b++)s[b]=2;for(b=2274;2279>=b;b++)s[b]=2;for(b=2280;2282>=b;b++)s[b]=1;for(b=
2283;2289>=b;b++)s[b]=2;for(b=2290;2292>=b;b++)s[b]=0;for(b=2308;2313>=b;b++)s[b]=0;for(b=2315;2491>=b;b++)s[b]=0;for(b=2494;2866>=b;b++)s[b]=0;for(b=2867;2869>=b;b++)s[b]=1;for(b=2870;2888>=b;b++)s[b]=2;for(b=2891;2895>=b;b++)s[b]=2;for(b=2896;2898>=b;b++)s[b]=1;for(b=2902;2908>=b;b++)s[b]=2;for(b=2915;2920>=b;b++)s[b]=2;for(b=2921;2923>=b;b++)s[b]=1;for(b=2924;2930>=b;b++)s[b]=2;for(b=2931;2962>=b;b++)s[b]=0;for(b=2964;2968>=b;b++)s[b]=2;for(b=2969;2973>=b;b++)s[b]=0;for(b=2975;2991>=b;b++)s[b]=
0;for(b=2995;3051>=b;b++)s[b]=0;for(b=3054;3079>=b;b++)s[b]=0;for(b=3081;3088>=b;b++)s[b]=0;for(b=3092;3101>=b;b++)s[b]=0;for(b=3106;3138>=b;b++)s[b]=0;for(b=3146;3151>=b;b++)s[b]=0;for(b=3153;3166>=b;b++)s[b]=0;for(b=3168;3172>=b;b++)s[b]=0;for(b=3174;3203>=b;b++)s[b]=0;for(b=3294;3358>=b;b++)s[b]=0;for(b=3367;3403>=b;b++)s[b]=0;for(b=3408;3416>=b;b++)s[b]=0;for(b=3417;3438>=b;b++)s[b]=2;for(b=3441;3446>=b;b++)s[b]=2;for(b=3447;3450>=b;b++)s[b]=0;for(b=3451;3459>=b;b++)s[b]=2;for(b=3460;3478>=b;b++)s[b]=
0;for(b=3554;3559>=b;b++)s[b]=0;for(b=3560;3570>=b;b++)s[b]=2;for(b=3571;3581>=b;b++)s[b]=0;for(b=3594;3597>=b;b++)s[b]=0;for(b=3601;3604>=b;b++)s[b]=0;for(b=3637;3639>=b;b++)s[b]=0;for(b=3665;3667>=b;b++)s[b]=0;for(b=3693;3695>=b;b++)s[b]=0;for(b=3701;3727>=b;b++)s[b]=0;for(b=3728;3739>=b;b++)s[b]=2;for(b=3740;3751>=b;b++)s[b]=0;for(b=3753;3760>=b;b++)s[b]=2;for(b=3761;3773>=b;b++)s[b]=0;for(b=3775;3777>=b;b++)s[b]=0;for(b=3779;3781>=b;b++)s[b]=0;for(b=3783;3785>=b;b++)s[b]=0;for(b=3788;3791>=b;b++)s[b]=
0;for(b=3797;3802>=b;b++)s[b]=0;for(b=3814;3816>=b;b++)s[b]=0;for(b=3825;3829>=b;b++)s[b]=0;for(b=3832;3841>=b;b++)s[b]=0;for(b=3844;3852>=b;b++)s[b]=0;for(b=3873;3885>=b;b++)s[b]=0;for(b=3890;3893>=b;b++)s[b]=0;for(b=3907;3912>=b;b++)s[b]=0;for(b=3942;3950>=b;b++)s[b]=0;for(b=3968;3970>=b;b++)s[b]=0;for(b=3973;3976>=b;b++)s[b]=0;for(b=3986;3989>=b;b++)s[b]=0;for(b=3994;3997>=b;b++)s[b]=0;for(b=4048;4051>=b;b++)s[b]=0;for(b=4056;4063>=b;b++)s[b]=0;for(b=4093;4096>=b;b++)s[b]=0;for(b=4390;4398>=b;b++)s[b]=
0;for(b=4399;4413>=b;b++)s[b]=2;for(b=4418;4433>=b;b++)s[b]=2;for(b=4455;4457>=b;b++)s[b]=2;for(b=4484;4489>=b;b++)s[b]=0;for(b=4491;4554>=b;b++)s[b]=0;for(b=4568;4589>=b;b++)s[b]=0;for(b=4652;4656>=b;b++)s[b]=0;for(b=4766;4800>=b;b++)s[b]=0;for(b=5014;5016>=b;b++)s[b]=0;for(b=5069;5072>=b;b++)s[b]=0;for(b=5105;5130>=b;b++)s[b]=0;for(b=5173;5188>=b;b++)s[b]=0;for(b=5253;5259>=b;b++)s[b]=0;for(b=5269;5275>=b;b++)s[b]=0;for(b=5292;5311>=b;b++)s[b]=0;for(b=5329;5331>=b;b++)s[b]=0;for(b=5343;5349>=b;b++)s[b]=
0;for(b=5355;5357>=b;b++)s[b]=0;for(b=5387;5389>=b;b++)s[b]=0;for(b=5459;5463>=b;b++)s[b]=0;for(b=5479;5482>=b;b++)s[b]=0;for(b=5518;5520>=b;b++)s[b]=0;for(b=5530;5539>=b;b++)s[b]=0;for(b=5550;5552>=b;b++)s[b]=0;for(b=5562;5583>=b;b++)s[b]=0;for(b=5623;5625>=b;b++)s[b]=2;for(b=5631;5639>=b;b++)s[b]=0;for(b=5649;5653>=b;b++)s[b]=0;for(b=5663;5680>=b;b++)s[b]=0;for(b=5682;5685>=b;b++)s[b]=0;for(b=5875;5877>=b;b++)s[b]=0;for(b=5921;5940>=b;b++)s[b]=0;for(b=6050;6125>=b;b++)s[b]=0;for(b=6244;6275>=b;b++)s[b]=
0;for(b=6328;6348>=b;b++)s[b]=0;for(b=6350;6356>=b;b++)s[b]=0;for(b=6366;6372>=b;b++)s[b]=0;for(b=6381;6387>=b;b++)s[b]=0;for(b=6393;6404>=b;b++)s[b]=0;for(b=6480;6483>=b;b++)s[b]=0;for(b=6511;6514>=b;b++)s[b]=0;for(b=6579;6581>=b;b++)s[b]=0;for(b=6619;6624>=b;b++)s[b]=0;for(b=6625;6627>=b;b++)s[b]=2;for(b=6628;6632>=b;b++)s[b]=0;for(b=6634;6637>=b;b++)s[b]=0;for(b=6669;6692>=b;b++)s[b]=0;for(b=6707;6709>=b;b++)s[b]=0;for(b=6720;6723>=b;b++)s[b]=0;for(b=6732;6738>=b;b++)s[b]=0;for(b=6931;6933>=b;b++)s[b]=
0;for(b=7374;7376>=b;b++)s[b]=0;for(b=7528;7586>=b;b++)s[b]=0;for(b=7587;7645>=b;b++)s[b]=2;for(b=20002;20032>=b;b++)s[b]=0;for(b=20062;20092>=b;b++)s[b]=0;for(b=20135;20138>=b;b++)s[b]=0;for(b=20248;20258>=b;b++)s[b]=0;for(b=20348;20358>=b;b++)s[b]=0;for(b=20436;20440>=b;b++)s[b]=0;for(b=20822;20824>=b;b++)s[b]=0;for(b=20934;20936>=b;b++)s[b]=0;for(b=21035;21037>=b;b++)s[b]=0;for(b=21095;21097>=b;b++)s[b]=0;for(b=21148;21150>=b;b++)s[b]=0;for(b=21413;21423>=b;b++)s[b]=0;for(b=21473;21483>=b;b++)s[b]=
0;for(b=21780;21782>=b;b++)s[b]=0;for(b=21891;21894>=b;b++)s[b]=0;for(b=21896;21899>=b;b++)s[b]=0;for(b=22171;22177>=b;b++)s[b]=0;for(b=22181;22187>=b;b++)s[b]=0;for(b=22191;22197>=b;b++)s[b]=0;for(b=22234;22236>=b;b++)s[b]=0;for(b=22521;22525>=b;b++)s[b]=0;for(b=22991;22994>=b;b++)s[b]=0;for(b=23028;23038>=b;b++)s[b]=0;for(b=23830;23853>=b;b++)s[b]=0;for(b=23866;23872>=b;b++)s[b]=0;for(b=23877;23884>=b;b++)s[b]=0;for(b=23886;23894>=b;b++)s[b]=0;for(b=23946;23948>=b;b++)s[b]=0;for(b=24311;24313>=
b;b++)s[b]=0;for(b=24342;24347>=b;b++)s[b]=0;for(b=24370;24374>=b;b++)s[b]=10;for(b=24375;24381>=b;b++)s[b]=0;for(b=24718;24721>=b;b++)s[b]=0;for(b=24817;24821>=b;b++)s[b]=0;for(b=24877;24882>=b;b++)s[b]=0;for(b=24891;24893>=b;b++)s[b]=0;for(b=25391;25395>=b;b++)s[b]=0;for(b=25828;25838>=b;b++)s[b]=0;for(b=26191;26195>=b;b++)s[b]=0;for(b=26391;26393>=b;b++)s[b]=0;for(b=26701;26722>=b;b++)s[b]=0;for(b=26729;26799>=b;b++)s[b]=2;for(b=26801;26803>=b;b++)s[b]=2;for(b=26811;26813>=b;b++)s[b]=2;for(b=26847;26870>=
b;b++)s[b]=2;for(b=26891;26899>=b;b++)s[b]=0;for(b=26901;26923>=b;b++)s[b]=0;for(b=26929;26946>=b;b++)s[b]=0;for(b=26948;26998>=b;b++)s[b]=0;for(b=27037;27040>=b;b++)s[b]=0;for(b=27205;27232>=b;b++)s[b]=0;for(b=27258;27260>=b;b++)s[b]=0;for(b=27391;27398>=b;b++)s[b]=0;for(b=27561;27564>=b;b++)s[b]=0;for(b=27571;27574>=b;b++)s[b]=0;for(b=27581;27584>=b;b++)s[b]=0;for(b=27591;27594>=b;b++)s[b]=0;for(b=28191;28193>=b;b++)s[b]=0;for(b=28348;28358>=b;b++)s[b]=0;for(b=28402;28432>=b;b++)s[b]=0;for(b=28462;28492>=
b;b++)s[b]=0;for(b=29118;29122>=b;b++)s[b]=0;for(b=29168;29172>=b;b++)s[b]=0;for(b=29177;29185>=b;b++)s[b]=0;for(b=29187;29195>=b;b++)s[b]=0;for(b=29900;29903>=b;b++)s[b]=0;for(b=30161;30179>=b;b++)s[b]=0;for(b=30491;30494>=b;b++)s[b]=0;for(b=30729;30732>=b;b++)s[b]=0;for(b=31251;31259>=b;b++)s[b]=0;for(b=31265;31268>=b;b++)s[b]=0;for(b=31275;31279>=b;b++)s[b]=0;for(b=31281;31297>=b;b++)s[b]=0;for(b=31461;31469>=b;b++)s[b]=0;for(b=31491;31495>=b;b++)s[b]=0;for(b=31917;31922>=b;b++)s[b]=0;for(b=31965;32E3>=
b;b++)s[b]=0;for(b=32001;32003>=b;b++)s[b]=2;for(b=32005;32031>=b;b++)s[b]=2;for(b=32033;32060>=b;b++)s[b]=2;for(b=32064;32067>=b;b++)s[b]=2;for(b=32074;32077>=b;b++)s[b]=2;for(b=32081;32086>=b;b++)s[b]=0;for(b=32107;32130>=b;b++)s[b]=0;for(b=32133;32158>=b;b++)s[b]=0;for(b=32164;32167>=b;b++)s[b]=2;for(b=32180;32199>=b;b++)s[b]=0;for(b=32201;32260>=b;b++)s[b]=0;for(b=32301;32360>=b;b++)s[b]=0;for(b=32601;32662>=b;b++)s[b]=0;for(b=32664;32667>=b;b++)s[b]=2;for(b=32701;32761>=b;b++)s[b]=0;for(b=53001;53004>=
b;b++)s[b]=0;for(b=53008;53019>=b;b++)s[b]=0;for(b=53021;53032>=b;b++)s[b]=0;for(b=53042;53046>=b;b++)s[b]=0;for(b=53074;53080>=b;b++)s[b]=0;for(b=54001;54004>=b;b++)s[b]=0;for(b=54008;54019>=b;b++)s[b]=0;for(b=54021;54032>=b;b++)s[b]=0;for(b=54042;54046>=b;b++)s[b]=0;for(b=54048;54053>=b;b++)s[b]=0;for(b=54074;54080>=b;b++)s[b]=0;for(b=102001;102040>=b;b++)s[b]=0;for(b=102042;102063>=b;b++)s[b]=0;for(b=102065;102067>=b;b++)s[b]=0;for(b=102070;102117>=b;b++)s[b]=0;for(b=102122;102216>=b;b++)s[b]=
0;for(b=102221;102377>=b;b++)s[b]=0;for(b=102382;102388>=b;b++)s[b]=0;for(b=102389;102398>=b;b++)s[b]=2;for(b=102400;102444>=b;b++)s[b]=0;for(b=102445;102447>=b;b++)s[b]=2;for(b=102448;102458>=b;b++)s[b]=0;for(b=102459;102468>=b;b++)s[b]=2;for(b=102469;102496>=b;b++)s[b]=0;for(b=102500;102519>=b;b++)s[b]=1;for(b=102520;102524>=b;b++)s[b]=0;for(b=102525;102529>=b;b++)s[b]=2;for(b=102530;102561>=b;b++)s[b]=0;for(b=102570;102588>=b;b++)s[b]=0;for(b=102590;102598>=b;b++)s[b]=0;for(b=102601;102603>=b;b++)s[b]=
0;for(b=102605;102628>=b;b++)s[b]=0;for(b=102629;102646>=b;b++)s[b]=2;for(b=102648;102700>=b;b++)s[b]=2;for(b=102701;102703>=b;b++)s[b]=0;for(b=102707;102730>=b;b++)s[b]=2;for(b=102733;102758>=b;b++)s[b]=2;for(b=102767;102798>=b;b++)s[b]=0;for(b=102965;102969>=b;b++)s[b]=0;for(b=102971;102973>=b;b++)s[b]=0;for(b=102975;102989>=b;b++)s[b]=0;for(b=102990;102992>=b;b++)s[b]=1;for(b=102997;103002>=b;b++)s[b]=0;for(b=103003;103008>=b;b++)s[b]=2;for(b=103009;103011>=b;b++)s[b]=0;for(b=103012;103014>=b;b++)s[b]=
2;for(b=103019;103021>=b;b++)s[b]=0;for(b=103022;103024>=b;b++)s[b]=2;for(b=103029;103031>=b;b++)s[b]=0;for(b=103032;103034>=b;b++)s[b]=2;for(b=103065;103068>=b;b++)s[b]=0;for(b=103074;103076>=b;b++)s[b]=0;for(b=103077;103079>=b;b++)s[b]=1;for(b=103080;103082>=b;b++)s[b]=0;for(b=103083;103085>=b;b++)s[b]=2;for(b=103090;103093>=b;b++)s[b]=0;for(b=103097;103099>=b;b++)s[b]=0;for(b=103100;103102>=b;b++)s[b]=2;for(b=103107;103109>=b;b++)s[b]=0;for(b=103110;103112>=b;b++)s[b]=2;for(b=103113;103116>=b;b++)s[b]=
0;for(b=103117;103120>=b;b++)s[b]=2;for(b=103153;103157>=b;b++)s[b]=0;for(b=103158;103162>=b;b++)s[b]=2;for(b=103163;103165>=b;b++)s[b]=0;for(b=103166;103168>=b;b++)s[b]=1;for(b=103169;103171>=b;b++)s[b]=2;for(b=103186;103188>=b;b++)s[b]=0;for(b=103189;103191>=b;b++)s[b]=2;for(b=103192;103195>=b;b++)s[b]=0;for(b=103196;103199>=b;b++)s[b]=2;for(b=103200;103224>=b;b++)s[b]=0;for(b=103225;103227>=b;b++)s[b]=1;for(b=103232;103237>=b;b++)s[b]=0;for(b=103238;103243>=b;b++)s[b]=2;for(b=103244;103246>=b;b++)s[b]=
0;for(b=103247;103249>=b;b++)s[b]=2;for(b=103254;103256>=b;b++)s[b]=0;for(b=103257;103259>=b;b++)s[b]=2;for(b=103264;103266>=b;b++)s[b]=0;for(b=103267;103269>=b;b++)s[b]=2;for(b=103300;103375>=b;b++)s[b]=0;for(b=103381;103383>=b;b++)s[b]=0;for(b=103384;103386>=b;b++)s[b]=1;for(b=103387;103389>=b;b++)s[b]=0;for(b=103390;103392>=b;b++)s[b]=2;for(b=103397;103399>=b;b++)s[b]=0;for(b=103400;103471>=b;b++)s[b]=2;for(b=103476;103478>=b;b++)s[b]=0;for(b=103479;103481>=b;b++)s[b]=2;for(b=103486;103488>=b;b++)s[b]=
0;for(b=103489;103491>=b;b++)s[b]=2;for(b=103492;103495>=b;b++)s[b]=0;for(b=103496;103499>=b;b++)s[b]=2;for(b=103528;103543>=b;b++)s[b]=0;for(b=103544;103548>=b;b++)s[b]=2;for(b=103549;103551>=b;b++)s[b]=0;for(b=103552;103554>=b;b++)s[b]=1;for(b=103555;103557>=b;b++)s[b]=2;for(b=103558;103560>=b;b++)s[b]=0;for(b=103571;103573>=b;b++)s[b]=0;for(b=103574;103576>=b;b++)s[b]=2;for(b=103577;103580>=b;b++)s[b]=0;for(b=103581;103583>=b;b++)s[b]=2;for(b=103600;103694>=b;b++)s[b]=0;for(b=103700;103793>=b;b++)s[b]=
2;for(b=103794;103871>=b;b++)s[b]=0;for(b=103900;103971>=b;b++)s[b]=2;q("extend-esri")&&(t.WKIDUnitConversion=s);return s})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(q,t,b,s,r){var m={graphicsExtent:function(b){if(!b||!b.length)return null;var g=b[0].geometry,f=g.getExtent(),a,c,d=b.length;null===f&&(f=new r(g.x,g.y,g.x,g.y,g.spatialReference));for(c=1;c<d;c++)a=(g=b[c].geometry).getExtent(),null===a&&(a=new r(g.x,
g.y,g.x,g.y,g.spatialReference)),f=f.union(a);return 0>f.getWidth()&&0>f.getHeight()?null:f},getGeometries:function(b){return t.map(b,function(b){return b.geometry})},_encodeGraphics:function(b,g){var f=[],a,c,d;t.forEach(b,function(b,k){a=b.toJson();c={};a.geometry&&(d=g&&g[k],c.geometry=d&&d.toJson()||a.geometry);a.attributes&&(c.attributes=a.attributes);f[k]=c});return f}};b("extend-esri")&&q.mixin(s,m);return m})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],
function(q,t,b,s){q={streets:{title:s.basemaps.streets,thumbnailUrl:q.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:s.basemaps.satellite,thumbnailUrl:q.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:s.basemaps.hybrid,
thumbnailUrl:q.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:s.basemaps.terrain,thumbnailUrl:q.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},
{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:s.basemaps.topo,thumbnailUrl:q.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:s.basemaps.gray,thumbnailUrl:q.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},
{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:s.basemaps["dark-gray"],thumbnailUrl:q.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:s.basemaps.oceans,
thumbnailUrl:q.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:s.basemaps["national-geographic"],thumbnailUrl:q.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},
osm:{title:s.basemaps.osm,thumbnailUrl:q.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:s.basemaps["dark-gray"],thumbnailUrl:q.toUrl("./images/basemap/dark-gray.jpg"),itemId:"850db44b9eb845d3bd42b19e8aa7a024",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/850db44b9eb845d3bd42b19e8aa7a024/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:s.basemaps.gray,thumbnailUrl:q.toUrl("./images/basemap/gray.jpg"),
itemId:"0e02e6f86d02455091796eaae811d9b5",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/0e02e6f86d02455091796eaae811d9b5/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:s.basemaps.streets,thumbnailUrl:q.toUrl("./images/basemap/streets.jpg"),itemId:"4e1133c28ac04cca97693cf336cd49ad",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/4e1133c28ac04cca97693cf336cd49ad/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:s.basemaps.topo,
thumbnailUrl:q.toUrl("./images/basemap/topo.jpg"),itemId:"6f65bc1351b7411588a8cb43fe23dad7",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/6f65bc1351b7411588a8cb43fe23dad7/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:s.basemaps["streets-night-vector"],thumbnailUrl:q.toUrl("./images/basemap/streets-night.jpg"),itemId:"bf79e422e9454565ae0cbe9553cf6471",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/bf79e422e9454565ae0cbe9553cf6471/resources/styles/root.json",
type:"VectorTile"}]},"streets-relief-vector":{title:s.basemaps["streets-relief-vector"],thumbnailUrl:q.toUrl("./images/basemap/streets-relief.jpg"),itemId:"2e063e709e3446459f8538ed6743f879",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/2e063e709e3446459f8538ed6743f879/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:s.basemaps["streets-navigation-vector"],thumbnailUrl:q.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"dcbbba0edf094eaa81af19298b9c6247",
baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/dcbbba0edf094eaa81af19298b9c6247/resources/styles/root.json",type:"VectorTile"}]}};t("extend-esri")&&(b.basemaps=q);return q})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(q,t,b,s,r,m,k,g){q=q(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(f){if(f&&(t.mixin(this,
f),f.renderer&&(this.renderer=k.fromJson(f.renderer)),f.labelingInfo&&0<f.labelingInfo.length)){this.labelingInfo=[];var a;b.forEach(f.labelingInfo,function(b){a=new g(b);this.labelingInfo.push(a)},this)}},toJson:function(){var f={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(f.labelingInfo=[],b.forEach(this.labelingInfo,function(a){f.labelingInfo.push(a.toJson())}));
return m.fixJson(f)}});s("extend-esri")&&t.setObject("layers.LayerDrawingOptions",q,r);return q})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w){var E=
{fromJson:function(b){var d;switch(b.type||""){case "simple":d=new g(b);break;case "uniqueValue":d=new f(b);break;case "classBreaks":d=new a(b);break;case "vectorField":d=new c(b);break;case "scaleDependent":d=this._scaleDependentFromJson(b);break;case "dotDensity":d=this._dotDensityFromJson(b);break;case "temporal":d=this._temporalFromJson(b);break;case "heatmap":d=this._heatmapFromJson(b)}return d},_scaleDependentFromJson:function(a){var b={},c=a.minScale;b.rendererInfos=q.map(a.rendererInfos,function(a){var b=
a.maxScale;a={minScale:c,maxScale:b,renderer:a.renderer&&this.fromJson(a.renderer)};c=b;return a},this);return new u(b)},_dotDensityFromJson:function(a){a.backgroundColor&&t.isArray(a.backgroundColor)&&(a.backgroundColor=m.toDojoColor(a.backgroundColor));0<a.dotSize&&(a.dotSize=s.pt2px(a.dotSize));a.fields&&q.forEach(a.fields,function(a){a&&t.isArray(a.color)&&(a.color=m.toDojoColor(a.color))});a.legendOptions&&(a.legendOptions.backgroundColor&&t.isArray(a.legendOptions.backgroundColor)&&(a.legendOptions.backgroundColor=
m.toDojoColor(a.legendOptions.backgroundColor)),a.legendOptions.outline&&(a.legendOptions.outline=k.fromJson(a.legendOptions.outline)));a.outline&&(a.outline=k.fromJson(a.outline));return new d(a)},_temporalFromJson:function(a){var b,c,d;a=a||{};b=this.fromJson(a.observationRenderer);c=a.latestObservationRenderer?this.fromJson(a.latestObservationRenderer):null;d=a.trackRenderer?this.fromJson(a.trackRenderer):null;a=this._agerFromJson(a.observationAger);return new y(b,c,d,a)},_agerFromJson:function(a){var b;
a=a||{};a.colorRange||a.sizeRange||a.alphaRange?b=this._timeRampFromJson(a):a.agerClassBreakInfos&&(b=this._timeClassBreaksFromJson(a));return b},_timeRampFromJson:function(a){var b,c,d;a.colorRange&&1<a.colorRange.length&&(b=[m.toDojoColor(a.colorRange[0]),m.toDojoColor(a.colorRange[1])]);a.sizeRange&&1<a.sizeRange.length&&(c=[a.sizeRange[0],a.sizeRange[1]]);a.alphaRange&&1<a.alphaRange.length&&(d=[a.alphaRange[0]/255,a.alphaRange[1]/255]);return new x(b,c,d)},_timeClassBreaksFromJson:function(a){var b=
a.agerClassBreakInfos,c,d,f=[],w;c=B.UNIT_DAYS;switch(a.timeUnits){case "esriTimeUnitsSeconds":c=B.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":c=B.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":c=B.UNIT_HOURS;break;case "esriTimeUnitsMinutes":c=B.UNIT_MINUTES;break;case "esriTimeUnitsMonths":c=B.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":c=B.UNIT_WEEKS;break;case "esriTimeUnitsYears":c=B.UNIT_YEARS}for(w=0;w<b.length;w+=1)a=b[w],d={minAge:0,maxAge:a.oldestAge||Infinity},a.color&&(d.color=
m.toDojoColor(a.color)),a.alpha&&(d.alpha=a.alpha/255),d.size=a.size,f[w]=d;return new B(f,c)},_heatmapFromJson:function(a){var b=a.colorStops;b&&b instanceof Array&&q.forEach(b,function(a){a.color=m.toDojoColor(a.color)});return new w(a)}};b("extend-esri")&&t.mixin(t.getObject("renderer",!0,r),E);return E})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(q,t,b,s,r,m,k){q=q(k,{declaredClass:"esri.renderer.SimpleRenderer",
constructor:function(b){if(b&&!b.declaredClass){var f=b;this.symbol=(b=f.symbol)&&(b.declaredClass?b:m.fromJson(b));this.label=f.label;this.description=f.description}else this.symbol=b},getSymbol:function(b){return this.symbol},toJson:function(){var b=t.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return r.fixJson(b)}});b("extend-esri")&&t.setObject("renderer.SimpleRenderer",q,s);return q})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ./arcadeUtils".split(" "),
function(q,t,b,s,r,m,k,g){var f=Math.PI,a=1;q=q(null,{declaredClass:"esri.renderer.Renderer",constructor:function(a){this._cache={};if(a&&!a.declaredClass){this.rotationInfo=a.rotationInfo;if(!this.rotationInfo){var b=a.rotationType,f=a.rotationExpression;if(b||f)this.rotationInfo={type:b,expression:f}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(a.sizeInfo));this.setColorInfo(this._readColorInfo(a.colorInfo));this.setOpacityInfo(this._readOpacityInfo(a.transparencyInfo));
this.setVisualVariables(this._readVariables(a.visualVariables));this.setAuthoringInfo(a.authoringInfo)}this.getSymbol=t.hitch(this,this.getSymbol)},getSymbol:function(a){},_readSizeInfo:function(a){if(a){var d=a.minSize,f=a.maxSize;d&&(a.minSize="number"===typeof d?r.pt2px(d):this._readSizeInfo(d));f&&(a.maxSize="number"===typeof f?r.pt2px(f):this._readSizeInfo(f));a.stops&&b.forEach(a.stops,function(a){a.size&&"number"===typeof a.size&&(a.size=r.pt2px(a.size))})}return a},_readColorInfo:function(a){a&&
(b.forEach(a.colors,function(b,f){t.isArray(b)&&(a.colors[f]=k.toDojoColor(b))}),b.forEach(a.stops,function(b,f){b.color&&t.isArray(b.color)&&(a.stops[f].color=k.toDojoColor(b.color))}));return a},_readOpacityInfo:function(a){var d;a&&(d=t.mixin({},a),d.transparencyValues&&(d.opacityValues=b.map(d.transparencyValues,function(a){return 1-a/100}),delete d.transparencyValues),d.stops&&(d.stops=b.map(d.stops,function(a){a=t.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));
return d},_readVariables:function(a){a&&(a=b.map(a,function(a){"sizeInfo"===a.type?a=this._readSizeInfo(a):"colorInfo"===a.type?a=this._readColorInfo(a):"transparencyInfo"===a.type&&(a=this._readOpacityInfo(a),a.type="opacityInfo");return a},this));return a},setAuthoringInfo:function(a){this.authoringInfo=a},setRotationInfo:function(a){if(a=this.rotationInfo="string"===typeof a?{field:a}:a){if(a.expression&&!t.isFunction(a.expression)&&!a.field){var b=a.expression.match(this.rotationRE);b&&b[1]&&
(a.field=b[1])}a.rotationType=a.type}return this},rotationRE:/^\[([^\]]+)\]$/i,getRotationAngle:function(a,b){var f=this._getVarInfo(b&&b.rotationInfo,"rotationInfo").variable,g="arithmetic"===this._getRotationType(f),f=f.field,k=a.attributes,m=0;f&&(t.isFunction(f)?m=f.apply(this,arguments):k&&(m=k[f]||0),m=(m+(g?-90:0))*(g?-1:1));return m},_getRotationType:function(a){return a&&("rotationInfo"===a.type?a.rotationType:a.type)},_getDataValue:function(a,b,f,k){k||(k=this._getVarInfo(b,f),b=k.variable,
k=this._cache[k.cacheKey],"sizeInfo"===f&&(k=k.root));return a._getDataValue(b,k,g)},setVisualVariables:function(a){var d=this._cache;b.forEach(this.visualVariables,function(a,b){d.hasOwnProperty(b)&&(d[b]=null)},this);this.visualVariables=a;b.some(a,function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});b.forEach(a,function(a,b){"colorInfo"===a.type?d[b]=this._processColorInfo(a):"opacityInfo"===a.type?d[b]=this._processOpacityInfo(a):"sizeInfo"===a.type&&
(d[b]=this._processSizeInfo(a))},this);return this},getVisualVariableValues:function(a){var d=this.visualVariables,f;d&&(f=b.map(d,function(b){var d;switch(b.type){case "sizeInfo":d=this.getSize(a,{sizeInfo:b});break;case "colorInfo":d=this.getColor(a,{colorInfo:b});break;case "opacityInfo":d=this.getOpacity(a,{opacityInfo:b});break;case "rotationInfo":d=this.getRotationAngle(a,{rotationInfo:b})}return{variable:b,value:d}},this));return f},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,
b):!(!this.getVisualVariablesForType("sizeInfo",b)&&!this.getVisualVariablesForType("colorInfo",b)&&!this.getVisualVariablesForType("opacityInfo",b)&&!this.getVisualVariablesForType("rotationInfo",b))},getVisualVariablesForType:function(a,d){var f=this.visualVariables,g;!d&&this[a]?("rotationInfo"===a&&(this[a].rotationType=this[a].type),g=[this[a]]):f&&(g=b.filter(f,function(b){return b.type===a&&("string"===typeof d?b.target===d:!1===d?!b.target:!0)}))&&0===g.length&&(g=void 0);return g},setSizeInfo:function(a){this.sizeInfo=
this.proportionalSymbolInfo=a;this._cache.sizeInfo=this._processSizeInfo(a);return this},_processSizeInfo:function(a){return a&&{root:this._createCache(a),minSize:this._createCache(a.minSize),maxSize:this._createCache(a.maxSize)}},_getVarInfo:function(a,d){var f;a&&a.type===d?(f=b.indexOf(this.visualVariables,a),a=this.visualVariables[f]):(f=d,a=this[d]);return{variable:a,cacheKey:f}},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);return this},getSize:function(a,b){var f=this._getVarInfo(b&&
b.sizeInfo,"sizeInfo"),g=f.variable,f=this._cache[f.cacheKey],k=null;if(g)var m=g.minSize,k=g.maxSize,m="object"===typeof m&&m?this._getSize(a,m,f&&f.minSize,b):m,k="object"===typeof k&&k?this._getSize(a,k,f&&f.maxSize,b):k,k=this._getSize(a,g,f&&f.root,b,[m,k]);return k},_getSize:function(a,b,g,k,m){var y=b.expression,w=b.stops,r=0,D=g&&g.exprTree,A=g&&g.ipData,s="number"===typeof a?a:null;if(b.field||y||D){var q=k&&k.scale,D=m?m[0]:b.minSize;m=m?m[1]:b.maxSize;var t=b.minDataValue,M=b.maxDataValue,
J=b.valueUnit||"unknown",S=b.valueRepresentation,L=b.scaleBy,Q=k&&k.shape;y?s="view.scale"===y.toLowerCase()?q:null:"number"!==typeof s&&(s=this._getDataValue(a,b,null,g));if(null==s)return null;if(w)D=this._lookupData(s,A),s=D[0],m=D[1],s===m?r=w[s].size:(s=w[s].size,w=w[m].size,r=s+(w-s)*D[2]);else if(null!=D&&null!=m&&null!=t&&null!=M)s<=t?r=D:s>=M?r=m:(w=(s-t)/(M-t),"area"===L&&Q?(D=(s="circle"===Q)?f*Math.pow(D/2,2):D*D,m=s?f*Math.pow(m/2,2):m*m,w=D+w*(m-D),r=s?2*Math.sqrt(w/f):Math.sqrt(w)):
r=D+w*(m-D));else if("unknown"===J)null!=D&&null!=t&&(D&&t?(w=s/t,r="circle"===Q?2*Math.sqrt(w*Math.pow(D/2,2)):"square"===Q||"diamond"===Q||"image"===Q?Math.sqrt(w*Math.pow(D,2)):w*D):r=s+(D||t),r=r<D?D:r,null!=m&&r>m&&(r=m));else{w=(k&&k.resolution?k.resolution:1)*this._meterIn[J];if("area"===S)r=Math.sqrt(s/f)/w,r*=2;else if(r=s/w,"radius"===S||"distance"===S)r*=2;null!=D&&r<D&&(r=D);null!=m&&r>m&&(r=m)}}else r=w&&w[0]&&w[0].size,null==r&&(r=b.minSize);return r=isNaN(r)?0:r},getSizeRangeAtScale:function(a,
b){var f,g=this._getVarInfo(a,"sizeInfo"),k=this._cache[g.cacheKey],m={scale:b};if((a=g.variable)&&b){var w=a.minSize,g=a.maxSize,w="object"===typeof w&&w?this._getSize({},w,k&&k.minSize,m):w,k="object"===typeof g&&g?this._getSize({},g,k&&k.maxSize,m):g;if(null!=w||null!=k)f={minSize:w,maxSize:k}}return f},setColorInfo:function(a){this.colorInfo=a;this._cache.colorInfo=this._processColorInfo(a);return this},_createCache:function(b){return{ipData:this._interpolateData(b),exprTree:g.parseExpression(b&&
b.valueExpression),version:a++}},_processColorInfo:function(a){a&&(b.forEach(a.colors,function(b,f){t.isArray(b)&&(a.colors[f]=new k(b))}),b.forEach(a.stops,function(b,f){b.color&&t.isArray(b.color)&&(a.stops[f].color=new k(b.color))}));return this._createCache(a)},getColor:function(a,b){var f=this._getVarInfo(b&&b.colorInfo,"colorInfo");return this._getColorComponent(a,f.variable,this._cache[f.cacheKey])},setOpacityInfo:function(a){this.opacityInfo=a;this._cache.opacityInfo=this._processOpacityInfo(a);
return this},_processOpacityInfo:function(a){return this._createCache(a)},getOpacity:function(a,b){var f=this._getVarInfo(b&&b.opacityInfo,"opacityInfo");return this._getColorComponent(a,f.variable,this._cache[f.cacheKey],!0)},_getColorComponent:function(a,b,f,k,m){var y=a.attributes,w=b&&b.field,r="number"===typeof a,D=r?a:null,A=f&&f.exprTree,s=f&&f.ipData,q;if(w||A){var I=b.normalizationField,M=y?parseFloat(y[I]):void 0;"number"!==typeof D&&(A?D=g.executeExpression(A,g.createExecContext(a)):t.isFunction(w)?
D=w.apply(this,arguments):y&&(D=y[w]));if(null!=D&&(!I||r||!isNaN(M)&&0!==M))!isNaN(M)&&!r&&(D/=M),q=k?this._getOpacity(D,b,s):this._getColor(D,b,s)}else b&&(y=b.stops,k?(q=y&&y[0]&&y[0].opacity,null==q&&(q=b.opacityValues&&b.opacityValues[0])):q=y&&y[0]&&y[0].color||b.colors&&b.colors[0]);m&&(m.data=D,m.value=q);return m||q},_interpolateData:function(a){var d;if(a)if(a.colors||a.opacityValues){var f=(a.colors||a.opacityValues).length,g=a.minDataValue,k=(a.maxDataValue-g)/(f-1);d=[];for(a=0;a<f;a++)d[a]=
g+a*k}else a.stops&&(d=b.map(a.stops,function(a){return a.value}));return d},_getOpacity:function(a,b,f){a=this._lookupData(a,f);var g;b=b||this.opacityInfo;a&&(f=a[0],g=a[1],f===g?g=this._getOpacValue(b,f):(f=this._getOpacValue(b,f),b=this._getOpacValue(b,g),g=f+(b-f)*a[2]));return g},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,f){a=this._lookupData(a,f);var g;b=b||this.colorInfo;a&&(g=a[0],f=a[1],g=g===f?this._getColorObj(b,g):
k.blendColors(this._getColorObj(b,g),this._getColorObj(b,f),a[2]));return g},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(a,d){var f;if(d){var g=0,k=d.length-1;b.some(d,function(b,d){if(a<b)return k=d,!0;g=d;return!1});f=[g,k,(a-d[g])/(d[k]-d[g])]}return f},_meterIn:{inches:1/0.0254,feet:1/0.3048,yards:1/0.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:0.001,"decimal-degrees":180/20015077},
_writeSizeInfo:function(a){if(a){a=t.mixin({},a);var d=a.minSize,f=a.maxSize;d&&(a.minSize="number"===typeof d?r.px2pt(d):this._writeSizeInfo(d));f&&(a.maxSize="number"===typeof f?r.px2pt(f):this._writeSizeInfo(f));if(d=a.legendOptions)if(a.legendOptions=t.mixin({},d),d=d.customValues)a.legendOptions.customValues=d.slice(0);a.stops&&(a.stops=b.map(a.stops,function(a){a=t.mixin({},a);a.size&&"number"===typeof a.size&&(a.size=r.px2pt(a.size));return a}))}return a},_writeColorInfo:function(a){a&&(a=
t.mixin({},a),a.colors&&(a.colors=b.map(a.colors,function(a){return k.toJsonColor(a)})),a.stops&&(a.stops=b.map(a.stops,function(a){a=t.mixin({},a);a.color&&(a.color=k.toJsonColor(a.color));return a})));return a},_writeOpacityInfo:function(a){var d;a&&(d=t.mixin({},a),d.opacityValues&&(d.transparencyValues=b.map(d.opacityValues,function(a){return 100*(1-a)}),delete d.opacityValues),d.stops&&(d.stops=b.map(d.stops,function(a){a=t.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;return a})),
d.legendOptions&&(d.legendOptions=t.mixin({},d.legendOptions)));return d},toJson:function(){var a=this.visualVariables,d=t.clone(this.authoringInfo),f=this.getVisualVariablesForType("rotationInfo",!1),g=(f=f&&f[0])&&f.field,g=f&&(f.expression||g&&(t.isFunction(g)?g:"["+g+"]"));a&&(a=b.map(a,function(a){"sizeInfo"===a.type?a=this._writeSizeInfo(a):"colorInfo"===a.type?a=this._writeColorInfo(a):"opacityInfo"===a.type?(a=this._writeOpacityInfo(a),a.type="transparencyInfo"):"rotationInfo"===a.type&&(a=
t.mixin({},a));return a},this));d&&b.forEach(d.visualVariables,function(a){"opacityInfo"===a.type&&(a.type="transparencyInfo")});return{rotationType:g&&(this._getRotationType(f)||"geographic"),rotationExpression:g,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:a,authoringInfo:d}}});s("extend-esri")&&t.setObject("renderer.Renderer",q,m);return q})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang",
"dojo/has","../kernel","../arcade/arcade"],function(q,t,b,s){var r={parseExpression:function(b,k){k=k||{vars:{$feature:"any"}};return b?s.parseScript(b,k):null},createExecContext:function(b){return{vars:{$feature:s.constructFeature(b)}}},executeExpression:function(b,k){return s.executeScript(b,k,-1)}};t("extend-esri")&&q.setObject("renderer.arcadeUtils",r,b);return r})},"esri/arcade/arcade":function(){define(["require","exports","./arcadeRuntime","./parser","./Feature"],function(q,t,b,s,r){t.constructFeature=
function(b){return r.fromFeature(b)};t.parseScript=function(b){return s.parseScript(b)};t.validateScript=function(b,k){return s.validateScript(b,k,"simple")};t.scriptCheck=function(b,k,g){return s.scriptCheck(b,k,g,"full")};t.parseAndExecuteScript=function(m,k,g){return b.executeScript(s.parseScript(m),k,g)};t.executeScript=function(m,k,g){return b.executeScript(m,k,g)};t.referencesMember=function(m,k){return b.referencesMember(m,k)};t.referencesFunction=function(m,k){return b.referencesFunction(m,
k)};t.extractFieldLiterals=function(b,k){void 0===k&&(k=!1);return s.extractFieldLiterals(b,k)}})},"esri/arcade/arcadeRuntime":function(){define("require exports ../geometry/Polygon ../graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G){function I(e,h){for(var n=[],l=0;l<h.arguments.length;l++)n.push(J(e,h.arguments[l]));return n}function M(e,h,n){try{return n(e,h,I(e,h))}catch(l){throw l;}}function J(e,h){try{switch(h.type){case "EmptyStatement":return a.voidOperation;case "VariableDeclarator":var n=null===h.init?null:J(e,h.init);n===a.voidOperation&&(n=null);var l=h.id.name.toLowerCase();null!==e.localScope?e.localScope[l]={value:n,valueset:!0,node:h.init}:e.globalScope[l]=
{value:n,valueset:!0,node:h.init};return a.voidOperation;case "VariableDeclaration":for(var z=0;z<h.declarations.length;z++)J(e,h.declarations[z]);return a.voidOperation;case "BlockStatement":var v;a:{for(var b=a.voidOperation,z=0;z<h.body.length;z++)if(b=J(e,h.body[z]),b instanceof a.ReturnResult||b===a.breakResult||b===a.continueResult){v=b;break a}v=b}return v;case "FunctionDeclaration":var f=h.id.name.toLowerCase();e.globalScope[f]={valueset:!0,node:null,value:new B(h,e)};return a.voidOperation;
case "ReturnStatement":var C;if(null===h.argument)C=new a.ReturnResult(a.voidOperation);else{var w=J(e,h.argument);C=new a.ReturnResult(w)}return C;case "IfStatement":var g;if("AssignmentExpression"===h.test.type||"UpdateExpression"===h.test.type)throw Error(c.nodeErrorMessage(h.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var k=J(e,h.test);if(!0===k)g=J(e,h.consequent);else if(!1===k)g=null!==h.alternate?J(e,h.alternate):a.voidOperation;else throw Error(c.nodeErrorMessage(h,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return g;case "ExpressionStatement":var m;if("AssignmentExpression"===h.expression.type||"UpdateExpression"===h.expression.type)m=J(e,h.expression);else{var A=J(e,h.expression);m=A===a.voidOperation?a.voidOperation:new a.ImplicitResult(A)}return m;case "AssignmentExpression":var y;var x=J(e,h.right),z=null,D="";if("MemberExpression"===h.left.type){z=J(e,h.left.object);D=!0===h.left.computed?J(e,h.left.property):h.left.property.name;if(a.isArray(z))if(a.isNumber(D)){0>D&&(D=z.length+D);if(0>D||D>z.length)throw Error("Assignment outside of array bounds");
if(D===z.length&&"\x3d"!==h.operator)throw Error("Invalid Parameter");z[D]=L(x,h.operator,z[D],h)}else throw Error("Invalid Parameter");else if(z instanceof d){if(!1===a.isString(D))throw Error("Dictionary accessor must be a string");if(!0===z.hasField(D))z.setField(D,L(x,h.operator,z.field(D),h));else{if("\x3d"!==h.operator)throw Error("Invalid Parameter");z.setField(D,L(x,h.operator,null,h))}}else if(z instanceof u){if(!1===a.isString(D))throw Error("Feature accessor must be a string");if(!0===
z.hasField(D))z.setField(D,L(x,h.operator,z.field(D),h));else{if("\x3d"!==h.operator)throw Error("Invalid Parameter");z.setField(D,L(x,h.operator,null,h))}}else{if(a.isImmutableArray(z))throw Error("Array is Immutable");throw Error("Invalid Parameter");}y=a.voidOperation}else if(z=h.left.name.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[z])e.localScope[z]={value:L(x,h.operator,e.localScope[z].value,h),valueset:!0,node:h.right},y=a.voidOperation;else if(void 0!==e.globalScope[z])e.globalScope[z]=
{value:L(x,h.operator,e.globalScope[z].value,h),valueset:!0,node:h.right},y=a.voidOperation;else throw Error("Variable not recognised");return y;case "UpdateExpression":var r;var s,z=null,D="";if("MemberExpression"===h.argument.type){z=J(e,h.argument.object);D=!0===h.argument.computed?J(e,h.argument.property):h.argument.property.name;if(a.isArray(z))if(a.isNumber(D)){0>D&&(D=z.length+D);if(0>D||D>=z.length)throw Error("Assignment outside of array bounds");s=a.toNumber(z[D]);z[D]="++"===h.operator?
s+1:s-1}else throw Error("Invalid Parameter");else if(z instanceof d){if(!1===a.isString(D))throw Error("Dictionary accessor must be a string");if(!0===z.hasField(D))s=a.toNumber(z.field(D)),z.setField(D,"++"===h.operator?s+1:s-1);else throw Error("Invalid Parameter");}else if(z instanceof u){if(!1===a.isString(D))throw Error("Feature accessor must be a string");if(!0===z.hasField(D))s=a.toNumber(z.field(D)),z.setField(D,"++"===h.operator?s+1:s-1);else throw Error("Invalid Parameter");}else{if(a.isImmutableArray(z))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}r=!1===h.prefix?s:"++"===h.operator?s+1:s-1}else if(z=h.argument.name.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[z])s=a.toNumber(e.localScope[z].value),e.localScope[z]={value:"++"===h.operator?s+1:s-1,valueset:!0,node:h},r=!1===h.prefix?s:"++"===h.operator?s+1:s-1;else if(void 0!==e.globalScope[z])s=a.toNumber(e.globalScope[z].value),e.globalScope[z]={value:"++"===h.operator?s+1:s-1,valueset:!0,node:h},r=!1===h.prefix?s:"++"===h.operator?s+1:s-1;else throw Error("Variable not recognised");
return r;case "BreakStatement":return a.breakResult;case "ContinueStatement":return a.continueResult;case "ForStatement":null!==h.init&&J(e,h.init);D={testResult:!0,lastAction:a.voidOperation};do b:{y=e;x=h;r=D;if(null!==x.test){r.testResult=J(y,x.test);if(!1===r.testResult)break b;if(!0!==r.testResult)throw Error(c.nodeErrorMessage(x,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}r.lastAction=J(y,x.body);r.lastAction===a.breakResult?r.testResult=!1:r.lastAction instanceof a.ReturnResult?r.testResult=
!1:null!==x.update&&J(y,x.update)}while(!0===D.testResult);z=D.lastAction instanceof a.ReturnResult?D.lastAction:a.voidOperation;return z;case "ForInStatement":return S(e,h);case "Identifier":var q;var E;try{var t=h.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[t])E=e.localScope[t],!0!==E.valueset&&(E.value=J(e,E.node),E.valueset=!0),q=E.value;else if(void 0!==e.globalScope[t])E=e.globalScope[t],!0!==E.valueset&&(E.value=J(e,E.node),E.valueset=!0),q=E.value;else throw Error(c.nodeErrorMessage(h,
"RUNTIME","VARIABLENOTFOUND"));}catch(K){throw K;}return q;case "MemberExpression":return R(e,h);case "Literal":return h.value;case "ThisExpression":throw Error(c.nodeErrorMessage(h,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return O(e,h);case "UnaryExpression":return X(e,h);case "BinaryExpression":return V(e,h);case "LogicalExpression":var G;a:try{if("AssignmentExpression"===h.left.type||"UpdateExpression"===h.left.type)throw Error(c.nodeErrorMessage(h.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("AssignmentExpression"===h.right.type||"UpdateExpression"===h.right.type)throw Error(c.nodeErrorMessage(h.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var I=[J(e,h.left),J(e,h.right)],H=I[0],M=I[1];if(a.isBoolean(H)&&a.isBoolean(M))switch(h.operator){case "||":G=H||M;break a;case "\x26\x26":G=H&&M;break a;default:throw Error(c.nodeErrorMessage(h,"RUNTIME","ONLYORORAND"));}else throw Error(c.nodeErrorMessage(h,"RUNTIME","ONLYBOOLEAN"));}catch(Q){throw Q;}return G;case "ConditionalExpression":throw Error(c.nodeErrorMessage(h,
"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{z=[];for(D=0;D<h.elements.length;D++){var U=J(e,h.elements[D]);if(a.isFunctionParameter(U))throw Error(c.nodeErrorMessage(h,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));U===a.voidOperation?z.push(null):z.push(U)}}catch(Z){throw Z;}return z;case "ObjectExpression":z={};for(D=0;D<h.properties.length;D++){var ua=J(e,h.properties[D]);if(a.isFunctionParameter(ua.value))throw Error("Illegal Argument");if(!1===a.isString(ua.key))throw Error("Illegal Argument");
z[ua.key.toString()]=ua.value===a.voidOperation?null:ua.value}var va=new d(z);va.immutable=!1;return va;case "Property":return{key:"Identifier"===h.key.type?h.key.name:J(e,h.key),value:J(e,h.value)};case "Array":throw Error(c.nodeErrorMessage(h,"RUNTIME","NOTSUPPORTED"));default:throw Error(c.nodeErrorMessage(h,"RUNTIME","UNREOGNISED"));}}catch(ca){throw ca;}}function S(e,h){var n=J(e,h.right);"VariableDeclaration"===h.left.type&&J(e,h.left);var l=null,z="VariableDeclaration"===h.left.type?h.left.declarations[0].id.name:
h.left.name;null!==e.localScope&&void 0!==e.localScope[z]&&(l=e.localScope[z]);null===l&&void 0!==e.globalScope[z]&&(l=e.globalScope[z]);if(null===l)throw Error(c.nodeErrorMessage(h,"RUNTIME","VARIABLENOTDECLARED"));if(a.isArray(n)||a.isString(n)){for(var n=n.length,v=0;v<n&&!(l.value=v,z=J(e,h.body),z===a.breakResult);v++)if(z instanceof a.ReturnResult)return z;return a.voidOperation}if(a.isImmutableArray(n)){for(v=0;v<n.length()&&!(l.value=v,z=J(e,h.body),z===a.breakResult);v++)if(z instanceof a.ReturnResult)return z;
return a.voidOperation}if(n instanceof d||n instanceof u){n=n.keys();for(v=0;v<n.length&&!(l.value=n[v],z=J(e,h.body),z===a.breakResult);v++)if(z instanceof a.ReturnResult)return z}else return a.voidOperation}function L(e,h,n,l){switch(h){case "\x3d":return e===a.voidOperation?null:e;case "/\x3d":return a.toNumber(n)/a.toNumber(e);case "*\x3d":return a.toNumber(n)*a.toNumber(e);case "-\x3d":return a.toNumber(n)-a.toNumber(e);case "+\x3d":return a.isString(n)||a.isString(e)?a.toString(n)+a.toString(e):
a.toNumber(n)+a.toNumber(e);case "%\x3d":return a.toNumber(n)%a.toNumber(e);default:throw Error(c.nodeErrorMessage(l,"RUNTIME","OPERATORNOTRECOGNISED"));}}function Q(e,h,l,z){h=h.toLowerCase();switch(h){case "hasz":return e=e.hasZ,void 0===e?!1:e;case "hasm":return e=e.hasM,void 0===e?!1:e;case "spatialreference":return h=e.spatialReference._arcadeCacheId,void 0===h&&(l=!0,Object.freeze&&Object.isFrozen(e.spatialReference)&&(l=!1),l&&(n++,h=e.spatialReference._arcadeCacheId=n)),e=new d({wkt:e.spatialReference.wkt,
wkid:e.spatialReference.wkid}),void 0!==h&&(e._arcadeCacheId="SPREF"+h.toString()),e}switch(e.type){case "extent":switch(h){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return e=e[h],void 0!==e?e:null;case "type":return"Extent"}break;case "polygon":switch(h){case "rings":return h=a.isVersion4?e.cache._arcadeCacheId:e.getCacheValue("_arcadeCacheId"),void 0===h&&(n++,h=n,a.isVersion4?e.cache._arcadeCacheId=h:e.setCacheValue("_arcadeCacheId",h)),e=new A(e.rings,
e.spatialReference,!0===e.hasZ,!0===e.hasM,h);case "type":return"Polygon"}break;case "point":switch(h){case "x":case "y":case "z":case "m":return void 0!==e[h]?e[h]:null;case "type":return"Point"}break;case "polyline":switch(h){case "paths":return h=a.isVersion4?e.cache._arcadeCacheId:e.getCacheValue("_arcadeCacheId"),void 0===h&&(n++,h=n,a.isVersion4?e.cache._arcadeCacheId=h:e.setCacheValue("_arcadeCacheId",h)),e=new A(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,h);case "type":return"Polyline"}break;
case "multipoint":switch(h){case "points":return h=a.isVersion4?e.cache._arcadeCacheId:e.getCacheValue("_arcadeCacheId"),void 0===h&&(n++,h=n,a.isVersion4?e.cache._arcadeCacheId=h:e.setCacheValue("_arcadeCacheId",h)),e=new H(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,h,1);case "type":return"Multipoint"}}throw Error(c.nodeErrorMessage(z,"RUNTIME","PROPERTYNOTFOUND"));}function R(e,h){try{var n=J(e,h.object);if(null===n)throw Error(c.nodeErrorMessage(h,"RUNTIME","NOTFOUND"));if(!1===h.computed){if(n instanceof
d||n instanceof u)return n.field(h.property.name);if(n instanceof G)return Q(n,h.property.name,e,h);throw Error(c.nodeErrorMessage(h,"RUNTIME","INVALIDTYPE"));}var l=J(e,h.property);if(n instanceof d||n instanceof u){if(a.isString(l))return n.field(l)}else if(n instanceof G){if(a.isString(l))return Q(n,l,e,h)}else if(a.isArray(n)){if(a.isNumber(l)&&isFinite(l)&&Math.floor(l)===l){0>l&&(l=n.length+l);if(l>=n.length||0>l)throw Error(c.nodeErrorMessage(h,"RUNTIME","OUTOFBOUNDS"));return n[l]}}else if(a.isString(n)){if(a.isNumber(l)&&
isFinite(l)&&Math.floor(l)===l){0>l&&(l=n.length+l);if(l>=n.length||0>l)throw Error(c.nodeErrorMessage(h,"RUNTIME","OUTOFBOUNDS"));return n[l]}}else if(a.isImmutableArray(n)&&a.isNumber(l)&&isFinite(l)&&Math.floor(l)===l){0>l&&(l=n.length()+l);if(l>=n.length()||0>l)throw Error(c.nodeErrorMessage(h,"RUNTIME","OUTOFBOUNDS"));return n.get(l)}throw Error(c.nodeErrorMessage(h,"RUNTIME","INVALIDTYPE"));}catch(z){throw z;}}function X(e,h){try{var n=J(e,h.argument);if(a.isBoolean(n)){if("!"===h.operator)return!n;
if("-"===h.operator)return-1*a.toNumber(n);if("+"===h.operator)return 1*a.toNumber(n);throw Error(c.nodeErrorMessage(h,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===h.operator)return-1*a.toNumber(n);if("+"===h.operator)return 1*a.toNumber(n);throw Error(c.nodeErrorMessage(h,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(l){throw l;}}function V(e,h){try{var n=[J(e,h.left),J(e,h.right)],l=n[0],z=n[1];switch(h.operator){case "\x3d\x3d":return a.equalityTest(l,z);case "\x3d":return a.equalityTest(l,
z);case "!\x3d":return!a.equalityTest(l,z);case "\x3c":return a.greaterThanLessThan(l,z,h.operator);case "\x3e":return a.greaterThanLessThan(l,z,h.operator);case "\x3c\x3d":return a.greaterThanLessThan(l,z,h.operator);case "\x3e\x3d":return a.greaterThanLessThan(l,z,h.operator);case "+":return a.isString(l)||a.isString(z)?a.toString(l)+a.toString(z):a.toNumber(l)+a.toNumber(z);case "-":return a.toNumber(l)-a.toNumber(z);case "*":return a.toNumber(l)*a.toNumber(z);case "/":return a.toNumber(l)/a.toNumber(z);
case "%":return a.toNumber(l)%a.toNumber(z);default:throw Error(c.nodeErrorMessage(h,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(v){throw v;}}function O(h,n){try{if("Identifier"!==n.callee.type)throw Error(c.nodeErrorMessage(n,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==h.localScope&&void 0!==h.localScope[n.callee.name.toLowerCase()]){var l=h.localScope[n.callee.name.toLowerCase()];if(l.value instanceof a.NativeFunction)return l.value.fn(h,n);if(l.value instanceof B)return e(h,n,l.value.definition);
throw Error(c.nodeErrorMessage(n,"RUNTIME","NOTAFUNCTION"));}if(void 0!==h.globalScope[n.callee.name.toLowerCase()]){l=h.globalScope[n.callee.name.toLowerCase()];if(l.value instanceof a.NativeFunction)return l.value.fn(h,n);if(l.value instanceof B)return e(h,n,l.value.definition);throw Error(c.nodeErrorMessage(n,"RUNTIME","NOTAFUNCTION"));}throw Error(c.nodeErrorMessage(n,"RUNTIME","NOTFOUND"));}catch(z){throw z;}}function U(e){return null==e?"":a.isArray(e)||a.isImmutableArray(e)?"Array":a.isDate(e)?
"Date":a.isString(e)?"String":a.isBoolean(e)?"Boolean":a.isNumber(e)?"Number":e instanceof d?"Dictionary":e instanceof u?"Feature":e instanceof m?"Point":e instanceof b?"Polygon":e instanceof r?"Polyline":e instanceof g?"Multipoint":e instanceof k?"Extent":a.isFunctionParameter(e)?"Function":e===a.voidOperation?"":"number"===typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function v(e,h,n,l){try{var z=J(e,h.arguments[n]);if(a.equalityTest(z,l))return J(e,h.arguments[n+1]);var b=h.arguments.length-
n;return 1===b?J(e,h.arguments[n]):2===b?null:v(e,h,n+2,l)}catch(c){throw c;}}function K(e,h,n,l){try{if(!0===l)return J(e,h.arguments[n+1]);if(3===h.arguments.length-n)return J(e,h.arguments[n+2]);var z=J(e,h.arguments[n+2]);if(!1===a.isBoolean(z))throw Error("WHEN needs boolean test conditions");return K(e,h,n+2,z)}catch(v){throw v;}}function C(e,h){var n=e.length,l=Math.floor(n/2);if(0===n)return[];if(1===n)return[e[0]];for(var z=C(e.slice(0,l),h),n=C(e.slice(l,n),h),l=[];0<z.length||0<n.length;)if(0<
z.length&&0<n.length){var v=h(z[0],n[0]);isNaN(v)&&(v=0);0>=v?(l.push(z[0]),z=z.slice(1)):(l.push(n[0]),n=n.slice(1))}else 0<z.length?(l.push(z[0]),z=z.slice(1)):0<n.length&&(l.push(n[0]),n=n.slice(1));return l}function l(e,h,n){try{var l=e.body;if(n.length!==e.params.length)throw Error("Invalid Parameter calls to function.");for(var z=0;z<n.length;z++)h.localScope[e.params[z].name.toLowerCase()]={d:null,value:n[z],valueset:!0,node:null};var v=J(h,l);if(v instanceof a.ReturnResult)return v.value;
if(v===a.breakResult)throw Error("Cannot Break from a Function");if(v===a.continueResult)throw Error("Cannot Continue from a Function");return v instanceof a.ImplicitResult?v.value:v}catch(b){throw b;}}function e(e,h,n){return M(e,h,function(h,z,v){h={spatialReference:e.spatialReference,applicationCache:void 0===e.applicationCache?null:e.applicationCache,globalScope:e.globalScope,depthCounter:e.depthCounter+1,localScope:{}};if(64<h.depthCounter)throw Error("Exceeded maximum function depth");return l(n,
h,v)})}function h(e){return function(){var h={applicationCache:void 0===e.context.applicationCache?null:e.context.applicationCache,spatialReference:e.context.spatialReference,localScope:{},depthCounter:e.context.depthCounter+1,globalScope:e.context.globalScope};if(64<h.depthCounter)throw Error("Exceeded maximum function depth");return l(e.definition,h,arguments)}}var n=0,z={};x.registerFunctions(z,M);y.registerFunctions(z,M);w.registerFunctions(z,M);E.registerFunctions(z,M);D.registerFunctions(z,
M);z["typeof"]=function(e,h){return M(e,h,function(e,h,n){a.pcCheck(n,1,1);e=U(n[0]);if("Unrecognised Type"===e)throw Error("Unrecognised Type");return e})};z.iif=function(e,h){try{a.pcCheck(null===h.arguments?[]:h.arguments,3,3);var n=J(e,h.arguments[0]);if(!1===a.isBoolean(n))throw Error("IF Function must have a boolean test condition");return!0===n?J(e,h.arguments[1]):J(e,h.arguments[2])}catch(l){throw l;}};z.decode=function(e,h){try{if(2>h.arguments.length)throw Error("Missing Parameters");if(2===
h.arguments.length)return J(e,h.arguments[1]);if(0===(h.arguments.length-1)%2)throw Error("Must have a default value result.");var n=J(e,h.arguments[0]);return v(e,h,1,n)}catch(l){throw l;}};z.when=function(e,h){try{if(3>h.arguments.length)throw Error("Missing Parameters");if(0===h.arguments.length%2)throw Error("Must have a default value result.");var n=J(e,h.arguments[0]);if(!1===a.isBoolean(n))throw Error("WHEN needs boolean test conditions");return K(e,h,0,n)}catch(l){throw l;}};z.top=function(e,
h){return M(e,h,function(e,h,n){a.pcCheck(n,2,2);if(a.isArray(n[0]))return a.toNumber(n[1])>=n[0].length?n[0].slice(0):n[0].slice(0,a.toNumber(n[1]));if(a.isImmutableArray(n[0]))return a.toNumber(n[1])>=n[0].length()?n[0].slice(0):n[0].slice(0,a.toNumber(n[1]));throw Error("Top cannot accept this parameter type");})};z.first=function(e,h){return M(e,h,function(e,h,n){a.pcCheck(n,1,1);return a.isArray(n[0])?0===n[0].length?null:n[0][0]:a.isImmutableArray(n[0])?0===n[0].length()?null:n[0].get(0):null})};
z.sort=function(e,n){return M(e,n,function(e,n,l){a.pcCheck(l,1,2);e=l[0];a.isImmutableArray(e)&&(e=e.toArray());if(!1===a.isArray(e))throw Error("Illegal Argument");if(1<l.length){if(!1===a.isFunctionParameter(l[1]))throw Error("Illegal Argument");var z=h(l[1]);e=C(e,function(e,h){return z(e,h)})}else{if(0===e.length)return[];l={};for(n=0;n<e.length;n++){var F=U(e[n]);""!==F&&(l[F]=!0)}if(!0===l.Array||!0===l.Dictionary||!0===l.Feature||!0===l.Point||!0===l.Polygon||!0===l.Polyline||!0===l.Multipoint||
!0===l.Extent||!0===l.Function)return e.slice(0);n=0;var F="",v;for(v in l)n++,F=v;e=1<n||"String"===F?C(e,function(e,h){if(null===e||void 0===e||e===a.voidOperation)return null===h||void 0===h||h===a.voidOperation?0:1;if(null===h||void 0===h||h===a.voidOperation)return-1;var n=a.toString(e),l=a.toString(h);return n<l?-1:n===l?0:1}):"Number"===F?C(e,function(e,h){return e-h}):"Boolean"===F?C(e,function(e,h){return e===h?0:h?-1:1}):"Date"===F?C(e,function(e,h){return h-e}):e.slice(0)}return e})};t.functionHelper=
{fixSpatialReference:a.fixSpatialReference,parseArguments:I,standardFunction:M};t.executeScript=function(e,h,n){n||(n=new f(102100));var l=h.vars,v=h.customfunctions,b={};l||(l={});v||(v={});var c=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});c.immutable=!1;b.textformatting={value:c,valueset:!0,node:null};b.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};b.pi={value:Math.PI,valueset:!0,node:null};for(var C in z)b[C]={value:new a.NativeFunction(z[C]),
valueset:!0,node:null};for(C in v)b[C]={value:new a.NativeFunction(v[C]),"native":!0,valueset:!0,node:null};for(C in l)b[C]=l[C]instanceof s?{value:new u(l[C]),valueset:!0,node:null}:{value:l[C],valueset:!0,node:null};e=J({spatialReference:n,globalScope:b,localScope:null,depthCounter:1,applicationCache:void 0===h.applicationCache?null:h.applicationCache},e.body[0].body);e instanceof a.ReturnResult&&(e=e.value);e instanceof a.ImplicitResult&&(e=e.value);e===a.voidOperation&&(e=null);if(e===a.breakResult)throw Error("Cannot return BREAK");
if(e===a.continueResult)throw Error("Cannot return CONTINUE");if(e instanceof B)throw Error("Cannot return FUNCTION");if(e instanceof a.NativeFunction)throw Error("Cannot return FUNCTION");return e};t.extractFieldLiterals=function(e,h){void 0===h&&(h=!1);return c.findFieldLiterals(e,h)};t.validateScript=function(e,h){return c.validateScript(e,h,"simple")};t.referencesMember=function(e,h){return c.referencesMember(e,h)};t.referencesFunction=function(e,h){return c.referencesFunction(e,h)}})},"esri/arcade/languageUtils":function(){define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray dojo/_base/array ../geometry/Point ./FunctionWrapper".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d){function u(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function B(a){return a instanceof X||a instanceof d}function x(a){return"string"===typeof a||a instanceof String}function y(a){return"boolean"===typeof a}function w(a){return"number"===typeof a}function E(a){return a instanceof Array}function D(a){return a instanceof Date}function A(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();
b=u(b,"\u2030","");b=u(b,"\u00a4","");return r.format(a,{pattern:b})}return a.toString()}function H(a,b){var c=s(a);return void 0===b||null===b||""===b?c.format():c.format(b)}function G(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function I(a,b){if(a===b||null===a&&b===t.voidOperation||null===b&&a===t.voidOperation)return!0;if(D(a)&&D(b))return a.getTime()===b.getTime();if(a instanceof f||a instanceof g)return a.equalityTest(b);
if(a instanceof c&&b instanceof c){var d=void 0,v=void 0;t.isVersion4?(d=a.cache._arcadeCacheId,v=b.cache._arcadeCacheId):(d=a.getCacheValue("_arcadeCacheId"),v=b.getCacheValue("_arcadeCacheId"));if(void 0!==d&&null!==d)return d===v}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId?!0:!1}function M(a,c){if(x(a))return a;if(null===a)return"";if(w(a))return A(a,c);if(y(a))return a.toString();
if(D(a))return H(a,c);if(a instanceof b)return JSON.stringify(a.toJson());if(E(a)){for(var d=[],v=0;v<a.length;v++)d[v]=S(a[v]);return"["+d.join(",")+"]"}if(a instanceof m){d=[];for(v=0;v<a.length();v++)d[v]=S(a.get(v));return"["+d.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():B(a)?"object, Function":""}function J(a,c){if(x(a))return a;if(null===a)return"";if(w(a))return A(a,c);if(y(a))return a.toString();if(D(a))return H(a,c);if(a instanceof b)return JSON.stringify(a.toJson());
if(E(a)){for(var d=[],v=0;v<a.length;v++)d[v]=S(a[v]);return"["+d.join(",")+"]"}if(a instanceof m){d=[];for(v=0;v<a.length();v++)d[v]=S(a.get(v));return"["+d.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():B(a)?"object, Function":""}function S(a){if(null!==a){if(y(a)||w(a)||x(a))return JSON.stringify(a);if(a instanceof b||a instanceof m||a instanceof Array)return J(a);if(a instanceof Date)return JSON.stringify(a);if(null!==a&&"object"===typeof a&&void 0!==
a.castToText)return a.castToText()}return"null"}function L(a,b){return w(a)?a:null===a||""===a?0:D(a)?NaN:y(a)?a?1:0:""===a||void 0===a?NaN:void 0!==b&&x(a)?(b=u(b,"\u2030",""),b=u(b,"\u00a4",""),r.parse(a,{pattern:b})):a===t.voidOperation?0:Number(a)}function Q(b,c){var d;a.some(c.fields,function(a){a.name===b&&(d=a.domain);return!!d});return d}q=function(){return function(a){this.value=a}}();var R=function(){return function(a){this.value=a}}(),X=function(){return function(a){this.fn=a}}();t.NativeFunction=
X;t.ImplicitResult=R;t.ReturnResult=q;t.isVersion4=0===k.version.indexOf("4.");t.voidOperation={type:"VOID"};t.breakResult={type:"BREAK"};t.continueResult={type:"CONTINUE"};t.multiReplace=u;t.isFunctionParameter=B;t.isSimpleType=function(a){return x(a)||w(a)||D(a)||y(a)||null===a||a===t.voidOperation||"number"===typeof a?!0:!1};t.defaultUndefined=function(a,b){return void 0===a?b:a};t.isString=x;t.isBoolean=y;t.isNumber=w;t.isArray=E;t.isImmutableArray=function(a){return a instanceof m};t.isDate=
D;t.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};t.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};t.formatNumber=A;t.formatDate=H;t.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===t.voidOperation)return G(null,null,c);if(w(b))return G(0,b,c);if(x(b)||
y(b))return G(0,L(b),c);if(D(b))return G(0,b.getTime(),c)}if(a===t.voidOperation){if(null===b||b===t.voidOperation)return G(null,null,c);if(w(b))return G(0,b,c);if(x(b)||y(b))return G(0,L(b),c);if(D(b))return G(0,b.getTime(),c)}else if(w(a)){if(w(b))return G(a,b,c);if(y(b))return G(a,L(b),c);if(null===b||b===t.voidOperation)return G(a,0,c);if(x(b))return G(a,L(b),c);if(D(b))return G(a,b.getTime(),c)}else if(x(a)){if(x(b))return G(M(a),M(b),c);if(D(b))return G(L(a),b.getTime(),c);if(w(b))return G(L(a),
b,c);if(null===b||b===t.voidOperation)return G(L(a),0,c);if(y(b))return G(L(a),L(b),c)}else if(D(a)){if(D(b))return G(a,b,c);if(null===b||b===t.voidOperation)return G(a.getTime(),0,c);if(w(b))return G(a.getTime(),b,c);if(y(b)||x(b))return G(a.getTime(),L(b),c)}else if(y(a)){if(y(b))return G(a,b,c);if(w(b))return G(L(a),L(b),c);if(D(b))return G(L(a),b.getTime(),c);if(null===b||b===t.voidOperation)return G(L(a),0,c);if(x(b))return G(L(a),L(b),c)}return I(a,b)&&("\x3c\x3d"===c||"\x3e\x3d"===c)?!0:!1};
t.equalityTest=I;t.toString=M;t.toNumberArray=function(a){var b=[];if(!1===E(a))return null;if(a instanceof m){for(var c=0;c<a.length();c++)b[c]=L(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=L(a[c]);return b};t.toStringExplicit=J;t.toNumber=L;t.toDate=function(a,b){if(D(a))return a;if(x(a)){var c=s(a,[void 0===b||null===b||""===b?s.ISO_8601:b]);if(c.isValid())return c.toDate()}return null};t.toDateM=function(a,b){if(D(a))return s(a);if(x(a)){var c=s(a,[void 0===b||null===b||""===b?s.ISO_8601:b]);
if(c.isValid())return c}return null};t.toBoolean=function(a){if(y(a))return a;if(x(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(w(a))return 0===a||isNaN(a)?!1:!0;return!1};t.fixSpatialReference=function(a,b){if(null===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};t.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="esriFieldTypeString"===a.field.type?M(b):L(b);for(var v=0;v<a.domain.codedValues.length;v++){var d=
a.domain.codedValues[v];d.code===b&&(c=d)}return null===c?null:c.name};t.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=M(b);for(var v=0;v<a.domain.codedValues.length;v++){var d=a.domain.codedValues[v];d.name===b&&(c=d)}return null===c?null:c.code};t.getDomain=function(b,c,d,v){void 0===d&&(d=null);if(!c||!c.fields)return null;for(var f=null,C=0;C<c.fields.length;C++){var l=c.fields[C];l.name.toLowerCase()===b.toString().toLowerCase()&&(f=l)}if(null===f)return null;var e,h;
v||(v=d&&c.typeIdField&&d._field(c.typeIdField));null!=v&&a.some(c.types,function(n){if(n.id===v){if((e=n.domains&&n.domains[f.name])&&"inherited"===e.type)e=Q(f.name,c),h=!0;return!0}return!1},this);!h&&!e&&(e=Q(b,c));return{field:f,domain:e}}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(q,t,b){return b})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(q,t,b,s){var r={ar:1,"ar-ma":1,"ar-sa":1,"ar-tn":1,
cs:1,da:1,de:1,"de-at":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-nz":1,es:1,"es-do":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1};t.load=function(m,k,g){m=b.locale;"zh-hk"===m&&(m="zh-tw");var f=m in r;if(!f){var a=m.split("-");1<a.length&&a[0]in r&&(m=a[0],f=!0)}f?k(["moment/locale/"+m],function(){g(s)}):g(s)}})},"moment/moment":function(){(function(q,t){"object"===
typeof exports&&"undefined"!==typeof module?module.exports=t():"function"===typeof define&&define.amd?define(t):q.moment=t()})(this,function(){function q(){return Lb.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function b(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function r(e,h){var n=[],l;for(l=0;l<e.length;++l)n.push(h(e[l],
l));return n}function m(e,h){return Object.prototype.hasOwnProperty.call(e,h)}function k(e,h){for(var n in h)m(h,n)&&(e[n]=h[n]);m(h,"toString")&&(e.toString=h.toString);m(h,"valueOf")&&(e.valueOf=h.valueOf);return e}function g(e,h,n,l){return Oa(e,h,n,l,!0).utc()}function f(e){null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null});return e._pf}function a(e){if(null==
e._isValid){var h=f(e),n=Mb.call(h.parsedDateParts,function(e){return null!=e});e._isValid=!isNaN(e._d.getTime())&&0>h.overflow&&!h.empty&&!h.invalidMonth&&!h.invalidWeekday&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&n);e._strict&&(e._isValid=e._isValid&&0===h.charsLeftOver&&0===h.unusedTokens.length&&void 0===h.bigHour)}return e._isValid}function c(e){var h=g(NaN);null!=e?k(f(h),e):f(h).userInvalidated=!0;return h}function d(e){return void 0===e}function u(e,h){var n,
l,z;d(h._isAMomentObject)||(e._isAMomentObject=h._isAMomentObject);d(h._i)||(e._i=h._i);d(h._f)||(e._f=h._f);d(h._l)||(e._l=h._l);d(h._strict)||(e._strict=h._strict);d(h._tzm)||(e._tzm=h._tzm);d(h._isUTC)||(e._isUTC=h._isUTC);d(h._offset)||(e._offset=h._offset);d(h._pf)||(e._pf=f(h));d(h._locale)||(e._locale=h._locale);if(0<Hb.length)for(n in Hb)l=Hb[n],z=h[l],d(z)||(e[l]=z);return e}function B(e){u(this,e);this._d=new Date(null!=e._d?e._d.getTime():NaN);!1===Ib&&(Ib=!0,q.updateOffset(this),Ib=!1)}
function x(e){return e instanceof B||null!=e&&null!=e._isAMomentObject}function y(e){return 0>e?Math.ceil(e)||0:Math.floor(e)}function w(e){e=+e;var h=0;0!==e&&isFinite(e)&&(h=y(e));return h}function E(e,h,n){var l=Math.min(e.length,h.length),z=Math.abs(e.length-h.length),F=0,a;for(a=0;a<l;a++)(n&&e[a]!==h[a]||!n&&w(e[a])!==w(h[a]))&&F++;return F+z}function D(e){!1===q.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+e)}function A(e,h){var n=
!0;return k(function(){null!=q.deprecationHandler&&q.deprecationHandler(null,e);n&&(D(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+Error().stack),n=!1);return h.apply(this,arguments)},h)}function H(e,h){null!=q.deprecationHandler&&q.deprecationHandler(e,h);tb[e]||(D(h),tb[e]=!0)}function G(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function I(e,h){var n=k({},e),l;for(l in h)m(h,l)&&(b(e[l])&&b(h[l])?(n[l]={},k(n[l],e[l]),k(n[l],
h[l])):null!=h[l]?n[l]=h[l]:delete n[l]);for(l in e)m(e,l)&&(!m(h,l)&&b(e[l]))&&(n[l]=k({},n[l]));return n}function M(e){null!=e&&this.set(e)}function J(e,h){var n=e.toLowerCase();$a[n]=$a[n+"s"]=$a[h]=e}function S(e){return"string"===typeof e?$a[e]||$a[e.toLowerCase()]:void 0}function L(e){var h={},n,l;for(l in e)m(e,l)&&(n=S(l))&&(h[n]=e[l]);return h}function Q(e){var h=[],n;for(n in e)h.push({unit:n,priority:Ga[n]});h.sort(function(e,h){return e.priority-h.priority});return h}function R(e,h){return function(n){if(null!=
n){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+e](n);q.updateOffset(this,h);return this}return X(this,e)}}function X(e,h){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+h]():NaN}function V(e,h,n){var l=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,h-l.length)).toString().substr(1)+l}function O(e,h,n,l){var z=l;"string"===typeof l&&(z=function(){return this[l]()});e&&(ab[e]=z);h&&(ab[h[0]]=function(){return V(z.apply(this,arguments),h[1],h[2])});n&&(ab[n]=function(){return this.localeData().ordinal(z.apply(this,
arguments),e)})}function U(e){var h=e.match(wb),n,l;n=0;for(l=h.length;n<l;n++)h[n]=ab[h[n]]?ab[h[n]]:h[n].match(/\[[\s\S]/)?h[n].replace(/^\[|\]$/g,""):h[n].replace(/\\/g,"");return function(n){var z="",F;for(F=0;F<l;F++)z+=h[F]instanceof Function?h[F].call(n,e):h[F];return z}}function v(e,h){if(!e.isValid())return e.localeData().invalidDate();h=K(h,e.localeData());mb[h]=mb[h]||U(h);return mb[h](e)}function K(e,h){function n(e){return h.longDateFormat(e)||e}var l=5;for(lb.lastIndex=0;0<=l&&lb.test(e);)e=
e.replace(lb,n),lb.lastIndex=0,l-=1;return e}function C(e,h,n){Nb[e]=G(h)?h:function(e,l){return e&&n?n:h}}function l(h){return e(h.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,h,n,l,z){return h||n||l||z}))}function e(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function h(e,h){var n,l=h;"string"===typeof e&&(e=[e]);"number"===typeof h&&(l=function(e,n){n[h]=w(e)});for(n=0;n<e.length;n++)Qb[e[n]]=l}function n(e,n){h(e,function(e,h,l,z){l._w=l._w||{};n(e,l._w,
l,z)})}function z(e,h){return(new Date(Date.UTC(e,h+1,0))).getUTCDate()}function F(e,h){var n;if(!e.isValid())return e;if("string"===typeof h)if(/^\d+$/.test(h))h=w(h);else if(h=e.localeData().monthsParse(h),"number"!==typeof h)return e;n=Math.min(e.date(),z(e.year(),h));e._d["set"+(e._isUTC?"UTC":"")+"Month"](h,n);return e}function N(e){return null!=e?(F(this,e),q.updateOffset(this,!0),this):X(this,"Month")}function T(){function h(e,n){return n.length-e.length}var n=[],l=[],z=[],F,a;for(F=0;12>F;F++)a=
g([2E3,F]),n.push(this.monthsShort(a,"")),l.push(this.months(a,"")),z.push(this.months(a,"")),z.push(this.monthsShort(a,""));n.sort(h);l.sort(h);z.sort(h);for(F=0;12>F;F++)n[F]=e(n[F]),l[F]=e(l[F]);for(F=0;24>F;F++)z[F]=e(z[F]);this._monthsShortRegex=this._monthsRegex=RegExp("^("+z.join("|")+")","i");this._monthsStrictRegex=RegExp("^("+l.join("|")+")","i");this._monthsShortStrictRegex=RegExp("^("+n.join("|")+")","i")}function W(e){return 0===e%4&&0!==e%100||0===e%400}function ea(e,h,n,l,z,F,a){h=
new Date(e,h,n,l,z,F,a);100>e&&(0<=e&&isFinite(h.getFullYear()))&&h.setFullYear(e);return h}function na(e){var h=new Date(Date.UTC.apply(null,arguments));100>e&&(0<=e&&isFinite(h.getUTCFullYear()))&&h.setUTCFullYear(e);return h}function sa(e,h,n){n=7+h-n;return-((7+na(e,0,n).getUTCDay()-h)%7)+n-1}function Ja(e,h,n,l,z){n=(7+n-l)%7;l=sa(e,l,z);l=1+7*(h-1)+n+l;0>=l?(h=e-1,e=(W(h)?366:365)+l):l>(W(e)?366:365)?(h=e+1,e=l-(W(e)?366:365)):(h=e,e=l);return{year:h,dayOfYear:e}}function Da(e,h,n){var l=sa(e.year(),
h,n),l=Math.floor((e.dayOfYear()-l-1)/7)+1;1>l?(e=e.year()-1,h=l+pa(e,h,n)):l>pa(e.year(),h,n)?(h=l-pa(e.year(),h,n),e=e.year()+1):(e=e.year(),h=l);return{week:h,year:e}}function pa(e,h,n){var l=sa(e,h,n);h=sa(e+1,h,n);return((W(e)?366:365)-l+h)/7}function ka(e,h,n){var l,z;e=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(l=0;7>l;++l)z=g([2E3,1]).day(l),this._minWeekdaysParse[l]=this.weekdaysMin(z,"").toLocaleLowerCase(),
this._shortWeekdaysParse[l]=this.weekdaysShort(z,"").toLocaleLowerCase(),this._weekdaysParse[l]=this.weekdays(z,"").toLocaleLowerCase()}if(n)h="dddd"===h?Ka.call(this._weekdaysParse,e):"ddd"===h?Ka.call(this._shortWeekdaysParse,e):Ka.call(this._minWeekdaysParse,e);else if("dddd"===h){h=Ka.call(this._weekdaysParse,e);if(-1!==h)return h;h=Ka.call(this._shortWeekdaysParse,e);if(-1!==h)return h;h=Ka.call(this._minWeekdaysParse,e)}else if("ddd"===h){h=Ka.call(this._shortWeekdaysParse,e);if(-1!==h)return h;
h=Ka.call(this._weekdaysParse,e);if(-1!==h)return h;h=Ka.call(this._minWeekdaysParse,e)}else{h=Ka.call(this._minWeekdaysParse,e);if(-1!==h)return h;h=Ka.call(this._weekdaysParse,e);if(-1!==h)return h;h=Ka.call(this._shortWeekdaysParse,e)}return-1!==h?h:null}function qa(){function h(e,n){return n.length-e.length}var n=[],l=[],z=[],F=[],a,v,b,N;for(a=0;7>a;a++)v=g([2E3,1]).day(a),b=this.weekdaysMin(v,""),N=this.weekdaysShort(v,""),v=this.weekdays(v,""),n.push(b),l.push(N),z.push(v),F.push(b),F.push(N),
F.push(v);n.sort(h);l.sort(h);z.sort(h);F.sort(h);for(a=0;7>a;a++)l[a]=e(l[a]),z[a]=e(z[a]),F[a]=e(F[a]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=RegExp("^("+F.join("|")+")","i");this._weekdaysStrictRegex=RegExp("^("+z.join("|")+")","i");this._weekdaysShortStrictRegex=RegExp("^("+l.join("|")+")","i");this._weekdaysMinStrictRegex=RegExp("^("+n.join("|")+")","i")}function za(){return this.hours()%12||12}function la(e,h){O(e,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),h)})}function Ia(e,h){return h._meridiemParse}function Ea(e){var h=null;if(!Ha[e]&&"undefined"!==typeof module&&module&&module.exports)try{h=Ob._abbr,require("./locale/"+e),Ca(h)}catch(n){}return Ha[e]}function Ca(e,h){var n;e&&(n=d(h)?oa(e):ta(e,h))&&(Ob=n);return Ob._abbr}function ta(e,h){if(null!==h){var n=Tb;h.abbr=e;null!=Ha[e]?(H("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
n=Ha[e]._config):null!=h.parentLocale&&(null!=Ha[h.parentLocale]?n=Ha[h.parentLocale]._config:H("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/"));Ha[e]=new M(I(n,h));Ca(e);return Ha[e]}delete Ha[e];return null}function oa(e){var h;e&&(e._locale&&e._locale._abbr)&&(e=e._locale._abbr);if(!e)return Ob;if(!t(e)){if(h=Ea(e))return h;e=[e]}a:{h=0;for(var n,l,z,F;h<e.length;){F=(e[h]?e[h].toLowerCase().replace("_","-"):e[h]).split("-");
n=F.length;for(l=(l=e[h+1]?e[h+1].toLowerCase().replace("_","-"):e[h+1])?l.split("-"):null;0<n;){if(z=Ea(F.slice(0,n).join("-"))){e=z;break a}if(l&&l.length>=n&&E(F,l,!0)>=n-1)break;n--}h++}e=null}return e}function Aa(e){var h;if((h=e._a)&&-2===f(e).overflow){h=0>h[fb]||11<h[fb]?fb:1>h[cb]||h[cb]>z(h[Xa],h[fb])?cb:0>h[La]||24<h[La]||24===h[La]&&(0!==h[Ya]||0!==h[gb]||0!==h[zb])?La:0>h[Ya]||59<h[Ya]?Ya:0>h[gb]||59<h[gb]?gb:0>h[zb]||999<h[zb]?zb:-1;if(f(e)._overflowDayOfYear&&(h<Xa||h>cb))h=cb;f(e)._overflowWeeks&&
-1===h&&(h=Yb);f(e)._overflowWeekday&&-1===h&&(h=Zb);f(e).overflow=h}return e}function Na(e){var h,n;h=e._i;var l=$b.exec(h)||ac.exec(h),z,F,a,v;if(l){f(e).iso=!0;h=0;for(n=Pb.length;h<n;h++)if(Pb[h][1].exec(l[1])){F=Pb[h][0];z=!1!==Pb[h][2];break}if(null==F)e._isValid=!1;else{if(l[3]){h=0;for(n=Rb.length;h<n;h++)if(Rb[h][1].exec(l[3])){a=(l[2]||" ")+Rb[h][0];break}if(null==a){e._isValid=!1;return}}if(!z&&null!=a)e._isValid=!1;else{if(l[4])if(bc.exec(l[4]))v="Z";else{e._isValid=!1;return}e._f=F+(a||
"")+(v||"");Ra(e)}}}else e._isValid=!1}function Sa(e){var h=cc.exec(e._i);null!==h?e._d=new Date(+h[1]):(Na(e),!1===e._isValid&&(delete e._isValid,q.createFromInputFallback(e)))}function Ba(e,h,n){return null!=e?e:null!=h?h:n}function Pa(e){var h,n=[],l;if(!e._d){l=new Date(q.now());l=e._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()];if(e._w&&null==e._a[cb]&&null==e._a[fb]){var z,F,a,v,b,N;z=e._w;if(null!=z.GG||null!=z.W||null!=z.E){if(b=1,N=
4,F=Ba(z.GG,e._a[Xa],Da(Z(),1,4).year),a=Ba(z.W,1),v=Ba(z.E,1),1>v||7<v)h=!0}else if(b=e._locale._week.dow,N=e._locale._week.doy,F=Ba(z.gg,e._a[Xa],Da(Z(),b,N).year),a=Ba(z.w,1),null!=z.d){if(v=z.d,0>v||6<v)h=!0}else if(null!=z.e){if(v=z.e+b,0>z.e||6<z.e)h=!0}else v=b;1>a||a>pa(F,b,N)?f(e)._overflowWeeks=!0:null!=h?f(e)._overflowWeekday=!0:(h=Ja(F,a,v,b,N),e._a[Xa]=h.year,e._dayOfYear=h.dayOfYear)}if(e._dayOfYear){h=Ba(e._a[Xa],l[Xa]);if(e._dayOfYear>(W(h)?366:365))f(e)._overflowDayOfYear=!0;h=na(h,
0,e._dayOfYear);e._a[fb]=h.getUTCMonth();e._a[cb]=h.getUTCDate()}for(h=0;3>h&&null==e._a[h];++h)e._a[h]=n[h]=l[h];for(;7>h;h++)e._a[h]=n[h]=null==e._a[h]?2===h?1:0:e._a[h];24===e._a[La]&&(0===e._a[Ya]&&0===e._a[gb]&&0===e._a[zb])&&(e._nextDay=!0,e._a[La]=0);e._d=(e._useUTC?na:ea).apply(null,n);null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);e._nextDay&&(e._a[La]=24)}}function Ra(e){if(e._f===q.ISO_8601)Na(e);else{e._a=[];f(e).empty=!0;var h=""+e._i,n,z,F,a,v,b=h.length,N=0;F=K(e._f,
e._locale).match(wb)||[];for(n=0;n<F.length;n++){a=F[n];if(z=(h.match(!m(Nb,a)?RegExp(l(a)):Nb[a](e._strict,e._locale))||[])[0])v=h.substr(0,h.indexOf(z)),0<v.length&&f(e).unusedInput.push(v),h=h.slice(h.indexOf(z)+z.length),N+=z.length;if(ab[a]){if(z?f(e).empty=!1:f(e).unusedTokens.push(a),v=e,null!=z&&m(Qb,a))Qb[a](z,v._a,v,a)}else e._strict&&!z&&f(e).unusedTokens.push(a)}f(e).charsLeftOver=b-N;0<h.length&&f(e).unusedInput.push(h);12>=e._a[La]&&(!0===f(e).bigHour&&0<e._a[La])&&(f(e).bigHour=void 0);
f(e).parsedDateParts=e._a.slice(0);f(e).meridiem=e._meridiem;h=e._a;n=La;b=e._locale;F=e._a[La];N=e._meridiem;null!=N&&(null!=b.meridiemHour?F=b.meridiemHour(F,N):null!=b.isPM&&((b=b.isPM(N))&&12>F&&(F+=12),!b&&12===F&&(F=0)));h[n]=F;Pa(e);Aa(e)}}function Ua(e){if(!e._d){var h=L(e._i);e._a=r([h.year,h.month,h.day||h.date,h.hour,h.minute,h.second,h.millisecond],function(e){return e&&parseInt(e,10)});Pa(e)}}function Va(e){var h=e._i,n=e._f;e._locale=e._locale||oa(e._l);if(null===h||void 0===n&&""===
h)return c({nullInput:!0});"string"===typeof h&&(e._i=h=e._locale.preparse(h));if(x(h))return new B(Aa(h));if(t(n)){var l,z,F;if(0===e._f.length)f(e).invalidFormat=!0,e._d=new Date(NaN);else{for(h=0;h<e._f.length;h++)if(n=0,l=u({},e),null!=e._useUTC&&(l._useUTC=e._useUTC),l._f=e._f[h],Ra(l),a(l)&&(n+=f(l).charsLeftOver,n+=10*f(l).unusedTokens.length,f(l).score=n,null==F||n<F))F=n,z=l;k(e,z||l)}}else s(h)?e._d=h:n?Ra(e):Wa(e);a(e)||(e._d=null);return e}function Wa(e){var h=e._i;void 0===h?e._d=new Date(q.now()):
s(h)?e._d=new Date(h.valueOf()):"string"===typeof h?Sa(e):t(h)?(e._a=r(h.slice(0),function(e){return parseInt(e,10)}),Pa(e)):"object"===typeof h?Ua(e):"number"===typeof h?e._d=new Date(h):q.createFromInputFallback(e)}function Oa(e,h,n,l,z){var F={};"boolean"===typeof n&&(l=n,n=void 0);var a;if(a=b(e))a:{for(var v in e){a=!1;break a}a=!0}if(a||t(e)&&0===e.length)e=void 0;F._isAMomentObject=!0;F._useUTC=F._isUTC=z;F._l=n;F._i=e;F._f=h;F._strict=l;e=new B(Aa(Va(F)));e._nextDay&&(e.add(1,"d"),e._nextDay=
void 0);return e}function Z(e,h,n,l){return Oa(e,h,n,l,!1)}function ua(e,h){var n,l;1===h.length&&t(h[0])&&(h=h[0]);if(!h.length)return Z();n=h[0];for(l=1;l<h.length;++l)if(!h[l].isValid()||h[l][e](n))n=h[l];return n}function va(e){e=L(e);var h=e.year||0,n=e.quarter||0,l=e.month||0,z=e.week||0,F=e.day||0;this._milliseconds=+(e.millisecond||0)+1E3*(e.second||0)+6E4*(e.minute||0)+36E5*(e.hour||0);this._days=+F+7*z;this._months=+l+3*n+12*h;this._data={};this._locale=oa();this._bubble()}function ca(e){return e instanceof
va}function xa(e,h){O(e,0,0,function(){var e=this.utcOffset(),n="+";0>e&&(e=-e,n="-");return n+V(~~(e/60),2)+h+V(~~e%60,2)})}function Fa(e,h){var n=(h||"").match(e)||[],n=((n[n.length-1]||[])+"").match(dc)||["-",0,0],l=+(60*n[1])+w(n[2]);return"+"===n[0]?l:-l}function ia(e,h){var n,l;return h._isUTC?(n=h.clone(),l=(x(e)||s(e)?e.valueOf():Z(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+l),q.updateOffset(n,!1),n):Z(e).local()}function ga(){return this.isValid()?this._isUTC&&0===this._offset:
!1}function Y(e,h){var n=e,l=null;if(ca(e))n={ms:e._milliseconds,d:e._days,M:e._months};else if("number"===typeof e)n={},h?n[h]=e:n.milliseconds=e;else if(l=ec.exec(e))n="-"===l[1]?-1:1,n={y:0,d:w(l[cb])*n,h:w(l[La])*n,m:w(l[Ya])*n,s:w(l[gb])*n,ms:w(l[zb])*n};else if(l=fc.exec(e))n="-"===l[1]?-1:1,n={y:ba(l[2],n),M:ba(l[3],n),w:ba(l[4],n),d:ba(l[5],n),h:ba(l[6],n),m:ba(l[7],n),s:ba(l[8],n)};else if(null==n)n={};else if("object"===typeof n&&("from"in n||"to"in n))l=Z(n.from),n=Z(n.to),!l.isValid()||
!n.isValid()?l={milliseconds:0,months:0}:(n=ia(n,l),l.isBefore(n)?n=P(l,n):(n=P(n,l),n.milliseconds=-n.milliseconds,n.months=-n.months),l=n),n={},n.ms=l.milliseconds,n.M=l.months;n=new va(n);ca(e)&&m(e,"_locale")&&(n._locale=e._locale);return n}function ba(e,h){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*h}function P(e,h){var n={milliseconds:0,months:0};n.months=h.month()-e.month()+12*(h.year()-e.year());e.clone().add(n.months,"M").isAfter(h)&&--n.months;n.milliseconds=+h-+e.clone().add(n.months,
"M");return n}function ha(e,h){return function(n,l){var z;null!==l&&!isNaN(+l)&&(H(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),z=n,n=l,l=z);z=Y("string"===typeof n?+n:n,l);ja(this,z,e);return this}}function ja(e,h,n,l){var z=h._milliseconds,a=0>h._days?-1*Math.round(-1*h._days):Math.round(h._days);h=0>h._months?-1*Math.round(-1*h._months):Math.round(h._months);if(e.isValid()){l=
null==l?!0:l;z&&e._d.setTime(e._d.valueOf()+z*n);if(a&&(z=X(e,"Date")+a*n,e.isValid()))e._d["set"+(e._isUTC?"UTC":"")+"Date"](z);h&&F(e,X(e,"Month")+h*n);l&&q.updateOffset(e,a||h)}}function ma(e){if(void 0===e)return this._locale._abbr;e=oa(e);null!=e&&(this._locale=e);return this}function da(){return this._locale}function fa(e,h){O(0,[e,e.length],0,h)}function $(e,h,n,l,z){var F;if(null==e)return Da(this,l,z).year;F=pa(e,l,z);h>F&&(h=F);e=Ja(e,h,n,l,z);e=na(e.year,0,e.dayOfYear);this.year(e.getUTCFullYear());
this.month(e.getUTCMonth());this.date(e.getUTCDate());return this}function nb(e,h){h[zb]=w(1E3*("0."+e))}function xb(e){return e}function eb(e,h,n,l){var z=oa();h=g().set(l,h);return z[n](h,e)}function vb(e,h,n){"number"===typeof e&&(h=e,e=void 0);e=e||"";if(null!=h)return eb(e,h,n,"month");var l=[];for(h=0;12>h;h++)l[h]=eb(e,h,n,"month");return l}function bb(e,h,n,l){"boolean"!==typeof e&&(n=h=e,e=!1);"number"===typeof h&&(n=h,h=void 0);h=h||"";var z=oa();e=e?z._week.dow:0;if(null!=n)return eb(h,
(n+e)%7,l,"day");z=[];for(n=0;7>n;n++)z[n]=eb(h,(n+e)%7,l,"day");return z}function yb(e,h,n,l){h=Y(h,n);e._milliseconds+=l*h._milliseconds;e._days+=l*h._days;e._months+=l*h._months;return e._bubble()}function Ta(e){return function(){return this.as(e)}}function Za(e){return function(){return this._data[e]}}function Gb(e,h,n,l,z){return z.relativeTime(h||1,!!n,e,l)}function Qa(){var e=Sb(this._milliseconds)/1E3,h=Sb(this._days),n=Sb(this._months),l,z,F;l=y(e/60);z=y(l/60);e%=60;l%=60;F=y(n/12);var n=
n%12,a=this.asSeconds();return!a?"P0D":(0>a?"-":"")+"P"+(F?F+"Y":"")+(n?n+"M":"")+(h?h+"D":"")+(z||l||e?"T":"")+(z?z+"H":"")+(l?l+"M":"")+(e?e+"S":"")}var Lb,Mb;Mb=Array.prototype.some?Array.prototype.some:function(e){for(var h=Object(this),n=h.length>>>0,l=0;l<n;l++)if(l in h&&e.call(this,h[l],l,h))return!0;return!1};var Hb=q.momentProperties=[],Ib=!1,tb={};q.suppressDeprecationWarnings=!1;q.deprecationHandler=null;var ub;ub=Object.keys?Object.keys:function(e){var h,n=[];for(h in e)m(e,h)&&n.push(h);
return n};var $a={},Ga={},wb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,lb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,mb={},ab={},Ab=/\d/,Ma=/\d\d/,Bb=/\d{3}/,Cb=/\d{4}/,hb=/[+-]?\d{6}/,wa=/\d\d?/,Db=/\d\d\d\d?/,Eb=/\d\d\d\d\d\d?/,ob=/\d{1,3}/,pb=/\d{1,4}/,ib=/[+-]?\d{1,6}/,Jb=/\d+/,jb=/[+-]?\d+/,Kb=/Z|[+-]\d\d:?\d\d/gi,qb=/Z|[+-]\d\d(?::?\d\d)?/gi,Fb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
Nb={},Qb={},Xa=0,fb=1,cb=2,La=3,Ya=4,gb=5,zb=6,Yb=7,Zb=8,Ka;Ka=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var h;for(h=0;h<this.length;++h)if(this[h]===e)return h;return-1};O("M",["MM",2],"Mo",function(){return this.month()+1});O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});O("MMMM",0,0,function(e){return this.localeData().months(this,e)});J("month","M");Ga.month=8;C("M",wa);C("MM",wa,Ma);C("MMM",function(e,h){return h.monthsShortRegex(e)});C("MMMM",function(e,
h){return h.monthsRegex(e)});h(["M","MM"],function(e,h){h[fb]=w(e)-1});h(["MMM","MMMM"],function(e,h,n,l){l=n._locale.monthsParse(e,l,n._strict);null!=l?h[fb]=l:f(n).invalidMonth=e});var Ub=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;O("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e});O(0,["YY",2],0,function(){return this.year()%100});O(0,["YYYY",4],0,"year");O(0,["YYYYY",5],0,"year");O(0,["YYYYYY",6,!0],0,"year");J("year","y");Ga.year=1;C("Y",jb);C("YY",wa,Ma);C("YYYY",pb,Cb);C("YYYYY",ib,hb);
C("YYYYYY",ib,hb);h(["YYYYY","YYYYYY"],Xa);h("YYYY",function(e,h){h[Xa]=2===e.length?q.parseTwoDigitYear(e):w(e)});h("YY",function(e,h){h[Xa]=q.parseTwoDigitYear(e)});h("Y",function(e,h){h[Xa]=parseInt(e,10)});q.parseTwoDigitYear=function(e){return w(e)+(68<w(e)?1900:2E3)};var Vb=R("FullYear",!0);O("w",["ww",2],"wo","week");O("W",["WW",2],"Wo","isoWeek");J("week","w");J("isoWeek","W");Ga.week=5;Ga.isoWeek=5;C("w",wa);C("ww",wa,Ma);C("W",wa);C("WW",wa,Ma);n(["w","ww","W","WW"],function(e,h,n,l){h[l.substr(0,
1)]=w(e)});O("d",0,"do","day");O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});O("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});O("e",0,0,"weekday");O("E",0,0,"isoWeekday");J("day","d");J("weekday","e");J("isoWeekday","E");Ga.day=11;Ga.weekday=11;Ga.isoWeekday=11;C("d",wa);C("e",wa);C("E",wa);C("dd",function(e,h){return h.weekdaysMinRegex(e)});C("ddd",function(e,h){return h.weekdaysShortRegex(e)});
C("dddd",function(e,h){return h.weekdaysRegex(e)});n(["dd","ddd","dddd"],function(e,h,n,l){l=n._locale.weekdaysParse(e,l,n._strict);null!=l?h.d=l:f(n).invalidWeekday=e});n(["d","e","E"],function(e,h,n,l){h[l]=w(e)});O("H",["HH",2],0,"hour");O("h",["hh",2],0,za);O("k",["kk",2],0,function(){return this.hours()||24});O("hmm",0,0,function(){return""+za.apply(this)+V(this.minutes(),2)});O("hmmss",0,0,function(){return""+za.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)});O("Hmm",0,0,function(){return""+
this.hours()+V(this.minutes(),2)});O("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)});la("a",!0);la("A",!1);J("hour","h");Ga.hour=13;C("a",Ia);C("A",Ia);C("H",wa);C("h",wa);C("HH",wa,Ma);C("hh",wa,Ma);C("hmm",Db);C("hmmss",Eb);C("Hmm",Db);C("Hmmss",Eb);h(["H","HH"],La);h(["a","A"],function(e,h,n){n._isPm=n._locale.isPM(e);n._meridiem=e});h(["h","hh"],function(e,h,n){h[La]=w(e);f(n).bigHour=!0});h("hmm",function(e,h,n){var l=e.length-2;h[La]=w(e.substr(0,l));h[Ya]=
w(e.substr(l));f(n).bigHour=!0});h("hmmss",function(e,h,n){var l=e.length-4,z=e.length-2;h[La]=w(e.substr(0,l));h[Ya]=w(e.substr(l,2));h[gb]=w(e.substr(z));f(n).bigHour=!0});h("Hmm",function(e,h,n){n=e.length-2;h[La]=w(e.substr(0,n));h[Ya]=w(e.substr(n))});h("Hmmss",function(e,h,n){n=e.length-4;var l=e.length-2;h[La]=w(e.substr(0,n));h[Ya]=w(e.substr(n,2));h[gb]=w(e.substr(l))});var gc=R("Hours",!0),Tb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",
lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),meridiemParse:/[ap]\.?m?\.?/i},Ha={},Ob,$b=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ac=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
bc=/Z|[+-]\d\d(?::?\d\d)?/,Pb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Rb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],cc=/^\/?Date\((\-?\d+)/i;q.createFromInputFallback=A("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});q.ISO_8601=function(){};var hc=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",
function(){var e=Z.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:c()}),ic=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Z.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:c()});xa("Z",":");xa("ZZ","");C("Z",qb);C("ZZ",qb);h(["Z","ZZ"],function(e,h,n){n._useUTC=!0;n._tzm=Fa(qb,e)});var dc=/([\+\-]|\d\d)/gi;q.updateOffset=function(){};var ec=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,
fc=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Y.fn=va.prototype;var jc=ha(1,"add"),kc=ha(-1,"subtract");q.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";q.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Wb=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});
O(0,["gg",2],0,function(){return this.weekYear()%100});O(0,["GG",2],0,function(){return this.isoWeekYear()%100});fa("gggg","weekYear");fa("ggggg","weekYear");fa("GGGG","isoWeekYear");fa("GGGGG","isoWeekYear");J("weekYear","gg");J("isoWeekYear","GG");Ga.weekYear=1;Ga.isoWeekYear=1;C("G",jb);C("g",jb);C("GG",wa,Ma);C("gg",wa,Ma);C("GGGG",pb,Cb);C("gggg",pb,Cb);C("GGGGG",ib,hb);C("ggggg",ib,hb);n(["gggg","ggggg","GGGG","GGGGG"],function(e,h,n,l){h[l.substr(0,2)]=w(e)});n(["gg","GG"],function(e,h,n,l){h[l]=
q.parseTwoDigitYear(e)});O("Q",0,"Qo","quarter");J("quarter","Q");Ga.quarter=7;C("Q",Ab);h("Q",function(e,h){h[fb]=3*(w(e)-1)});O("D",["DD",2],"Do","date");J("date","D");Ga.date=9;C("D",wa);C("DD",wa,Ma);C("Do",function(e,h){return e?h._ordinalParse:h._ordinalParseLenient});h(["D","DD"],cb);h("Do",function(e,h){h[cb]=w(e.match(wa)[0],10)});var Xb=R("Date",!0);O("DDD",["DDDD",3],"DDDo","dayOfYear");J("dayOfYear","DDD");Ga.dayOfYear=4;C("DDD",ob);C("DDDD",Bb);h(["DDD","DDDD"],function(e,h,n){n._dayOfYear=
w(e)});O("m",["mm",2],0,"minute");J("minute","m");Ga.minute=14;C("m",wa);C("mm",wa,Ma);h(["m","mm"],Ya);var lc=R("Minutes",!1);O("s",["ss",2],0,"second");J("second","s");Ga.second=15;C("s",wa);C("ss",wa,Ma);h(["s","ss"],gb);var mc=R("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)});O(0,["SS",2],0,function(){return~~(this.millisecond()/10)});O(0,["SSS",3],0,"millisecond");O(0,["SSSS",4],0,function(){return 10*this.millisecond()});O(0,["SSSSS",5],0,function(){return 100*this.millisecond()});
O(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});O(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});O(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});O(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});J("millisecond","ms");Ga.millisecond=16;C("S",ob,Ab);C("SS",ob,Ma);C("SSS",ob,Bb);var db;for(db="SSSS";9>=db.length;db+="S")C(db,Jb);for(db="S";9>=db.length;db+="S")h(db,nb);var nc=R("Milliseconds",!1);O("z",0,0,"zoneAbbr");O("zz",0,0,"zoneName");
var aa=B.prototype;aa.add=jc;aa.calendar=function(e,h){var n=e||Z(),l=ia(n,this).startOf("day"),l=q.calendarFormat(this,l)||"sameElse",z=h&&(G(h[l])?h[l].call(this,n):h[l]);return this.format(z||this.localeData().calendar(l,this,Z(n)))};aa.clone=function(){return new B(this)};aa.diff=function(e,h,n){var l;if(!this.isValid())return NaN;e=ia(e,this);if(!e.isValid())return NaN;l=6E4*(e.utcOffset()-this.utcOffset());h=S(h);if("year"===h||"month"===h||"quarter"===h){l=12*(e.year()-this.year())+(e.month()-
this.month());var z=this.clone().add(l,"months"),F;0>e-z?(F=this.clone().add(l-1,"months"),e=(e-z)/(z-F)):(F=this.clone().add(l+1,"months"),e=(e-z)/(F-z));e=-(l+e)||0;"quarter"===h?e/=3:"year"===h&&(e/=12)}else e=this-e,e="second"===h?e/1E3:"minute"===h?e/6E4:"hour"===h?e/36E5:"day"===h?(e-l)/864E5:"week"===h?(e-l)/6048E5:e;return n?e:y(e)};aa.endOf=function(e){e=S(e);if(void 0===e||"millisecond"===e)return this;"date"===e&&(e="day");return this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,
"ms")};aa.format=function(e){e||(e=this.isUtc()?q.defaultFormatUtc:q.defaultFormat);e=v(this,e);return this.localeData().postformat(e)};aa.from=function(e,h){return this.isValid()&&(x(e)&&e.isValid()||Z(e).isValid())?Y({to:this,from:e}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()};aa.fromNow=function(e){return this.from(Z(),e)};aa.to=function(e,h){return this.isValid()&&(x(e)&&e.isValid()||Z(e).isValid())?Y({from:this,to:e}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()};
aa.toNow=function(e){return this.to(Z(),e)};aa.get=function(e){e=S(e);return G(this[e])?this[e]():this};aa.invalidAt=function(){return f(this).overflow};aa.isAfter=function(e,h){var n=x(e)?e:Z(e);if(!this.isValid()||!n.isValid())return!1;h=S(!d(h)?h:"millisecond");return"millisecond"===h?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(h).valueOf()};aa.isBefore=function(e,h){var n=x(e)?e:Z(e);if(!this.isValid()||!n.isValid())return!1;h=S(!d(h)?h:"millisecond");return"millisecond"===h?this.valueOf()<
n.valueOf():this.clone().endOf(h).valueOf()<n.valueOf()};aa.isBetween=function(e,h,n,l){l=l||"()";return("("===l[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===l[1]?this.isBefore(h,n):!this.isAfter(h,n))};aa.isSame=function(e,h){var n=x(e)?e:Z(e);if(!this.isValid()||!n.isValid())return!1;h=S(h||"millisecond");if("millisecond"===h)return this.valueOf()===n.valueOf();n=n.valueOf();return this.clone().startOf(h).valueOf()<=n&&n<=this.clone().endOf(h).valueOf()};aa.isSameOrAfter=function(e,h){return this.isSame(e,
h)||this.isAfter(e,h)};aa.isSameOrBefore=function(e,h){return this.isSame(e,h)||this.isBefore(e,h)};aa.isValid=function(){return a(this)};aa.lang=Wb;aa.locale=ma;aa.localeData=da;aa.max=ic;aa.min=hc;aa.parsingFlags=function(){return k({},f(this))};aa.set=function(e,h){if("object"===typeof e){e=L(e);for(var n=Q(e),l=0;l<n.length;l++)this[n[l].unit](e[n[l].unit])}else if(e=S(e),G(this[e]))return this[e](h);return this};aa.startOf=function(e){e=S(e);switch(e){case "year":this.month(0);case "quarter":case "month":this.date(1);
case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===e&&this.weekday(0);"isoWeek"===e&&this.isoWeekday(1);"quarter"===e&&this.month(3*Math.floor(this.month()/3));return this};aa.subtract=kc;aa.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};aa.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),
hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};aa.toDate=function(){return new Date(this.valueOf())};aa.toISOString=function(){var e=this.clone().utc();return 0<e.year()&&9999>=e.year()?G(Date.prototype.toISOString)?this.toDate().toISOString():v(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):v(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};aa.toJSON=function(){return this.isValid()?this.toISOString():null};aa.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};
aa.unix=function(){return Math.floor(this.valueOf()/1E3)};aa.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};aa.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};aa.year=Vb;aa.isLeapYear=function(){return W(this.year())};aa.weekYear=function(e){return $.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};aa.isoWeekYear=function(e){return $.call(this,e,this.isoWeek(),
this.isoWeekday(),1,4)};aa.quarter=aa.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)};aa.month=N;aa.daysInMonth=function(){return z(this.year(),this.month())};aa.week=aa.weeks=function(e){var h=this.localeData().week(this);return null==e?h:this.add(7*(e-h),"d")};aa.isoWeek=aa.isoWeeks=function(e){var h=Da(this,1,4).week;return null==e?h:this.add(7*(e-h),"d")};aa.weeksInYear=function(){var e=this.localeData()._week;return pa(this.year(),e.dow,e.doy)};
aa.isoWeeksInYear=function(){return pa(this.year(),1,4)};aa.date=Xb;aa.day=aa.days=function(e){if(!this.isValid())return null!=e?this:NaN;var h=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=e){var n=this.localeData();"string"===typeof e&&(isNaN(e)?(e=n.weekdaysParse(e),e="number"===typeof e?e:null):e=parseInt(e,10));return this.add(e-h,"d")}return h};aa.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var h=(this.day()+7-this.localeData()._week.dow)%7;return null==e?h:this.add(e-
h,"d")};aa.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var h=this.localeData();e="string"===typeof e?h.weekdaysParse(e)%7||7:isNaN(e)?null:e;return this.day(this.day()%7?e:e-7)}return this.day()||7};aa.dayOfYear=function(e){var h=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==e?h:this.add(e-h,"d")};aa.hour=aa.hours=gc;aa.minute=aa.minutes=lc;aa.second=aa.seconds=mc;aa.millisecond=aa.milliseconds=nc;aa.utcOffset=function(e,
h){var n=this._offset||0,l;return!this.isValid()?null!=e?this:NaN:null!=e?("string"===typeof e?e=Fa(qb,e):16>Math.abs(e)&&(e*=60),!this._isUTC&&h&&(l=15*-Math.round(this._d.getTimezoneOffset()/15)),this._offset=e,this._isUTC=!0,null!=l&&this.add(l,"m"),n!==e&&(!h||this._changeInProgress?ja(this,Y(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,q.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:15*-Math.round(this._d.getTimezoneOffset()/15)};aa.utc=function(e){return this.utcOffset(0,
e)};aa.local=function(e){this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};aa.parseZone=function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(Fa(Kb,this._i));return this};aa.hasAlignedHourOffset=function(e){if(!this.isValid())return!1;e=e?Z(e).utcOffset():0;return 0===(this.utcOffset()-e)%60};aa.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>
this.clone().month(5).utcOffset()};aa.isLocal=function(){return this.isValid()?!this._isUTC:!1};aa.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};aa.isUtc=ga;aa.isUTC=ga;aa.zoneAbbr=function(){return this._isUTC?"UTC":""};aa.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};aa.dates=A("dates accessor is deprecated. Use date instead.",Xb);aa.months=A("months accessor is deprecated. Use month instead",N);aa.years=A("years accessor is deprecated. Use year instead",
Vb);aa.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,h){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,h),this):-this.utcOffset()});aa.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={};u(e,this);e=Va(e);if(e._a){var h=e._isUTC?g(e._a):Z(e._a);this._isDSTShifted=this.isValid()&&
0<E(e._a,h.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ya=M.prototype;ya.calendar=function(e,h,n){e=this._calendar[e]||this._calendar.sameElse;return G(e)?e.call(h,n):e};ya.longDateFormat=function(e){var h=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(h||!n)return h;this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]};ya.invalidDate=function(){return this._invalidDate};ya.ordinal=function(e){return this._ordinal.replace("%d",
e)};ya.preparse=xb;ya.postformat=xb;ya.relativeTime=function(e,h,n,l){var z=this._relativeTime[n];return G(z)?z(e,h,n,l):z.replace(/%d/i,e)};ya.pastFuture=function(e,h){var n=this._relativeTime[0<e?"future":"past"];return G(n)?n(h):n.replace(/%s/i,h)};ya.set=function(e){var h,n;for(n in e)h=e[n],G(h)?this[n]=h:this["_"+n]=h;this._config=e;this._ordinalParseLenient=RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};ya.months=function(e,h){return t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||
Ub).test(h)?"format":"standalone"][e.month()]};ya.monthsShort=function(e,h){return t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ub.test(h)?"format":"standalone"][e.month()]};ya.monthsParse=function(e,h,n){var l,z;if(this._monthsParseExact){a:{e=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(l=0;12>l;++l)z=g([2E3,l]),this._shortMonthsParse[l]=this.monthsShort(z,"").toLocaleLowerCase(),this._longMonthsParse[l]=
this.months(z,"").toLocaleLowerCase()}if(n)h="MMM"===h?Ka.call(this._shortMonthsParse,e):Ka.call(this._longMonthsParse,e);else if("MMM"===h){h=Ka.call(this._shortMonthsParse,e);if(-1!==h)break a;h=Ka.call(this._longMonthsParse,e)}else{h=Ka.call(this._longMonthsParse,e);if(-1!==h)break a;h=Ka.call(this._shortMonthsParse,e)}h=-1!==h?h:null}return h}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(l=0;12>l;l++)if(z=g([2E3,l]),n&&!this._longMonthsParse[l]&&
(this._longMonthsParse[l]=RegExp("^"+this.months(z,"").replace(".","")+"$","i"),this._shortMonthsParse[l]=RegExp("^"+this.monthsShort(z,"").replace(".","")+"$","i")),!n&&!this._monthsParse[l]&&(z="^"+this.months(z,"")+"|^"+this.monthsShort(z,""),this._monthsParse[l]=RegExp(z.replace(".",""),"i")),n&&"MMMM"===h&&this._longMonthsParse[l].test(e)||n&&"MMM"===h&&this._shortMonthsParse[l].test(e)||!n&&this._monthsParse[l].test(e))return l};ya.monthsRegex=function(e){if(this._monthsParseExact)return m(this,
"_monthsRegex")||T.call(this),e?this._monthsStrictRegex:this._monthsRegex;m(this,"_monthsRegex")||(this._monthsRegex=Fb);return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex};ya.monthsShortRegex=function(e){if(this._monthsParseExact)return m(this,"_monthsRegex")||T.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex;m(this,"_monthsShortRegex")||(this._monthsShortRegex=Fb);return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex};
ya.week=function(e){return Da(e,this._week.dow,this._week.doy).week};ya.firstDayOfYear=function(){return this._week.doy};ya.firstDayOfWeek=function(){return this._week.dow};ya.weekdays=function(e,h){return t(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(h)?"format":"standalone"][e.day()]};ya.weekdaysMin=function(e){return this._weekdaysMin[e.day()]};ya.weekdaysShort=function(e){return this._weekdaysShort[e.day()]};ya.weekdaysParse=function(e,h,n){var l,z;if(this._weekdaysParseExact)return ka.call(this,
e,h,n);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(l=0;7>l;l++)if(z=g([2E3,1]).day(l),n&&!this._fullWeekdaysParse[l]&&(this._fullWeekdaysParse[l]=RegExp("^"+this.weekdays(z,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[l]=RegExp("^"+this.weekdaysShort(z,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[l]=RegExp("^"+this.weekdaysMin(z,"").replace(".",".?")+"$","i")),this._weekdaysParse[l]||(z="^"+
this.weekdays(z,"")+"|^"+this.weekdaysShort(z,"")+"|^"+this.weekdaysMin(z,""),this._weekdaysParse[l]=RegExp(z.replace(".",""),"i")),n&&"dddd"===h&&this._fullWeekdaysParse[l].test(e)||n&&"ddd"===h&&this._shortWeekdaysParse[l].test(e)||n&&"dd"===h&&this._minWeekdaysParse[l].test(e)||!n&&this._weekdaysParse[l].test(e))return l};ya.weekdaysRegex=function(e){if(this._weekdaysParseExact)return m(this,"_weekdaysRegex")||qa.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex;m(this,"_weekdaysRegex")||
(this._weekdaysRegex=Fb);return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex};ya.weekdaysShortRegex=function(e){if(this._weekdaysParseExact)return m(this,"_weekdaysRegex")||qa.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Fb);return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ya.weekdaysMinRegex=function(e){if(this._weekdaysParseExact)return m(this,
"_weekdaysRegex")||qa.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fb);return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ya.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)};ya.meridiem=function(e,h,n){return 11<e?n?"pm":"PM":n?"am":"AM"};Ca("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var h=e%10,h=1===w(e%100/10)?"th":1===h?"st":2===h?"nd":3===h?"rd":"th";
return e+h}});q.lang=A("moment.lang is deprecated. Use moment.locale instead.",Ca);q.langData=A("moment.langData is deprecated. Use moment.localeData instead.",oa);var kb=Math.abs,oc=Ta("ms"),pc=Ta("s"),qc=Ta("m"),rc=Ta("h"),sc=Ta("d"),tc=Ta("w"),uc=Ta("M"),vc=Ta("y"),wc=Za("milliseconds"),xc=Za("seconds"),yc=Za("minutes"),zc=Za("hours"),Ac=Za("days"),Bc=Za("months"),Cc=Za("years"),rb=Math.round,sb={s:45,m:45,h:22,d:26,M:11},Sb=Math.abs,ra=va.prototype;ra.abs=function(){var e=this._data;this._milliseconds=
kb(this._milliseconds);this._days=kb(this._days);this._months=kb(this._months);e.milliseconds=kb(e.milliseconds);e.seconds=kb(e.seconds);e.minutes=kb(e.minutes);e.hours=kb(e.hours);e.months=kb(e.months);e.years=kb(e.years);return this};ra.add=function(e,h){return yb(this,e,h,1)};ra.subtract=function(e,h){return yb(this,e,h,-1)};ra.as=function(e){var h,n=this._milliseconds;e=S(e);if("month"===e||"year"===e)return h=this._days+n/864E5,h=this._months+4800*h/146097,"month"===e?h:h/12;h=this._days+Math.round(146097*
this._months/4800);switch(e){case "week":return h/7+n/6048E5;case "day":return h+n/864E5;case "hour":return 24*h+n/36E5;case "minute":return 1440*h+n/6E4;case "second":return 86400*h+n/1E3;case "millisecond":return Math.floor(864E5*h)+n;default:throw Error("Unknown unit "+e);}};ra.asMilliseconds=oc;ra.asSeconds=pc;ra.asMinutes=qc;ra.asHours=rc;ra.asDays=sc;ra.asWeeks=tc;ra.asMonths=uc;ra.asYears=vc;ra.valueOf=function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*w(this._months/
12)};ra._bubble=function(){var e=this._milliseconds,h=this._days,n=this._months,l=this._data;0<=e&&0<=h&&0<=n||0>=e&&0>=h&&0>=n||(e+=864E5*(0>146097*n/4800+h?Math.floor(146097*n/4800+h):Math.ceil(146097*n/4800+h)),n=h=0);l.milliseconds=e%1E3;e=y(e/1E3);l.seconds=e%60;e=y(e/60);l.minutes=e%60;e=y(e/60);l.hours=e%24;h+=y(e/24);e=y(4800*h/146097);n+=e;h-=0>146097*e/4800?Math.floor(146097*e/4800):Math.ceil(146097*e/4800);e=y(n/12);l.days=h;l.months=n%12;l.years=e;return this};ra.get=function(e){e=S(e);
return this[e+"s"]()};ra.milliseconds=wc;ra.seconds=xc;ra.minutes=yc;ra.hours=zc;ra.days=Ac;ra.weeks=function(){return y(this.days()/7)};ra.months=Bc;ra.years=Cc;ra.humanize=function(e){var h=this.localeData(),n;n=!e;var l=Y(this).abs(),z=rb(l.as("s")),F=rb(l.as("m")),a=rb(l.as("h")),v=rb(l.as("d")),b=rb(l.as("M")),l=rb(l.as("y")),z=z<sb.s&&["s",z]||1>=F&&["m"]||F<sb.m&&["mm",F]||1>=a&&["h"]||a<sb.h&&["hh",a]||1>=v&&["d"]||v<sb.d&&["dd",v]||1>=b&&["M"]||b<sb.M&&["MM",b]||1>=l&&["y"]||["yy",l];z[2]=
n;z[3]=0<+this;z[4]=h;n=Gb.apply(null,z);e&&(n=h.pastFuture(+this,n));return h.postformat(n)};ra.toISOString=Qa;ra.toString=Qa;ra.toJSON=Qa;ra.locale=ma;ra.localeData=da;ra.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qa);ra.lang=Wb;O("X",0,0,"unix");O("x",0,0,"valueOf");C("x",jb);C("X",/[+-]?\d+(\.\d{1,3})?/);h("X",function(e,h,n){n._d=new Date(1E3*parseFloat(e,10))});h("x",function(e,h,n){n._d=new Date(w(e))});q.version="2.14.1";Lb=Z;q.fn=aa;
q.min=function(){var e=[].slice.call(arguments,0);return ua("isBefore",e)};q.max=function(){var e=[].slice.call(arguments,0);return ua("isAfter",e)};q.now=function(){return Date.now?Date.now():+new Date};q.utc=g;q.unix=function(e){return Z(1E3*e)};q.months=function(e,h){return vb(e,h,"months")};q.isDate=s;q.locale=Ca;q.invalid=c;q.duration=Y;q.isMoment=x;q.weekdays=function(e,h,n){return bb(e,h,n,"weekdays")};q.parseZone=function(){return Z.apply(null,arguments).parseZone()};q.localeData=oa;q.isDuration=
ca;q.monthsShort=function(e,h){return vb(e,h,"monthsShort")};q.weekdaysMin=function(e,h,n){return bb(e,h,n,"weekdaysMin")};q.defineLocale=ta;q.updateLocale=function(e,h){if(null!=h){var n;n=Tb;null!=Ha[e]&&(n=Ha[e]._config);h=I(n,h);n=new M(h);n.parentLocale=Ha[e];Ha[e]=n;Ca(e)}else null!=Ha[e]&&(null!=Ha[e].parentLocale?Ha[e]=Ha[e].parentLocale:null!=Ha[e]&&delete Ha[e]);return Ha[e]};q.locales=function(){return ub(Ha)};q.weekdaysShort=function(e,h,n){return bb(e,h,n,"weekdaysShort")};q.normalizeUnits=
S;q.relativeTimeRounding=function(e){return void 0===e?rb:"function"===typeof e?(rb=e,!0):!1};q.relativeTimeThreshold=function(e,h){if(void 0===sb[e])return!1;if(void 0===h)return sb[e];sb[e]=h;return!0};q.calendarFormat=function(e,h){var n=e.diff(h,"days",!0);return-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse"};q.prototype=aa;return q})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(q,t){return function(){function b(b){void 0===
b&&(b=[]);this._elements=b}b.prototype.length=function(){return this._elements.length};b.prototype.get=function(b){return this._elements[b]};b.prototype.toArray=function(){for(var b=[],r=0;r<this.length();r++)b.push(this.get(r));return b};return b}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "),function(q,t,b,s,r,m){var k=0===m.version.indexOf("4.");return function(g){function f(a,b,
d,f,k,m){g.call(this,a);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=b;this._hasZ=d;this._hasM=f;this._cacheId=k;this._partId=m}b(f,g);f.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var d=this._hasZ,f=this._hasM,g=null,g=d&&!f?new r(b[0],b[1],b[2],void 0,this._spRef):f&&d?new r(b[0],b[1],void 0,b[2],this._spRef):d&&f?new r(b[0],b[1],b[2],b[3],this._spRef):new r(b[0],b[1],this._spRef);k?g.cache._arcadeCacheId=this._cacheId.toString()+"-"+
this._partId.toString()+"-"+a.toString():g.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=g}return this._lazyPt[a]};f.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof f?!1:a.getUniqueHash()===this.getUniqueHash()};f.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return f}(s)})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(q,
t){function b(){this.constructor=q}for(var s in t)t.hasOwnProperty(s)&&(q[s]=t[s]);q.prototype=null===t?Object.create(t):(b.prototype=t.prototype,new b)}})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(q,t,b,s,r){return function(m){function k(b,f,a,c,d){m.call(this,b);this._lazyPath=[];this._hasM=this._hasZ=!1;this._hasZ=a;this._hasM=c;this._spRef=f;this._cacheId=d}b(k,m);k.prototype.get=
function(b){if(void 0===this._lazyPath[b]){var f=this._elements[b];if(void 0===f)return;this._lazyPath[b]=new r(f,this._spRef,this._hasZ,this._hasM,this._cacheId,b)}return this._lazyPath[b]};k.prototype.equalityTest=function(b){return b===this?!0:null===b||!1===b instanceof k?!1:b.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()};return k}(s)})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(q,t){return function(){return function(b,
s){this.context=this.definition=null;this.definition=b;this.context=s}}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(q,t){function b(a,b,c,d){void 0!==a.fmin&&(a.min=a.fmin);void 0!==a.fmax&&(a.max=a.fmax);return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function s(a,c,d){if(null!==d.localScope&&void 0!==d.localScope[a.toLowerCase()]){var f=d.localScope[a.toLowerCase()];if("FormulaFunction"===f.type||"any"===f.type)return void 0===
f.signature&&(f.signature={min:"0",max:"*"}),b(f.signature,a,c,d)}return void 0!==d.globalScope[a.toLowerCase()]&&(f=d.globalScope[a.toLowerCase()],"FormulaFunction"===f.type||"any"===f.type)?(void 0===f.signature&&(f.signature={min:"0",max:"*"}),b(f.signature,a,c,d)):-1}function r(a,b){void 0===b&&(b=!0);var c=u(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?u(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==
a.id.type?u(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?r(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=r(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=r(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return u(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return u(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return u(a,"SYNTAX","LEFTNOTVAR");
c=r(a.right,b);if(""!==c)break;c=r(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=r(a.test,b),""!==c))break;if(null!==a.init&&(c=r(a.init,b),""!==c))break;if(null!==a.update&&(c=r(a.update,b),""!==c))break;if(null!==a.body&&(c=r(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=r(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=r(a.consequent,!1),""!==c))break;if(null!==
a.alternate&&(c=r(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var f=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&f.push(a.body[d]);a.body=f;for(d=0;d<a.body.length;d++)if(c=r(a.body[d],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?u(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?u(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):r(a.body,!1);case "ReturnStatement":return null!==a.argument?r(a.argument,b):"";case "UpdateExpression":return"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?u(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):r(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return u(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=r(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return r(a.right,!1);case "ExpressionStatement":return r(a.expression,!1);
case "Identifier":c="";break;case "MemberExpression":c=r(a.object,b);if(""!==c)break;return!0===a.computed?r(a.property,b):"";case "Literal":return"";case "ThisExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return u(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=r(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=r(a.argument,b);break;case "BinaryExpression":c=r(a.left,b);if(""!==c)break;c=r(a.right,
b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=r(a.left,b);if(""!==c)break;c=r(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c=
"";for(d=0;d<a.elements.length&&!(c=r(a.elements[d],b),""!==c);d++);break;case "Array":return u(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(d=0;d<a.properties.length&&!(c="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type&&(f=a.properties[d].key.value,"string"===typeof f||f instanceof String||(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),
""===c&&(c=r(a.properties[d],b)),""!==c);d++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return u(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=r(a.key,b),""!==c))break;c=r(a.value,b)}return c}catch(g){throw g;}}function m(b,d){var f=u(b,"SYNTAX","UNREOGNISED"),g=null,k="";try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type)return u(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");null!==d.localScope?void 0!==d.localScope[b.id.name.toLowerCase()]&&
b.id.name.toLowerCase():void 0!==d.globalScope[b.id.name.toLowerCase()]&&b.id.name.toLowerCase();var y=null==b.init?"":m(b.init,d);if(""!==y)return y;null===d.localScope?d.globalScope[b.id.name.toLowerCase()]={type:"any"}:d.localScope[b.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":g=a(b.id.name.toLowerCase(),b,d);k=c(b,d);if(""!==k)return k;if(null!==d.localScope)return u(b,"SYNTAX","GLOBALFUNCTIONSONLY");g.isnative=!1;d.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",
signature:[g]};return"";case "VariableDeclaration":for(var f="",x=0;x<b.declarations.length&&!(f=m(b.declarations[x],d),""!==f);x++);break;case "IfStatement":f=m(b.test,d);if(""!==f)break;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)return u(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==b.consequent&&(f=m(b.consequent,d),""!==f))break;if(null!==b.alternate&&(f=m(b.alternate,d),""!==f))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(x=
0;x<b.body.length;x++)if(f=m(b.body[x],d),""!==f)return f;return"";case "ReturnStatement":return null!==b.argument?m(b.argument,d):"";case "ForInStatement":if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return u(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return u(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return u(b,"SYNTAX","LEFTNOTVAR");f=m(b.left,d);if(""!==f)break;f=m(b.right,d);if(""!==f)break;f=m(b.body,d);if(""!==f)break;return"";
case "ForStatement":if(null!==b.init&&(f=m(b.init,d),""!==f))break;if(null!==b.test&&(f=m(b.test,d),""!==f))break;if(null!==b.body&&(f=m(b.body,d),""!==f))break;if(null!==b.update&&(f=m(b.update,d),""!==f))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type)return u(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var r=!1;if("MemberExpression"===b.argument.type)return m(b.argument,d);null!==
d.localScope&&void 0!==d.localScope[b.argument.name.toLowerCase()]&&(r=!0);void 0!==d.globalScope[b.argument.name.toLowerCase()]&&(r=!0);return!1===r?"Identifier "+b.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return u(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var q=m(b.right,d);if(""!==q)return q;r=!1;if("MemberExpression"===b.left.type)return q=m(b.left,d),""!==q?q:"";null!==d.localScope&&void 0!==d.localScope[b.left.name.toLowerCase()]&&
(r=!0);void 0!==d.globalScope[b.left.name.toLowerCase()]&&(r=!0);return!1===r?"Identifier "+b.left.name+" has not been declared.":"";case "ExpressionStatement":return m(b.expression,d);case "Identifier":var t=b.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[t])return"";f=void 0!==d.globalScope[t]?"":u(b,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":f=m(b.object,d);if(""!==f)break;return!0===b.computed?m(b.property,d):"";case "Literal":return"";case "ThisExpression":f=
u(b,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==b.callee.type)return u(b,"SYNTAX","ONLYNODESSUPPORTED");f="";for(x=0;x<b.arguments.length;x++)if(f=m(b.arguments[x],d),""!==f)return f;var B=s(b.callee.name,b.arguments,d);-1===B&&(f=u(b,"SYNTAX","NOTFOUND"));-2===B&&(f=u(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":f=m(b.argument,d);break;case "BinaryExpression":f=m(b.left,d);if(""!==f)break;f=m(b.right,d);if(""!==f)break;return"";case "LogicalExpression":f=
m(b.left,d);if(""!==f)break;if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)return u(b.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");f=m(b.right,d);if(""!==f)break;return"AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type?u(b.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return u(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":f="";for(x=0;x<b.elements.length&&!(f=m(b.elements[x],d),""!==f);x++);break;case "ObjectExpression":f=
"";for(x=0;x<b.properties.length;x++){f="";if(null!==b.properties[x].key&&("Literal"!==b.properties[x].key.type&&"Identifier"!==b.properties[x].key.type&&(f=u(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[x].key.type)){var Q=b.properties[x].key.value;"string"===typeof Q||Q instanceof String||(f=u(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===f&&(f=m(b.properties[x],d));if(""!==f)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return u(b,"SYNTAX",
"ONLYLITERAL");if("Identifier"!==b.key.type&&(f=m(b.key,d),""!==f))break;f=m(b.value,d);break;case "Array":return u(b,"SYNTAX","NOTSUPPORTED")}return f}catch(R){throw R;}}function k(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?k(a.init,b):c;case "FunctionDeclaration":return k(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(k(a.declarations[d],b))return!0;return c;case "IfStatement":return k(a.test,b)||null!==a.consequent&&k(a.consequent,
b)||null!==a.alternate&&k(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(k(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?k(a.argument,b):c;case "UpdateExpression":return(c=k(a.right,b))?c:k(a.left,b);case "AssignmentExpression":return k(a.right,b);case "ExpressionStatement":return k(a.expression,b);case "ForInStatement":return(c=k(a.left,b))||(c=k(a.right,b))?c:c=k(a.body,b);case "ForStatement":if(null!==a.init&&
(c=k(a.init,b))||null!==a.test&&(c=k(a.test,b))||null!==a.body&&(c=k(a.body,b)))return c;null!==a.update&&(c=k(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":if(c=k(a.object,b))return c;!0===a.computed&&(c=k(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)k(a.arguments[d],
b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)k(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return k(a.argument,b);case "BinaryExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "LogicalExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)k(a.properties[d],b)&&(c=!0);return c;case "Property":return c=k(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(f){throw f;
}}function g(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?g(a.init,b):c;case "FunctionDeclaration":return g(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(g(a.declarations[d],b))return!0;return c;case "IfStatement":return g(a.test,b)||null!==a.consequent&&g(a.consequent,b)||null!==a.alternate&&g(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(g(a.body[d],b))return!0;return c;
case "ReturnStatement":return null!==a.argument?g(a.argument,b):c;case "UpdateExpression":return g(a.argument,b);case "AssignmentExpression":return g(a.left,b)?!0:g(a.right,b);case "ExpressionStatement":return g(a.expression,b);case "ForInStatement":return(c=g(a.left,b))||(c=g(a.right,b))?c:c=g(a.body,b);case "ForStatement":if(null!==a.init&&(c=g(a.init,b))||null!==a.test&&(c=g(a.test,b))||null!==a.body&&(c=g(a.body,b)))return c;null!==a.update&&(c=g(a.update,b));return c;case "BreakStatement":return c;
case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=g(a.object,b))return c;!0===a.computed&&(c=g(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(d=0;d<a.arguments.length;d++)g(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)g(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return g(a.argument,
b);case "BinaryExpression":return(c=g(a.left,b))?c:c=g(a.right,b);case "LogicalExpression":return(c=g(a.left,b))?c:c=g(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(d=0;d<a.properties.length;d++)g(a.properties[d],b)&&(c=!0);return c;case "Property":return c=g(a.value,b);case "Array":return c;default:return c}}catch(f){throw f;}}function f(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?f(a.init,b):c;case "FunctionDeclaration":return f(a.body,
b);case "VariableDeclaration":for(var g=0;g<a.declarations.length;g++)d=f(a.declarations[g],b),c=c.concat(d);return c;case "ForInStatement":return d=f(a.left,b),c=c.concat(d),d=f(a.right,b),c=c.concat(d),d=f(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=f(a.init,b),c=c.concat(d)),null!==a.test&&(d=f(a.test,b),c=c.concat(d)),null!==a.body&&(d=f(a.body,b),c=c.concat(d)),null!==a.update&&(d=f(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=f(a.test,b),c=c.concat(d),null!==
a.consequent&&(d=f(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=f(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(g=0;g<a.body.length;g++)d=f(a.body[g],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?f(a.argument,b):c;case "UpdateExpression":return f(a.argument,b);case "AssignmentExpression":return c=f(a.left,b),c=c.concat(f(a.right,b));case "ExpressionStatement":return f(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;
case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(u){}return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(g=0;g<a.arguments.length;g++)d=f(a.arguments[g],
b),c=c.concat(d);return c;case "ArrayExpression":for(g=0;g<a.elements.length;g++)d=f(a.elements[g],b),c=c.concat(d);return c;case "UnaryExpression":return f(a.argument,b);case "ObjectExpression":for(g=0;g<a.properties.length;g++)d=f(a.properties[g],b),c=c.concat(d);return c;case "Property":return f(a.value,b);case "BinaryExpression":return d=f(a.left,b),c=c.concat(d),d=f(a.right,b),c=c.concat(d);case "LogicalExpression":return d=f(a.left,b),c=c.concat(d),d=f(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;
case "Array":return c;default:return c}}catch(k){throw k;}}function a(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,"return":"any",params:c}}function c(a,b){for(var c={globalScope:b.globalScope,localScope:{}},d=0;d<a.params.length;d++)c.localScope[a.params[d].name.toLowerCase()]={type:"any"};return m(a.body,c)}function d(a,b,c,d){var f={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};f.infinity={type:"any"};f.textformatting=
{type:"any"};f.pi={type:"any"};for(var g in b)if("simple"!==d||"simple"===d&&"a"===b[g].av)f[g]={type:"FormulaFunction",signature:b[g]};for(b=0;b<c.length;b++)g=c[b],f[g.name]={type:"FormulaFunction",signature:g};for(g in a)f[g]=a[g],f[g].type="any";return f}function u(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";
break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";
break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=
" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+=
"Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument.";break}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":return"";case "ConditionalExpression":d+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=
" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(f){throw f;}return d}function B(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:u(a,b,c)}}function x(a,b,c,d,f){b={globalScope:b.globalScope,localScope:{}};for(f=0;f<a.params.length;f++)b.localScope[a.params[f].name.toLowerCase()]={type:"any"};y(a.body,b,c,d,!1)}function y(b,c,d,f,g){void 0===
g&&(g=!0);if(null===b)throw Error("Unnexpexted Expression Syntax");u(b,"SYNTAX","UNREOGNISED");var k=null;try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type){f.push(B(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==b.id.type?f.push(B(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==c.localScope?void 0!==c.localScope[b.id.name.toLowerCase()]&&b.id.name.toLowerCase():void 0!==c.globalScope[b.id.name.toLowerCase()]&&b.id.name.toLowerCase(),
null===c.localScope?c.globalScope[b.id.name.toLowerCase()]={type:"any"}:c.localScope[b.id.name.toLowerCase()]={type:"any"});null===b.init?"":y(b.init,c,d,f,g);break;case "FunctionDeclaration":!1===g&&f.push(B(b,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==b.id.type&&f.push(B(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));k=a("",b,c);x(b,c,d,f,g);null!==c.localScope&&f.push(B(b,"SYNTAX","GLOBALFUNCTIONSONLY"));k.isnative=!1;"Identifier"===b.id.type&&(c.globalScope[b.id.name.toLowerCase()]={type:"FormulaFunction",
signature:[k]});break;case "VariableDeclaration":for(var m=0;m<b.declarations.length;m++)y(b.declarations[m],c,d,f,g);break;case "IfStatement":null!==b.test&&(y(b.test,c,d,f,g),("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)&&f.push(B(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==b.consequent&&y(b.consequent,c,d,f,g);null!==b.alternate&&y(b.alternate,c,d,f,g);break;case "EmptyStatement":break;case "BlockStatement":if(null!==b.body)for(m=0;m<b.body.length;m++)y(b.body[m],
c,d,f,g);break;case "ReturnStatement":null!==b.argument&&y(b.argument,c,d,f,g);break;case "ForInStatement":"VariableDeclaration"===b.left.type?(1<b.left.declarations.length&&f.push(B(b,"SYNTAX","ONLY1VAR")),null!==b.left.declarations[0].init&&f.push(B(b,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==b.left.type&&f.push(B(b,"SYNTAX","LEFTNOTVAR"));y(b.left,c,d,f,g);y(b.right,c,d,f,g);y(b.body,c,d,f,g);break;case "ForStatement":null!==b.init&&y(b.init,c,d,f,g);null!==b.test&&y(b.test,c,d,f,g);null!==
b.body&&y(b.body,c,d,f,g);null!==b.update&&y(b.update,c,d,f,g);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type?f.push(B(b,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===b.argument.type&&(k=!1,!1===d&&(null!==c.localScope&&void 0!==c.localScope[b.argument.name.toLowerCase()]&&(k=!0),void 0!==c.globalScope[b.argument.name.toLowerCase()]&&(k=!0),!1===k&&f.push({line:null===b?0:b.loc.start.line,
character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."}))),"MemberExpression"===b.argument.type&&y(b.argument,c,d,f,g));break;case "AssignmentExpression":"Identifier"!==b.left.type&&"MemberExpression"!==b.left.type&&f.push(B(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:f.push(B(b,"SYNTAX","OPERATORNOTRECOGNISED"))}y(b.right,c,d,f,g);k=!1;"Identifier"===
b.left.type&&(null!==c.localScope&&void 0!==c.localScope[b.left.name.toLowerCase()]&&(k=!0),void 0!==c.globalScope[b.left.name.toLowerCase()]&&(k=!0),!1===d&&!1===k&&f.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."}));"MemberExpression"===b.left.type&&y(b.left,c,d,f,g);break;case "ExpressionStatement":y(b.expression,c,d,f,g);break;case "Identifier":var r=b.name.toLowerCase();if(null!==c.localScope&&void 0!==
c.localScope[r])break;if(void 0!==c.globalScope[r])break;else!1===d&&f.push(B(b,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":y(b.object,c,d,f,g);!0===b.computed&&y(b.property,c,d,f,g);break;case "Literal":return"";case "ThisExpression":f.push(B(b,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==b.callee.type&&f.push(B(b,"SYNTAX","ONLYNODESSUPPORTED"));for(m=0;m<b.arguments.length;m++)y(b.arguments[m],c,d,f,g);var q=s(b.callee.name,b.arguments,c);!1===d&&-1===q&&
f.push(B(b,"SYNTAX","NOTFOUND"));-2===q&&f.push(B(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":y(b.argument,c,d,f,g);break;case "BinaryExpression":y(b.left,c,d,f,g);y(b.right,c,d,f,g);switch(b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:f.push(B(b,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(b.operator){case "\x26\x26":case "||":break;default:f.push(B(b,
"SYNTAX","OPERATORNOTRECOGNISED"))}y(b.left,c,d,f,g);("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)&&f.push(B(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));y(b.right,c,d,f,g);("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)&&f.push(B(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(B(b,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(m=0;m<b.elements.length;m++)y(b.elements[m],c,d,f,g);break;
case "Array":f.push(B(b,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(m=0;m<b.properties.length;m++)y(b.properties[m],c,d,f,g);break;case "Property":"Literal"!==b.key.type&&"Identifier"!==b.key.type&&f.push(B(b,"SYNTAX","ONLYLITERAL"));"Literal"===b.key.type&&y(b.key,c,d,f,g);y(b.value,c,d,f,g);break;default:f.push(B(b,"SYNTAX","UNRECOGNISED"))}}catch(t){f.push({line:null==b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Unnexpected Syntax"})}}t.functionDecls={concatenate:{min:"0",
max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",
max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",
max:"1",av:"a"},maplayer:{min:"2",max:"3",av:"f"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},featurelayer:{min:"1",max:"3",av:"f"},featurecollection:{min:"1",max:"1",av:"f"},buffer:{min:"2",max:"4",av:"f"},area:{min:"1",max:"2",av:"f"},sumarea:{min:"1",max:"2",av:"f"},length:{min:"1",
max:"2",av:"f"},sumlength:{min:"1",max:"2",av:"f"},count:{min:"0",max:"*",av:"a"},filter:{min:"2",max:"2",av:"f"},envelopeintersects:{min:"2",max:"2",av:"f"},intersects:{min:"2",max:"2",av:"f"},contains:{min:"2",max:"2",av:"f"},overlaps:{min:"2",max:"2",av:"f"},within:{min:"2",max:"2",av:"f"},touches:{min:"2",max:"2",av:"f"},crosses:{min:"2",max:"2",av:"f"},union:{min:"1",max:"2",av:"f",fmin:1},difference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},intersection:{min:"2",max:"2",av:"f",fmin:2,fmax:3},symmetricdifference:{min:"2",
max:"2",av:"f",fmin:2,fmax:3},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",
av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},addfield:{min:"3",max:"3",av:"f"},removefield:{min:"2",max:"2",av:"f"},aggregate:{min:"3",max:"3",av:"f"},dissolve:{min:"2",max:"3",av:"f"},changeshape:{min:"2",max:"4",av:"f"},first:{min:"1",
max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},orderby:{min:"2",max:"2",av:"f"},"boolean":{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},servicearea:{min:"2",max:"*",av:"f"},equals:{min:"2",max:"2",av:"a"},"typeof":{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},centroid:{min:"1",max:"1",av:"f"},multiparttosinglepart:{min:"1",max:"1",av:"f"}};t.checkFunctionSignature=
b;t.findFunction=s;t.validateLanguageNode=r;t.testValidityOfExpression=m;t.referencesMemberImpl=k;t.referencesMember=function(a,b){return!0===k(a.body[0].body,b)?!0:!1};t.referencesFunctionImpl=g;t.referencesFunction=function(a,b){return!0===g(a.body[0].body,b)?!0:!1};t.findFieldLiteralsImpl=f;t.findFieldLiterals=function(a,b){return f(a.body[0].body,b)};t.extractFunctionDeclaration=a;t.validateFunction=c;t.constructGlobalScope=d;t.validateScript=function(a,b,c){void 0===c&&(c="full");b={globalScope:d(b.vars,
t.functionDecls,b.customFunctions,c),localScope:null};return m(a.body[0].body,b)};t.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":r(a.body[0].body)};t.nodeErrorMessage=u;t.makeError=B;t.extractAllIssuesInFunction=x;t.extractAllIssues=y;t.checkScript=function(a,b,c,f){void 0===f&&(f="full");var g=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};
b={globalScope:d(b.vars,t.functionDecls,b.customFunctions,f),localScope:null};try{y(a.body[0].body,b,c,g)}catch(u){}return g}})},"esri/arcade/Dictionary":function(){define(["require","exports","./languageUtils","../geometry/Geometry","./ImmutableArray"],function(q,t,b,s,r){return function(){function m(b){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=b instanceof m?b.attributes:void 0===b?{}:null===b?{}:b}m.prototype.field=function(b){var g=b.toLowerCase();b=this.attributes[b];
if(void 0!==b)return b;for(var f in this.attributes)if(f.toLowerCase()===g)return this.attributes[f];throw Error("Field not Found");};m.prototype.setField=function(b,g){if(this.immutable)throw Error("Dictionary is Immutable");var f=b.toLowerCase();if(void 0===this.attributes[b])for(var a in this.attributes)if(a.toLowerCase()===f){this.attributes[a]=g;return}this.attributes[b]=g};m.prototype.hasField=function(b){var g=b.toLowerCase();if(void 0!==this.attributes[b])return!0;for(var f in this.attributes)if(f.toLowerCase()===
g)return!0;return!1};m.prototype.keys=function(){var b=[],g;for(g in this.attributes)b.push(g);return b=b.sort()};m.prototype.castToText=function(){var k="",g;for(g in this.attributes){""!==k&&(k+=",");var f=this.attributes[g];null!=f&&(b.isBoolean(f)||b.isNumber(f)||b.isString(f)?k+=JSON.stringify(g)+":"+JSON.stringify(f):f instanceof s?k+=JSON.stringify(g)+":"+b.toStringExplicit(f):f instanceof r?k+=JSON.stringify(g)+":"+b.toStringExplicit(f):f instanceof Array?k+=JSON.stringify(g)+":"+b.toStringExplicit(f):
f instanceof Date?k+=JSON.stringify(g)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(k+=JSON.stringify(g)+":"+f.castToText()))}return"{"+k+"}"};return m}()})},"esri/arcade/Feature":function(){define("require exports ../geometry/Geometry ../graphic ../geometry/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "),function(q,t,b,s,r,m,k,g,f){return function(){function a(c,d,f){this._layer=this.attributes=this.geometry=null;this.immutable=
!0;c instanceof a?(this.attributes=c.attributes,this.geometry=c.geometry,c._layer&&(this._layer=c._layer)):c instanceof s?(this.geometry=c.geometry,this.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes,c._layer&&(this._layer=c._layer)):c instanceof m?(this.attributes=c.field("attributes"),null!==this.attributes&&(this.attributes=this.attributes instanceof m?this.attributes.attributes:null),this.geometry=c.field("geometry"),null!==this.geometry&&(this.geometry instanceof m?this.geometry=
a.parseGeometryFromDictionary(this.geometry):this.geometry instanceof b||(this.geometry=null))):(d instanceof b||null===d?(this.geometry=d,this.attributes=void 0===c?{}:null===c?{}:c):"string"===typeof c?(c=JSON.parse(c),null!==c.geometry&&void 0!==c.geometry&&(this.geometry=r.fromJson(c.geometry)),this.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes):(void 0===c?this.attributes={}:null===c&&(this.attributes={}),this.geometry=null),void 0!==f&&(this._layer=f))}a.prototype.castToText=
function(){var a="",d;for(d in this.attributes){""!==a&&(a+=",");var f=this.attributes[d];null!=f&&(k.isBoolean(f)||k.isNumber(f)||k.isString(f)?a+=JSON.stringify(d)+":"+JSON.stringify(f):f instanceof b?a+=JSON.stringify(d)+":"+k.toStringExplicit(f):f instanceof g?a+=JSON.stringify(d)+":"+k.toStringExplicit(f):f instanceof Array?a+=JSON.stringify(d)+":"+k.toStringExplicit(f):f instanceof Date?a+=JSON.stringify(d)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(a+=JSON.stringify(d)+
":"+f.castToText()))}return'{"geometry":'+(null===this.geometry?"null":k.toStringExplicit(this.geometry))+',"attributes":'+a+"}"};a.prototype._fixDateFields=function(a){for(var b=0;b<a.length;b++){var f=this.attributes[a[b]];if(null!==f)if(void 0===f)for(var g in this.attributes){if(g.toLowerCase()===a[b]){f=this.attributes[g];null!==f&&!(f instanceof Date)&&(this.attributes[g]=new Date(f));break}}else f instanceof Date||(this.attributes[a[b]]=new Date(f))}};a.prototype.field=function(a){var b=a.toLowerCase();
a=this.attributes[a];if(void 0!==a)return a;for(var f in this.attributes)if(f.toLowerCase()===b)return this.attributes[f];throw Error("Field not Found");};a.prototype._field=function(a){var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var f in this.attributes)if(f.toLowerCase()===b)return this.attributes[f];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===k.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");
var f=a.toLowerCase();if(void 0===this.attributes[a])for(var g in this.attributes)if(g.toLowerCase()===f){this.attributes[g]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var f in this.attributes)if(f.toLowerCase()===b)return!0;return!1};a.prototype.keys=function(){var a=[],b;for(b in this.attributes)a.push(b);return a=a.sort()};a.fromFeature=function(b){return new a(b)};a.parseGeometryFromDictionary=function(b){b=
a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return r.fromJson(b)};a.fixPathArrays=function(a,b,f){var k=[];if(a instanceof Array)for(var m=0;m<a.length;m++)k.push(this.fixPointArrays(a[m],
b,f));else if(a instanceof g)for(m=0;m<a.length();m++)k.push(this.fixPointArrays(a.get(m),b,f));return k};a.fixPointArrays=function(a,b,u){var k=[];if(a instanceof Array)for(var m=0;m<a.length;m++){var y=a[m];y instanceof f?b&&u?k.push([y.x,y.y,y.z,y.m]):b?k.push([y.x,y.y,y.z]):u?k.push([y.x,y.y,y.m]):k.push([y.x,y.y]):k.push(y)}else if(a instanceof g)for(m=0;m<a.length();m++)y=a.get(m),y instanceof f?b&&u?k.push([y.x,y.y,y.z,y.m]):b?k.push([y.x,y.y,y.z]):u?k.push([y.x,y.y,y.m]):k.push([y.x,y.y]):
k.push(y);return k};a.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var f={},g;for(g in b.attributes){var k=b.attributes[g];k instanceof m&&(k=a.convertDictionaryToJson(k));d?f[g.toLowerCase()]=k:f[g]=k}return f};a.parseAttributesFromDictionary=function(a){var b={},f;for(f in a.attributes){var g=a.attributes[f];if(k.isSimpleType(g))b[f]=g;else throw Error("Illegal Argument");}return b};a.fromJson=function(b){var d=null;null!==b.geometry&&void 0!==b.geometry&&(d=r.fromJson(b.geometry));
var f={};if(null!==b.attributes&&void 0!==b.attributes)for(var g in b.attributes){var m=b.attributes[g];if(k.isString(m)||k.isNumber(m)||k.isBoolean(m)||k.isDate(m))f[g]=m;else throw Error("Illegal Argument");}return new a(f,d)};a.prototype.domainValueLookup=function(a,b,f){if(null===this._layer||!this._layer.fields)return null;f=k.getDomain(a,this._layer,this,f);if(void 0===b)try{b=this.field(a)}catch(g){return null}return k.getDomainValue(f,b)};a.prototype.domainCodeLookup=function(a,b,f){if(null===
this._layer||!this._layer.fields)return null;a=k.getDomain(a,this._layer,this,f);return k.getDomainCode(a,b)};return a}()})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(q,t,b,s){function r(b){return null===b?b:isNaN(b.getTime())?null:b}t.registerFunctions=function(m,k){m.today=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};m.now=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,
0,0);return new Date})};m.timestamp=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};m.toutc=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};m.tolocal=
function(g,f){return k(g,f,function(a,c,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?null:b.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};m.day=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getDate()})};m.month=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getMonth()})};m.year=function(b,f){return k(b,f,function(a,
b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getFullYear()})};m.hour=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getHours()})};m.second=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getSeconds()})};m.millisecond=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};m.minute=function(b,f){return k(b,f,function(a,
b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getMinutes()})};m.weekday=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,1,1);a=s.toDate(d[0]);return null===a?NaN:a.getDay()})};m.date=function(g,f){return k(g,f,function(a,c,d){s.pcCheck(d,0,7);if(3===d.length)return r(new Date(s.toNumber(d[0]),s.toNumber(d[1]),s.toNumber(d[2]),0,0,0,0));if(4===d.length)return r(new Date(s.toNumber(d[0]),s.toNumber(d[1]),s.toNumber(d[2]),s.toNumber(d[3]),0,0,0));if(5===d.length)return r(new Date(s.toNumber(d[0]),
s.toNumber(d[1]),s.toNumber(d[2]),s.toNumber(d[3]),s.toNumber(d[4]),0,0));if(6===d.length)return r(new Date(s.toNumber(d[0]),s.toNumber(d[1]),s.toNumber(d[2]),s.toNumber(d[3]),s.toNumber(d[4]),s.toNumber(d[5]),0));if(7===d.length)return r(new Date(s.toNumber(d[0]),s.toNumber(d[1]),s.toNumber(d[2]),s.toNumber(d[3]),s.toNumber(d[4]),s.toNumber(d[5]),s.toNumber(d[6])));if(2===d.length){a=s.toString(d[1]);if(""===a)return null;d=b(s.toString(d[0]),a,!0);return!0===d.isValid()?d.toDate():null}if(1===d.length){if(s.isString(d[0])&&
""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=s.toNumber(d[0]);return!1===isNaN(a)?r(new Date(a)):s.toDate(d[0])}if(0===d.length)return new Date})};m.datediff=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,2,3);a=s.toDateM(d[0]);b=s.toDateM(d[1]);if(null===a||null===b)return NaN;switch(s.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===
d[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};m.dateadd=function(b,f){return k(b,f,function(a,b,d){s.pcCheck(d,2,3);a=s.toDateM(d[0]);if(null===a)return null;b="milliseconds";switch(s.toString(d[2]).toLowerCase()){case "days":case "day":case "d":b=
"days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(s.toNumber(d[1]),b);return a.toDate()})}}})},"esri/arcade/functions/string":function(){define(["require","exports","../languageUtils","../Feature"],
function(q,t,b,s){t.registerFunctions=function(r,m){r.trim=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,1,1);return b.toString(c[0]).trim()})};r.upper=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,1,1);return b.toString(c[0]).toUpperCase()})};r.proper=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,1,2);f=1;2===c.length&&"firstword"===b.toString(c[1]).toLowerCase()&&(f=2);a=/\s/;c=b.toString(c[0]);for(var d="",g=!0,k=0;k<c.length;k++){var m=c[k];a.test(m)?1===f&&(g=!0):m.toUpperCase()!==
m.toLowerCase()&&(g?(m=m.toUpperCase(),g=!1):m=m.toLowerCase());d+=m}return d})};r.lower=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,1,1);return b.toString(c[0]).toLowerCase()})};r.guid=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,0,1);if(0<c.length)switch(b.toString(c[0]).toLowerCase()){case "digits":return b.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return b.generateUUID();case "digits-hyphen-parentheses":return"("+b.generateUUID()+
")"}return"{"+b.generateUUID()+"}"})};r.mid=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,2,3);f=b.toNumber(c[1]);if(isNaN(f))return"";0>f&&(f=0);if(2===c.length)return b.toString(c[0]).substr(f);a=b.toNumber(c[2]);if(isNaN(a))return"";0>a&&(a=0);return b.toString(c[0]).substr(f,a)})};r.find=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,2,3);f=0;if(2<c.length){f=b.toNumber(b.defaultUndefined(c[2],0));if(isNaN(f))return-1;0>f&&(f=0)}return b.toString(c[1]).indexOf(b.toString(c[0]),
f)})};r.left=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,2,2);f=b.toNumber(c[1]);if(isNaN(f))return"";0>f&&(f=0);return b.toString(c[0]).substr(0,f)})};r.right=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,2,2);f=b.toNumber(c[1]);if(isNaN(f))return"";0>f&&(f=0);return b.toString(c[0]).substr(-1*f,f)})};r.split=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,2,4);f=b.toNumber(b.defaultUndefined(c[2],-1));-1===f||null===f?f=b.toString(c[0]).split(b.toString(c[1])):(isNaN(f)&&
(f=-1),-1>f&&(f=-1),f=b.toString(c[0]).split(b.toString(c[1]),f));c=b.defaultUndefined(c[3],!1);if(!1===b.isBoolean(c))throw Error("Invalid Parameter");if(!1===c)return f;c=[];for(a=0;a<f.length;a++)""!==f[a]&&void 0!==f[a]&&c.push(f[a]);return c})};r.text=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,1,2);return b.toStringExplicit(c[0],c[1])})};r.concatenate=function(k,g){return m(k,g,function(f,a,c){f=[];if(1>c.length)return"";if(b.isArray(c[0])){a=b.defaultUndefined(c[2],"");for(var d=
0;d<c[0].length;d++)f[d]=b.toStringExplicit(c[0][d],a);return 1<c.length?f.join(c[1]):f.join("")}if(b.isImmutableArray(c[0])){a=b.defaultUndefined(c[2],"");for(d=0;d<c[0].length();d++)f[d]=b.toStringExplicit(c[0].get(d),a);return 1<c.length?f.join(c[1]):f.join("")}for(d=0;d<c.length;d++)f[d]=b.toStringExplicit(c[d]);return f.join("")})};r.reverse=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,1,1);if(b.isArray(c[0]))return f=c[0].slice(0),f.reverse(),f;if(b.isImmutableArray(c[0]))return f=
c[0].toArray().slice(0),f.reverse(),f;throw Error("Invalid Parameter");})};r.replace=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,3,4);f=b.toString(c[0]);a=b.toString(c[1]);var d=b.toString(c[2]);return(4===c.length?b.toBoolean(c[3]):1)?b.multiReplace(f,a,d):f.replace(a,d)})};r.domainname=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,2,4);if(c[0]instanceof s)return c[0].domainValueLookup(b.toString(c[1]),c[2],void 0===c[3]?void 0:b.toNumber(c[3]));throw Error("Invalid Parameter");
})};r.domaincode=function(k,g){return m(k,g,function(f,a,c){b.pcCheck(c,3,4);if(c[0]instanceof s)return c[0].domainCodeLookup(b.toString(c[1]),c[2],void 0===c[3]?void 0:b.toNumber(c[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],function(q,t,b,s){function r(b,k,g){if("undefined"===typeof g||0===+g)return Math[b](k);k=+k;g=+g;if(isNaN(k)||!("number"===typeof g&&0===g%1))return NaN;k=k.toString().split("e");
k=Math[b](+(k[0]+"e"+(k[1]?+k[1]-g:-g)));k=k.toString().split("e");return+(k[0]+"e"+(k[1]?+k[1]+g:g))}t.registerFunctions=function(m,k){m.number=function(g,f){return k(g,f,function(a,c,d){return k(g,f,function(a,c,d){b.pcCheck(d,1,2);a=d[0];return b.isNumber(a)?a:null===a?0:b.isDate(a)||b.isBoolean(a)||""===a||void 0===a?Number(a):b.isString(a)?void 0!==d[1]?(d=b.multiReplace(d[1],"\u2030",""),d=b.multiReplace(d,"\u00a4",""),s.parse(a,{pattern:d})):Number(a.trim()):Number(a)})})};m.abs=function(g,
f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.abs(b.toNumber(d[0]))})};m.acos=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.acos(b.toNumber(d[0]))})};m.asin=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.asin(b.toNumber(d[0]))})};m.atan=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.atan(b.toNumber(d[0]))})};m.atan2=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,2,2);return Math.atan2(b.toNumber(d[0]),
b.toNumber(d[1]))})};m.ceil=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,2);return 2===d.length?(a=b.toNumber(d[1]),isNaN(a)&&(a=0),r("ceil",b.toNumber(d[0]),-1*a)):Math.ceil(b.toNumber(d[0]))})};m.round=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,2);return 2===d.length?(a=b.toNumber(d[1]),isNaN(a)&&(a=0),r("round",b.toNumber(d[0]),-1*a)):Math.round(b.toNumber(d[0]))})};m.floor=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,2);return 2===d.length?(a=b.toNumber(d[1]),
isNaN(a)&&(a=0),r("floor",b.toNumber(d[0]),-1*a)):Math.floor(b.toNumber(d[0]))})};m.cos=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.cos(b.toNumber(d[0]))})};m.isnan=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};m.exp=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.exp(b.toNumber(d[0]))})};m.log=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.log(b.toNumber(d[0]))})};
m.pow=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,2,2);return Math.pow(b.toNumber(d[0]),b.toNumber(d[1]))})};m.random=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,0,0);return Math.random()})};m.sin=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.sin(b.toNumber(d[0]))})};m.sqrt=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.sqrt(b.toNumber(d[0]))})};m.tan=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return Math.tan(b.toNumber(d[0]))})};
m.defaultvalue=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};m.isempty=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};m["boolean"]=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);return b.toBoolean(d[0])})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d){t.registerFunctions=function(u,q){u.polygon=function(b,g){return q(b,g,function(g,k,u){a.pcCheck(u,1,1);g=null;if(u[0]instanceof c){if(g=a.fixSpatialReference(d.parseGeometryFromDictionary(u[0]),b.spatialReference),!1===g instanceof s)throw Error("Illegal Parameter");}else g=u[0]instanceof s?f.fromJson(u[0].toJson()):a.fixSpatialReference(new s(JSON.parse(u[0])),b.spatialReference);if(null!==g&&!1===g.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g})};u.polyline=function(b,g){return q(b,g,function(g,k,u){a.pcCheck(u,1,1);g=null;if(u[0]instanceof c){if(g=a.fixSpatialReference(d.parseGeometryFromDictionary(u[0]),b.spatialReference),!1===g instanceof r)throw Error("Illegal Parameter");}else g=u[0]instanceof r?f.fromJson(u[0].toJson()):a.fixSpatialReference(new r(JSON.parse(u[0])),b.spatialReference);if(null!==g&&!1===g.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g})};u.point=function(b,g){return q(b,g,function(g,k,u){a.pcCheck(u,1,1);g=null;if(u[0]instanceof c){if(g=a.fixSpatialReference(d.parseGeometryFromDictionary(u[0]),b.spatialReference),!1===g instanceof m)throw Error("Illegal Parameter");}else g=u[0]instanceof m?f.fromJson(u[0].toJson()):a.fixSpatialReference(new m(JSON.parse(u[0])),b.spatialReference);if(null!==g&&!1===g.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g})};u.multipoint=function(b,k){return q(b,k,function(k,u,m){a.pcCheck(m,1,1);k=null;if(m[0]instanceof c){if(k=a.fixSpatialReference(d.parseGeometryFromDictionary(m[0]),b.spatialReference),!1===k instanceof g)throw Error("Illegal Parameter");}else k=m[0]instanceof g?f.fromJson(m[0].toJson()):a.fixSpatialReference(new g(JSON.parse(m[0])),b.spatialReference);if(null!==k&&!1===k.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return k})};u.extent=function(b,u){return q(b,u,function(w,u,y){a.pcCheck(y,1,1);w=null;y[0]instanceof c?w=a.fixSpatialReference(d.parseGeometryFromDictionary(y[0]),b.spatialReference):y[0]instanceof m?(w={xmin:y[0].x,ymin:y[0].y,xmax:y[0].x,ymax:y[0].y,spatialReference:y[0].spatialReference.toJson()},y[0].hasZ?(w.zmin=y[0].z,w.zmax=y[0].z):y[0].hasM&&(w.mmin=y[0].m,w.mmax=y[0].m),w=f.fromJson(w)):w=y[0]instanceof s?f.fromJson(y[0].getExtent().toJson()):y[0]instanceof r?f.fromJson(y[0].getExtent().toJson()):
y[0]instanceof g?f.fromJson(y[0].getExtent().toJson()):y[0]instanceof k?f.fromJson(y[0].toJson()):a.fixSpatialReference(new k(JSON.parse(y[0])),b.spatialReference);if(null!==w&&!1===w.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return w})};u.geometry=function(b,g){return q(b,g,function(g,k,u){a.pcCheck(u,1,1);g=null;g=u[0]instanceof d?a.fixSpatialReference(u[0].geometry,b.spatialReference):
u[0]instanceof c?a.fixSpatialReference(d.parseGeometryFromDictionary(u[0]),b.spatialReference):a.fixSpatialReference(f.fromJson(JSON.parse(u[0])),b.spatialReference);if(null!==g&&!1===g.spatialReference.equals(b.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g})};u.feature=function(f,g){return q(f,g,function(g,k,u){if(0===u.length)throw Error("Missing Parameters");g=null;if(1===u.length)if(a.isString(u[0]))g=
d.fromJson(JSON.parse(u[0]));else if(u[0]instanceof d)g=new d(u[0]);else if(u[0]instanceof b)g=new d(null,u[0]);else if(u[0]instanceof c)g=u[0].hasField("geometry")?u[0].field("geometry"):null,k=u[0].hasField("attributes")?u[0].field("attributes"):null,null!==g&&g instanceof c&&(g=d.parseGeometryFromDictionary(g)),null!==k&&(k=d.parseAttributesFromDictionary(k)),g=new d(k,g);else throw Error("Illegal Argument");else{if(2===u.length){k=g=null;if(null!==u[0])if(u[0]instanceof b)g=u[0];else if(g instanceof
c)g=d.parseGeometryFromDictionary(u[0]);else throw Error("Illegal Argument");if(null!==u[1])if(u[1]instanceof c)k=d.parseAttributesFromDictionary(u[1]);else throw Error("Illegal Argument");}else{g=null;k={};if(null!==u[0])if(u[0]instanceof b)g=u[0];else if(g instanceof c)g=d.parseGeometryFromDictionary(u[0]);else throw Error("Illegal Argument");for(var m=1;m<u.length;m+=2){var y=a.toString(u[m]),r=u[m+1];if(null===r||void 0===r||a.isString(r)||isNaN(r)||a.isDate(r)||a.isNumber(r)||a.isBoolean(r)){if(a.isFunctionParameter(r)||
!1===a.isSimpleType(r))throw Error("Illegal Argument");k[y]=r===a.voidOperation?null:r}else throw Error("Illegal Argument");}}g=new d(k,g)}g.geometry=a.fixSpatialReference(g.geometry,f.spatialReference);g.immutable=!1;return g})};u.dictionary=function(b,d){return q(b,d,function(b,d,f){if(0===f.length)throw Error("Missing Parameters");if(0!==f.length%2)throw Error("Missing Parameters");b={};for(d=0;d<f.length;d+=2){var g=a.toString(f[d]),k=f[d+1];if(null===k||void 0===k||a.isString(k)||isNaN(k)||a.isDate(k)||
a.isNumber(k)||a.isBoolean(k)){if(a.isFunctionParameter(k))throw Error("Illegal Argument");b[g]=k===a.voidOperation?null:k}else throw Error("Illegal Argument");}f=new c(b);f.immutable=!1;return f})};u.haskey=function(b,f){return q(b,f,function(b,f,g){a.pcCheck(g,2,2);b=a.toString(g[1]);if(g[0]instanceof d||g[0]instanceof c)return g[0].hasField(b);throw Error("Illegal Argument");})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(q,
t,b,s){function r(m,k,g,f){if(1===f.length){if(b.isArray(f[0]))return s.calculateStat(m,f[0],-1);if(b.isImmutableArray(f[0]))return s.calculateStat(m,f[0].toArray(),-1)}return s.calculateStat(m,f,-1)}t.registerFunctions=function(m,k){m.stdev=function(b,f){return k(b,f,function(a,b,d){return r("stdev",a,b,d)})};m.variance=function(b,f){return k(b,f,function(a,b,d){return r("variance",a,b,d)})};m.average=function(b,f){return k(b,f,function(a,b,d){return r("mean",a,b,d)})};m.mean=function(b,f){return k(b,
f,function(a,b,d){return r("mean",a,b,d)})};m.sum=function(b,f){return k(b,f,function(a,b,d){return r("sum",a,b,d)})};m.min=function(b,f){return k(b,f,function(a,b,d){return r("min",a,b,d)})};m.max=function(b,f){return k(b,f,function(a,b,d){return r("max",a,b,d)})};m.distinct=function(b,f){return k(b,f,function(a,b,d){return r("distinct",a,b,d)})};m.count=function(g,f){return k(g,f,function(a,c,d){b.pcCheck(d,1,1);if(b.isArray(d[0])||b.isString(d[0]))return d[0].length;if(b.isImmutableArray(d[0]))return d[0].length();
throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(q,t,b){function s(b){for(var k=0,g=0;g<b.length;g++)k+=b[g];return k/b.length}function r(b){for(var k=s(b),g=0,f=0;f<b.length;f++)g+=Math.pow(k-b[f],2);return g/b.length}t.decodeStatType=function(b){switch(b.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";
case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};t.calculateStat=function(m,k,g){void 0===g&&(g=1E3);switch(m.toLowerCase()){case "distinct":a:{m=g;g=[];for(var f={},a=[],c=0;c<k.length;c++){if(void 0!==k[c]&&null!==k[c]&&k[c]!==b.voidOperation){var d=k[c];if(b.isNumber(d)||b.isString(d))void 0===f[d]&&(g.push(d),f[d]=1);else{for(var u=!1,q=0;q<a.length;q++)!0===b.equalityTest(a[q],d)&&(u=!0);!1===u&&(a.push(d),g.push(d))}}if(g.length>=
m&&-1!==m){k=g;break a}}k=g}return k;case "avg":case "mean":return s(b.toNumberArray(k));case "min":return Math.min.apply(Math,b.toNumberArray(k));case "sum":k=b.toNumberArray(k);for(g=m=0;g<k.length;g++)m+=k[g];return m;case "max":return Math.max.apply(Math,b.toNumberArray(k));case "stdev":case "stddev":return Math.sqrt(r(b.toNumberArray(k)));case "var":case "variance":return r(b.toNumberArray(k));case "count":return k.length}return 0}})},"esri/arcade/parser":function(){define(["require","exports",
"./treeAnalysis","./lib/esprima"],function(q,t,b,s){t.parseScript=function(r){r=s.parse("function _() { "+r+"\n}");if(null===r.body||void 0===r.body)throw Error("No formula provided.");if(0===r.body.length)throw Error("No formula provided.");if(0===r.body.length)throw Error("No formula provided.");if("BlockStatement"!==r.body[0].body.type)throw Error("Invalid formula content.");var m=b.validateLanguage(r);if(""!==m)throw Error(m);return r};t.scriptCheck=function(r,m,k,g){var f=[];try{var a=s.parse("function _() { "+
r+"\n}",{tolerant:!0,loc:!0}),c=a.errors;if(0<c.length)for(var d=0;d<c.length;d++)f.push({line:c[d].lineNumber,character:c[d].column,reason:c[d].description});var u=b.checkScript(a,m,k,g);for(m=0;m<u.length;m++)f.push(u[m])}catch(q){try{"Unexpected token }"===q.description&&(q.index=("function _() { "+r+"\n}").length-1)?f.push({line:q.lineNumber,character:q.column,reason:"Unexpected end of script"}):f.push({line:q.lineNumber,character:q.column,reason:q.description})}catch(x){}}return f};t.extractFieldLiterals=
function(r,m){void 0===m&&(m=!1);return b.findFieldLiterals(r,m)};t.validateScript=function(r,m,k){void 0===k&&(k="full");return b.validateScript(r,m,k)};t.referencesMember=function(r,m){return b.referencesMember(r,m)};t.referencesFunction=function(r,m){return b.referencesFunction(r,m)}})},"esri/arcade/lib/esprima":function(){(function(q,t){"function"===typeof define&&define.amd?define(["exports"],t):"undefined"!==typeof exports?t(exports):t(q.esprima={})})(this,function(q){function t(e,h){if(!e)throw Error("ASSERT: "+
h);}function b(e){return 48<=e&&57>=e}function s(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function r(e){return 0<="01234567".indexOf(e)}function m(e){return 10===e||13===e||8232===e||8233===e}function k(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||92===e||128<=e&&ga.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function g(e){return 36===e||95===e||65<=e&&90>=e||97<=e&&122>=e||48<=e&&57>=e||92===e||128<=e&&ga.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function f(e){switch(e){default:return!1}}
function a(e){if(ba&&f(e))return!0;e=e.toLowerCase();switch(e.length){case 2:return"if"===e||"in"===e;case 3:return"var"===e||"for"===e;case 4:return"else"===e;case 5:return"break"===e;case 6:return"return"===e;case 8:return"function"===e.toLowerCase()||"continue"===e;default:return!1}}function c(e,h,n,l,z){t("number"===typeof n,"Comment must have valid position");fa.lastCommentStart>=n||(fa.lastCommentStart=n,e={type:e,value:h},$.range&&(e.range=[n,l]),$.loc&&(e.loc=z),$.comments.push(e),$.attachComment&&
($.leadingComments.push(e),$.trailingComments.push(e)))}function d(e){var h,n,l;h=P-e;for(n={start:{line:ha,column:P-ja-e}};P<ma;)if(l=Y.charCodeAt(P),++P,m(l)){$.comments&&(e=Y.slice(h+e,P-1),n.end={line:ha,column:P-ja-1},c("Line",e,h,P-1,n));13===l&&10===Y.charCodeAt(P)&&++P;++ha;ja=P;return}$.comments&&(e=Y.slice(h+e,P),n.end={line:ha,column:P-ja},c("Line",e,h,P,n))}function u(){var e,h;for(h=0===P;P<ma;)if(e=Y.charCodeAt(P),32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=[5760,6158,8192,8193,
8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e))++P;else if(m(e))++P,13===e&&10===Y.charCodeAt(P)&&++P,++ha,ja=P,h=!0;else if(47===e)if(e=Y.charCodeAt(P+1),47===e)++P,++P,d(2),h=!0;else if(42===e){++P;++P;a:{var n=e=void 0,l=void 0,l=void 0;$.comments&&(e=P-2,n={start:{line:ha,column:P-ja-2}});for(;P<ma;)if(l=Y.charCodeAt(P),m(l))13===l&&10===Y.charCodeAt(P+1)&&++P,++ha,++P,ja=P,P>=ma&&K();else{if(42===l&&47===Y.charCodeAt(P+1)){++P;++P;$.comments&&(l=Y.slice(e+2,P-
2),n.end={line:ha,column:P-ja},c("Block",l,e,P,n));break a}++P}K()}}else break;else if(h&&45===e)if(45===Y.charCodeAt(P+1)&&62===Y.charCodeAt(P+2))P+=3,d(3);else break;else if(60===e)if("!--"===Y.slice(P+1,P+4))++P,++P,++P,++P,d(4);else break;else break}function B(e){var h,n,l=0;h="u"===e?4:2;for(e=0;e<h;++e)if(P<ma&&s(Y[P]))n=Y[P++],l=16*l+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(l)}function x(){var e,h;e=Y.charCodeAt(P++);h=String.fromCharCode(e);92===
e&&(117!==Y.charCodeAt(P)&&K(),++P,e=B("u"),(!e||"\\"===e||!k(e.charCodeAt(0)))&&K(),h=e);for(;P<ma;){e=Y.charCodeAt(P);if(!g(e))break;++P;h+=String.fromCharCode(e);92===e&&(h=h.substr(0,h.length-1),117!==Y.charCodeAt(P)&&K(),++P,e=B("u"),(!e||"\\"===e||!g(e.charCodeAt(0)))&&K(),h+=e)}return h}function y(){var e=P,h=Y.charCodeAt(P),n,l=Y[P];switch(h){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++P,$.tokenize&&(40===h?$.openParenToken=$.tokens.length:
123===h&&($.openCurlyToken=$.tokens.length)),{type:Z.Punctuator,value:String.fromCharCode(h),lineNumber:ha,lineStart:ja,start:e,end:P};default:if(n=Y.charCodeAt(P+1),61===n)switch(h){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return P+=2,{type:Z.Punctuator,value:String.fromCharCode(h)+String.fromCharCode(n),lineNumber:ha,lineStart:ja,start:e,end:P};case 33:case 61:return P+=2,61===Y.charCodeAt(P)&&++P,{type:Z.Punctuator,value:Y.slice(e,P),lineNumber:ha,lineStart:ja,
start:e,end:P}}}h=Y.substr(P,4);if("\x3e\x3e\x3e\x3d"===h)return P+=4,{type:Z.Punctuator,value:h,lineNumber:ha,lineStart:ja,start:e,end:P};h=h.substr(0,3);if("\x3e\x3e\x3e"===h||"\x3c\x3c\x3d"===h||"\x3e\x3e\x3d"===h)return P+=3,{type:Z.Punctuator,value:h,lineNumber:ha,lineStart:ja,start:e,end:P};h=h.substr(0,2);if(l===h[1]&&0<="+-\x3c\x3e\x26|".indexOf(l)||"\x3d\x3e"===h)return P+=2,{type:Z.Punctuator,value:h,lineNumber:ha,lineStart:ja,start:e,end:P};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(l))return++P,
{type:Z.Punctuator,value:l,lineNumber:ha,lineStart:ja,start:e,end:P};K()}function w(){var e,h,n;n=Y[P];t(b(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point");h=P;e="";if("."!==n){e=Y[P++];n=Y[P];if("0"===e){if("x"===n||"X"===n){++P;for(e="";P<ma&&s(Y[P]);)e+=Y[P++];0===e.length&&K();k(Y.charCodeAt(P))&&K();return{type:Z.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:ha,lineStart:ja,start:h,end:P}}if("b"===n||"B"===n){++P;for(n="";P<ma;){e=Y[P];if("0"!==
e&&"1"!==e)break;n+=Y[P++]}0===n.length&&K();P<ma&&(e=Y.charCodeAt(P),(k(e)||b(e))&&K());return{type:Z.NumericLiteral,value:parseInt(n,2),lineNumber:ha,lineStart:ja,start:h,end:P}}if("o"===n||"O"===n||r(n)){r(n)?(n=!0,e="0"+Y[P++]):(n=!1,++P,e="");for(;P<ma&&r(Y[P]);)e+=Y[P++];!n&&0===e.length&&K();(k(Y.charCodeAt(P))||b(Y.charCodeAt(P)))&&K();return{type:Z.NumericLiteral,value:parseInt(e,8),octal:n,lineNumber:ha,lineStart:ja,start:h,end:P}}n&&b(n.charCodeAt(0))&&K()}for(;b(Y.charCodeAt(P));)e+=Y[P++];
n=Y[P]}if("."===n){for(e+=Y[P++];b(Y.charCodeAt(P));)e+=Y[P++];n=Y[P]}if("e"===n||"E"===n){e+=Y[P++];n=Y[P];if("+"===n||"-"===n)e+=Y[P++];if(b(Y.charCodeAt(P)))for(;b(Y.charCodeAt(P));)e+=Y[P++];else K()}k(Y.charCodeAt(P))&&K();return{type:Z.NumericLiteral,value:parseFloat(e),lineNumber:ha,lineStart:ja,start:h,end:P}}function E(){da=null;u();O("Regular Expression language structures not supported")}function D(){u();E()}function A(){var e;e=$.tokens[$.tokens.length-1];if(!e)return D();if("Punctuator"===
e.type){if("]"===e.value)return y();if(")"===e.value)return(e=$.tokens[$.openParenToken-1])&&"Keyword"===e.type&&("if"===e.value.toLowerCase()||"while"===e.value.toLowerCase()||"for"===e.value.toLowerCase()||"with"===e.value.toLowerCase())?D():y();if("}"===e.value){if($.tokens[$.openCurlyToken-3]&&"Keyword"===$.tokens[$.openCurlyToken-3].type){if(e=$.tokens[$.openCurlyToken-4],!e)return y()}else if($.tokens[$.openCurlyToken-4]&&"Keyword"===$.tokens[$.openCurlyToken-4].type){if(e=$.tokens[$.openCurlyToken-
5],!e)return D()}else return y();if(0<=va.indexOf(e.value))return y()}return D()}return"Keyword"===e.type&&"this"!==e.value?D():y()}function H(){var e;u();if(P>=ma)return{type:Z.EOF,lineNumber:ha,lineStart:ja,start:P,end:P};e=Y.charCodeAt(P);if(k(e)){var h;e=P;if(92===Y.charCodeAt(P))h=x();else a:{var n;for(h=P++;P<ma;){n=Y.charCodeAt(P);if(92===n){P=h;h=x();break a}if(g(n))++P;else break}h=Y.slice(h,P)}return{type:1===h.length?Z.Identifier:a(h)?Z.Keyword:"null"===h.toLowerCase()?Z.NullLiteral:"true"===
h.toLowerCase()||"false"===h.toLowerCase()?Z.BooleanLiteral:Z.Identifier,value:h,lineNumber:ha,lineStart:ja,start:e,end:P}}if(40===e||41===e||59===e)return y();if(39===e||34===e){var l="",z,F,v;n=!1;var N,c;N=ha;c=ja;e=Y[P];t("'"===e||'"'===e,"String literal must starts with a quote");h=P;for(++P;P<ma;)if(z=Y[P++],z===e){e="";break}else if("\\"===z)if(z=Y[P++],!z||!m(z.charCodeAt(0)))switch(z){case "u":case "x":if("{"===Y[P]){++P;F=z=F=void 0;F=Y[P];z=0;for("}"===F&&K();P<ma;){F=Y[P++];if(!s(F))break;
z=16*z+"0123456789abcdef".indexOf(F.toLowerCase())}(1114111<z||"}"!==F)&&K();65535>=z?z=String.fromCharCode(z):(F=(z-65536>>10)+55296,z=String.fromCharCode(F,(z-65536&1023)+56320));l+=z}else v=P,(F=B(z))?l+=F:(P=v,l+=z);break;case "n":l+="\n";break;case "r":l+="\r";break;case "t":l+="\t";break;case "b":l+="\b";break;case "f":l+="\f";break;case "v":l+="\x0B";break;default:r(z)?(F="01234567".indexOf(z),0!==F&&(n=!0),P<ma&&r(Y[P])&&(n=!0,F=8*F+"01234567".indexOf(Y[P++]),0<="0123".indexOf(z)&&(P<ma&&
r(Y[P]))&&(F=8*F+"01234567".indexOf(Y[P++]))),l+=String.fromCharCode(F)):l+=z}else++ha,"\r"===z&&"\n"===Y[P]&&++P,ja=P;else if(m(z.charCodeAt(0)))break;else l+=z;""!==e&&K();return{type:Z.StringLiteral,value:l,octal:n,startLineNumber:N,startLineStart:c,lineNumber:ha,lineStart:ja,start:h,end:P}}return 46===e?b(Y.charCodeAt(P+1))?w():y():b(e)?w():$.tokenize&&47===e?A():y()}function G(){var e,h,n;u();e={start:{line:ha,column:P-ja}};h=H();e.end={line:ha,column:P-ja};h.type!==Z.EOF&&(n=Y.slice(h.start,
h.end),e={type:ua[h.type],value:n,range:[h.start,h.end],loc:e},h.regex&&(e.regex={pattern:h.regex.pattern,flags:h.regex.flags}),$.tokens.push(e));return h}function I(){var e;e=da;P=e.end;ha=e.lineNumber;ja=e.lineStart;da="undefined"!==typeof $.tokens?G():H();P=e.end;ha=e.lineNumber;ja=e.lineStart;return e}function M(){var e,h,n;e=P;h=ha;n=ja;da="undefined"!==typeof $.tokens?G():H();P=e;ha=h;ja=n}function J(){this.line=ha;this.column=P-ja}function S(){this.start=new J;this.end=null}function L(e){this.start=
e.type===Z.StringLiteral?{line:e.startLineNumber,column:e.start-e.startLineStart}:{line:e.lineNumber,column:e.start-e.lineStart};this.end=null}function Q(){P=da.start;da.type===Z.StringLiteral?(ha=da.startLineNumber,ja=da.startLineStart):(ha=da.lineNumber,ja=da.lineStart);$.range&&(this.range=[P,0]);$.loc&&(this.loc=new S)}function R(e){$.range&&(this.range=[e.start,0]);$.loc&&(this.loc=new L(e))}function X(){var e,h,n,l;e=P;h=ha;n=ja;u();l=ha!==h;P=e;ha=h;ja=n;return l}function V(e,h,n){var l=Error("Line "+
e+": "+n);l.index=h;l.lineNumber=e;l.column=h-ja+1;l.description=n;return l}function O(e){var h,n;h=Array.prototype.slice.call(arguments,1);n=e.replace(/%(\d)/g,function(e,n){t(n<h.length,"Message reference must be in range");return h[n]});throw V(ha,P,n);}function U(e){var h,n;h=Array.prototype.slice.call(arguments,1);n=e.replace(/%(\d)/g,function(e,n){t(n<h.length,"Message reference must be in range");return h[n]});n=V(ha,P,n);if($.errors)$.errors.push(n);else throw n;}function v(e,h){var n=ia.UnexpectedToken;
e&&(n=h?h:e.type===Z.EOF?ia.UnexpectedEOS:e.type===Z.Identifier?ia.UnexpectedIdentifier:e.type===Z.NumericLiteral?ia.UnexpectedNumber:e.type===Z.StringLiteral?ia.UnexpectedString:ia.UnexpectedToken,e.type===Z.Keyword&&ba&&f(e.value)&&(n=ia.StrictReservedWord));n=n.replace("%0",e?e.value:"ILLEGAL");return e&&"number"===typeof e.lineNumber?V(e.lineNumber,e.start,n):V(ha,P,n)}function K(e,h){throw v(e,h);}function C(e,h){var n=v(e,h);if($.errors)$.errors.push(n);else throw n;}function l(e){var h=I();
(h.type!==Z.Punctuator||h.value!==e)&&K(h)}function e(){var e;$.errors?(e=da,e.type===Z.Punctuator&&","===e.value?I():e.type===Z.Punctuator&&";"===e.value?(I(),C(e)):C(e,ia.UnexpectedToken)):l(",")}function h(e){var h=I();(h.type!==Z.Keyword||h.value.toLowerCase()!==e.toLowerCase())&&K(h)}function n(e){return da.type===Z.Punctuator&&da.value===e}function z(e){return da.type===Z.Keyword&&da.value.toLowerCase()===e.toLowerCase()}function F(){var e;59===Y.charCodeAt(P)||n(";")?I():(e=ha,u(),ha===e&&
da.type!==Z.EOF&&!n("}")&&K(da))}function N(e){return e.type===ca.Identifier||e.type===ca.MemberExpression}function T(e,h){var n,l,z=new Q;n=ba;l=Pa();ba=n;return z.finishFunctionExpression(null,e,[],l)}function W(){var e,h;e=ba;ba=!0;h=Ua();h=T(h.params);ba=e;return h}function ea(){var e,h=new Q;e=I();return e.type===Z.StringLiteral||e.type===Z.NumericLiteral?(ba&&e.octal&&C(e,ia.StrictOctalLiteral),h.finishLiteral(e)):h.finishIdentifier(e.value)}function na(){var e,h,z,a=new Q;e=da;if(e.type===
Z.Identifier)return h=ea(),"get"===e.value&&!n(":")&&!n("(")?(h=ea(),l("("),l(")"),e=T([]),a.finishProperty("get",h,e,!1,!1)):"set"===e.value&&!n(":")&&!n("(")?(h=ea(),l("("),e=da,e.type!==Z.Identifier?(l(")"),C(e),e=T([])):(z=[Aa()],l(")"),e=T(z,e)),a.finishProperty("set",h,e,!1,!1)):n(":")?(I(),e=ta(),a.finishProperty("init",h,e,!1,!1)):n("(")?(e=W(),a.finishProperty("init",h,e,!0,!1)):a.finishProperty("init",h,h,!1,!0);if(e.type===Z.EOF||e.type===Z.Punctuator)K(e);else{h=ea();if(n(":"))return I(),
e=ta(),a.finishProperty("init",h,e,!1,!1);if(n("("))return e=W(),a.finishProperty("init",h,e,!0,!1);K(I())}}function sa(h){var z=[],a,b,F={},v=String,N=new Q;for(!0!==h&&l("{");!n("}");)h=na(),a=h.key.type===ca.Identifier?h.key.name:v(h.key.value),b="init"===h.kind?Fa.Data:"get"===h.kind?Fa.Get:Fa.Set,a="$"+a,Object.prototype.hasOwnProperty.call(F,a)?(F[a]===Fa.Data?ba&&b===Fa.Data?U(ia.StrictDuplicateProperty):b!==Fa.Data&&U(ia.AccessorDataProperty):b===Fa.Data?U(ia.AccessorDataProperty):F[a]&b&&
U(ia.AccessorGetSet),F[a]|=b):F[a]=b,z.push(h),n("}")||e();l("}");return N.finishObjectExpression(z)}function Ja(){var e,a,b,F;if(n("("))return l("("),n(")")?(I(),a=xa.ArrowParameterPlaceHolder):(++fa.parenthesisCount,a=oa(),l(")")),a;if(n("[")){a=[];var v=new Q;for(l("[");!n("]");)n(",")?(I(),a.push(null)):(a.push(ta()),n("]")||l(","));I();return v.finishArrayExpression(a)}if(n("{"))return sa();e=da.type;F=new Q;if(e===Z.Identifier)b=F.finishIdentifier(I().value);else if(e===Z.StringLiteral||e===
Z.NumericLiteral)ba&&da.octal&&C(da,ia.StrictOctalLiteral),b=F.finishLiteral(I());else if(e===Z.Keyword){if(z("function")){F=null;var N,c=[],d=[],T;e=new Q;h("function");n("(")||(b=da,F=Aa(),!ba&&f(b.value)&&(a=b,v=ia.StrictReservedWord));N=Ua(a);c=N.params;d=N.defaults;b=N.stricted;a=N.firstRestricted;N.message&&(v=N.message);T=ba;N=Pa();ba&&a&&K(a,v);ba&&b&&C(b,v);ba=T;return e.finishFunctionExpression(F,c,d,N)}z("this")?(I(),b=F.finishThisExpression()):K(I())}else e===Z.BooleanLiteral?(a=I(),a.value=
"true"===a.value.toLowerCase(),b=F.finishLiteral(a)):e===Z.NullLiteral?(a=I(),a.value=null,b=F.finishLiteral(a)):n("/")||n("/\x3d")?(b="undefined"!==typeof $.tokens?F.finishLiteral(D()):F.finishLiteral(E()),M()):K(I());return b}function Da(){var h=[];l("(");if(!n(")"))for(;P<ma;){h.push(ta());if(n(")"))break;e()}l(")");return h}function pa(){l(".");var e,h=new Q;e=I();e.type===Z.Identifier||(e.type===Z.Keyword||e.type===Z.BooleanLiteral||e.type===Z.NullLiteral)||K(e);return h.finishIdentifier(e.value)}
function ka(){var e;l("[");e=oa();l("]");return e}function qa(){var e,l,a=new Q;h("new");var b;t(fa.allowIn,"callee of new expression always allow in keyword.");b=da;for(e=z("new")?qa():Ja();;)if(n("["))l=ka(),e=(new R(b)).finishMemberExpression("[",e,l);else if(n("."))l=pa(),e=(new R(b)).finishMemberExpression(".",e,l);else break;l=n("(")?Da():[];return a.finishNewExpression(e,l)}function za(){var e,h,l=da,a,b=fa.allowIn;h=da;fa.allowIn=!0;for(e=z("new")?qa():Ja();;)if(n("."))a=pa(),e=(new R(h)).finishMemberExpression(".",
e,a);else if(n("("))a=Da(),e=(new R(h)).finishCallExpression(e,a);else if(n("["))a=ka(),e=(new R(h)).finishMemberExpression("[",e,a);else break;fa.allowIn=b;if(da.type===Z.Punctuator&&(n("++")||n("--"))&&!X())N(e)||U(ia.InvalidLHSInAssignment),h=I(),e=(new R(l)).finishPostfixExpression(h.value,e);return e}function la(){var e,h,l;da.type!==Z.Punctuator&&da.type!==Z.Keyword?h=za():n("++")||n("--")?(l=da,e=I(),h=la(),N(h)||U(ia.InvalidLHSInAssignment),h=(new R(l)).finishUnaryExpression(e.value,h)):n("+")||
n("-")||n("~")||n("!")?(l=da,e=I(),h=la(),h=(new R(l)).finishUnaryExpression(e.value,h)):z("delete")||z("void")||z("typeof")?(l=da,e=I(),h=la(),h=(new R(l)).finishUnaryExpression(e.value,h),ba&&("delete"===h.operator&&h.argument.type===ca.Identifier)&&U(ia.StrictDelete)):h=za();return h}function Ia(e,h){var n=0;if(e.type!==Z.Punctuator&&e.type!==Z.Keyword)return 0;switch(e.value){case "||":n=1;break;case "\x26\x26":n=2;break;case "|":n=3;break;case "^":n=4;break;case "\x26":n=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":n=
6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":n=7;break;case "in":n=h?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":n=8;break;case "+":case "-":n=9;break;case "*":case "/":case "%":n=11}return n}function Ea(){var e,h,n,l,z,a;e=da;h=la();if(h===xa.ArrowParameterPlaceHolder)return h;n=da;l=Ia(n,fa.allowIn);if(0===l)return h;n.prec=l;I();e=[e,da];a=la();for(z=[h,n,a];0<(l=Ia(da,fa.allowIn));){for(;2<z.length&&l<=z[z.length-2].prec;)a=z.pop(),n=z.pop().value,
h=z.pop(),e.pop(),h=(new R(e[e.length-1])).finishBinaryExpression(n,h,a),z.push(h);n=I();n.prec=l;z.push(n);e.push(da);h=la();z.push(h)}l=z.length-1;h=z[l];for(e.pop();1<l;)h=(new R(e.pop())).finishBinaryExpression(z[l-1].value,z[l-2],h),l-=2;return h}function Ca(e){var h,n,l,z,a,b,F;z=[];a=[];b=0;F={paramSet:{}};h=0;for(n=e.length;h<n;h+=1)if(l=e[h],l.type===ca.Identifier)z.push(l),a.push(null),Ra(F,l,l.name);else if(l.type===ca.AssignmentExpression)z.push(l.left),a.push(l.right),++b,Ra(F,l.left,
l.left.name);else return null;F.message===ia.StrictParamDupe&&(e=ba?F.stricted:F.firstRestricted,K(e,F.message));0===b&&(a=[]);return{params:z,defaults:a,rest:null,stricted:F.stricted,firstRestricted:F.firstRestricted,message:F.message}}function ta(){var e,h,z,a;e=fa.parenthesisCount;a=da;var b,F,v;v=da;h=Ea();h!==xa.ArrowParameterPlaceHolder&&n("?")&&(I(),b=fa.allowIn,fa.allowIn=!0,F=ta(),fa.allowIn=b,l(":"),b=ta(),h=(new R(v)).finishConditionalExpression(h,F,b));if(h===xa.ArrowParameterPlaceHolder||
n("\x3d\x3e"))if(fa.parenthesisCount===e||fa.parenthesisCount===e+1)if(h.type===ca.Identifier?z=Ca([h]):h.type===ca.AssignmentExpression?z=Ca([h]):h.type===ca.SequenceExpression?z=Ca(h.expressions):h===xa.ArrowParameterPlaceHolder&&(z=Ca([])),z)return e=z,a=new R(a),l("\x3d\x3e"),z=ba,h=n("{")?Pa():ta(),ba&&e.firstRestricted&&K(e.firstRestricted,e.message),ba&&e.stricted&&C(e.stricted,e.message),ba=z,a.finishArrowFunctionExpression(e.params,e.defaults,h,h.type!==ca.BlockStatement);da.type!==Z.Punctuator?
e=!1:(e=da.value,e="\x3d"===e||"*\x3d"===e||"/\x3d"===e||"%\x3d"===e||"+\x3d"===e||"-\x3d"===e||"\x3c\x3c\x3d"===e||"\x3e\x3e\x3d"===e||"\x3e\x3e\x3e\x3d"===e||"\x26\x3d"===e||"^\x3d"===e||"|\x3d"===e);e&&(N(h)||U(ia.InvalidLHSInAssignment),e=I(),z=ta(),h=(new R(a)).finishAssignmentExpression(e.value,h,z));return h}function oa(){var e,h=da;e=ta();if(n(",")){for(e=[e];P<ma&&n(",");)I(),e.push(ta());e=(new R(h)).finishSequenceExpression(e)}return e}function Aa(){var e,h=new Q;e=I();e.type!==Z.Identifier&&
(ba&&e.type===Z.Keyword&&f(e.value)?C(e,ia.StrictReservedWord):K(e));return h.finishIdentifier(e.value)}function Na(e){var h=null,z,a=new Q;z=Aa();"const"===e?(l("\x3d"),h=ta()):n("\x3d")&&(I(),h=ta());return a.finishVariableDeclarator(z,h)}function Sa(e){var h=[];do{h.push(Na(e));if(!n(","))break;I()}while(P<ma);return h}function Ba(e){var a=da.type,b,v;a===Z.EOF&&K(da);if(a===Z.Punctuator&&"{"===da.value){if(e){l("{");var c=da;e=P;b=ha;v=ja;I();a=n(":");da=c;P=e;ha=b;ja=v;if((da.type===Z.Identifier||
da.type===Z.StringLiteral)&&a)return sa(!0);e=new Q;for(b=[];P<ma&&!n("}");){v=Wa();if("undefined"===typeof v)break;b.push(v)}l("}");return e.finishBlockStatement(b)}return sa()}e=new Q;if(a===Z.Punctuator)switch(da.value){case ";":return e=new Q,l(";"),e.finishEmptyStatement();case "(":return b=oa(),F(),e.finishExpressionStatement(b)}else if(a===Z.Keyword)switch(da.value.toLowerCase()){case "break":return b=null,h("break"),59===Y.charCodeAt(P)?(I(),!fa.inIteration&&!fa.inSwitch&&O(ia.IllegalBreak),
e=e.finishBreakStatement(null)):X()?(!fa.inIteration&&!fa.inSwitch&&O(ia.IllegalBreak),e=e.finishBreakStatement(null)):(da.type===Z.Identifier&&(b=Aa(),v="$"+b.name,Object.prototype.hasOwnProperty.call(fa.labelSet,v)||O(ia.UnknownLabel,b.name)),F(),null===b&&(!fa.inIteration&&!fa.inSwitch)&&O(ia.IllegalBreak),e=e.finishBreakStatement(b)),e;case "continue":return b=null,h("continue"),59===Y.charCodeAt(P)?(I(),fa.inIteration||O(ia.IllegalContinue),e=e.finishContinueStatement(null)):X()?(fa.inIteration||
O(ia.IllegalContinue),e=e.finishContinueStatement(null)):(da.type===Z.Identifier&&(b=Aa(),v="$"+b.name,Object.prototype.hasOwnProperty.call(fa.labelSet,v)||O(ia.UnknownLabel,b.name)),F(),null===b&&!fa.inIteration&&O(ia.IllegalContinue),e=e.finishContinueStatement(b)),e;case "for":var d,f,T;f=fa.allowIn;d=a=c=null;h("for");l("(");if(n(";"))I();else{if(z("var")){fa.allowIn=!1;var W=new Q;d=I();T=Sa();d=W.finishVariableDeclaration(T,d.value);fa.allowIn=f;1===d.declarations.length&&z("in")&&(I(),b=d,
v=oa(),d=null)}else fa.allowIn=!1,d=oa(),fa.allowIn=f,z("in")&&(N(d)||U(ia.InvalidLHSInForIn),I(),b=d,v=oa(),d=null);"undefined"===typeof b&&l(";")}"undefined"===typeof b&&(n(";")||(a=oa()),l(";"),n(")")||(c=oa()));l(")");T=fa.inIteration;fa.inIteration=!0;f=Ba(!0);fa.inIteration=T;return"undefined"===typeof b?e.finishForStatement(d,a,c,f):e.finishForInStatement(b,v,f);case "function":return Va(e);case "if":return h("if"),l("("),b=oa(),l(")"),v=Ba(!0),z("else")?(I(),a=Ba(!0)):a=null,e.finishIfStatement(b,
v,a);case "return":return b=null,h("return"),fa.inFunctionBody||U(ia.IllegalReturn),32===Y.charCodeAt(P)&&k(Y.charCodeAt(P+1))?(b=oa(),F(),e=e.finishReturnStatement(b)):X()?e=e.finishReturnStatement(null):(n(";")||!n("}")&&da.type!==Z.EOF&&(b=oa()),F(),e=e.finishReturnStatement(b)),e;case "var":return h("var"),b=Sa(),F(),e.finishVariableDeclaration(b,"var")}b=oa();if(b.type===ca.Identifier&&n(":"))return I(),a="$"+b.name,Object.prototype.hasOwnProperty.call(fa.labelSet,a)&&O(ia.Redeclaration,"Label",
b.name),fa.labelSet[a]=!0,v=Ba(!1),delete fa.labelSet[a],e.finishLabeledStatement(b,v);F();return e.finishExpressionStatement(b)}function Pa(){var e,h=[],z,a,b,F,v,N=new Q;for(l("{");P<ma&&da.type===Z.StringLiteral;){z=da;e=Wa();h.push(e);if(e.expression.type!==ca.Literal)break;e=Y.slice(z.start+1,z.end-1);"use strict"===e?(ba=!0,a&&C(a,ia.StrictOctalLiteral)):!a&&z.octal&&(a=z)}z=fa.labelSet;a=fa.inIteration;b=fa.inSwitch;F=fa.inFunctionBody;v=fa.parenthesizedCount;fa.labelSet={};fa.inIteration=
!1;fa.inSwitch=!1;fa.inFunctionBody=!0;for(fa.parenthesizedCount=0;P<ma&&!n("}");){e=Wa();if("undefined"===typeof e)break;h.push(e)}l("}");fa.labelSet=z;fa.inIteration=a;fa.inSwitch=b;fa.inFunctionBody=F;fa.parenthesizedCount=v;return N.finishBlockStatement(h)}function Ra(e,h,n){var l="$"+n;ba?Object.prototype.hasOwnProperty.call(e.paramSet,l)&&(e.stricted=h,e.message=ia.StrictParamDupe):e.firstRestricted||(f(n)?(e.firstRestricted=h,e.message=ia.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,
l)&&(e.firstRestricted=h,e.message=ia.StrictParamDupe));e.paramSet[l]=!0}function Ua(e){e={params:[],defaultCount:0,defaults:[],firstRestricted:e};l("(");if(!n(")"))for(e.paramSet={};P<ma;){var h=e,z=void 0,a=void 0,b=void 0,z=da,a=Aa();Ra(h,z,z.value);n("\x3d")&&(I(),b=ta(),++h.defaultCount);h.params.push(a);h.defaults.push(b);if(n(")"))break;l(",")}l(")");0===e.defaultCount&&(e.defaults=[]);return{params:e.params,defaults:e.defaults,stricted:e.stricted,firstRestricted:e.firstRestricted,message:e.message}}
function Va(){var e,n=[],l=[],z,a,b,F,v,N=new Q;h("function");n=da;e=Aa();!ba&&f(n.value)&&(b=n,F=ia.StrictReservedWord);z=Ua(b);n=z.params;l=z.defaults;a=z.stricted;b=z.firstRestricted;z.message&&(F=z.message);v=ba;z=Pa();ba&&b&&K(b,F);ba&&a&&C(a,F);ba=v;return N.finishFunctionDeclaration(e,n,l,z)}function Wa(){if(da.type===Z.Keyword)switch(da.value){default:return"function"==da.value.toLowerCase()?Va():Ba(!1)}if(da.type!==Z.EOF)return Ba(!1)}function Oa(){var e,h,n,l=[];for(e=0;e<$.tokens.length;++e)h=
$.tokens[e],n={type:h.type,value:h.value},h.regex&&(n.regex={pattern:h.regex.pattern,flags:h.regex.flags}),$.range&&(n.range=h.range),$.loc&&(n.loc=h.loc),l.push(n);$.tokens=l}var Z,ua,va,ca,xa,Fa,ia,ga,Y,ba,P,ha,ja,ma,da,fa,$;Z={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};ua={};ua[Z.BooleanLiteral]="Boolean";ua[Z.EOF]="\x3cend\x3e";ua[Z.Identifier]="Identifier";ua[Z.Keyword]="Keyword";ua[Z.NullLiteral]="Null";ua[Z.NumericLiteral]=
"Numeric";ua[Z.Punctuator]="Punctuator";ua[Z.StringLiteral]="String";ua[Z.RegularExpression]="RegularExpression";va="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");ca={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",
BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",
Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};xa={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};Fa={Data:1,Get:2,Set:4};ia={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",
UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",
NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",
StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",
StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};ga={NonAsciiIdentifierStart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
R.prototype=Q.prototype={processComment:function(){var e,h,n,l=$.bottomRightStack,z,a,b=l[l.length-1];if(!(this.type===ca.Program&&0<this.body.length)){if(0<$.trailingComments.length){n=[];for(z=$.trailingComments.length-1;0<=z;--z)a=$.trailingComments[z],a.range[0]>=this.range[1]&&(n.unshift(a),$.trailingComments.splice(z,1));$.trailingComments=[]}else b&&(b.trailingComments&&b.trailingComments[0].range[0]>=this.range[1])&&(n=b.trailingComments,delete b.trailingComments);if(b)for(;b&&b.range[0]>=
this.range[0];)e=b,b=l.pop();if(e)e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=e.leadingComments,e.leadingComments=void 0);else if(0<$.leadingComments.length){h=[];for(z=$.leadingComments.length-1;0<=z;--z)a=$.leadingComments[z],a.range[1]<=this.range[0]&&(h.unshift(a),$.leadingComments.splice(z,1))}h&&0<h.length&&(this.leadingComments=h);n&&0<n.length&&(this.trailingComments=n);l.push(this)}},finish:function(){$.range&&(this.range[1]=
P);$.loc&&(this.loc.end=new J,$.source&&(this.loc.source=$.source));$.attachComment&&this.processComment()},finishArrayExpression:function(e){this.type=ca.ArrayExpression;this.elements=e;this.finish();return this},finishAssignmentExpression:function(e,h,n){this.type=ca.AssignmentExpression;this.operator=e;this.left=h;this.right=n;this.finish();return this},finishBinaryExpression:function(e,h,n){this.type="||"===e||"\x26\x26"===e?ca.LogicalExpression:ca.BinaryExpression;this.operator=e;this.left=h;
this.right=n;this.finish();return this},finishBlockStatement:function(e){this.type=ca.BlockStatement;this.body=e;this.finish();return this},finishBreakStatement:function(e){this.type=ca.BreakStatement;this.label=e;this.finish();return this},finishCallExpression:function(e,h){this.type=ca.CallExpression;this.callee=e;this.arguments=h;this.finish();return this},finishConditionalExpression:function(e,h,n){this.type=ca.ConditionalExpression;this.test=e;this.consequent=h;this.alternate=n;this.finish();
return this},finishContinueStatement:function(e){this.type=ca.ContinueStatement;this.label=e;this.finish();return this},finishEmptyStatement:function(){this.type=ca.EmptyStatement;this.finish();return this},finishExpressionStatement:function(e){this.type=ca.ExpressionStatement;this.expression=e;this.finish();return this},finishForStatement:function(e,h,n,l){this.type=ca.ForStatement;this.init=e;this.test=h;this.update=n;this.body=l;this.finish();return this},finishForInStatement:function(e,h,n){this.type=
ca.ForInStatement;this.left=e;this.right=h;this.body=n;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(e,h,n,l){this.type=ca.FunctionDeclaration;this.id=e;this.params=h;this.defaults=n;this.body=l;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(e,h,n,l){this.type=ca.FunctionExpression;this.id=e;this.params=h;this.defaults=n;this.body=l;this.rest=null;this.expression=this.generator=!1;this.finish();return this},
finishIdentifier:function(e){this.type=ca.Identifier;this.name=e;this.finish();return this},finishIfStatement:function(e,h,n){this.type=ca.IfStatement;this.test=e;this.consequent=h;this.alternate=n;this.finish();return this},finishLiteral:function(e){this.type=ca.Literal;this.value=e.value;this.raw=Y.slice(e.start,e.end);e.regex&&(this.regex=e.regex);this.finish();return this},finishMemberExpression:function(e,h,n){this.type=ca.MemberExpression;this.computed="["===e;this.object=h;this.property=n;
this.finish();return this},finishObjectExpression:function(e){this.type=ca.ObjectExpression;this.properties=e;this.finish();return this},finishPostfixExpression:function(e,h){this.type=ca.UpdateExpression;this.operator=e;this.argument=h;this.prefix=!1;this.finish();return this},finishProgram:function(e){this.type=ca.Program;this.body=e;this.finish();return this},finishProperty:function(e,h,n,l,z){this.type=ca.Property;this.key=h;this.value=n;this.kind=e;this.method=l;this.shorthand=z;this.finish();
return this},finishReturnStatement:function(e){this.type=ca.ReturnStatement;this.argument=e;this.finish();return this},finishUnaryExpression:function(e,h){this.type="++"===e||"--"===e?ca.UpdateExpression:ca.UnaryExpression;this.operator=e;this.argument=h;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(e,h){this.type=ca.VariableDeclaration;this.declarations=e;this.kind=h;this.finish();return this},finishVariableDeclarator:function(e,h){this.type=ca.VariableDeclarator;this.id=
e;this.init=h;this.finish();return this}};q.version="2.0.0-dev";q.tokenize=function(e,h){var n,l;n=String;"string"!==typeof e&&!(e instanceof String)&&(e=n(e));Y=e;P=0;ha=0<Y.length?1:0;ja=0;ma=Y.length;da=null;fa={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};$={};h=h||{};h.tokens=!0;$.tokens=[];$.tokenize=!0;$.openParenToken=-1;$.openCurlyToken=-1;$.range="boolean"===typeof h.range&&h.range;$.loc="boolean"===typeof h.loc&&h.loc;"boolean"===typeof h.comment&&
h.comment&&($.comments=[]);"boolean"===typeof h.tolerant&&h.tolerant&&($.errors=[]);try{M();if(da.type===Z.EOF)return $.tokens;for(I();da.type!==Z.EOF;)try{I()}catch(z){if($.errors){$.errors.push(z);break}else throw z;}Oa();l=$.tokens;"undefined"!==typeof $.comments&&(l.comments=$.comments);"undefined"!==typeof $.errors&&(l.errors=$.errors)}catch(a){throw a;}finally{$={}}return l};q.parse=function(e,h){var n,l;l=String;"string"!==typeof e&&!(e instanceof String)&&(e=l(e));Y=e;P=0;ha=0<Y.length?1:
0;ja=0;ma=Y.length;da=null;fa={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};$={};"undefined"!==typeof h&&($.range="boolean"===typeof h.range&&h.range,$.loc="boolean"===typeof h.loc&&h.loc,$.attachComment="boolean"===typeof h.attachComment&&h.attachComment,$.loc&&(null!==h.source&&void 0!==h.source)&&($.source=l(h.source)),"boolean"===typeof h.tokens&&h.tokens&&($.tokens=[]),"boolean"===typeof h.comment&&h.comment&&($.comments=[]),"boolean"===
typeof h.tolerant&&h.tolerant&&($.errors=[]),$.attachComment&&($.range=!0,$.comments=[],$.bottomRightStack=[],$.trailingComments=[],$.leadingComments=[]));try{var z;u();M();z=new Q;ba=!1;var a;l=[];for(var b,F,v;P<ma;){b=da;if(b.type!==Z.StringLiteral)break;a=Wa();l.push(a);if(a.expression.type!==ca.Literal)break;F=Y.slice(b.start+1,b.end-1);"use strict"===F?(ba=!0,v&&C(v,ia.StrictOctalLiteral)):!v&&b.octal&&(v=b)}for(;P<ma;){a=Wa();if("undefined"===typeof a)break;l.push(a)}n=z.finishProgram(l);"undefined"!==
typeof $.comments&&(n.comments=$.comments);"undefined"!==typeof $.tokens&&(Oa(),n.tokens=$.tokens);"undefined"!==typeof $.errors&&(n.errors=$.errors)}catch(N){throw N;}finally{$={}}return n};q.Syntax=function(){var e,h={};"function"===typeof Object.create&&(h=Object.create(null));for(e in ca)ca.hasOwnProperty(e)&&(h[e]=ca[e]);"function"===typeof Object.freeze&&Object.freeze(h);return h}()})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),
function(q,t,b,s,r,m,k,g,f){q=q(g,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(a,b,d,f,g){this.values=[];this._symbols={};this.infos=[];a&&!a.declaredClass?(b=a,this.defaultSymbol=(a=b.defaultSymbol)&&(a.declaredClass?a:k.fromJson(a)),this.attributeField=b.field1,this.attributeField2=b.field2,this.attributeField3=b.field3,this.fieldDelimiter=b.fieldDelimiter,this.defaultLabel=b.defaultLabel,this.setValueExpression(b.valueExpression),this.legendOptions=b.legendOptions,b.backgroundFillSymbol&&
(this.backgroundFillSymbol=k.fromJson(b.backgroundFillSymbol)),t.forEach(b.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=a,this.attributeField=b,this.attributeField2=d,this.attributeField3=f,this.fieldDelimiter=g);this._multiple=!!this.attributeField2},addValue:function(a,c){var d=b.isObject(a)?a:{value:a,symbol:c};this._addValueInfo(d)},removeValue:function(a){var b=t.indexOf(this.values,a);-1!==b&&(this.values.splice(b,1),delete this._symbols[a],this.infos.splice(b,1))},getUniqueValueInfo:function(a){var c=
this.attributeField,d=a.attributes,g,k;this._exprTree?c=f.executeExpression(this._exprTree,f.createExecContext(a)):this._multiple?(a=this.attributeField2,g=this.attributeField3,k=[],c&&k.push(d[c]),a&&k.push(d[a]),g&&k.push(d[g]),c=k.join(this.fieldDelimiter||"")):c=b.isFunction(c)?c(a):d[c];return this._symbols[c]},setValueExpression:function(a){this.valueExpression=a;this._exprTree=f.parseExpression(a)},getSymbol:function(a){return(a=this.getUniqueValueInfo(a))&&a.symbol||this.defaultSymbol},_addValueInfo:function(a){var b=
a.value;this.values.push(b);this.infos.push(a);var d=a.symbol;d&&!d.declaredClass&&(a.symbol=k.fromJson(d));this._symbols[b]=a},toJson:function(){var a=m.fixJson,c;c={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,legendOptions:this.legendOptions,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:t.map(this.infos||
[],function(c){c=b.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return a(c)})};this.backgroundFillSymbol&&(c.backgroundFillSymbol=this.backgroundFillSymbol.toJson());c=b.mixin(this.inherited(arguments),c);return a(c)}});s("extend-esri")&&b.setObject("renderer.UniqueValueRenderer",q,r);return q})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),
function(q,t,b,s,r,m,k,g,f){q=q(g,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(a,b){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(a&&!a.declaredClass){var d=a;this.attributeField=d.field;this.setValueExpression(d.valueExpression);this.legendOptions=d.legendOptions;this.defaultSymbol=(a=d.defaultSymbol)&&(a.declaredClass?a:k.fromJson(a));this.backgroundFillSymbol=(a=d.backgroundFillSymbol)&&(a.declaredClass?a:k.fromJson(a));this._copy(["defaultLabel",
"classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],d,this);var f=d.minValue;(d=d.classBreakInfos)&&(d[0]&&m.isDefined(d[0].classMaxValue))&&t.forEach(d,function(a){var b=a.classMaxValue;a.minValue=f;f=a.maxValue=b},this);t.forEach(d,this._addBreakInfo,this)}else this.defaultSymbol=a,this.attributeField=b},addBreak:function(a,c,d){a=b.isObject(a)?a:{minValue:a,maxValue:c,symbol:d};this._addBreakInfo(a)},removeBreak:function(a,b){var d,f=this.breaks,g,k=
f.length,m=this._symbols;for(g=0;g<k;g++)if(d=f[g],d[0]==a&&d[1]==b){f.splice(g,1);delete m[a+"-"+b];this.infos.splice(g,1);break}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(a){var c=this.attributeField,d=a.attributes,g=this.breaks,k=g.length,m=this.isMaxInclusive;if(this._exprTree)a=f.executeExpression(this._exprTree,f.createExecContext(a));else if(b.isFunction(c))a=c(a);else{a=parseFloat(d[c]);var c=this.normalizationType,y;if(c)if(y=parseFloat(this.normalizationTotal),
d=parseFloat(d[this.normalizationField]),"log"===c)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===c&&!isNaN(y))a=100*(a/y);else if("field"===c)if(!isNaN(a)&&!isNaN(d))a/=d;else return-1}if(null!=a&&!isNaN(a))for(d=0;d<k;d++)if(c=g[d],c[0]<=a&&(m?a<=c[1]:a<c[1]))return d;return-1},getBreakInfo:function(a){a=this.getBreakIndex(a);return-1!==a?this.infos[a]:null},getSymbol:function(a){return(a=this.breaks[this.getBreakIndex(a)])?this._symbols[a[0]+"-"+a[1]]:this.defaultSymbol},setMaxInclusive:function(a){this.isMaxInclusive=
a},setValueExpression:function(a){this.valueExpression=a;this._exprTree=f.parseExpression(a)},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],
_copy:function(a,b,d){t.forEach(a,function(a){var f=a.split(":"),g,k,w;1<f.length&&(a=f[0],g=this["_"+a+"Enums"],"rest"===f[1]?(k="1",w="0"):"sdk"===f[1]&&(k="0",w="1"));f=b[a];if(void 0!==f&&(d[a]=f,g&&k)){var m,r=g.length;for(m=0;m<r;m++)if(g[m][k]===f){d[a]=g[m][w];break}}},this)},_addBreakInfo:function(a){var b=a.minValue,d=a.maxValue;this.breaks.push([b,d]);this.infos.push(a);var f=a.symbol;f&&!f.declaredClass&&(a.symbol=k.fromJson(f));this._symbols[b+"-"+d]=a.symbol},toJson:function(){var a=
this.infos||[],c=m.fixJson,d=a[0]&&a[0].minValue,f=this.backgroundFillSymbol,a=b.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,legendOptions:this.legendOptions,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:f&&f.toJson(),minValue:-Infinity===d?-Number.MAX_VALUE:d,classBreakInfos:t.map(a,function(a){a=b.mixin({},a);a.symbol=a.symbol&&a.symbol.toJson();a.classMaxValue=Infinity===a.maxValue?Number.MAX_VALUE:
a.maxValue;delete a.minValue;delete a.maxValue;return c(a)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,a);a.hasOwnProperty("normalizationType")&&!a.normalizationType&&delete a.normalizationType;a.hasOwnProperty("classificationMethod")&&!a.classificationMethod&&delete a.classificationMethod;return c(a)}});s("extend-esri")&&b.setObject("renderer.ClassBreaksRenderer",q,r);return q})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B){var x=q(g,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(a){m.isDefined(a)||(a={});a.attributeField=a.attributeField||"Magnitude";a.rotationInfo=a.rotationInfo||this._getRotationInfo(a);q.safeMixin(this,a);this.style=this.style||x.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:u.fromJson(this.singleArrowSymbol));this.renderer=
new f(this._getDefaultSymbol(),a.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(a){return this.renderer&&this.renderer.getSymbol(a)},setVisualVariables:function(a){a=s.filter(a,function(a){if("sizeInfo"===a.type)return m.isDefined(this._updateSizeInfo(a))},this);this.inherited(arguments);return this},setSizeInfo:function(a){this._updateSizeInfo(a);this.inherited(arguments);return this},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);
return this},setColorInfo:function(a){return this},_updateRenderer:function(a){return!m.isDefined(this.renderer)?Error("Invalid Renderer!"):a===x.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():a===x.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():a===x.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():a===x.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():a===x.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():a===x.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():
a===x.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():a===x.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():a===x.STYLE_SCALAR?this._createSimpleScalarRenderer():a===x.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer()},_updateSizeInfo:function(a){return a&&m.isDefined(a.minSize)&&m.isDefined(a.maxSize)&&m.isDefined(a.minDataValue)&&m.isDefined(a.maxDataValue)?(this.style===x.STYLE_WIND_BARBS&&(a.minSize=a.maxSize),a.field=a.field||"Magnitude",
a.type="sizeInfo",a):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([56,168,0]));var a=[0,1E-6,3.5,7,10.5,14];if(m.isDefined(this.minDataValue)&&m.isDefined(this.maxDataValue)){var b=(this.maxDataValue-this.minDataValue)/5,a=[],c,d;d=this.minDataValue;for(c=0;6>c;c++)a[c]=d,d+=b}this._addBreaks(a,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||
this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks([0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks([0,
1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];s.forEach(a,function(b,c){a[c]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],
[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];s.forEach(a,function(b,c){a[c]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var a=
[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];s.forEach(a,function(b,c){a[c]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new k([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([177,177,177]));this._addBreaks([0,0.5,1,1.5,2],[[78,
26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new k([177,177,177]));this._addBreaks([0,0.25,0.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new c({url:B.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var b=
[],f,g;for(f=0;150>=f;f+=5)b.push(f);g="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var u=new c({url:B.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=u;for(f=0;f<b.length-1;f++)0==f?this.renderer.addBreak({minValue:b[f],maxValue:b[f+1],symbol:u}):this.renderer.addBreak({minValue:b[f],maxValue:b[f+1],symbol:(new a).setPath(g[f]).setOutline((new d).setWidth(1.5)).setSize(20).setColor(new k([0,0,0,255]))})},_getDefaultSymbol:function(b){return(new a).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new d).setWidth(0)).setSize(20).setColor(b||
new k([0,92,230]))},_getRotationInfo:function(a){var b=a&&a.flowRepresentation||x.FLOW_FROM,c=a&&a.rotationField||"Direction",d=x.FLOW_FROM;return{field:function(a){a=a.attributes[c];return b===d?a:a+180},type:"geographic"}},_addBreaks:function(a,b){if(!m.isDefined(this.renderer))return Error("Invalid Renderer!");if(!a||!b||!a.length||!b.length||!(a.length>=b.length))return Error("AddBreaks: Input arguments break values and colors not valid");var c;for(c=0;c<b.length;c++)this.renderer.addBreak({minValue:a[c],
maxValue:a[c+1],symbol:this._getDefaultSymbol(new k(b[c]))})},toJson:function(){var a=t.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation});this.renderer&&(this.renderer.defaultSymbol&&this.style===x.STYLE_SINGLE_ARROW)&&(a.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return m.fixJson(a)}});t.mixin(x,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",
STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});b("extend-esri")&&t.setObject("renderer.VectorFieldRenderer",x,r);return x})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u){q=q(a,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(a){this.dotSize=a.dotSize||3;this.dotValue=a.dotValue;this.fields=a.fields;this.outline=a.outline;this.backgroundColor=a.backgroundColor;this.exactCount=a.exactCount||!0;this.dotShape=a.dotShape||"square";this.legendOptions=a.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(a){var b,d;this._currentGraphic=a;if(!this._supportsCanvas)return null;this._map||(this._map=a.getLayer()._map,this._objectIdField=a.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",t.hitch(this,function(a){this._currentMapScale=this._map.getScale();this._currentResolution=a.extent.getWidth()/this._map.width;
this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]])return b=this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]],d=this._getShapeProperties(a),b.setOffset(d.dx,d.dy),b;b=this._generateFieldsCount(this.fields,a.attributes,this.dotValue);d=this._getShapeProperties(a);b=new c(this._generateImageSrc(d.width,d.height,b,d.minXY,d.maxXY),this.outline,d.width,d.height);b.setOffset(d.dx,
d.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]=b},_generateFieldsCount:function(a,b,c){var d,f;for(f=a.length-1;0<=f;f--)d=b[a[f].name]/c,a[f].numPoints=Math.round(d);return a},_getShapeProperties:function(a){var b,c,d,f;b=a.geometry.getExtent();b.contains(this._map.extent)&&(b=this._map.extent);d=Math.ceil(b.getWidth()/this._currentResolution);f=Math.ceil(b.getHeight()/this._currentResolution);
c=this._map.toScreen(new u(b.xmin,b.ymin,b.spatialReference));b=this._map.toScreen(new u(b.xmax,b.ymax,b.spatialReference));a=a.getLayer().getNode().getCTM();return{minXY:c,maxXY:b,dx:(c.x-a.e)%d,dy:(b.y-a.f)%f,width:d,height:f}},_generateImageSrc:function(a,b,c,d,f,g){var k=this.dotSize,u,m,r;this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);u=this._canvas.getContext("2d");if(g=g||this.backgroundColor)u.fillStyle=g.toCss(!0),u.fillRect(0,0,a,b),u.fill();
for(g=c.length-1;0<=g;g--){u.fillStyle=c[g].color.toCss(!0);for(m=c[g].numPoints-1;0<=m;m--)r=this._getRandomPoint(a,b,d,f),"square"===this.dotShape?u.fillRect(r.x,r.y,k,k):"circle"===this.dotShape&&(u.beginPath(),u.arc(r.x,r.y,k/2,0,2*Math.PI,!0)),u.fill()}return this._canvas.toDataURL()},_initCanvas:function(a,b){var c=s.create("canvas",{id:"canvas",width:a+"px",height:b+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(c);return c},_getRandomInt:function(a,
b){return Math.floor(Math.random()*(b-a+1)+a)},_getRandomPoint:function(a,b,c,f){var g={},k=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&a*b>this._exactCountMinArea){do g.x=this._getRandomInt(c.x,f.x),g.y=this._getRandomInt(f.y,c.y),a=new d(g.x,g.y),a=this._checkPointShapeBounds(a,this.dotSize+k,this._currentGraphic.geometry),!0===a&&(g.x-=c.x,g.y-=f.y);while(!1===a)}else g.x=this._getRandomInt(0,a),g.y=this._getRandomInt(0,b);return g},_checkPointShapeBounds:function(a,
b,c){var d=null,d=!1,f=!0,g=0;do{switch(g){case 1:a.x+=b;break;case 2:a.y+=b;break;case 3:a.x-=b}d=this._map.toMap(a);d=c.contains(d);!1===d&&(f=!1);g+=1}while(3>=g&&!0===f);return d},setDotSize:function(a){0<a&&(this.dotSize=a)},setDotValue:function(a){0<a&&(this.dotValue=a)},setOutline:function(a){this.outline=a},setBackgroundColor:function(a){this.backgroundColor=a},toJson:function(){var a=t.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:f.toJsonColor(this.backgroundColor),
dotShape:this.dotShape,dotSize:0<this.dotSize?m.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:b.map(this.fields,function(a){return g.fixJson({color:f.toJsonColor(a.color),name:a.name})}),legendOptions:this.legendOptions&&g.fixJson({backgroundColor:f.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});
return g.fixJson(a)}});r("extend-esri")&&t.setObject("renderer.DotDensityRenderer",q,k);return q})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(q,t,b,s,r){q=q(r,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});b("extend-esri")&&t.setObject("geometry.ScreenPoint",q,s);return q})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),
function(q,t,b,s,r,m,k){q=q(k,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(b){this.setRendererInfos(b&&b.rendererInfos||[])},setRendererInfos:function(b){this.rendererInfos=b;this._setRangeType();return this},getSymbol:function(b){var f=this.getRendererInfo(b);return f&&f.renderer&&f.renderer.getSymbol(b)},getRendererInfo:function(b){b=b.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(b.getZoom()):this.getRendererInfoByScale(b.getScale())},
getRendererInfoByZoom:function(b){var f,a=this.rendererInfos,c,d=0;do f=a[d],b>=f.minZoom&&b<=f.maxZoom&&(c=f),d++;while(!c&&d<a.length);return c},getRendererInfoByScale:function(b){var f,a=this.rendererInfos,c,d=0,k,m,r,y;do f=a[d],k=f.minScale,m=f.maxScale,r=!k,y=!m,!r&&b<=k&&(r=!0),!y&&b>=m&&(y=!0),r&&y&&(c=f),d++;while(!c&&d<a.length);return c},addRendererInfo:function(b){var f,a=0,c,d=this.rendererInfos,k=b.hasOwnProperty("minZoom")?"minZoom":"minScale",m=d.length;do{c=d[a];if(m===a||b[k]<c[k])d.splice(a,
0,b),this._setRangeType(),f=!0;a++}while(!f&&a<m);return this},_setRangeType:function(){var b=this.rendererInfos;if(b=b&&b[0])this.rangeType=b.hasOwnProperty("minZoom")?"zoom":b.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var g=this.rendererInfos||[],f=g[0]&&g[0].minScale,g=b.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<f?f:0,rendererInfos:t.map(g,function(a){return m.fixJson({maxScale:0<a.maxScale?a.maxScale:0,renderer:a.renderer&&
a.renderer.toJson()})})});return m.fixJson(g)}});s("extend-esri")&&b.setObject("renderer.ScaleDependentRenderer",q,r);return q})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(q,t,b,s,r,m,k,g,f,a){var c=q(a,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(a,b){this.infos=a;this.timeUnits=b||"day";a.sort(function(a,
b){return a.minAge<b.minAge?-1:a.minAge>b.minAge?1:0})},getAgedSymbol:function(a,b){var c=b.getLayer(),f=b.attributes,m=k.isDefined;a=g.fromJson(a.toJson());var w=c._map.timeExtent.endTime;if(!w)return a;var s=r.difference(new Date(f[c._startTimeField]),w,this.timeUnits);t.some(this.infos,function(b){if(s>=b.minAge&&s<=b.maxAge){var c=b.color,f=b.size;b=b.alpha;c&&a.setColor(c);m(f)&&this._setSymbolSize(a,f);m(b)&&a.color&&(a.color.a=b);return!0}},this);return a},toJson:function(){var a={agerClassBreakInfos:[]},
b,c,g;a.timeUnits=this._getRestUnits(this.timeUnits);for(b=0;b<this.infos.length;b+=1)c=this.infos[b],g={},g.oldestAge=Infinity===c.maxAge?null:c.maxAge,g.size=c.size,c.color&&(g.color=f.toJsonColor(c.color)),c.alpha&&(g.alpha=Math.round(255*c.alpha)),a.agerClassBreakInfos[b]=g;return a},_getRestUnits:function(a){var b="esriTimeUnitsDays";switch(a){case c.UNIT_SECONDS:b="esriTimeUnitsSeconds";break;case c.UNIT_MILLISECONDS:b="esriTimeUnitsMilliseconds";break;case c.UNIT_HOURS:b="esriTimeUnitsHours";
break;case c.UNIT_MINUTES:b="esriTimeUnitsMinutes";break;case c.UNIT_MONTHS:b="esriTimeUnitsMonths";break;case c.UNIT_WEEKS:b="esriTimeUnitsWeeks";break;case c.UNIT_YEARS:b="esriTimeUnitsYears"}return b}});b.mixin(c,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});s("extend-esri")&&b.setObject("renderer.TimeClassBreaksAger",c,m);return c})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(b,m){},_setSymbolSize:function(b,m){switch(b.type){case "simplemarkersymbol":b.setSize(m);break;case "picturemarkersymbol":b.setWidth(m);b.setHeight(m);break;case "simplelinesymbol":case "cartographiclinesymbol":b.setWidth(m);break;case "simplefillsymbol":case "picturefillsymbol":b.outline&&b.outline.setWidth(m)}}});b("extend-esri")&&t.setObject("renderer.SymbolAger",
q,s);return q})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(q,t,b,s,r,m,k,g){q=q(g,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(b,a,c){this.colorRange=b;this.sizeRange=a;this.alphaRange=c},getAgedSymbol:function(f,a){var c=a.getLayer(),d=a.attributes;f=m.fromJson(f.toJson());var g=c._map.timeExtent,k=g.startTime,g=g.endTime;if(!k||!g)return f;
k=k.getTime();g=g.getTime();c=new Date(d[c._startTimeField]);c=c.getTime();c<k&&(c=k);k=g===k?1:(c-k)/(g-k);if(c=this.sizeRange)d=c[0],g=c[1],c=Math.abs(g-d)*k,this._setSymbolSize(f,d<g?d+c:d-c);if(c=this.colorRange){var g=c[0],r=c[1],s=Math.round,d=new b,w=g.r,q=r.r,c=Math.abs(q-w)*k;d.r=s(w<q?w+c:w-c);w=g.g;q=r.g;c=Math.abs(q-w)*k;d.g=s(w<q?w+c:w-c);w=g.b;q=r.b;c=Math.abs(q-w)*k;d.b=s(w<q?w+c:w-c);g=g.a;r=r.a;c=Math.abs(r-g)*k;d.a=g<r?g+c:g-c;f.setColor(d)}d=f.color;if((c=this.alphaRange)&&d)g=
c[0],r=c[1],c=Math.abs(r-g)*k,d.a=g<r?g+c:g-c;return f},toJson:function(){var b={};this.sizeRange&&(b.sizeRange=this.sizeRange);this.colorRange&&(b.colorRange=[k.toJsonColor(this.colorRange[0]),k.toJsonColor(this.colorRange[1])]);this.alphaRange&&(b.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return b}});s("extend-esri")&&t.setObject("renderer.TimeRampAger",q,r);return q})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel","./Renderer"],function(q,t,b,s,r){q=q(r,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(b,k,g,f){this.observationRenderer=b;this.latestObservationRenderer=k;this.trackRenderer=g;this.observationAger=f},getSymbol:function(b){var k=b.getLayer(),g=this.getObservationRenderer(b),f=g&&g.getSymbol(b),a=this.observationAger;k.timeInfo&&(k._map.timeExtent&&g===this.observationRenderer&&a&&f)&&(f=a.getAgedSymbol(f,b));return f},getObservationRenderer:function(b){return 0===
b.getLayer()._getKind(b)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var b={type:"temporal"};b.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(b.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(b.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(b.observationAger=this.observationAger.toJson());return b}});b("extend-esri")&&t.setObject("renderer.TemporalRenderer",
q,s);return q})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),function(q,t,b,s,r,m,k,g,f,a){q=q([a],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(a){if(this._supportsCanvas=window.CanvasRenderingContext2D?
!0:!1)"string"==typeof a&&(a=JSON.parse(a)),t.mixin(this,a),this._canvas=null,!this.colors&&!this.colorStops&&(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:0.75,color:"rgba(255, 140, 0, 1)"},{ratio:0.9,color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(a){if(!this._supportsCanvas)return!1;var b=a.attributes.imageData;a=a.attributes.size;if(!a)return null;var f=this._getContext(a[0],a[1]),k=f.getImageData(0,0,a[0],
a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):new Uint8Array(b.buffer));if(window.CanvasPixelArray&&k.data instanceof window.CanvasPixelArray)for(var m=k.data,r=m.length;r--;)m[r]=b[r];else k.data.set(b);f.putImageData(k,0,0);return new g(f.canvas.toDataURL(),a[0],a[1])},setColors:function(a){if(a&&(a instanceof Array||
a.colors))this.gradient=this._generateGradient(a.colors||a),this.colors=a;return this},setColorStops:function(a){if(a&&(a instanceof Array||a.colorStops))this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a;return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=a;return this},setFieldOffset:function(a){this.fieldOffset=a;return this},setBlurRadius:function(a){this.blurRadius=
a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var a=t.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(a.fieldOffset=this.fieldOffset);b.forEach(a.colorStops,function(a){a.color=f.toJsonColor(a.color)});return k.fixJson(a)},_getContext:function(a,b){this._canvas?
(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d")},_initCanvas:function(a,b){var f=s.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: -10000px; top: 0px;"},null);f.width=a;f.height=b;document.body.appendChild(f);return f},_generateGradient:function(a,b){b||(b=512);for(var f=this._colorsToStops(a),g=this._getContext(1,b||512),k=g.createLinearGradient(0,0,0,b),m=0,w;m<f.length;m++)w=f[m],
k.addColorStop(w.ratio,w.color.toCss(!0));g.fillStyle=k;g.fillRect(0,0,1,b);return g.getImageData(0,0,1,b).data},_colorsToStops:function(a){var d=[];if(!a[0])return d;if(null!=a[0].ratio)d=b.map(a,function(a){return{ratio:a.ratio,color:this._toColor(a.color)}},this);else if(null!=a[0].value){var f=Infinity,d=-Infinity,g=0,k;for(k=0;k<a.length;k++){var m=a[k].value;m<f&&(f=m);m>d&&(d=m)}g=d-f;this.maxPixelIntensity=d;this.minPixelIntensity=f;d=b.map(a,function(a){var b=a.value;a=this._toColor(a.color);
return{value:b,ratio:(b-f)/g,color:a}},this)}else var w=a.length-1,d=b.map(a,function(a,b){return{color:this._toColor(a),ratio:b/w}},this);return d},_toColor:function(a){!a.toRgba&&!a.declaredClass&&(a=new f(a));return a}});r("extend-esri")&&t.setObject("renderer.HeatmapRenderer",q,m);return q})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),function(q,t,b,s,r,
m,k,g){q=q(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft",
"below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter",
"below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},
constructor:function(b){if(b&&(t.mixin(this,b),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=m.valueOf(this._labelPlacementLookup,b.labelPlacement)),b.format&&(this.format=b.format),b.fieldInfos&&(this.fieldInfos=b.fieldInfos),b.symbol&&(this.symbol="esriSHD"===b.symbol.type?new g(b.symbol):new k(b.symbol)),b=this.sizeInfo))b.minSize&&(b.minSize=s.pt2px(b.minSize)),b.maxSize&&(b.maxSize=s.pt2px(b.maxSize))},getSymbol:function(){return this.symbol},toJson:function(){var b=
this.sizeInfo;b&&(b=t.mixin({},b),b.minSize&&(b.minSize=s.px2pt(b.minSize)),b.maxSize&&(b.maxSize=s.px2pt(b.maxSize)));b={labelExpression:this.labelExpression,labelExpressionInfo:this.labelExpressionInfo&&t.clone(this.labelExpressionInfo),format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:b||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:
this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return m.fixJson(b)}});b("extend-esri")&&t.setObject("layers.LabelClass",q,r);return q})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(q,t,b,s,r,m,k,g,f){var a={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};q=q(g,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,
255,255,1],width:32,height:32,font:s.defaultFont,constructor:function(c,d,f,g,k){c?t.isString(c)?(this.url=c,d&&(this.color=d),f&&(this.width=f),g&&(this.height=g),void 0!==k&&(this.font=k)):(this.width=s.pt2px(c.width),this.height=s.pt2px(c.height),d=c.imageData,!(9>b("ie"))&&d&&(f=this.url,this.url="data:"+(c.contentType||"image")+";base64,"+d,this.imageData=f)):t.mixin(this,a)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=a;return this},
setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,
stroke:null}},toJson:function(){var a=this.url,b=this.imageData;if(0===a.indexOf("data:"))var g=a,a=b,b=g.indexOf(";base64,")+8,b=g.substr(b);var a=k.getAbsoluteUrl(a),g=s.px2pt(this.width),g=isNaN(g)?void 0:g,r=s.px2pt(this.height),r=isNaN(r)?void 0:r,a=m.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:b,contentType:this.contentType,width:g,height:r}));this.font?(b=new f(this.font),a.font=b.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;return a}});
q.defaultProps=a;b("extend-esri")&&(t.setObject("symbol.ShieldLabelSymbol",q,r),r.symbol.defaultShieldLabelSymbol=a);return q})},"esri/dijit/Legend":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/Color dojo/debounce dojo/has dojo/sniff dojo/DeferredList dojo/json dojo/dom dojo/dom-construct dojo/dom-style dojo/dom-class dijit/_Widget dojox/gfx dojox/gfx/matrix dojox/html/entities ../kernel ../config ../request ../lang ../numberUtils ../renderers/utils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/ClassBreaksRenderer ../renderers/ScaleDependentRenderer ../renderers/DotDensityRenderer ../renderers/TemporalRenderer ../renderers/VectorFieldRenderer ../renderers/HeatmapRenderer ../symbols/PictureFillSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils ./_EventedWidget dojo/i18n!../nls/jsapi".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S,L,Q,R,X,V,O,U,v,K,C,l,e,h){var n=t([e,w],{declaredClass:"esri.dijit.Legend",widgetsInTemplate:!1,layers:null,alignRight:!1,hoverLabelShowing:!1,dotDensitySwatchSize:26,dotCoverage:75,gradientHeight:30,transparencyRampColor:new k([64,64,64]),defaultText:"Aa",sizeRampLightColor:new k([255,255,255]),sizeRampDarkColor:new k([128,128,128]),layerConnects:[],gradientWidth:34,colorRampBorder:"1px solid",_specialChars:{lt:"\x3c",gt:"\x3e"},_ieTimer:100,
_isRightToLeft:!1,_align:null,_legendAlign:null,constructor:function(e,l){b.mixin(this,h.widgets.legend);this._i18n=h.widgets.legend;e=e||{};e.map?l?(this.map=e.map,this.layerInfos=e.layerInfos,this._respectCurrentMapScale=!1===e.respectCurrentMapScale?!1:!0,this._respectVisibility=!1===e.respectVisibility?!1:!0,this.arrangement=e.arrangement===n.ALIGN_RIGHT?n.ALIGN_RIGHT:n.ALIGN_LEFT,this.arrangement===n.ALIGN_RIGHT&&(this.alignRight=!0),this.autoUpdate=!1===e.autoUpdate?!1:!0,this._surfaceItems=
[],this.hideLayersInLegend={},this.refresh=g(this.refresh,0)):console.error("esri.dijit.Legend: must specify a container for the legend"):console.error("esri.dijit.Legend: unable to find the 'map' property in parameters")},postMixInProperties:function(){this.inherited(arguments);var e=["ar","he"],h,n;for(h=0;h<e.length;h+=1)n=e[h],q.locale&&-1!==q.locale.indexOf(n)&&(-1!==q.locale.indexOf("-")?-1!==q.locale.indexOf(n+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0);this._isRightToLeft?(this._align=
this.alignRight?"left":"right",this._legendAlign=this.alignRight?"esriLegendLeft":"esriLegendRight"):(this._align=this.alignRight?"right":"left",this._legendAlign=this.alignRight?"esriLegendRight":"esriLegendLeft")},startup:function(){this.inherited(arguments);this._initialize();9>f("ie")&&(this._repaintItems=b.hitch(this,this._repaintItems),setTimeout(this._repaintItems,this._ieTimer))},destroy:function(){this._deactivate();this._removeHoverHandlers();this.inherited(arguments)},refresh:function(e){if(this.domNode){e?
(this.layerInfos=e,this.layers=[],s.forEach(this.layerInfos,function(e){this._isSupportedLayerType(e.layer)&&(e.title&&(e.layer._titleForLegend=e.title),e.layer._hideDefaultSymbol=!1===e.defaultSymbol?!0:!1,e.hideLayers?(this.hideLayersInLegend[e.layer.id]=e.hideLayers,this._addSubLayersToHide(e)):this.hideLayersInLegend[e.layer.id]=[],e.hoverLabel&&(e.layer._hoverLabel=e.hoverLabel),e.hoverLabels&&(e.layer._hoverLabels=e.hoverLabels),this.layers.push(e.layer))},this)):this.useAllMapLayers&&(this.layers=
this.layerInfos=null);for(e=this.domNode.children.length-1;0<=e;e--)B.destroy(this.domNode.children[e]);this._removeHoverHandlers();this.startup()}},_legendUrl:"http://utility.arcgis.com/sharing/tools/legend",_initialize:function(){this.layerInfos&&(this.layers=[],s.forEach(this.layerInfos,function(e){this._isSupportedLayerType(e.layer)&&(e.title&&(e.layer._titleForLegend=e.title),e.layer._hideDefaultSymbol=!1===e.defaultSymbol?!0:!1,e.hideLayers?(this.hideLayersInLegend[e.layer.id]=e.hideLayers,
this._addSubLayersToHide(e)):this.hideLayersInLegend[e.layer.id]=[],e.hoverLabel&&(e.layer._hoverLabel=e.hoverLabel),e.hoverLabels&&(e.layer._hoverLabels=e.hoverLabels),this.layers.push(e.layer))},this));this.useAllMapLayers=!1;if(!this.layers){this.useAllMapLayers=!0;this.layers=[];var e=[],h=[];s.forEach(this.map.layerIds,function(n){n=this.map.getLayer(n);var l;this._isSupportedLayerType(n)&&(n.arcgisProps&&n.arcgisProps.title&&(n._titleForLegend=n.arcgisProps.title),this.layers.push(n));"esri.layers.KMLLayer"==
n.declaredClass&&(l=n.getLayers(),s.forEach(l,function(h){e.push(h.id)},this));"esri.layers.GeoRSSLayer"==n.declaredClass&&(l=n.getFeatureLayers(),s.forEach(l,function(e){h.push(e.id)},this))},this);s.forEach(this.map.graphicsLayerIds,function(n){var l=this.map.getLayer(n);-1==s.indexOf(e,n)&&-1==s.indexOf(h,n)&&(this._isSupportedLayerType(l)&&l._params&&l._params.drawMode)&&(l.arcgisProps&&l.arcgisProps.title&&(l._titleForLegend=l.arcgisProps.title),this.layers.push(l))},this)}this._createLegend()},
_activate:function(){this._deactivate();this.autoUpdate&&(this._respectCurrentMapScale&&(this._ozeConnect=r.connect(this.map,"onZoomEnd",this,"_refreshLayers")),this.useAllMapLayers&&(this._olaConnect=r.connect(this.map,"onLayerAdd",this,"_updateAllMapLayers"),this._olrConnect=r.connect(this.map,"onLayerRemove",this,"_updateAllMapLayers"),this._olroConnect=r.connect(this.map,"onLayersReordered",this,"_updateAllMapLayers")),s.forEach(this.layers,function(e){var h={};h.ovcConnect=r.connect(e,"onVisibilityChange",
this,"_refreshLayers");h.oocConnect=r.connect(e,"onOpacityChange",this,"_refreshLayers");h.oscConnect=r.connect(e,"onScaleRangeChange",this,"_refreshLayers");"esri.layers.ArcGISDynamicMapServiceLayer"===e.declaredClass&&e.supportsDynamicLayers&&(h.odcConnect=r.connect(e,"_onDynamicLayersChange",b.hitch(this,"_updateDynamicLayers",e)));"esri.layers.ArcGISImageServiceLayer"===e.declaredClass&&(h.oirConnect=r.connect(e,"onRenderingChange",b.partial(this._updateImageServiceLayers,this,e)));"esri.layers.ArcGISImageServiceVectorLayer"===
e.declaredClass&&(h.oivrConnect=r.connect(e,"onRendererChange",b.hitch(this,"_refreshLayers")));this.layerConnects[e.id]=h},this))},_deactivate:function(){this._ozeConnect&&r.disconnect(this._ozeConnect);this._olaConnect&&r.disconnect(this._olaConnect);this._olroConnect&&r.disconnect(this._olroConnect);this._olrConnect&&r.disconnect(this._olrConnect);s.forEach(this.layers,function(e){e=this.layerConnects[e.id]||{};e.ovcConnect&&r.disconnect(e.ovcConnect);e.oocConnect&&r.disconnect(e.oocConnect);e.oscConnect&&
r.disconnect(e.oscConnect);e.odcConnect&&r.disconnect(e.odcConnect);e.oirConnect&&r.disconnect(e.oirConnect);e.oivrConnect&&r.disconnect(e.oivrConnect)},this);this.layerConnects=[]},_updateDynamicLayers:function(e){delete e.legendResponse;this._refreshLayers()},_updateImageServiceLayers:function(e,h){delete h.legendResponse;e._refreshLayers()},_refreshLayers:function(){this.refresh()},_updateAllMapLayers:function(){this.layers=[];s.forEach(this.map.layerIds,function(e){e=this.map.getLayer(e);this._isSupportedLayerType(e)&&
this.layers.push(e)},this);s.forEach(this.map.graphicsLayerIds,function(e){e=this.map.getLayer(e);this._isSupportedLayerType(e)&&(e._params&&e._params.drawMode)&&this.layers.push(e)},this);this.refresh()},_createLegend:function(){var e=!1,h=!1;x.set(this.domNode,"position","relative");B.create("div",{id:this.id+"_msg",className:"esriLegendMsg",innerHTML:this.NLS_creatingLegend+"..."},this.domNode);var n=[];s.forEach(this.layers,function(l){if("esri.layers.KMLLayer"==l.declaredClass||"esri.layers.GeoRSSLayer"==
l.declaredClass){var a;l.loaded?("esri.layers.KMLLayer"==l.declaredClass?a=l.getLayers():"esri.layers.GeoRSSLayer"==l.declaredClass&&(a=l.getFeatureLayers(),this.hideLayersInLegend[l.id]&&(a=s.filter(a,function(e){return-1==s.indexOf(this.hideLayersInLegend[l.id],e.id)},this))),s.forEach(a,function(e){"esri.layers.FeatureLayer"==e.declaredClass&&l._titleForLegend&&(e._titleForLegend=l._titleForLegend+" - ","esriGeometryPoint"==e.geometryType?e._titleForLegend+=this.NLS_points:"esriGeometryPolyline"==
e.geometryType?e._titleForLegend+=this.NLS_lines:"esriGeometryPolygon"==e.geometryType&&(e._titleForLegend+=this.NLS_polygons),n.push(e))},this)):r.connect(l,"onLoad",b.hitch(this,function(){this.refresh(this.layerInfos)}))}else if("esri.layers.WMSLayer"===l.declaredClass)if(l.loaded){if((!this._respectVisibility||this._respectVisibility&&l.visible)&&0<l.layerInfos.length&&s.some(l.layerInfos,function(e){return e.legendURL})){var v=!1;s.forEach(l.layerInfos,function(h){if(h.legendURL&&-1<s.indexOf(l.visibleLayers,
h.name)){v||(B.create("div",{innerHTML:"\x3cspan class\x3d'esriLegendServiceLabel'\x3e"+(l._titleForLegend||l.name||l.id)+"\x3c/span\x3e"},this.domNode),v=!0);var n;h=h.legendURL;if(l.customParameters||l.customLayerParameters){var a=b.clone(l.customParameters||{});b.mixin(a,l.customLayerParameters||{});for(n in a)h+=(-1===h.indexOf("?")?"?":"\x26")+n+"\x3d"+a[n]}B.create("div",{innerHTML:"\x3cimg src\x3d'"+h+"'/\x3e"},this.domNode);e=!0}},this)}}else r.connect(l,"onLoad",b.hitch(this,function(){this.refresh(this.layerInfos)}));
else"esri.layers.WFSLayer"===l.declaredClass&&!l.renderer?(a=B.create("div",{id:this.id+"_"+l.id,"class":"esriLegendService"}),B.create("span",{innerHTML:this._getServiceTitle(l),"class":"esriLegendServiceLabel"},B.create("td",{align:this._align},B.create("tr",{},B.create("tbody",{},B.create("table",{width:"95%"},a))))),B.place(a,this.id,"first"),tableNode=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},a),tableBody=B.create("tbody",{},tableNode),"esriGeometryComplex"===
l.geometryType?(this._buildRow_Renderer(l,l._pointSymbol,null,this.NLS_points,null,tableBody),this._buildRow_Renderer(l,l._lineSymbol,null,this.NLS_lines,null,tableBody),this._buildRow_Renderer(l,l._polygonSymbol,null,this.NLS_areas,null,tableBody)):"esriGeometryPoint"===l.geometryType?this._buildRow_Renderer(l,l._pointSymbol,null,"",null,tableBody):"esriGeometryPolyline"===l.geometryType?this._buildRow_Renderer(l,l._lineSymbol,null,"",null,tableBody):"esriGeometryPolygon"===l.geometryType&&this._buildRow_Renderer(l,
l._polygonSymbol,null,"",null,tableBody),h=!0):n.push(l)},this);var l=[];s.forEach(n,function(e){if(e.loaded){if((!this._respectVisibility||this._respectVisibility&&e.visible)&&(e.layerInfos||e.renderer||"esri.layers.ArcGISImageServiceLayer"==e.declaredClass)){var h=B.create("div",{id:this.id+"_"+e.id,style:{display:"none"},"class":"esriLegendService"});B.create("span",{innerHTML:this._getServiceTitle(e),"class":"esriLegendServiceLabel"},B.create("td",{align:this._align},B.create("tr",{},B.create("tbody",
{},B.create("table",{width:"95%"},h)))));B.place(h,this.id,"first");e.legendResponse||e.renderer?this._createLegendForLayer(e):l.push(this._legendRequest(e))}}else var n=r.connect(e,"onLoad",this,function(e){r.disconnect(n);n=null;this.refresh()})},this);0===l.length&&!e&&!h?(u.byId(this.id+"_msg").innerHTML=this.NLS_noLegend,this._activate()):(new c(l)).addCallback(b.hitch(this,function(n){!e&&!h?u.byId(this.id+"_msg").innerHTML=this.NLS_noLegend:u.byId(this.id+"_msg").innerHTML="";this._activate()}))},
_createLegendForLayer:function(e){if(e.legendResponse||e.renderer){var h=!1;if(e.legendResponse){var n=e.dynamicLayerInfos||e.layerInfos;n&&n.length?s.forEach(n,function(n,l){if(!this.hideLayersInLegend[e.id]||-1===s.indexOf(this.hideLayersInLegend[e.id],n.id)){var a=this._buildLegendItems(e,n,l);h=h||a}},this):"esri.layers.ArcGISImageServiceLayer"==e.declaredClass&&(h=this._buildLegendItems(e,{id:0,name:null,title:e.name,subLayerIds:null,parentLayerId:-1},0))}else e.renderer&&(n=e.url?e.url.substring(e.url.lastIndexOf("/")+
1,e.url.length):"fc_"+e.id,h=this._buildLegendItems(e,{id:n,name:null,subLayerIds:null,parentLayerId:-1},0));h&&(x.set(u.byId(this.id+"_"+e.id),"display","block"),x.set(u.byId(this.id+"_msg"),"display","none"))}},_legendRequest:function(e){if(e.loaded)return 10.01<=e.version?this._legendRequestServer(e):this._legendRequestTools(e);r.connect(e,"onLoad",b.hitch(this,"_legendRequest"))},_legendRequestServer:function(e){var h=e.url,n=h.indexOf("?"),h=-1<n?h.substring(0,n)+"/legend"+h.substring(n):h+"/legend";
(n=e._getToken())&&(h+="?token\x3d"+n);var l=b.hitch(this,"_processLegendResponse"),a={f:"json"};e._params.dynamicLayers&&(a.dynamicLayers=d.stringify(this._createDynamicLayers(e)),"[{}]"===a.dynamicLayers&&(a.dynamicLayers="[]"));e._params.bandIds&&(a.bandIds=e._params.bandIds);e._params.renderingRule?a.renderingRule=e._params.renderingRule:e.rasterFunctionInfos&&0<e.rasterFunctionInfos.length&&s.forEach(e.rasterFunctionInfos,function(e){e&&(e.name&&"none"===e.name.toLowerCase())&&(a.renderingRule=
d.stringify({rasterFunction:e.name}))});return I({url:h,content:a,callbackParamName:"callback",load:function(h,n){l(e,h,n)},error:G.defaults.io.errorHandler})},_legendRequestTools:function(e){var h=e.url.toLowerCase().indexOf("/rest/"),h=e.url.substring(0,h)+e.url.substring(h+5,e.url.length),h=this._legendUrl+"?soapUrl\x3d"+window.escape(h);if(!f("ie")||8<f("ie"))h+="\x26returnbytes\x3dtrue";var n=b.hitch(this,"_processLegendResponse");return I({url:h,content:{f:"json"},callbackParamName:"callback",
load:function(h,l){n(e,h,l)},error:G.defaults.io.errorHandler})},_processLegendResponse:function(e,h){h&&h.layers&&(e.legendResponse=h,u.byId(this.id+"_"+e.id)&&B.empty(u.byId(this.id+"_"+e.id)),B.create("span",{innerHTML:this._getServiceTitle(e),"class":"esriLegendServiceLabel"},B.create("td",{align:this._align},B.create("tr",{},B.create("tbody",{},B.create("table",{width:"95%"},u.byId(this.id+"_"+e.id)))))),this._createLegendForLayer(e))},_buildLegendItems:function(e,h,n){var l=!1,a=u.byId(this.id+
"_"+e.id),b=h.parentLayerId;if(h.subLayerIds)e=B.create("div",{id:this.id+"_"+e.id+"_"+h.id+"_group",style:{display:"none"},"class":-1==b?0<n?"esriLegendGroupLayer":"":this._legendAlign},-1==b?a:u.byId(this.id+"_"+e.id+"_"+b+"_group")),B.create("td",{innerHTML:A.encode(h.name),align:this._align},B.create("tr",{},B.create("tbody",{},B.create("table",{width:"95%","class":"esriLegendLayerLabel"},e))));else{if(this._respectVisibility&&e.visibleLayers)if(n=e.dynamicLayerInfos||e.layerInfos)if(e._params&&
e._params.layers){if(-1===s.indexOf(e.visibleLayers,h.id))return l}else{if(n=this._getReallyVisibleLayers(n,e.visibleLayers),-1===s.indexOf(n,h.id))return l}else if(-1===s.indexOf(e.visibleLayers,h.id))return l;a=B.create("div",{id:this.id+"_"+e.id+"_"+h.id,style:{display:"none"},"class":-1<b?this._legendAlign:""},-1==b?a:u.byId(this.id+"_"+e.id+"_"+b+"_group"));B.create("td",{innerHTML:A.encode(h.name)||"",align:this._align},B.create("tr",{},B.create("tbody",{},B.create("table",{width:"95%","class":"esriLegendLayerLabel"},
a))));e.legendResponse?l=l||this._buildLegendItems_Tools(e,h,a):e.renderer&&(l=l||this._buildLegendItems_Renderer(e,h,a))}return l},_getReallyVisibleLayers:function(e,h){if(!e||!h||!h.length)return[];var n=[],l=[],a;for(a=0;a<e.length;a++)if(e[a].subLayerIds){if(-1===s.indexOf(h,e[a].id)||-1<s.indexOf(l,e[a].id))l=l.concat(e[a].subLayerIds)}else-1<s.indexOf(h,e[a].id)&&-1===s.indexOf(l,e[a].id)&&n.push(e[a].id);return n},_buildLegendItems_Tools:function(e,h,n){var l=h.parentLayerId,a=this.map.getScale(),
b=!1,v=function(e,h){var n,l;for(n=0;n<e.length;n++)if(h.dynamicLayerInfos)for(l=0;l<h.dynamicLayerInfos[l].length;l++){if(h.dynamicLayerInfos[l].mapLayerId==e[n].layerId)return e[n]}else if(h.id==e[n].layerId)return e[n];return{}};if(!this._respectCurrentMapScale||this._respectCurrentMapScale&&this._isLayerInScale(e,h,a)){var d=!0;if(this._respectCurrentMapScale&&("esri.layers.ArcGISDynamicMapServiceLayer"===e.declaredClass||"esri.layers.ArcGISMapServiceLayer"===e.declaredClass)){var c=this._getEffectiveScale(e,
h);if(c.minScale&&c.minScale<a||c.maxScale&&c.maxScale>a)d=!1}if(d){var a=v(e.legendResponse.layers,h),f=a.legendType,C=a.layerType,g=a.legend;if(g){"esri.layers.ArcGISImageServiceLayer"!==e.declaredClass&&this._sanitizeLegendResponse(e,a,h);n=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},n);var k=B.create("tbody",{},n);(e._hoverLabel||e._hoverLabels)&&this._createHoverAction(n,e,h);s.forEach(g,function(n){if(!(10.1<=e.version&&!n.values&&1<g.length&&(e._hideDefaultSymbol||
"\x3call other values\x3e"===n.label||!n.label&&!("esri.layers.ArcGISImageServiceLayer"===e.declaredClass&&10.3<=e.version||"Raster Layer"===C))))if(n.url&&0===n.url.indexOf("http")||n.imageData&&0<n.imageData.length)b=!0,this._buildRow_Tools(n,k,e,h.id,f)},this)}}}b&&(x.set(u.byId(this.id+"_"+e.id+"_"+h.id),"display","block"),-1<l&&(x.set(u.byId(this.id+"_"+e.id+"_"+l+"_group"),"display","block"),this._findParentGroup(e.id,e,l)));return b},_sanitizeLegendResponse:function(e,h,n){var l=h.legend;if(10.1<=
e.version&&1<l.length&&!h._sanitized){e=b.getObject("layerDefinition.drawingInfo.renderer",!1,n);var a,v;e||(e=b.getObject("drawingInfo.renderer",!1,n));s.some(l,function(e){if(e.values)return!0})&&s.some(l,function(e,h){e.values||(v=h,a=e);return!!a});e?"uniqueValue"===e.type?a&&(l.splice(v,1),l.push(a)):"classBreaks"===e.type&&(a&&l.splice(v,1),l.reverse(),a&&l.push(a)):a&&(l.splice(v,1),l.push(a));h._sanitized=!0}},_buildRow_Tools:function(e,h,n,l,a){var b=B.create("tr",{},h),v;this.alignRight?
(h=B.create("td",{align:this._isRightToLeft?"left":"right"},b),v=B.create("td",{align:this._isRightToLeft?"left":"right",width:35},b)):(v=B.create("td",{width:35,align:"center"},b),h=B.create("td",{},b));b=e.url;(!f("ie")||9<=f("ie")||9>f("ie")&&"esri.layers.ArcGISImageServiceLayer"===n.declaredClass)&&e.imageData&&0<e.imageData.length?b="data:image/png;base64,"+e.imageData:0!==e.url.indexOf("http")&&(b=n.url+"/"+l+"/images/"+e.url,(l=n._getToken())&&(b+="?token\x3d"+l));l=B.create("img",{src:b,border:0,
style:"opacity:"+n.opacity},v);e=B.create("td",{innerHTML:A.encode(e.label),align:this._align},B.create("tr",{},B.create("tbody",{},B.create("table",{width:"95%",dir:"ltr"},h))));a&&("Stretched"===a&&10.3<=n.version&&"esri.layers.ArcGISImageServiceLayer"===n.declaredClass)&&(e.style.verticalAlign="top",e.style.lineHeight="1",l.style.marginBottom="-1px",l.style.display="block",h.style.verticalAlign="top");9>f("ie")&&(l.style.filter="alpha(opacity\x3d"+100*n.opacity+")")},_getVariable:function(e,h,
n){var l;e&&(l=(e=e.getVisualVariablesForType(h,n))&&e[0]);return l},_getVariables:function(e,h,n){e=[this._getVariable(e,"colorInfo",!1),this._getVariable(e,"opacityInfo",!1),this._getVariable(e,"sizeInfo",!1)];return h?s.filter(e,function(e){return!(!e||!(e.field===h&&e.normalizationField==n))}):e},_getFieldAlias:function(e,h){var n=h.infoTemplate,n=n&&n.getFieldInfo&&n.getFieldInfo(e),l=b.isFunction(e)?null:h.getField(e),a=n||l,v="";a&&(v=n&&n.label||l&&l.alias||a.name||a.fieldName);return v},
_getRampTitle:function(e,h){var n,l=e.field,a=e.normalizationField,v=!1,c=!1,d=!1,f,l=b.isFunction(l)?null:l,a=b.isFunction(a)?null:a;if(e.legendOptions&&e.legendOptions.title)n=e.legendOptions.title;else{if(h.renderer.authoringInfo&&h.renderer.authoringInfo.visualVariables){var C=h.renderer.authoringInfo.visualVariables;for(f=0;f<C.length;f++){var g=C[f];if("colorInfo"===g.type&&"ratio"===g.style){v=!0;break}else if("colorInfo"===g.type&&"percent"===g.style){c=!0;break}else if("colorInfo"===g.type&&
"percentTotal"===g.style){d=!0;break}}}(v=d&&"showRatioPercentTotal"||c&&"showRatioPercent"||v&&"showRatio"||a&&"showNormField"||l&&"showField"||null)&&(n=M.substitute({field:l&&this._getFieldAlias(l,h),normField:a&&this._getFieldAlias(a,h)},this._i18n[v]))}return n},_getRendererTitle:function(e,h){var n;if(e){var l,a,v;e instanceof R&&(l=e.attributeField,a=e.normalizationField,v="percent-of-total"===e.normalizationType);l=b.isFunction(l)?null:l;a=b.isFunction(a)?null:a;e.legendOptions&&e.legendOptions.title?
n=e.legendOptions.title:(v=a&&"showNormField"||(v?"showNormPct":null)||l&&"showField"||null)&&(n=M.substitute({field:l&&this._getFieldAlias(l,h),normField:a&&this._getFieldAlias(a,h)},this._i18n[v]))}return n},_buildLegendItems_Renderer:function(e,h,n){var l=h.parentLayerId,a=this.map,c=a.getScale(),d,f=!1;if(!this._respectCurrentMapScale||this._isLayerInScale(e,h,c)){var C,g,k="esri.layers.ArcGISImageServiceVectorLayer"===e.declaredClass?e.renderer.renderer:e.renderer,m,w,r,y,q;if(k instanceof X&&
(k=(k="zoom"===k.rangeType?k.getRendererInfoByZoom(a.getZoom()):k.getRendererInfoByScale(c))&&k.renderer,!k))return!1;var t=this._getVariables(k),D=s.filter(t,function(e){return!!e}).length,c=t[0],a=t[1],t=t[2],K,E;c&&(m=this._getMedianColor(k,c),c.field&&(r=b.isFunction(c.field)?null:e.getField(c.field)));a&&a.field&&(q=b.isFunction(a.field)?null:e.getField(a.field));t&&t.field&&(y=b.isFunction(t.field)?null:e.getField(t.field));if(k instanceof v)d=f=!0,this._showHeatRamp(e,h,k,n);else if(k instanceof
V)d=f=!0,this._showDotDensityLegend(e,h,k,n);else if(k instanceof O)d=f=!0,g=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},n),C=B.create("tbody",{},g),(e._hoverLabel||e._hoverLabels)&&this._createHoverAction(g,e,h),k.latestObservationRenderer&&k.latestObservationRenderer instanceof L&&this._buildRow_Renderer(e,k.latestObservationRenderer.symbol,m,A.encode(k.latestObservationRenderer.label)||this.NLS_currentObservations,null,C),k.observationRenderer&&k.observationRenderer instanceof
L&&this._buildRow_Renderer(e,k.observationRenderer.symbol,m,A.encode(k.observationRenderer.label)||this.NLS_previousObservations,null,C);else if(k instanceof Q){if(k.infos&&0<k.infos.length){d=f=!0;g=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},n);C=B.create("tbody",{},g);(e._hoverLabel||e._hoverLabels)&&this._createHoverAction(g,e,h);k.attributeField&&t&&this._addSubHeader(C,this._getFieldAlias(k.attributeField,e));var G=[];s.forEach(k.infos,function(h){var n=
null;e._editable&&e.types&&(n=this._getTemplateFromTypes(e.types,h.value));var l=h.label;null==l&&(l=h.value);-1===s.indexOf(G,l)&&(G.push(l),this._buildRow_Renderer(e,h.symbol,m,A.encode(l),n,C))},this)}E=this._displayDefaultSymbol(e,k,n)}else if(k instanceof R){if(k.infos&&0<k.infos.length||"esri.layers.ArcGISImageServiceVectorLayer"===e.declaredClass){d=f=!0;K=this._isUnclassedRenderer(k);!c&&1===k.infos.length&&(w=(w=k.infos[0])&&w.symbol);K||(g=B.create("table",{cellpadding:0,cellspacing:0,width:"95%",
"class":"esriLegendLayer"},n),C=B.create("tbody",{},g),D=this._getRendererTitle(k,e),this._buildRow_Renderer(e,null,m,A.encode(D),null,C));g=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},n);C=B.create("tbody",{},g);(e._hoverLabel||e._hoverLabels)&&this._createHoverAction(g,e,h);if(!K||!t)D=k.infos.slice(0).reverse(),s.forEach(D,function(h){var n=h.label;null==n&&!K&&(n=h.minValue+" - "+h.maxValue);this._buildRow_Renderer(e,h.symbol,m,A.encode(n),null,C)},this);
if("esri.layers.ArcGISImageServiceVectorLayer"===e.declaredClass&&(e.renderer.style===U.STYLE_SCALAR||e.renderer.style===U.STYLE_SINGLE_ARROW))this._buildRow_Renderer(e,k.defaultSymbol,null,"",null,C),e._hideDefaultSymbol=!0}K||(E=this._displayDefaultSymbol(e,k,n))}else k instanceof L&&(d=f=!0,g=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},n),C=B.create("tbody",{},g),(e._hoverLabel||e._hoverLabels)&&this._createHoverAction(g,e,h),w=null,e._editable&&(e.templates&&
0<e.templates.length)&&(w=e.templates[0]),g=1<D?null:r||q||y,this._buildRow_Renderer(e,k.symbol,m,A.encode(g?this._getRampTitle(1<D?null:c||a||t,e):k.label),w,C),w=c?null:k.symbol,g&&(r=q=y=null));if(d){if(c&&(c.field||c.valueExpression))this._showGradientRamp(e,h,k,null,n,c,r,null,t?!0:!1);if(t&&(t.field||t.valueExpression))d=c||k instanceof Q?!1:!0,this._showSizeLegend(e,h,k,t,m,n,y,null,d);if(a&&(a.field||a.valueExpression))y=w&&!w.url&&w.color?w.color:this.transparencyRampColor,this._showGradientRamp(e,
h,k,y,n,a,q,null,!1)}E||(E=this._displayDefaultSymbol(e,k,n));f=f||E}f&&(x.set(u.byId(this.id+"_"+e.id+"_"+h.id),"display","block"),-1<l&&(x.set(u.byId(this.id+"_"+e.id+"_"+l+"_group"),"display","block"),this._findParentGroup(e.id,l)));return f},_isUnclassedRenderer:function(e,h){var n;if(e instanceof R&&e.infos&&1===e.infos.length){n=e.attributeField;var l=e.normalizationField;n=h?n===h:!!this._getVariables(e,n,l).length}return n},_displayDefaultSymbol:function(e,h,n){var l;!e._hideDefaultSymbol&&
h.defaultSymbol&&(l=!0,n=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},n),n=B.create("tbody",{},n),this._buildRow_Renderer(e,h.defaultSymbol,null,A.encode(h.defaultLabel)||"others",null,n));return l},_showGradientRamp:function(e,h,n,l,a,v,c,d,f){f=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"+(!f?" esriLegendSubFragment":"")},a);a=B.create("tbody",{},f);(e._hoverLabel||e._hoverLabels||d)&&this._createHoverAction(f,e,h,d);
(c||v.valueExpression)&&this._addSubHeader(a,this._getRampTitle(v,e));h=v.field;var C;h&&(C=b.isFunction(h)?null:e.getField(h));(v=this._getRampStops(n,v,l,C&&"esriFieldTypeDate"===C.type))&&v.length&&this._drawGradientRamp(a,v,!0,e,this._getRampBorderColor(n),!!l)},_getMedianColor:function(e,h){var n,l;h.colors?(n=h.minDataValue,l=h.maxDataValue):h.stops&&(n=h.stops[0].value,l=h.stops[h.stops.length-1].value);return e.getColor(n+(l-n)/2,{colorInfo:h})},_getRampStops:function(e,h,n,l){var a,b,v,c,
d=!1;h.colors||h.opacityValues?(b=h.maxDataValue-h.minDataValue,a=s.map([0,0.25,0.5,0.75,1],function(e){v=h.minDataValue+e*b;return Number(v.toFixed(6))}),this._checkPrecision(0,4,a)):h.stops&&(a=s.map(h.stops,function(e){return e.value}),(d=s.some(h.stops,function(e){return!!e.label}))&&(c=s.map(h.stops,function(e){return e.label})));var f=a[0],C,g;b=a[a.length-1]-f;return s.map(a,function(v,m){n?(C=new k(n.toRgba()),g=e.getOpacity(v,{opacityInfo:h}),null!=g&&(C.a=g)):C=e.getColor(v,{colorInfo:h});
var u="";if(d)u=c[m];else{var u=l?S.formatDate(v,S.timelineDateFormatOptions):J.format(v),w="";0===m?w=this._specialChars.lt+" ":m===a.length-1&&(w=this._specialChars.gt+" ");u=w+u}return{value:v,color:C,offset:1-(v-f)/b,label:u}},this).reverse()},_checkPrecision:function(e,h,n){var l=e+(h-e)/2,a=n[e],b=n[l],v=n[h],c=Math.floor(a),d=Math.floor(b),f=Math.floor(v);c===a&&(f===v&&d!==b&&c!==d&&f!==d)&&(n[l]=d);e+1!==l&&this._checkPrecision(e,l,n);l+1!==h&&this._checkPrecision(l,h,n)},_getRampBorderColor:function(e){var h;
if(e instanceof L)h=e.symbol;else if(e instanceof Q||e instanceof R)h=e.infos[0].symbol;return(e=h&&-1===h.type.indexOf("linesymbol")?h.getStroke():null)&&e.color},_drawGradientRamp:function(e,h,n,l,a,b){var v=B.create("tr",{},e),c,d,C,g,m,u=h.length-1,w;g=0;this.alignRight?(e=B.create("td",{align:this._isRightToLeft?"left":"right"},v),c=B.create("td",{align:this._isRightToLeft?"left":"right",width:this.gradientWidth},v)):(c=B.create("td",{width:this.gradientWidth,align:"center"},v),e=B.create("td",
{},v));v=a&&0<a.a&&!(240<=a.r&&240<=a.g&&240<=a.b);d=B.create("div",{"class":v?"":"esriLegendBorderLessColorRamp",style:"position: relative; width:"+this.gradientWidth+"px;"},c);c=B.create("div",{"class":"esriLegendColorRamp"+(b?" esriLegendTransparencyRamp":"")},d);b=x.get(c,"width");v&&(a=9>f("ie")?a.toHex():"rgba("+a.toRgba().join(",")+")",x.set(c,"border",this.colorRampBorder+" "+a));n?(a=this.gradientHeight*u,x.set(c,"height",a+"px")):a=x.get(c,"height");x.set(d,"height",a+"px");v=E.createSurface(c,
b,a);9>f("ie")&&(g=v.getEventSource(),x.set(g,"position","relative"),x.set(g.parentNode,"position","relative"),g=1);try{n&&s.forEach(h,function(e,h){e.offset=h/u}),m=v.createRect({x:-g,y:-g,width:b+g,height:a+g}),m.setFill({type:"linear",x1:0,y1:0,x2:0,y2:a,colors:h}).setStroke(null),v.createRect({width:b,height:a}).setFill(new k([255,255,255,1-l.opacity])).setStroke(null),this._surfaceItems.push(v)}catch(r){v.clear(),v.destroy()}s.forEach(h,function(e,n){if(e.label){w="top:"+100*e.offset+"%;";var l=
"";0===n&&(l+=" esriLegendColorRampTickFirst");n===h.length-1&&(l+=" esriLegendColorRampTickLast");B.create("div",{"class":"esriLegendColorRampTick"+l,innerHTML:"\x26nbsp;",style:w},d)}});C=B.create("div",{"class":"esriLegendColorRampLabels",style:{height:a+this.gradientHeight+"px"}},e);n?s.forEach(h,function(e){B.create("div",{"class":"esriLegendColorRampLabel",innerHTML:A.encode(e.label)||"\x26nbsp;"},C)}):(B.create("div",{"class":"esriLegendColorRampLabel",innerHTML:this._i18n.high},C),B.create("div",
{"class":"esriLegendColorRampLabel",innerHTML:this._i18n.low,style:"top: "+(a+this.gradientHeight-2*this.gradientHeight)+"px;"},C))},_showHeatRamp:function(e,h,n,l,a){var b,v=n.field;b=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},l);l=B.create("tbody",{},b);(e._hoverLabel||e._hoverLabels||a)&&this._createHoverAction(b,e,h,a);(v=v&&e.getField(v))&&this._addSubHeader(l,this._getFieldAlias(v.name,e));h=this._getHeatmapStops(n);h.length&&this._drawGradientRamp(l,
h,!1,e)},_getHeatmapStops:function(e){var h=e.colorStops;e=e.colors;var n,l,a,b;if(h&&h[0])if(n=h.length-1,e=h[0]&&null!=h[0].ratio){if((e=h[n])&&1!==e.ratio)h=h.slice(0),h.push({ratio:1,color:e.color}),n++}else l=h[0].value,a=h[n].value-l,h=s.map(h,function(e){return{color:e.color,ratio:(e.value-l)/a}});else e&&e[0]&&(n=e.length-1,b=1/(e.length-1),h=s.map(e,function(e,h){return{color:e,ratio:h*b}}));h=s.map(h,function(e,h){var l="";0===h?l="Low":h===n&&(l="High");return{color:e.color,label:l,offset:1-
e.ratio}});return h.reverse()},_showDotDensityLegend:function(e,h,n,l){var a=n.legendOptions,v,c,d,f,C,g,k,m=this.dotDensitySwatchSize,u=Math.round(m/2);a&&(c=a.backgroundColor,d=a.outline,f=a.valueUnit,C=a.dotCoverage);C=(C||this.dotCoverage)/100;k=Math.round(m*m/Math.pow(n.dotSize,2)*C);l=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},l);g=B.create("tbody",{},l);(e._hoverLabel||e._hoverLabels)&&this._createHoverAction(l,e,h);this._addSubHeader(g,M.substitute({value:n.dotValue,
unit:f||""},this.NLS_dotValue));s.forEach(n.fields,function(h){h=b.mixin({},h);h.numPoints=k;v=new K(n._generateImageSrc(m,m,[h],{x:0,y:0},{x:m,y:m},c),d||n.outline,m,m);h=e.getField(h.name)||h;this._buildRow_Renderer(e,v,null,A.encode(this._getFieldAlias(h.name,e)),null,g,{type:"path",path:"M "+-u+","+-u+" L "+u+","+-u+" L "+u+","+u+" L "+-u+","+u+" L "+-u+","+-u+" E"})},this)},_showSizeLegend:function(e,h,n,a,v,c,d,f,C){var g=a.legendOptions,g=g&&g.customValues;v=this._getSizeSymbol(n,v);if(!(a.valueUnit&&
"unknown"!==a.valueUnit||!v||!g&&(null==a.minSize||null==a.maxSize))){C=B.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"+(!C?" esriLegendSubFragment":"")},c);c=B.create("tbody",{},C);(e._hoverLabel||e._hoverLabels||f)&&this._createHoverAction(C,e,h,f);(d||a.valueExpression)&&this._addSubHeader(c,this._getRampTitle(a,e));h=a.field;var k;h&&(k=b.isFunction(h)?null:e.getField(h));k=k&&"esriFieldTypeDate"===k.type;g=g||this._getDataValues(n,v,a,k);for(h=C=g.length-1;0<=
h;h--)d=g[h],v=l.fromJson(v.toJson()),this._applySize(v,n,a,d),d=k?S.formatDate(d,S.timelineDateFormatOptions):J.format(d),f="",h===C?f=this._specialChars.gt+" ":0===h&&(f=this._specialChars.lt+" "),f="\x3cspan class\x3d'esriLegendSizeRampLabel'\x3e"+A.encode(f+d)+"\x3c/span\x3e",this._buildRow_Renderer(e,v,null,f,null,c)}},_getSizeSymbol:function(e,h){var n,a;if(e instanceof L)n=e.symbol;else if(e instanceof U)n=e.defaultSymbol;else if(e instanceof Q||e instanceof R)n=e.infos[0].symbol,a=1<e.infos.length;
if(n=n&&-1!==n.type.indexOf("fillsymbol")?null:n)if(n=l.fromJson(n.toJson()),h||a)-1!==n.type.indexOf("linesymbol")?n.setColor(new k(this.sizeRampDarkColor)):(n.setColor(new k(this.sizeRampLightColor)),n.setOutline&&(a=new C,a.setColor(new k(this.sizeRampDarkColor)),a.setWidth(1.5),n.setOutline(a)));return n},_getDataValues:function(e,h,n,l,a,b){a=null==a?5:a;b=null==b?20:b;var v=e.getSizeRangeAtScale(n,this.map.getScale());a=this._interpolateSizeRange(v,a);var c=s.map(a,function(e){return this._getDataValueFromSize(e,
n,v)},this);if(!l){var d,c=J.round(c);for(l=1;l<c.length-1;l++)if(d=this._roundDataValue(e,h,n,c[l],c[l-1],b))c[l]=d[0],a[l]=d[1]}return c},_interpolateSizeRange:function(e,h){var n=e.minSize,l=(e.maxSize-n)/(h-1),a,b=[];for(a=0;a<h;a++)b.push(n+l*a);return b},_getDataValueFromSize:function(e,h,n){var l=n.minSize;n=n.maxSize;var a=h.minDataValue;h=h.maxDataValue;return e=e<=l?a:e>=n?h:(e-l)/(n-l)*(h-a)+a},_roundDataValue:function(e,h,n,l,a,b){var v=this._getSize(h,e,n,l);a=this._getSize(h,e,n,a);
var c,d=J.getDigits(l),f=d.integer,d=d.fractional,C,g,k,m,u,w,r,s,y,q,x;0<l&&1>l&&(c=Math.pow(10,d),l*=c,f=J.getDigits(l).integer);for(f-=1;0<=f&&!(C=Math.pow(10,f),d=Math.floor(l/C)*C,C*=Math.ceil(l/C),null!=c&&(d/=c,C/=c),g=(d+C)/2,g=J.round([d,g,C],{indexes:[1]})[1],k=this._getSize(h,e,n,d),m=this._getSize(h,e,n,C),u=this._getSize(h,e,n,g),w=J.getPctChange(v,k,a,null),r=J.getPctChange(v,m,a,null),s=J.getPctChange(v,u,a,null),y=w.prev<=b,q=r.prev<=b,y&&q&&(w.prev<=r.prev?(y=!0,q=!1):(q=!0,y=!1)),
y?x=[d,k]:q?x=[C,m]:s.prev<=b&&(x=[g,u]),x);f--);return x},_applySize:function(e,h,n,l){var a=e.type;h=this._getSize(e,h,n,l);switch(a){case "simplemarkersymbol":e.setSize(h);break;case "picturemarkersymbol":a=e.width;n=e.height;e.setHeight(h);e.setWidth(h*(a/n));break;case "simplelinesymbol":case "cartographiclinesymbol":e.setWidth(h);break;case "textsymbol":e.font&&e.font.setSize(h)}},_getSize:function(e,h,n,l){return h.getSize(l,{sizeInfo:n,scale:this.map.getScale(),shape:-1!==e.type.indexOf("markersymbol")?
e.style:null})},_buildRow_Renderer:function(e,h,n,l,a,b,v){var c=B.create("tr",{},b),d;this.alignRight?(b=B.create("td",{align:this._isRightToLeft?"left":"right"},c),h&&(d=B.create("td",{align:this._isRightToLeft?"left":"right",width:35},c))):(h&&(d=B.create("td",{width:35,align:"center"},c)),b=B.create("td",{},c));var f=c=30,C;if(h){if("simplemarkersymbol"==h.type)c=Math.min(Math.max(c,h.size+12),125),f=Math.min(Math.max(f,h.size+12),125);else if("picturemarkersymbol"==h.type)c=Math.min(Math.max(c,
h.width),125),f=Math.min(h.height||f,125);else if("textsymbol"==h.type){var g,k;h.text||(g=h.text,k=!0,h.setText(this.defaultText));c=Math.min(Math.max(c,h.getWidth()+12),125);f=Math.min(Math.max(f,h.getHeight()+12),125);k&&h.setText(g)}C=B.create("div",{style:"width:"+c+"px;height:"+f+"px;"},d)}M.isDefined(l)&&"number"===typeof l&&(l=""+l);B.create("td",{innerHTML:l||"",align:this._align},B.create("tr",{},B.create("tbody",{},B.create("table",{width:"95%"},b))));h&&(e=this._drawSymbol(C,h,n,c,f,a,
e,v),this._surfaceItems.push(e))},_addSubHeader:function(e,h){var n=B.create("tr",{},e),n=B.create("td",{align:this._align,colspan:2},n);B.create("td",{innerHTML:A.encode(h)||"",align:this._align},B.create("tr",{},B.create("tbody",{},B.create("table",{width:"95%"},n))))},_drawSymbol:function(e,h,n,a,v,c,d,C){h=l.fromJson(h.toJson());var g=d.opacity;n&&h.setColor(new k(n.toRgba()));if("simplelinesymbol"===h.type||"cartographiclinesymbol"===h.type||"textsymbol"===h.type){if(!h.color)return;n=h.color.toRgba();
n[3]*=g;h.color.setColor(n)}else"simplemarkersymbol"===h.type||"simplefillsymbol"===h.type?(h.color&&(n=h.color.toRgba(),n[3]*=g,h.color.setColor(n)),h.outline&&h.outline.color&&(n=h.outline.color.toRgba(),n[3]*=g,h.outline.color.setColor(n))):"picturemarkersymbol"===h.type&&(e.style.opacity=g,e.style.filter="alpha(opacity\x3d("+100*g+"))");e=E.createSurface(e,a,v);9>f("ie")&&(n=e.getEventSource(),x.set(n,"position","relative"),x.set(n.parentNode,"position","relative"));c=this._getDrawingToolShape(h,
c)||l.getShapeDescriptors(h);var m,g=(n=c.defaultShape)&&"text"===n.type;try{g&&!n.text&&(n.text=this.defaultText),m=e.createShape(C||n).setFill(c.fill).setStroke(c.stroke),g&&m.setFont(c.font)}catch(u){e.clear();e.destroy();return}var w=m.getBoundingBox();C=w.width;c=w.height;var g=-(w.x+C/2),r=-(w.y+c/2);n=e.getDimensions();g={dx:g+n.width/2,dy:r+n.height/2};if("simplemarkersymbol"===h.type&&"path"===h.style)a=d._getScaleMatrix(w,h.size),m.applyTransform(D.scaleAt(a.xx,a.yy,{x:n.width/2,y:n.height/
2}));else if(C>a||c>v)d=C/a>c/v,a=((d?a:v)-5)/(d?C:c),b.mixin(g,{xx:a,yy:a});m.applyTransform(g);return e},_getDrawingToolShape:function(e,h){var n;switch(h?h.drawingTool||null:null){case "esriFeatureEditToolArrow":n={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 Z"};break;case "esriFeatureEditToolTriangle":n={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 Z"};break;case "esriFeatureEditToolRectangle":n={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"};
break;case "esriFeatureEditToolCircle":n={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":n={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;default:return null}return{defaultShape:n,fill:e.getFill(),stroke:e.getStroke()}},_repaintItems:function(){s.forEach(this._surfaceItems,function(e){this._repaint(e)},this)},_repaint:function(e){if(e){e.getStroke&&e.setStroke&&e.setStroke(e.getStroke());try{e.getFill&&e.setFill&&e.setFill(e.getFill())}catch(h){}e.children&&b.isArray(e.children)&&
s.forEach(e.children,this._repaint,this)}},_createHoverAction:function(e,h,n,l){if(l=h._hoverLabel||h._hoverLabels&&h._hoverLabels[n.id]||l)l=A.encode(l),h.mouseMoveHandler=h.mouseMoveHandler||{},h.mouseMoveHandler[n.id]=r.connect(e,"onmousemove",b.hitch(this,function(e,h){this.mouseX=h.clientX;this.mouseY=h.clientY;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,x.set(u.byId(this.id+"_hoverLabel"),"display","none"));setTimeout(b.hitch(this,function(e,h,n){if(e==this.mouseX&&h==this.mouseY&&!this.hoverLabelShowing)if(this.hoverLabelShowing=
!0,u.byId(this.id+"_hoverLabel")){var l=u.byId(this.id+"_hoverLabel");l.innerHTML="\x3cspan\x3e"+n+"\x3c/span\x3e";x.set(l,"top",h+"px");x.set(l,"left",e+15+"px");x.set(l,"display","")}else B.create("div",{innerHTML:"\x3cspan\x3e"+n+"\x3c/span\x3e",id:this.id+"_hoverLabel","class":"esriLegendHoverLabel",style:{top:h+"px",left:e+15+"px"}},document.body)},h.clientX,h.clientY,e),500)},l)),h.mouseOutHandler=h.mouseOutHandler||{},h.mouseOutHandler[n.id]=r.connect(e,"onmouseout",b.hitch(this,function(e){this.mouseY=
this.mouseX=-1;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,x.set(u.byId(this.id+"_hoverLabel"),"display","none"))}))},_removeHoverHandlers:function(){var e;s.forEach(this.layers,function(h){if(h.mouseMoveHandler)for(e in h.mouseMoveHandler)r.disconnect(h.mouseMoveHandler[e]);if(h.mouseOutHandler)for(e in h.mouseOutHandler)r.disconnect(h.mouseOutHandler[e])})},_createDynamicLayers:function(e){var h=[],n;s.forEach(e.dynamicLayerInfos||e.layerInfos,function(l){n={id:l.id};n.source=l.source&&l.source.toJson();
var a;e.layerDefinitions&&e.layerDefinitions[l.id]&&(a=e.layerDefinitions[l.id]);a&&(n.definitionExpression=a);var b;e.layerDrawingOptions&&e.layerDrawingOptions[l.id]&&(b=e.layerDrawingOptions[l.id]);b&&(n.drawingInfo=b.toJson());n.minScale=l.minScale||0;n.maxScale=l.maxScale||0;h.push(n)});return h},_getTemplateFromTypes:function(e,h){var n;for(n=0;n<e.length;n++)if(e[n].id==h&&e[n].templates&&0<e[n].templates.length)return e[n].templates[0];return null},_findParentGroup:function(e,h,n){var l,a=
h.dynamicLayerInfos||h.layerInfos;for(l=0;l<a.length;l++)if(n==a[l].id){-1<a[l].parentLayerId&&(x.set(u.byId(this.id+"_"+e+"_"+a[l].parentLayerId+"_group"),"display","block"),this._findParentGroup(e,h,a[l].parentLayerId));break}},_addSubLayersToHide:function(e){function h(n,l){var a=e.layer.dynamicLayerInfos||e.layer.layerInfos,b,v;for(b=0;b<a.length;b++)if(a[b].id===n&&a[b].subLayerIds)for(v=0;v<a[b].subLayerIds.length;v++){var c=a[b].subLayerIds[v];-1===s.indexOf(l,c)&&(l.push(c),h(c,l))}}e.layer.layerInfos&&
s.forEach(this.hideLayersInLegend[e.layer.id],function(n){h(n,this.hideLayersInLegend[e.layer.id])},this)},_isLayerInScale:function(e,h,n){var l,a=!0;if(e.legendResponse&&e.legendResponse.layers)for(l=0;l<e.legendResponse.layers.length;l++){var b=e.legendResponse.layers[l];if(h.id==b.layerId){var v,c;!e.minScale&&0!==e.minScale||!e.maxScale&&0!==e.maxScale?(0==b.minScale&&e.tileInfo&&(v=e.tileInfo.lods[0].scale),0==b.maxScale&&e.tileInfo&&(c=e.tileInfo.lods[e.tileInfo.lods.length-1].scale)):(v=Math.min(e.minScale,
b.minScale)||e.minScale||b.minScale,c=Math.max(e.maxScale,b.maxScale));if(0<v&&v<n||c>n)a=!1;break}}else if(e.minScale||e.maxScale)if(e.minScale&&e.minScale<n||e.maxScale&&e.maxScale>n)a=!1;return a},_getServiceTitle:function(e){var h=e._titleForLegend;h||((h=e.url)?-1<e.url.indexOf("/MapServer")?(h=e.url.substring(0,e.url.indexOf("/MapServer")),h=h.substring(h.lastIndexOf("/")+1,h.length)):-1<e.url.indexOf("/ImageServer")?(h=e.url.substring(0,e.url.indexOf("/ImageServer")),h=h.substring(h.lastIndexOf("/")+
1,h.length)):-1<e.url.indexOf("/FeatureServer")&&(h=e.url.substring(0,e.url.indexOf("/FeatureServer")),h=h.substring(h.lastIndexOf("/")+1,h.length)):h="",e.name&&(h=0<h.length?h+(" - "+e.name):e.name));"esri.layers.ArcGISImageServiceVectorLayer"===e.declaredClass&&e.vectorFieldPixelFilter&&(e=e.vectorFieldPixelFilter.outputUnit?this["NLS_"+e.vectorFieldPixelFilter.outputUnit]:this["NLS_"+e.vectorFieldPixelFilter.inputUnit],M.isDefined(e)&&(h+=" ("+e+")"));return A.encode(h)},_getEffectiveScale:function(e,
h){var n=h.minScale,l=h.maxScale;if(M.isDefined(h.parentLayerId)){var a=e.layerInfos,b=h.parentLayerId,v;for(v=a.length-1;0<=v;v--)if(a[v].id==b)if(0==n&&0<a[v].minScale?n=a[v].minScale:0<n&&0==a[v].minScale||0<n&&0<a[v].minScale&&(n=Math.min(n,a[v].minScale)),l=Math.max(l||0,a[v].maxScale||0),-1<a[v].parentLayerId)b=a[v].parentLayerId;else break}return{minScale:n,maxScale:l}},_isSupportedLayerType:function(e){return e&&("esri.layers.ArcGISDynamicMapServiceLayer"===e.declaredClass||"esri.layers.ArcGISImageServiceLayer"===
e.declaredClass&&10.2<=e.version||"esri.layers.ArcGISImageServiceVectorLayer"===e.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===e.declaredClass||"esri.layers.FeatureLayer"===e.declaredClass||"esri.layers.StreamLayer"===e.declaredClass||"esri.layers.KMLLayer"===e.declaredClass||"esri.layers.GeoRSSLayer"===e.declaredClass||"esri.layers.WMSLayer"===e.declaredClass||"esri.layers.WFSLayer"===e.declaredClass||"esri.layers.CSVLayer"===e.declaredClass)?!0:!1}});b.mixin(n,{ALIGN_LEFT:0,ALIGN_RIGHT:1});
f("extend-esri")&&b.setObject("dijit.Legend",n,H);return n})},"dojo/debounce":function(){define([],function(){return function(q,t){var b;return function(){b&&clearTimeout(b);var s=this,r=arguments;b=setTimeout(function(){q.apply(s,r)},t)}}})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(q,t,b){q.DeferredList=function(s,r,m,k,g){var f=[];t.call(this);var a=this;0===s.length&&!r&&this.resolve([0,[]]);var c=0;b.forEach(s,function(b,g){function q(b,
d){f[g]=[b,d];c++;c===s.length&&a.resolve(f)}b.then(function(b){r?a.resolve([g,b]):q(!0,b)},function(b){m?a.reject(b):q(!1,b);if(k)return null;throw b;})})};q.DeferredList.prototype=new t;q.DeferredList.prototype.gatherResults=function(s){s=new q.DeferredList(s,!1,!0,!1);s.addCallback(function(r){var m=[];b.forEach(r,function(b){m.push(b[1])});return m});return s};return q.DeferredList})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(q,t,b){function s(b){if("string"==
typeof b||b instanceof String){if(b&&!m.test(b))return k[0]=b,k;b=b.split(m);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:t.filter(b,function(a){return a})}var r,m=/\s+/,k=[""],g={};return r={contains:function(f,a){return 0<=(" "+b.byId(f).className+" ").indexOf(" "+a+" ")},add:function(f,a){f=b.byId(f);a=s(a);var c=f.className,d,c=c?" "+c+" ":" ";d=c.length;for(var g=0,k=a.length,m;g<k;++g)(m=a[g])&&0>c.indexOf(" "+m+" ")&&(c+=m+" ");d<c.length&&(f.className=
c.substr(1,c.length-2))},remove:function(f,a){f=b.byId(f);var c;if(void 0!==a){a=s(a);c=" "+f.className+" ";for(var d=0,g=a.length;d<g;++d)c=c.replace(" "+a[d]+" "," ");c=q.trim(c)}else c="";f.className!=c&&(f.className=c)},replace:function(f,a,c){f=b.byId(f);g.className=f.className;r.remove(g,c);r.add(g,a);f.className!==g.className&&(f.className=g.className)},toggle:function(f,a,c){f=b.byId(f);if(void 0===c){a=s(a);for(var d=0,g=a.length,k;d<g;++d)k=a[d],r[r.contains(f,k)?"remove":"add"](f,k)}else r[c?
"add":"remove"](f,a);return c}}})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u){function B(){}function x(a){return function(c,d,f,g){return c&&"string"==typeof d&&c[d]==B?c.on(d.substring(2).toLowerCase(),k.hitch(f,g)):a.apply(b,arguments)}}q.around(b,
"connect",x);m.connect&&q.around(m,"connect",x);q=s("dijit._Widget",[c,d,u],{onClick:B,onDblClick:B,onKeyDown:B,onKeyPress:B,onKeyUp:B,onMouseDown:B,onMouseMove:B,onMouseOut:B,onMouseOver:B,onMouseLeave:B,onMouseEnter:B,onMouseUp:B,constructor:function(a){this._toConnect={};for(var b in a)this[b]===B&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},
on:function(a,c){return this[this._onMap(a)]===B?b.connect(this.domNode,a.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){m.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){m.deprecated(this.declaredClass+
"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?g("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});r("dijit-legacy-requires")&&f(0,function(){require(["dijit/_base"])});return q})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(q,t,
b,s,r,m,k,g){function f(a,c){var d=function(d,f){if("string"==typeof f&&(f=b.byId(f),!f))return new c([]);var g="string"==typeof d?a(d,f):d?d.end&&d.on?d:[d]:[];return g.end&&g.on?g:new c(g)};d.matches=a.match||function(a,b,c){return 0<d.filter([a],b,c).length};d.filter=a.filter||function(a,b,c){return d(b,c).filter(function(b){return-1<r.indexOf(a,b)})};if("function"!=typeof a){var f=a.search;a=function(a,b){return f(b||document,a)}}return d}t.add("array-extensible",function(){return 1==m.delegate([],
{length:1}).length&&!t("bug-for-in-skips-shadowed")});var a=Array.prototype,c=a.slice,d=a.concat,u=r.forEach,B=function(a,b,d){b=[0].concat(c.call(b,0));d=d||q.global;return function(c){b[0]=c;return a.apply(d,b)}},x=function(a){var b=this instanceof y&&t("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var d=b?this:[],f=d.length=c.length,g=0;g<f;g++)d[g]=c[g];if(b)return d;c=d}m._mixin(c,w);c._NodeListCtor=function(a){return y(a)};return c},
y=x,w=y.prototype=t("array-extensible")?[]:{};y._wrap=w._wrap=function(a,b,c){a=new (c||this._NodeListCtor||y)(a);return b?a._stash(b):a};y._adaptAsMap=function(a,b){return function(){return this.map(B(a,arguments,b))}};y._adaptAsForEach=function(a,b){return function(){this.forEach(B(a,arguments,b));return this}};y._adaptAsFilter=function(a,b){return function(){return this.filter(B(a,arguments,b))}};y._adaptWithCondition=function(a,b,c){return function(){var d=arguments,f=B(a,d,c);if(b.call(c||q.global,
d))return this.map(f);this.forEach(f);return this}};u(["slice","splice"],function(b){var c=a[b];w[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});u(["indexOf","lastIndexOf","every","some"],function(a){var b=r[a];w[a]=function(){return b.apply(q,[this].concat(c.call(arguments,0)))}});m.extend(x,{constructor:y,_NodeListCtor:y,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return s(c,
a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=c.call(this,0),f=r.map(arguments,function(a){return c.call(a,0)});return this._wrap(d.apply(b,f),this)},map:function(a,b){return this._wrap(r.map(this,a,b),this)},forEach:function(a,b){u(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=E._filterResult(this,b[0]);if(1==b.length)return c._stash(this);
d=1}return this._wrap(r.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=m.isFunction(a)?a:m.getObject(a);b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);u(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var E=f(g,x);q.query=f(g,function(a){return x(a)});E.load=function(a,b,c){k.load(a,b,function(a){c(f(a,x))})};q._filterQueryResult=E._filterResult=function(a,b,c){return new x(E.filter(a,
b,c))};q.NodeList=E.NodeList=x;return E})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(q,t,b,s,r){var m=0,k=[],g=0;t=function(){m=1;q._postLoad=q.config.afterOnLoad=!0;f()};var f=function(){if(!g){for(g=1;m&&(!s||0==s._Q.length)&&(b.idle?b.idle():1)&&k.length;){var a=k.shift();try{a()}catch(c){if(c.info=c.message,b.signal)b.signal("error",c);else throw c;}}g=0}};b.on&&b.on("idle",f);s&&(s._onQEmpty=f);var a=q.ready=q.addOnLoad=function(a,
b,c){var g=r._toArray(arguments);"number"!=typeof a?(c=b,b=a,a=1E3):g.shift();c=c?r.hitch.apply(q,g):function(){b()};c.priority=a;for(g=0;g<k.length&&a>=k[g].priority;g++);k.splice(g,0,c);f()},c=q.config.addOnLoad;if(c)a[r.isArray(c)?"apply":"call"](q,c);s?s(t):t();return a})},"dojo/domReady":function(){define(["./has"],function(q){function t(a){f.push(a);g&&b()}function b(){if(!a){for(a=!0;f.length;)try{f.shift()(r)}catch(b){console.error(b,"in domReady callback",b.stack)}a=!1;t._onQEmpty()}}var s=
function(){return this}(),r=document,m={loaded:1,complete:1},k="string"!=typeof r.readyState,g=!!m[r.readyState],f=[],a;t.load=function(a,b,c){t(c)};t._Q=f;t._onQEmpty=function(){};k&&(r.readyState="loading");if(!g){var c=[],d=function(a){a=a||s.event;g||"readystatechange"==a.type&&!m[r.readyState]||(k&&(r.readyState="complete"),g=1,b())},u=function(a,b){a.addEventListener(b,d,!1);f.push(function(){a.removeEventListener(b,d,!1)})};if(!q("dom-addeventlistener")){var u=function(a,b){b="on"+b;a.attachEvent(b,
d);f.push(function(){a.detachEvent(b,d)})},B=r.createElement("div");try{B.doScroll&&null===s.frameElement&&c.push(function(){try{return B.doScroll("left"),1}catch(a){}})}catch(x){}}u(r,"DOMContentLoaded");u(s,"load");"onreadystatechange"in r?u(r,"readystatechange"):k||c.push(function(){return m[r.readyState]});if(c.length){var y=function(){if(!g){for(var a=c.length;a--;)if(c[a]()){d("poller");return}setTimeout(y,30)}};y()}}return t})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window",
"./main"],function(q,t,b){var s={},r={},m={length:0,add:function(b){if(r[b.id])throw Error("Tried to register widget with id\x3d\x3d"+b.id+" but that id is already registered");r[b.id]=b;this.length++},remove:function(b){r[b]&&(delete r[b],this.length--)},byId:function(b){return"string"==typeof b?r[b]:b},byNode:function(b){return r[b.getAttribute("widgetId")]},toArray:function(){var b=[],g;for(g in r)b.push(r[g]);return b},getUniqueId:function(k){var g;do g=k+"_"+(k in s?++s[k]:s[k]=0);while(r[g]);
return"dijit"==b._scopeName?g:b._scopeName+"_"+g},findWidgets:function(b,g){function f(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var d=b.getAttribute("widgetId");d?(d=r[d])&&a.push(d):b!==g&&f(b)}}var a=[];f(b);return a},_destroyAll:function(){b._curFocus=null;b._prevFocus=null;b._activeStack=[];q.forEach(m.findWidgets(t.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var g=1==b.nodeType&&
b.getAttribute("widgetId");if(g)return r[g];b=b.parentNode}return null},_hash:r};return b.registry=m})},"dijit/main":function(){define(["dojo/_base/kernel"],function(q){return q.dijit})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I){function M(a){return function(b){g[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}u.add("dijit-legacy-requires",!B.isAsync);u.add("dojo-bidi",!1);u("dijit-legacy-requires")&&w(0,function(){q(["dijit/_base/manager"])});var J={};s=m("dijit._WidgetBase",[E,H],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:M("lang"),dir:"",_setDirAttr:M("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:s.blankGif||q.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+
d.substr(5,d.length-9),(!b.attributeMap||!(d in b.attributeMap))&&c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=k.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);a&&(this.params=a,x.mixin(this,a));this.postMixInProperties();this.id||(this.id=I.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);
this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=A.body(this.ownerDocument);I.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&(d.parentNode&&this.domNode!==d)&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||
{})a[b]=this._get(b);t.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(t.map(a,function(a){return a+"Rtl"})));f.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||
(this._started=!0,t.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&x.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();t.forEach(this._connects,x.hitch(this,"disconnect"));t.forEach(this._supportingWidgets,b);this.domNode&&t.forEach(I.findWidgets(this.domNode,
this.containerNode),b);this.destroyRendering(a);I.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?g.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){t.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=
this.domNode;x.isObject(a)?d.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];t.forEach(x.isArray(c)?c:[c],function(c){var d=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":x.isFunction(b)&&(b=x.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?g.set(d,c,b):d.set(c,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));
break;case "innerHTML":d.innerHTML=b;break;case "class":f.replace(d,b,this[a]);break;case "toggleClass":f.toggle(d,c.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(x.isFunction(d))var f=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!x.isFunction(this.focusNode)?"focusNode":
"domNode",g=this[d]&&this[d].tagName,k;if(k=g)if(!(k=J[g])){k=this[d];var m={},v;for(v in k)m[v.toLowerCase()]=!0;k=J[g]=m}v=k;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:v&&c.l in v&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return f||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});
return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,f=this["on"+a];f&&(d=f.apply(this,
c?c:[b]));this._started&&!this._beingDestroyed&&y.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,c){var d=this._onMap(a);return d?b.after(this,d,c,!0):this.own(y(this.domNode,a,c))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
I.findWidgets(this.containerNode):[]},getParent:function(){return I.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(r.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(D.subscribe(a,x.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():c.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=d.get(this.domNode,"display")},
placeAt:function(b,c){var d=!b.tagName&&I.byId(b);d&&d.addChild&&(!c||"number"===typeof c)?d.addChild(this,c):(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(c||"")?d.containerNode:d.domNode:k.byId(b,this.ownerDocument),a.place(this.domNode,d,c),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(x.hitch(this,function(){c&&(c=null,this._destroyed||x.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),
c=null);return null}}}});u("dojo-bidi")&&s.extend(G);return s})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(q,t,b,s){return q("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(b){var m=this._attrPairNames;return m[b]?m[b]:m[b]={s:"_"+b+"Setter",g:"_"+b+"Getter"}},postscript:function(b){b&&this.set(b)},_get:function(b,m){return"function"===typeof this[m.g]?this[m.g]():this[b]},get:function(b){return this._get(b,this._getAttrNames(b))},
set:function(b,m){if("object"===typeof b){for(var k in b)b.hasOwnProperty(k)&&"_watchCallbacks"!=k&&this.set(k,b[k]);return this}k=this._getAttrNames(b);var g=this._get(b,k);k=this[k.s];var f;"function"===typeof k?f=k.apply(this,Array.prototype.slice.call(arguments,1)):this[b]=m;if(this._watchCallbacks){var a=this;s(f,function(){a._watchCallbacks(b,g,m)})}return this},_changeAttrValue:function(b,m){var k=this.get(b);this[b]=m;this._watchCallbacks&&this._watchCallbacks(b,k,m);return this},watch:function(r,
m){var k=this._watchCallbacks;if(!k)var g=this,k=this._watchCallbacks=function(a,b,f,m){var r=function(k){if(k){k=k.slice();for(var m=0,r=k.length;m<r;m++)k[m].call(g,a,b,f)}};r(k["_"+a]);m||r(k["*"])};!m&&"function"===typeof r?(m=r,r="*"):r="_"+r;var f=k[r];"object"!==typeof f&&(f=k[r]=[]);f.push(m);var a={};a.unwatch=a.remove=function(){var a=b.indexOf(f,m);-1<a&&f.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(q,
t,b){return b("dijit.Destroyable",null,{destroy:function(b){this._destroyed=!0},own:function(){var b=["destroyRecursive","destroy","remove"];q.forEach(arguments,function(r){function m(){g.remove();q.forEach(f,function(a){a.remove()})}var k,g=t.before(this,"destroy",function(a){r[k](a)}),f=[];r.then?(k="cancel",r.then(m,m)):q.forEach(b,function(a){"function"===typeof r[a]&&(k||(k=a),f.push(t.after(r,a,m,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
function(q,t,b,s,r,m){q=s("dijit._OnDijitClickMixin",null,{connect:function(b,g,f){return this.inherited(arguments,[b,"ondijitclick"==g?m:g,f])}});q.a11yclick=m;return q})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(q,t,b,s){function r(b){if((b.keyCode===q.ENTER||b.keyCode===q.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var m;b(document,"keydown",function(b){r(b)?(m=b.target,b.preventDefault()):
m=null});b(document,"keyup",function(g){r(g)&&g.target==m&&(m=null,b.emit(g.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,metaKey:g.metaKey,altKey:g.altKey,_origType:g.type}))});var k=function(g,f){g.dojoClick=!0;return b(g,"click",f)};k.click=k;k.press=function(g,f){var a=b(g,s.press,function(a){("mousedown"!=a.type||t.isLeft(a))&&f(a)}),c=b(g,"keydown",function(a){(a.keyCode===q.ENTER||a.keyCode===q.SPACE)&&f(a)});return{remove:function(){a.remove();c.remove()}}};
k.release=function(g,f){var a=b(g,s.release,function(a){("mouseup"!=a.type||t.isLeft(a))&&f(a)}),c=b(g,"keyup",function(a){(a.keyCode===q.ENTER||a.keyCode===q.SPACE)&&f(a)});return{remove:function(){a.remove();c.remove()}}};k.move=s.move;return k})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(q,t,b,s,r,m,k,g,f,a){function c(a,b,c){return x&&c?function(a,b){return m(a,c,b)}:w?function(c,d){var v=
m(c,b,function(a){d.call(this,a);L=(new Date).getTime()}),f=m(c,a,function(a){(!L||(new Date).getTime()>L+1E3)&&d.call(this,a)});return{remove:function(){v.remove();f.remove()}}}:function(b,c){return m(b,a,c)}}function d(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function u(c,f,k){if(!g.isRight(c)){var u=d(c.target);if(D=!c.target.disabled&&u&&u.dojoClick)if(H=(A="useTarget"==D)?u:c.target,A&&c.preventDefault(),G=c.changedTouches?c.changedTouches[0].pageX-a.global.pageXOffset:c.clientX,
I=c.changedTouches?c.changedTouches[0].pageY-a.global.pageYOffset:c.clientY,M=("object"==typeof D?D.x:"number"==typeof D?D:0)||4,J=("object"==typeof D?D.y:"number"==typeof D?D:0)||4,!E){E=!0;var w=function(v){D=A?b.isDescendant(a.doc.elementFromPoint(v.changedTouches?v.changedTouches[0].pageX-a.global.pageXOffset:v.clientX,v.changedTouches?v.changedTouches[0].pageY-a.global.pageYOffset:v.clientY),H):D&&(v.changedTouches?v.changedTouches[0].target:v.target)==H&&Math.abs((v.changedTouches?v.changedTouches[0].pageX-
a.global.pageXOffset:v.clientX)-G)<=M&&Math.abs((v.changedTouches?v.changedTouches[0].pageY-a.global.pageYOffset:v.clientY)-I)<=J};a.doc.addEventListener(f,function(a){g.isRight(a)||(w(a),A&&a.preventDefault())},!0);a.doc.addEventListener(k,function(a){if(!g.isRight(a)&&(w(a),D)){S=(new Date).getTime();var c=A?H:a.target;"LABEL"===c.tagName&&(c=b.byId(c.getAttribute("for"))||c);var d=a.changedTouches?a.changedTouches[0]:a,l=function(e){var h=document.createEvent("MouseEvents");h._dojo_click=!0;h.initMouseEvent(e,
!0,!0,a.view,a.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return h},e=l("mousedown"),h=l("mouseup"),n=l("click");setTimeout(function(){m.emit(c,"mousedown",e);m.emit(c,"mouseup",h);m.emit(c,"click",n);S=(new Date).getTime()},0)}},!0);c=function(b){a.doc.addEventListener(b,function(a){var c=a.target;D&&(!a._dojo_click&&(new Date).getTime()<=S+1E3&&!("INPUT"==c.tagName&&s.contains(c,"dijitOffScreen")))&&(a.stopPropagation(),a.stopImmediatePropagation&&
a.stopImmediatePropagation(),"click"==b&&(("INPUT"!=c.tagName||"radio"==c.type&&(s.contains(c,"dijitCheckBoxInput")||s.contains(c,"mblRadioButton"))||"checkbox"==c.type&&(s.contains(c,"dijitCheckBoxInput")||s.contains(c,"mblCheckBox")))&&"TEXTAREA"!=c.tagName&&"AUDIO"!=c.tagName&&"VIDEO"!=c.tagName)&&a.preventDefault())},!0)};c("click");c("mousedown");c("mouseup")}}}var B=5>k("ios"),x=k("pointer-events")||k("MSPointer"),y=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=
k("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),w=k("touch-events"),E,D,A=!1,H,G,I,M,J,S,L,Q;k("touch")&&(x?f(function(){a.doc.addEventListener(y.down,function(a){u(a,y.move,y.up)},!0)}):f(function(){function b(a){var c=r.delegate(a,{bubbles:!0});6<=k("ios")&&(c.touches=a.touches,c.altKey=a.altKey,c.changedTouches=a.changedTouches,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey,c.shiftKey=a.shiftKey,c.targetTouches=a.targetTouches);return c}Q=a.body();a.doc.addEventListener("touchstart",
function(a){L=(new Date).getTime();var b=Q;Q=a.target;m.emit(b,"dojotouchout",{relatedTarget:Q,bubbles:!0});m.emit(Q,"dojotouchover",{relatedTarget:b,bubbles:!0});u(a,"touchmove","touchend")},!0);m(a.doc,"touchmove",function(c){L=(new Date).getTime();var d=a.doc.elementFromPoint(c.pageX-(B?0:a.global.pageXOffset),c.pageY-(B?0:a.global.pageYOffset));d&&(Q!==d&&(m.emit(Q,"dojotouchout",{relatedTarget:d,bubbles:!0}),m.emit(d,"dojotouchover",{relatedTarget:Q,bubbles:!0}),Q=d),m.emit(d,"dojotouchmove",
b(c))||c.preventDefault())});m(a.doc,"touchend",function(c){L=(new Date).getTime();var d=a.doc.elementFromPoint(c.pageX-(B?0:a.global.pageXOffset),c.pageY-(B?0:a.global.pageYOffset))||a.body();m.emit(d,"dojotouchend",b(c))})}));t={press:c("mousedown","touchstart",y.down),move:c("mousemove","dojotouchmove",y.move),release:c("mouseup","dojotouchend",y.up),cancel:c(g.leave,"touchcancel",x?y.cancel:null),over:c("mouseover","dojotouchover",y.over),out:c("mouseout","dojotouchout",y.out),enter:g._eventHandler(c("mouseover",
"dojotouchover",y.over)),leave:g._eventHandler(c("mouseout","dojotouchout",y.out))};return q.touch=t})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(q,t,b,s){s.extend(t,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return b("dijit._FocusMixin",null,{_focusManager:q})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w){var E,D,A=new (t([d,k],{curNode:null,activeStack:[],constructor:function(){var a=g.hitch(this,function(a){b.isDescendant(this.curNode,a)&&this.set("curNode",null);b.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});q.before(m,"empty",a);q.before(m,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var d=this,g=a.document&&a.document.body;if(g){var k=c("pointer-events")?"pointerdown":c("MSPointer")?
"MSPointerDown":c("touch-events")?"mousedown, touchstart":"mousedown",m=f(a.document,k,function(a){if(!a||!(a.target&&null==a.target.parentNode))d._onTouchNode(b||a.target,"mouse")}),u=f(g,"focusin",function(a){if(a.target.tagName){var c=a.target.tagName.toLowerCase();"#document"==c||"body"==c||(x.isFocusable(a.target)?d._onFocusNode(b||a.target):d._onTouchNode(b||a.target))}}),w=f(g,"focusout",function(a){d._onBlurNode(b||a.target)});return{remove:function(){m.remove();u.remove();w.remove();g=m=
u=w=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<E+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(g.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<D+100||(this._clearActiveWidgetsTimer=setTimeout(g.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){D=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);r.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var d=s.get(a,"dijitPopupParent");if(d)a=y.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===u.body())break;a=B.get(a.ownerDocument).frameElement}else{var f=a.getAttribute&&a.getAttribute("widgetId"),g=f&&y.byId(f);g&&!("mouse"==b&&g.get("disabled"))&&c.unshift(f);a=a.parentNode}}}catch(k){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(E=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,f=a.length-1;if(a[f]!=c[d]){this.set("activeStack",a);var g;for(g=d;0<=g&&c[g]!=a[g];g--)if(d=y.byId(c[g]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),
this.emit("widget-blur",d,b);for(g++;g<=f;g++)if(d=y.byId(a[g]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));a(function(){var a=A.registerWin(B.get(document));c("ie")&&f(window,"unload",function(){a&&(a.remove(),a=null)})});w.focus=function(a){A.focus(a)};for(var H in A)/^_/.test(H)||(w.focus[H]="function"==typeof A[H]?g.hitch(A,H):A[H]);A.watch(function(a,b,c){w.focus[a]=c});return A})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),
function(q,t,b,s,r,m,k){t.add("rtl-adjust-position-for-verticalScrollBar",function(f,a){var c=b.body(a),d=k.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},c,"last"),g=k.create("div",{style:{overflow:"hidden",direction:"ltr"}},d,"last"),m=0!=r.position(g).x;d.removeChild(g);c.removeChild(d);return m});t.add("position-fixed-support",function(f,a){var c=b.body(a),d=k.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},c,"last"),g=k.create("span",{style:{position:"fixed",left:"0",top:"0"}},d,"last"),m=r.position(g).x!=r.position(d).x;d.removeChild(g);c.removeChild(d);return m});var g={getBox:function(f){f=f||b.doc;var a="BackCompat"==f.compatMode?b.body(f):f.documentElement,c=r.docScroll(f);if(t("touch")){var d=g.get(f);f=d.innerWidth||a.clientWidth;a=d.innerHeight||a.clientHeight}else f=a.clientWidth,a=a.clientHeight;return{l:c.x,t:c.y,w:f,h:a}},get:function(b){if(t("ie")&&
g!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(f,a){try{f=s.byId(f);var c=f.ownerDocument||b.doc,d=b.body(c),g=c.documentElement||d.parentNode,k=t("ie")||t("trident"),q=t("webkit");if(!(f==d||f==g))if(!t("mozilla")&&(!k&&!q&&!t("opera")&&!t("trident")&&!t("edge"))&&"scrollIntoView"in f)f.scrollIntoView(!1);else{var y="BackCompat"==
c.compatMode,w=Math.min(d.clientWidth||g.clientWidth,g.clientWidth||d.clientWidth),E=Math.min(d.clientHeight||g.clientHeight,g.clientHeight||d.clientHeight),c=q||y?d:g,D=a||r.position(f),A=f.parentNode,q=function(a){return 6>=k||7==k&&y?!1:t("position-fixed-support")&&"fixed"==m.get(a,"position").toLowerCase()},H=this,G=function(a,l,e){"BODY"==a.tagName||"HTML"==a.tagName?H.get(a.ownerDocument).scrollBy(l,e):(l&&(a.scrollLeft+=l),e&&(a.scrollTop+=e))};if(!q(f))for(;A;){A==d&&(A=c);var I=r.position(A),
M=q(A),J="rtl"==m.getComputedStyle(A).direction.toLowerCase();if(A==c){I.w=w;I.h=E;if(c==g&&(k||t("trident"))&&J)I.x+=c.offsetWidth-I.w;I.x=0;I.y=0}else{var S=r.getPadBorderExtents(A);I.w-=S.w;I.h-=S.h;I.x+=S.l;I.y+=S.t;var L=A.clientWidth,Q=I.w-L;0<L&&0<Q&&(J&&t("rtl-adjust-position-for-verticalScrollBar")&&(I.x+=Q),I.w=L);L=A.clientHeight;Q=I.h-L;0<L&&0<Q&&(I.h=L)}M&&(0>I.y&&(I.h+=I.y,I.y=0),0>I.x&&(I.w+=I.x,I.x=0),I.y+I.h>E&&(I.h=E-I.y),I.x+I.w>w&&(I.w=w-I.x));var R=D.x-I.x,X=D.y-I.y,V=R+D.w-I.w,
O=X+D.h-I.h,U,v;if(0<V*R&&(A.scrollLeft||A==c||A.scrollWidth>A.offsetHeight)){U=Math[0>R?"max":"min"](R,V);if(J&&(8==k&&!y||5<=t("trident")))U=-U;v=A.scrollLeft;G(A,U,0);U=A.scrollLeft-v;D.x-=U}if(0<O*X&&(A.scrollTop||A==c||A.scrollHeight>A.offsetHeight))U=Math.ceil(Math[0>X?"max":"min"](X,O)),v=A.scrollTop,G(A,0,U),U=A.scrollTop-v,D.y-=U;A=A!=c&&!M&&A.parentNode}}}catch(K){console.error("scrollIntoView: "+K),f.scrollIntoView(!1)}}};q.setObject("dojo.window",g);return g})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(q,t,b,s,r,m,k){var g={_isElementShown:function(f){var a=s.get(f);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=b.get(f,"type")},hasDefaultTabStop:function(f){switch(f.nodeName.toLowerCase()){case "a":return b.has(f,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var a;try{var c=f.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;a=c.body}catch(d){try{a=f.contentWindow.document.body}catch(g){return!1}}return a&&
("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==f.contentEditable}},effectiveTabIndex:function(f){return b.get(f,"disabled")?void 0:b.has(f,"tabIndex")?+b.get(f,"tabIndex"):g.hasDefaultTabStop(f)?0:void 0},isTabNavigable:function(b){return 0<=g.effectiveTabIndex(b)},isFocusable:function(b){return-1<=g.effectiveTabIndex(b)},_getTabNavigable:function(f){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var c,d,k,r,s,y,w={},q=g._isElementShown,t=g.effectiveTabIndex,A=function(f){for(f=f.firstChild;f;f=f.nextSibling)if(!(1!=f.nodeType||9>=m("ie")&&"HTML"!==f.scopeName||!q(f))){var g=t(f);if(0<=g){if(0==g)c||(c=f),d=f;else if(0<g){if(!k||g<r)r=g,k=f;if(!s||g>=y)y=g,s=f}g=a(f);b.get(f,"checked")&&g&&(w[g]=f)}"SELECT"!=f.nodeName.toUpperCase()&&A(f)}};q(f)&&A(f);return{first:w[a(c)]||c,last:w[a(d)]||d,lowest:w[a(k)]||k,highest:w[a(s)]||s}},getFirstInTabbingOrder:function(b,
a){var c=g._getTabNavigable(t.byId(b,a));return c.lowest?c.lowest:c.first},getLastInTabbingOrder:function(b,a){var c=g._getTabNavigable(t.byId(b,a));return c.last?c.last:c.highest}};r.mixin(k,g);return g})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(q,t,b,s,r){var m=r.doc.documentElement;r=s("ie");var k=s("trident"),g=s("opera"),f=Math.floor,a=s("ff"),c=q.boxModel.replace(/-/,""),g={dj_quirks:s("quirks"),dj_opera:g,dj_khtml:s("khtml"),
dj_webkit:s("webkit"),dj_safari:s("safari"),dj_chrome:s("chrome"),dj_edge:s("edge"),dj_gecko:s("mozilla"),dj_ios:s("ios"),dj_android:s("android")};r&&(g.dj_ie=!0,g["dj_ie"+f(r)]=!0,g.dj_iequirks=s("quirks"));k&&(g.dj_trident=!0,g["dj_trident"+f(k)]=!0);a&&(g["dj_ff"+f(a)]=!0);g["dj_"+c]=!0;var d="",u;for(u in g)g[u]&&(d+=u+" ");m.className=t.trim(m.className+" "+d);b(function(){if(!q.isBodyLtr()){var a="dj_rtl dijitRtl "+d.replace(/ /g,"-rtl ");m.className=t.trim(m.className+" "+a+"dj_rtl dijitRtl "+
d.replace(/ /g,"-rtl "))}});return s})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(q,t,b,s){b(function(){t("highcontrast")&&q.add(s.body(),"dijit_a11y")});return t})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(q,t,b,s,r,m,k){r.add("highcontrast",function(){var b=k.doc.createElement("div");try{b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+
(t.blankGif||q.toUrl("./resources/blank.gif"))+'");';k.body().appendChild(b);var f=s.getComputedStyle(b),a=f.backgroundImage;return f.borderTopColor==f.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a)}catch(c){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+c.toString()),!1}finally{8>=r("ie")?b.outerHTML="":k.body().removeChild(b)}});m(function(){r("highcontrast")&&b.add(k.body(),"dj_a11y")});return r})},"dojox/gfx":function(){define(["dojo/_base/lang",
"./gfx/_base","./gfx/renderer!"],function(q,t,b){t.switchTo(b);return t})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(q,t,b,s,r){var m=null;b.add("vml",function(b,g,f){f.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';b="adj"in f.firstChild;f.innerHTML="";return b});return{load:function(k,g,f){function a(){g(["dojox/gfx/"+c],function(a){q.renderer=c;m=a;f(a)})}if(m&&"force"!=k)f(m);else{var c=r.forceGfxRenderer;
k=!c&&(t.isString(r.gfxRenderer)?r.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var d,u;!c&&k.length;)switch(k.shift()){case "svg":"SVGAngle"in s.global&&(c="svg");break;case "vml":b("vml")&&(c="vml");break;case "silverlight":try{b("ie")?(d=new ActiveXObject("AgControl.AgControl"))&&d.IsVersionSupported("1.0")&&(u=!0):navigator.plugins["Silverlight Plug-In"]&&(u=!0)}catch(B){u=!1}finally{d=null}u&&(c="silverlight");break;case "canvas":s.global.CanvasRenderingContext2D&&(c="canvas")}"canvas"===
c&&!1!==r.canvasEvents&&(c="canvasWithEvents");"svg"==c&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(a):a()}}}})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(q,t){var b=q.matrix={},s={};b._degToRad=function(b){return s[b]||(s[b]=Math.PI*b/180)};b._radToDeg=function(b){return 180*(b/Math.PI)};b.Matrix2D=function(r){if(r)if("number"==typeof r)this.xx=this.yy=r;else if(r instanceof Array){if(0<r.length){for(var m=b.normalize(r[0]),k=1;k<r.length;++k){var g=
m,f=b.normalize(r[k]),m=new b.Matrix2D;m.xx=g.xx*f.xx+g.xy*f.yx;m.xy=g.xx*f.xy+g.xy*f.yy;m.yx=g.yx*f.xx+g.yy*f.yx;m.yy=g.yx*f.xy+g.yy*f.yy;m.dx=g.xx*f.dx+g.xy*f.dy+g.dx;m.dy=g.yx*f.dx+g.yy*f.dy+g.dy}t.mixin(this,m)}}else t.mixin(this,r)};t.extend(b.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});t.mixin(b,{identity:new b.Matrix2D,flipX:new b.Matrix2D({xx:-1}),flipY:new b.Matrix2D({yy:-1}),flipXY:new b.Matrix2D({xx:-1,yy:-1}),translate:function(r,m){return 1<arguments.length?new b.Matrix2D({dx:r,dy:m}):
new b.Matrix2D({dx:r.x,dy:r.y})},scale:function(r,m){return 1<arguments.length?new b.Matrix2D({xx:r,yy:m}):"number"==typeof r?new b.Matrix2D({xx:r,yy:r}):new b.Matrix2D({xx:r.x,yy:r.y})},rotate:function(r){var m=Math.cos(r);r=Math.sin(r);return new b.Matrix2D({xx:m,xy:-r,yx:r,yy:m})},rotateg:function(r){return b.rotate(b._degToRad(r))},skewX:function(r){return new b.Matrix2D({xy:Math.tan(r)})},skewXg:function(r){return b.skewX(b._degToRad(r))},skewY:function(r){return new b.Matrix2D({yx:Math.tan(r)})},
skewYg:function(r){return b.skewY(b._degToRad(r))},reflect:function(r,m){1==arguments.length&&(m=r.y,r=r.x);var k=r*r,g=m*m,f=k+g,a=2*r*m/f;return new b.Matrix2D({xx:2*k/f-1,xy:a,yx:a,yy:2*g/f-1})},project:function(r,m){1==arguments.length&&(m=r.y,r=r.x);var k=r*r,g=m*m,f=k+g,a=r*m/f;return new b.Matrix2D({xx:k/f,xy:a,yx:a,yy:g/f})},normalize:function(r){return r instanceof b.Matrix2D?r:new b.Matrix2D(r)},isIdentity:function(b){return 1==b.xx&&0==b.xy&&0==b.yx&&1==b.yy&&0==b.dx&&0==b.dy},clone:function(r){var m=
new b.Matrix2D,k;for(k in r)"number"==typeof r[k]&&("number"==typeof m[k]&&m[k]!=r[k])&&(m[k]=r[k]);return m},invert:function(r){r=b.normalize(r);var m=r.xx*r.yy-r.xy*r.yx;return r=new b.Matrix2D({xx:r.yy/m,xy:-r.xy/m,yx:-r.yx/m,yy:r.xx/m,dx:(r.xy*r.dy-r.yy*r.dx)/m,dy:(r.yx*r.dx-r.xx*r.dy)/m})},_multiplyPoint:function(b,m,k){return{x:b.xx*m+b.xy*k+b.dx,y:b.yx*m+b.yy*k+b.dy}},multiplyPoint:function(r,m,k){r=b.normalize(r);return"number"==typeof m&&"number"==typeof k?b._multiplyPoint(r,m,k):b._multiplyPoint(r,
m.x,m.y)},multiplyRectangle:function(r,m){var k=b.normalize(r);m=m||{x:0,y:0,width:0,height:0};if(b.isIdentity(k))return{x:m.x,y:m.y,width:m.width,height:m.height};var g=b.multiplyPoint(k,m.x,m.y),f=b.multiplyPoint(k,m.x,m.y+m.height),a=b.multiplyPoint(k,m.x+m.width,m.y),c=b.multiplyPoint(k,m.x+m.width,m.y+m.height),k=Math.min(g.x,f.x,a.x,c.x),d=Math.min(g.y,f.y,a.y,c.y),u=Math.max(g.x,f.x,a.x,c.x),g=Math.max(g.y,f.y,a.y,c.y);return{x:k,y:d,width:u-k,height:g-d}},multiply:function(r){for(var m=b.normalize(r),
k=1;k<arguments.length;++k){var g=m,f=b.normalize(arguments[k]),m=new b.Matrix2D;m.xx=g.xx*f.xx+g.xy*f.yx;m.xy=g.xx*f.xy+g.xy*f.yy;m.yx=g.yx*f.xx+g.yy*f.yx;m.yy=g.yx*f.xy+g.yy*f.yy;m.dx=g.xx*f.dx+g.xy*f.dy+g.dx;m.dy=g.yx*f.dx+g.yy*f.dy+g.dy}return m},_sandwich:function(r,m,k){return b.multiply(b.translate(m,k),r,b.translate(-m,-k))},scaleAt:function(r,m,k,g){switch(arguments.length){case 4:return b._sandwich(b.scale(r,m),k,g);case 3:return"number"==typeof k?b._sandwich(b.scale(r),m,k):b._sandwich(b.scale(r,
m),k.x,k.y)}return b._sandwich(b.scale(r),m.x,m.y)},rotateAt:function(r,m,k){return 2<arguments.length?b._sandwich(b.rotate(r),m,k):b._sandwich(b.rotate(r),m.x,m.y)},rotategAt:function(r,m,k){return 2<arguments.length?b._sandwich(b.rotateg(r),m,k):b._sandwich(b.rotateg(r),m.x,m.y)},skewXAt:function(r,m,k){return 2<arguments.length?b._sandwich(b.skewX(r),m,k):b._sandwich(b.skewX(r),m.x,m.y)},skewXgAt:function(r,m,k){return 2<arguments.length?b._sandwich(b.skewXg(r),m,k):b._sandwich(b.skewXg(r),m.x,
m.y)},skewYAt:function(r,m,k){return 2<arguments.length?b._sandwich(b.skewY(r),m,k):b._sandwich(b.skewY(r),m.x,m.y)},skewYgAt:function(r,m,k){return 2<arguments.length?b._sandwich(b.skewYg(r),m,k):b._sandwich(b.skewYg(r),m.x,m.y)}});q.Matrix2D=b.Matrix2D;return b})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(q){var t=q.getObject("dojox.html.entities",!0),b=function(b,m){var k,g;if(m._encCache&&m._encCache.regexp&&m._encCache.mapper&&m.length==m._encCache.length)k=m._encCache.mapper,
g=m._encCache.regexp;else{k={};g=["["];var f;for(f=0;f<m.length;f++)k[m[f][0]]="\x26"+m[f][1]+";",g.push(m[f][0]);g.push("]");g=RegExp(g.join(""),"g");m._encCache={mapper:k,regexp:g,length:m.length}}return b=b.replace(g,function(a){return k[a]})},s=function(b,m){var k,g;if(m._decCache&&m._decCache.regexp&&m._decCache.mapper&&m.length==m._decCache.length)k=m._decCache.mapper,g=m._decCache.regexp;else{k={};g=["("];var f;for(f=0;f<m.length;f++){var a="\x26"+m[f][1]+";";f&&g.push("|");k[a]=m[f][0];g.push(a)}g.push(")");
g=RegExp(g.join(""),"g");m._decCache={mapper:k,regexp:g,length:m.length}}return b=b.replace(g,function(a){return k[a]})};t.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];t.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],
["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca",
"Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4",
"auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe",
"thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2",
"beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],
["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],
["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295",
"oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e",
"lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];t.encode=function(r,m){r&&(m?r=b(r,m):(r=b(r,t.html),r=b(r,t.latin)));return r};t.decode=function(b,m){b&&(m?b=s(b,m):(b=s(b,t.html),b=s(b,t.latin)));return b};return t})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/io/script dojo/io/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w){function E(a){a=new m(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function D(a){return this._xhr?this._xhr.getResponseHeader(a):null}function A(m,u,w,q){var v=!1,A=!1,C;x.isDefined(u)&&(r.isObject(u)?(v=!!u.useProxy,A=!!u.usePost,C=u.crossOrigin):v=!!u);m=r.mixin({},m);m._ssl&&(m.url=m.url.replace(/^http:/i,"https:"));u=m.content;var l=m.url,e=w&&m.form,h=L;C=x.isDefined(C)?C:h.useCors;m.load=function(e){var h;e&&(e.error?(h=r.mixin(Error(),e.error),
h.log=b.isDebug):"error"===e.status&&(h=r.mixin(Error(),e),h.log=b.isDebug),h&&!x.isDefined(h.httpCode)&&(h.httpCode=h.code));return h||e};m.error=function(e,n){n&&n.xhr&&n.xhr.abort();e instanceof Error||(e=r.mixin(Error(),e));e.log=b.isDebug;h.errorHandler(e,n);return e};m._token&&(m.content=m.content||{},m.content.token=m._token);var n=0,z;u&&l&&(z=c.objectToQuery(u),n=z.length+l.length+1,B("esri-url-encodes-apostrophe")&&(n=z.replace(/'/g,"%27").length+l.length+1));m.timeout=x.isDefined(m.timeout)?
m.timeout:h.timeout;m.handleAs=m.handleAs||"json";try{var F,N,T=C&&y.canUseXhr(m.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(m.url),W=y.hasSameOrigin(m.url,window.location.href)||T,ea=A||w||n>h.postLength?!0:!1,na=!W&&-1!==m.handleAs.indexOf("json")&&m.callbackParamName&&!w?!0:!1,D=y.getProxyRule(m.url)||h.alwaysUseProxy||v||(!na||ea)&&!W?!0:!1;w&&(!B("esri-file-upload")&&!D&&T)&&(D=!0);if(D)if(F=y.getProxyUrl(l,C),N=F.path,F._xo&&(T=!0),!ea&&N.length+1+n>h.postLength&&(ea=!0),m.url=
N+"?"+l,ea)m.content=r.mixin(F.query||{},u);else{var E=c.objectToQuery(r.mixin(F.query||{},u));E&&(m.url+="?"+E);m.content=null}if(na&&!ea)return!x.isDefined(m.isAsync)&&4>B("ff")&&(m.isAsync=!0),g.get(S?S(m):m);var J=m.headers;if(T&&(!J||!J.hasOwnProperty("X-Requested-With")))J=m.headers=J||{},J["X-Requested-With"]=null;if(w){var G=m.callbackParamName||"callback.html",I=m.callbackElementName||"textarea",M,Q,H,Ia,Ea=e.elements?e.elements.length:0,Ca;if(u=m.content)for(M in u)if(H=u[M],x.isDefined(H)){Q=
null;for(Ia=0;Ia<Ea;Ia++)if(Ca=e.elements[Ia],Ca.name===M){Q=Ca;break}Q?Q.value=H:q?e.append(M,H):e.appendChild(a.create("input",{type:"hidden",name:M,value:H}))}if(B("esri-file-upload"))t.forEach(e.elements,function(h){h.name===G&&e.removeChild(h)}),m.contentType=!1,m.postData=q?e:new FormData(e),delete m.form;else{e.enctype="multipart/form-data";9>B("ie")&&(e.encoding="multipart/form-data");e.method="post";t.some(e.elements,function(e){return e.name===G})||e.appendChild(a.create("input",{type:"hidden",
name:G,value:I}));if(-1!==l.toLowerCase().indexOf("addattachment")||-1!==l.toLowerCase().indexOf("updateattachment"))m.url=l+(-1===l.indexOf("?")?"?":"\x26")+G+"\x3d"+I,D&&(m.url=N+"?"+m.url);delete m.content}}if(T&&!m.hasOwnProperty("withCredentials")&&"with-credentials"===L.useCors){q=D?N:l;var ta=y.canUseXhr(q,!0),oa=-1<ta?L.corsEnabledServers[ta]:null;if(oa&&oa.hasOwnProperty("withCredentials"))oa.withCredentials&&(m.withCredentials=!0);else if(d.id){var Aa=d.id.findServerInfo(q);Aa&&Aa.webTierAuth&&
(m.withCredentials=!0)}}m=S?S(m):m;if(ea){if(w&&!B("esri-file-upload"))return f.send(m);!D&&B("safari")&&(m.url+=(-1===m.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+R++);return k.post(m)}return k.get(m)}catch(Na){return w=new s,w.errback(m.error(Na)),w}}function H(a){var b=L.corsStatus,c=y.canUseXhr(a,!0);-1<c&&L.corsEnabledServers.splice(c,1);b[E(a)]=1;return c}function G(a){var b=L.corsStatus;if(L.corsDetection&&L.useCors)try{var c=E(a);B("esri-cors")&&(a&&-1!==a.toLowerCase().indexOf("/rest/services")&&
!y.hasSameOrigin(a,window.location.href)&&!y.canUseXhr(a)&&!b[c])&&(b[c]=-1,k.get({url:a.substring(0,a.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(v){v?(b[c]=2,y.canUseXhr(a)||L.corsEnabledServers.push(c)):b[c]=1},function(a){b[c]=1}))}catch(d){}}function I(a){S=a}function M(a,c){function f(e){e._pendingDfd=A(a,c,n,h);if(!e._pendingDfd){e.ioArgs=e._pendingDfd&&e._pendingDfd.ioArgs;var l=Error("Deferred object is missing");
l.log=b.isDebug;a._usrDfd=null;e.errback(l);e._pendingDfd=null;return e}e._pendingDfd.addCallback(function(h){e.ioArgs=e._pendingDfd&&e._pendingDfd.ioArgs;a._usrDfd=null;c.returnFullResponse&&(h={data:h,_xhr:e.ioArgs&&e.ioArgs.xhr,getHeader:D});e.callback(h);e._pendingDfd=null}).addErrback(function(h){var n,l,b;h&&(n=h.code,l=h.subcode,b=(b=h.messageCode)&&b.toUpperCase());if(h&&403==n&&(4==l||h.message&&-1<h.message.toLowerCase().indexOf("ssl")&&-1===h.message.toLowerCase().indexOf("permission"))){if(!a._ssl){a._ssl=
a._sslFromServer=!0;a._usrDfd=e;M(a,c);return}}else if(h&&415==h.status){if(H(a.url),!a._err415){a._err415=1;a._usrDfd=e;M(a,c);return}}else if(d.id&&-1!==t.indexOf(d.id._errorCodes,n)&&!d.id._isPublic(a.url)&&!m&&(403!=n||-1===t.indexOf(Q,b)&&(!x.isDefined(l)||2==l&&a._token))){e._pendingDfd=d.id.getCredential(a.url,{token:a._token,error:h});e._pendingDfd.addCallback(function(h){a._token=h.token;a._usrDfd=e;a._credential=h;a._ssl=a._sslFromServer||h.ssl;M(a,c)}).addErrback(function(h){a._usrDfd=
null;e.errback(h);e._pendingDfd=null});return}e.ioArgs=e._pendingDfd&&e._pendingDfd.ioArgs;a._usrDfd=null;e.errback(h);e._pendingDfd=null})}a.url=y.fixUrl(a.url);y.isHTTP()&&(a.url=y.getAbsoluteUrl(a.url));c=c||{};var g,v=a.form,m=c.disableIdentityLookup,C=c._preLookup,l=!1;if(B("esri-workers")&&!1!==L.useWorkers)if(!0===c.useWorkers||!0===L.useWorkers)l=!0;else if(c.workerOptions){var e=c.workerOptions;if(e.callback||e.worker&&e.worker.worker instanceof Worker)l=!0}var h=v&&B("esri-file-upload")&&
v instanceof FormData,n=v&&(v.elements?t.some(v.elements,function(e){return"file"===e.type}):h),z=-1!==a.url.toLowerCase().indexOf("token\x3d")||a.content&&a.content.token||n&&t.some(v.elements,function(e){return"token"===e.name})?1:0;G(a.url);if(a._usrDfd)g=a._usrDfd;else{g=new s(w._dfdCanceller);g.addCallback(function(e){if((/\/sharing\/rest\/accounts\/self/i.test(a.url)||/\/sharing\/rest\/portals\/self/i.test(a.url))&&!z&&!a._token&&e.user&&e.user.username){L.webTierAuthServers.push(E(a.url));
e=L.corsEnabledServers;var h=y.canUseXhr(a.url,!0),n={host:E(a.url),withCredentials:!0};if(-1===h)e.push(n);else{var l=e[h];"object"===typeof l?l.withCredentials=!0:e.splice(h,1,n)}}if(e=a._credential)if(h=(h=d.id.findServerInfo(e.server))&&h.owningSystemUrl)h=h.replace(/\/?$/,"/sharing"),(e=d.id.findCredential(h,e.userId))&&-1===d.id._getIdenticalSvcIdx(h,e)&&e.resources.splice(0,0,h)});g.addBoth(function(e){delete a._credential;if(e&&(!B("ie")||!e.nodeType))e._ssl=a._ssl});var F=a.load,N=a.error;
F&&g.addCallback(function(e){var h=g._pendingDfd,h=h&&h.ioArgs;return F.call(h&&h.args,e,h)});N&&g.addErrback(function(e){var h=g._pendingDfd,h=h&&h.ioArgs;return N.call(h&&h.args,e,h)})}if(d.id&&!z&&!a._token&&!d.id._isPublic(a.url)&&(!m||C))if(v=d.id.findCredential(a.url))a._token=v.token,a._ssl=v.ssl;l?c.workerOptions&&c.workerOptions.worker?(J||(J=k),k=c.workerOptions.worker,f(g)):q(["./workers/RequestClient"],function(e){J||(J=k);if(c.workerOptions){var h=c.workerOptions;k=e.getClient(h.callback,
h.cbFunction)}else k=e.getClient();f(g)}):(J&&(k=J,J=null),f(g));return g}var J=null,S,L=u.defaults.io,Q=["COM_0056","COM_0057"],R=0;M._request=A;M._disableCors=H;M._detectCors=G;M.setRequestPreCallback=I;B("extend-esri")&&(d.request=M,d._request=A,d._disableCors=H,d._detectCors=G,d.setRequestPreCallback=I);return M})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),
function(q,t,b,s,r,m,k,g,f,a){t.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var c={get:function(b){var g,k=this._makeScriptDeferred(b,function(a){g&&g.cancel()}),r=k.ioArgs;m._ioAddQueryToUrl(r);m._ioNotifyStart(k);g=f.get(r.url,{timeout:b.timeout,jsonp:r.jsonp,checkString:b.checkString,ioArgs:r,frameDoc:b.frameDoc,canAttach:function(a){r.requestId=a.id;r.scriptId=a.scriptId;r.canDelete=a.canDelete;return c._canAttach(r)}},!0);a.around(g,"isValid",function(a){return function(b){c._validCheck(k);
return a.call(this,b)}});g.then(function(){k.resolve(k)}).otherwise(function(a){k.ioArgs.error=a;k.reject(a)});return k},attach:f._attach,remove:f._remove,_makeScriptDeferred:function(a,b){var g=m._ioSetArgs(a,b||this._deferredCancel,this._deferredOk,this._deferredError),k=g.ioArgs;k.id=t._scopeName+"IoScript"+(a.callbackSuffix||this._counter++);k.canDelete=!1;k.jsonp=a.callbackParamName||a.jsonp;k.jsonp&&(k.query=k.query||"",0<k.query.length&&(k.query+="\x26"),k.query+=k.jsonp+"\x3d"+(a.frameDoc?
"parent.":"")+t._scopeName+".io.script.jsonp_"+k.id+"._jsonpCallback",k.frameDoc=a.frameDoc,k.canDelete=!0,g._jsonpCallback=this._jsonpCallback,this["jsonp_"+k.id]=g);g.addBoth(function(a){k.canDelete&&(a instanceof Error?c["jsonp_"+k.id]._jsonpCallback=function(){delete c["jsonp_"+k.id];if(k.requestId)t.global[f._callbacksProperty][k.requestId]()}:c._addDeadScript(k))});return g},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a,
b){return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){c._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(a){if((a=c._deadScripts)&&0<a.length){for(var b=0;b<a.length;b++)c.remove(a[b].id,a[b].frameDoc),delete c["jsonp_"+a[b].id],a[b].frameDoc=null;c._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") !\x3d 'undefined'")},_resHandle:function(a){c._ioCheck(a)?
a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)t.global[f._callbacksProperty][this.ioArgs.requestId](a)}};b.setObject("dojo.io.script",c);return c})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(q,t,b,s,r,m,k,g,f,a,c){function d(a,
b){a.canDelete&&w._remove(a.id,b.options.frameDoc,!0)}function u(a){I&&I.length&&(r.forEach(I,function(a){w._remove(a.id,a.frameDoc);a.frameDoc=null}),I=[]);return a.options.jsonp?!a.data:!0}function B(a){return!!this.scriptLoaded}function x(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function y(a,b){if(this.canDelete){var c=this.response.options;I.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&(c.ioArgs.frameDoc=null);c.frameDoc=null}b?
this.reject(b):this.resolve(a)}function w(a,c,f){var g=b.parseArgs(a,b.deepCopy({},c));a=g.url;c=g.options;var r=b.deferred(g,d,u,c.jsonp?null:c.checkString?x:B,y);m.mixin(r,{id:E+D++,canDelete:!1});c.jsonp&&(RegExp("[?\x26]"+c.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+c.jsonp+"\x3d"+(c.frameDoc?"parent.":"")+E+"_callbacks."+r.id),r.canDelete=!0,G[r.id]=function(a){g.data=a;r.handleResponse(g)});b.notify&&b.notify.emit("send",g,r.promise.cancel);if(!c.canAttach||c.canAttach(r)){var s=
w._attach(r.id,a,c.frameDoc);if(!c.jsonp&&!c.checkString)var q=k(s,A,function(a){if("load"===a.type||H.test(s.readyState))q.remove(),r.scriptLoaded=a})}k.once(s,"error",function(a){r.reject(a);w._remove(r.id,c.frameDoc,!0)});t(r);return f?r:r.promise}a.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var E=q.id.replace(/[\/\.\-]/g,"_"),D=0,A=a("script-readystatechange")?
"readystatechange":"load",H=/complete|loaded/,G=s.global[E+"_callbacks"]={},I=[];w.get=w;w._attach=function(a,b,d){d=d||c.doc;var f=d.createElement("script");f.type="text/javascript";f.src=b;f.id=a;f.async=!0;f.charset="utf-8";return d.getElementsByTagName("head")[0].appendChild(f)};w._remove=function(a,b,c){f.destroy(g.byId(a,b));G[a]&&(c?G[a]=function(){delete G[a]}:delete G[a])};w._callbacksProperty=E+"_callbacks";return w})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u){b.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");m=u._iframeName;m=m.substring(0,m.lastIndexOf("_"));var B=s.delegate(u,{create:function(){return B._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(a){var c,f=r._ioSetArgs(a,function(a){c&&c.cancel()},function(a){var d=null;a=a.ioArgs;try{var f=a.handleAs;"xml"===f||"html"===f?d=c.response.data:(d=c.response.text,"json"===f?d=t.fromJson(d):"javascript"===f&&(d=b.eval(d)))}catch(g){d=
g}return d},function(a,b){b.ioArgs._hasError=!0;return a}),k=f.ioArgs,m="GET",s=g.byId(a.form);a.method&&("POST"===a.method.toUpperCase()&&s)&&(m="POST");a={method:m,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:s?null:a.content,data:s?a.content:null,timeout:a.timeout,ioArgs:k};a.method&&(a.method=a.method.toUpperCase());if(q.ioPublish&&b.publish&&!1!==k.args.ioPublish)var B=d.after(u,"_notifyStart",function(a){a.options.ioArgs===k&&(B.remove(),r._ioNotifyStart(f))},
!0);c=u(k.url,a,!0);k._callNext=c._callNext;c.then(function(){f.resolve(f)}).otherwise(function(a){f.ioArgs.error=a;f.reject(a)});return f},_iframeOnload:k.global[m+"_onload"]});s.setObject("dojo.io.iframe",B);return B})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d){function u(a){return!this.isFulfilled()}function B(a){return!!this._finished}
function x(a,b){if(!b)try{var c=a.options,d=w.doc(w._frame),f=c.handleAs;if("html"!==f){if("xml"===f)if("html"===d.documentElement.tagName.toLowerCase()){g("a",d.documentElement).orphan();var k=d.documentElement.innerText||d.documentElement.textContent,k=k.replace(/>\s+</g,"\x3e\x3c");a.text=m.trim(k)}else a.data=d;else a.text=d.getElementsByTagName("textarea")[0].value;r(a)}else a.data=d}catch(u){b=u}b?this.reject(b):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}
function y(a){this._callNext()}function w(a,c,d){var f=s.parseArgs(a,s.deepCreate(A,c),!0);a=f.url;c=f.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");w._frame||(w._frame=w.create(w._iframeName,D+"();"));a=s.deferred(f,null,u,B,x,y);a._callNext=function(){this._calledNext||(this._calledNext=!0,w._currentDfd=null,w._fireNextRequest())};a._legacy=d;w._dfdQueue.push(a);w._fireNextRequest();b(a);return d?a:a.promise}var E=q.id.replace(/[\/\.\-]/g,
"_"),D=E+"_onload";d.global[D]||(d.global[D]=function(){var b=w._currentDfd;if(b){var d=a.byId(b.response.options.form)||b._tmpForm;if(d){for(var f=b._contentToClean,g=0;g<f.length;g++)for(var k=f[g],m=0;m<d.childNodes.length;m++){var u=d.childNodes[m];if(u.name===k){c.destroy(u);break}}b._originalAction&&d.setAttribute("action",b._originalAction);b._originalMethod&&(d.setAttribute("method",b._originalMethod),d.method=b._originalMethod);b._originalTarget&&(d.setAttribute("target",b._originalTarget),
d.target=b._originalTarget)}b._tmpForm&&(c.destroy(b._tmpForm),delete b._tmpForm);b._finished=!0}else w._fireNextRequest()});var A={method:"POST"};w.create=function(a,b,g){if(d.global[a])return d.global[a];if(d.global.frames[a])return d.global.frames[a];g||(f("config-useXDomain")&&!f("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
g=f("config-dojoBlankHtmlUrl")||t.toUrl("dojo/resources/blank.html"));b=c.place('\x3ciframe id\x3d"'+a+'" name\x3d"'+a+'" src\x3d"'+g+'" onload\x3d"'+b+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',d.body());return d.global[a]=b};w.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=d.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;
if(d.doc.frames[b]&&d.doc.frames[b].document)return d.doc.frames[b].document}return null};w.setSrc=function(a,b,c){a=d.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{c?a.location.replace(b):a.location=b}catch(f){}};w._iframeName=E+"_IoIframe";w._notifyStart=function(){};w._dfdQueue=[];w._currentDfd=null;w._fireNextRequest=function(){var b;try{if(!w._currentDfd&&w._dfdQueue.length){do b=w._currentDfd=w._dfdQueue.shift();while(b&&(b.canceled||b.isCanceled&&b.isCanceled())&&w._dfdQueue.length);
if(!b||b.canceled||b.isCanceled&&b.isCanceled())w._currentDfd=null;else{var f=b.response,g=f.options,u=b._contentToClean=[],r=a.byId(g.form),q=s.notify,y=g.data||null,x;!b._legacy&&"POST"===g.method&&!r?r=b._tmpForm=c.create("form",{name:E+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},d.body()):"GET"===g.method&&(r&&-1<f.url.indexOf("?"))&&(x=f.url.slice(f.url.indexOf("?")+1),y=m.mixin(k.queryToObject(x),y));if(r){if(!b._legacy){var t=r;do t=t.parentNode;while(t&&t!==d.doc.documentElement);
t||(r.style.position="absolute",r.style.left="-1000px",r.style.top="-1000px",d.body().appendChild(r));r.name||(r.name=E+"_form")}if(y){var t=function(a,l){c.create("input",{type:"hidden",name:a,value:l},r);u.push(a)},A;for(A in y){var D=y[A];if(m.isArray(D)&&1<D.length)for(x=0;x<D.length;x++)t(A,D[x]);else r[A]?r[A].value=D:t(A,D)}}var B=r.getAttributeNode("action"),U=r.getAttributeNode("method"),v=r.getAttributeNode("target");f.url&&(b._originalAction=B?B.value:null,B?B.value=f.url:r.setAttribute("action",
f.url));if(b._legacy){if(!U||!U.value)U?U.value=g.method:r.setAttribute("method",g.method)}else b._originalMethod=U?U.value:null,U?U.value=g.method:r.setAttribute("method",g.method);b._originalTarget=v?v.value:null;v?v.value=w._iframeName:r.setAttribute("target",w._iframeName);r.target=w._iframeName;q&&q.emit("send",f,b.promise.cancel);w._notifyStart(f);r.submit()}else g="",f.options.data&&(g=f.options.data,"string"!==typeof g&&(g=k.objectToQuery(g))),t=f.url+(-1<f.url.indexOf("?")?"\x26":"?")+g,
q&&q.emit("send",f,b.promise.cancel),w._notifyStart(f),w.setSrc(w._frame,t,!0)}}}catch(K){b.reject(K)}};s.addCommonMethods(w,["GET","POST"]);return w})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(q,t,b,s,r,m,k,g,f){function a(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var c=function(a){return 1==a.length&&
"string"==typeof a[0]},d=function(a){var b=a.parentNode;b&&b.removeChild(a)},u=t.NodeList,B=u._adaptWithCondition,x=u._adaptAsForEach,y=u._adaptAsMap;s.extend(u,{_normalize:function(a,b){var c=!0===a.parse;if("string"==typeof a.template){var d=a.templateFunc||q.string&&q.string.substitute;a=d?d(a.template,a):a}d=typeof a;"string"==d||"number"==d?(a=m.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?s._toArray(a.childNodes):[a]):s.isArrayLike(a)?s.isArray(a)||(a=s._toArray(a)):a=[a];c&&(a._runParse=!0);
return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,c,d){if(!(1!=b.nodeType&&"only"==c))for(var f,g=a.length,k=g-1;0<=k;k--){var u=d?this._cloneNode(a[k]):a[k];if(a._runParse&&q.parser&&q.parser.parse){f||(f=b.ownerDocument.createElement("div"));f.appendChild(u);q.parser.parse(f);for(u=f.firstChild;f.firstChild;)f.removeChild(f.firstChild)}k==g-1?m.place(u,b,c):b.parentNode.insertBefore(u,b);b=u}},position:y(k.position),attr:B(a(g),c),style:B(a(f),c),addClass:x(r.add),removeClass:x(r.remove),
toggleClass:x(r.toggle),replaceClass:x(r.replace),empty:x(m.empty),removeAttr:x(g.remove),marginBox:y(k.getMarginBox),place:function(a,b){var c=t(a)[0];return this.forEach(function(a){m.place(a,c,b)})},orphan:function(a){return(a?t._filterResult(this,a):this).forEach(d)},adopt:function(a,b){return t(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new u;this.map(function(c){t(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var c=
arguments,d=this,f=0;if("string"==typeof a){d=t._filterResult(this,c[0]);if(1==c.length)return d._stash(this);f=1}return this._wrap(b.filter(d,c[f],c[f+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var c=0,d;d=this[c];c++)a.length?this._place(a,d,b,0<c):m.empty(d);return this}});return u})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(q,t,b){var s={_dfdCanceller:function(b){b.canceled=!0;var m=b._pendingDfd;-1===b.fired&&(m&&-1===
m.fired)&&m.cancel();b._pendingDfd=null},_fixDfd:function(b){var m=b.then;b.then=function(b,g,f){if(b){var a=b;b=function(b){return b&&b._argsArray?a.apply(null,b):a(b)}}return m.call(this,b,g,f)};return b},_resDfd:function(b,m,k){var g=m.length;1===g?k?b.errback(m[0]):b.callback(m[0]):1<g?(m._argsArray=!0,b.callback(m)):b.callback()}};t("extend-esri")&&q.mixin(b,s);return s})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(q,t,
b,s){var r=function(b,g){return b-g},m={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(b){var g=String(b),f=g.match(m._reNumber);b={integer:0,fractional:0};f&&f[1]?(b.integer=f[1].split("").length,b.fractional=f[3]?f[3].split("").length:0):-1<g.toLowerCase().indexOf("e")&&(f=g.split("e"),g=f[0],f=f[1],g&&f&&(g=Number(g),f=Number(f),(b=0<f)||(f=Math.abs(f)),g=m.getDigits(g),b?(g.integer+=f,g.fractional=f>g.fractional?0:g.fractional-f):(g.fractional+=f,g.integer=f>g.integer?1:g.integer-f),b=g));
return b},getFixedNumbers:function(b,g){var f,a;f=Number(b.toFixed(g));f<b?a=f+1/Math.pow(10,g):(a=f,f-=1/Math.pow(10,g));f=Number(f.toFixed(g));a=Number(a.toFixed(g));return[f,a]},getPctChange:function(b,g,f,a){var c={prev:null,next:null},d;null!=f&&(d=b-f,f=g-f-d,c.prev=Math.floor(Math.abs(100*f/d)));null!=a&&(d=a-b,f=a-g-d,c.next=Math.floor(Math.abs(100*f/d)));return c},round:function(b,g){var f=b.slice(0),a,c,d,u,s,q,y,w,t,D=!g||null==g.tolerance?2:g.tolerance,A=g&&g.indexes,H=!g||null==g.strictBounds?
!1:g.strictBounds;if(A)A.sort(r);else{A=[];for(q=0;q<f.length;q++)A.push(q)}for(q=0;q<A.length;q++)if(t=A[q],a=f[t],c=0===t?null:f[t-1],d=t===f.length-1?null:f[t+1],u=m.getDigits(a),u=u.fractional){y=0;for(w=!1;y<=u&&!w;)s=m.getFixedNumbers(a,y),s=H&&0===q?s[1]:s[0],w=m.hasMinimalChange(a,s,c,d,D),y++;w&&(f[t]=s)}return f},hasMinimalChange:function(b,g,f,a,c){b=m.getPctChange(b,g,f,a);g=null==b.prev||b.prev<=c;f=null==b.next||b.next<=c;return g&&f||b.prev+b.next<=2*c},_reAllZeros:RegExp("\\"+b.decimal+
"0+$","g"),_reSomeZeros:RegExp("(\\d)0*$","g"),format:function(b,g){g=g||{places:20,round:-1};var f=t.format(b,g);f&&(f=f.replace(m._reSomeZeros,"$1").replace(m._reAllZeros,""));return f}};q("extend-esri")&&(s.numberUtils=m);return m})},"esri/renderers/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/date/locale ../kernel ../numberUtils ../Color dojo/i18n!../nls/jsapi dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(q,t,b,s,r,m,k,g,f){function a(a){return a&&t.map(a,
function(a){return new k(a)})}function c(a,b,c){var d="";0===b?d=u.lt+" ":b===c&&(d=u.gt+" ");return d+a}var d={},u={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},B={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},x={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},y={formatLength:"short",fullYear:!0},w={formatLength:"short"};q.mixin(d,{timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,b){var c,d=[];null!=a&&!(a instanceof Date)&&(a=new Date(a));b=b||{};b=q.mixin({},b);var g=b.selector?b.selector.toLowerCase():
null;c=!g||-1<g.indexOf("time");g=!g||-1<g.indexOf("date");c&&(b.timeOptions=b.timeOptions||w,b.timeOptions&&(b.timeOptions=q.mixin({},b.timeOptions),b.timeOptions.selector=b.timeOptions.selector||"time",d.push(b.timeOptions)));g&&(b.dateOptions=b.dateOptions||y,b.dateOptions&&(b.dateOptions=q.mixin({},b.dateOptions),b.dateOptions.selector=b.dateOptions.selector||"date",d.push(b.dateOptions)));d&&d.length?(d=t.map(d,function(b){return s.format(a,b)}),c=1==d.length?d[0]:f["dateTimeFormat-medium"].replace(/\'/g,
"").replace(/\{(\d+)\}/g,function(a,b){return d[b]})):c=s.format(a);return c},createColorStops:function(a){var b=a.values,f=a.colors,g=a.labelIndexes,k=a.isDate,u=a.dateFormatOptions;a=[];return a=t.map(b,function(a,w){var r=null;if(!g||-1<t.indexOf(g,w)){var s;(s=k?d.formatDate(a,u):m.format(a))&&(r=c(s,w,b.length-1))}return{value:a,color:f[w],label:r}})},updateColorStops:function(a){var b=a.stops,f=a.changes,g=a.isDate,k=a.dateFormatOptions,u=[],w,r=t.map(b,function(a){return a.value});t.forEach(f,
function(a){u.push(a.index);r[a.index]=a.value});w=m.round(r,{indexes:u});t.forEach(b,function(a,f){a.value=r[f];if(null!=a.label){var u,s=null;(u=g?d.formatDate(w[f],k):m.format(w[f]))&&(s=c(u,f,b.length-1));a.label=s}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,d=a.isFirstBreak?"":u.gt+" ";a="percent-of-total"===a.normalizationType?u.pct:"";b=null==b?"":m.format(b);c=null==c?"":m.format(c);return d+b+a+" "+g.smartMapping.minToMax+" "+c+a},setLabelsForClassBreaks:function(a){var b=
a.classBreaks,c=a.classificationMethod,f=a.normalizationType,g=[];b&&b.length&&"standard-deviation"!==c&&(a.round?(g.push(b[0].minValue),t.forEach(b,function(a){g.push(a.maxValue)}),g=m.round(g),t.forEach(b,function(a,b){a.label=d.createClassBreakLabel({minValue:0===b?g[0]:g[b],maxValue:g[b+1],isFirstBreak:0===b,normalizationType:f})})):t.forEach(b,function(a,b){a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:f})}))},updateClassBreak:function(a){var b=
a.classBreaks,c=a.normalizationType,f=a.change,g=f.index,f=f.value,k=-1,m=-1,u=b.length;"standard-deviation"!==a.classificationMethod&&(0===g?k=g:g===u?m=g-1:(m=g-1,k=g),-1<k&&k<u&&(a=b[k],a.minValue=f,a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===k,normalizationType:c})),-1<m&&m<u&&(a=b[m],a.maxValue=f,a.label=d.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===m,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,
c,d=a.length,f,g,k,m,u,w,r=Infinity,s;a=t.map(a,function(a){return new Date(a)});for(b=0;b<d-1;b++){f=a[b];k=[];u=Infinity;w="";for(c=b+1;c<d;c++)g=a[c],g=f.getFullYear()!==g.getFullYear()&&"year"||f.getMonth()!==g.getMonth()&&"month"||f.getDate()!==g.getDate()&&"day"||f.getHours()!==g.getHours()&&"hour"||f.getMinutes()!==g.getMinutes()&&"minute"||f.getSeconds()!==g.getSeconds()&&"second"||"millisecond",m=B[g],m<u&&(u=m,w=g),k.push(g);u<r&&(r=u,s=w)}return s},createUniqueValueLabel:function(a){var b=
a.value,c=a.fieldInfo,f=a.domain;a=a.dateFormatInterval;var g=String(b);(f=f&&f.codedValues?f.getName(b):null)?g=f:"number"===typeof b&&(g=c&&"esriFieldTypeDate"===c.type?d.formatDate(b,a&&x[a]):m.format(b));return g},cloneColorInfo:function(b){var c;b&&(c=q.mixin({},b),c.colors=a(c.colors),c.stops=c.stops&&t.map(c.stops,function(a){a=q.mixin({},a);a.color&&(a.color=new k(a.color));return a}),c.legendOptions&&(c.legendOptions=q.mixin({},c.legendOptions)));return c},cloneOpacityInfo:function(a){var b;
if(a){b=q.mixin({},a);if(a=b.opacityValues)b.opacityValues=a.slice(0);if(a=b.stops)b.stops=t.map(a,function(a){return q.mixin({},a)});if(a=b.legendOptions)b.legendOptions=q.mixin({},a)}return b},cloneSizeInfo:function(a){var b;if(a){b=q.mixin({},a);b.stops&&(b.stops=t.map(b.stops,function(a){return q.mixin({},a)}));if((a=b.minSize)&&"object"===typeof a)b.minSize=d.cloneSizeInfo(a);if((a=b.maxSize)&&"object"===typeof a)b.maxSize=d.cloneSizeInfo(a);if(a=b.legendOptions)if(b.legendOptions=q.mixin({},
a),a=a.customValues)b.legendOptions.customValues=a.slice(0)}return b}});b("extend-esri")&&q.setObject("renderer.utils",d,r);return d})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(q,t,b,s,r,m){return q([m,r],{_onMap:function(b){var g=this.constructor._onMap,f;if(!g||!g.FINAL)delete this.constructor._onMap,g=this.registerConnectEvents(),g.FINAL=!0;b=b.toLowerCase();g[b]?f=this[g[b].method]:(b=
this._onCamelCase(b),this[b]&&(f=b));return f},on:function(b,g){var f=this._onMap(b),a=b.replace(/\-/g,""),c="on"+a in this.domNode;return f||!c?this.inherited(arguments):this.own(s(this.domNode,a,g))[0]},emit:function(b,g,f){var a,c,d,m=b.toLowerCase(),r=this.constructor._onMap||this.registerConnectEvents();c=this[this._onMap(m)];g=g||{};g.target||(g.target=this);c&&(r&&r[m])&&(this._onObj2Arr(function(){a=Array.prototype.slice.call(arguments)},r[m].argKeys)(g),d=t.mixin({},arguments),d[2]=a,d[0]=
r[m].name.replace(/^on/,""));return this.inherited(d||arguments)}})})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff ../kernel ../config ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S,L,Q,R,X){function V(e){return x({url:ga.arcgisUrl+"/"+e.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function O(e,h){var n={f:"json"};h&&(n.token=h);return x({url:e,content:n,callbackParamName:"callback"},{disableIdentityLookup:!0})}function U(e){if(e.layerDefinition&&(!e.layerDefinition.drawingInfo||!e.layerDefinition.drawingInfo.labelingInfo))e.showLabels=!1;e.itemProperties.layerDefinition&&
(e.layerDefinition?(e.layerDefinition.drawingInfo||(e.layerDefinition.drawingInfo=e.itemProperties.layerDefinition.drawingInfo),B.isDefined(e.layerDefinition.definitionExpression)||(e.layerDefinition.definitionExpression=e.itemProperties.layerDefinition.definitionExpression),B.isDefined(e.layerDefinition.minScale)||(e.layerDefinition.minScale=e.itemProperties.layerDefinition.minScale),B.isDefined(e.layerDefinition.maxScale)||(e.layerDefinition.maxScale=e.itemProperties.layerDefinition.maxScale)):
e.layerDefinition=e.itemProperties.layerDefinition);e.itemProperties.popupInfo&&(!e.popupInfo&&!e.disablePopup)&&(e.popupInfo=e.itemProperties.popupInfo);B.isDefined(e.itemProperties.showLabels)&&!B.isDefined(e.showLabels)&&(e.showLabels=e.itemProperties.showLabels);B.isDefined(e.itemProperties.showLegend)&&!B.isDefined(e.showLegend)&&(e.showLegend=e.itemProperties.showLegend);B.isDefined(e.itemProperties.refreshInterval)&&!B.isDefined(e.refreshInterval)&&(e.refreshInterval=e.itemProperties.refreshInterval)}
function v(e){U(e);e.itemProperties.layerDefinition&&e.layerDefinition&&(!B.isDefined(e.layerDefinition.maximumTrackPoints)&&B.isDefined(e.itemProperties.layerDefinition.maximumTrackPoints)&&(e.layerDefinition.maximumTrackPoints=e.itemProperties.layerDefinition.maximumTrackPoints),!e.layerDefinition.definitionGeometry&&e.itemProperties.layerDefinition.definitionGeometry&&(e.layerDefinition.definitionGeometry=e.itemProperties.layerDefinition.definitionGeometry));e.itemProperties.purgeOptions&&!e.purgeOptions&&
(e.purgeOptions=e.itemProperties.purgeOptions)}function K(e,h){var n=new r,a=e.itemData,l=[],z=[];b.forEach(a.operationalLayers,function(e){if(e.itemId&&!e.type){var h=e.url.toLowerCase();-1<h.indexOf("/featureserver")||-1<h.indexOf("/mapserver/")?(z.push(e),l.push(V(e))):-1<h.indexOf("/mapserver")&&-1===h.indexOf("/mapserver/")&&(!e.layers||!B.isDefined(e.minScale)&&!B.isDefined(e.maxScale))?(z.push(e),l.push(V(e))):-1<h.indexOf("/imageserver")&&!B.isDefined(e.minScale)&&!B.isDefined(e.maxScale)?
(z.push(e),l.push(V(e))):-1<h.indexOf("/streamserver")&&(z.push(e),l.push(V(e)))}});a.baseMap&&a.baseMap.baseMapLayers&&b.forEach(a.baseMap.baseMapLayers,function(e){e.itemId&&"VectorTileLayer"!==e.layerType&&(z.push(e),l.push(V(e)))});if(0<l.length){var F={};(new f(l)).addCallback(function(h){b.forEach(z,function(e,n){var a=h[n][1];if(a&&!(a instanceof Error)&&(F[e.itemId]=a,!e.type)){var l=e.url.toLowerCase();if((-1<l.indexOf("/featureserver")||-1<l.indexOf("/mapserver/"))&&a.layers)b.forEach(a.layers,
function(h){if(l.match("/featureserver/"+h.id+"$")=="/featureserver/"+h.id||l.match("/mapserver/"+h.id+"$")=="/mapserver/"+h.id)e.itemProperties=h,U(e)});else if(-1<l.indexOf("/streamserver"))e.itemProperties=a,v(e);else if(-1<l.indexOf("/mapserver"))a.layers&&!e.layers&&(e.layers=a.layers),B.isDefined(a.minScale)&&!B.isDefined(e.minScale)&&(e.minScale=a.minScale),B.isDefined(a.maxScale)&&!B.isDefined(e.maxScale)&&(e.maxScale=a.maxScale),B.isDefined(a.refreshInterval)&&!B.isDefined(e.refreshInterval)&&
(e.refreshInterval=a.refreshInterval),a.visibleLayers&&!e.visibleLayers&&(e.visibleLayers=a.visibleLayers);else if(-1<l.indexOf("/imageserver")&&(B.isDefined(a.minScale)&&!B.isDefined(e.minScale)&&(e.minScale=a.minScale),B.isDefined(a.maxScale)&&!B.isDefined(e.maxScale)&&(e.maxScale=a.maxScale),B.isDefined(a.refreshInterval)&&!B.isDefined(e.refreshInterval)&&(e.refreshInterval=a.refreshInterval),a.popupInfo&&(!e.popupInfo&&!e.disablePopup)&&(e.popupInfo=a.popupInfo),a.renderingRule&&!e.renderingRule&&
(e.renderingRule=a.renderingRule,a.renderingRule.functionName&&(e.renderingRule.rasterFunction=a.renderingRule.functionName)),a.bandIds&&!e.bandIds&&(e.bandIds=a.bandIds),a.mosaicRule&&!e.mosaicRule&&(e.mosaicRule=a.mosaicRule),a.format&&!e.format&&(e.format=a.format),B.isDefined(a.compressionQuality)&&!B.isDefined(e.compressionQuality)&&(e.compressionQuality=a.compressionQuality),a.layerDefinition&&a.layerDefinition.definitionExpression&&(!B.isDefined(e.layerDefinition)||!B.isDefined(e.layerDefinition.definitionExpression))))e.layerDefinition=
e.layerDefinition||{},e.layerDefinition.definitionExpression=a.layerDefinition.definitionExpression}});e.relatedItemsData=F;n.callback(e)})}else n.callback(e);return n}function C(a,l){var b=new r,z=a.itemData,v=z.baseMap.baseMapLayers[0];if("BingMapsAerial"===v.type||"BingMapsRoad"===v.type||"BingMapsHybrid"===v.type)if(v.portalUrl&&d.id)delete l.bingMapsKey,d.id.checkSignInStatus(E.urlToObject(ga.arcgisUrl).path).then(t.hitch(null,function(n,a,l,b,z){O(v.portalUrl,z.token).then(t.hitch(null,e,n,
a,l,b),t.hitch(null,h,n,a,l,b))},a,l,z,b),t.hitch(null,function(n,a,l,b,z){O(v.portalUrl).then(t.hitch(null,e,n,a,l,b),t.hitch(null,h,n,a,l,b))},a,l,z,b));else if(l.bingMapsKey){var F=new Qa({bingMapsKey:l.bingMapsKey,mapStyle:Qa.MAP_STYLE_AERIAL});s.connect(F,"onLoad",t.hitch(this,function(){b.callback([a,l])}));s.connect(F,"onError",function(e){delete l.bingMapsKey;a.itemData=n(z);v=a.itemData.baseMap.baseMapLayers[0];v.errors=[];v.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});
b.callback([a,l])})}else a.itemData=n(z),v=a.itemData.baseMap.baseMapLayers[0],v.errors=[],v.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),b.callback([a,l]);else b.callback([a,l]);return b}function l(e){var h=new r,n,a;e=e.itemData;var l=e.baseMap&&e.baseMap.baseMapLayers;if(Gb&&!Gb.supported())for(e=0;e<l.length;e++){var b=l[e];if(!b.isReference){"VectorTileLayer"===b.layerType&&(n=b.itemId,a=e);break}}n?
ia(n,!1).addBoth(function(e){var n=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;e&&(e.item&&n.test(e.item.url))&&(l[a]={id:"FB_"+b.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in b?b.opacity:1,visibility:"visibility"in b?b.visibility:!0,url:"http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});h.resolve()}):h.resolve();return h}function e(e,a,l,b,z){z.bingKey?(a.bingMapsKey=z.bingKey,z=new Qa({bingMapsKey:a.bingMapsKey,
mapStyle:Qa.MAP_STYLE_AERIAL}),s.connect(z,"onLoad",t.hitch(this,function(){b.callback([e,a])})),s.connect(z,"onError",function(h){delete a.bingMapsKey;e.itemData=n(l);h=e.itemData.baseMap.baseMapLayers[0];h.errors=[];h.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});b.callback([e,a])})):h(e,a,l,b)}function h(e,h,a,l){delete h.bingMapsKey;e.itemData=n(a);a=e.itemData.baseMap.baseMapLayers[0];a.errors=[];a.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});
l.callback([e,h])}function n(e){e.baseMap="BingMapsAerial"===e.baseMap.baseMapLayers[0].type?{title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:"BingMapsRoad"===e.baseMap.baseMapLayers[0].type?{title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:{title:"Imagery with Labels",
baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return e}function z(e,h,n,a){var l=e.dynamicLayerInfos||e.layerInfos,z=h.layers;if(z&&l)if(a.usePopupManager){var v;b.forEach(l,function(e){var h=e.id;if(!e.subLayerIds)for(e=
0;e<z.length;e++){var a=z[e];if(a.id===h&&a.popupInfo){v||(v={});v[h]={infoTemplate:new n(a.popupInfo),layerUrl:a.layerUrl};break}}});v&&e.setInfoTemplates(v)}else{var F=[],c=[],N=[],d=[],f=[],T=[];b.forEach(l,function(h){var n=h.id;if(!h.subLayerIds&&-1!==b.indexOf(e.visibleLayers,n))for(h=0;h<z.length;h++){var a=z[h];if(a.id===n){c.push(n);F.push(a.popupInfo);N.push(a.layerUrl||"");a.layerDefinition&&a.layerDefinition.definitionExpression?d.push(a.layerDefinition.definitionExpression):d.push("");
f.push(B.isDefined(a.minScale)?a.minScale:null);T.push(B.isDefined(a.maxScale)?a.maxScale:null);break}}});F.length&&(e.__popups=F,e.__popupIds=c,e.__popupUrls=N,e.__popupWhereClauses=d,e.__popupMinScales=f,e.__popupMaxScales=T,e.__resourceInfo=h.resourceInfo)}}function F(e){if(!e)return!1;var h=(new k(ga.arcgisUrl)).authority;return-1!==e.indexOf(".arcgis.com/")||-1!==e.indexOf(h)}function N(e){return!e?!1:-1!==e.indexOf("/services.arcgisonline.com/")||-1!==e.indexOf("/server.arcgisonline.com/")}
function T(e){if("https:"===location.protocol&&(F(e)||N(e)))e=e.replace("http:","https:");return e}function W(e,h,n){var a=[],l;e.displayLevels||(a=b.map(e.resourceInfo.tileInfo.lods,function(e){return e.level}));e.exclusionAreas&&(l=t.clone(e.exclusionAreas),l=b.map(l,function(e){e.geometry=new A(e.geometry);return e}));a=new Q(T(e.url),{resourceInfo:e.resourceInfo,opacity:e.opacity,visible:e.visibility,displayLevels:e.displayLevels||a,id:e.id,minScale:e.minScale,maxScale:e.maxScale,refreshInterval:e.refreshInterval,
exclusionAreas:l});n.ignorePopups||z(a,e,h,n);return a}function ea(e,h){if(!e||!h||0===h.length)return[];var a=","+h+",",n=[],l,b=",";for(l=0;l<e.length;l++)if(null!==e[l].subLayerIds){if(-1===a.indexOf(","+e[l].id+",")||-1<b.indexOf(","+e[l].id+","))b+=e[l].subLayerIds.toString()+","}else-1<a.indexOf(","+e[l].id+",")&&-1===b.indexOf(","+e[l].id+",")&&n.push(e[l].id);return n}function na(e,h,a){var n=new fa;n.format="png24";e.resourceInfo&&(e.resourceInfo.supportedImageFormatTypes&&-1<e.resourceInfo.supportedImageFormatTypes.indexOf("PNG32"))&&
(n.format="png32");var n=new Y(T(e.url),{resourceInfo:e.resourceInfo,opacity:e.opacity,visible:e.visibility,id:e.id,imageParameters:n,minScale:e.minScale,maxScale:e.maxScale,refreshInterval:e.refreshInterval}),l=e.visibleLayers;if(!e.visibleLayers){var v="";b.forEach(n.layerInfos,function(e){e.defaultVisibility&&(v+=(0<v.length?",":"")+e.id)});l=v}if(e.layers&&0<e.layers.length){var F=[],c=[],N,d=[],f,C;b.forEach(e.layers,function(h){h.layerDefinition&&h.layerDefinition.definitionExpression&&(F[h.id]=
h.layerDefinition.definitionExpression);if(h.layerDefinition&&h.layerDefinition.source){N=null;C=h.layerDefinition.source;if("mapLayer"===C.type){var n=b.filter(e.resourceInfo.layers,function(e){return e.id===C.mapLayerId});n.length&&(N=t.mixin(n[0],h))}else N=t.mixin({},h);N&&(N.source=C,delete N.popupInfo,N=new ma(N),e.visibleLayers&&(n="string"==typeof e.visibleLayers?e.visibleLayers.split(","):e.visibleLayers,-1<b.indexOf(n,h.id)?N.defaultVisibility=!0:N.defaultVisibility=!1),c.push(N))}h.layerDefinition&&
(h.layerDefinition.source&&h.layerDefinition.drawingInfo)&&(f=new eb(h.layerDefinition.drawingInfo),d[h.id]=f)},this);0<F.length&&n.setLayerDefinitions(F);0<c.length?(n.setDynamicLayerInfos(c,!0),0<d.length&&n.setLayerDrawingOptions(d,!0)):(l=ea(n.layerInfos,l),n.setVisibleLayers(l))}else l=ea(n.layerInfos,l),n.setVisibleLayers(l);a.ignorePopups||z(n,e,h,a);return n}function sa(e,h,n){var a=new $;a.bandIds=e.bandIds;null!=e.format&&(a.format=e.format,null!=e.compressionQuality&&(a.compressionQuality=
e.compressionQuality));if(e.renderingRule&&e.renderingRule.rasterFunction){var l=new yb(e.renderingRule);a.renderingRule=l}e.mosaicRule&&(l=new vb(e.mosaicRule),a.mosaicRule=l);B.isDefined(e.noData)&&(a.noData=e.noData);B.isDefined(e.noDataInterpretation)&&(a.noDataInterpretation=e.noDataInterpretation);B.isDefined(e.interpolation)&&(a.interpolation=e.interpolation);l=e.layerType?"ArcGISImageServiceVectorLayer"===e.layerType:!1;B.isDefined(e.layerType)||(l=e.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===
e.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===e.resourceInfo.serviceDataType));a={resourceInfo:e.resourceInfo,opacity:e.opacity,visible:e.visibility,id:e.id,imageServiceParameters:a,minScale:e.minScale,maxScale:e.maxScale,refreshInterval:e.refreshInterval};a=l?new P(T(e.url),a):new ba(T(e.url),a);e.layerDefinition&&(e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&(l=I.fromJson(e.layerDefinition.drawingInfo.renderer),a.setRenderer(l)),e.layerDefinition.definitionExpression&&
a.setDefinitionExpression(e.layerDefinition.definitionExpression,!0));!n.ignorePopups&&e.popupInfo&&a.setInfoTemplate(new h(e.popupInfo));return a}function Ja(e,h,n){var a=[102113,102100,3857],l=n||new y(h[0].layerObject.fullExtent.spatialReference),z=new y(e.resourceInfo.fullExtent.spatialReference);return l.wkt==z.wkt&&(l.wkid==z.wkid||B.isDefined(l.latestWkid)&&l.latestWkid==z.wkid||B.isDefined(z.latestWkid)&&l.wkid==z.latestWkid||B.isDefined(l.latestWkid)&&l.latestWkid==z.latestWkid)||l.wkid&&
z.wkid&&b.some(a,function(e){return e===z.wkid})&&b.some(a,function(e){return e===l.wkid})?!0:!1}function Da(e,h,a){if(!h[0].layerObject.tileInfo)return!1;e=e.resourceInfo.tileInfo;h=h[0].layerObject.tileInfo;a=a.width>a.height?a.width:a.height;for(var n=!1,l=!1,b=0;b<e.lods.length;b++){for(var z=e.lods[b].scale/e.dpi,v=0;v<h.lods.length;v++){var F=h.lods[v].scale/h.dpi;if(Math.abs(F-z)/F<1/a)if(n){l=!0;break}else n=!0}if(l)break}return l||n&&(1===e.lods.length||1===h.lods.length)?!0:!1}function pa(e,
h,a,n,l,z){var v,F,c=a._clazz;if("OpenStreetMap"===e.type)v=new bb({id:e.id,opacity:e.opacity,visible:null!==e.visibility&&void 0!==e.visibility?e.visibility:!0});else if("WFS"===e.type)n={customParameters:e.wfsInfo.customParameters,geometryType:e.layerDefinition.geometryType,id:e.id,labelingInfo:e.layerDefinition.drawingInfo.labelingInfo,maxFeatures:e.wfsInfo.maxFeatures,mode:e.mode,name:e.wfsInfo.name,showLabels:!0,swapXY:e.wfsInfo.swapXY,title:e.title,url:e.url,version:e.wfsInfo.version,visible:e.visibility,
wkid:e.layerDefinition.spatialReference.wkid},v=new Mb,v.fromJson(n,function(){B.isDefined(e.opacity)&&v.setOpacity(e.opacity);B.isDefined(e.visibility)&&v.setVisibility(e.visibility);(e.minScale||e.maxScale)&&v.setScaleRange(e.minScale,e.maxScale);v.renderer=I.fromJson(e.layerDefinition.drawingInfo.renderer);!a.ignorePopups&&e.popupInfo&&v.setInfoTemplate(new c(e.popupInfo));v.emit("fromJsonComplete")});else if("WMS"===e.type){var N=[],f=[];b.forEach(e.layers,function(e){f.push(new Ib({name:e.name,
title:e.title,legendURL:e.legendURL,queryable:e.queryable,showPopup:e.showPopup}));N.push(e.name)},this);e.visibleLayers&&(N=e.visibleLayers);n=new A(e.extent[0][0],e.extent[0][1],e.extent[1][0],e.extent[1][1],new y({wkid:4326}));n={customLayerParameters:e.customLayerParameters,customParameters:e.customParameters,extent:n,layerInfos:f,version:e.version,maxWidth:e.maxWidth,maxHeight:e.maxHeight,featureInfoFormat:e.featureInfoFormat,getFeatureInfoURL:e.featureInfoUrl,getMapURL:e.mapUrl,spatialReferences:e.spatialReferences,
title:e.title,copyright:e.copyright,minScale:e.minScale||0,maxScale:e.maxScale||0,format:e.format};v=new Hb(e.url,{id:e.id,visibleLayers:N,format:"png",transparent:e.firstLayer?!1:!0,opacity:e.opacity,visible:null!==e.visibility?e.visibility:!0,resourceInfo:n,refreshInterval:e.refreshInterval});v.spatialReference.wkid=n.spatialReferences[0]}else if("KML"===e.type){F=e.url;if(d.id){var C=d.id.findCredential(E.urlToObject(ga.arcgisUrl).path);C&&(h=ga.arcgisUrl.substring(ga.arcgisUrl.indexOf("//")+2,
ga.arcgisUrl.indexOf("/",ga.arcgisUrl.indexOf("//")+3)),l=h.split("."),l=l[l.length-2]+"."+l[l.length-1],z=F.indexOf(l),-1<z&&(F="https://"+h+F.substring(z+l.length),F+="?token\x3d"+C.token))}v=new nb(F,{id:e.id,visible:null!==e.visibility?e.visibility:!0,outSR:n,refreshInterval:e.refreshInterval});s.connect(v,"onLoad",function(){(e.opacity||0===e.opacity)&&v.setOpacity(e.opacity);B.isDefined(e.minScale)&&B.isDefined(e.maxScale)&&v.setScaleRange(e.minScale,e.maxScale);e.visibleFolders&&b.forEach(v.folders,
function(h){-1<b.indexOf(e.visibleFolders,h.id)?v.setFolderVisibility(h,!0):v.setFolderVisibility(h,!1)},this)})}else"WebTiledLayer"===e.type?(v=new Lb(e.templateUrl,{id:e.id,visible:null!==e.visibility?e.visibility:!0,opacity:e.opacity,copyright:e.copyright,fullExtent:e.fullExtent&&new A(e.fullExtent),initialExtent:e.fullExtent&&new A(e.fullExtent),subDomains:e.subDomains,tileInfo:e.tileInfo?new Za(e.tileInfo):null,refreshInterval:e.refreshInterval,wmtsInfo:e.wmtsInfo}),s.connect(v,"onLoad",function(){(B.isDefined(e.minScale)||
B.isDefined(e.maxScale))&&v.setScaleRange(e.minScale,e.maxScale)})):"GeoRSS"===e.type?(v=new da(e.url,{id:e.id,opacity:e.opacity,outSpatialReference:n,refreshInterval:e.refreshInterval}),s.connect(v,"onLoad",function(){!1===e.visibility&&v.hide();B.isDefined(e.minScale)&&B.isDefined(e.maxScale)&&v.setScaleRange(e.minScale,e.maxScale);var h=v.getFeatureLayers();b.forEach(h,function(n){e.pointSymbol&&"esriGeometryPoint"===n.geometryType?(n.renderer.symbol=G.fromJson(e.pointSymbol),1===h.length&&(v.pointSymbol=
G.fromJson(e.pointSymbol))):e.lineSymbol&&"esriGeometryPolyline"===n.geometryType?(n.renderer.symbol=G.fromJson(e.lineSymbol),1===h.length&&(v.polylineSymbol=G.fromJson(e.lineSymbol))):e.polygonSymbol&&"esriGeometryPolygon"===n.geometryType&&(n.renderer.symbol=G.fromJson(e.polygonSymbol),1===h.length&&(v.polygonSymbol=G.fromJson(e.polygonSymbol)))})})):"CSV"==e.type&&e.url?(n={layerDefinition:e.layerDefinition,columnDelimiter:e.columnDelimiter,id:e.id?e.id:null,visible:null!==e.visibility?e.visibility:
!0,opacity:e.opacity,refreshInterval:e.refreshInterval},e.locationInfo&&(n.latitudeFieldName=e.locationInfo.latitudeFieldName,n.longitudeFieldName=e.locationInfo.longitudeFieldName),a.ignorePopups||(n.infoTemplate=new M(e.popupInfo?e.popupInfo:ha.generateDefaultPopupInfo(e))),v=new ja(e.url,n)):"VectorTileLayer"===e.layerType&&e.styleUrl?v=new Gb(e.styleUrl,{id:e.id,minScale:e.minScale,maxScale:e.maxScale,opacity:e.opacity,visible:e.visibility}):e.layerDefinition&&!e.url?(n=m.fromJson(m.toJson(e)),
delete n.id,delete n.opacity,delete n.visibility,v=new R(n,{id:e.id,opacity:e.opacity,visible:e.visibility,outFields:["*"],autoGeneralize:!0}),!a.ignorePopups&&n.popupInfo&&v.setInfoTemplate(new c(n.popupInfo)),la(v)):"BingMapsAerial"===e.type||"BingMapsRoad"===e.type||"BingMapsHybrid"===e.type?a.bingMapsKey?(n=Qa.MAP_STYLE_AERIAL_WITH_LABELS,"BingMapsAerial"===e.type?n=Qa.MAP_STYLE_AERIAL:"BingMapsRoad"===e.type&&(n=Qa.MAP_STYLE_ROAD),v=new Qa({bingMapsKey:a.bingMapsKey,mapStyle:n,opacity:e.opacity,
id:e.id}),s.connect(v,"onError",t.hitch(this,function(e){e.errors=e.errors||[];e.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+e.type+"]"})},e))):(e.errors=e.errors||[],e.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+e.type+"]"})):e.resourceInfo&&e.resourceInfo.mapName?v=!0===e.resourceInfo.singleFusedMapCache&&(e.baseMapLayer||Ja(e,h,n)&&Da(e,
l,z))?W(e,c,a):na(e,c,a):e.resourceInfo&&e.resourceInfo.pixelSizeX?v=!0===e.resourceInfo.singleFusedMapCache&&(e.baseMapLayer||Ja(e,h,n)&&Da(e,l,z))?W(e,c,a):sa(e,c,a):e.resourceInfo&&"Feature Layer"===e.resourceInfo.type?(e.capabilities&&(e.resourceInfo.capabilities=e.capabilities),v=new R(T(e.url),{resourceInfo:e.resourceInfo,opacity:e.opacity,visible:e.visibility,id:e.id,mode:e.mode===R.MODE_SELECTION?R.MODE_SELECTION:R.MODE_AUTO,editable:!1===a.editable?!1:void 0,outFields:["*"],autoGeneralize:!0,
refreshInterval:e.refreshInterval}),!a.ignorePopups&&e.popupInfo&&v.setInfoTemplate(new c(e.popupInfo)),e.layerDefinition&&(e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&(n=I.fromJson(e.layerDefinition.drawingInfo.renderer),n.isMaxInclusive=!0,v.setRenderer(n)),e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.labelingInfo&&(n=b.map(e.layerDefinition.drawingInfo.labelingInfo,function(e){return new xb(e)}),v.setLabelingInfo(n)),e.layerDefinition.definitionExpression&&
v.setDefinitionExpression(e.layerDefinition.definitionExpression),B.isDefined(e.layerDefinition.minScale)&&v.setMinScale(e.layerDefinition.minScale),B.isDefined(e.layerDefinition.maxScale)&&v.setMaxScale(e.layerDefinition.maxScale)),la(v)):e.resourceInfo&&e.resourceInfo.streamUrls&&(n={resourceInfo:e.resourceInfo,opacity:e.opacity,visible:e.visibility,id:e.id},e.layerDefinition&&(C=e.layerDefinition.drawingInfo,e.layerDefinition.definitionGeometry&&(F=F||{},F.geometry=e.layerDefinition.definitionGeometry),
B.isDefined(e.layerDefinition.definitionExpression)&&(F=F||{},F.where=e.layerDefinition.definitionExpression),B.isDefined(e.layerDefinition.maximumTrackPoints)&&(n.maximumTrackPoints=e.layerDefinition.maximumTrackPoints)),F&&(n.filter=F),e.purgeOptions&&(n.purgeOptions=e.purgeOptions),v=new Ta(T(e.url),n),C&&C.renderer&&(n=C.renderer,v.setRenderer(I.fromJson(n))),!a.ignorePopups&&e.popupInfo&&v.setInfoTemplate(new c(e.popupInfo)),e.layerDefinition&&(B.isDefined(e.layerDefinition.minScale)&&v.setMinScale(e.layerDefinition.minScale),
B.isDefined(e.layerDefinition.maxScale)&&v.setMaxScale(e.layerDefinition.maxScale)),g.once(v,"error",function(h){e.errors.push({message:"Error loading stream layer. Check websocket url"})}));v&&(v.arcgisProps={title:e.title},e.baseMapLayer&&(e.isReference?(v.attr("data-reference",!0),v._basemapGalleryLayerType="reference"):v._basemapGalleryLayerType="basemap"));return v}function ka(e,h,n,a,l){b.forEach(e,function(b){b.layerObject=pa(b,e,h,n,a,l)});var z=b.filter(e,function(e){return!e.isReference}),
v=b.filter(e,function(e){return!!e.isReference});return e=z.concat(v)}function qa(e){var h=null;e=e[0];e.url&&!e.type?e.resourceInfo.spatialReference&&(h=new y,e.resourceInfo.spatialReference.wkid&&(h.wkid=e.resourceInfo.spatialReference.wkid),e.resourceInfo.spatialReference.wkt&&(h.wkt=e.resourceInfo.spatialReference.wkt)):e.type&&(-1<e.type.indexOf("BingMaps")||"OpenStreetMap"==e.type?h=new y({wkid:102100}):"WMS"==e.type&&(h=new y({wkid:e.spatialReferences[0]})));return h}function za(e,h,n,a,l,
z,v,F){b.forEach(h,function(h){h.url&&!h.type&&(h.resourceInfo=e[h.deferredsPos][1],delete h.deferredsPos)});z=z||qa(h);h=ka(h,n,z,v,F);l.callback(h);return l}function la(e){!window.CanvasRenderingContext2D&&(e.renderer&&"esri.renderer.HeatmapRenderer"===e.renderer.declaredClass)&&e.setRenderer(I.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:0.75,type:"esriSLS",style:"esriSLSSolid"}}}))}
function Ia(e,h){var n=T(e);return x({url:n,content:{f:"json"},callbackParamName:"callback",error:function(e,a){e.message=e.message?e.message+(" [url:"+n+"]"):"[url:"+n+"]";h.push(e);u.defaults.io.errorHandler(e,a)}})}function Ea(e){var h=ga.arcgisUrl+"/"+e.itemId+"/data";return x({url:h,content:{f:"json"},callbackParamName:"callback",error:function(n,a){n.message=n.message?n.message+(" [url:"+h+"]"):"[url:"+h+"]";e.errors=e.errors||[];e.errors.push(n);u.defaults.io.errorHandler(n,a)}})}function Ca(e,
h,n){var a=new r;if((!n.featureCollection||!n.featureCollection.layers)&&!n.layers)return e.errors=e.errors||[],e.errors.push({message:"Invalid Feature Collection item data. [item id: "+e.itemId+"]"}),a.errback(),a;n.layers&&(n.featureCollection={layers:n.layers},delete n.layers,B.isDefined(n.showLegend)&&(n.featureCollection.showLegend=n.showLegend,delete n.showLegend));ta(e,n.featureCollection,h).then(function(h){n.featureCollection=h;e.featureCollection&&e.featureCollection.layers?b.forEach(n.featureCollection.layers,
function(h,n){var a=e.featureCollection.layers[n];if(!a.popupInfo&&!a.layerDefinition)a.popupInfo=h.popupInfo,a.layerDefinition=h.layerDefinition;else if(a.layerDefinition){if(B.isDefined(a.layerDefinition.minScale)&&B.isDefined(a.layerDefinition.maxScale)&&(a.layerDefinition.minScale!==h.layerDefinition.minScale||a.layerDefinition.maxScale!==h.layerDefinition.maxScale))delete h.layerDefinition.minscale,delete h.layerDefinition.maxScale;a.layerDefinition.drawingInfo&&m.toJson(a.layerDefinition.drawingInfo)!==
m.toJson(h.layerDefinition.drawingInfo)&&delete h.layerDefinition.drawingInfo;a.layerDefinition.showLegend!==h.layerDefinition.showLegend&&delete h.layerDefinition.showLegend;a.layerDefinition=t.mixin(a.layerDefinition,h.layerDefinition)}else a.layerDefinition=h.layerDefinition;a.featureSet=h.featureSet;a.nextObjectId=h.nextObjectId}):(e.featureCollection=e.featureCollection||{},e.featureCollection=t.mixin(e.featureCollection,n.featureCollection));a.callback(e)});return a}function ta(e,h,n){var a=
new r;q(["./csv"],function(l){var z=[];b.forEach(h.layers,function(e){e.featureSet&&(e.featureSet.features&&e.featureSet.features.length&&e.featureSet.features[0].geometry&&e.featureSet.features[0].geometry.spatialReference)&&(e.deferredsPos=z.length,z.push(l.projectFeatureCollection(e,n,e.featureSet.features[0].geometry.spatialReference)))});(new f(z)).addCallback(function(){b.forEach(h.layers,function(h){B.isDefined(h.deferredsPos)&&(z[h.deferredsPos].results&&z[h.deferredsPos].results.length?h=
z[h.deferredsPos].results[0]:(h.errors=h.errors||[],h.errors.push({message:"Errors projecting feature collection. ["+e.title+" - "+h.layerDefinition.name+"]"})),delete h.deferredsPos)});a.callback(h)})});return a}function oa(e,h,n,a,l){var z=new r,v=new r,F=[],c;b.forEach(e.operationalLayers,function(e){e.itemId&&"Feature Collection"==e.type&&F.push(Ea(e).then(t.hitch(null,Ca,e,n)))});0===F.length?Aa(e,h,n,a,v,l):(c=new f(F),c.addCallback(function(b){Aa(e,h,n,a,v,l)}));v.then(function(e){F=[];b.forEach(e,
function(e){var h;e=e.layerObject;e instanceof R&&!e.loaded&&!e.loadError?(h=new r,g.once(e,"load, error",function(){h.callback(e)}),F.push(h)):e&&("esri.layers.WFSLayer"===e.declaredClass&&!e.loadError)&&(h=new r,g.once(e,"fromJsonComplete, error",function(n){h.callback(e)}),F.push(h))});if(F.length){var h=new r;c=new f(F);c.addCallback(function(){h.callback(e)});return h.promise}return e}).then(function(e){var h=[];b.forEach(e,function(e){var n=e.layerObject;n instanceof R?n.loaded&&(n.labelingInfo&&
(e.showLabels||n._collection))&&h.push(n):n&&"esri.layers.WFSLayer"===n.declaredClass&&n.loaded&&n.labelingInfo&&h.push(n)});h.length?q(["../layers/LabelLayer"],function(n){var a=new n;b.forEach(h,function(e){a.addFeatureLayer(e)});e.push({layerObject:a});z.callback(e)}):z.callback(e)});return z}function Aa(e,h,n,a,l,z){var v=[],F=[],c=[];b.forEach(e.operationalLayers,function(e,h){if(e.featureCollection&&e.featureCollection.layers){var n=e.featureCollection.layers.length;b.forEach(e.featureCollection.layers,
function(a,l){var z=!0;e.visibleLayers&&-1==b.indexOf(e.visibleLayers,l)&&(z=!1);a.visibility=e.visibility&&z;a.opacity=e.opacity;a.id=(e.id||"operational"+h)+"_"+l;e.title&&(a.title=1===n||!a.layerDefinition.name||e.title===a.layerDefinition.name?e.title:e.title+" - "+a.layerDefinition.name);c.push(a)},this)}else c.push(e)});b.forEach(e.baseMap.baseMapLayers,function(e,h){e.baseMapLayer=!0;e.id=e.id||"base"+h;v.push(e)});b.forEach(c,function(e,h){e.id=e.id||"operational"+h;v.push(e)});b.forEach(v,
function(e){e.url&&!e.type&&(e.deferredsPos=F.length,e.errors=e.errors||[],F.push(Ia(e.url,e.errors)))});0===F.length?(n=n||qa(v),v=ka(v,h,n,a,z),l.callback(v)):(new f(F)).addCallback(function(e){za(e,v,h,F,l,n,a,z)});return l}function Na(e,h,n,a){var l=e.minScale,z=e.maxScale;if(10.1>=n.version&&h)for(e=h.length-1;0<=e;e--){if(h[e].id==a)if(0==l&&0<h[e].minScale?l=h[e].minScale:0<l&&0==h[e].minScale?l=n.minScale:0<l&&0<h[e].minScale&&(l=Math.min(l,h[e].minScale)),z=Math.max(n.maxScale||0,h[e].maxScale||
0),n.setScaleRange(l,z),-1<h[e].parentLayerId)a=h[e].parentLayerId;else break}else 10.1<n.version&&(b.forEach(e.layerInfos,function(e){e.id==a&&(0==l&&0<e.minScale?l=e.minScale:0<l&&0==e.minScale||0<l&&0<e.minScale&&(l=Math.min(l,e.minScale)),z=Math.max(z||0,e.maxScale||0))}),n.setScaleRange(l,z))}function Sa(e,h,n,a){var l=e.url,z=e.__popupIds,v=e.__popupUrls,F=e.__popupWhereClauses,c=e.__popupMinScales,N=e.__popupMaxScales,d=e.__resourceInfo,f=[];b.forEach(e.__popups,function(a,C){if(a){var g,W=
[];b.forEach(a.fieldInfos,function(e){"shape"!==e.fieldName.toLowerCase()&&W.push(e.fieldName)});if(e.dynamicLayerInfos&&0<e.dynamicLayerInfos.length){var k=b.filter(e.dynamicLayerInfos,function(e){return z[C]==e.id})[0].source;g=new R(l+"/dynamicLayer",{id:e.id+"_"+z[C],source:k,outFields:W,mode:R.MODE_SELECTION,infoTemplate:a&&new n(a),drawMode:!1,visible:e.visible,autoGeneralize:!0});var m=function(n,a){0<F[n].length&&a.setDefinitionExpression(F[n]);if(!B.isDefined(c[n])&&!B.isDefined(N[n]))Na(e,
h||d.layers,a,z[n]);else if(B.isDefined(e.minScale)||B.isDefined(e.maxScale)){var l=e.minScale,b=e.maxScale;0==l&&0<c[n]?l=c[n]:0<l&&0==c[n]||0<l&&0<c[n]&&(l=Math.min(l,c[n]));b=Math.max(b||0,N[n]||0);a.setScaleRange(l,b)}else a.setScaleRange(c[n],N[n])};g.loaded?m(C,g):s.connect(g,"onLoad",function(e){m(C,g)})}else{var u=null,w=l+"/"+z[C];if(v[C].length)w=v[C];else if(h)for(k=0;k<h.length;k++)if(h[k].id===z[C]){u=h[k];break}g=new R(T(w),{id:e.id+"_"+z[C],outFields:W,mode:R.MODE_SELECTION,infoTemplate:a&&
new n(a),drawMode:!1,visible:e.visible,resourceInfo:u,autoGeneralize:!0});g.loaded?(0<F[C].length&&g.setDefinitionExpression(F[C]),Na(e,h||d.layers,g,z[C])):s.connect(g,"onLoad",function(n){0<F[C].length&&g.setDefinitionExpression(F[C]);Na(e,h||d.layers,n,z[C])})}f.push(g)}});0<f.length&&(s.connect(e,"onVisibilityChange",t.hitch(this,function(e,h){b.forEach(e,function(e){h?e.show():e.hide()})},f)),s.connect(a,"onLayerRemove",t.hitch(this,function(e,h,n){e.id===n.id&&b.forEach(h,function(e){a.removeLayer(e)})},
e,f)));delete e.__popups;delete e.__popupIds;delete e.__popupUrls;delete e.__popupWhereClauses;delete e.__popupMinScales;delete e.__popupMaxScales;delete e.__resourceInfo;return f}function Ba(e){return x({url:T(e.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Pa(e,h,n){var a=[];b.forEach(e,function(e){var h=e.__popups;h&&(1<h.length&&10<=e.version)&&(e.__deferredsPos=a.length,a.push(Ba(e)))});var l=[];0<a.length?(new f(a)).addCallback(function(a){b.forEach(e,
function(e){e.__popups&&0<e.__popups.length&&(e.__deferredsPos||0===e.__deferredsPos?(l=l.concat(Sa(e,a[e.__deferredsPos][1].layers,n,h)),delete e.__deferredsPos):l=l.concat(Sa(e,null,n,h)))});h.addLayers(l)}):(b.forEach(e,function(e){e.__popups&&0<e.__popups.length&&(l=l.concat(Sa(e,null,n,h)))}),h.addLayers(l))}function Ra(e){b.forEach(e,function(e){var h=e.layer;h.toJson&&(e=h.toJson(),e.featureSet&&(h.name&&-1<h.name.indexOf("Text"))&&b.forEach(e.featureSet.features,function(e,n){if(e.attributes.TEXT){var a=
h.graphics[n];a.symbol.setText(e.attributes.TEXT);e.symbol.horizontalAlignment&&(a.symbol.align=e.symbol.horizontalAlignment);a.setSymbol(a.symbol);a.setAttributes(e.attributes)}},this))})}function Ua(e){var h=6;b.forEach(e,function(e){if(e=e.renderer)"esri.renderer.SimpleRenderer"===e.declaredClass?((e=e.symbol)&&e.xoffset&&(h=Math.max(h,Math.abs(e.xoffset))),e&&e.yoffset&&(h=Math.max(h,Math.abs(e.yoffset)))):("esri.renderer.UniqueValueRenderer"===e.declaredClass||"esri.renderer.ClassBreaksRenderer"===
e.declaredClass)&&b.forEach(e.infos,function(e){(e=e.symbol)&&e.xoffset&&(h=Math.max(h,Math.abs(e.xoffset)));e&&e.yoffset&&(h=Math.max(h,Math.abs(e.yoffset)))})});return h}function Va(e){var h=this,n=h.infoWindow,a=e.graphic;if(h.loaded){n.hide();n.clearFeatures();var l=[];b.forEach(h.graphicsLayerIds,function(e){if((e=h.getLayer(e))&&e instanceof R&&e.loaded&&e.visible)e.clearSelection(),e.infoTemplate&&!e.suspended&&l.push(e)});b.forEach(h.layerIds,function(e){(e=h.getLayer(e))&&(-1!==e.declaredClass.indexOf("ArcGISImageServiceLayer")&&
e.loaded&&e.visible&&e.infoTemplate)&&l.push(e)});a=a&&a.getInfoTemplate()?a:null;if(l.length||a){var z=Ua(l),v=e.screenPoint,F=h.toMap(new D(v.x-z,v.y+z)),z=h.toMap(new D(v.x+z,v.y-z)),F=new A(F.x,F.y,z.x,z.y,h.spatialReference),c=new S;c.geometry=F;c.timeExtent=h.timeExtent;var N=!0,F=b.map(l,function(h){var n;-1!==h.declaredClass.indexOf("ArcGISImageServiceLayer")?(c.geometry=e.mapPoint,N=!1,n=h.queryVisibleRasters(c,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),n.addCallback(function(){return h.getVisibleRasters()})):
(n=h.selectFeatures(c),n.addCallback(function(){return h.getSelectedFeatures()}));return n});a&&(z=new r,z.callback([a]),F.splice(0,0,z));if(!b.some(F,function(e){return-1===e.fired})){var d=a?1:0;b.forEach(l,function(e){d=-1!==e.declaredClass.indexOf("ArcGISImageServiceLayer")?d+e.getVisibleRasters().length:d+e.getSelectedFeatures().length});if(!d)return}n.setFeatures(F);n.show(e.mapPoint,{closestFirst:N})}}}function Wa(e,h){var n=h.mapOptions||{},l;n.infoWindow||(l=new J({visibleWhenEmpty:!1},a.create("div")),
n.infoWindow=l);!B.isDefined(n.showInfoWindowOnClick)&&!h.usePopupManager&&(n.showInfoWindowOnClick=!1);n=new w(e,n);s.connect(n,"onLayersAddResult",Ra);return n}function Oa(e,h,n,a,l,z){var v,F,c,N;a.map?(v=a.map,F=a.clickEventHandle,c=a.clickEventListener,N=a.errors):(v=Wa(a,l),!l.ignorePopups&&(!l.disableClickBehavior&&!l.usePopupManager)&&(F=s.connect(v,"onClick",Va),c=Va));v.addLayers(e);!l.ignorePopups&&!l.usePopupManager&&Pa(e,v,l._clazz);var d=N||[];b.forEach(h,function(e){e.errors&&(d=d.concat(e.errors))},
this);v.loaded?z.callback({map:v,itemInfo:n,errors:d,clickEventHandle:F,clickEventListener:c}):s.connect(v,"onLoad",function(){z.callback({map:v,itemInfo:n,errors:d,clickEventHandle:F,clickEventListener:c})})}function Z(e,h,n,a,l){var z=[];b.forEach(l,function(e){t.isArray(e.layerObject)?b.forEach(e.layerObject,function(e){z.push(e)}):z.push(e.layerObject)});if("BingMapsAerial"===l[0].type||"BingMapsRoad"===l[0].type||"BingMapsHybrid"===l[0].type)var v=setInterval(function(){if(l[0].layerObject&&
l[0].layerObject.loaded)clearInterval(v),ua(e,h,n,a,l,z);else if(l[0].errors){clearInterval(v);var b="";l[0].errors&&l[0].errors.length&&(b=" ("+l[0].errors[0].message+")");a.errback(Error(X.arcgis.utils.baseLayerError+b))}},10);else if(!z[0]&&l[0].baseMapLayer){var F="";l[0].errors&&l[0].errors.length&&(F=" ("+l[0].errors[0].message+")");a.errback(Error(X.arcgis.utils.baseLayerError+F))}else ua(e,h,n,a,l,z)}function ua(e,h,n,a,l,z){try{var v=n.mapOptions||{};n.mapOptions=v;var F=e.item;z=b.filter(z,
B.isDefined);if(F)if(F.extent&&F.extent.length)if(v.extent)Oa(z,l,e,h,n,a);else{var c=new A(F.extent[0][0],F.extent[0][1],F.extent[1][0],F.extent[1][1],new y({wkid:4326})),N=z[0].spatialReference;4326===N.wkid?(v.extent=c,Oa(z,l,e,h,n,a)):102100===N.wkid||102113===N.wkid||3857===N.wkid?(c.xmin=Math.max(c.xmin,-180),c.xmax=Math.min(c.xmax,180),c.ymin=Math.max(c.ymin,-89.99),c.ymax=Math.min(c.ymax,89.99),v.extent=H.geographicToWebMercator(c),Oa(z,l,e,h,n,a)):n.geometryServiceURL||u.defaults.geometryService?
(n.geometryServiceURL?new L(n.geometryServiceURL):u.defaults.geometryService).project([c],N,function(b){b=b[0];v.extent=v.extent||b;Oa(z,l,e,h,n,a)},function(){Oa(z,l,e,h,n,a)}):a.errback(Error(X.arcgis.utils.geometryServiceError))}else Oa(z,l,e,h,n,a);else Oa(z,l,e,h,n,a)}catch(d){a.errback(d)}}function va(e){var h=[];b.forEach(e.operationalLayers,function(e){e.featureCollection?h.push({featureCollection:e.featureCollection,visibility:e.visibility,title:e.title}):e.layerObject&&h.push({layer:e.layerObject,
visibility:e.visibility,title:e.title})});return h}function ca(e){var h=[];e=e.baseMap.baseMapLayers.concat(e.operationalLayers);b.forEach(e,function(e){var n={};if(e.featureCollection&&"CSV"!==e.type)!0===e.featureCollection.showLegend&&b.forEach(e.featureCollection.layers,function(a){if(!1!==a.showLegend){var l=a.layerObject.renderer;n={layer:a.layerObject,title:e.title,defaultSymbol:l&&l.defaultSymbol&&l.defaultLabel?!0:!1};1<e.featureCollection.layers.length&&(n.title+=" - "+a.layerDefinition.name);
h.push(n)}});else if(e.baseMapLayer&&!0===e.showLegend&&e.layerObject||!e.baseMapLayer&&!1!==e.showLegend&&e.layerObject&&!(e.layerObject instanceof R&&e.layerObject.mode===R.MODE_SELECTION)){var a=e.layerObject.renderer,l=e.layerObject.declaredClass,a=!a||a&&a.defaultSymbol&&a.defaultLabel?!0:!1;if(10.1>e.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===l||"esri.layers.ArcGISTiledMapServiceLayer"===l)||"esri.layers.ArcGISImageServiceLayer"===l)a=!0;n={layer:e.layerObject,title:e.title,
defaultSymbol:a};e.layers&&(l=b.map(b.filter(e.layers,function(e){return!1===e.showLegend}),function(e){return e.id}),l.length&&(n.hideLayers=l));h.push(n)}});return h}function xa(e,h){function n(e,h){b.forEach(e,function(e,n){switch(e){case tb:Y=h[n];break;case ub:ba=h[n];break;case $a:P=h[n];break;case Ga:ha=h[n];break;case wb:ja=h[n];break;case lb:ma=h[n];break;case mb:da=h[n];break;case ab:fa=h[n];break;case Ab:$=h[n];break;case Ma:nb=h[n];break;case Bb:xb=h[n];break;case Cb:eb=h[n];break;case hb:vb=
h[n];break;case wa:bb=h[n];break;case Db:yb=h[n];break;case Eb:Ta=h[n];break;case ob:Za=h[n];break;case pb:Gb=h[n];break;case ib:Qa=h[n];break;case Jb:Lb=h[n];break;case jb:Mb=h[n];break;case Kb:Hb=h[n];break;case qb:Ib=h[n]}})}var a=new r,l=e.itemData,z=[];l.baseMap&&l.baseMap.baseMapLayers&&(z=z.concat(l.baseMap.baseMapLayers));l.operationalLayers&&(z=z.concat(l.operationalLayers));for(var l=b.map(z,function(e){return e&&e.layerType}),v=[],F=[],z=!1,c=0;c<l.length;c++){switch(l[c]){case "ArcGISFeatureLayer":-1===
b.indexOf(v,Bb)&&v.push(Bb);break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===b.indexOf(v,ub)&&(v.push(ub),F.push(Ab),F.push(hb),F.push(Db));break;case "ArcGISImageServiceVectorLayer":-1===b.indexOf(v,$a)&&(v.push($a),F.push(Ab),F.push(hb),F.push(Db));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===b.indexOf(v,tb)&&(v.push(tb),F.push(lb),F.push(ab),F.push(Cb));break;case "ArcGISStreamLayer":-1===b.indexOf(v,Eb)&&v.push(Eb);break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===
b.indexOf(v,ib)&&v.push(ib);break;case "CSV":-1===b.indexOf(v,wb)&&(v.push(wb),F.push(Ga));break;case "GeoRSS":-1===b.indexOf(v,mb)&&v.push(mb);break;case "KML":-1===b.indexOf(v,Ma)&&v.push(Ma);break;case "OpenStreetMap":-1===b.indexOf(v,wa)&&v.push(wa);break;case "VectorTileLayer":-1===b.indexOf(v,pb)&&v.push(pb);break;case "WebTiledLayer":-1===b.indexOf(v,Jb)&&(v.push(Jb),F.push(ob));break;case "WFS":-1===b.indexOf(v,jb)&&v.push(jb);break;case "WMS":-1===b.indexOf(v,Kb)&&(v.push(Kb),F.push(qb));
break;default:z=!0}if(z)break}z&&(v=Fb,F=Nb);v.length?q(v,function(){n(v,arguments);F.length?q(F,function(){n(F,arguments);a.resolve()}):a.resolve()}):a.resolve();return a}function Fa(e,h,n,a){var z=a.itemData;z.baseMap&&(z.baseMap.baseMapLayers&&z.baseMap.baseMapLayers.length)&&(z.baseMap.baseMapLayers[0].firstLayer=!0);var v=h.layerMixins,F=v&&v.length;if(F){var c=function(e){for(var h=0;h<F;h++){var n=v[h];if(n.mixin)if(n.hasOwnProperty("id")){if(e.id===n.id){t.mixin(e,n.mixin);break}}else if(e.url===
n.url){t.mixin(e,n.mixin);break}}};b.forEach(z.baseMap&&z.baseMap.baseMapLayers,c);b.forEach(z.operationalLayers,c)}xa(a,h).then(function(){return l(a,h)}).then(function(){return C(a,h)}).then(function(h){var a=h[0],l=h[1];if(!a.itemData.operationalLayers||0===a.itemData.operationalLayers.length)K(a,l).addCallback(function(h){oa(h.itemData,l).addCallback(t.hitch(null,Z,h,e,l,n))});else{var z=new r,v=a.itemData.baseMap.baseMapLayers.slice(),F=b.filter(a.itemData.baseMap.baseMapLayers,function(e){return!e.isReference});
h={item:a.item,itemData:{baseMap:{baseMapLayers:F}}};a.itemData.baseMap.baseMapLayers=b.filter(a.itemData.baseMap.baseMapLayers,function(e){return e.isReference});K(h,l).addCallback(function(h){oa(h.itemData,l).addCallback(t.hitch(null,Z,h,e,l,z))});z.then(function(e){K(a,l).addCallback(function(h){oa(h.itemData,l,e.map.spatialReference,F,e.map).addCallback(function(a){h.itemData.baseMap.baseMapLayers=v;Z(h,e,l,n,a)})})},t.hitch(n,n.errback))}})}function ia(e,h){"undefined"===typeof h&&(h=!0);ga._arcgisUrl&&
0<ga._arcgisUrl.length&&(ga.arcgisUrl=ga._arcgisUrl);var n=ga.arcgisUrl+"/"+e,a={},l=new r;x({url:n,content:{f:"json"},callbackParamName:"callback",load:function(e){a.item=e;h?x({url:n+"/data",content:{f:"json"},callbackParamName:"callback",load:function(e){a.itemData=e;l.callback(a)},error:function(e){l.errback(e)}}):l.callback(a)},error:function(e){l.errback(e)}});return l}var ga,Y,ba,P,ha,ja,ma,da,fa,$,nb,xb,eb,vb,bb,yb,Ta,Za,Gb,Qa,Lb,Mb,Hb,Ib,tb="../layers/ArcGISDynamicMapServiceLayer",ub="../layers/ArcGISImageServiceLayer",
$a="../layers/ArcGISImageServiceVectorLayer",Ga="./csv",wb="../layers/CSVLayer",lb="../layers/DynamicLayerInfo",mb="../layers/GeoRSSLayer",ab="../layers/ImageParameters",Ab="../layers/ImageServiceParameters",Ma="../layers/KMLLayer",Bb="../layers/LabelClass",Cb="../layers/LayerDrawingOptions",hb="../layers/MosaicRule",wa="../layers/OpenStreetMapLayer",Db="../layers/RasterFunction",Eb="../layers/StreamLayer",ob="../layers/TileInfo",pb="../layers/VectorTileLayer",ib="../virtualearth/VETiledLayer",Jb=
"../layers/WebTiledLayer",jb="../layers/WFSLayer",Kb="../layers/WMSLayer",qb="../layers/WMSLayerInfo",Fb=[tb,ub,$a,wb,mb,Ma,Bb,wa,Eb,pb,ib,Jb,jb,Kb],Nb=[Ga,lb,ab,Ab,Cb,hb,Db,ob,qb];ga={arcgisUrl:E.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:ia,createMap:function(e,h,n){var a=new r;n=n||{};var l=n.infoTemplateClass;n._clazz=l&&(t.isObject(l)?l:t.getObject(l))||M;t.isString(e)?ia(e).addCallback(t.hitch(null,Fa,h,n,a)).addErrback(t.hitch(a,a.errback)):Fa(h,n,a,e);
return a},getLayerList:function(e){return e&&e.itemInfo&&e.itemInfo.itemData?va(e.itemInfo.itemData):[]},getLegendLayers:function(e){return e&&e.itemInfo&&e.itemInfo.itemData?ca(e.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:K,_getItemData:V,_getBingKey:O,_portalUrlResponse:e,_portalUrlFailure:h,_processFSItemProperties:U,_processSSItemProperties:v,_getLayers:oa,_preBuildLayerObjects:za,_buildLayerObjects:ka,_preCreateMap:Z,_getMapSR:qa,_createMap:Oa,_addSelectionLayers:Pa,_createSelectionFeatureLayers:Sa,
_getServiceInfo:Ia,_getFeatureCollectionItem:Ea,_mergeFeatureCollectionItem:Ca,_projectFeatureCollection:ta,_getLayersInfo:Ba,_initLayer:pa,_loadAsCached:W,_loadAsDynamic:na,_processPopups:z,_onLayersAddResult:Ra,_sameSpatialReferenceAsBasemap:Ja,_sameTilingSchemeAsBasemap:Da,_showPopup:Va,_calculateClickTolerance:Ua,_getVisibleFeatureLayers:ea,_updateLayerScaleInfo:Na,_checkUrl:T,_isHostedService:F,_isAgolService:N,_getLegendLayers:ca};t.setObject("arcgis.utils",ga,d);return ga})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M){var J={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},S={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},L=s.connect,Q=s.disconnect,R=u.create,X=x.set,V=r.hitch,O=B.getMarginBox,U=t.deprecated,v=r.mixin,K=0;t=b(G,{declaredClass:"esri.Map",constructor:function(a,l){v(this,{_slider:null,_navDiv:null,_mapParams:v({attributionWidth:0.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},l||{})});v(this,{isDoubleClickZoom:!1,isShiftDoubleClickZoom:!1,isClickRecenter:!1,isScrollWheelZoom:!1,isPan:!1,isRubberBandZoom:!1,isKeyboardNavigation:!1,isPanArrows:!1,isZoomSlider:!1});r.isFunction(E._css)&&(E._css=E._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var e=A("esri-transforms")&&A("esri-transitions");this.navigationMode=this._mapParams.navigationMode||e&&"css-transforms"||
"classic";"css-transforms"===this.navigationMode&&!e&&(this.navigationMode="classic");this.fadeOnZoom=H.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=l&&l.smartNavigation;if(!H.isDefined(this.smartNavigation)&&A("mac")&&!A("esri-touch")&&!A("esri-pointer")&&!(3.5>=A("ff"))){var h=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);
h&&(H.isDefined(h[1])&&H.isDefined(h[3]))&&(e=parseInt(h[1],10),h=parseInt(h[3],10),this.smartNavigation=10<e||10===e&&6<=h)}this.showAttribution=H.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=L(this,"onLoad",this,"_onLoadInitNavsHandler");var n=R("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(e=r.getObject("esri.dijit.Attribution",!1))this._initAttribution(e,n);else{var b=
K++,F=this;this._rids&&this._rids.push(b);q(["./dijit/Attribution"],function(e){var h=F._rids?m.indexOf(F._rids,b):-1;-1!==h&&(F._rids.splice(h,1),F._initAttribution(e,n))})}this._mapParams.logo&&(e={},6===A("ie")&&(e.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+q.toUrl("./images/map/logo-med.png")+"')"),this._ogol=R("div",{style:e,tabIndex:"0",title:"Esri"},n),this._setLogoSize(),this._onMapResizeLogo_connect=L(this,"onResize",this,
"_setLogoSize"),this._ogol_connect=L(this._ogol,y,this,"_openLogoLink"));this.navigationManager=new I(this);l&&l.basemap&&(this._onLoadFix=!0,this.setBasemap(l.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)e=this._getEnclosingResizableWidget(this.container)||window,h=this.resize,this._rszSignal=g.pausable(e,"resize",h),this._oriSignal=g.pausable(window,"orientationchange",h),f.after(e,"resize",h,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);
this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(a){var l=w.getEnclosingWidget(a);return!l?l:l.resize?l:this._getEnclosingResizableWidget(a.parentNode)},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(d.remove(this._ogol,"logo-med"),d.add(this._ogol,"logo-sm")):(d.remove(this._ogol,"logo-sm"),d.add(this._ogol,"logo-med")))},_initAttribution:function(a,l){var e=R("span",{"class":"esriAttribution"},
l,"first");X(e,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(L(e,y,function(){d.contains(this,"esriAttributionOpen")?d.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&d.add(this,"esriAttributionOpen")}));this.attribution=new a({map:this},e)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var a=this._slider;a&&(a.destroy&&!a._destroyed)&&a.destroy();var a=this._navDiv,l=this.attribution;a&&u.destroy(a);
l&&l.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);m.forEach(this._connects,Q);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(a){var l=this.getLevel();return!this.__tileInfo||
!(l===this.getMinZoom()&&0>a||l===this.getMaxZoom()&&0<a)},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var a=-1!==this._getSliderClass(!0).indexOf("Horizontal"),a=[a?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",a?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",a?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];
if(m.some(a,function(e){return!r.getObject(e,!1)})){var a=m.map(a,function(e){return e.replace(/\./g,"/")}),l=K++,e=this;this._rids&&this._rids.push(l);q(a,function(){var h=e._rids?m.indexOf(e._rids,l):-1;-1!==h&&(e._rids.splice(h,1),e._createSlider.apply(e,arguments))})}else a=m.map(a,function(e){return r.getObject(e,!1)}),this._createSlider.apply(this,a)}Q(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var a,l,e,h=d.add,n=this.id;this._navDiv=R("div",{id:n+"_navdiv"},
this.root);h(this._navDiv,"navDiv");var b=this.width/2,v=this.height/2,c;for(e in J)l=J[e],a=R("div",{id:n+"_pan_"+e},this._navDiv),h(a,"fixedPan "+l),"up"===e||"down"===e?(c=parseInt(O(a).w,10)/2,X(a,{left:b-c+"px",zIndex:30})):(c=parseInt(O(a).h,10)/2,X(a,{top:v-c+"px",zIndex:30})),this._connects.push(L(a,"onclick",V(this,this[l])));this._onMapResizeNavHandler_connect=L(this,"onResize",this,"_onMapResizeNavHandler");for(e in S)l=S[e],a=R("div",{id:n+"_pan_"+e,style:{zIndex:30}},this._navDiv),h(a,
"fixedPan "+l),this._connects.push(L(a,"onclick",V(this,this[l])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(b,l,e){b=this.id;l/=2;e/=2;var h=a.byId,n,z,v;for(n in J)z=h(b+"_pan_"+n),"up"===n||"down"===n?(v=parseInt(O(z).w,10)/2,X(z,"left",l-v+"px")):(v=parseInt(O(z).h,10)/2,X(z,"top",e-v+"px"))},_createSimpleSlider:function(){if(this._mapParams.slider){var b=this._slider=R("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),l=R("div",{"class":"esriSimpleSliderIncrementButton",
tabIndex:"0",role:"button"},b),e=R("div",{"class":"esriSimpleSliderDecrementButton",tabIndex:"0",role:"button"},b);this._addZoomButtonTooltips(l,e);this._incButton=l;this._decButton=e;this._simpleSliderZoomHandler(null,null,null,this.getLevel());l.innerHTML="\x3cspan\x3e+\x3c/span\x3e";e.innerHTML="\x3cspan\x3e\x26ndash;\x3c/span\x3e";8>A("ie")&&d.add(e,"dj_ie67Fix");this._connects.push(L(l,y,this,this._simpleSliderChangeHandler));this._connects.push(L(e,y,this,this._simpleSliderChangeHandler));(-1<
this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(L(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>A("ie")&&a.setSelectable(b,!1);this.root.appendChild(b);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(a){k.stop(a);a=-1!==a.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:a?1:-1})},_simpleSliderZoomHandler:function(a,l,e,h){var n;a=this._incButton;l=this._decButton;-1<h&&h===this.getMaxZoom()?n=a:-1<h&&h===this.getMinZoom()&&(n=
l);n?(d.add(n,"esriSimpleSliderDisabledButton"),d.remove(n===a?l:a,"esriSimpleSliderDisabledButton")):(d.remove(a,"esriSimpleSliderDisabledButton"),d.remove(l,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(a){a=a?"Large":"Simple";var l=this._mapParams.sliderOrientation,e=this._mapParams.sliderPosition||"",l=l&&"horizontal"===l.toLowerCase()?"esri"+a+"SliderHorizontal":"esri"+a+"SliderVertical";if(e)switch(e.toLowerCase()){case "top-left":e="esri"+a+"SliderTL";break;case "top-right":e=
"esri"+a+"SliderTR";break;case "bottom-left":e="esri"+a+"SliderBL";break;case "bottom-right":e="esri"+a+"SliderBR"}return"esri"+a+"Slider "+l+" "+e},_addZoomButtonTooltips:function(a,l){var e=M.widgets.zoomSlider;c.set(a,"title",e.zoomIn);c.set(l,"title",e.zoomOut)},_createSlider:function(a,l,e){if(this._mapParams.slider){var h=R("div",{id:this.id+"_zoom_slider"},this.root),n=D.defaults.map,b=this._getSliderClass(!0),v=-1!==b.indexOf("Horizontal"),c=this.getNumLevels();if(0<c){var d,f,g=this._mapParams.sliderLabels,
k=!!g,u=!1!==g;if(u){var w=v?"bottomDecoration":"rightDecoration";if(!g){g=[];for(n=0;n<c;n++)g[n]=""}m.forEach([{"class":"esriLargeSliderTicks",container:w,count:c,dijitClass:l},{"class":k&&"esriLargeSliderLabels",container:w,count:c,labels:g,dijitClass:e}],function(e){var a=R("div"),n=e.dijitClass;delete e.dijitClass;h.appendChild(a);n===l?d=new n(e,a):f=new n(e,a)})}a=this._slider=new a({id:h.id,"class":b,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:c,value:this.getLevel(),
clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},h);a.startup();u&&(d.startup(),f.startup());this._slider_connect=L(a,"onChange",this,"_onSliderChangeHandler");this._connects.push(L(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(L(a._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{a=this._slider=new a({id:h.id,"class":b,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:n.sliderChangeImmediate,style:"height:50px; z-index:30;"},
h);e=a.domNode.firstChild.childNodes;for(n=1;3>=n;n++)X(e[n],"visibility","hidden");a.startup();this._slider_connect=L(a,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(L(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}n=a.incrementButton;e=a.decrementButton;v?this._addZoomButtonTooltips(n,e):this._addZoomButtonTooltips(e,n);n.style.outline="none";e.style.outline="none";a.sliderHandle.style.outline="none";a._onKeyPress=function(){};if(v=a._movable){var r=v.onMouseDown;
v.onMouseDown=function(e){9>A("ie")&&1!==e.button||r.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){Q(this._slider_connect);Q(this._slidermovestop_connect);this._slider_connect=L(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=L(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(a){this._extentUtil({targetLevel:a})},_onSliderMoveEndHandler:function(){Q(this._slider_connect);
Q(this._slidermovestop_connect)},_onSliderChangeHandler:function(a){this.setLevel(a)},_updateSliderValue:function(a,l){Q(this._slider_connect);var e=this._slider,h=e._onChangeActive;e._onChangeActive=!1;e.set("value",a);e._onChangeActive=h;this._slider_connect=L(e,"onChange",this,l)},_onExtentChangeSliderHandler:function(a,l,e,h){Q(this._slidermovestop_connect);this._updateSliderValue(h.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(a){this._extentUtil({numLevels:0<a?1:-1})},
_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(a){window.open(D.defaults.map.logoLink,"_blank");k.stop(a)},enableMapNavigation:function(){this.navigationManager.enableNavigation()},disableMapNavigation:function(){this.navigationManager.disableNavigation()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.navigationManager.enableDoubleClickZoom(),this.isDoubleClickZoom=!0)},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&
(this.navigationManager.disableDoubleClickZoom(),this.isDoubleClickZoom=!1)},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(U(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(U(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.navigationManager.enableClickRecenter(),this.isClickRecenter=!0)},disableClickRecenter:function(){this.isClickRecenter&&(this.navigationManager.disableClickRecenter(),this.isClickRecenter=!1)},enablePan:function(){this.isPan||(this.navigationManager.enablePan(),this.isPan=!0)},disablePan:function(){this.isPan&&(this.navigationManager.disablePan(),
this.isPan=!1)},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.navigationManager.enableRubberBandZoom(),this.isRubberBandZoom=!0)},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.navigationManager.disableRubberBandZoom(),this.isRubberBandZoom=!1)},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.navigationManager.enableKeyboardNavigation(),this.isKeyboardNavigation=!0)},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.navigationManager.disableKeyboardNavigation(),
this.isKeyboardNavigation=!1)},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&
(X(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(X(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)}});A("extend-esri")&&(E.Map=t);return t})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/VectorTileLayer ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S,L,Q,R,X,V,O,U,v,K,C,l,e,h,n,z,F,N,T,W){function ea(e,a){var l=e.lods;l.sort(function(e,h){return e.scale>h.scale?-1:e.scale<h.scale?1:0});var b=[],l=g.filter(l,function(e){if(-1===za(b,e.scale))return b.push(e.scale),!0}),z=a.lods=[],v;g.forEach(l,function(e,h){v=z[h]=new n(e);v.level=h});a.tileInfo=new h(la(e,{lods:z}))}var na,sa=C.toMapPoint,Ja=C.toScreenPoint,Da=r.connect,pa=r.disconnect,ka=k.hitch,qa=y.set,za=g.indexOf,la=k.mixin,Ia=
0,Ea=H.defaults.map,Ca=Ea.layerNamePrefix,ta=Ea.graphicsLayerNamePrefix,oa=RegExp("^"+Ca+"(\\d+)$"),Aa=RegExp("^"+ta+"(\\d+)$"),Na=function(){};s=s([M,R],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',invalidBasemap:'Unable to add basemap: "${basemapName}".',
unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],load:["map"],pan:["extent","delta"],"pan-end":["extent",
"delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,
"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(e,h){var n=this;this.registerConnectEvents();la(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_connects:[],_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,
_cursor:null,_ratioW:1,_ratioH:1,_params:null,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[]});var l=this.container=c.byId(e),b=this.id=d.get(l,"id")||E.getUniqueId(this.declaredClass);u.add(l,"map");var z=x.getContentBox(l),v=u.add,F=B.create;this.position=new V(0,0);this._reposition();var N=this.width=0<z.w?z.w:Ea.width,f=this.height=0<
z.h?z.h:Ea.height,T=this.root=F("div",{id:b+"_root",style:{width:N+"px",height:f+"px",direction:"ltr"}});v(T,"esriMapContainer");z=this.__container=F("div",{id:b+"_container"},T);qa(z,"position","absolute");v(z,"esriMapContainer");l.appendChild(T);l=this._params=la({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},h||{});this.wrapAround180=l.wrapAround180;this.optimizePanAnimation=
l.optimizePanAnimation;I.isDefined(l.resizeDelay)&&(this.resizeDelay=l.resizeDelay);l.lods&&(ea({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:l.lods},l),this.__tileInfo=l.tileInfo);this.extent=l.extent;this._extentUtil({mapCenter:l.center,targetLevel:l.zoom,targetScale:l.scale});this.__visibleRect=new U(0,0,N,f);this.__visibleDelta=new U(0,0,N,f);b=this._layersDiv=F("div",{id:b+"_layers"});v(b,"esriMapLayers");z.appendChild(b);
this._zoomAnimDiv=F("div",{style:{position:"absolute"}});l.infoWindow?this.infoWindow=l.infoWindow:(v=this.infoWindow=new W(l.popupOptions,F("div")),v.startup(),v._ootb=!0,qa(v.domNode,"zIndex",40));l.showLabels&&(q(["./layers/LabelLayer"],function(e){na=e;n._createLabelLayer()}),this.on("load",function(){n._createLabelLayer()}));this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:l.showInfoWindowOnClick});this._zoomStartHandler=ka(this,this._zoomStartHandler);this._zoomingHandler=ka(this,
this._zoomingHandler);this._zoomEndHandler=ka(this,this._zoomEndHandler);this._panningHandler=ka(this,this._panningHandler);this._panEndHandler=ka(this,this._panEndHandler);this._endTranslate=ka(this,this._endTranslate);this._timedResize=ka(this,this._timedResize);this._execResize=ka(this,this._execResize);this._processLabelLayers=ka(this,this._processLabelLayers);this._updateLabelLayers=ka(this,this._updateLabelLayers);this.resize=ka(this,this.resize);a.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(e){return q.toAbsMid?
q.toAbsMid(e):t.id.replace(/\/[^\/]*$/ig,"/")+e},_cleanUp:function(){var e=this.infoWindow;e&&(e._ootb&&e.destroy?e.destroy():e.unsetMap(this),delete this.infoWindow);pa(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");B.destroy(this.root);this.root=null},_addLayer:function(h,a,n){if(h.id){var l=h.id.match(h instanceof e?Aa:oa);l&&l[1]&&(l=Number(l[1]),Ia<=l&&(Ia=l+1))}var b=h.id||(h instanceof e?ta:Ca)+Ia++;h.id=b;this._layers[b]=h;var z,v;if(a===this.layerIds||a===this.graphicsLayerIds)z=
this._layerSize,this._layerSize++;h._isRefLayer="top"===n;n=!I.isDefined(n)||0>n||n>a.length||"top"===n?a.length:n;0===z&&(this._firstLayerId=b);if(!h._isRefLayer)for(;(v=this.getLayer(a[n-1]))&&v._isRefLayer;)n--;a.splice(n,0,b);var F=ka(this,this._addLayerHandler),c=this;n=this._connects;l=function(){h.loaded?c._onLoadFix?(c._onLoadFix=!1,setTimeout(function(){F(h)},0)):F(h):(c["_"+b+"_addtoken_load"]=Da(h,"onLoad",c,"_addLayerHandler"),c["_"+b+"_addtoken_err"]=Da(h,"onError",c,function(e){F(h,
e,a)}))};this.loaded||0===z||h.loaded&&-1===za(this.graphicsLayerIds,b)?l():n.push(Da(this,"onLoad",l));return h},_addLayerHandler:function(h,a,n){var l=this.id,b=h.id,z=za(h instanceof e?this.graphicsLayerIds:this.layerIds,b),v=z,F=!1,c=this._params;pa(this["_"+b+"_addtoken_load"]);pa(this["_"+b+"_addtoken_err"]);if(a)delete this._layers[b],-1!==z&&(n.splice(z,1),this.onLayerAddResult(h,a));else{-1===z&&(z=za(this._internalLayerIds,b),v=20+z,F=!0);if(b===this._firstLayerId){a=h.spatialReference;
if((n=this.extent&&this.extent.spatialReference)&&!n.equals(a)&&(h.tileInfo||!h.url))n=null;n=this.spatialReference=n||a;this.wrapAround180=this.wrapAround180&&n&&n._isWrappable()?!0:!1;h.tileInfo&&(this.__tileInfo?(a=this.__tileInfo.lods,this.__tileInfo=la({},h.tileInfo),this.__tileInfo.lods=a):(ea(la({},h.tileInfo),c),this.__tileInfo=c.tileInfo));if(this.wrapAround180){a=this.__tileInfo;n=n._getInfo();if(!a||Math.abs(n.origin[0]-a.origin.x)>n.dx)this.wrapAround180=!1;this.wrapAround180&&a&&L._addFrameInfo(a,
n)}c.units=h.units;if((a=this.__tileInfo&&this.__tileInfo.lods)&&a.length){n=c.minScale;var z=c.maxScale,N=-1,d=-1,f=!1,T=!1,C;for(C=0;C<a.length;C++)0<n&&(!f&&n>=a[C].scale)&&(N=a[C].level,f=!0),0<z&&(!T&&z>=a[C].scale)&&(d=0<C?a[C-1].level:-1,T=!0);-1===c.minZoom&&(c.minZoom=0===n?a[0].level:N);-1===c.maxZoom&&(c.maxZoom=0===z?a[a.length-1].level:d);for(C=0;C<a.length;C++)c.minZoom===a[C].level&&(c.minScale=a[C].scale),c.maxZoom===a[C].level&&(c.maxScale=a[C].scale)}else c.minZoom=c.maxZoom=c.zoom=
-1}h instanceof e?(this._gc||(this._gc=new e._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=l+"_gc"),v=h._setMap(this,this._gc._surface),v.id=l+"_"+b,this._layerDivs[b]=v,this._reorderLayers(this.graphicsLayerIds)):(v=h._setMap(this,this._layersDiv,v,this.__LOD),v.id=l+"_"+b,this._layerDivs[b]=v,this._reorderLayers(this.layerIds),!F&&-1!==h.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerAdd(h));b===this._firstLayerId&&(this.graphics=new e({id:l+"_graphics",displayOnPan:c.displayGraphicsOnPan}),
this._addLayer(this.graphics,this._internalLayerIds,20));if(h===this.graphics){n=this._layers[this._firstLayerId];l=c.zoom;v=c.scale;a=c.center;n=n.initialExtent||n.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&n&&(a&&(a=this._convertGeometry(n,a)),a&&(n=n.centerAt(a)));if(a=this.extent||n&&new O(n.toJson()))-1<l?a=this.__getExtentForLevel(l,null,a).extent:0<v&&(a=K.getExtentForScale(this,v,a));if(!a)return;c=this._fixExtent(a,
c.fitExtent);this.extent=c.extent;this.__LOD=c.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}F||(this.onLayerAdd(h),this.onLayerAddResult(h));pa(this[b+"_addLayerHandler_connect"])}},_convertGeometry:function(e,h){var a=e&&e.spatialReference,n=h&&h.spatialReference;a&&(n&&!a.equals(n))&&(a._canProject(n)?a.isWebMercator()?h=l.geographicToWebMercator(h):4326===a.wkid&&(h=l.webMercatorToGeographic(h,!0)):h=null);return h},
_reorderLayers:function(e){var h=this.onLayerReorder,a=B.place,n=this._layerDivs,l=this._layers,b=this._gc?this._gc._surface.getEventSource():null;if(e===this.graphicsLayerIds)g.forEach(e,function(e,z){var v=n[e];v&&(a(v.getEventSource(),b,z),h(l[e],z))});else{var z=this.graphics,v=z?z.id:null,F=this._layersDiv,c;g.forEach(e,function(e,b){c=n[e];e!==v&&c&&(a(c,F,b),h(l[e],b))});this._mapImageLyr&&this._placeMapImageLyr();b&&(b=9>w("ie")?b.parentNode:b,a(b,b.parentNode,e.length))}this.onLayersReordered([].concat(e))},
_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(e){var h=parseFloat(e.left),a=parseFloat(e.top);e=new O(h,a-parseFloat(e.height),h+parseFloat(e.width),a,this.spatialReference);h=this.extent.getWidth()/e.getWidth();this.__zoom(e,h,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var e=this._zoomAnimDiv,h=e.extent,a=this.extent.getWidth()/h.getWidth(),n=e.anchor,l=e.newLod,b=e.levelChange;e.extent=e.anchor=e.levelChange=
e.startingExtent=e.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(h,a,n,l,b)},_panningHandler:function(e){if(isNaN(parseFloat(e.left))||isNaN(parseFloat(e.top))){var h=Math.round,a=this._panAnim.node;e.left=-1*(this._delta.x-h(this.width/2))+"px";e.top=-1*(this._delta.y-h(this.height/2))+"px";y.set(a,"left",e.left);y.set(a,"top",e.top)}e=new V(parseFloat(e.left),parseFloat(e.top));h=this.toMap(e);this.onPan(this.extent.offset(this.extent.xmin-h.x,this.extent.ymax-h.y),e)},_panEndHandler:function(e){this.__panning=
!1;var h=Math.round;e=new V(-h(parseFloat(e.style.left)),-h(parseFloat(e.style.top)));var h=e.x,a=e.y,n=this.__visibleRect,l=this.__visibleDelta;n.x+=-h;n.y+=-a;l.x+=-h;l.y+=-a;qa(this._zoomAnimDiv,{left:"0px",top:"0px"});var n=this.extent,l=this._ratioW,b=this._ratioH,n=new O(n.xmin+h/l,n.ymin-a/b,n.xmax+h/l,n.ymax-a/b,this.spatialReference);e.setX(-e.x);e.setY(-e.y);this._delta=this._panAnim=null;this._updateExtent(n);this.onPanEnd(n,e);this._fireExtChg([n,e,!1,this.__LOD])},_fixExtent:function(e,
h){for(var a=this._reshapeExtent(e),n=1.25;!0===h&&(a.extent.getWidth()<e.getWidth()||a.extent.getHeight()<e.getHeight())&&0<a.lod.level&&3>=n;)a=this._reshapeExtent(e.expand(n)),n+=0.25;return a},_getFrameWidth:function(){var e=-1,h=this.spatialReference._getInfo();this.__LOD?(h=this.__LOD._frameInfo)&&(e=h[3]):h&&(e=Math.round(2*h.valid[1]/(this.extent.getWidth()/this.width)));return e},_fixAspectRatio:function(e){var h=e.getWidth(),a=e.getHeight(),n=h/a,l=this.width/this.height,b=0,z=0;this.width>
this.height?h>a?l>n?b=a*l-h:z=h/l-a:b=a*l-h:this.width<this.height?h<a?l>n?b=a*l-h:z=h/l-a:z=h/l-a:h<a?b=a-h:h>a&&(z=h/l-a);b&&(e.xmin-=b/2,e.xmax+=b/2);z&&(e.ymin-=z/2,e.ymax+=z/2);return e},_reshapeExtent:function(e){e=this._fixAspectRatio(e);return this._getAdjustedExtent(e)},_getAdjustedExtent:function(e){if(this.__tileInfo)return L.getCandidateTileInfo(this,this.__tileInfo,e);var h=K.getScale(this,e),a=this.getMinScale(),n=this.getMaxScale(),l=!n||h>=n;a&&!(h<=a)?e=K.getExtentForScale(this,a,
e):l||(e=K.getExtentForScale(this,n,e));return{extent:e}},_onBingLayerAdd:function(e){this["__"+e.id+"_vis_connect"]=r.connect(e,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(e.visible)},_onBingLayerRemove:function(e){r.disconnect(this["__"+e.id+"_vis_connect"]);delete this["__"+e.id+"_vis_connect"];var h=g.some(this.layerIds,function(h){return(e=this._layers[h])&&e.visible&&-1!==e.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(h)},_toggleBingLogo:function(e){e&&
!this._bingLogo?(e={left:this._mapParams&&this._mapParams.nav?"25px":""},6===w("ie")&&(e.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+q.toUrl("./images/map/bing-logo-lg.png")+"')"),e=this._bingLogo=B.create("div",{style:e},this.root),u.add(e,"bingLogo-lg")):!e&&this._bingLogo&&(B.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(e,h){var a=this._zoomAnim,n=this._panAnim;if(a&&a._active)a.stop(),a._fire("onEnd",[a.node]);
else if(n&&n._active){n.stop();this._panAnim=null;var n=n.curve.getValue(n._getStep()),a=Math.round(parseFloat(n.left)),n=Math.round(parseFloat(n.top)),l=this.navigationManager._dragOrigin;this.__pan(a,n);l&&(l.x-=a,l.y-=n);return}this.__panning=!0;this.onPanStart(this.extent,new V(e,h))},__pan:function(e,h){var a=this.extent,n=this._ratioW,l=this._ratioH;this.onPan(new O(a.xmin-e/n,a.ymin+h/l,a.xmax-e/n,a.ymax+h/l,this.spatialReference),new V(e,h))},__panEnd:function(e,h){var a=this.__visibleRect,
n=this.__visibleDelta;a.x+=e;a.y+=h;n.x+=e;n.y+=h;var a=new V(e,h),n=this.extent,l=this._ratioW,b=this._ratioH,n=new O(n.xmin-e/l,n.ymin+h/b,n.xmax-e/l,n.ymax+h/b,this.spatialReference);this.__panning=!1;this._updateExtent(n);this.onPanEnd(n,a);this._fireExtChg([n,a,!1,this.__LOD])},__zoomStart:function(e,h){this.__zooming=!0;this.onZoomStart(e,1,h,this.__LOD?this.__LOD.level:null)},__zoom:function(e,h,a){this.onZoom(e,h,a)},__zoomEnd:function(e,h,a,n,l){qa(this._layersDiv,{left:"0px",top:"0px"});
this._delta=new V(0,0);this.__visibleRect.x=this.__visibleRect.y=0;e=new O(e);this.__LOD=n;this._ratioW=this.width/e.getWidth();this._ratioH=this.height/e.getHeight();var b=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(e,l);this.onZoomEnd(e,h,a,n?n.level:null);this._fireExtChg([e,b,l,n])},_extentUtil:function(e,h,a,n,l){var b=new m,z,v,F,c,N,d,f,T,C,g,W=this.width,u=this.height,w,ea,r;e&&(z=e.numLevels,v=e.targetLevel,w=I.isDefined(v),F=e.factor,c=e.mapAnchor,N=e.screenAnchor,
d=e.mapCenter,ea=e.levelOrFactor,f=e.targetScale,T=I.isDefined(f)&&0<f);h&&(C=h.dx,g=h.dy,d=h.mapCenter);k.isArray(d)&&(d=new X(d));var s=this._panAnim;h=(e=this._stopAnim())?e.divExtent:this.extent;var q=this.__tileInfo,y=this._params;if(!this.loaded){if(a)h&&(a=this._convertGeometry(h,a)),a&&(this.extent=a,y.zoom=y.scale=-1,y.center=null);else if(d||w||T){if(d)if(h){if(d=this._convertGeometry(h,d))this.extent=h.centerAt(d),y.center=null}else y.center=d;w&&-1<v?(y.zoom=v,y.scale=-1):T&&(y.scale=
f,y.zoom=-1)}b.resolve();return b}if(d&&(d=this._convertGeometry(this,d),!d)||c&&(c=this._convertGeometry(this,c),!c)||a&&(a=this._convertGeometry(this,a),!a))return b.reject(),b;s&&(c&&N)&&(c=sa(this.extent,W,u,N));e&&(c&&N)&&(c=sa(e.divExtent,W,u,N));w&&(q?(z=this.getMinZoom(),w=this.getMaxZoom(),v<z?v=z:v>w&&(v=w),z=v-(e?e.level:this.getLevel())):(z=0<v?-1:1,r=ea?v:null));if(!a)if(I.isDefined(z))q?(W=e?e.level:this.getLevel(),W=this.__getExtentForLevel(W+z,d,h).extent):(W=(e?e.end:this.extent).expand(r||
(0<z?0.5*z:2*-z)),r&&d&&(W=W.centerAt(d))),W&&(d?a=W:(C=c||h.getCenter(),u=W.getWidth(),g=W.getHeight(),W=C.x>=h.xmin&&C.x<=h.xmax?(C.x-h.xmin)/h.getWidth():0.5,a=C.y>=h.ymin&&C.y<=h.ymax?(C.y-h.ymin)/h.getHeight():0.5,W=C.x-W*u,C=C.y-a*g,a=new O(W,C,W+u,C+g,this.spatialReference)));else if(T)a=K.getExtentForScale(this,f,h);else if(I.isDefined(F))a=h.expand(F);else if(C||g)e?(a=e.end,c=a.getCenter(),r=Ja(a,W,u,c),r.x+=C,r.y+=g,r=sa(a,W,u,r),a=a.offset(r.x-c.x,r.y-c.y)):(C=new V(W/2+C,u/2+g),C=sa(h,
W,u,C),u=h.getWidth(),g=h.getHeight(),W=C.x-u/2,C=C.y-g/2,a=new O(W,C,W+u,C+g,this.spatialReference));a||(d?(h=e?e.end:h,u=h.getWidth(),g=h.getHeight(),W=d.x-u/2,C=d.y-g/2,a=new O(W,C,W+u,C+g,this.spatialReference)):e&&(a=e.end));a?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,Na),this._extentDfd.reject()),this._extentDfd=b,this.__setExtent(a,null,N,n,e,l)):b.reject();return b},__setExtent:function(e,h,a,n,l,b){try{if(this._firstLayerId)this.extent=e;else{var z=!0,F=this.spatialReference,
c=l?l.divExtent:this.extent,N=this._fixExtent(e,n||!1);e=N.extent;var d=e.getWidth(),f=e.getHeight(),T=Math.round;if(c)var C=T(1E6*c.getWidth()),g=T(1E6*d),W=T(1E6*c.getHeight()),k=T(1E6*f),z=C!==g||W!==k;var m,u,ea=l&&l.rect,r=l&&l.divExtent;if(Ea.zoomDuration&&z&&c){r=r||new O(c);ea=ea||{left:c.xmin,top:c.ymax,width:c.getWidth(),height:c.getHeight()};u={left:e.xmin,top:e.ymax,width:d,height:f};var s=new X(e.xmin,e.ymax,F),q=new X(e.xmin,e.ymin,F),y=new X(this.extent.xmin,this.extent.ymax,F),x=new X(this.extent.xmin,
this.extent.ymin,F);m=v.getLineIntersection(y,s,x,q,F);!m&&!l&&(z=!1)}this._ratioW=this.width/d;this._ratioH=this.height/f;var t=this._zoomAnimDiv;if(z)if(qa(this._layersDiv,{left:"0px",top:"0px"}),h=new V(0,0),this.__visibleRect.x=this.__visibleRect.y=0,ea&&u){this._delta=h;t.id="_zAD";t.startingExtent=r;t.extent=e;t.levelChange=z;t.newLod=N.lod;t.anchor=a?a:!m&&l?l.anchor:Ja(this.extent,this.width,this.height,m);var A=this.extent.getWidth()/e.getWidth();w("chrome")&&1024<(1>A?1/A:A)?(this.__zoomStart(r,
t.anchor),this.__zoom(r,1,t.anchor),this._fireOnScale(1,t.anchor,!0),this.__zoomEnd(e,A,t.anchor,N.lod,z)):(this._zoomAnim=J.resize({node:t,start:ea,end:u,duration:Ea.zoomDuration,rate:Ea.zoomRate,beforeBegin:!l?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(A,t.anchor,b))}else this._updateExtent(e,z,b),this._fireExtChg([this.extent,h,z,this.__LOD=N.lod]);else if(!this.__panning)if(!1===this.loaded||b)this._updateExtent(e,z,b),this._fireExtChg([this.extent,
h,z,this.__LOD=N.lod]);else{this.__panning=!0;ea=(new U(0,0,this.width,this.height,this.spatialReference)).getCenter();ea.x=T(ea.x);ea.y=T(ea.y);var na=this._delta=this.toScreen(e.getCenter()),K=Math.abs(ea.x-na.x),B=Math.abs(ea.y-na.y);this.optimizePanAnimation&&(K>2*this.width||B>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(e,!1,b),this.onPanEnd(this.extent,
new V(0,0)),this._fireExtChg([this.extent,new V(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new V(0,0)),this._panAnim=J.slideTo({node:t,left:ea.x-na.x,top:ea.y-na.y,duration:Ea.panDuration,rate:Ea.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(sa){console.error(sa)}},_fireOnScale:function(e,h,a){if("css-transforms"===this.navigationMode){var n=this.__visibleDelta;this.onScale(D.scaleAt(e,{x:-1*(this.width/2-(h.x-n.x)),y:-1*(this.height/2-(h.y-
n.y))}),a)}},_stopAnim:function(){var e=this._zoomAnim,h=this._panAnim;if(e&&e._active){e.stop();var h=e.curve.getValue(e._getStep()),a=parseFloat(h.left),n=parseFloat(h.top),e=e.node;return{anchor:e.anchor,start:e.startingExtent,end:e.extent,level:e.newLod&&e.newLod.level,rect:h,divExtent:new O(a,n-parseFloat(h.height),a+parseFloat(h.width),n,this.spatialReference)}}h&&h._active&&(h.stop(),h._fire("onEnd",[h.node]))},__getExtentForLevel:function(e,h,a){var n=this.__tileInfo,n=n&&n.lods;e=I.isDefined(e)?
e:0;a=a||this.extent;h=h||a&&a.getCenter();if(n){if(h){a=this.getMinZoom();var l=this.getMaxZoom();e>l&&(e=l);e<a&&(e=a);e=n[e];n=this.width*e.resolution/2;a=this.height*e.resolution/2;return{extent:new O(h.x-n,h.y-a,h.x+n,h.y+a,h.spatialReference),lod:e}}}else if(a)return{extent:a.expand(!e||1>e?1:e).centerAt(h)}},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var e=--this._jobs;e?0>e&&(this._jobs=0):(this.updating=
!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(e,h){this[e]&&this[e].apply(this,h)},_updateExtent:function(e,h,a){this.extent=e;(h||a)&&this._setClipRect();if(e=this.spatialReference)e.isWebMercator()?this.geographicExtent=l.webMercatorToGeographic(this._getAvailExtent(),!0):4326===e.wkid&&(this.geographicExtent=new O(this._getAvailExtent().toJson()))},_fireExtChg:function(e){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",
e);if(e=this._extentDfd)delete this._extentDfd,e.resolve()},attr:function(e,h){var a=this.container;a&&(null==h?a.removeAttribute(e):a.setAttribute(e,h));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(e,h,a){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},
onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this._cleanUp(),clearTimeout(this._resizeT),this._gc&&this._gc._cleanUp(),this._destroyed=
!0,this.onUnload(this))},setCursor:function(e){qa(this.__container,"cursor",this.cursor=e)},setMapCursor:function(e){this.setCursor(this._cursor=e)},resetMapCursor:function(){this.setCursor(this._cursor)},setInfoWindow:function(e){var h=this.infoWindow;h&&h.unsetMap(this);this.infoWindow=e;this.loaded&&e&&e.setMap(this)},setInfoWindowOnClick:function(e){this._params.showInfoWindowOnClick=e;this.popupManager&&this.popupManager.set("enabled",e)},getInfoWindowAnchor:function(e){return this.infoWindow&&
this.infoWindow._getAnchor&&this.infoWindow._getAnchor(e)||"upperright"},toScreen:function(e,h){return Ja(this.extent,this.width,this.height,e,h)},toMap:function(e){return sa(this.extent,this.width,this.height,e)},addLayer:function(h,a){h&&!this.getLayer(h.id)&&this._addLayer(h,h instanceof e?this.graphicsLayerIds:this.layerIds,a);return h},addLayers:function(e){var h=[],a=e.length,n,l,b=e.length;n=r.connect(this,"onLayerAddResult",function(l,b){-1!==g.indexOf(e,l)&&(a--,h.push({layer:l,success:!b,
error:b}),a||(r.disconnect(n),this.onLayersAddResult(h)))});for(l=0;l<b;l++)this.addLayer(e[l]);return this},removeLayer:function(h,a){var n=h.id,l=h instanceof e?this.graphicsLayerIds:this.layerIds,b=za(l,n);0<=b&&(l.splice(b,1),h instanceof e?(pa(this["_gl_"+h.id+"_click_connect"]),h.loaded&&h._unsetMap(this,this._gc._surface)):h.loaded&&(h._unsetMap(this,this._layersDiv),-1!==h.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(h)),delete this._layers[n],delete this._layerDivs[n],a||
this._reorderLayers(l),this.onLayerRemove(h))},removeAllLayers:function(){var e=this.layerIds,h;for(h=e.length-1;0<=h;h--)this.removeLayer(this._layers[e[h]],1);e=this.graphicsLayerIds;for(h=e.length-1;0<=h;h--)this.removeLayer(this._layers[e[h]],1);this.onLayersRemoved()},reorderLayer:function(h,a){k.isString(h)&&(b.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),h=this.getLayer(h));
var n=h.id,l,z=h instanceof e?this.graphicsLayerIds:this.layerIds;0>a?a=0:a>=z.length&&(a=z.length-1);l=za(z,n);-1===l||l===a||(z.splice(l,1),z.splice(a,0,n),this._reorderLayers(z))},getLayer:function(e){return this._layers[e]},setExtent:function(e,h){e=new O(e.toJson());var a=e.getWidth(),n=e.getHeight();return 0===a&&0===n?this.centerAt(new X({x:e.xmin,y:e.ymin,spatialReference:e.spatialReference&&e.spatialReference.toJson()})):this._extentUtil(null,null,e,h)},centerAt:function(e){return this._extentUtil(null,
{mapCenter:e})},centerAndZoom:function(e,h){return this._extentUtil({targetLevel:h,mapCenter:e,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:K.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*K.getUnitValueForSR(this.spatialReference)},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},
setScale:function(e){return this._extentUtil({targetScale:e})},getLayersVisibleAtScale:function(e){var h=[];(e=e||this.getScale())&&g.forEach(this.layerIds.concat(this.graphicsLayerIds),function(a){a=this.getLayer(a);a.isVisibleAtScale(e)&&h.push(a)},this);return h},getNumLevels:function(){var e=this.getMinZoom(),h=this.getMaxZoom();return e===h&&0>e?0:h-e+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(e){if(-1<e)return this._extentUtil({targetLevel:e})},getZoom:function(){return this.getLevel()},
setZoom:function(e){return this.setLevel(e)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(e){var h;k.isObject(e)?(h=e,e=h.title):h=G&&G[e];if(h){this._basemapDfd&&-1===this._basemapDfd.fired&&this._basemapDfd.cancel();var a=[],n=[],l=0;g.forEach(h.baseMapLayers||h.layers,function(e){var h,b={id:e.id,displayLevels:e.displayLevels,opacity:I.isDefined(e.opacity)?e.opacity:null,visible:I.isDefined(e.visibility)?e.visibility:
null};if(e.type)switch(e.type){case "OpenStreetMap":h=new N(b);break;case "VectorTile":h=Q._ensureProperProtocolForAGOResource(e.url),h=new T(h,b)}else h=Q.normalize(e.url),h=new z(h,b);h&&(a.push(h),n.push(e),e.isReference||l++)},this);if(a.length&&l){var b={basemapName:e,infos:n,layers:a};if(this.loaded){var v=this,F=new m(S._dfdCanceller),c=function(e){F._pendingLayers--;e=g.indexOf(b.layers,this);if(-1<e&&(e=F._layerEvents[e]))r.disconnect(e[0]),r.disconnect(e[1]);0>=F._pendingLayers&&(delete F._layerEvents,
delete v._basemapDfd,0>F.fired&&F.callback(b))};this._basemapDfd=F;F._pendingLayers=0;F._layerEvents={};g.forEach(a,function(e,h){e&&(F._pendingLayers++,e.loaded?c(e):F._layerEvents[h]=[r.connect(e,"onLoad",e,c),r.connect(e,"onError",e,c)])});F.addCallback(ka(this,this._basemapLoaded))}else this._basemapLoaded(b)}}else{e=[];for(var d in G)e.push(d)}},_basemapLoaded:function(e){var h=e.layers,a=e.infos,n=0,l=!0,b;this.loaded&&(g.forEach(h,function(e,h){e.loaded&&(a[h].isReference||n++)}),l=n);l&&(this.basemapLayerIds&&
(b={basemapName:this._basemap,infos:G&&G[this._basemap]&&G[this._basemap].baseMapLayers},b.basemapName||(g.forEach(this.basemapLayerIds,function(e){if(this.getLayer(e)instanceof N)return b.basemapName="osm",b.infos=G&&G.osm&&G.osm.baseMapLayers,!1},this),b.basemapName||(b=null))),this._removeBasemap(),this._basemap=e.basemapName,this.basemapLayerIds=this._addBasemap(h,a),this.attr("data-basemap",this.getBasemap()),this.emit("basemap-change",{current:e,previous:b}))},_addBasemap:function(e,h){var a=
[],n=[],l=0;g.forEach(e,function(e,b){h[b].isReference?a.push(e):(this.addLayer(e,l++),n.push(e.id))},this);a.length&&g.forEach(a,function(e){e.attr("data-reference",!0);this.addLayer(e,"top");n.push(e.id)},this);return n},_removeBasemap:function(){var e=this.basemapLayerIds,h;e&&e.length&&g.forEach(e,function(e){(h=this.getLayer(e))&&this.removeLayer(h)},this)},getBasemap:function(){return this._basemap||""},translate:function(e,h){e=e||0;h=h||0;if(!this._txTimer){this._tx=this._ty=0;var a=this.toScreen(this.extent.getCenter());
this.__panStart(a.x,a.y)}this._tx+=e;this._ty+=h;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var e=this._tx,h=this._ty;this._tx=this._ty=0;this.__panEnd(e,h)},setTimeExtent:function(e){e=(this.timeExtent=e)?new e.constructor(e.toJson()):null;this.onTimeExtentChange(e)},setTimeSlider:function(e){this.timeSlider&&(pa(this._tsTimeExtentChange_connect),this.timeSlider=
this._tsTimeExtentChange_connect=null);e&&(this.timeSlider=e,this.setTimeExtent(e.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=Da(e,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(e){if(this.visible!==e){this.visible=e;e||(this._display=this.container.style.display);this.container.style.display=e?this._display:"none";if(this.autoResize){var h=e?"resume":"pause";this._rszSignal[h]();this._oriSignal[h]()}e&&this.resize()}return this},resize:function(e){clearTimeout(this._resizeT);
this._destroyed||(!0===e?this._execResize():this._resizeT=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeT||this._execResize()},_execResize:function(){clearTimeout(this._resizeT);this._resizeT=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var e=this.width,h=this.height,a=y.get(this.container,"display"),n=x.getContentBox(this.container);if(!("none"===a||0>=n.w||0>=n.h||e===n.w&&h===n.h)){if(a=this._zoomAnim||
this._panAnim)a.stop(),a._fire("onEnd",[a.node]);qa(this.root,{width:(this.width=n.w)+"px",height:(this.height=n.h)+"px"});n=this.width;a=this.height;this.attribution&&this.attribution.domNode&&y.set(this.attribution.domNode,"maxWidth",Math.floor(n*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,n,a);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,n,a);var l=new U(this.extent),e=(new U(l.x,l.y,l.width*(n/e),l.height*
(a/h),this.spatialReference)).getExtent();this.onResize(e,n,a);this._extentUtil(null,null,e,null,!0)}},reposition:function(){var e=this.position,h=e.x,a=e.y;this._reposition();e=this.position;if(h!==e.x||a!==e.y)this.onReposition(e.x,e.y)},_reposition:function(){var e=x.position(this.container,!0),h=x.getPadBorderExtents(this.container);this.position.update(e.x+h.l,e.y+h.t)},_setClipRect:function(){delete this._clip;var e=7>=w("ie")||void 0===w("ie")&&7<=w("trident")?"rect(auto,auto,auto,auto)":"auto";
if(this.wrapAround180){var h=this.width,a=this.height,n=this._getFrameWidth(),l=h-n;0<l&&(e=l/2,e="rect(0px,"+(e+n)+"px,"+a+"px,"+e+"px)",a=this.extent.getWidth(),h=a*(n/h),this._clip=[(a-h)/2,h])}qa(this.__container,"clip",e)},_getAvailExtent:function(){var e=this.extent,h=this._clip;if(h){if(!e._clip){var a=new U(e);a.width=h[1];a.x+=h[0];e._clip=a.getExtent()}return e._clip}return e},_fixedPan:function(e,h){return this._extentUtil(null,{dx:e,dy:h})},panUp:function(){return this._fixedPan(0,-0.75*
this.height)},panUpperRight:function(){return this._fixedPan(0.75*this.width,-0.75*this.height)},panRight:function(){return this._fixedPan(0.75*this.width,0)},panLowerRight:function(){return this._fixedPan(0.75*this.width,0.75*this.height)},panDown:function(){return this._fixedPan(0,0.75*this.height)},panLowerLeft:function(){return this._fixedPan(-0.75*this.width,0.75*this.height)},panLeft:function(){return this._fixedPan(-0.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-0.75*this.width,
-0.75*this.height)},enableSnapping:function(e){e=e||{};if("esri.SnappingManager"===e.declaredClass)this.snappingManager=e;else{var h=Ia++,a=this;this._rids&&this._rids.push(h);q(["./SnappingManager"],function(n){var l=a._rids?g.indexOf(a._rids,h):-1;-1!==l&&(a._rids.splice(l,1),a.snappingManager=new n(k.mixin({map:a},e)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&
(na&&this.loaded)&&(this._labels=new na({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),g.forEach(this.graphicsLayerIds,function(e){e=this.getLayer(e);"function"===
typeof e.applyEdits?this._labels.addFeatureLayer(e):"esri.layers.WFSLayer"===e.declaredClass&&this._labels.addFeatureLayer(e)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new F,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var e=this.layerIds,h=this._layerDivs,a=!1,n,l,b=e.length-1;0<=b;b--)if(n=e[b],l=this.getLayer(n),n=h[n],l&&n&&!l._isReference){B.place(this._mapImageLyr._div,
n,"after");a=!0;break}a||B.place(this._mapImageLyr._div,this._layersDiv,"first")}});w("extend-esri")&&(A._CoreMap=s);return s})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(q,t,b){var s=window,r={addOnWindowUnload:function(m,k){q.windowUnloaded||b(s,"unload",q.windowUnloaded=function(){});b(s,"unload",t.hitch(m,k))},addOnUnload:function(m,k){b(s,"beforeunload",t.hitch(m,k))}};q.addOnWindowUnload=r.addOnWindowUnload;q.addOnUnload=r.addOnUnload;return r})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),
function(q,t,b,s,r,m,k,g,f){var a={animateRange:function(a){var d=a.range;return new t.Animation(b.mixin({curve:new t._Line(d.start,d.end)},a))},resize:function(a){var d=a.node=s.byId(a.node),f=a.start,g=a.end;f||(f=r.getMarginBox(d),d=r.getPadBorderExtents(d),f=a.start={left:f.l+d.l,top:f.t+d.t,width:f.w-d.w,height:f.h-d.h});g||(g=a.anchor?a.anchor:{x:f.left,y:f.top},d=a.size,g=a.end={left:f.left-(d.width-f.width)*(g.x-f.left)/f.width,top:f.top-(d.height-f.height)*(g.y-f.top)/f.height,width:d.width,
height:d.height});return t.animateProperty(b.mixin({properties:{left:{start:f.left,end:g.left},top:{start:f.top,end:g.top},width:{start:f.width,end:g.width},height:{start:f.height,end:g.height}}},a))},slideTo:function(a){var d=a.node=s.byId(a.node),f=m.getComputedStyle,g=null,k=null,y=function(){return function(){var a="absolute"==d.style.position?"absolute":"relative";g="absolute"==a?d.offsetTop:parseInt(f(d).top)||0;k="absolute"==a?d.offsetLeft:parseInt(f(d).left)||0;"absolute"!=a&&"relative"!=
a&&(a=r.position(d,!0),g=a.y,k=a.x,d.style.position="absolute",d.style.top=g+"px",d.style.left=k+"px")}}();y();a=t.animateProperty(b.mixin({properties:{top:{start:g,end:a.top||0},left:{start:k,end:a.left||0}}},a));q.connect(a,"beforeBegin",a,y);return a},flash:function(a){a=b.mixin({end:"#f00",duration:500,count:1},a);a.duration/=2*a.count;var d=s.byId(a.node),f=a.start;f||(f=m.getComputedStyle(d).backgroundColor);var g=a.end,r=[],q=a.count,d={node:d,duration:a.duration};for(a=0;a<q;a++)r.push(t.animateProperty(b.mixin({properties:{backgroundColor:{start:f,
end:g}}},d))),r.push(t.animateProperty(b.mixin({properties:{backgroundColor:{start:g,end:f}}},d)));return k.chain(r)}};g("extend-esri")&&b.mixin(b.getObject("fx",!0,f),a);return a})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(q,t,b,s,r,m,k,g,f){var a=b.mixin,c={},d=c._Line=function(a,b){this.start=a;this.end=b};d.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var u=c.Animation=
function(c){a(this,c);b.isArray(this.curve)&&(this.curve=new d(this.curve[0],this.curve[1]))};u.prototype=new s;b.extend(u,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(t.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,c){this._delayTimer&&
this._clearTimer();if(c)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var d=a||this.delay,f=b.hitch(this,"_play",c);if(0<d)return this._delayTimer=setTimeout(f,d),this;f();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());
this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();
if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);
1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var B=0,x=null,y={run:function(){}};b.extend(u,{_startTimer:function(){this._timer||(this._timer=m.after(y,
"run",b.hitch(this,"_cycle"),!0),B++);x||(x=setInterval(b.hitch(y,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,B--);0>=B&&(clearInterval(x),x=null,B=0)}});var w=k("ie")?function(a){var b=a.style;!b.width.length&&"auto"==f.get(a,"width")&&(b.width="auto")}:function(){};c._fade=function(d){d.node=g.byId(d.node);var k=a({properties:{}},d);d=k.properties.opacity={};d.start=!("start"in k)?function(){return+f.get(k.node,"opacity")||0}:k.start;d.end=k.end;
d=c.animateProperty(k);m.after(d,"beforeBegin",b.partial(w,k.node),!0);return d};c.fadeIn=function(b){return c._fade(a({end:1},b))};c.fadeOut=function(b){return c._fade(a({end:0},b))};c._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var E=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof r&&(c.tempColor=new r)}};E.prototype.getValue=function(a){var c={},d;for(d in this._properties){var f=this._properties[d],g=f.start;g instanceof r?c[d]=r.blendColors(g,
f.end,a,f.tempColor).toCss():b.isArray(g)||(c[d]=(f.end-g)*a+g+("opacity"!=d?f.units||"px":0))}return c};c.animateProperty=function(c){var d=c.node=g.byId(c.node);c.easing||(c.easing=q._defaultEasing);c=new u(c);m.after(c,"beforeBegin",b.hitch(c,function(){var c={},g;for(g in this.properties){if("width"==g||"height"==g)this.node.display="block";var k=this.properties[g];b.isFunction(k)&&(k=k(d));k=c[g]=a({},b.isObject(k)?k:{end:k});b.isFunction(k.start)&&(k.start=k.start(d));b.isFunction(k.end)&&(k.end=
k.end(d));var m=0<=g.toLowerCase().indexOf("color"),u=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=f.get(a,b);return"opacity"==b?+c:m?c:parseFloat(c)};"end"in k?"start"in k||(k.start=u(d,g)):k.end=u(d,g);m?(k.start=new r(k.start),k.end=new r(k.end)):k.start="opacity"==g?+k.start:parseFloat(k.start)}this.curve=new E(c)}),!0);m.after(c,"onAnimate",b.hitch(f,"set",c.node),!0);return c};c.anim=function(a,b,d,f,g,k){return c.animateProperty({node:a,duration:d||
u.prototype.duration,properties:b,easing:f,onEnd:g}).play(k||0)};a(q,c);q._Animation=u;return c})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(q,t,b,s,r,m,k,g,f,a,c){b.isAsync||a(0,function(){c(["./fx/Toggler"])});b=b.fx={};a={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var d=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=
this._onEndCtx=null;this.duration=0;s.forEach(this._animations,function(a){a&&("undefined"!=typeof a.duration&&(this.duration+=a.duration),a.delay&&(this.duration+=a.delay))},this)};d.prototype=new t;q.extend(d,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=
r.after(this._current,"onAnimate",q.hitch(this,"_onAnimate"),!0),this._onEndCtx=r.after(this._current,"onEnd",q.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=r.after(this._current,"beforeBegin",q.hitch(this,function(){this._fire("beforeBegin")}),!0),d=r.after(this._current,"onBegin",q.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),f=r.after(this._current,
"onPlay",q.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();d.remove();f.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=r.after(this._current,"onAnimate",q.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=r.after(this._current,"onEnd",q.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=r.after(this._current,"onPause",q.hitch(this,function(b){this._fire("onPause",
arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;s.some(this._animations,function(a,b){if(c<=a.duration)return this._current=a,this._index=b,!0;c-=a.duration;return!1},this);this._current&&this._current.gotoPercent(c/this._current.duration);b&&this.play();return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=
this._animations[this._index]}var b=r.after(this._current,"onStop",q.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});q.extend(d,a);b.chain=function(a){return new d(q.isArray(a)?a:Array.prototype.slice.call(a,0))};var u=function(a){this._animations=a||
[];this._connects=[];this.duration=this._finished=0;s.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(r.after(a,"onEnd",q.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new m.Animation({curve:[0,1],duration:this.duration});var b=this;s.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){b._connects.push(r.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};q.extend(u,
{_doAction:function(a,b){s.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;s.forEach(this._animations,
function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();s.forEach(this._connects,function(a){a.remove()})}});q.extend(u,a);b.combine=function(a){return new u(q.isArray(a)?a:Array.prototype.slice.call(a,0))};b.wipeIn=function(a){var b=a.node=k.byId(a.node),c=b.style,d;a=
m.animateProperty(q.mixin({properties:{height:{start:function(){d=c.overflow;c.overflow="hidden";if("hidden"==c.visibility||"none"==c.display)return c.height="1px",c.display="",c.visibility="",1;var a=g.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a));var f=function(){c.height="auto";c.overflow=d};r.after(a,"onStop",f,!0);r.after(a,"onEnd",f,!0);return a};b.wipeOut=function(a){var b=(a.node=k.byId(a.node)).style,c;a=m.animateProperty(q.mixin({properties:{height:{end:1}}},
a));r.after(a,"beforeBegin",function(){c=b.overflow;b.overflow="hidden";b.display=""},!0);var d=function(){b.overflow=c;b.height="auto";b.display="none"};r.after(a,"onStop",d,!0);r.after(a,"onEnd",d,!0);return a};b.slideTo=function(a){var b=null,c=null,d=function(a){return function(){var d=g.getComputedStyle(a),k=d.position;b="absolute"==k?a.offsetTop:parseInt(d.top)||0;c="absolute"==k?a.offsetLeft:parseInt(d.left)||0;"absolute"!=k&&"relative"!=k&&(d=f.position(a,!0),b=d.y,c=d.x,a.style.position=
"absolute",a.style.top=b+"px",a.style.left=c+"px")}}(a.node=k.byId(a.node));d();a=m.animateProperty(q.mixin({properties:{top:a.top||0,left:a.left||0}},a));r.after(a,"beforeBegin",d,!0);return a};return b})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(q,t,b,s,r){var m={_addFrameInfo:function(b,g){var f,a,c=2*g.origin[1],d=g.origin[0],m=b.origin.x,r=b.width,s;q.forEach(b.lods,function(b){f=Math.round(c/b.resolution);a=
Math.ceil(f/r);s=Math.floor((d-m)/(r*b.resolution));b._frameInfo||(b._frameInfo=[a,s,s+a-1,f])})},getContainingTileCoords:function(b,g,f){var a=b.origin;f=f.resolution;return{row:Math.floor((a.y-g.y)/(b.height*f)),col:Math.floor((g.x-a.x)/(b.width*f))}},getCandidateTileInfo:function(b,g,f){var a;a=b.width;for(var c=b.height,d=f.xmax-f.xmin,m=f.ymax-f.ymin,q=b.__tileInfo===g,t=q?b.getMinZoom():-1,q=q?b.getMaxZoom():-1,y=-1,w=g.lods,E=Math.abs,D,A,H,q=-1<q?q:w.length-1,t=-1<t?t:0;t<=q;t++)if(A=w[t])if(H=
d>m?E(m-c*A.resolution):E(d-a*A.resolution),0>y||H<=y)D=A,y=H;else break;a=D;D=a.resolution;c=(f.xmin+f.xmax)/2;d=(f.ymin+f.ymax)/2;m=b.width/2*D;D*=b.height/2;c=new r(c-m,d-D,c+m,d+D,f.spatialReference);f=new s(c.xmin,c.ymax,f.spatialReference);q=a.resolution;m=g.width;d=g.height;g=g.origin;b=b.__visibleDelta;D=Math.floor;w=m*q;E=d*q;q=D((g.y-f.y)/E);y=D((f.x-g.x)/w);t=g.y-q*E;g=D(Math.abs((f.x-(g.x+y*w))*m/w))+b.x;b=D(Math.abs((f.y-t)*d/E))+b.y;return{tile:{point:f,coords:{row:q,col:y},offsets:{x:g,
y:b}},lod:a,extent:c}},getTileExtent:function(b,g,f,a){var c=b.origin;g=b.lods[g].resolution;var d=b.width,m=b.height;return new r(a*g*d+c.x,c.y-(f+1)*g*m,(a+1)*g*d+c.x,c.y-f*g*m,b.spatialReference)}};t("extend-esri")&&(b.TileUtils=m);return m})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(q,t,b,s,r,m){function k(){t.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}k.prototype=
{addPlugin:function(b,f){var a=this,c=this._plugins,d=new r;try{q([b],function(k){b in c?d.resolve({id:c[b].declaredId||b.replace(/\//g,".")}):(c[b]=k,m(k.add(a,f),function(){var c={id:k.declaredId||b.replace(/\//g,".")};a.emit("plugin-add",c);d.resolve(c)},function(a){d.reject(a)}))})}catch(k){d.reject(k)}return d.promise},removePlugin:function(b){if(b in this._plugins){var f=this._plugins[b];f.remove(this);delete this._plugins[b];this.emit("plugin-remove",{id:f.declaredId||b.replace(/\//g,".")})}},
_pluginsHandler:function(){var g=this;b.some(arguments,function(b){if(b&&b.plugins&&b.plugins instanceof Array){b=b.plugins;var a,c,d;for(d=0;d<b.length;d++)a=b[d],c=a instanceof Object?a.id:a,g.addPlugin(c,a.options);return!0}})}};return k})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(q,t,b,s,r,m,k,g,f,a){var c=function(){return 9>b("ie")?function(a,b,c,
d,f,g,k,m,r){var s=[],q=Math.round,t,J=k.length,S,L,Q,R,X,V;for(t=0;t<J;t++)if(S=k[t],R=m?m(S[0][0],S[0][1],r):S[0],1<(Q=S.length)){X=q((R[0]-a)*c+f);V=q((b-R[1])*d+g);R=m?m(S[1][0],S[1][1],r):S[1];L=q((R[0]-a)*c+f);R=q((b-R[1])*d+g);s.push("M",X+","+V,"L",L+","+R);for(L=2;L<Q;L++)R=m?m(S[L][0],S[L][1],r):S[L],X=q((R[0]-a)*c+f),V=q((b-R[1])*d+g),s.push(X+","+V)}else X=q((R[0]-a)*c+f),V=q((b-R[1])*d+g),s.push("M",X+","+V);return s}:function(a,b,c,d,f,g,k,m,r,s){var q=[],t,J,S,L,Q,R,X=Math.round;t=
0;for(S=k?k.length:0;t<S;t++){Q=k[t];q.push("M");J=0;for(L=Q?Q.length:0;J<L;J++)R=m?m(Q[J][0],Q[J][1],r):Q[J],q.push(X((R[0]-a)*c+f)+","+X((b-R[1])*d+g));s||q.push("Z")}return q}}(),d={toScreenPoint:function(a,b,c,d,f){var g=a.spatialReference,k=d.spatialReference,s=d.x;d=d.y;g&&(k&&!g.equals(k)&&g._canProject(k))&&(g=g.isWebMercator()?r.lngLatToXY(s,d):r.xyToLngLat(s,d,!0),s=g[0],d=g[1]);s=(s-a.xmin)*(b/a.getWidth());d=(a.ymax-d)*(c/a.getHeight());f||(s=Math.round(s),d=Math.round(d));return new m(s,
d)},toScreenGeometry:function(b,c,d,m){var w=b.xmin,s=b.ymax,t=c/b.getWidth(),A=d/b.getHeight(),H=q.forEach,G=Math.round;if(m instanceof r)return new r(G((m.x-w)*t),G((s-m.y)*A));if(m instanceof f){b=new f;var I=b.points;H(m.points,function(a,b){I[b]=[G((a[0]-w)*t),G((s-a[1])*A)]});return b}if(m instanceof a)return new a(G((m.xmin-w)*t),G((s-m.ymin)*A),G((m.xmax-w)*t),G((s-m.ymax)*t));if(m instanceof k){b=new k;var M=b.paths,J;H(m.paths,function(a,b){J=M[b]=[];H(a,function(a,b){J[b]=[G((a[0]-w)*t),
G((s-a[1])*A)]})});return b}if(m instanceof g){b=new g;var S=b.rings,L;H(m.rings,function(a,b){L=S[b]=[];H(a,function(a,b){L[b]=[G((a[0]-w)*t),G((s-a[1])*A)]})});return b}},_toScreenPath:function(a,b,d,f,g,m){var s=f instanceof k,q=a.spatialReference,t=f.spatialReference,G,I;q&&(t&&!q.equals(t)&&q._canProject(t))&&(q.isWebMercator()?G=r.lngLatToXY:(G=r.xyToLngLat,I=!0));return c(a.xmin,a.ymax,b/a.getWidth(),d/a.getHeight(),g,m,s?f.paths:f.rings,G,I,s)},toMapPoint:function(a,b,c,d){return new r(a.xmin+
d.x/(b/a.getWidth()),a.ymax-d.y/(c/a.getHeight()),a.spatialReference)},toMapGeometry:function(b,c,d,m){var w=b.xmin,s=b.ymax,t=b.spatialReference,A=c/b.getWidth(),H=d/b.getHeight(),G=q.forEach;if(m instanceof r)return new r(w+m.x/A,s-m.y/H,t);if(m instanceof f){b=new f(t);var I=b.points;G(m.points,function(a,b){I[b]=[w+a[0]/A,s-a[1]/H]});return b}if(m instanceof a)return new a(w+m.xmin/A,s-m.ymin/H,w+m.xmax/A,s-m.ymax/H,t);if(m instanceof k){b=new k(t);var M=b.paths,J;G(m.paths,function(a,b){J=M[b]=
[];G(a,function(a,b){J[b]=[w+a[0]/A,s-a[1]/H]})});return b}if(m instanceof g){b=new g(t);var S=b.rings,L;G(m.rings,function(a,b){L=S[b]=[];G(a,function(a,b){L[b]=[w+a[0]/A,s-a[1]/H]})});return b}}};b("extend-esri")&&t.mixin(t.getObject("geometry",!0,s),d);return d})},"esri/layers/GraphicsLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J){var S,L=-1!==f.renderer.toLowerCase().indexOf("svg"),Q=-1!==f.renderer.toLowerCase().indexOf("canvas"),R=9>x("ie"),X=x("esri-touch");E=q(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(a,b){var c,v=this._connects=[];this._map=a;this._useWillChange="css-transforms"===a.navigationMode&&L&&x("esri-will-change");Q?(c=m.create("div",{style:"overflow: visible; position: absolute;"},b),this._surface={getEventSource:function(){return c}},
v.push(t.connect(c,"onmousedown",this,this._canvasDownHandler)),v.push(t.connect(c,"onmouseup",this,this._canvasUpHandler)),v.push(t.connect(c,"onclick",this,this._canvasClickHandler)),S.prototype._canvas=!0):(c=(this._surface=f.createSurface(b,a.width,a.height)).getEventSource(),this._useWillChange&&k.set(c,"will-change","transform"),k.set(c=R?c.parentNode:c,{overflow:"visible",position:"absolute"}));v.push(t.connect(a,"onResize",this,"_onResizeHandler"));this._useWillChange&&(v.push(t.connect(a,
"onPan",this,"_onPanHandler")),v.push(t.connect(a,"onPanEnd",this,"_onPanEndHandler")),v.push(t.connect(a,"onExtentChange",this,"_onExtentChangeHandler")));return c},_onPanHandler:function(a,b){var c=this._map.__visibleRect,v=c.x+b.x,c=c.y+b.y;this._panDx=v;this._panDy=c;k.set(this._surface.getEventSource(),u._css.names.transform,u._css.translate(v,c))},_onPanEndHandler:function(a,b){var c=this._map.__visibleRect,v=c.x,c=c.y;this._panDx=v;this._panDy=c;k.set(this._surface.getEventSource(),u._css.names.transform,
u._css.translate(v,c))},_onExtentChangeHandler:function(a,b,c,v){c&&(this._panDy=this._panDx=0,k.set(this._surface.getEventSource(),u._css.names.transform,u._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(a,b,c){a=this._surface.getEventSource();var v=this._map,d;R&&k.set(a=a.parentNode,{width:b+"px",height:c+"px",clip:"rect(0px "+b+"px "+c+"px 0px)"});r.set(a,"width",b);r.set(a,"height",c);this._surface.declaredClass||s.forEach(a.childNodes,
function(a){r.set(a,"width",b);r.set(a,"height",c)});v.loaded&&(v.graphics.suspended||(v.graphics._resized=!0),s.forEach(v.graphicsLayerIds,function(a){d=v.getLayer(a);d.suspended||(d._resized=!0,d._childLayer&&(d._childLayer._resized=!0));d._updateSVGFilters(null,null,b,c)}))},_cleanUp:function(){s.forEach(this._connects,t.disconnect,t);this._map=this._surface=null},_processEvent:function(a){var b=this._map;a.screenPoint=new H(a.pageX-b.position.x,a.pageY-b.position.y);a.mapPoint=b.toMap(a.screenPoint)},
_canvasDownHandler:function(a){this._processEvent(a);this._downPt=a.screenPoint.x+","+a.screenPoint.y},_canvasUpHandler:function(a){this._processEvent(a);this._upPt=a.screenPoint.x+","+a.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(a,b,c,v){if(!a.visible||!b)return!1;var d=b.getTransformedBoundingBox(),f;return d?(f=new G(d[0].x,d[0].y,d[2].x,d[2].y),delete f.spatialReference,X?f.intersects(c):f.contains(v)):s.some(b.children||[],function(a){d=a.getTransformedBoundingBox();f=new G(d[0].x,
d[0].y,d[2].x,d[2].y);delete f.spatialReference;return X?f.intersects(c):f.contains(v)})},_canvasClickHandler:function(a){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(a);var b=this._map,c=s.map(b.graphicsLayerIds,function(e){return b.getLayer(e)});c.push(b.graphics);c.reverse();var c=s.filter(c,function(e){return e.loaded&&e._mouseEvents&&!e.suspended&&(!B.isDefined(e.opacity)||0<e.opacity)}),v=a.screenPoint,d=this._tolerance,f=v.x-d,l=v.y+d,e=v.x+d,d=v.y-d,h=new G(f,
d,e,l),f=b.toMap(new H(f,l)),e=b.toMap(new H(e,d)),l=f.spatialReference._getInfo(),n=new G(G.prototype._normalizeX(f.x,l).x,f.y,G.prototype._normalizeX(e.x,l).x,e.y,f.spatialReference),z;delete h.spatialReference;s.some(c,function(e){e=s.filter(e.graphics,function(e){return this._isPrimaryMatch(e,e.getDojoShape(),h,v)||!(!e._bgShape||!this._isPrimaryMatch(e,e._bgShape,h,v))},this);e.reverse();if(0<e.length){var a;s.some(e,function(e){return e.geometry&&n.intersects(e.geometry)?(a=e,!0):!1});if(a)return z=
a,!0}return!1},this);if(z&&(c=z.getLayer()))a.graphic=z,c.onClick(a)}}});S=q(d,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:Q?"canvas-2d":f.renderer,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},constructor:function(a,c){if(a&&(b.isString(a)||b.isObject(a)&&(a.layerDefinition||a.query)))a=c;this._params=b.mixin({displayOnPan:!0,drawMode:!0,styling:!0},a||{});var d=this._params.dataAttributes;"string"===typeof d&&(d=
[d]);this.styling=L?this._params.styling:!0;this.dataAttributes=d;this.infoTemplate=a&&a.infoTemplate;this.graphics=[];this._draw=b.hitch(this,this._draw);this._refresh=b.hitch(this,this._refresh);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(a){this._params.drawMode=a},renderer:null,_setMap:function(a,c){this.inherited(arguments);this._map=a;this._wrap=a.wrapAround180;this._srInfo=a.spatialReference._getInfo();this._svgFilters=
{};this._canvas?(c=f.createSurface(c.getEventSource(),a.width,a.height),k.set(c.rawNode,"position","absolute"),this._div=c.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=b.hitch(this,this._canvasRender)):this._div=c.createGroup();this._bgGroup=this._div.createGroup();this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(a,b){s.forEach(this.graphics,function(a){a._shape=null});this._canvas?(b=this._div.getParent(),
b._parent={},m.destroy(b.rawNode),b.destroy()):(this._div.clear(),b.remove(this._div),m.destroy(this._div.getEventSource()));this._map=this._div=this._svgFilters=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var a=this.opacity;B.isDefined(a)&&1>a&&this.setOpacity(a,!0)},_onZoomStartHandler:function(){w.hide(this._div.getEventSource())},_onExtentChangeHandler:function(a,b,c,v){clearTimeout(this._wakeTimer);this._wakeTimer=
null;c?(a=this._map.__visibleRect,b=this._div,this._evalSDRenderer(),this._refresh(!0),this._updateTransform(b,a.x,a.y,!0),this._renderProto&&b.surface.pendingRender?this._dirty=!0:this.suspended||w.show(b.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var a=this._div;this._dirty&&(delete this._dirty,this.suspended||w.show(a.getEventSource()));return this._renderProto.apply(a,arguments)},_refresh:function(a){var b=
this.graphics,c=b.length,v,d=this._draw;for(v=0;v<c;v++)d(b[v],a)},refresh:function(){this._refresh(!0)},redraw:function(){this._refresh(!0)},_getTransform:function(){var a={dx:0,dy:0};this._map&&(this._map._gc._useWillChange?a=this._map._gc._getTransform():this._div&&(a=this._div.getTransform()));return a},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._map.__visibleRect;this._updateTransform(this._div,c.x+b.x,c.y+b.y)},_onPanEndUpdateHandler:function(a,b){var c=this._map.__visibleRect;
!this._params._child&&(b.x!==this._panDx||b.y!==this._panDy)?this._updateTransform(this._div,c.x,c.y,!0):this._updateSVGFilters(-c.x,-c.y);this._refresh(!1);if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){w.hide(this._div.getEventSource())},_onPanEndHandler:function(){var a=this._map.__visibleRect,b=this._div;this._updateTransform(b,a.x,a.y,!0);this._refresh(!1);this._renderProto&&b.surface.pendingRender?this._dirty=!0:w.show(b.getEventSource());if(this.graphics.length)this.onUpdate()},
_updateTransform:function(b,c,d,v){this._map._gc._useWillChange||b.setTransform(a.translate({x:c,y:d}));v&&this._updateSVGFilters(-c,-d)},onSuspend:function(){this.inherited(arguments);w.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(a){this.inherited(arguments);a.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(b.hitch(this,function(){!this.suspended&&
!this._map.__zooming&&this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var a=this._map,b=t.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=b(a,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=
b(a,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=t.disconnect;a(this._onExtentChangeHandler_connect);a(this._onZoomStartHandler_connect);a(this._onPanHandler_connect);a(this._onPanStartHandler_connect);a(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=
null},_updateExtent:function(a){var b=a.geometry;if(b){if(!(a._extent=b.getExtent())){var c,v;if("esri.geometry.Point"===b.declaredClass)c=b.x,v=b.y;else if("esri.geometry.Multipoint"===b.declaredClass)c=b.points[0][0],v=b.points[0][1];else{a._extent=null;return}a._extent=new G(c,v,c,v,b.spatialReference)}}else a._extent=null},_intersects:function(a,b,c){var v=a.spatialReference,d=b.spatialReference,f=v&&d&&!v.equals(d)&&v._canProject(d)&&4326===d.wkid;if(this._wrap&&!c){c=[];var v=a._getFrameWidth(),
l=this._srInfo,e=a._clip?a._getAvailExtent():a.extent,h,n,z,F,N=[];h=b._partwise;f&&(e=a.geographicExtent,l=d._getInfo());a=e._getParts(l);if(h&&h.length){b=[];d=0;for(f=h.length;d<f;d++)b=b.concat(h[d]._getParts(l))}else b=b._getParts(l);d=0;for(f=b.length;d<f;d++){z=b[d];l=0;for(e=a.length;l<e;l++)if(F=a[l],F.extent.intersects(z.extent)){h=0;for(n=z.frameIds.length;h<n;h++)c.push((F.frameIds[0]-z.frameIds[h])*v)}}d=0;for(f=c.length;d<f;d++)h=c[d],s.indexOf(c,h)===d&&N.push(h);return N.length?N:
null}return(f?a.geographicExtent:a.extent).intersects(b)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(a,b){if(this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var c=a._extent,v,d,f=!L||this.styling,l=L&&this.dataAttributes,e=a.getDojoShape(),h;if(a.visible&&c&&(v=this._intersects(this._map,c,a.geometry._originOnly))&&(d=f?this._getSymbol(a):this._defaultMarker)){if(!a._offsets||a._offsets.join(",")!==
v.join(",")?a._offsets=v:h=!0,!e||b||!h){var n=a.geometry.type,c={graphic:a},z=a._bgShape,F=f&&!a.symbol?this._getRenderer(a):null,N=F&&F.backgroundFillSymbol;if("point"===n)this._isInvalidShape(d,e)&&this._removeShape(a),a._shape=this._drawPoint(this._div,a.geometry,d,a.getDojoShape(),v,F,a),f&&this._symbolizePoint(a.getDojoShape(),d,F,a);else if("multipoint"===n)this._drawMarkers(a,d,v,F),f&&this._symbolizeMarkers(a,d,F);else{var T,n=d,g,k;f&&(n=(T="simplemarkersymbol"===d.type||"picturemarkersymbol"===
d.type||"textsymbol"===d.type?d:null)?N:d);n&&n===N&&(g=this._bgGroup);z&&!g&&this._removeBgShape(a);n&&(!g&&this._isInvalidShape(n,a._shape)&&this._removeShape(a,!1),k=this._drawShape(a,v,g||this._div,g?z:a.getDojoShape()),f&&this._symbolizeShape(k,n,F,!!N,a),a[g?"_bgShape":"_shape"]=k);if(T){this._isInvalidShape(T,a._shape)&&this._removeShape(a,!1);var m=a.geometry.getCentroid();(k=m&&this._drawPoint(this._div,m,T,a._shape,v,F,a))&&this._symbolizePoint(k,T,F,a);a._shape=k}}Q||(a._bgShape&&this._initNode(a,
a._bgShape,a._bgShape!==z,c,l),a._shape&&this._initNode(a,a._shape,a._shape!==e,c,l));c.node=a.getNode();this.onGraphicDraw(c)}}else e&&this._removeShape(a)}catch(u){this._errorHandler(u,a)}},_initNode:function(a,b,c,v,d){if(b=b&&b.getNode())b.e_graphic=a,this._addDataAttrs(a,d,b),c&&(v.node=b,this.onGraphicNodeAdd(v))},_removeShape:function(a,b,c){var v=a.getDojoShape(),d=v&&v.getNode();v&&!c&&(v.removeShape(),v.destroy());a._shape=a._offsets=null;!1!==b&&this._removeBgShape(a,c);if(d&&(d.e_graphic=
null,!Q))this.onGraphicNodeRemove({graphic:a,node:d})},_removeBgShape:function(a,b){var c=a._bgShape,v=c&&c.getNode();c&&!b&&(c.removeShape(),c.destroy());a._bgShape=null;if(v&&(v.e_graphic=null,!Q))this.onGraphicNodeRemove({graphic:a,node:v})},_addDataAttrs:function(a,b,c){var v=a.attributes,d,f=b?b.length:0,l=this._getRenderer(a);if(c&&v){for(d=0;d<f;d++)(c=b[d])&&a.attr("data-"+c,v[c]);!this.styling&&l&&(l.getBreakIndex?(b=l.getBreakIndex(a),a.attr("data-class-break",-1!==b?b:null)):l.getUniqueValueInfo&&
(b=l.getUniqueValueInfo(a),a.attr("data-unique-value",b?b.value:null)))}},_drawShape:function(a,b,c,v){a=a.geometry;var d=a.type,f=this._map,l=f.extent,e=f.width,h=f.height,f=f.__visibleRect,n=[],z,F;z="extent"===d;if("rect"===d||z)n={x:0,y:0,spatialReference:a.spatialReference},n.x=z?a.xmin:a.x,n.y=z?a.ymax:a.y,d=M.toScreenPoint(l,e,h,n),n.x=z?a.xmax:a.x+a.width,n.y=z?a.ymin:a.y+a.height,a=M.toScreenPoint(l,e,h,n),b={x:d.x-f.x+b[0],y:d.y-f.y,width:Math.abs(a.x-d.x),height:Math.abs(a.y-d.y)},0===
b.width&&(b.width=1),0===b.height&&(b.height=1),v=this._drawRect(c,v,b);else if("polyline"===d||"polygon"===d){z=0;for(F=b.length;z<F;z++)n=n.concat(M._toScreenPath(l,e,h,a,-f.x+b[z],-f.y));v=this._drawPath(c,v,n);this._rendererLimits&&("polyline"===d?this._clipPolyline(v,a):this._clipPolygon(v,a))}return v},_drawRect:function(a,b,c){return b?b.setShape(c):a.createRect(c)},_drawImage:function(a,b,c){return b?b.setShape(c):a.createImage(c)},_drawCircle:function(a,b,c){return b?b.setShape(c):a.createCircle(c)},
_drawPath:function(){return R?function(a,b,c,v){c=v?c:c.join(" ");if(b)return b.setShape(c);b=a.createObject(v?f.Path:f.EsriPath,c);a._overrideSize(b.getEventSource());return b}:function(a,b,c,v){c=v?c:c.join(" ");return b?b.setShape(c):a.createPath(c)}}(),_drawText:function(a,b,c){return b?b.setShape(c):a.createText(c)},_evalSDRenderer:function(a){var b=this._map,c=this.renderer,v,d=this._rndForScale;b&&(b.loaded&&c&&c.getRendererInfo)&&(v="zoom"===c.rangeType?c.getRendererInfoByZoom(b.getZoom()):
c.getRendererInfoByScale(b.getScale()));this._rndForScale=v&&v.renderer;!a&&this._rndForScale!=d&&this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(a){var b=this._rndForScale||this.renderer;a&&(b&&b.getObservationRenderer)&&(b=b.getObservationRenderer(a));return b},_getSymbol:function(a){var b=this._getRenderer();return a.symbol||b&&b.getSymbol(a)},_getVariable:function(a,b,c){var v;a&&(v=(a=a.getVisualVariablesForType(b,c))&&a[0]);return v},_applyOpacity:function(a,
b,c,v){b=b.getOpacity(v,{opacityInfo:c});null!=b&&(a=new y(a),a.a=b);return a},_symbolizeShape:function(a,c,d,v,f){var g=c.getStroke(),l=c.getFill(),e=c.type,h,n,z=this._getVariable(d,"sizeInfo",!1),F=this._getVariable(d,"colorInfo",!1),N=this._getVariable(d,"opacityInfo",!1),T=-1!==e.indexOf("linesymbol");c=T?"none"!==c.style:c.outline&&"none"!==c.outline.style;var W=T?null:this._getVariable(d,"sizeInfo","outline"),z=(z=v?W:W||z)?d.getSize(f,{sizeInfo:z,resolution:this._map.getResolutionInMeters(),
scale:this._map.getScale()}):null;v&&(F=N=null);if((F||N)&&"picturefillsymbol"!==e)T?(h=g&&g.color,F&&(h=d.getColor(f,{colorInfo:F})||h),h&&N&&(h=this._applyOpacity(h,d,N,f))):l&&l.toCss&&(n=l,F&&(n=d.getColor(f,{colorInfo:F})||n),n&&N&&(n=this._applyOpacity(n,d,N,f)));a.setStroke(!c||null==z&&!h?g:b.mixin({},g,null!=z?{width:z}:null,h&&{color:h})).setFill(n||l)},_smsToPath:function(){return R?function(a,b,c,v,d,f,l,e,h){switch(b){case a.STYLE_SQUARE:return["M",d+","+l,"L",f+","+l,f+","+e,d+","+e,
"X","E"];case a.STYLE_CROSS:return["M",c+","+l,"L",c+","+e,"M",d+","+v,"L",f+","+v,"E"];case a.STYLE_X:return["M",d+","+l,"L",f+","+e,"M",d+","+e,"L",f+","+l,"E"];case a.STYLE_DIAMOND:return["M",c+","+l,"L",f+","+v,c+","+e,d+","+v,"X","E"];case a.STYLE_TARGET:return["M",d+","+l,"L",f+","+l,f+","+e,d+","+e,d+","+l,"M",d-h+","+v,"L",d+","+v,"M",c+","+(l-h),"L",c+","+l,"M",f+h+","+v,"L",f+","+v,"M",c+","+(e+h),"L",c+","+e,"E"]}}:function(a,b,c,v,d,f,l,e,h){switch(b){case a.STYLE_SQUARE:return["M",d+
","+l,f+","+l,f+","+e,d+","+e,"Z"];case a.STYLE_CROSS:return["M",c+","+l,c+","+e,"M",d+","+v,f+","+v];case a.STYLE_X:return["M",d+","+l,f+","+e,"M",d+","+e,f+","+l];case a.STYLE_DIAMOND:return["M",c+","+l,f+","+v,c+","+e,d+","+v,"Z"];case a.STYLE_TARGET:return["M",d+","+l,f+","+l,f+","+e,d+","+e,d+","+l,"M",d-h+","+v,d+","+v,"M",c+","+(l-h),c+","+l,"M",f+h+","+v,f+","+v,"M",c+","+(e+h),c+","+e]}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",
simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(a,b){var c=b&&b.shape&&b.shape.type,v=a&&a.type,d=a&&a.style;"rect"===c&&(c="path");v&&(d=this._typeMaps[v]||d);this._pathStyles[d]&&(d="path");return"shieldlabelsymbol"===v?!0:!(!c||!(d&&c!==d))},_drawPoint:function(b,c,d,v,f,g,l){var e=d.type,h=this._map,n=h.__visibleRect,z=M.toScreenPoint(h.extent,h.width,h.height,c).offset(-n.x+f[0],-n.y),n=z.x,F=z.y,N;c=[];var T,W=this._getVariable(g,
"rotationInfo",!1),W=W?g.getRotationAngle(l,{rotationInfo:W}):null,k=this._getVariable(g,"sizeInfo",!1),h=k?g.getSize(l,{sizeInfo:k,shape:d.style,resolution:h.getResolutionInMeters(),scale:h.getScale()}):null;W&&c.push(a.rotategAt(W,z));if(0!==d.xoffset||0!==d.yoffset)T=a.translate(d.xoffset,-d.yoffset),c.push(T);0!==d.angle&&c.push(a.rotategAt(d.angle,z));if("simplemarkersymbol"===e)switch(N=d.style,g=Math.round,h=null!=h?h:d.size,N){case D.STYLE_SQUARE:case D.STYLE_CROSS:case D.STYLE_X:case D.STYLE_DIAMOND:d=
isNaN(h)?16:h/2;N=this._drawPath(b,v,this._smsToPath(D,N,n,F,g(n-d),g(n+d),g(F-d),g(F+d)));break;case D.STYLE_TARGET:l=d._targetWidth/2;z=d._targetHeight/2;N=this._drawPath(b,v,this._smsToPath(D,N,n,F,g(n-l),g(n+l),g(F-z),g(F+z),d._spikeSize));break;case D.STYLE_PATH:N=this._drawPath(b,v,d.path,!0);d=N.getBoundingBox();b=this._getScaleMatrix(d,h);(1!==b.xx||1!==b.yy)&&c.push(a.scaleAt(b.xx,b.yy,z));c.push(a.translate(-(d.x+d.width/2)+n,-(d.y+d.height/2)+F));break;default:d=isNaN(h)?16:h/2,N=this._drawCircle(b,
v,{cx:n,cy:F,r:d})}else if("shieldlabelsymbol"===e)N=d.width,z=d.height,v=b.createGroup(),N=b.createImage({x:n-N/2,y:F-z/2,width:N,height:z,src:d.url}),v.add(N),null!=d.font&&(F+=0.2*d.getHeight(),b=b.createText({type:"text",text:d.text,x:n,y:F,align:"middle",decoration:d.decoration,rotated:d.rotated,kerning:d.kerning}),b.setFont(d.font),b.setFill(d.color),v.add(b)),N=v;else if("picturemarkersymbol"===e){if(null==h?(N=d.width,z=d.height):(z=h,N=z*(d.width/d.height),T&&(null!=T.dx&&(T.dx=N*(T.dx/d.width)),
null!=T.dy&&(T.dy=z*(T.dy/d.height)))),N=this._drawImage(b,v,{x:n-N/2,y:F-z/2,width:N,height:z,src:d.url}),L&&(b=N.getNode()))d=(d=this._getVariable(g,"opacityInfo",!1))?g.getOpacity(l,{opacityInfo:d}):null,null!=d?b.setAttribute("opacity",d):b.setAttribute("opacity",1)}else"textsymbol"===e&&(g=d.font,null!=h&&g&&(g=new g.constructor(g.toJson()),g.setSize(h)),N=this._drawText(b,v,{type:"text",text:d.text,x:n,y:F,align:d.getSVGAlign(),decoration:d.decoration||g&&g.decoration,rotated:d.rotated,kerning:d.kerning}),
g&&N.setFont(g),L&&(b=N.getNode(),n=d.getSVGBaseline(),F=d.getSVGBaselineShift(),b&&(b.setAttribute("dominant-baseline",n),F&&b.setAttribute("baseline-shift",F),this._applyHalo(N,d.haloColor,d.haloSize))));N.setTransform(a.multiply(c));N._wrapOffsets=f;return N},_applyHalo:function(a,b,c){var v=b&&c?this._getHaloId(b,c):null;a.setFilter(b&&c?x("webkit")||x("ff")?this._getDilateFilter(b,c,v):this._getOffsetFilter(b,c,v):null)},_getDilateFilter:function(a,b,d){var v=this._getSVGFilter(d);v||(v=this._createSVGFilter({id:d},
[c.feMorphology({operator:"dilate",radius:b,result:"dilated"}),c.feFlood({"flood-color":a.toCss(!0)}),c.feComposite({in2:"dilated",operator:"in",result:"composite"}),c.feMerge("composite","SourceGraphic")]));return v},_getOffsetFilter:function(a,b,d){var v=this._getSVGFilter(d);if(!v){a=a.toCss(!0);var v=this._offsetPrimitives,f,g=v.length,l=[],e=[];for(f=0;f<g;f++){var h=v[f],n="offset"+h.dir,z="composite"+h.dir;e.push(z);l.push(c.feOffset({dx:h.dx*b,dy:h.dy*b,"in":"SourceAlpha",result:n}),c.feFlood({"flood-color":a}),
c.feComposite({in2:n,operator:"in",result:z}))}e.push("SourceGraphic");l.push(c.feMerge.apply(c.feMerge,e));v=this._createSVGFilter({id:d},l)}return v},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(a,b){return"halo_"+this._map.id+"_"+this.id+"_"+a.r+"_"+a.g+"_"+a.b+"_"+a.a+"_"+b},_getSVGFilter:function(a){return this._svgFilters[a]},_createSVGFilter:function(a,
b){var d=c.createFilter(a,b),v=this._map,f=v.__visibleRect;d.x=-f.x;d.y=-f.y;d.width=v.width;d.height=v.height;return this._svgFilters[a.id]=d},_updateSVGFilters:function(a,b,c,v){var d=this._svgFilters,f,l,e;for(l in d)if(f=d[l]){if(e=g.byId(l))null!=a&&e.setAttribute("x",a),null!=b&&e.setAttribute("y",b),null!=c&&e.setAttribute("width",c),null!=v&&e.setAttribute("height",v);null!=a&&(f.x=a);null!=b&&(f.y=b);null!=c&&(f.width=c);null!=v&&(f.height=v)}},_getScaleMatrix:function(a,b){var c=a.width/
a.height,v=1,d=1;isNaN(b)||(1<c?(v=b/a.width,d=b/c/a.height):(d=b/a.height,v=b*c/a.width));return{xx:v,yy:d}},_symbolizePoint:function(a,c,d,v){var f=c.type,g=c.style;if(!("shieldlabelsymbol"===f||"picturemarkersymbol"===f)){var l=c.getStroke();c=c.getFill();var g=g===D.STYLE_X||g===D.STYLE_CROSS,e=l&&l.color,h=g?e:c;if(d){var n=this._getVariable(d,"colorInfo",!1),z=this._getVariable(d,"opacityInfo",!1);n&&(h=d.getColor(v,{colorInfo:n})||h);h&&z&&(h=this._applyOpacity(h,d,z,v));h&&(g?h!==e&&(l=l?
b.mixin({},l):{},l.color=h):h!==c&&(c=h))}"textsymbol"===f?a.setFill(c):"simplemarkersymbol"===f&&a.setFill(c).setStroke(l)}},_drawMarkers:function(a,b,c,v){var d=a.geometry,f=d.points,l=a.getDojoShape()||this._div.createGroup(),e,h,n=f.length,z=[],F=0,N,T=c?c.length:0;l.children[0]&&this._isInvalidShape(b,l.children[0])&&l.clear();for(h=0;h<n;h++){e=f[h];for(N=0;N<T;N++)z[0]=c[N],this._drawPoint(l,{x:e[0],y:e[1],spatialReference:d.spatialReference},b,l.children[F++],z,v,a)}b=l.children.length;if(n*
c.length<b)for(h=b-1;h>=n*c.length;h--)l.children[h].removeShape();a._shape=l},_symbolizeMarkers:function(a,b,c){var v=a.getDojoShape().children,d,f=v.length;for(d=0;d<f;d++)this._symbolizePoint(v[d],b,c,a)},_errorHandler:function(a,b){a.message=b?"Unable to draw graphic (geometry:"+(b.geometry?b.geometry.declaredClass:null)+", symbol:"+(b.symbol?b.symbol.declaredClass:null)+"): "+a.message:"Unable to draw graphic (null): "+a.message;this.inherited(arguments)},_rendererLimits:function(){var a,b,c;
x("ff")?(a=16125,b=-32250,c=32250):R?(a=1E5,b=-1E5,c=1E5):x("chrome")&&6>x("chrome")&&(a=8150,b=-1E4,c=1E4);if(a)return{clipLimit:a,rangeMin:b,rangeMax:c,clipBBox:[-a,-a,a,a],clipSegments:[[[-a,-a],[a,-a]],[[a,-a],[a,a]],[[a,a],[-a,a]],[[-a,a],[-a,-a]]]}}(),_clipPolyline:function(a,b){var c=this._getCorners(a,b),v=c.br,d=this._rendererLimits,f=d.rangeMin,l=d.rangeMax,e=d.clipBBox,h=d.clipSegments,d=this._isPointWithinRange,n=this._isPointWithinBBox,z=this._getClipperIntersection,F=this._getPlaneIndex;
if(!d(c.tl,f,l)||!d(v,f,l)){R&&this._createSegments(a);var N=[];s.forEach(a.segments,function(a){a=a.args;var l=a.length,b=[],v;for(v=0;v<l;v+=2){var c=[a[v],a[v+1]],d=[a[v+2],a[v+3]],f=n(c,e),g=n(d,e);if(f^g){if(g=z([c,d],h))f?(v?b.push(g[1]):b.push(c,g[1]),N.push(b),b=[]):b.push(g[1],d)}else f?v?b.push(d):b.push(c,d):(g=F(c,e),f=F(d,e),-1===g||(-1===f||g===f)||(c=z([c,d],h,!0),0<c.length&&(c[g]||(g=c[g[0]]?g[0]:g[1]),c[f]||(f=c[f[0]]?f[0]:f[1]),d=c[g],c=c[f],d&&b.push(d),c&&(b.push(c),N.push(b),
b=[]))))}N.push(b)});a.setShape(this._getPathStringFromPaths(N))}},_clipPolygon:function(a,c){var d=this._getCorners(a,c),v=d.br,f=this._rendererLimits,g=f.clipLimit,l=f.rangeMin,e=f.rangeMax,h=f.clipBBox,n=f.clipSegments,f=this._isPointWithinRange,z=this._isPointWithinBBox,F=this._getClipperIntersection,N=this._getPlaneIndex,T=I._pointLineDistance;if(!f(d.tl,l,e)||!f(v,l,e))R&&this._createSegments(a),d=s.map(a.segments,function(e){var a=e.args,l=a.length,v=[];e=[];var c;for(c=0;c<l;c+=2){var d=[a[c],
a[c+1]],f=[a[c+2],a[c+3]];if(c===l-2){v.push(d);break}var k=z(d,h),m=z(f,h);v.push(d);if(k^m){if(m=F([d,f],n))d=m[1],d[k?"inOut":"outIn"]=!0,v.push(d),e.push([k?"INOUT":"OUTIN",v.length-1,m[0]])}else if(!k){var k=N(d,h),u=N(f,h);-1===k||(-1===u||k===u)||(m=F([d,f],n,!0),0<m.length?(m[k]||(k=m[k[0]]?k[0]:k[1]),m[u]||(u=m[u[0]]?u[0]:u[1]),d=m[k],f=m[u],d&&(d.outIn=!0,v.push(d),e.push(["OUTIN",v.length-1,k])),f&&(f.inOut=!0,v.push(f),e.push(["INOUT",v.length-1,u]))):b.isArray(k)&&b.isArray(u)&&(m=k.concat(u),
m.sort(),"0123"===m.join("")&&(m=[],3===k[0]+k[1]?m.push([g,-g],[-g,g]):m.push([-g,-g],[g,g]),k=T(m[0],[d,f]),d=T(m[1],[d,f]),v.push(k<d?m[0]:m[1]))))}}var w=h[0],r=h[1],q=h[2],t=h[3];s.forEach(v,function(e){e[0]<w&&(e[1]>=r&&e[1]<=t?e[0]=w:(e[0]=w,e[1]=e[1]<r?r:t))});s.forEach(v,function(e){e[1]<r&&(e[0]>=w&&e[0]<=q?e[1]=r:(e[1]=r,e[0]=e[0]<w?w:q))});s.forEach(v,function(e){e[0]>q&&(e[1]>=r&&e[1]<=t?e[0]=q:(e[0]=q,e[1]=e[1]<r?r:t))});s.forEach(v,function(e){e[1]>t&&(e[0]>=w&&e[0]<=q?e[1]=t:(e[1]=
t,e[0]=e[0]<w?w:q))});a=0;l=e.length;if(0<l){do{f=e[a];c=e[(a+1)%l];if(f[2]===c[2]&&"INOUT"===f[0]&&"OUTIN"===c[0])if(d=f[1],c=c[1],d<c)for(d+=1;d<c;d++)v[d][2]=!0;else if(d>c){for(d+=1;d<v.length;d++)v[d][2]=!0;for(d=0;d<c;d++)v[d][2]=!0}a=(a+1)%l}while(0!==a)}l=v[0];a=v[v.length-1];l[2]&&(a[2]=!0,s.some(e,function(e){return 1===e[1]?(v.splice(v.length-1,0,b.clone(v[1])),!0):!1}));v=s.filter(v,function(e){return e[2]?!1:!0});for(a=0;a<v.length-1;a++)if(l=v[a],(c=v[a+1])&&!(l[0]!==c[0]||l[1]!==c[1]))c.outIn?
l.outIn=!0:c.inOut&&(l.inOut=!0),v.splice(a+1,1);l=Math.abs;e=[];for(a=0;a<v.length-1;a++){f=v[a];d=f[0];f=f[1];k=l(d)===g;m=l(f)===g;c=v[a+1];u=c[0];c=c[1];var y=l(u)===g,x=l(c)===g;k&&x?e.push([a+1,[d,c]]):m&&y&&e.push([a+1,[u,f]])}for(a=e.length-1;0<=a;a--)c=e[a],d=v[c[0]-1],l=v[c[0]],!d.outIn&&(!d.inOut&&!l.outIn&&!l.inOut)&&v.splice(c[0],0,c[1]);l=v[0];a=v[v.length-1];(l[0]!==a[0]||l[1]!==a[1])&&v.push(l);return v}),a.setShape(this._getPathStringFromPaths(d))},_getCorners:function(a,b){if(R){var c=
this._map,v=b.getExtent(),d=v.spatialReference,f=c.toScreen(new A(v.xmin,v.ymax,d)),c=c.toScreen(new A(v.xmax,v.ymin,d));return{tl:f,br:c}}f=a.getTransformedBoundingBox();return{tl:f[0],br:f[2]}},_createSegments:function(a){a.shape.path=a.vmlPath;a.segmented=!1;a._confirmSegmented();var b=a.segments;1<b.length&&(a.segments=s.filter(b,function(a,b,c){b=c[b+1];return"M"===a.action&&b&&"L"===b.action?(a.args=a.args.concat(b.args),!0):!1}))},_getPathStringFromPaths:function(a){R?(a=s.map(a,function(a){return"m "+
s.map(a,function(a,b){return(1===b?"l ":"")+a.join(",")}).join(" ")}),a.push("e")):a=s.map(a,function(a){return"M "+s.map(a,function(a){return a.join(",")}).join(" ")});return a.join(" ")},_isPointWithinBBox:function(a,b){var c=b[1],v=b[2],d=b[3],f=a[0],l=a[1];return f>b[0]&&f<v&&l>c&&l<d?!0:!1},_isPointWithinRange:function(a,b,c){var v=a.x;a=a.y;return v<b||a<b||v>c||a>c?!1:!0},_getClipperIntersection:function(a,b,c){var v,d=I._getLineIntersection2,f=Math.round,l={length:0};for(v=0;4>v;v++){var e=
d(a,b[v]);if(e)if(e[0]=f(e[0]),e[1]=f(e[1]),c)l[v]=e,l.length++;else return[v,e]}return c?l:null},_getPlaneIndex:function(a,b){var c=a[0],v=a[1],d=b[0],f=b[1],l=b[2],e=b[3];return c<=d?v>=f&&v<=e?3:v<f?[0,3]:[2,3]:v<=f?c>=d&&c<=l?0:c<d?[3,0]:[1,0]:c>=l?v>=f&&v<=e?1:v<f?[0,1]:[2,1]:v>=e?c>=d&&c<=l?2:c<d?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},
onOpacityChange:function(){},setInfoTemplate:function(a){this.infoTemplate=a},add:function(a,b){if(a._graphicsLayer===this)return a;b||this.graphics.push(a);a._graphicsLayer=this;a._layer=this;this._updateExtent(a);this._draw(a);if(!b)this.onGraphicAdd(a);return a},remove:function(a,b,c){if(!b&&!c){b=this.graphics;if(-1===(a=s.indexOf(b,a)))return null;a=b.splice(a,1)[0]}a.getDojoShape()&&this._removeShape(a,null,c);a._shape=a._graphicsLayer=null;this.onGraphicRemove(a);return a},clear:function(a,
b){var c=this.graphics,v,d=!R;for(v=c.length-1;0<=v;v--)this.remove(c[v],null,d);this.graphics=[];if(d&&this._div){var f;this._childLayer&&(f=this._childLayer.getNode())&&f.parentNode&&f.parentNode.removeChild(f);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();f&&this._div.getEventSource().appendChild(f);this._initOpacity()}if(!b)this.onGraphicsClear()},_setIEOpacity:function(a,b){var c=a&&a.getNode();if(c){var v=a.strokeStyle,d=c.stroke;v&&d&&(d.opacity=v.color.a*b);
v=a.fillStyle;d=c.fill;v&&d&&("tile"===d.type?k.set(c,"opacity",b):d.opacity=v.a*b)}},setOpacity:function(a,b){if(b||this.opacity!=a){var c=this._div;c&&(R?(s.forEach(this.graphics,function(b){this._setIEOpacity(b._shape,a);this._setIEOpacity(b._bgShape,a)},this),c._esriIeOpacity=a,this._bgGroup._esriIeOpacity=a):this._canvas?k.set(c.getEventSource(),"opacity",a):c.getEventSource().setAttribute("opacity",a));this.opacity=a;if(!b)this.onOpacityChange(a)}},setRenderer:function(a){this.renderer=a;this._evalSDRenderer(!0);
this.emit("renderer-change",{renderer:this._rndForScale||a})}});q=q([S,J],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=b.hitch(this,this.enableMouseEvents);this.disableMouseEvents=b.hitch(this,this.disableMouseEvents);this._processEvent=b.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var a=this.inherited("_setMap",arguments);this.enableMouseEvents();return a},_unsetMap:function(){this.disableMouseEvents();
this.inherited("_unsetMap",arguments)},_processEvent:function(a){var b=this._map,c=a.target,v;a.screenPoint=new H(a.pageX-b.position.x,a.pageY-b.position.y);for(a.mapPoint=b.toMap(a.screenPoint);c&&!(v=c.e_graphic);)c=c.parentNode;if(v)return a.graphic=v,a},_onMouseOverHandler:function(a){if(this._processEvent(a))this.onMouseOver(a)},_onMouseMoveHandler:function(a){if(this._processEvent(a))this.onMouseMove(a)},_onMouseDragHandler:function(a){if(this._processEvent(a))this.onMouseDrag(a)},_onMouseOutHandler:function(a){if(this._processEvent(a))this.onMouseOut(a)},
_onMouseDownHandler:function(a){this._downGr=this._downPt=null;this._processEvent(a)&&(t.disconnect(this._onmousemove_connect),t.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=t.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=a.graphic,this._downPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseDown(a))},_onMouseUpHandler:function(a){this._upGr=this._upPt=null;this._processEvent(a)&&(t.disconnect(this._onmousedrag_connect),t.disconnect(this._onmousemove_connect),
this._onmousemove_connect=t.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=a.graphic,this._upPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseUp(a))},_onClickHandler:function(a){if(this._processEvent(a)){var b=this._downGr,c=this._upGr;b&&(c&&b===c&&this._downPt===this._upPt)&&(R&&(u._ieGraphic=a.graphic),this.onClick(a))}},_onDblClickHandler:function(a){if(this._processEvent(a))this.onDblClick(a)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},
onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var a=t.connect,b=this._div.getEventSource();Q||(this._onmouseover_connect=a(b,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=a(b,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=a(b,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=a(b,"onmousedown",this,"_onMouseDownHandler"),
this._onmouseup_connect=a(b,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=a(b,"onclick",this,"_onClickHandler"),this._ondblclick_connect=a(b,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var a=t.disconnect;a(this._onmouseover_connect);a(this._onmousemove_connect);a(this._onmousedrag_connect);a(this._onmouseout_connect);a(this._onmousedown_connect);a(this._onmouseup_connect);a(this._onclick_connect);a(this._ondblclick_connect);
this._mouseEvents=!1}}});q._GraphicsContainer=E;q._GraphicsLayer=S;x("extend-esri")&&(b.setObject("layers.GraphicsLayer",q,u),b.setObject("layers._GraphicsContainer",E,u),b.setObject("layers._GraphicsLayer",S,u));return q})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(q,t){q.add("esri-svg",function(){return-1!==t.renderer.toLowerCase().indexOf("svg")});return q})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x){var y=q([g],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(c,d){this._attrs={};if(c&&s.isString(c))this._url=u.urlToObject(this.url=c);else if(this.url=this._url=null,(d=d||c)&&(d.layerDefinition||d.query))d=null;this.spatialReference=new B(4326);this.initialExtent=new x(-180,-90,180,90,new B(4326));this._map=this._div=null;
this.normalization=!0;d&&(d.id&&(this.id=d.id),!1===d.visible&&(this.visible=!1),a.isDefined(d.opacity)&&(this.opacity=d.opacity),a.isDefined(d.minScale)&&this.setMinScale(d.minScale),a.isDefined(d.maxScale)&&this.setMaxScale(d.maxScale),this.attributionDataUrl=d.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,a.isDefined(d.showAttribution)&&(this.showAttribution=d.showAttribution),this.className=d.className,this.refreshInterval=d.refreshInterval||0);this._errorHandler=s.hitch(this,
this._errorHandler);this.refresh=s.hitch(this,this.refresh);if(this.managedSuspension){var f=this._setMap;this._setMap=function(a){var c=f.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!a.loaded)var d=b.connect(a,"onLoad",this,function(){b.disconnect(d);d=null;this.evaluateSuspension()});return c}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attributionDataUrl:"",hasAttributionData:!1,
showAttribution:!0,refreshInterval:0,_errorHandler:function(a){this.loaded||(this.loadError=a);this.onError(a)},_setMap:function(a,c,d,f){this._map=a;this._lyrZEHandle=b.connect(a,"onZoomEnd",this,this._processMapScale);if(a.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var g=b.connect(a,"onLoad",this,function(){b.disconnect(g);g=null;this._processMapScale()})},_unsetMap:function(a,c){b.disconnect(this._lyrZEHandle);this._toggleRT();this._map=this._lyrZEHandle=null;this._resumedOnce=
void 0;this.suspended=!0},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(a,b){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(a,b),this._map&&this._map._decr())},_getToken:function(){var a=this._url,b=this.credential;return a&&a.query&&a.query.token||b&&b.token||void 0},
_findCredential:function(){this.credential=f.id&&this._url&&f.id.findCredential(this._url.path)},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(a){this.setScaleRange(a)},setMaxScale:function(a){this.setScaleRange(null,a)},setScaleRange:function(b,c){var d=a.isDefined(b),f=a.isDefined(c);
this.loaded||(this._hasMin=this._hasMin||d,this._hasMax=this._hasMax||f);var g=this.minScale,k=this.maxScale;this.minScale=(d?b:this.minScale)||0;this.maxScale=(f?c:this.maxScale)||0;if(g!==this.minScale||k!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&
!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this._toggleRT();this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var a=void 0===this._resumedOnce,b=this.className,c=this._attrs,d=this.getNode(),f;if(a){this._resumedOnce=!0;if(b&&d){var g=d.getAttribute("class")||"";RegExp("(^|\\s)"+
b+"(\\s|$)","i").test(g)||d.setAttribute("class",g+((g?" ":"")+b))}if(c&&d)for(f in c)c.hasOwnProperty(f)&&d.setAttribute(f,c[f])}this._toggleRT(!0);this.onResume({firstOccurrence:a});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var a=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();a!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(a){return a?y.prototype._isMapAtVisibleScale.apply(this,
arguments):!1},_isMapAtVisibleScale:function(a,b){if(!a&&(!this._map||!this._map.loaded))return!1;var c=this._map;a=a||c.getScale();var d=this.minScale,f=this.maxScale,g=!d,k=!f,m;b&&(m=c.width>c.height?c.width:c.height);g||(a<=d?g=!0:b&&(g=Math.abs(d-a)/d<1/m));k||(a>=f?k=!0:b&&(k=Math.abs(f-a)/f<1/m));return g&&k},getAttributionData:function(){var a=this.attributionDataUrl,b=new r(d._dfdCanceller);this.hasAttributionData&&a?(b._pendingDfd=c({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),
b._pendingDfd.then(function(a){b.callback(a)},function(a){b.errback(a)})):(a=Error("Layer does not have attribution data"),a.log=t.isDebug,b.errback(a));return b},getResourceInfo:function(){var a=this.resourceInfo;return s.isString(a)?m.fromJson(a):s.clone(a)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(a,b){var c=this.getNode();if("data-reference"===a&&11>k("ie"))return this;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));this._attrs&&(null==b?delete this._attrs[a]:
this._attrs[a]=b);return this},setRefreshInterval:function(a){var b=this.refreshInterval;this.refreshInterval=a;this._toggleRT();a&&!this.updating&&!this.suspended&&this._toggleRT(!0);if(b!==a)this.onRefreshIntervalChange();return this},_toggleRT:function(a){a&&this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,6E4*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null)},setNormalization:function(a){this.normalization=a},setVisibility:function(a){this.visible!==
a&&(this.visible=a,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",a?null:"")},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});k("extend-esri")&&s.setObject("layers.Layer",y,f);return y})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(q,t,b,s,r,m,k,g,f){q=q(null,{declaredClass:"esri.layers.TileInfo",constructor:function(a){t.mixin(this,a);this.width=this.cols;this.height=this.rows;a=this.spatialReference;var c=this.origin;a&&(a=this.spatialReference=new k(a.toJson?a.toJson():a));c&&(this.origin=new g(c.toJson?c.toJson():c),!c.spatialReference&&a&&this.origin.setSpatialReference(new k(a.toJson())));this.lods=b.map(this.lods,function(a){return new f(a)})},toJson:function(){return m.fixJson({rows:this.rows,cols:this.cols,
dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&b.map(this.lods,function(a){return a.toJson()})})}});s("extend-esri")&&t.setObject("layers.TileInfo",q,r);return q})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.layers.LOD",constructor:function(b){t.mixin(this,
b)},toJson:function(){return r.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});b("extend-esri")&&t.setObject("layers.LOD",q,s);return q})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(q,
t,b,s,r,m,k,g,f,a,c,d,u,B,x){t=t([c,d],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),_isReference:!1,
_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(a,c){c&&(c.roundrobin&&(q.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),c.tileServers=c.roundrobin),this._setTileServers(c.tileServers),this._loadCallback=
c.loadCallback);this._params=b.mixin({},this._url.query);this._initLayer=b.hitch(this,this._initLayer);var d=c&&c.resourceInfo;d?this._initLayer(d):(this._load=b.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(a){if(a&&0<a.length){this.tileServers=a;var b,c=a.length;for(b=0;b<c;b++)a[b]=f.urlToObject(a[b]).path}},_initLayer:function(b,c){this.inherited(arguments);this.resourceInfo=r.toJson(b);
this.tileInfo=new u(b.tileInfo);!1!==this.resampling&&(b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new x(this)):this.resampling=!!b.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new a(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;b.timeInfo&&(this.timeInfo=new B(b.timeInfo));b.mensurationCapabilities&&(this.mensurationCapabilities=b.mensurationCapabilities);
var d=this._url.path,g=this._loadCallback,k=f.getProtocolForWebResource(!0),m=d.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i),m=m&&m[2];if(!this.tileServers)if(b.tileServers)this._setTileServers(b.tileServers);else{var s=-1!==d.search(/^https?\:\/\/server\.arcgisonline\.com/i),q=-1!==d.search(/^https?\:\/\/services\.arcgisonline\.com/i);if(s||q)this._setTileServers([d,d.replace(s?/server\.arcgisonline/i:/services\.arcgisonline/i,
s?"services.arcgisonline":"server.arcgisonline")])}if(m){m=m.toLowerCase();for(d=0;d<this._agolAttrs.length;d++)if(s=this._agolAttrs[d],s.toLowerCase()===m){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||k+"//static.arcgis.com/attribution/"+s;break}for(d=0;d<this._referenceLayers.length;d++)if(s=this._referenceLayers[d],s.toLowerCase()===m){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);g&&(delete this._loadCallback,g(this))},getTileUrl:function(a,b,c){var d=
this.tileServers,g=this._getToken(),m=this._url.query;a=(d?d[b%d.length]:this._url.path)+"/tile/"+a+"/"+b+"/"+c;this.resampling&&!this.tileMap&&(a+="?blankTile\x3dfalse");m&&(a=this.resampling&&!this.tileMap?a+("\x26"+k.objectToQuery(m)):a+("?"+k.objectToQuery(m)));if(g&&(!m||!m.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+g;a=this.addTimestampToURL(a);return f.addProxy(a)}});m("extend-esri")&&b.setObject("layers.ArcGISTiledMapServiceLayer",t,g);return t})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H){q=q(H,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(a,c){t.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=c?c.displayLevels:null)?this._displayLevels[0]:0;this.resampling=c?c.resampling:void 0;this._resamplingTolerance=c?c.resamplingTolerance:null;this.exclusionAreas=c?c.exclusionAreas:null;var d=b.hitch;this._addImage=d(this,this._addImage);this._tileLoadHandler=d(this,this._tileLoadHandler);
this._tileErrorHandler=d(this,this._tileErrorHandler);this._popTile=d(this,this._popTile);this._cleanUpRemovedImages=d(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=d(this,this._fireOnUpdateEvent);this._transitionEnd=d(this,this._transitionEnd);this._tileMapCallback=d(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var a=this.tileInfo,b=a.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=a.width;this._tileH=
a.height;var c=this.scales=[],d=this._displayLevels,f=-Infinity,g=Infinity,k=this.fullExtent,m=new E(k.xmin,k.ymax),k=new E(k.xmax,k.ymin),u=w.getContainingTileCoords,r,q,t,v=b.length;for(t=0;t<v;t++)if(q=b[t],r=u(a,m,q),q.startTileRow=0>r.row?0:r.row,q.startTileCol=0>r.col?0:r.col,r=u(a,k,q),q.endTileRow=r.row,q.endTileCol=r.col,!d||-1!==s.indexOf(d,q.level))c[t]=q.scale,f=q.scale>f?q.scale:f,g=q.scale<g?q.scale:g;-Infinity!==f&&!this._hasMin&&this.setMinScale(f);Infinity!==g&&!this._hasMax&&this.setMaxScale(g);
this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=x("ie")&&7>x("ie")&&(this.isPNG32||"Mixed"===a.format)},isVisibleAtScale:function(a){return a?H.prototype._isMapAtVisibleScale.call(this,a,!0):!1},_isMapAtVisibleScale:function(a){var b=this.inherited(arguments,[a,!0]);if(b){var c;c=this._map;var b=this.scales,d=c.getScale(),f=!1,g=c.width>c.height?c.width:c.height;for(c=0;c<b.length;c++)if(Math.abs(b[c]-d)/b[c]<1/g){f=!0;break}b=f}return b},_setMap:function(a,b,c,d){this.inherited(arguments);
this._map=a;var g=this._div=m.create("div",null,b),k=a.__visibleDelta,r=t.connect,s=u._css.names,q={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible"},y=B.defaults.map.zoomDuration;"css-transforms"===a.navigationMode?(q[s.transform]=u._css.translate(-k.x,-k.y),f.set(g,q),delete q[s.transform],q[s.transition]=s.transformName+" "+y+"ms ease",f.set(this._active=m.create("div",null,g),q),this._active._remove=0,this._passives=[]):(q.left=-k.x+"px",q.top=-k.y+"px",f.set(g,q));
this._onResizeHandler_connect=r(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=r(this,"onOpacityChange",this,"_opacityChangeHandler");k=this.tileInfo;r=k.spatialReference;s=r._getInfo();(this._wrap=a.wrapAround180&&r._isWrappable()&&Math.abs(s.origin[0]-k.origin.x)<=s.dx)&&w._addFrameInfo(k,s);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!a.loaded)var x=t.connect(a,"onLoad",this,function(){t.disconnect(x);x=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return g},_unsetMap:function(a,b){this.suspended||this._suspendImpl();m.destroy(this._div);this._map=this._div=null;var c=t.disconnect;c(this._onResizeHandler_connect);c(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){y.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var a=this._tiles,b=this._tileIds,c=this._loadingList,
d,f,g=t.disconnect,k=m.destroy;c&&0<c.count&&(c.forEach(function(b){if(d=a[b])g(d._onload_connect),g(d._onerror_connect),g(d._onabort_connect),d._onload_connect=d._onerror_connect=d._onabort_connect=null}),c.clear(),this._fireUpdateEnd());this._removeList.clear();for(c=b.length-1;0<=c;c--)(d=(f=b[c])&&a[f])&&k(d);if("css-transforms"===this._map.navigationMode){b=this._active;f=this._passives;var u;this._noDom=0;for(c=f.length-1;0<=c;c--)u=f[c],u._endHandle&&g(u._endHandle),u._matrix=u._multiply=u._endHandle=
null,u._marked=u._remove=0,f.splice(c,1),k(u);b._matrix=b._multiply=null;b._marked=b._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new c;this._loadingList=new c;y.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(b.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var a=this._map,b=t.connect;if("css-transforms"===a.navigationMode){if(this._onScaleHandler_connect=b(a,"onScale",this,this._onScaleHandler),x("esri-mobile")){this._standby=[];var c=this,d=function(){c._noDom=1};this._onPanStartHandler_connect=b(a,"onPanStart",d);this._onZoomStartHandler_connect=b(a,"onZoomStart",d)}}else this._onZoomHandler_connect=b(a,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=t.disconnect;a(this._onPanHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onPanStartHandler_connect);a(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(a,b,c){a={width:b+"px",height:c+"px"};b=f.set;b(this._div,a);if("css-transforms"===this._map.navigationMode){this._active&&b(this._active,a);for(c=this._passives.length-1;0<=c;c--)b(this._passives[c],a)}},_onExtentChangeHandler:function(a,b,c,k){b=this._map;var r=this._standby,s;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!b._isPanningOrZooming()){if("css-transforms"===b.navigationMode){if(c)for(k=this._passives.length-1;0<=k;k--)s=this._passives[k],f.set(s,
u._css.names.transition,"none"),s._marked?(this._passives.splice(k,1),s.parentNode&&s.parentNode.removeChild(s),m.destroy(s)):0<s.childNodes.length&&(s._multiply=s._multiply?d.multiply(s._matrix,s._multiply):s._matrix);this._noDom=0;if(r&&r.length)for(k=r.length-1;0<=k;k--)s=r[k],f.set(s,"visibility","inherit"),this._popTile(s),r.splice(k,1)}this._fireUpdateStart();this._rrIndex=0;k=w.getCandidateTileInfo(b,this.tileInfo,a);a=b.__visibleDelta;if(!this._ct||k.lod.level!==this._ct.lod.level||c){s=k&&
this._ct&&k.lod.level!==this._ct.lod.level;this._ct=k;var q=this._tiles,t=this._tileIds,y=this._tileBounds,x=this._removeList,A,B=t.length;this._cleanUpRemovedImages();for(k=0;k<B;k++)r=t[k],A=q[r],y[r]=t[k]=null,"css-transforms"===b.navigationMode&&(s&&A.parentNode&&b.fadeOnZoom)&&(A._fadeOut=s,A.parentNode._remove++),x.add(A);c&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}k=a.x;c=a.y;"css-transforms"===b.navigationMode?(r={},r[u._css.names.transform]=u._css.translate(k,c),f.set(this._div,
r)):f.set(this._div,{left:k+"px",top:c+"px"});this.__coords_dx=k;this.__coords_dy=c;this._updateImages(new D(0,0,a.width,a.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;c=this._tileW;q=this._tileH;a=new D(-a.x,-a.y,a.width,a.height);for(k=this._tileIds.length-1;0<=k;k--)(r=this._tileIds[k])?(s=this._tiles[r],t=g.getMarginBox(s),t=new D(t.l,t.t,c,q),"css-transforms"===b.navigationMode&&(t.x=s._left,t.y=s._top),a.intersects(t)?
this._tileBounds[r]=t:(this._loadingList.contains(r)&&this._popTile(s),m.destroy(s),this._tileIds.splice(k,1),delete this._tileBounds[r],delete this._tiles[r])):(this._tileIds.splice(k,1),delete this._tileBounds[r],delete this._tiles[r])}},_onPanHandler:function(a,b){var c=this._map,d=c.__visibleDelta.offset(b.x,b.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===c.navigationMode?(c={},c[u._css.names.transform]=u._css.translate(d.x,d.y),f.set(this._div,c),x("esri-mobile")||this._updateImages({x:-d.x,
y:-d.y,width:d.width,height:d.height})):(f.set(this._div,{left:d.x+"px",top:d.y+"px"}),this._updateImages({x:-d.x,y:-d.y,width:d.width,height:d.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(a,b){var c,g={},k=u._css.names,r=this._map,s=B.defaults.map.zoomDuration;for(c=this._passives.length-1;0<=c;c--){var w=this._passives[c];0===w.childNodes.length?(this._passives.splice(c,1),m.destroy(w)):("none"===w.style[k.transition]&&f.set(w,k.transition,
k.transformName+" "+s+"ms ease"),f.set(w,k.transition,b?"none":k.transformName+" "+s+"ms ease"),w._matrix=a,g[k.transform]=u._css.matrix(w._multiply?d.multiply(a,w._multiply):a),f.set(w,g))}this._active&&0===this._active.childNodes.length||(f.set(this._active,k.transition,b?"none":k.transformName+" "+s+"ms ease"),this._active._matrix=a,g[k.transform]=u._css.matrix(this._active._matrix),f.set(this._active,g),this._passives.push(this._active),g={position:"absolute",width:r.width+"px",height:r.height+
"px",overflow:"visible"},g[k.transition]=k.transformName+" "+s+"ms ease",f.set(this._active=m.create("div",null,this._div),g),this._active._remove=0,r.fadeOnZoom&&m.place(this._active,this._div,"first"))},_onZoomHandler:function(a,b,c){a=g.getMarginBox(this._div);c=c.offset(-a.l,-a.t);if(!this._previousScale||1===b)this._previousScale=1;var d,k=this._tileW*b,m=this._tileH*b,u=this._tileBounds,r=this._tiles,w=this._previousScale,q=this._multiple,t=f.set,y,v;if((a=x("ie"))&&8>a)s.forEach(this._tileIds,
function(e){v="";d=u[e];y=r[e].style.margin.split(" ");s.forEach(y,function(e){""!==v&&(v+=" ");e=parseFloat(e);v+=e/w*b+"px"});t(r[e],{left:d.x-(k-d.width)*(c.x-d.x)/d.width+"px",top:d.y-(m-d.height)*(c.y-d.y)/d.height+"px",margin:1!==q&&-1===v.indexOf("NaN")?v:"",zoom:b})});else{var A=k*q,C=m*q,l,e;s.forEach(this._tileIds,function(h){v="";d=u[h];l=d.x-(k-d.width)*(c.x-d.x)/d.width;e=d.y-(m-d.height)*(c.y-d.y)/d.height;y=r[h].style.margin.split(" ");s.forEach(y,function(e){""!==v&&(v+=" ");e=parseFloat(e);
v+=e/w*b+"px"});t(r[h],{left:l+"px",top:e+"px",margin:1!==q&&-1===v.indexOf("NaN")?v:"",width:A+"px",height:C+"px"})})}this._previousScale=b},_updateImages:function(a){if(this._ct){var b,c=this._tileW,d=this._tileH,f=this._ct;b=f.lod;var f=f.tile,g=f.offsets,k=f.coords,m=k.row,k=k.col,u=b.level,r=this.opacity,w=this._tileIds,q=this._loadingList,v=this._addImage,t=this._map.id,C=this.id,l=a.x,e=a.y,h=b.startTileRow,n=b.endTileRow,z=b.startTileCol,F=b.endTileCol,N=s.indexOf,T,W,ea=g.x-this.__coords_dx,
y=g.y-this.__coords_dy;W=c-ea+-a.x;var x=d-y+-a.y;T=Math.ceil;W=0<W?W%c:c-Math.abs(W)%c;x=0<x?x%d:d-Math.abs(x)%d;l=0<l?Math.floor((l+ea)/c):T((l-(c-ea))/c);e=0<e?Math.floor((e+y)/d):T((e-(d-y))/d);y=l+T((a.width-W)/c);a=e+T((a.height-x)/d);var A,B,D;this._wrap&&(A=b._frameInfo,B=A[0],D=A[1],A=A[2]);for(x=l;x<=y;x++)for(l=e;l<=a;l++)T=m+l,W=k+x,this._wrap&&(W<D?(W%=B,W=W<D?W+B:W):W>A&&(W%=B)),!this._isExcluded(u,T,W)&&(T>=h&&T<=n&&W>=z&&W<=F)&&(b=t+"_"+C+"_tile_"+u+"_"+l+"_"+x,-1===N(w,b)&&(q.add(b),
w.push(b),v(u,l,T,x,W,b,c,d,r,f,g)))}},_cleanUpRemovedImages:function(){var a=this._removeList,b=m.destroy,c,d=u._css.names;a.forEach(function(a){a._fadeOut||(a.style.filter="",a.style.zoom=1,b(a))});if("css-transforms"===this._map.navigationMode)for(c=this._passives.length-1;0<=c;c--){var g=this._passives[c];0===g.childNodes.length?(this._passives.splice(c,1),b(g)):this._map.fadeOnZoom&&(!g._marked&&g._remove===g.childNodes.length)&&(g._marked=1,2048>u._css.getScaleFromMatrix(f.get(g,d.transform))?
(f.set(g,d.transition,"opacity 0.65s"),f.set(g,"opacity",0),t.disconnect(g._endHandle),g._endHandle=t.connect(g,d.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:g}))}a.clear()},_transitionEnd:function(a){var b=a.target;"opacity"===a.propertyName&&(t.disconnect(b._endHandle),b._endHandle=null,a=s.indexOf(this._passives,b),-1<a&&this._passives.splice(a,1),b.parentNode&&b.parentNode.removeChild(b),m.destroy(b))},_addImage:function(a,c,d,g,r,s,w,q,y,x,A){if(this._patchIE)x=
this._tiles[s]=m.create("div"),x.id=s,k.add(x,"layerTile"),f.set(x,{left:w*g-A.x+"px",top:q*c-A.y+"px",width:w+"px",height:q+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(a,d,r)+"', sizingMethod\x3d'scale')"}),1>y&&f.set(x,"opacity",y),a=x.appendChild(m.create("div")),f.set(a,{opacity:0,width:w+"px",height:q+"px"}),this._div.appendChild(x),this._loadingList.remove(s),this._fireOnUpdateEvent();else{x=this._tiles[s]=m.create("img");var B=t.connect;x.id=s;
x._uid=a+"_"+d+"_"+r;x.alt="";k.add(x,"layerTile");g=w*g-A.x;A=q*c-A.y;c=this._map;var v=u._css.names;w={width:w+"px",height:q+"px",visibility:"hidden"};"css-transforms"===c.navigationMode?(w[v.transform]=u._css.translate(g,A),f.set(x,w),x._left=g,x._top=A):(w.left=g+"px",w.top=A+"px",f.set(x,w));1>y&&f.set(x,"opacity",y);x._onload_connect=B(x,"onload",this,"_tileLoadHandler");x._onerror_connect=B(x,"onerror",b.hitch(this,"_tileErrorHandler",d,r));x._onabort_connect=B(x,"onabort",this,"_tileAbortHandler");
if(this.tileMap)this.tileMap.getTile(a,d,r,s,this._tileMapCallback);else if(s=this.getTileUrl(a,d,r,x))this._failedRequests&&this._failedRequests[s]?(f.set(x,this._failedRequests[s].css),x.src=this._failedRequests[s].src,this._multiple=parseInt(this._failedRequests[s].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,x.src=s);"css-transforms"===c.navigationMode?this._active.appendChild(x):this._div.appendChild(x)}},_tileMapCallback:function(b,c){var d,
g;this.suspended||(g=this._tiles[c.id]||a.byId(c.id),d=c.level+"_"+c.row+"_"+c.col,g&&g._uid===d?(this._multiple=2*(c.level-b.level)||1,this.isResampling=1!==this._multiple,d=this.tileMap.style(b,c),f.set(g,d),g.src=this.getTileUrl(b.level,b.row,b.col)):this._popTile(c))},getTileUrl:function(a,b,c){},_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,addTimestampToURL:function(a){var b=this._refreshTS;b&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,"$$$1"+b):a+((-1===a.indexOf("?")?
"?":"\x26")+"_ts\x3d"+b));return a},refresh:function(){this.suspended||(this._refreshTS=(new Date).getTime(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(a){var b=t.disconnect;b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;this._loadingList.remove(a.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(a){a=a.currentTarget;this._noDom?this._standby.push(a):(f.set(a,"visibility",
"inherit"),this._popTile(a))},_tileAbortHandler:function(a){a=a.currentTarget;this.onError(Error("Unable to load tile: "+a.src));f.set(a,"visibility","hidden");this._popTile(a)},_tileErrorHandler:function(a,b,c){c=c.currentTarget;var d,g,k=!0;if(this.tileMap||!this.resampling)k=!1;else if(d=new r(c.src),d=d.path.split("/"),d=parseInt(d[d.length-3]),g=this._ct.lod.level-d+1,this._multiple=Math.pow(2,g),d===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/
Math.LN2>this._resamplingTolerance)k=!1;k?(this.isResampling=!0,this._resample(c,a,b)):(this.onError(Error("Unable to load tile: "+c.src)),f.set(c,"visibility","hidden"),this._popTile(c))},_resample:function(a,b,c){var d=(new r(a.src)).path.split("/"),g=this._multiple,k=parseInt(d[d.length-3])-1,m=parseInt(b/g),u=parseInt(c/g),d=c%g,s=b%g,m=this.getTileUrl(k,m,u);b=this.getTileUrl(k+Math.log(g)/Math.LN2,b,c);g={width:this._tileW*g+"px",height:this._tileH*g+"px",margin:"-"+this._tileW*s+"px 0 0 "+
("-"+this._tileH*d+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[b]={src:m,css:g};f.set(a,g);x("chrome")&&a.setAttribute("src",null);a.src=m},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=f.set,c,
d,g;if("css-transforms"===this._map.navigationMode){if(this._active){g=this._active.childNodes;for(c=g.length-1;0<=c;c--)b(g[c],"opacity",a)}for(c=this._passives.length-1;0<=c;c--){g=this._passives[c].childNodes;for(d=g.length-1;0<=d;d--)b(g[d],"opacity",a)}}else{g=this._div.childNodes;for(c=g.length-1;0<=c;c--)b(g[c],"opacity",a)}},setExclusionAreas:function(a){this.exclusionAreas=a;if(this.loaded&&this._map&&this._map.loaded){var b=this._map.spatialReference,c=this.tileInfo,d=c.origin,f=c.lods,
g=f[0].level,k=f[f.length-1].level,m,u,r,s,w,v,q,C,l;if(!this.exclusionAreas||!this.exclusionAreas.length)this._exclusionsPerZoom=null;else{this._exclusionsPerZoom=[];u=0;for(r=a.length;u<r;u++)if(m=a[u],(l=m.geometry)&&"extent"===l.type&&l.xmin<=l.xmax&&l.ymin<=l.ymax){if(!b.equals(l.spatialReference))if(b._canProject(l.spatialReference))b.isWebMercator()?(C=E.lngLatToXY(l.xmin,l.ymin),l=E.lngLatToXY(l.xmax,l.ymax)):(C=E.xyToLngLat(l.xmin,l.ymin,!0),l=E.xyToLngLat(l.xmax,l.ymax,!0)),l=new A(C[0],
C[1],l[0],l[1],b);else continue;q=-1;if(m.minZoom&&-1!==m.minZoom)q=m.minZoom;else if(m.minScale&&-1!==m.minScale){s=0;for(w=f.length;s<w;s++)if(f[s].scale<=m.minScale){q=f[s].level;break}}q=Math.max(q,g);C=-1;if(m.maxZoom&&-1!==m.maxZoom)C=m.maxZoom;else if(m.maxScale&&-1!==m.maxScale){s=0;for(w=f.length;s<w;s++)if(f[s].scale<m.maxScale){C=f[s-1].level;break}else if(f[s].scale===m.maxScale){C=f[s].level;break}}C=-1===C?k:Math.min(C,k);for(m=q;m<=C;m++){s=0;for(w=f.length;s<w;s++)if(f[s].level===
m){v=f[s];break}v&&(this._exclusionsPerZoom[m]||(this._exclusionsPerZoom[m]=[]),s=1/v.resolution/c.rows,w=1/v.resolution/c.cols,this._exclusionsPerZoom[m].push({rowFrom:Math.floor((d.y-l.ymax)*s),rowTo:Math.ceil((d.y-l.ymin)*s),colFrom:Math.floor((l.xmin-d.x)*w),colTo:Math.ceil((l.xmax-d.x)*w)}))}}}this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(a,b,c){var d,f,g;if(!this._exclusionsPerZoom)return!1;d=this._exclusionsPerZoom[a];if(!d)return!1;
f=0;for(g=d.length;f<g;f++)if(a=d[f],b>=a.rowFrom&&b<a.rowTo&&c>=a.colFrom&&c<a.colTo)return!0;return!1}});x("extend-esri")&&b.setObject("layers.TiledMapServiceLayer",q,u);return q})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(q,t,b){b.ArrayList=function(s){var r=[];s&&(r=r.concat(s));this.count=r.length;this.add=function(b){r.push(b);this.count=r.length};this.addRange=function(b){if(b.getIterator)for(b=b.getIterator();!b.atEnd();)this.add(b.get());
else for(var k=0;k<b.length;k++)r.push(b[k]);this.count=r.length};this.clear=function(){r.splice(0,r.length);this.count=0};this.clone=function(){return new b.ArrayList(r)};this.contains=function(b){for(var k=0;k<r.length;k++)if(r[k]==b)return!0;return!1};this.forEach=function(b,k){q.forEach(r,b,k)};this.getIterator=function(){return new b.Iterator(r)};this.indexOf=function(b){for(var k=0;k<r.length;k++)if(r[k]==b)return k;return-1};this.insert=function(b,k){r.splice(b,0,k);this.count=r.length};this.item=
function(b){return r[b]};this.remove=function(b){b=this.indexOf(b);0<=b&&r.splice(b,1);this.count=r.length};this.removeAt=function(b){r.splice(b,1);this.count=r.length};this.reverse=function(){r.reverse()};this.sort=function(b){b?r.sort(b):r.sort()};this.setByIndex=function(b,k){r[b]=k;this.count=r.length};this.toArray=function(){return[].concat(r)};this.toString=function(b){return r.join(b||",")}};return b.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang",
"dojo/_base/array"],function(q,t,b){q=t.getObject("dojox.collections",!0);q.DictionaryEntry=function(b,r){this.key=b;this.value=r;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};q.Iterator=function(s){var r=0;this.element=s[r]||null;this.atEnd=function(){return r>=s.length};this.get=function(){return this.atEnd()?null:this.element=s[r++]};this.map=function(m,k){return b.map(s,m,k)};this.reset=function(){r=0;this.element=s[r]}};q.DictionaryIterator=function(s){var r=
[],m={},k;for(k in s)m[k]||r.push(s[k]);var g=0;this.element=r[g]||null;this.atEnd=function(){return g>=r.length};this.get=function(){return this.atEnd()?null:this.element=r[g++]};this.map=function(f,a){return b.map(r,f,a)};this.reset=function(){g=0;this.element=r[g]}};return q})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(q,
t,b,s,r,m,k,g,f,a){q=q(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);var f=this._params={},g=this._url.query?this._url.query.token:null;g&&(f.token=g)},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){k({url:this._url.path,content:t.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,
initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(c,d){try{this._findCredential();(this.credential&&this.credential.ssl||c&&c._ssl)&&this._useSSL();this.description=c.description;this.copyright=c.copyrightText;this.spatialReference=c.spatialReference&&new g(c.spatialReference);this.initialExtent=c.initialExtent&&new f(c.initialExtent);this.fullExtent=c.fullExtent&&new f(c.fullExtent);this.units=c.units;this.maxRecordCount=c.maxRecordCount;this.maxImageHeight=c.maxImageHeight;
this.maxImageWidth=c.maxImageWidth;this.supportsDynamicLayers=c.supportsDynamicLayers;var k=this.layerInfos=[],r=c.layers,s=this._defaultVisibleLayers=[];b.forEach(r,function(b,c){k[c]=new a(b);b.defaultVisibility&&s.push(b.id)});this.visibleLayers||(this.visibleLayers=s);this.version=c.currentVersion;this.version||(this.version="capabilities"in c||"tables"in c?10:"supportedImageFormatTypes"in c?9.31:9.3);this.capabilities=c.capabilities;m.isDefined(c.minScale)&&!this._hasMin&&this.setMinScale(c.minScale);
m.isDefined(c.maxScale)&&!this._hasMax&&this.setMaxScale(c.maxScale)}catch(q){this._errorHandler(q)}}});s("extend-esri")&&t.setObject("layers.ArcGISMapServiceLayer",q,r);return q})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(b){t.mixin(this,b)},toJson:function(){return r.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,
minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});b("extend-esri")&&t.setObject("layers.LayerInfo",q,s);return q})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(q,t,b,s,r,m,k){q=q(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(b){null!==b&&(t.mixin(this,b),b.exportOptions&&(this.exportOptions=new k(b.exportOptions)),
this.timeExtent=null,b.timeExtent&&2===b.timeExtent.length&&(this.timeExtent=new r(b.timeExtent)),this.timeReference=new m(b.timeReference))}});t.mixin(q,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",
UNIT_YEARS:"esriTimeUnitsYears"});b("extend-esri")&&t.setObject("layers.TimeInfo",q,s);return q})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(q,t,b,s){var r=q(null,{declaredClass:"esri.TimeExtent",constructor:function(b){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(b)if(t.isArray(b)){var k=b[0],g=b[1];this.startTime=null===k||"null"===k?null:new Date(k);this.endTime=null===g||"null"===g?null:new Date(g)}else b instanceof
Date&&this._create(b,null)},offset:function(b,k){var g=new r,f=this.startTime,a=this.endTime;f&&(g.startTime=this._getOffsettedDate(f,b,k));a&&(g.endTime=this._getOffsettedDate(a,b,k));return g},intersection:function(b){return this._intersection(this,b)},toJson:function(){var b=[],k=this.startTime;b.push(k?k.getTime():"null");k=this.endTime;b.push(k?k.getTime():"null");return b},_create:function(b,k){this.startTime=b?new Date(b.getTime()):null;this.endTime=k?new Date(k.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},
esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(b,k){if(b&&k){var g=b.startTime,f=b.endTime,a=k.startTime,c=k.endTime,g=g?g.getTime():-Infinity,a=a?a.getTime():-Infinity,f=f?f.getTime():Infinity,c=c?c.getTime():Infinity,d,u;a>=g&&a<=f?d=a:g>=a&&g<=c&&(d=g);f>=a&&f<=c?u=
f:c>=g&&c<=f&&(u=c);if(!isNaN(d)&&!isNaN(u))return g=new r,g.startTime=-Infinity===d?null:new Date(d),g.endTime=Infinity===u?null:new Date(u),g}return null},_getOffsettedDate:function(b,k,g){var f=this._refData;b=new Date(b.getTime());k&&g&&(f=f[g],b[f.setter](b[f.getter]()+k*f.multiplier));return b}});b("extend-esri")&&(s.TimeExtent=r);return r})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.layers.TimeReference",
constructor:function(b){b&&t.mixin(this,b)}});b("extend-esri")&&t.setObject("layers.TimeReference",q,s);return q})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(b){b&&t.mixin(this,b)},toJson:function(){return r.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,
useTime:this.useTime})}});b("extend-esri")&&t.setObject("layers.LayerTimeOptions",q,s);return q})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils ../sniff".split(" "),function(q,t,b,s,r,m,k,g){var f=g("esri-iphone");return q(null,{declaredClass:"esri.layers.TileMap",constructor:function(a){this.layer=a;this._tileMaps={}},getTile:function(a,b,d,f,g){a={id:f,level:a,row:b,col:d};b=this._getResamplingBudget();
0<b?this._process({tile:a,requestedTile:a,callback:g,resamplingBudget:b}):(g||this.callback).call(this,a,a)},statusOf:function(a,b,d){var f=this._getResamplingBudget();a={level:a,row:b,col:d};if(0===f)return 1;for(;0<=f;){b=this._tileToTileMap(a);if(!this._tileMaps[b.uid])return-1;b=this._tileMaps[b.uid];if(!b.promise.isFulfilled())return-1;if(this._isTileAvailable(a,b))return 1;a=this._parentTile(a);if(!a)break;f--}return 0},style:function(a,b){if(!(a.level===b.level&&a.row===b.row&&a.col===b.col)){for(var d=
this.layer.tileInfo,g=d.lods,k=d.cols,d=d.rows,m,r,s=g.length-1;!m||!r;)!m&&g[s].level===a.level&&(m=g[s]),!r&&g[s].level===b.level&&(r=g[s]),s--;m=Math.round(m.resolution/r.resolution);r=-1*b.col%m*k;g=-1*b.row%m*d;m={width:k*m+"px",height:d*m+"px",margin:g+"px 0 0 "+r+"px","will-change":"transform"};f&&(r=0===r?0:-1*r,g=0===g?0:-1*g,m.clip="rect("+g+"px,"+(r+k)+"px,"+(g+d)+"px,"+r+"px)");return m}},_process:function(a){var b=a.tile,d=this._tileToTileMap(b),f=this._parentTile(b);this._getTileMap(d).then(t.hitch(this,
function(g){d=g;this._isTileAvailable(b,d)?(a.callback||this.callback).call(this,b,a.requestedTile):0<a.resamplingBudget&&f?(a.resamplingBudget--,a.tile=f,this._process(a)):(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile)}),t.hitch(this,function(){(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile)}))},_getTileMap:function(a){var b,d,f,g,k=null;this._tileMaps[a.uid]?(a=this._tileMaps[a.uid],b=a.promise):(this._tileMaps[a.uid]=a,d=new s,m({url:this._getTileMapUrl(a.level,
a.row,a.col),handleAs:"json",callbackParamName:"callback",timeout:3E3,load:function(b){t.mixin(a,b);if(a.data&&0<a.data.length){g=a.data.length;if(1===g)k=a.data[0];else{k=a.data[0];for(f=1;f<g;f++)if(a.data[f]!==k){k=null;break}}null!==k&&(delete a.data,a.value=k)}d.resolve(a)},error:function(a){d.reject()}}),b=a.promise=d.promise);return b},_parentTile:function(a){var c=this.layer.tileInfo.lods,d,f,g=null;b.some(c,function(b,c){return a.level===b.level?(d=b,f=c,!0):!1});0<f&&(c=c[f-1],g={id:a.id,
level:c.level,row:Math.floor(a.row*d.resolution/c.resolution+0.01),col:Math.floor(a.col*d.resolution/c.resolution+0.01)});return g},_tileToTileMap:function(a){var b=8*Math.floor(a.row/8),d=8*Math.floor(a.col/8);return{uid:a.level+"_"+b+"_"+d,level:a.level,row:b,col:d}},_isTileAvailable:function(a,b){var d,f;b.valid?void 0!==b.value?d=b.value:(d=b.location.left,f=b.location.top,d=(a.row-f)*b.location.width+(a.col-d),d=d<b.data.length?b.data[d]:0):d=0;return d},_getTileMapUrl:function(a,b,d){var f=
this.layer,g=f.tileServers,k=f._getToken(),m=f._url.query;a=(g?g[b%g.length]:f._url.path)+"/tilemap/"+a+"/"+b+"/"+d+"/8/8";m&&(a+="?"+r.objectToQuery(m));if(k&&(!m||!m.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+k;return a=f.addTimestampToURL(a)},_getResamplingBudget:function(){var a=this.layer,b=0;if(a.resampling&&(b=a._resamplingTolerance,null===b||void 0===b))b=a.tileInfo.lods.length;return b}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u){var B=q([u],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(a){this.inherited(arguments,[null,a]);this._mapImages=[];var c=b.hitch;this._panStart=c(this,this._panStart);this._pan=c(this,this._pan);this._extentChange=c(this,this._extentChange);this._zoom=c(this,this._zoom);this._zoomStart=c(this,this._zoomStart);this._scale=c(this,this._scale);this._resize=c(this,this._resize);t.connect(this,"onSuspend",this,this._onSuspend);
t.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(a){var b=this._mapImages.push(a),b=b-1;a._idx=b;a._layer=this;this._div&&this._createImage(a,b)},removeImage:function(a){if(a){var b=a._idx,c=this._mapImages;if(c[b]===a){delete c[b];if(b=a._node)this._clearEvents(b),b.e_idx=b.e_bl=b.e_tr=b.e_l=b.e_t=b.e_w=b.e_h=null,b.parentNode&&(b.parentNode.removeChild(b),r.destroy(b));a._node=a._idx=a._layer=null}}},removeAllImages:function(){var a=this._mapImages,
b,c=a.length;for(b=0;b<c;b++){var d=a[b];d&&this.removeImage(d)}this._mapImages=[]},getImages:function(){var a=this._mapImages,b=[],c,d=a.length;for(c=0;c<d;c++)a[c]&&b.push(a[c]);return b},setOpacity:function(a){this.opacity!=a&&(this._opacityChanged(this.opacity=a),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(a){var b=this._div,c,d;if(b)if(!f("ie")||8<f("ie"))m.set(b,"opacity",a);else{d=b.childNodes;c=d.length;for(b=0;b<c;b++)m.set(d[b],"opacity",a)}},_createImage:function(a,
b){var c=r.create("img");m.set(c,{position:"absolute"});1>a.opacity?m.set(c,"opacity",a.opacity):8>=f("ie")&&m.set(c,"opacity",this.opacity);a.rotation&&!(9>f("ie"))&&m.set(c,k._css.names.transform,k._css.rotate(360-a.rotation));a._node=c;c.e_idx=b;c.e_layer=this;c.e_load=t.connect(c,"onload",B.prototype._imageLoaded);c.e_error=t.connect(c,"onerror",B.prototype._imageError);c.e_abort=t.connect(c,"onabort",B.prototype._imageError);c.src=a.href},_imageLoaded:function(a,b){var c=b||a.target||a.currentTarget,
d=c.e_layer,f=d._mapImages[c.e_idx],g=d._map;g&&(g.__zooming||g.__panning||!d._sr)?d._standby.push(c):(d._clearEvents(c),f&&f._node===c&&g&&d._attach(f))},_imageError:function(a){a=a.target||a.currentTarget;var b=a.e_layer,c=b._mapImages[a.e_idx];b._clearEvents(a);c&&(c._node=null)},_clearEvents:function(a){var b=t.disconnect;b(a.e_load);b(a.e_error);b(a.e_abort);a.e_load=a.e_error=a.e_abort=a.e_layer=null},_attach:function(a){var b=a.extent,f=b.spatialReference,g=this._sr,k=this._div,m=a._node,u=
new c({x:b.xmin,y:b.ymin,spatialReference:f}),b=new c({x:b.xmax,y:b.ymax,spatialReference:f});g.equals(f)||(g.isWebMercator()&&4326===f.wkid?(u=d.geographicToWebMercator(u),b=d.geographicToWebMercator(b)):f.isWebMercator()&&4326===g.wkid&&(u=d.webMercatorToGeographic(u),b=d.webMercatorToGeographic(b)));m.e_bl=u;m.e_tr=b;a.visible&&(this._setPos(m,k._left,k._top),(this._active||k).appendChild(m))},_setPos:function(a,b,c){var d=a.e_bl,f=a.e_tr,g=this._map,d=g.toScreen(d),f=g.toScreen(f);b=d.x-b;c=f.y-
c;var u=Math.abs(f.x-d.x),d=Math.abs(d.y-f.y),f={width:u+"px",height:d+"px"},r=this._mapImages[a.e_idx];"css-transforms"===g.navigationMode?f[k._css.names.transform]=k._css.translate(b,c)+(r.rotation?" "+k._css.rotate(360-r.rotation):""):(f.left=b+"px",f.top=c+"px");m.set(a,f);a.e_l=b;a.e_t=c;a.e_w=u;a.e_h=d},managedSuspension:!0,_setMap:function(b,c){this.inherited(arguments);var d=this._div=r.create("div",null,c),g=k._css.names,u={position:"absolute"},s=b.__visibleDelta;if(!f("ie")||8<f("ie"))u.opacity=
this.opacity;"css-transforms"===b.navigationMode?(u[g.transform]=k._css.translate(s.x,s.y),m.set(d,u),d._left=s.x,d._top=s.y,u={position:"absolute",width:b.width+"px",height:b.height+"px",overflow:"visible"},this._active=r.create("div",null,d),m.set(this._active,u),this._passive=r.create("div",null,d),m.set(this._passive,u)):(d._left=0,d._top=0,m.set(d,u));this._standby=[];g=this._mapImages;s=g.length;for(u=0;u<s;u++){var q=g[u];q._node||this._createImage(q,q._idx)}a.hide(d);return d},_unsetMap:function(a,
b){this._disconnect();var c=this._div;if(c){var d=this._mapImages,f,g=d.length;for(f=0;f<g;f++){var k=d[f];if(k){var m=k._node;m&&(this._clearEvents(m),m.e_idx=m.e_bl=m.e_tr=m.e_l=m.e_t=m.e_w=m.e_h=null);k._node=null}}b.removeChild(c);r.destroy(c)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();a.hide(this._div)},_onResume:function(b){b.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());
b=this._map;var c=this._div,d=b.__visibleDelta;"css-transforms"===b.navigationMode&&(c._left=d.x,c._top=d.y,m.set(c,k._css.names.transform,k._css.translate(c._left,c._top)));this._redraw("css-transforms"===b.navigationMode);this._connect(b);a.show(c)},_connect:function(a){if(!this._connections){var b=t.connect,c="css-transforms"===a.navigationMode;this._connections=[b(a,"onPanStart",this._panStart),b(a,"onPan",this._pan),b(a,"onExtentChange",this._extentChange),c&&b(a,"onZoomStart",this._zoomStart),
c?b(a,"onScale",this._scale):b(a,"onZoom",this._zoom),c&&b(a,"onResize",this._resize)]}},_disconnect:function(){this._connections&&(s.forEach(this._connections,t.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(a,b){var c=this._div;c._left=this._panL+b.x;c._top=this._panT+b.y;"css-transforms"===this._map.navigationMode?m.set(c,k._css.names.transform,k._css.translate(c._left,c._top)):m.set(c,{left:c._left+"px",top:c._top+
"px"})},_extentChange:function(a,b,c){c?this._redraw("css-transforms"===this._map.navigationMode):b&&this._pan(a,b);this._processStandbyList()},_processStandbyList:function(){var a,b=this._standby;if(b&&b.length)for(a=b.length-1;0<=a;a--)this._imageLoaded(null,b[a]),b.splice(a,1)},_redraw:function(a){if(a){a=this._passive;var b=k._css.names;m.set(a,b.transition,"none");this._moveImages(a,this._active);m.set(a,b.transform,"none")}a=this._active||this._div;var b=this._div._left,c=this._div._top,d,f=
a.childNodes.length,g;for(d=0;d<f;d++)g=a.childNodes[d],this._setPos(g,b,c)},_zoom:function(a,b,c){a=this._div;var d=a._left,f=a._top,g,k=a.childNodes.length,u;for(g=0;g<k;g++){u=a.childNodes[g];var r=u.e_w*b,s=u.e_h*b,q=(c.x-d-u.e_l)*(r-u.e_w)/u.e_w,t=(c.y-f-u.e_t)*(s-u.e_h)/u.e_h,q=isNaN(q)?0:q,t=isNaN(t)?0:t;m.set(u,{left:u.e_l-q+"px",top:u.e_t-t+"px",width:r+"px",height:s+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(a,b){var c=a.childNodes,
d;d=c.length;if(0<d)for(d-=1;0<=d;d--)b.appendChild(c[d])},_scale:function(a,b){var c=k._css.names,d=this._passive;m.set(d,c.transition,b?"none":c.transformName+" "+g.defaults.map.zoomDuration+"ms ease");k._css.matrix(a);m.set(d,c.transform,k._css.matrix(a))},_resize:function(a,b,c){m.set(this._active,{width:b+"px",height:c+"px"});m.set(this._passive,{width:b+"px",height:c+"px"})}});f("extend-esri")&&b.setObject("layers.MapImageLayer",B,k);return B})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(q,t,b,s,r,m,k,g,f){q=q(g,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(a){this.spatialReference=new m({wkid:102100});this.tileInfo=new f({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},
{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,
resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817},{level:19,scale:1128.497176,resolution:0.298582141647617}]});this.fullExtent=
new k({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.initialExtent=new k({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=a&&a.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=a?a.displayLevels:null;this.copyright=a&&a.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";
this.loaded=!0;this.onLoad(this);(a=a&&a.loadCallback)&&a(this)},getTileUrl:function(a,b,d){a=this.tileServers[b%this.serversLength]+"/"+a+"/"+d+"/"+b+".png";a=r.normalize(a);a=this.addTimestampToURL(a);return r.addProxy(a)}});b("extend-esri")&&t.setObject("layers.OpenStreetMapLayer",q,s);return q})},"esri/layers/VectorTileLayer":function(){(function(){var q=function(){var b;try{b=window.WebGLRenderingContext}catch(s){b=!1}var r;try{for(var m=document.createElement("canvas"),k=["webgl","experimental-webgl",
"webkit-3d","moz-webgl"],g=null,f=0;f<k.length;++f){try{g=m.getContext(k[f])}catch(a){}if(g)break}r=g}catch(c){r=!1}return!b||!r?!1:!0}(),t=["dojo/_base/lang","dojo/has","dojo/Deferred","../sniff","./layer"];q&&t.push("./VectorTileLayerImpl");define(t,function(b,s,r,m,k,g){k=g?g:k.createSubclass({declaredClass:"esri.layers.VectorTileLayer",constructor:function(){var f=new r;f.reject(Error("esri.layers.VectorTileLayer is not supported"));f.promise.otherwise(b.hitch(this,function(a){this._errorHandler(a)}))}});
k.ACCESS_TOKEN=null;k.supported=function(){return q};s("extend-esri")&&b.setObject("layers.VectorTileLayer",k,m);return k})})()},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?./PopupTemplate dojo/has!extend-esri?./PopupRenderer".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M){q=q([G,I,g],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(b,f){this.initialize();t.mixin(this,b);this.domNode=a.byId(f);var g=this._nls=t.mixin({},M.widgets.popup),k=this.domNode;d.add(k,"esriPopup");(this._isRTL=!B.isBodyLtr())&&
x.set(k,"direction","rtl");c.set(k,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+g.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+g.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+g.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
g.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+g.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d"+g.NLS_zoomTo+" class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+g.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=r.query(".sizer",k);g=r.query(".titlePane",k)[0];a.setSelectable(g,!1);this._title=r.query(".title",g)[0];this._prevFeatureButton=r.query(".prev",g)[0];this._nextFeatureButton=r.query(".next",g)[0];this._maxButton=r.query(".maximize",g)[0];this._spinner=r.query(".spinner",g)[0];this._contentPane=r.query(".contentPane",k)[0];this._positioner=r.query(".esriPopupWrapper",k)[0];this._pointer=r.query(".pointer",k)[0];this._outerPointer=r.query(".outerPointer",k)[0];this._actionList=r.query(".actionsPane .actionList",
k)[0];this._eventConnections=[s.connect(r.query(".close",g)[0],"onclick",this,this.hide),s.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),s.connect(this._nextFeatureButton,"onclick",this,this.selectNext),s.connect(this._maxButton,"onclick",this,this._toggleSize),s.connect(r.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),s.connect(this,"onClearFeatures",this,this._featuresCleared),s.connect(this,"onSelectionChange",this,this._featureSelected),s.connect(this,
"onDfdComplete",this,this._updateUI)];m("esri-touch")&&(k=D.setScrollable(this._contentPane),this._eventConnections.push(k[0],k[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(a){this.inherited(arguments);u.place(this.domNode,a.root);this.highlight&&this.enableHighlight(a);this._maxHeight=x.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(a){if(this.popupWindow){if(!E.isDefined(a)||
""===a)a="\x26nbsp;";this.destroyDijits(this._title);this.place(a,this._title);this.isShowing&&(this.startupDijits(this._title),this.reposition())}},setContent:function(a){if(this.popupWindow){if(!E.isDefined(a)||""===a)a="\x26nbsp;";this.destroyDijits(this._contentPane);this.place(a,this._contentPane);this.isShowing&&(this.startupDijits(this._contentPane),this.reposition())}},show:function(a,b){if(this.popupWindow)if(this._delayHide=!1,a){var c=this.map,d;a.spatialReference?(this.location=a,d=c.toScreen(a)):
(this.location=c.toMap(a),d=a);var f=c._getFrameWidth();if(-1!==f&&(d.x%=f,0>d.x&&(d.x+=f),c.width>f))for(c=(c.width-f)/2;d.x<c;)d.x+=f;this._maximized?this.restore():this._setPosition(d);b&&b.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this.startupDijits(this._contentPane),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),
this._unfollowMap(),this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(a,b){this.popupWindow&&(this._sizers.style({width:a+"px"}),x.set(this._contentPane,"maxHeight",b+"px"),this._maxHeight=b,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&(this.location&&!this._maximized&&this.isShowing)&&this._setPosition(this.map.toScreen(this.location))},maximize:function(){var a=this.map;if(a&&!this._maximized&&this.popupWindow){this._maximized=
!0;var b=this._maxButton;d.remove(b,"maximize");d.add(b,"restore");c.set(b,"title",this._nls.NLS_restore);var b=this.marginLeft,f=this.marginTop,g=a.width-2*b,a=a.height-2*f;x.set(this.domNode,{left:this._isRTL?null:b+"px",right:this._isRTL?b+"px":null,top:f+"px",bottom:null});x.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=x.get(this._sizers[0],"width");this._savedHeight=x.get(this._contentPane,"maxHeight");this._sizers.style({width:g+"px"});x.set(this._contentPane,
{maxHeight:a-65+"px",height:a-65+"px"});this._showPointer("");this._unfollowMap();d.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&this._maximized&&this.popupWindow){this._maximized=!1;var a=this._maxButton;d.remove(a,"restore");d.add(a,"maximize");c.set(a,"title",this._nls.NLS_maximize);x.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();
d.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);this.destroyDijits(this._content);b.forEach(this._eventConnections,s.disconnect);u.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=
this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(){this.inherited(arguments);this._updateUI()},postscript:null,_highlightSetter:function(a){var b=this.highlight,c=this.map;this.highlight=a;if(c&&a!==b)if(a){if(this.enableHighlight(c),a=this.features&&this.features[this.selectedIndex])this.updateHighlight(c,a),this.showHighlight()}else this.disableHighlight(c)},
_pagingControlsSetter:function(a){var b=this.pagingControls,c=this.map;this.pagingControls=a;c&&a!==b&&this._updatePagingControls()},_pagingInfoSetter:function(a){var b=this.pagingInfo,c=this.map;this.pagingInfo=a;c&&(a!==b&&this.features&&this.features.length)&&this._updatePagingInfo()},_popupWindowSetter:function(a){var b=this.popupWindow,c=this.map;this.popupWindow=a;c&&a!==b&&(a?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(a){var b=this.anchor;
this.anchor=a;this.map&&a!==b&&this.reposition()},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var a=this.selectedIndex;if(0<=a){var b=this.features[a].getContent(),c;!this.titleInBody&&b&&t.isString(b.id)&&(c=y.byId(b.id))&&(c.set&&/_PopupRenderer/.test(c.declaredClass))&&c.set("showTitle",!1);this.setContent(b);
this.updateHighlight(this.map,this.features[a]);this.showHighlight()}},_toggleVisibility:function(a){this._setVisibility(a);this.isShowing=a},_setVisibility:function(a){d.toggle(this.domNode,"esriPopupVisible",a);d.toggle(this.domNode,"esriPopupHidden",!a)},_waitAndHide:function(a){var b=this;this._delayHide=!0;setTimeout(function(){b._delayHide&&(b._delayHide=!1,b.hide())},a)},_followMap:function(){this._unfollowMap();var a=this.map;this._handles=[s.connect(a,"onPanStart",this,this._onPanStart),
s.connect(a,"onPan",this,this._onPan),s.connect(a,"onZoomStart",this,this._onZoomStart),s.connect(a,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var a=this._handles;a&&(b.forEach(a,s.disconnect),this._handles=null)},_onPanStart:function(){var a=this.domNode.style;this._panOrigin={left:a.left,top:a.top,right:a.right,bottom:a.bottom}},_onPan:function(a,b){var c=this._panOrigin,d=b.x,f=b.y,g=c.left,k=c.top,m=c.right,c=c.bottom;g&&(g=parseFloat(g)+d+"px");k&&(k=parseFloat(k)+
f+"px");m&&(m=parseFloat(m)-d+"px");c&&(c=parseFloat(c)-f+"px");x.set(this.domNode,{left:g,top:k,right:m,bottom:c})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(a,b,c){c&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_setPosition:function(a){var b=a.x,c=a.y;a=this.offsetX||0;var d=this.offsetY||0,f=0,g=0,m=B.position(this.map.container,!0),u=m.w,
r=m.h,v="Left",s="bottom",C=B.getContentBox(this._positioner),l=C.w/2,e=C.h/2,h=x.get(this._sizers[0],"height")+this._maxHeight+x.get(this._sizers[2],"height"),n=h/2,z=0,F=0,N=b,T=c,W=this.anchor.toLowerCase();if("auto"===W){if(W=k.getBox)W=W(),z=Math.max(W.l,m.x),u=Math.min(W.l+W.w,m.x+m.w),F=Math.max(W.t,m.y),r=Math.min(W.t+W.h,m.y+m.h),N+=m.x,T+=m.y;m=T-F>=h;h=r-T>=h;W=u-N>=C.w;C=N-z>=C.w;T-F>n&&r-T>=n&&(W?(s="",v="Left"):C&&(s="",v="Right"));v&&s&&(N-z>l&&u-N>=l)&&(m?(v="",s="bottom"):h&&(v="",
s="top"));v&&s&&(W&&m?(v="Left",s="bottom"):W&&h?(v="Left",s="top"):C&&h?(v="Right",s="top"):C&&m&&(v="Right",s="bottom"))}else s=v="",-1!==W.indexOf("top")?s="bottom":-1!==W.indexOf("bottom")&&(s="top"),-1!==W.indexOf("left")?v="Right":-1!==W.indexOf("right")&&(v="Left");n=s+v;switch(n){case "top":case "bottom":g=14;break;case "Left":case "Right":f=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":g=14,f=-16}x.set(this.domNode,{left:b+"px",top:c+"px",right:null,bottom:null});
b={left:null,right:null,top:null,bottom:null};v?b[v.toLowerCase()]=f+a+"px":b.left=-l+"px";s?b[s]=g+d+"px":b.top=-e+"px";x.set(this._positioner,b);this._showPointer(n)},_showPointer:function(a){d.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));d.remove(this._outerPointer,["right","left","hidden"]);"Right"===a||"Left"===a?(a=a.toLowerCase(),d.add(this._outerPointer,a)):d.add(this._pointer,a)},_setPagerCallbacks:function(a,b,c){if(this.pagingControls&&
!(a===this&&(!this._pagerScope||this._pagerScope===this))&&a!==this._pagerScope){this._pagerScope=a;a===this&&(b=this.selectPrevious,c=this.selectNext);var d=this._eventConnections;s.disconnect(d[1]);s.disconnect(d[2]);b&&(d[1]=s.connect(this._prevFeatureButton,"onclick",a,b));c&&(d[2]=s.connect(this._nextFeatureButton,"onclick",a,c))}},_getLocation:function(a){var c=this.map,d,f,g=0,k;if(a=a&&a.geometry)switch(a.type){case "point":d=a;break;case "multipoint":d=a.getPoint(0);f=a.getExtent();break;
case "polyline":d=a.getPoint(0,0);f=a.getExtent();-1!==c._getFrameWidth()&&(b.forEach(a.paths,function(a){a=(new A({paths:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),b=d>b?d:b;b>g&&(g=b,k=a)}),k.spatialReference=f.spatialReference,f=k);break;case "polygon":d=a.getPoint(0,0),f=a.getExtent(),-1!==c._getFrameWidth()&&(b.forEach(a.rings,function(a){a=(new H({rings:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),
b=d>b?d:b;b>g&&(g=b,k=a)}),k.spatialReference=f.spatialReference,f=k)}return[d,f]},_zoomToFeature:function(a){a.preventDefault();var b=this.features,c=this.selectedIndex;a=this.map;if(b){c=this._getLocation(b[c]);b=c[0];c=c[1];b||(b=this.location);if(!c||!c.intersects(this.location))this.location=b;if(c&&c.getWidth()&&c.getHeight())a.setExtent(c,!0);else{var d=a.getNumLevels(),c=a.getLevel(),f=a.getMaxZoom(),g=this.zoomFactor||1;0<d?c!==f&&(d=c+g,d>f&&(d=f),a.navigationManager._wheelZoom({value:d-
c,mapPoint:b},!0)):a.navigationManager._wheelZoom({value:2*(1/Math.pow(2,g)),mapPoint:b},!0)}}},_updatePagingControls:function(){var a=this._prevFeatureButton,b=this._nextFeatureButton,c=this.selectedIndex,f=this.features?this.features.length:0;this.pagingControls&&1<f?(0===c?d.add(a,"hidden"):d.remove(a,"hidden"),c===f-1?d.add(b,"hidden"):d.remove(b,"hidden")):(d.add(a,"hidden"),d.add(b,"hidden"))},_updatePagingInfo:function(){var a=this.features?this.features.length:0,b=this._nls,c="\x26nbsp;";
this.pagingInfo&&(1<a&&b.NLS_pagingInfo)&&(c=E.substitute({index:this.selectedIndex+1,total:a},b.NLS_pagingInfo));if(a&&(b=this.getSelectedFeature(),a=b.getInfoTemplate(),b=b.getTitle(),(!a||/esri\.InfoTemplate/.test(a.declaredClass)||!this.titleInBody)&&b))c=b+("\x26nbsp;"===c?"":" "+c);this.setTitle(c)},_updateUI:function(){if(this.popupWindow){var a=this.features,b=this.deferreds,c=a?a.length:0,f=this._spinner,g=this._actionList,k=this._nls;this._updatePagingControls();this._updatePagingInfo();
c?d.remove(g,"hidden"):d.add(g,"hidden");b&&b.length?a?d.remove(f,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+k.NLS_searching+"...\x3c/div\x3e"):(d.add(f,"hidden"),c||(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+k.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay)))}}});m("extend-esri")&&t.setObject("dijit.Popup",q,w);return q})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c){q=q(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var a=t.hitch;this.__set_title=a(this,this.__set_title);this.__err_title=a(this,this.__err_title);this.__set_content=a(this,this.__set_content);this.__err_content=a(this,this.__err_content)},setMap:function(a){this.map=a},unsetMap:function(a){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},
place:function(b,c){a.isDefined(b)?t.isObject(b)?m.place(b,c,"only"):c.innerHTML=b:c.innerHTML=""},startupDijits:function(a){this._processDijits(a)},destroyDijits:function(a){this._processDijits(a,!0)},_processDijits:function(a,c){if(a&&1===a.children.length){var f=a.children[0];if(f){var k=g.byNode(f),f=k?[k]:g.findWidgets(f);b.forEach(f,function(a){if(c){if(a._started&&!a._destroyed)try{a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy()}catch(b){}}else if(!a._started)try{a.startup()}catch(d){}})}}},
__registerMapListeners:function(){this.__unregisterMapListeners();var a=this.map;this.__handles=[s.connect(a,"onPan",this,this.__onMapPan),s.connect(a,"onZoomStart",this,this.__onMapZmStart),s.connect(a,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var a=this.__handles;a&&(b.forEach(a,s.disconnect,s),this.__handles=null)},__onMapPan:function(a,b){this.move(b,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new c(this.coords));this.hide(null,
!0)},__onMapExtChg:function(a,b,c){a=this.map;var f=this.mapCoords;f?this.show(f,null,!0):(b=c?a.toScreen(this.__mcoords):this.coords.offset(b&&b.x||0,b&&b.y||0),this.show(b,null,!0))},__setValue:function(b,c){this[b].innerHTML="";var f="_dfd"+b,g=this[f];g&&-1===g.fired&&(g.cancel(),this[f]=null);a.isDefined(c)&&(c instanceof r?(this[f]=c,c.addCallbacks(this["__set"+b],this["__err"+b])):this.__render(b,c))},__set_title:function(a){this._dfd_title=null;this.__render("_title",a)},__err_title:function(a){this._dfd_title=
null},__set_content:function(a){this._dfd_content=null;this.__render("_content",a)},__err_content:function(a){this._dfd_content=null},__render:function(a,b){var c=this[a];this.place(b,c);this.isShowing&&(this.startupDijits(c),"_title"===a&&this._adjustContentArea&&this._adjustContentArea())}});k("extend-esri")&&(f.InfoWindowBase=q);return q})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented dojo/has!extend-esri?./PopupInfo".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E){function D(a){return"sizeInfo"===a.type}q=q(E,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",t.hitch(this,this._resetUpdateEndListeners));this.on("dfd-complete",
t.hitch(this,this._processFeatures));this.on("set-features",t.hitch(this,this._processFeatures))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners()},setFeatures:function(a){if(a&&a.length){this.clearFeatures();var c,d;a[0]instanceof r?d=a:c=a;c?this._updateFeatures(null,c):(this.deferreds=d,d=d.slice(0),b.forEach(d,function(a){a.addBoth(t.hitch(this,this._updateFeatures,a))},this))}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=
0;var a=this.selectedIndex;this.selectedIndex=-1;if(-1<a)this.onSelectionChange();this.onClearFeatures()},getSelectedFeature:function(){var a=this.features;if(a)return a[this.selectedIndex]},select:function(a){0>a||a>=this.count||(this.selectedIndex=a,this.onSelectionChange())},enableHighlight:function(a){this._highlighted=a.graphics.add(new g(new f(0,0,a.spatialReference)));this._highlighted.hide();this.markerSymbol||(a=this.markerSymbol=new u,a.setStyle(u.STYLE_TARGET),a._setDim(16,16,0),a.setOutline(new x(B.STYLE_SOLID,
new s([0,255,255]),2,x.CAP_ROUND,x.JOIN_ROUND)),a.setColor(new s([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new B(B.STYLE_SOLID,new s([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new y(y.STYLE_NULL,new B(B.STYLE_SOLID,new s([0,255,255]),2),new s([0,0,0,0])))},disableHighlight:function(a){var b=this._highlighted;b&&(b.hide(),a.graphics.remove(b),delete this._highlighted);this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var a=this.features&&this.features[this.selectedIndex];
this._highlighted&&(a&&a.geometry)&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},updateHighlight:function(b,c){var d=c.geometry,f=this._highlighted;if(!d||!f)f&&f.hide();else{f.hide();!f._graphicsLayer&&b&&b.graphics.add(f);f.setGeometry(a.fromJson(d.toJson()));var g;switch(d.type){case "point":case "multipoint":var k=c.getLayer(),d=c.symbol||k&&k._getSymbol(c);if(k&&d){var m,u,r=0,s=0,q=0;g=!c.symbol?k._getRenderer(c):null;if(k=this._getSizeInfo(g))m=
u=g.getSize(c,{sizeInfo:k,shape:d.style,resolution:b&&b.getResolutionInMeters&&b.getResolutionInMeters()});else switch(d.type){case "simplemarkersymbol":m=u=d.size||0;break;case "picturemarkersymbol":m=d.width||0,u=d.height||0}r=d.xoffset||0;s=d.yoffset||0;q=d.angle||0;g=this.markerSymbol;g.setOffset(0,0);g.setAngle(0);m&&u&&g._setDim(m+1,u+1,0);g.setOffset(r,s);g.setAngle(q)}break;case "polyline":g=this.lineSymbol;break;case "polygon":g=this.fillSymbol}f.setSymbol(g)}},showClosestFirst:function(a){var b=
this.features;if(b&&b.length){if(1<b.length){var f,g=Infinity,k=-1,m,u=c.getLength,r,s=a.spatialReference,q,w;a=a.normalize();for(f=b.length-1;0<=f;f--)if(m=b[f].geometry){q=m.spatialReference;r=0;try{w="point"===m.type?m:m.getExtent().getCenter(),w=w.normalize(),s&&(q&&!s.equals(q)&&s._canProject(q))&&(w=s.isWebMercator()?d.geographicToWebMercator(w):d.webMercatorToGeographic(w)),r=u(a,w)}catch(t){}0<r&&r<g&&(g=r,k=f)}0<k&&(b.splice(0,0,b.splice(k,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=
a)},_unbind:function(a){a=b.indexOf(this.deferreds,a);if(-1!==a)return this.deferreds.splice(a,1),!this.deferreds.length?(this.deferreds=null,2):1},_fireComplete:function(a){var b=this._marked;b&&(this._marked=null,this.showClosestFirst(b));this.onDfdComplete(a)},_updateFeatures:function(a,c){if(a){if(this.deferreds){var d=this._unbind(a);if(d)if(c&&c instanceof Error){if(this._fireComplete(c),2===d)this.onSetFeatures()}else if(c&&c.length)if(this.features){var f=b.filter(c,function(a){return-1===
b.indexOf(this.features,a)},this);this.features=this.features.concat(f);this.count=this.features.length;this._fireComplete();if(2===d)this.onSetFeatures()}else{this.features=c;this.count=c.length;this.selectedIndex=0;this._fireComplete();if(2===d)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),2===d)this.onSetFeatures()}}else this.features=c,this.count=c.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(a){return a?a.sizeInfo||b.filter(a.visualVariables,
D)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};b.forEach(this._updateEndHandles,function(a){a.remove()});this._updateEndHandles=[]},_processFeatures:function(){b.forEach(this.features,function(a){if((a=a.getLayer())&&!this._featureLayers[a.id]&&(1===a.currentMode||0===a.currentMode&&6===a.mode)&&a.objectIdField&&a.hasXYFootprint&&a.queryFeatures&&("esriGeometryPolygon"===a.geometryType||"esriGeometryPolyline"===a.geometryType||a.hasXYFootprint()))this._featureLayers[a.id]=
a,a=a.on("update-end",t.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(a)},this)},_fLyrUpdateEndHandler:function(a){if(!a.error){var c=this,d=a.target,f=d.getSelectedFeatures(),g=0===d.currentMode&&6===d.mode,k={},m=[];b.forEach(this.features,function(a){if(a.getLayer()===d){var b=a.attributes[d.objectIdField];k[b]=a;m.push(b)}});m.length&&(a=new w,a.objectIds=m,d.queryFeatures(a,function(a){b.forEach(a.features,function(a){var c=k[a.attributes[d.objectIdField]],m=!1;c.geometry!==
a.geometry?(c.setGeometry(a.geometry),m=!0):g&&(f&&-1!==b.indexOf(f,a))&&(m=!0);m&&(this._highlighted&&c===this.getSelectedFeature())&&this._highlighted.setGeometry(a.geometry)},c)}))}}});m("extend-esri")&&(k.PopupBase=q);return q})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "),
function(q,t,b,s,r,m,k,g){var f=q(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=f.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,resultType:null,sqlFormat:null,quantizationParameters:null,
_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(a){var c={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},d=a&&a.geometry||this.geometry,g=this.objectIds,
m=this.outFields,r=this.outSpatialReference,q=this.groupByFieldsForStatistics,w=this.orderByFields,t=this.outStatistics;a=this.distance;d&&(c.geometry=d,c.geometryType=k.getJsonType(d),c.inSR=d.spatialReference.wkid||s.toJson(d.spatialReference.toJson()));g&&(c.objectIds=g.join(","));m&&(c.outFields=m.join(","));this.returnDistinctValues&&(c.returnDistinctValues=!0);q&&(c.groupByFieldsForStatistics=q.join(","));w&&(c.orderByFields=w.join(","));if(t){var D=[];b.forEach(t,function(a){D.push(a.toJson())});
c.outStatistics=s.toJson(D)}r?c.outSR=r.wkid||s.toJson(r.toJson()):d&&(c.outSR=d.spatialReference.wkid||s.toJson(d.spatialReference.toJson()));d=this.timeExtent;c.time=d?d.toJson().join(","):null;if((d=this.relationParam)&&this.spatialRelationship===f.SPATIAL_REL_RELATION)c.relationParam=d;a&&(c.distance=this.distance,this.hasOwnProperty("units")?c.units=this._units[this.units]||this._units.meters:(console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),c.units=this._units.meters));
this.hasOwnProperty("start")&&(c.resultOffset=this.start,c.resultRecordCount=10,""===c.where&&(c.where="1\x3d1"));this.hasOwnProperty("num")&&(c.resultRecordCount=this.num);c.resultType=this.resultType;c.pixelSize=this.pixelSize?s.toJson(this.pixelSize.toJson()):null;c.multipatchOption=this.multipatchOption;this.quantizationParameters&&(c.quantizationParameters=s.toJson(this.quantizationParameters));c._ts=this._ts;return c}});t.mixin(f,g);r("extend-esri")&&t.setObject("tasks.Query",f,m);return f})},
"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(q,t,b){var s={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",
SPATIAL_REL_RELATION:"esriSpatialRelRelation"};t("extend-esri")&&q.setObject("tasks._SpatialRelationship",s,b);return s})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(q){return{add:function(t,b){t.popupManager||(t.popupManager=new q(b),t.popupManager.setMap(t))},remove:function(q){var b=q.popupManager;b&&(b.unsetMap(),q.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/has dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x){var y;g=g(B,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(b){this._mapClickHandler=a.hitch(this,this._mapClickHandler)},setMap:function(a){if(this.map)if(a!==this.map)this.unsetMap();else return;this.map=a;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(a){var b;
if(a&&(b=a.getLayer()))if(a=b.id,this._featureLayersCache[a]){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.getLayer(a))}return b},_enabledSetter:function(a){this.enabled=a;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(a){var b=this.map.infoWindow,c=a.graphic;b&&this.map.loaded&&
(b.clearFeatures&&b.setFeatures?this._showPopup(a):c&&c.getInfoTemplate()&&this._showInfoWindow(c,a.mapPoint))},_showPopup:function(a){var b=this.map,c=b.infoWindow,d=this,g=[],m=[b.graphics].concat(k.map(b.graphicsLayerIds,b.getLayer,b));k.forEach(m,function(a){a&&(a.loaded&&a.infoTemplate&&!a.suspended)&&g.push(a)});var u=[];k.forEach(b.layerIds,function(a){(a=b.getLayer(a))&&(a.loaded&&!a.suspended)&&(d._isImageServiceLayer(a)&&a.infoTemplate?g.push(a):"esri.layers.WMSLayer"===a.declaredClass&&
a.getFeatureInfoURL?g.push(a):("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass)&&a.infoTemplates&&u.push(a))});this._getSubLayerFeatureLayers(u).then(function(m){g=g.concat(m);m=null;a.graphic&&(a.graphic.getInfoTemplate()&&!d._isImageServiceLayer(a.graphic._layer))&&(m=a.graphic);if(g.length||m){var u=d._calculateClickTolerance(g),s=a.screenPoint,y=b.toMap(new t(s.x-u,s.y+u)),u=b.toMap(new t(s.x+u,s.y-u)),x=new q(y.x,y.y,u.x,
u.y,b.spatialReference);if(x=x.intersects(b.extent)){var B=new r,I=!!m,G=!0,y=k.map(g,function(c){var g;B.timeExtent=c.useMapTime?b.timeExtent:null;if(d._isImageServiceLayer(c))B.geometry=a.mapPoint,G=!1,g=c.queryVisibleRasters(B,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),g.addCallback(function(){var a=c.getVisibleRasters();I=I||0<a.length;return a});else if("esri.layers.WMSLayer"===c.declaredClass){g=new f;var v=c._getPopupGraphic(b,a.screenPoint);v?(g.resolve([v]),I=!0):
g.resolve([])}else d._featureLayersCache[c.id]||"function"===typeof c.queryFeatures&&(0===c.currentMode||1===c.currentMode)?(B.geometry=x,g=c.queryFeatures(B),g.addCallback(function(a){a=a.features;a=k.filter(a,function(a){return a.visible});I=I||0<a.length;return a})):(g=new f,v=k.filter(c.graphics,function(a){return a&&a.visible&&x.intersects(a.geometry)}),I=I||0<v.length,g.resolve(v));return g});m&&(u=new f,u.resolve([m]),y.unshift(u));!k.some(y,function(a){return!a.isFulfilled()})&&!I?(c.hide(),
c.clearFeatures()):(c.setFeatures(y),c.show(a.mapPoint,{closestFirst:G}))}}})},_getSubLayerFeatureLayers:function(a,b){var c=b||new f,g=[],m=a.length,r=Math.floor(this.map.extent.getWidth()/this.map.width),q=this.map.getScale(),t=!1,B=this,S=0;a:for(;S<m;S++){var L=a[S],Q=L.dynamicLayerInfos||L.layerInfos;if(Q){var R=null;if(L._params&&(L._params.layers||L._params.dynamicLayers))R=L.visibleLayers;for(var R=s._getVisibleLayers(Q,R),X=s._getLayersForScale(q,Q),V=Q.length,O=0;O<V;O++){var U=Q[O],v=U.id,
K=L.infoTemplates[v];if(!U.subLayerIds&&K&&K.infoTemplate&&-1<k.indexOf(R,v)&&-1<k.indexOf(X,v)){if(!y){t=!0;break a}var C=L.id+"_"+v,l=this._featureLayersCache[C];if(!l||!l.loadError)l||((l=K.layerUrl)||(l=U.source?this._getLayerUrl(L.url,"/dynamicLayer"):this._getLayerUrl(L.url,v)),l=new y(l,{id:C,drawMode:!1,mode:y.MODE_SELECTION,outFields:this._getOutFields(K.infoTemplate),resourceInfo:K.resourceInfo,source:U.source}),this._featureLayersCache[C]=l),l.setDefinitionExpression(L.layerDefinitions&&
L.layerDefinitions[v]),l.setGDBVersion(L.gdbVersion),l.setInfoTemplate(K.infoTemplate),l.setMaxAllowableOffset(r),l.setUseMapTime(!!L.useMapTime),L.layerDrawingOptions&&(L.layerDrawingOptions[v]&&L.layerDrawingOptions[v].renderer)&&l.setRenderer(L.layerDrawingOptions[v].renderer),g.push(l)}}}}if(t){var e=new f;x(["./layers/FeatureLayer"],function(a){y=a;e.resolve()});e.then(function(){B._getSubLayerFeatureLayers(a,c)})}else{var h=[];k.forEach(g,function(e){if(!e.loaded){var a=new f;d.once(e,"load, error",
function(){a.resolve()});h.push(a.promise)}});h.length?u(h).then(function(){g=k.filter(g,function(e){return!e.loadError&&e.isVisibleAtScale(q)});c.resolve(g)}):(g=k.filter(g,function(e){return e.isVisibleAtScale(q)}),c.resolve(g))}return c.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;a.info&&"esri.dijit.PopupTemplate"===a.declaredClass?(b=[],k.forEach(a.info.fieldInfos,function(a){var c=a.fieldName&&
a.fieldName.toLowerCase();c&&("shape"!==c&&0!==c.indexOf("relationships/"))&&b.push(a.fieldName)})):b=["*"];return b},_calculateClickTolerance:function(a){var b=6,c,d;k.forEach(a,function(a){if(c=a.renderer)"esri.renderer.SimpleRenderer"===c.declaredClass?((d=c.symbol)&&d.xoffset&&(b=Math.max(b,Math.abs(d.xoffset))),d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))):("esri.renderer.UniqueValueRenderer"===c.declaredClass||"esri.renderer.ClassBreaksRenderer"===c.declaredClass)&&k.forEach(c.infos,function(a){(d=
a.symbol)&&d.xoffset&&(b=Math.max(b,Math.abs(d.xoffset)));d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))})});return b},_showInfoWindow:function(b,c){var d=this.map.infoWindow,f=b.geometry,f=f&&"point"===f.type?f:c,g=b.getContent();d.setTitle(b.getTitle());if(g&&a.isString(g.id)){var k=m.byId(g.id);k&&(k.set&&/_PopupRenderer/.test(k.declaredClass))&&k.set("showTitle",!1)}d.setContent(g);d.show(f)},_isImageServiceLayer:function(a){return"esri.layers.ArcGISImageServiceLayer"===a.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===
a.declaredClass}});c("extend-esri")&&(b.PopupManager=g);return g})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(q,t,b,s,r){var m={_serializeLayerDefinitions:function(k){var g=[],f=!1,a=/[:;]/;if(k&&(t.forEach(k,function(b,c){b&&(g.push([c,b]),!f&&a.test(b)&&(f=!0))}),0<g.length)){var c;f?(c={},t.forEach(g,function(a){c[a[0]]=a[1]}),c=b.toJson(c)):(c=[],t.forEach(g,function(a){c.push(a[0]+":"+a[1])}),c=c.join(";"));return c}return null},
_serializeTimeOptions:function(k,g){if(k){var f=[];t.forEach(k,function(a,c){if(a){var d=a.toJson();g&&-1!==t.indexOf(g,c)&&(d.useTime=!1);f.push('"'+c+'":'+b.toJson(d))}});if(f.length)return"{"+f.join(",")+"}"}},_getVisibleLayers:function(b,g){var f=[],a,c,d;if(!b)return f;if(g){f=g.concat();for(d=0;d<b.length;d++)a=b[d],c=t.indexOf(b,a.id),a.subLayerIds&&-1<c&&(f.splice(c,1),f=f.concat(a.subLayerIds))}else f=this._getDefaultVisibleLayers(b);return f},_getDefaultVisibleLayers:function(b){var g=[],
f;if(!b)return g;for(f=0;f<b.length;f++)0<=b[f].parentLayerId&&-1===t.indexOf(g,b[f].parentLayerId)&&t.some(b,function(a){return a.id===b[f].parentLayerId})||b[f].defaultVisibility&&g.push(b[f].id);return g},_getLayersForScale:function(b,g){var f=[];if(0<b&&g){var a;for(a=0;a<g.length;a++)if(!(0<=g[a].parentLayerId&&-1===t.indexOf(f,g[a].parentLayerId)&&t.some(g,function(b){return b.id===g[a].parentLayerId}))&&0<=g[a].id){var c=!0,d=g[a].maxScale,m=g[a].minScale;if(0<d||0<m)0<d&&0<m?c=d<=b&&b<=m:
0<d?c=d<=b:0<m&&(c=b<=m);c&&f.push(g[a].id)}}return f}};s("extend-esri")&&q.mixin(r,m);return m})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(q,t,b){var s=q.some;return function(r){var m,k;r instanceof Array?k=r:r&&"object"===typeof r&&(m=r);var g,f=[];if(m){k=[];for(var a in m)Object.hasOwnProperty.call(m,a)&&(f.push(a),k.push(m[a]));g={}}else k&&(g=[]);if(!k||!k.length)return(new t).resolve(g);var c=new t;c.promise.always(function(){g=f=null});var d=
k.length;s(k,function(a,k){m||f.push(k);b(a,function(a){c.isFulfilled()||(g[f[k]]=a,0===--d&&c.resolve(g))},c.reject);return c.isFulfilled()});return c.promise}})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I){var M=s.connect,J=s.disconnect,S=B("chrome"),L=B("safari"),Q=[k.NUMPAD_PLUS,61,187,k.NUMPAD_MINUS,173,189,k.UP_ARROW,k.NUMPAD_8,k.RIGHT_ARROW,k.NUMPAD_6,k.DOWN_ARROW,k.NUMPAD_2,k.LEFT_ARROW,k.NUMPAD_4,k.PAGE_UP,k.NUMPAD_9,k.PAGE_DOWN,k.NUMPAD_3,k.END,k.NUMPAD_1,k.HOME,k.NUMPAD_7];q=q(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(b,f){this.map=b;t.mixin(this,f);var g=b.__container;B("esri-pointer")?(this.pointerEvents=
new d(g,{map:b}),this.eventModel="pointer"):B("esri-touch")?(B("ios")||(this.mouseEvents=new a(g,{map:b})),this.touchEvents=new c(g,{map:b,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new a(g,{map:b}),this.eventModel="mouse");this._zoomRect=new w(null,new I(u.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=t.hitch(this,this._adjustPinch);this._adjustPinchEnd=t.hitch(this,this._adjustPinchEnd)},_panInit:function(a){var b=this.mouseEvents;if(m.isLeft(a)&&
(this.map.isPan&&!a.shiftKey)&&(this._dragOrigin=new D(0,0),t.mixin(this._dragOrigin,a.screenPoint),J(this._panStartHandle),J(this._panHandle),J(this._panEndHandle),this._panStartHandle=M(b,"onMouseDragStart",this,this._panStart),this._panHandle=M(b,"onMouseDrag",this,this._pan),this._panEndHandle=M(b,"onMouseUp",this,this._panEnd),S||L))a.preventDefault(),g.curNode&&g.curNode.blur()},_panStart:function(a){this.map.setCursor("move");this.map.__panStart(a.screenPoint.x,a.screenPoint.y)},_pan:function(a){this.map.__pan(a.screenPoint.x-
this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)},_panEnd:function(a){J(this._panStartHandle);J(this._panHandle);J(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var b=this.map;b.__panning&&(b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y),b.resetMapCursor())},_zoomInit:function(a){var b=this.map,c=this.pointerEvents||this.mouseEvents;if((m.isLeft(a)||a.pointerType)&&b.isRubberBandZoom&&a.shiftKey)b.setCursor("crosshair"),this._dragOrigin=
t.mixin({},a.screenPoint),this._zoomDir=a.ctrlKey||a.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=M(c,"onSwipeMove",this,this._zoom),this._zoomEndHandle=M(c,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=M(c,"onMouseDrag",this,this._zoom),this._zoomEndHandle=M(c,"onMouseUp",this,this._zoomEnd)),S&&a.preventDefault()},_zoom:function(a){var b=this.map,c=this._normalizeRect(a).offset(b.__visibleRect.x,b.__visibleRect.y);a=b.graphics;var d=this._zoomRect;d.geometry||b.setCursor("crosshair");
d.geometry&&a.remove(d,!0);var f=b.toMap(new D(c.x,c.y)),c=b.toMap(new D(c.x+c.width,c.y+c.height)),c=new H(f.x,f.y,c.x-f.x,f.y-c.y,b.spatialReference);c._originOnly=!0;d.setGeometry(c);a.add(d,!0)},_zoomEnd:function(a){var b=this._zoomRect,c=this.map,d=c.extent,f=c.spatialReference;J(this._zoomHandle);J(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(c._canZoom(this._zoomDir)&&b.getDojoShape()){c.graphics.remove(b);b.geometry=null;a=this._normalizeRect(a);a.x+=c.__visibleRect.x;
a.y+=c.__visibleRect.y;if(-1===this._zoomDir){var v=d.getWidth();a=(v*c.width/a.width-v)/2;f=new A(d.xmin-a,d.ymin-a,d.xmax+a,d.ymax+a,f)}else d=c.toMap({x:a.x,y:a.y+a.height}),a=c.toMap({x:a.x+a.width,y:a.y}),f=new A(d.x,d.y,a.x,a.y,f);c._extentUtil(null,null,f)}b.getDojoShape()&&c.graphics.remove(b,!0);this._zoomDir=0;c.resetMapCursor()},_wheelZoom:function(a,b){var c=this.map;if(!b){if(c.smartNavigation&&!a.shiftKey&&!c._isPanningOrZooming()){c.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(a);return}var d=a.timeStamp;if(!x.isDefined(d)||0>=d)d=(new Date).getTime();if(100>(this._mwts?d-this._mwts:d))return;this._mwts=d}c._canZoom(a.value)&&c._extentUtil({numLevels:a.value,mapAnchor:a.mapPoint,screenAnchor:a.screenPoint})},_wheelPan:function(a){var b=this.map;if(a.shiftKey&&!b._isPanningOrZooming())this._setScrollWheelPan(!1),b.enableScrollWheelZoom(),this._wheelZoom(a);else{var c=0,d=0;B("ff")?a.axis===a.HORIZONTAL_AXIS?c=-a.detail:d=-a.detail:(c=a.wheelDeltaX,d=a.wheelDeltaY);
b.translate(c,d)}},_setScrollWheelPan:function(a){this.map.isScrollWheelPan=a;this.mouseEvents.enableMouseWheel(a);J(this._mwMacHandle);this._mwMacHandle=null;a&&(this._mwMacHandle=M(this.mouseEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(a.mapPoint)},_recenterZoom:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&(a.value=a.ctrlKey||a.metaKey?-1:1,this._wheelZoom(a,!0))},_dblClickZoom:function(a){this.map._isPanningOrZooming()||
(a.value=1,this._wheelZoom(a,!0))},_twoFingerTap:function(a){this.map._isPanningOrZooming()||(a.value=-1,this._wheelZoom(a,!0))},_keyDown:function(a){var c=a.keyCode,d=this.map;if(-1!==b.indexOf(Q,c)){if(c===k.NUMPAD_PLUS||61===c||187===c)d._extentUtil({numLevels:1});else if(c===k.NUMPAD_MINUS||173===c||189===c)d._extentUtil({numLevels:-1});else{d.__panning||d.__panStart(0,0);switch(c){case k.UP_ARROW:case k.NUMPAD_8:this._keyDy+=10;break;case k.RIGHT_ARROW:case k.NUMPAD_6:this._keyDx-=10;break;case k.DOWN_ARROW:case k.NUMPAD_2:this._keyDy-=
10;break;case k.LEFT_ARROW:case k.NUMPAD_4:this._keyDx+=10;break;case k.PAGE_UP:case k.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case k.PAGE_DOWN:case k.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case k.END:case k.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case k.HOME:case k.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}d.__pan(this._keyDx,this._keyDy)}r.stop(a)}},_keyEnd:function(a){var b=this.map;b.__panning&&a.keyCode!==k.SHIFT&&(b.__panEnd(this._keyDx,this._keyDy),
this._keyDx=this._keyDy=0)},_swipeInit:function(a){var b=this.map,b=b._zoomAnim||b._panAnim;if(a.shiftKey)return!1;b&&b._active&&(b.stop(),b._fire("onEnd",[b.node]));this._dragOrigin=new D(0,0);t.mixin(this._dragOrigin,a.screenPoint);J(this._swipeHandle);J(this._swipeEndHandle);this._swipeHandle=M(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=M(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd)},_swipe:function(a){var b=this.map;b.__panning?
(this._panX=a.screenPoint.x,this._panY=a.screenPoint.y,b.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)):(b.setCursor("move"),b.__panStart(a.screenPoint.x,a.screenPoint.y))},_swipeEnd:function(a){J(this._swipeHandle);J(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var b=this.map;b.__panning&&(b.resetMapCursor(),b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y))},_pinchInit:function(a){var b=this.map,c=b._zoomAnim||b._panAnim;
c&&c._active?(c.stop(),c._fire("onEnd",[c.node])):b.__panning&&(a.screenPoint=new D(this._panX,this._panY),a.mapPoint=b.toMap(a.screenPoint),this._swipeEnd(a));J(this._pinchHandle);J(this._pinchEndHandle);this._pinchHandle=M(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=M(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(a){var b=this.map;if(a.screenPoints){this.currLength=G.getLength(a.screenPoints[0],a.screenPoints[1]);
var c;b.__zooming?(c=this.currLength/this._length,this._zoomStartExtent=this.__scaleExtent(b.extent,c,this._dragOrigin),b.__zoom(this._zoomStartExtent,c,this._dragOrigin)):(this._dragOrigin=new D((a.screenPoints[0].x+a.screenPoints[1].x)/2,(a.screenPoints[0].y+a.screenPoints[1].y)/2),this._length=this.currLength,b.__zoomStart(b.extent,this._dragOrigin));this._pinchScale=c;b._fireOnScale(this.currLength/this._length,this._dragOrigin,!0)}},_pinchEnd:function(a){a=this.map;J(this._pinchHandle);J(this._pinchEndHandle);
this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(a.__zooming&&null===a._zoomAnim){var b=this.currLength/this._length,c=a.extent.getWidth();this._zoomAnimAnchor=a.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor);if(a.__tileInfo){var d=E.getCandidateTileInfo(a,a.__tileInfo,this._zoomStartExtent),f=a.__getExtentForLevel(d.lod.level,this._zoomAnimAnchor),v=a.getMinZoom(),g=a.getMaxZoom(),C=f.extent,f=f.lod,l=c/C.getWidth(),e=d.lod.level;
1>b?l>b&&e--:l<b&&e++;e<v?e=v:e>g&&(e=g);e!==d.lod.level&&(f=a.__getExtentForLevel(e,this._zoomAnimAnchor),C=f.extent,f=f.lod);this._zoomEndExtent=C;this._zoomEndLod=f;a._zoomAnim=y.animateRange({range:{start:c/this._zoomStartExtent.getWidth(),end:l},duration:u.defaults.map.zoomDuration,rate:u.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});a._zoomAnim.play();a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=
this._zoomStartExtent,a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(a){var b=this.__scaleExtent(this.map.extent,a,this._zoomAnimAnchor);this.map.__zoom(b,a,this._dragOrigin)},_adjustPinchEnd:function(){var a=this.map,b=a.extent.getWidth()/this._zoomEndExtent.getWidth(),c=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor),d=this._dragOrigin,f=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=
this._dragOrigin=a._zoomAnim=this._zoomAnimAnchor=null;a.__zoomEnd(c,b,d,f,!0)},__scaleExtent:function(a,b,c){c=c||a.getCenter();b=a.expand(b);var d=a.xmin-(b.getWidth()-a.getWidth())*(c.x-a.xmin)/a.getWidth();c=a.ymax-(b.getHeight()-a.getHeight())*(c.y-a.ymax)/a.getHeight();return new A(d,c-b.getHeight(),d+b.getWidth(),c,a.spatialReference)},_normalizeRect:function(a){a=a.screenPoint;var b=this._dragOrigin.x,c=this._dragOrigin.y;a=new H((a.x<b?a.x:b)-this.map.__visibleRect.x,(a.y<c?a.y:c)-this.map.__visibleRect.y,
Math.abs(a.x-b),Math.abs(a.y-c));delete a.spatialReference;0===a.width&&(a.width=1);0===a.height&&(a.height=1);return a},setImmediateClick:function(a){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(a);break;case "touch":this.touchEvents.setImmediateTap(a);this.mouseEvents&&this.mouseEvents.setImmediateClick(a);break;case "pointer":this.pointerEvents.setImmediateTap(a)}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=M(this.mouseEvents,
"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=M(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=M(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=M(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){J(this._panInitHandle);this._panInitHandle=null;J(this._swipeInitHandle);this._swipeInitHandle=null},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=
this.pointerEvents?M(this.pointerEvents,"onSwipeStart",this,this._zoomInit):M(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){J(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=M(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},disablePinchZoom:function(){J(this._pinchInitHandle);this._pinchInitHandle=null},
enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=M(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){J(this._wheelHandle);this._wheelHandle=null},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=M(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=M(this.mouseEvents,"onDblClick",this,this._dblClickZoom);
this._dblTapHandle=M(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=M(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=M(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=M(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){J(this._dblClickHandle);J(this._zoomOutHandle);this._dblTapHandle&&J(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=
this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=M(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},disableShiftDoubleClickZoom:function(){J(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=M(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){J(this._recenterHandle);this._recenterHandle=
null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=M(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=M(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){J(this._keyHandle);J(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableNavigation:function(){var a=this.map;a&&a.loaded&&(a.enableDoubleClickZoom(),a.enableClickRecenter(),a.enablePan(),a.enableRubberBandZoom(),
this.enablePinchZoom(),a.enableKeyboardNavigation(),a.smartNavigation?this._setScrollWheelPan(!0):a.enableScrollWheelZoom())},disableNavigation:function(){var a=this.map;a&&a.loaded&&(a.disableDoubleClickZoom(),a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),this.disablePinchZoom(),a.disableKeyboardNavigation(),a.disableScrollWheelZoom(),a.smartNavigation&&this._setScrollWheelPan(!1))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();
this.pointerEvents&&this.pointerEvents.destroy();var a,b=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(a=0;a<b.length;a++)J(b[a]);
this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=
this._pinchHandle=this._pinchEndHandle=null}});B("extend-esri")&&(f.MapNavigationManager=q);return q})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(q,t,b,s,r,m,k,g,f,a){var c=r.connect,d=r.disconnect;q=q([g],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==s("mac")?
1:3,wheelDivisor:2>s("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(a,d){this.node=a;b.mixin(this,d);var f=function(a){m.stop(a);return!1};s("mozilla")&&t.style(a,"MozUserSelect","none");this._handles=[c(a,"onselectstart",f),c(a,"ondragstart",f),c(a,"onmouseenter",this,this._onMouseEnterHandler),c(a,"onmouseleave",this,this._onMouseLeaveHandler),c(a,"onmousedown",this,this._onMouseDownHandler),c(a,"onclick",this,this._onClickHandler),c(a,"ondblclick",this,this._onDblClickHandler)];
this._onMouseMoveHandler_connect=c(a,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=c(a,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=b.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(f=this.map)?f.isScrollWheelZoom||f.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(a,b){if(!this._preventClick||!("onClick"===a||"onDblClick"===a)){if(this[a])this[a](b);if(this.map&&
this.map[a])this.map[a](b)}},_processEvent:function(b){b=m.fix(b,b.target);var c=this.map,d=c&&c.position;d&&("DOMMouseScroll"===b.type&&3>s("ff")?b.screenPoint=new a(window.scrollX+b.screenX-d.x,window.scrollY+b.screenY-d.y):b.screenPoint=new a(b.pageX-d.x,b.pageY-d.y),b.mapPoint=c.extent?c.toMap(b.screenPoint):new f);b.numPoints=0;return b},_onMouseEnterHandler:function(a){d(this._onKeyDown_connect);d(this._onKeyUp_connect);this._onKeyDown_connect=c(document,"onkeydown",this,this._onKeyDownHandler);
this._onKeyUp_connect=c(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(a))},_onMouseLeaveHandler:function(a){d(this._onKeyDown_connect);d(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(a))},_onMouseMoveHandler:function(a){this._dragEnd?this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(a))},_onMouseDownHandler:function(a){d(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=
null;this.node.setCapture&&this.node.setCapture(!1);d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=c(document,"onmousemove",this,this._onMouseDragHandler);this._startX=a.pageX;this._startY=a.pageY;this._fire("onMouseDown",this._processEvent(a))},_onMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;d(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=c(b,"onmousemove",
this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(a))},_onMouseDragHandler:function(a){d(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=c(document,"onmousemove",this,this._onMouseDraggingHandler);d(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=c(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=c(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(a))},_onMouseDraggingHandler:function(a){m.stop(a);
this._fire("onMouseDrag",this._processEvent(a))},_onDragMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();this._dragEnd=!0;d(this._docLeaveConnect);d(this._onMouseDragHandler_connect);d(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=c(b,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=c(b,"onmouseup",this,this._onMouseUpHandler);a=this._processEvent(a);this._fire("onMouseDragEnd",
a);this._fire("onMouseUp",a)},_onDocMouseOut:function(a){var b=9>s("ie")?a.toElement:a.relatedTarget,c=b&&b.nodeName.toLowerCase();(!b||s("chrome")&&"html"===c)&&this._onDragMouseUpHandler(a)},_onClickHandler:function(a){a=this._processEvent(a);if(!(a.pageX!==this._startX||a.pageY!==this._startY)){clearTimeout(this._clickTimer);var b={},c="movementX"in a,d;for(d in a)if(!c||"webkitMovementX"!==d&&"webkitMovementY"!==d)b[d]=a[d];this._clickEvent=b;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},
_fireClickEvent:function(){clearTimeout(this._clickTimer);9>s("ie")&&(this._clickEvent.graphic=k._ieGraphic,delete k._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(a){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(a))},_onMouseWheelHandler:function(a){var b=this.map;(b?b.isScrollWheelZoom||b.isScrollWheelPan:this.preventPageScroll)&&m.stop(a);var b=s("ff")||s("mozilla")?-a.detail/this.mozWheelDivisor:a.wheelDelta/this.wheelDivisor,c=Math.abs(b),
c=c<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;a.value=0>b?-c:c;this._fire("onMouseWheel",this._processEvent(a))},_onKeyDownHandler:function(a){this._fire("onKeyDown",a)},_onKeyUpHandler:function(a){this._fire("onKeyUp",a)},enableMouseWheel:function(a){d(this._scrollHandle);this._scrollHandle=c(this.node,s("ff")||s("mozilla")?a?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(a){this.doubleClickDuration=a?0:this._initialDuration},
preventClickEvents:function(a){this._preventClick=a},destroy:function(){var a=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),b;for(b=0;b<a.length;b++)d(a[b]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=
this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});s("extend-esri")&&(k.MouseEvents=q);return q})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(q,t,b,s,r,m,k,g){q.byId=t.byId;q.isDescendant=t.isDescendant;q.setSelectable=t.setSelectable;q.getAttr=s.get;q.setAttr=s.set;q.hasAttr=s.has;q.removeAttr=s.remove;q.getNodeProp=s.getNodeProp;q.attr=function(b,a,c){return 2==
arguments.length?s["string"==typeof a?"get":"set"](b,a):s.set(b,a,c)};q.hasClass=m.contains;q.addClass=m.add;q.removeClass=m.remove;q.toggleClass=m.toggle;q.replaceClass=m.replace;q._toDom=q.toDom=k.toDom;q.place=k.place;q.create=k.create;q.empty=function(b){k.empty(b)};q._destroyElement=q.destroy=function(b){k.destroy(b)};q._getPadExtents=q.getPadExtents=g.getPadExtents;q._getBorderExtents=q.getBorderExtents=g.getBorderExtents;q._getPadBorderExtents=q.getPadBorderExtents=g.getPadBorderExtents;q._getMarginExtents=
q.getMarginExtents=g.getMarginExtents;q._getMarginSize=q.getMarginSize=g.getMarginSize;q._getMarginBox=q.getMarginBox=g.getMarginBox;q.setMarginBox=g.setMarginBox;q._getContentBox=q.getContentBox=g.getContentBox;q.setContentSize=g.setContentSize;q._isBodyLtr=q.isBodyLtr=g.isBodyLtr;q._docScroll=q.docScroll=g.docScroll;q._getIeDocumentElementOffset=q.getIeDocumentElementOffset=g.getIeDocumentElementOffset;q._fixIeBiDiScrollLeft=q.fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft;q.position=g.position;q.marginBox=
function(b,a){return a?g.setMarginBox(b,a):g.getMarginBox(b)};q.contentBox=function(b,a){return a?g.setContentSize(b,a):g.getContentBox(b)};q.coords=function(f,a){q.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");f=t.byId(f);var c=b.getComputedStyle(f),c=g.getMarginBox(f,c),d=g.position(f,a);c.x=d.x;c.y=d.y;return c};q.getProp=r.get;q.setProp=r.set;q.prop=function(b,a,c){return 2==arguments.length?r["string"==typeof a?"get":"set"](b,a):r.set(b,a,c)};q.getStyle=b.get;q.setStyle=
b.set;q.getComputedStyle=b.getComputedStyle;q.__toPixelValue=q.toPixelValue=b.toPixelValue;q.style=function(f,a,c){switch(arguments.length){case 1:return b.get(f);case 2:return b["string"==typeof a?"get":"set"](f,a)}return b.set(f,a,c)};return q})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(q,t,b,s,r,m,k,g,f){q=q([k],{declaredClass:"esri.TouchEvents",
tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(a,c){this.node=a;b.mixin(this,c);t.setSelectable(a,!1);this._touchStart=b.hitch(this,this._touchStart);this._touchMove=b.hitch(this,this._touchMove);this._touchEnd=b.hitch(this,this._touchEnd);this._touchCancel=b.hitch(this,this._touchCancel);a.addEventListener("touchstart",this._touchStart,!1);a.addEventListener("touchmove",this._touchMove,!1);a.addEventListener("touchend",this._touchEnd,!1);a.addEventListener("touchcancel",
this._touchCancel,!1);this.map&&s("ios")&&(this._mouseOver=b.hitch(this,this._mouseOver),this._mouseOut=b.hitch(this,this._mouseOut),this._mouseDown=b.hitch(this,this._mouseDown),this._mouseUp=b.hitch(this,this._mouseUp),this._mouseClick=b.hitch(this,this._mouseClick),a.addEventListener("mouseover",this._mouseOver,!1),a.addEventListener("mouseout",this._mouseOut,!1),a.addEventListener("mousedown",this._mouseDown,!1),a.addEventListener("mouseup",this._mouseUp,!1),a.addEventListener("click",this._mouseClick,
!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(a){var b=this._touches,d,f=a.changedTouches.length,g,k,m,r,q=(new Date).getTime();if(!s("android")||!s("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&b[a.changedTouches[0].identifier])){this._addTouch(a);for(d=0;d<f;d++)g=a.changedTouches[d],k=
b[g.identifier]={},k.startX=g.pageX,k.startY=g.pageY,k.startTS=q,-1===this._touchIds.indexOf(g.identifier)&&this._touchIds.push(g.identifier);this._swipeActive&&(m=this._nodeTouches[0]);this._pinchActive&&(r=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,m))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[m,r]))):2===this._numTouches?this._swipeActive&&(m&&(k=b[this._touchIds[0]],
k.startX=m.pageX,k.startY=m.pageY,k.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,m))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,m))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[m,r])))}},_touchMove:function(a){a.preventDefault();this._updateTouch(a);var b=this._touches,d,f=a.changedTouches.length,g,k,m,r;if(!s("android")||!s("safari")||!(1===a.targetTouches.length&&a.touches.length===
a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&b[a.changedTouches[0].identifier]&&1<this._touchIds.length)){for(d=0;d<f;d++)if(g=a.changedTouches[d],k=b[g.identifier]){m=Math.abs(g.pageX-k.startX);g=Math.abs(g.pageY-k.startY);if(!k.moved&&(m>=this.tapRadius||g>=this.tapRadius))k.moved=k.absMoved=!0;r=r?r:k.moved}1===this._numTouches?(d=a.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(a,d)):r&&(this._swipeActive=
!0,this._fire("onSwipeStart",this._processTouchEvent(a,d)))):2===this._numTouches&&(d=this._nodeTouches[0],f=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(a,[d,f])):r&&(r=b[d.identifier],k=b[f.identifier],b=Math.abs(r.startX-k.startX),r=Math.abs(r.startY-k.startY),b=Math.sqrt(b*b+r*r),r=Math.abs(d.pageX-f.pageX),k=Math.abs(d.pageY-f.pageY),r=Math.sqrt(r*r+k*k),Math.abs(r-b)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,
[d,f])))))}},_touchEnd:function(a){this._removeTouch(a);var b=this._touches,d=a.changedTouches,f,g=d.length,k,m,r=(new Date).getTime(),s=this._touchIds;for(f=0;f<g;f++)if(m=b[d[f].identifier])m.absMoved&&(k=!0),m.pageX=d[f].pageX,m.pageY=d[f].pageY,m.endTS=r;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,d[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,
d));else{if(!k){g=Infinity;k=-Infinity;var r=Infinity,q=-Infinity,t=this.tapStartTolerance,H=[],G=!0;for(f=0;f<s.length;f++)m=b[s[f]],H.push(m),m.startTS<g&&(g=m.startTS),m.startTS>k&&(k=m.startTS),m.endTS<r&&(r=m.endTS),m.endTS>q&&(q=m.endTS),delete b[s[f]];if(1===H.length&&d[0]&&(b=Math.abs(d[0].pageX-H[0].startX),d=Math.abs(d[0].pageY-H[0].startY),b>=this.tapRadius||d>=this.tapRadius))G=!1;G&&(Math.abs(k-g)<=t&&Math.abs(q-r)<=t)&&this._basicTap(a,H)}}else 1===this._numTouches&&this._pinchActive&&
(f=this._nodeTouches[0],m=b[f.identifier],m.startX=f.pageX,m.startY=f.pageY,this._pinchActive=m.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[d[0],f])))},_touchCancel:function(a){this._numTouches&&this._touchEnd(a)},_basicTap:function(a,b){var d=(new Date).getTime(),f=this;a=this._processTouchEvent(a,b);this._taps.push({touchInfos:b,ts:d,event:a});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=
setTimeout(function(){var a=f;f=null;clearTimeout(a._tapTimer);a._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(a){var b=this._taps,d=b[0],f=b[1],g=d.touchInfos,k=f&&f.touchInfos;b.length&&(a||(this._taps=[]),d&&f?g.length===k.length?f.ts-d.ts<=this.doubleTapDuration?(1===g.length?(a=Math.abs(g[0].startX-k[0].startX),g=Math.abs(g[0].startY-k[0].startY),g=a<=this.doubleTapRadius&&g<=this.doubleTapRadius):g=!0,g?this._processedDoubleTap(b):
this._processedTap(f)):this._processedTap(f):this._processedTap(f):this._processedTap(d||f))},_processedTap:function(a){var b=a.event;this._fire("onProcessedTap",b);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(b)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",b)},_processedDoubleTap:function(a){var b=1===a[1].touchInfos.length,d;b&&(d=[this._fixEvent(a[0].event),this._fixEvent(a[1].event)],d[1].relatedEvents=d);a=[a[0].event,a[1].event];a[1].relatedEvents=a;this._fire("onProcessedDoubleTap",
a[1]);b&&(this._fire("onDoubleTap",d[1]),this._fire("onDblClick",d[1]))},_addTouch:function(a){var b=a.changedTouches,d=this._nodeTouches,f,g,k;this._numTouches+=b.length;for(a=0;a<b.length;a++){g=d.length;k=!1;for(f=0;f<g&&!(k=d[f].identifier===b[a].identifier);f++);k?this._numTouches--:d.push(b[a])}for(a=d.length-1;0<=a;a--)r.isDescendant(d[a].target,document.body)||(d.splice(a,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(a){var b=[],d=[],f=a.changedTouches,
g=this._nodeTouches;this._numTouches-=f.length;0>this._numTouches&&(this._numTouches=0);for(a=0;a<f.length;a++)b.push(f[a].identifier);for(a=g.length-1;0<=a;a--)-1!==b.indexOf(g[a].identifier)&&d.push(g.splice(a,1)[0]);return d},_updateTouch:function(a){var b=[],d,f=a.changedTouches,g=this._nodeTouches;for(a=0;a<f.length;a++)b.push(f[a].identifier);for(a=0;a<g.length;a++)d=b.indexOf(g[a].identifier),-1!==d&&g.splice(a,1,f[d])},_mouseOver:function(a){this._fire("onMouseOver",this._processMouseEvent(a))},
_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a))},_mouseDown:function(a){this._fire("onMouseDown",this._processMouseEvent(a))},_mouseUp:function(a){this._fire("onMouseUp",this._processMouseEvent(a))},_mouseClick:function(a){this._fire("onClick",this._processMouseEvent(a))},_fire:function(a,b){if("onDblClick"===a&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var d=this;setTimeout(function(){d.mouseEvents.preventClickEvents(!1)},350)}if(this[a])this[a](b);if(this.map&&
this.map[a])this.map[a](b)},_fixEvent:function(a){var b={},d;for(d in a)b[d]=a[d];this.map&&(b.screenPoint=b.screenPoints[0],b.mapPoint=b.mapPoints[0]);return b},_processTouchEvent:function(a,c){var d=this.map,k=d&&d.position,m=0;if(k&&c)if(b.isArray(c)){var r,s;a.screenPoints=[];a.mapPoints=[];for(r=0;r<c.length;r++)c[r]?(s=new f(c[r].pageX-k.x,c[r].pageY-k.y),a.screenPoints.push(s),a.mapPoints.push(d.extent?d.toMap(s):new g)):m++}else a.screenPoint=new f(c.pageX-k.x,c.pageY-k.y),a.mapPoint=d.extent?
d.toMap(a.screenPoint):new g;a.numPoints=c?b.isArray(c)?c.length-m:1:0;return a},_processMouseEvent:function(a){var b=this.map,d=b&&b.position;d&&(a.screenPoint=new f(a.pageX-d.x,a.pageY-d.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new g);return a},setImmediateTap:function(a){this._immediate=a},destroy:function(){var a=this.node;a.removeEventListener("touchstart",this._touchStart,!1);a.removeEventListener("touchmove",this._touchMove,!1);a.removeEventListener("touchend",this._touchEnd,!1);a.removeEventListener("touchcancel",
this._touchCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,!1),a.removeEventListener("mouseout",this._mouseOut,!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",this._mouseClick,!1));t.setSelectable(a,!0);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null}});s("extend-esri")&&(m.TouchEvents=q);return q})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(q,t,b,s,r,m,k,g){q=q([m],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==s("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(b,a){this.node=b;t.mixin(this,a);void 0!==b.style.msTouchAction?b.style.msTouchAction="none":void 0!==b.style.touchAction&&(b.style.touchAction="none");var c=navigator.msPointerEnabled,d=function(a){a.preventDefault()};
b.addEventListener("selectstart",d,!1);b.addEventListener("dragstart",d,!1);this._pointerDown=t.hitch(this,this._pointerDown);this._pointerMove=t.hitch(this,this._pointerMove);this._pointerUp=t.hitch(this,this._pointerUp);this._pointerCancel=t.hitch(this,this._pointerCancel);b.addEventListener(c?"MSPointerDown":"pointerdown",this._pointerDown,!1);b.addEventListener(c?"MSPointerMove":"pointermove",this._pointerMove,!1);b.addEventListener(c?"MSPointerUp":"pointerup",this._pointerUp,!1);b.addEventListener(c?
"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=t.hitch(this,this._mouseOver),this._mouseOut=t.hitch(this,this._mouseOut),this._mouseLeave=t.hitch(this,this._mouseLeave),this._mouseDown=t.hitch(this,this._mouseDown),this._mouseUp=t.hitch(this,this._mouseUp),this._mouseClick=t.hitch(this,this._mouseClick),this._mouseWheel=t.hitch(this,this._mouseWheel),this._mouseMove=t.hitch(this,this._mouseMove),this._mouseEnter=t.hitch(this,this._mouseEnter),this._onKeyDown=
t.hitch(this,this._onKeyDown),this._onKeyUp=t.hitch(this,this._onKeyUp),b.addEventListener("mouseover",this._mouseOver,!1),b.addEventListener("mouseout",this._mouseOut,!1),b.addEventListener("mouseleave",this._mouseLeave,!1),b.addEventListener("mousedown",this._mouseDown,!1),b.addEventListener("mouseup",this._mouseUp,!1),b.addEventListener("click",this._mouseClick,!1),b.addEventListener("mousewheel",this._mouseWheel,!1),b.addEventListener("mousemove",this._mouseMove,!1),b.addEventListener("mouseenter",
this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(f){if(-1<b.indexOf(this._touchIds,f.pointerId))this._pointerUp(f);else{var a=this._touches,c=f.target,d=f.pointerId,g=this._touchIds,k,m=(new Date).getTime();k=a[d]={};k.pointerId=d;k.startX=k.pageX=f.pageX;k.startY=k.pageY=f.pageY;k.startTS=m;g.push(d);this._numTouches++;c.setPointerCapture?c.setPointerCapture(d):c.msSetPointerCapture&&c.msSetPointerCapture(d);c=a[g[0]];
a=a[g[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(c&&(c.startX=c.pageX,c.startY=c.pageY,c.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,c))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,c))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,[c,a]))))}},_pointerMove:function(b){var a=this._touches,c=this._touchIds,d,g,k;if((d=a[b.pointerId])&&!(d.pageX===
b.pageX&&d.pageY===b.pageY)){d.pageX=b.pageX;d.pageY=b.pageY;g=Math.abs(d.pageX-d.startX);k=Math.abs(d.pageY-d.startY);if(!d.moved&&(g>=this.tapRadius||k>=this.tapRadius))d.moved=d.absMoved=!0;if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(b,b)):d.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(b,b)));else if(2===this._numTouches)if(d=a[c[0]],a=a[c[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(b,[d,
a]));else if(d.moved||a.moved)c=Math.abs(d.startX-a.startX),g=Math.abs(d.startY-a.startY),c=Math.sqrt(c*c+g*g),g=Math.abs(d.pageX-a.pageX),k=Math.abs(d.pageY-a.pageY),g=Math.sqrt(g*g+k*k),Math.abs(g-c)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(b,[d,a])))}},_pointerUp:function(f){var a=this._touches,c,d=this.node,g=f.target,k=f.pointerId,m=this._touchIds,r=m.slice(0),s=b.map(r,function(b){return a[b]}),q=(new Date).getTime();if(c=a[k])if(c.pageX=f.pageX,
c.pageY=f.pageY,c.endTS=q,this._numTouches--,g.releasePointerCapture?g.releasePointerCapture(k):g.msReleasePointerCapture&&g.msReleasePointerCapture(k),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(f,f));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,f));else{if(!c.absMoved){var g=Infinity,k=-Infinity,m=Infinity,q=-Infinity,t=this.tapStartTolerance,
A;for(A=0;A<r.length;A++)c=s[A],c.startTS<g&&(g=c.startTS),c.startTS>k&&(k=c.startTS),c.endTS<m&&(m=c.endTS),c.endTS>q&&(q=c.endTS);Math.abs(k-g)<=t&&Math.abs(q-m)<=t&&this._basicTap(f,s)}}else 1===this._numTouches&&this._pinchActive&&(m.splice(b.indexOf(m,f.pointerId),1),delete a[f.pointerId],c=a[m[0]],c.startX=c.pageX,c.startY=c.pageY,c.moved=!1,document.msElementsFromPoint&&(r=document.msElementsFromPoint(c.pageX,c.pageY),b.some(r,function(a){return a===d})||(this._touches={},this._touchIds=[],
this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(f,[f,c])))},_pointerCancel:function(b){this._numTouches&&this._pointerUp(b)},_basicTap:function(b,a){var c=(new Date).getTime(),d=this,g=this._immediate;b=this._processTouchEvent(b,a);this._taps.push({touchInfos:a,ts:c,event:b});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",b);clearTimeout(this._tapTimer);c=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=
setTimeout(function(){var a=d;d=null;clearTimeout(a._tapTimer);a._analyzeTap(g)},g?0:c)},_analyzeTap:function(b){var a=this._taps,c=a[0],d=a[1],g=c.touchInfos,k=d&&d.touchInfos;a.length&&(b||(this._taps=[]),c&&d?g.length===k.length?d.ts-c.ts<=this.doubleTapDuration?(1===g.length?(b=Math.abs(g[0].startX-k[0].startX),g=Math.abs(g[0].startY-k[0].startY),g=b<=this.doubleTapRadius&&g<=this.doubleTapRadius):g=!0,g?this._processedDoubleTap(a):this._processedTap(d)):this._processedTap(d):this._processedTap(d):
this._processedTap(c||d))},_processedTap:function(b){var a=b.event;this._fire("onProcessedTap",a);1===b.touchInfos.length?this._fire("onTap",this._fixEvent(a)):2===b.touchInfos.length&&this._fire("onTwoFingerTap",a)},_processedDoubleTap:function(b){var a=1===b[1].touchInfos.length,c;a&&(c=[this._fixEvent(b[0].event),this._fixEvent(b[1].event)],c[1].relatedEvents=c);b=[b[0].event,b[1].event];b[1].relatedEvents=b;this._fire("onProcessedDoubleTap",b[1]);a&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",
c[1]))},_mouseOver:function(b){this._fire("onMouseOver",this._processMouseEvent(b))},_mouseMove:function(b){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(b)):this._fire("onMouseMove",this._processMouseEvent(b))},_mouseOut:function(b){this._fire("onMouseOut",this._processMouseEvent(b))},_mouseLeave:function(b){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(event))},_mouseDown:function(b){this._downX=
b.pageX;this._downY=b.pageY;this._fire("onMouseDown",this._processMouseEvent(b));0===b.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(b)))},_mouseUp:function(b){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(b)));this._fire("onMouseUp",this._processMouseEvent(b))},_mouseClick:function(b){Math.abs(b.pageX-this._downX)<=this.clickRadius&&Math.abs(b.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(b))},
_mouseWheel:function(b){var a=this.map;(a?a.isScrollWheelZoom||a.isScrollWheelPan:this.preventPageScroll)&&b.preventDefault();var a=b.wheelDelta?b.wheelDelta/this.wheelDivisor:-b.detail/this.mozWheelDivisor,c=Math.abs(a),c=c<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;b.value=0>a?-c:c;this._fire("onMouseWheel",this._processMouseEvent(b))},_mouseEnter:function(b){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",
this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(b))},_onKeyDown:function(b){this._fire("onKeyDown",b)},_onKeyUp:function(b){this._fire("onKeyUp",b)},_fire:function(b,a){if(this[b])this[b](a);if(this.map&&this.map[b])this.map[b](a)},_fixEvent:function(b){var a={},c;for(c in b)a[c]=b[c];a.preventDefault=function(){b.preventDefault()};a.stopPropagation=function(){b.stopPropagation()};this.map&&(a.screenPoint=a.screenPoints[0],
a.mapPoint=a.mapPoints[0]);return a},_processTouchEvent:function(b,a){var c=this.map,d=c&&c.position,m=0;if(d&&a)if(t.isArray(a)){var r,s;b.screenPoints=[];b.mapPoints=[];for(r=0;r<a.length;r++)a[r]?(s=new g(a[r].pageX-d.x,a[r].pageY-d.y),b.screenPoints.push(s),b.mapPoints.push(c.extent?c.toMap(s):new k)):m++}else b.screenPoint=new g(a.pageX-d.x,a.pageY-d.y),b.mapPoint=c.extent?c.toMap(b.screenPoint):new k;b.numPoints=a?t.isArray(a)?a.length-m:1:0;return b},_processMouseEvent:function(b){var a=this.map,
c=a&&a.position;c&&(b.screenPoint=new g(b.pageX-c.x,b.pageY-c.y),b.mapPoint=a.extent?a.toMap(b.screenPoint):new k);return b},setImmediateTap:function(b){this._immediate=b},destroy:function(){var b=this.node;b.removeEventListener("MSPointerDown",this._pointerDown,!1);b.removeEventListener("MSPointerMove",this._pointerMove,!1);b.removeEventListener("MSPointerUp",this._pointerUp,!1);b.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(b.removeEventListener("mouseover",this._mouseOver,
!1),b.removeEventListener("mousemove",this._mouseMove,!1),b.removeEventListener("mouseout",this._mouseOut,!1),b.removeEventListener("mouseleave",this._mouseLeave,!1),b.removeEventListener("mousedown",this._mouseDown,!1),b.removeEventListener("mouseup",this._mouseUp,!1),b.removeEventListener("click",this._mouseClick,!1),b.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});s("extend-esri")&&
(r.PointerEvents=q);return q})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(q,t,b,s,r,m,k,g){q=q([m,k],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(b,a){t.mixin(this,a);this.initialize(b,a)},getTitle:function(b){var a;this.info&&(a=this.titleHasRelatedFields?"":this._getPopupValues(b,!0).title);
return a||""},getContent:function(b){return this.info?(new g({template:this,graphic:b,chartTheme:this.chartTheme},s.create("div"))).domNode:""}});b("extend-esri")&&t.setObject("dijit.PopupTemplate",q,r);return q})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){q=q(null,{declaredClass:"esri.PopupInfo",initialize:function(a,c){if(a){t.mixin(this,c);this.info=a;this.title=this.getTitle;this.content=this.getContent;var d=this._fieldLabels={},f=this._fieldsMap={};a.fieldInfos&&b.forEach(a.fieldInfos,function(a){var b=a.fieldName.toLowerCase();d[b]=a.label;f[b]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(a.title&&-1!==a.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return s.fromJson(s.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(a){var c;b.some(this.info&&this.info.fieldInfos,function(b){b.fieldName===a&&(c=b);return!!c});return c},getComponents:function(a){var c=this.info,d=new k,f,g;c.fieldInfos&&(g=b.filter(c.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));g&&0<g.length&&(f=this._getRelatedRecords({graphic:a,fieldsInfo:g}));f?f.always(t.hitch(this,function(){d.resolve(this._getPopupValues(a))})):d.resolve(this._getPopupValues(a));
return d.promise},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},_getPopupValues:function(c,d){var f=this.info,g=c.getLayer(),k=t.clone(c.attributes)||{},m=t.clone(k),r=f.fieldInfos,s="",q="",u,y,x,B,X,V=g&&g._getDateOpts&&g._getDateOpts().properties,V=V&&V.slice(0),O={dateFormat:{properties:V,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};
if(this._relatedInfo)for(B in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(B)){var U=this._relatedInfo[B],v=this._relatedLayersInfo[B];U&&(b.forEach(U.relatedFeatures,function(e){for(X in e.attributes)if(e.attributes.hasOwnProperty(X)&&"esriRelCardinalityOneToOne"===v.relation.cardinality){var a=this._toRelatedFieldName([v.relation.id,X]);k[a]=m[a]=e.attributes[X]}},this),b.forEach(U.relatedStatsFeatures,function(e){for(X in e.attributes)if(e.attributes.hasOwnProperty(X)){var a=this._toRelatedFieldName([v.relation.id,
X]);k[a]=m[a]=e.attributes[X]}},this))}r&&b.forEach(r,function(e){y=e.fieldName;var a=this._getLayerFieldInfo(g,y);a&&(y=e.fieldName=a.name);m[y]=this._formatValue(m[y],y,O);V&&(e.format&&e.format.dateFormat)&&(e=b.indexOf(V,y),-1<e&&V.splice(e,1))},this);if(g){B=g.types;var K=(U=g.typeIdField)&&k[U];for(y in k)if(k.hasOwnProperty(y)&&-1===y.indexOf(this._relatedFieldPrefix)&&(x=k[y],a.isDefined(x))){var C=this._getDomainName(g,c,B,K,y,x);a.isDefined(C)?m[y]=C:y===U&&(C=this._getTypeName(g,c,x),a.isDefined(C)&&
(m[y]=C))}}f.title&&(s=this._processFieldsInLinks(this._fixTokens(f.title,g),k),s=t.trim(a.substitute(m,s,O)||""));if(d)return{title:s};f.description&&(q=this._processFieldsInLinks(this._fixTokens(f.description,g),k),q=t.trim(a.substitute(m,q,O)||""));r&&(u=[],b.forEach(r,function(e){(y=e.fieldName)&&e.visible&&u.push([e.label||y,a.substitute(m,"${"+y+"}",O)||""])}));var l,e;f.mediaInfos&&(l=[],b.forEach(f.mediaInfos,function(h){e=0;x=h.value;switch(h.type){case "image":var n=x.sourceURL,n=n&&t.trim(a.substitute(k,
this._fixTokens(n,g)));e=!!n;break;case "piechart":case "linechart":case "columnchart":case "barchart":var z,n=x.normalizeField;x.fields=b.map(x.fields,function(e){return(z=this._getLayerFieldInfo(g,e))?z.name:e},this);n&&(z=this._getLayerFieldInfo(g,n),x.normalizeField=z?z.name:n);e=b.some(x.fields,function(e){return a.isDefined(k[e])||-1!==e.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(e){h=t.clone(h);x=h.value;var n=h.title?this._processFieldsInLinks(this._fixTokens(h.title,
g),k):"",v=h.caption?this._processFieldsInLinks(this._fixTokens(h.caption,g),k):"";h.title=n?t.trim(a.substitute(m,n,O)||""):"";h.caption=v?t.trim(a.substitute(m,v,O)||""):"";if("image"===h.type)x.sourceURL=a.substitute(k,this._fixTokens(x.sourceURL,g)),x.linkURL&&(x.linkURL=t.trim(a.substitute(k,this._fixTokens(x.linkURL,g))||""));else{var c,d;b.forEach(x.fields,function(e,a){if(-1!==e.indexOf(this._relatedFieldPrefix))d=this._getRelatedChartInfos(e,x,k,O),d instanceof Array?x.fields=d:x.fields[a]=
d;else{var h=k[e],h=void 0===h?null:h;c=k[x.normalizeField]||0;h&&c&&(h/=c);x.fields[a]={y:h,tooltip:(this._fieldLabels[e.toLowerCase()]||e)+":\x3cbr/\x3e"+this._formatValue(h,e,O,!!c)}}},this)}l.push(h)}},this));return{title:s,description:q,hasDescription:!!f.description,fields:u&&u.length?u:null,mediaInfos:l&&l.length?l:null,formatted:m,editSummary:g&&g.getEditSummary?g.getEditSummary(c):""}},_getRelatedChartInfos:function(a,c,d,f){var g,k,m,r,s,q;g=[];q=this._fromRelatedFieldName(a);s=q[0];k=this._relatedInfo[s];
s=this._relatedLayersInfo[s];k&&b.forEach(k.relatedFeatures,function(b){b=b.attributes;var k,s;for(s in b)if(b.hasOwnProperty(s)&&s===q[1]){k={};r=b[s];c.normalizeField&&(m=-1!==c.normalizeField.indexOf(this._relatedFieldPrefix)?b[this._fromRelatedFieldName(c.normalizeField)[1]]:d[c.normalizeField]);r&&m&&(r/=m);if(c.tooltipField)if(-1!==c.tooltipField.indexOf(this._relatedFieldPrefix)){var u=this._fromRelatedFieldName(c.tooltipField)[1];k.tooltip=b[u]&&"string"===typeof b[u]?b[u]+":\x3cbr/\x3e"+
this._formatValue(r,b[u],f,!!m):u+":\x3cbr/\x3e"+this._formatValue(r,u,f,!!m)}else k.tooltip=(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(r,c.tooltipField,f,!!m);else k.tooltip=r;k.y=r;g.push(k)}},this);return"esriRelCardinalityOneToMany"===s.relation.cardinality||"esriRelCardinalityManyToMany"===s.relation.cardinality?g:g[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",
dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,_fixTokens:function(a,b){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,d,f){a=c._getLayerFieldInfo(b,f);return"$"+(a?"{"+a.name+"}":d)})},_encodeAttributes:function(a){a=t.clone(a)||{};var b,c;for(b in a)if((c=a[b])&&"string"===typeof c)c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),a[b]=c;return a},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b),
d=this;a&&(a=a.replace(this._reHref,function(a,f){return d._addValuesToHref(a,f,b,c)}).replace(this._reHrefApos,function(a,f){return d._addValuesToHref(a,f,b,c)}));return a},_addValuesToHref:function(b,c,d,f){c=c&&t.trim(c);return a.substitute(c&&0===c.indexOf("${")?d:f,b)},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_formatValue:function(c,d,f,g){var k=this._fieldsMap[d.toLowerCase()],m=k&&k.format;d=-1!==b.indexOf(f.dateFormat.properties,d);var r="number"===typeof c&&
!d&&(!m||!m.dateFormat);if(!a.isDefined(c)||!k||!a.isDefined(m))return r?this._forceLTR(c):c;var s="",k=[],q=m.hasOwnProperty("places")||m.hasOwnProperty("digitSeparator"),u=m.hasOwnProperty("digitSeparator")?m.digitSeparator:!0;if(q&&!d)s="NumberFormat",k.push("places: "+(a.isDefined(m.places)&&(!g||0<m.places)?Number(m.places):"Infinity")),k.length&&(s+="("+k.join(",")+")");else if(m.dateFormat)s="DateFormat"+this._insertOffset(this._dateFormats[m.dateFormat]||this._dateFormats.shortDateShortTime);
else return r?this._forceLTR(c):c;var x=this._applyFormatting(c,s,f);q&&-1<c.constructor.toString().indexOf("Array")&&(x="",b.forEach(c,t.hitch(this,function(a){x=x+this._applyFormatting(a,s,f)+" "})));q&&!u&&y.group&&(x=x.replace(RegExp("\\"+y.group,"g"),""));d&&(x='\x3cspan class\x3d"esriDateValue"\x3e'+x+"\x3c/span\x3e");return r?this._forceLTR(x):x},_applyFormatting:function(b,c,d){return a.substitute({myKey:b},"${myKey:"+c+"}",d)||""},_forceLTR:function(a){var b=g("ie");return b&&10>=b?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+
a+"\x3c/span\x3e"},_insertOffset:function(b){b&&(b=a.isDefined(this.utcOffset)?b.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):b);return b},_getDomainName:function(a,b,c,d,f,g){return(a=a.getDomain&&a.getDomain(f,{feature:b}))&&a.codedValues?a.getName(g):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=a.graphic,c=new k,d;this._relatedLayersInfo?this._queryRelatedLayers(b).then(t.hitch(this,function(a){this._setRelatedRecords(b,
a);c.resolve(a)}),t.hitch(this,this._handlerErrorResponse,c)):this._getRelatedLayersInfo(a).then(t.hitch(this,function(a){for(d in a)a.hasOwnProperty(d)&&a[d]&&(this._relatedLayersInfo[d].relatedLayerInfo=a[d]);this._queryRelatedLayers(b).then(t.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),t.hitch(this,this._handlerErrorResponse,c))}),t.hitch(this,this._handlerErrorResponse,c));return c.promise},_getRelatedLayersInfo:function(a){var c=a.fieldsInfo,g,k,m={};g=a.graphic.getLayer();
this._relatedLayersInfo||(this._relatedLayersInfo={});b.forEach(c,function(a){var c,d,f,k;c=this._fromRelatedFieldName(a.fieldName);d=c[0];c=c[1];d&&(this._relatedLayersInfo[d]||(b.some(g.relationships,function(a){if(a.id==d)return k=a,!0}),k&&(this._relatedLayersInfo[d]={relation:k,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[d]&&(this._relatedLayersInfo[d].relatedFields.push(c),a.statisticType&&(f=new x,f.statisticType=a.statisticType,f.onStatisticField=c,f.outStatisticFieldName=
c,this._relatedLayersInfo[d].outStatistics.push(f))))},this);for(k in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(k)&&this._relatedLayersInfo[k]&&(a=this._relatedLayersInfo[k].relation,a=g.url.replace(/[0-9]+$/,a.relatedTableId),this._relatedLayersInfo[k].relatedLayerUrl=a,m[k]=d({url:a,content:{f:"json"},callbackParamName:"callback"}));return f(m)},_queryRelatedLayers:function(a){var b={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&(b[c]=this._queryRelatedLayer({graphic:a,
relatedInfo:this._relatedLayersInfo[c]}));return f(b)},_queryRelatedLayer:function(a){var c,d,g,k,m,r,s,q,t,y;c=a.graphic;d=c.getLayer().url.match(/[0-9]+$/g)[0];q=a.relatedInfo;s=q.relatedLayerInfo;t=q.relatedLayerUrl;y=q.relation;b.some(s.relationships,function(a){if(a.relatedTableId===parseInt(d,10))return g=a,!0},this);g&&(a=new u,b.some(s.fields,function(a){if(a.name===g.keyField)return m=-1!==b.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],
a.type)?"number":"string",!0}),k="string"===m?g.keyField+"\x3d'"+c.attributes[y.keyField]+"'":g.keyField+"\x3d"+c.attributes[y.keyField],a.where=k,a.outFields=q.relatedFields,q.outStatistics&&(0<q.outStatistics.length&&s.supportsStatistics)&&(r=new u,r.where=a.where,r.outFields=a.outFields,r.outStatistics=q.outStatistics),c=new B(t),k=[],k.push(c.execute(a)),r&&k.push(c.execute(r)));return f(k)},_setRelatedRecords:function(b,c){this._relatedInfo=[];for(var d in c)if(c.hasOwnProperty(d)&&c[d]){var f=
c[d];this._relatedInfo[d]={};this._relatedInfo[d].relatedFeatures=f[0].features;a.isDefined(f[1])&&(this._relatedInfo[d].relatedStatsFeatures=f[1].features)}},_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b}});m("extend-esri")&&(c.PopupInfo=c.PopupInfoTemplate=q);return q})},
"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u){q=q(d,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},
constructor:function(a,b){this._handler=t.hitch(this,this._handler);this._relationshipQueryHandler=t.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=t.hitch(this,this._executeForIdsHandler);this._countHandler=t.hitch(this,this._countHandler);this._extentHandler=t.hitch(this,this._extentHandler);this.source=b&&b.source;this.gdbVersion=b&&b.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],
e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(a,b,c,d,f){var k=f.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json"},a.toJson(k&&k[0])));var m=this._handler,s=this._errorHandler;this.source&&(k={source:this.source.toJson()},
a.layer=r.toJson(k));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return g({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,d){m(a,d,b,c,f.dfd)},error:function(a){s(a,c,f.dfd)},callbackSuffix:d},this.requestOptions)},executeRelationshipQuery:function(a,b,c){a=this._encode(t.mixin({},this._url.query,{f:"json"},a.toJson()));var d=this._relationshipQueryHandler,k=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var m=new s(f._dfdCanceller);m._pendingDfd=
g({url:this._url.path+"/queryRelatedRecords",content:a,callbackParamName:"callback",load:function(a,f){d(a,f,b,c,m)},error:function(a){k(a,c,m)}},this.requestOptions);return m},executeForIds:function(a,b,c,d){var f=d.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},a.toJson(f&&f[0])));var k=this._executeForIdsHandler,m=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=r.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return g({url:this._url.path+
"/query",content:a,callbackParamName:"callback",load:function(a,f){k(a,f,b,c,d.dfd)},error:function(a){m(a,c,d.dfd)}},this.requestOptions)},executeForCount:function(a,b,c,d){var f=d.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(f&&f[0])));var k=this._countHandler,m=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=r.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return g({url:this._url.path+"/query",content:a,
callbackParamName:"callback",load:function(a,f){k(a,f,b,c,d.dfd)},error:function(a){m(a,c,d.dfd)}},this.requestOptions)},executeForExtent:function(a,b,c,d){var f=d.assembly;a=this._encode(t.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(f&&f[0])));var k=this._extentHandler,m=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=r.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return g({url:this._url.path+"/query",content:a,callbackParamName:"callback",
load:function(a,f){k(a,f,b,c,d.dfd)},error:function(a){m(a,c,d.dfd)}},this.requestOptions)},_handler:function(a,b,c,d,f){try{var g=new u(a);this._successHandler([g],"onComplete",c,f)}catch(k){this._errorHandler(k,d,f)}},_relationshipQueryHandler:function(a,c,d,f,g){try{var k=a.geometryType,m=a.spatialReference,r={};b.forEach(a.relatedRecordGroups,function(a){var b={};b.geometryType=k;b.spatialReference=m;b.features=a.relatedRecords;b=new u(b);if(null!=a.objectId)r[a.objectId]=b;else for(var c in a)a.hasOwnProperty(c)&&
"relatedRecords"!==c&&(r[a[c]]=b)});this._successHandler([r],"onExecuteRelationshipQueryComplete",d,g)}catch(s){this._errorHandler(s,f,g)}},_executeForIdsHandler:function(a,b,c,d,f){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",c,f)}catch(g){this._errorHandler(g,d,f)}},_countHandler:function(a,b,c,d,f){try{var g,k=a.features,m=a.objectIds;if(m)g=m.length;else{if(k)throw Error("Unable to perform query. Please check your parameters.");g=a.count}this._successHandler([g],"onExecuteForCountComplete",
c,f)}catch(r){this._errorHandler(r,d,f)}},_extentHandler:function(b,c,d,f,g){try{b.extent&&(b.extent=new a(b.extent)),this._successHandler([b],"onExecuteForExtentComplete",d,g)}catch(k){this._errorHandler(k,f,g)}}});c._createWrappers(q);m("extend-esri")&&t.setObject("tasks.QueryTask",q,k);return q})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c){function d(a,b){return Math.ceil((a-b)/(2*b))}function u(a,b){var c=a.paths||a.rings,d,f,g=c.length,k;for(d=0;d<g;d++){k=c[d].length;for(f=0;f<k;f++){var m=a.getPoint(d,f);a.setPoint(d,f,m.offset(b,0))}}return a}function B(a,b){if(!(a instanceof g||a instanceof f))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var c=a instanceof g,d=[],
k;q.forEach(c?a.paths:a.rings,function(a){d.push(k=[]);k.push([a[0][0],a[0][1]]);var c,f,g,m,r,v,s,C,l,e,h,n;for(r=0;r<a.length-1;r++){c=a[r][0];f=a[r][1];g=a[r+1][0];m=a[r+1][1];s=Math.sqrt((g-c)*(g-c)+(m-f)*(m-f));C=(m-f)/s;l=(g-c)/s;e=s/b;if(1<e){for(v=1;v<=e-1;v++)n=v*b,h=l*n+c,n=C*n+f,k.push([h,n]);v=(s+Math.floor(e-1)*b)/2;h=l*v+c;n=C*v+f;k.push([h,n])}k.push([g,m])}});return c?new g({paths:d,spatialReference:a.spatialReference}):new f({rings:d,spatialReference:a.spatialReference})}function x(b,
c,d){c&&(b=B(b,1E6),b=a.webMercatorToGeographic(b,!0));d&&(b=u(b,d));return b}function y(a,b,c){var f=a.x||a[0],g;f>b?(g=d(f,b),a.x?a=a.offset(g*-2*b,0):a[0]=f+g*-2*b):f<c&&(g=d(f,c),a.x?a=a.offset(g*-2*c,0):a[0]=f+g*-2*c);return a}function w(a,b){var c=-1;q.forEach(b.cutIndexes,function(f,g){var k=b.geometries[g];q.forEach(k.rings||k.paths,function(a,b){q.some(a,function(c){if(!(180>c[0])){c=0;var f,g=a.length,v;for(f=0;f<g;f++)v=a[f][0],c=v>c?v:c;c=Number(c.toFixed(9));c=-360*d(c,180);g=a.length;
for(f=0;f<g;f++)v=k.getPoint(b,f),k.setPoint(b,f,v.offset(c,0))}return!0})});f===c?k.rings?q.forEach(k.rings,function(b){a[f]=a[f].addRing(b)}):q.forEach(k.paths,function(b){a[f]=a[f].addPath(b)}):(c=f,a[f]=k)});return a}function E(k,r,s,t){var A=new b;A.addCallbacks(s,t);r=r||m.defaults.geometryService;var B=[],D=[],E,G,H,U,v,K,C,l,e=0;q.forEach(k,function(a){if(a)if(E||(E=a.spatialReference,G=E._getInfo(),U=(H=E._isWebMercator())?2.0037508342788905E7:180,v=H?-2.0037508342788905E7:-180,K=H?102100:
4326,C=new g({paths:[[[U,v],[U,U]]],spatialReference:{wkid:K}}),l=new g({paths:[[[v,v],[v,U]]],spatialReference:{wkid:K}})),G){var h=c.fromJson(a.toJson()),b=a.getExtent();"point"===a.type?B.push(y(h,U,v)):"multipoint"===a.type?(h.points=q.map(h.points,function(e){return y(e,U,v)}),B.push(h)):"extent"===a.type?(h=b._normalize(null,null,G),B.push(h.rings?new f(h):h)):b?(a=d(b.xmin,v)*2*U,h=0===a?h:u(h,a),b=b.offset(a,0),b.intersects(C)&&b.xmax!==U?(e=b.xmax>e?b.xmax:e,h=x(h,H),D.push(h),B.push("cut")):
b.intersects(l)&&b.xmin!==v?(e=b.xmax*2*U>e?b.xmax*2*U:e,h=x(h,H,360),D.push(h),B.push("cut")):B.push(h)):B.push(h)}else B.push(a);else B.push(a)});s=new g;t=d(e,U);for(var h=-90,n=t;0<t;){var z=-180+360*t;s.addPath([[z,h],[z,-1*h]]);h*=-1;t--}0<D.length&&0<n?r?r.cut(D,s,function(e){D=w(D,e);var h=[];q.forEach(B,function(e,b){if("cut"===e){var n=D.shift();k[b].rings&&1<k[b].rings.length&&n.rings.length>=k[b].rings.length?(B[b]="simplify",h.push(n)):B[b]=!0===H?a.geographicToWebMercator(n):n}});0<
h.length?r.simplify(h,function(e){q.forEach(B,function(h,b){"simplify"===h&&(B[b]=!0===H?a.geographicToWebMercator(e.shift()):e.shift())});A.callback(B)},function(e){A.errback(e)}):A.callback(B)},function(e){A.errback(e)}):A.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(q.forEach(B,function(e,h){if("cut"===e){var b=D.shift();B[h]=!0===H?a.geographicToWebMercator(b):b}}),A.callback(B));return A}function D(a,b,c,d){var f=!1,g;t.isObject(a)&&a&&(t.isArray(a)?
a.length&&((g=a[0]&&a[0].declaredClass)&&-1!==g.indexOf("Graphic")?(a=q.map(a,function(a){return a.geometry}),f=a.length?!0:!1):g&&-1!==g.indexOf("esri.geometry.")&&(f=!0)):(g=a.declaredClass)&&-1!==g.indexOf("FeatureSet")?(a=q.map(a.features||[],function(a){return a.geometry}),f=a.length?!0:!1):g&&-1!==g.indexOf("esri.geometry.")&&(f=!0));f&&b.push({index:c,property:d,value:a})}function A(a,b){var c=[];q.forEach(b,function(b){var d=b.i,f=a[d];b=b.p;var g;if(t.isObject(f)&&f)if(b)if("*"===b[0])for(g in f)f.hasOwnProperty(g)&&
D(f[g],c,d,g);else q.forEach(b,function(a){D(t.getObject(a,!1,f),c,d,a)});else D(f,c,d)});return c}function H(a,b){var c=0,d={};q.forEach(b,function(b){var f=b.index,g=b.property,k=b.value,m=k.length||1,r=a.slice(c,c+m);t.isArray(k)||(r=r[0]);c+=m;delete b.value;g?(d[f]=d[f]||{},d[f][g]=r):d[f]=r});return d}var G={normalizeCentralMeridian:E,_foldCutResults:w,_prepareGeometryForCut:x,_offsetMagnitude:d,_pointNormalization:y,_updatePolyGeometry:u,_straightLineDensify:B,_createWrappers:function(a){var c=
t.isObject(a)?a.prototype:t.getObject(a+".prototype");q.forEach(c.__msigns,function(a){var d=c[a.n];c[a.n]=function(){var c=this,f=[],g,m=new b(k._dfdCanceller);a.f&&k._fixDfd(m);for(g=0;g<a.c;g++)f[g]=arguments[g];var r={dfd:m};f.push(r);var s,u=[],v;c.normalization&&!c._isTable&&(s=A(f,a.a),q.forEach(s,function(a){u=u.concat(a.value)}),u.length&&(v=E(u)));v?(m._pendingDfd=v,v.addCallbacks(function(a){m.canceled||(r.assembly=H(a,s),m._pendingDfd=d.apply(c,f))},function(b){var v=c.declaredClass;v&&
-1!==v.indexOf("FeatureLayer")?c._resolve([b],null,f[a.e],m,!0):c._errorHandler(b,f[a.e],m)})):m._pendingDfd=d.apply(c,f);return m}})},_disassemble:A,_addToBucket:D,_reassemble:H};s("extend-esri")&&t.mixin(t.getObject("geometry",!0,r),G);return G})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(q,t,b,s,r,m,k,g){q=q(g,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],
complete:["result"]},constructor:function(b,a){b&&t.isString(b)&&(this._url=k.urlToObject(this.url=b));a&&a.requestOptions&&(this.requestOptions=a.requestOptions);this.normalization=!0;this._errorHandler=t.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var b=this._url,a=/^http:/i;this.url&&(this.url=this.url.replace(a,"https:"));b&&b.path&&(b.path=b.path.replace(a,"https:"))},_encode:function(f,a,c){var d,g,k={},m,r;for(m in f)if("declaredClass"!==m&&(d=f[m],g=typeof d,
null!==d&&void 0!==d&&"function"!==g))if(t.isArray(d)){k[m]=[];r=d.length;for(g=0;g<r;g++)k[m][g]=this._encode(d[g])}else"object"===g?d.toJson&&(g=d.toJson(c&&c[m]),"esri.tasks.FeatureSet"===d.declaredClass&&g.spatialReference&&(g.sr=g.spatialReference,delete g.spatialReference),k[m]=a?g:b.toJson(g)):k[m]=d;return k},_successHandler:function(b,a,c,d){a&&this[a].apply(this,b);c&&c.apply(null,b);d&&m._resDfd(d,b)},_errorHandler:function(b,a,c){this.onError(b);a&&a(b);c&&c.errback(b)},setNormalization:function(b){this.normalization=
b},onError:function(){}});s("extend-esri")&&(r.Task=q);return q})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(q,t,b,s,r,m,k,g,f,a,c){q=q(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(d){if(d){t.mixin(this,d);var f=this.features,m=d.spatialReference,r=a.getGeometryType(d.geometryType),m=this.spatialReference=
new g(m);this.geometryType=d.geometryType;d.fields&&(this.fields=d.fields);b.forEach(f,function(a,b){var d=a.geometry&&a.geometry.spatialReference;f[b]=new k(r&&a.geometry?new r(a.geometry):null,a.symbol&&c.fromJson(a.symbol),a.attributes);f[b].geometry&&!d&&f[b].geometry.setSpatialReference(m)});this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(b){var c={};this.displayFieldName&&(c.displayFieldName=this.displayFieldName);
this.fields&&(c.fields=this.fields);this.spatialReference?c.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(c.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(c.geometryType=a.getJsonType(this.features[0].geometry)),c.features=f._encodeGraphics(this.features,b));c.exceededTransferLimit=this.exceededTransferLimit;c.transform=this.transform;return m.fixJson(c)},_hydrate:function(){var a=
this.transform,b=this.geometryType;if(a&&b)for(var c=this.features,f=a.translate[0],g=a.translate[1],k=a.scale[0],m=a.scale[1],r=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,f,g,k,m,r,s,q;d=0;for(f=a.length;d<f;d++){m=a[d];g=0;for(k=m.length;g<k;g++)r=m[g],0<g?(s+=r[0],q+=r[1]):(s=r[0],q=r[1]),r[0]=b(s),r[1]=c(q)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=
b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,f,g,k,m;d=0;for(f=a.length;d<f;d++)g=a[d],0<d?(k+=g[0],m+=g[1]):(k=g[0],m=g[1]),g[0]=b(k),g[1]=c(m)}}(b,function(a){return a*k+f},function(a){return g-a*m}),a=0,b=c.length;a<b;a++)c[a].geometry&&r(c[a].geometry);this.transform=null},quantize:function(a){if(!this.geometryType)return this.transform=null,this;var b=a.translate[0],c=a.translate[1],f=a.scale[0],g=a.scale[1],
k=this.features,m=function(a,b,c){var d,f,g,k,m,r,s=[];d=0;for(f=a.length;d<f;d++)if(g=a[d],0<d){if(r=b(g[0]),g=c(g[1]),r!==k||g!==m)s.push([r-k,g-m]),k=r,m=g}else k=b(g[0]),m=c(g[1]),s.push([k,m]);return 0<s.length?s:null},r=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){var d,f,g,k,r;g=a.rings||a.paths;r=[];d=0;for(f=g.length;d<f;d++)k=g[d],(k=m(k,b,c))&&r.push(k);return 0<
r.length?(a.rings?a.rings=r:a.paths=r,a):null};if("esriGeometryMultipoint"===a)return function(a){var d;d=m(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/f)},function(a){return Math.round((c-a)/g)}),s,q;s=0;for(q=k.length;s<q;s++)k[s].geometry&&(r(k[s].geometry)||k[s].setGeometry(null));this.transform=a;return this}});s("extend-esri")&&t.setObject("tasks.FeatureSet",q,r);return q})},
"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});b("extend-esri")&&t.setObject("tasks.StatisticDefinition",
q,s);return q})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A){var H=0;t=t([D,x,y],{declaredClass:"esri.dijit._PopupRenderer",
constructor:function(){this._nls=s.mixin({},A.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(s.hitch(this,this._handleComponentsSuccess),s.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var b=this._mediaInfos,d=b.length,f=this.domNode,g=this._prevMedia,k=this._nextMedia;if(1<d){var s=0,q=0;r.forEach(b,function(a){"image"===a.type?s++:-1!==a.type.indexOf("chart")&&q++});s&&(a.set(this._imageCount,"innerHTML",s),m.query(".summary .image",f).removeClass("hidden"));q&&(a.set(this._chartCount,"innerHTML",q),m.query(".summary .chart",f).removeClass("hidden"))}else m.query(".summary",
f).addClass("hidden"),c.add(g,"hidden"),c.add(k,"hidden");b=this._mediaPtr;0===b?c.add(g,"hidden"):c.remove(g,"hidden");b===d-1?c.add(k,"hidden"):c.remove(k,"hidden");this._destroyFrame()},_displayMedia:function(){var b=this._mediaInfos[this._mediaPtr],d=b.title,f=b.caption,g=m.query(".mediaSection .hzLine",this.domNode)[0];a.set(this._mediaTitle,"innerHTML",d);c[d?"remove":"add"](this._mediaTitle,"hidden");a.set(this._mediaCaption,"innerHTML",f);c[f?"remove":"add"](this._mediaCaption,"hidden");c[d&&
f?"remove":"add"](g,"hidden");this._rid=null;if("image"===b.type)this._showImage(b.value);else{var k=this,d=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],f=b.value.theme||this.chartTheme;s.isString(f)&&(f=f.replace(/\./gi,"/"),-1===f.indexOf("/")&&(f="dojox/charting/themes/"+f));f||(f="./Rainbow");d.push(f);try{var r=this._rid=H++;q(d,function(a,c,d){r===k._rid&&(k._rid=null,k._showChart(b.type,b.value,a,c,d))})}catch(u){}}},_preventNewTab:function(a){return(a=a&&s.trim(a).toLowerCase())&&
(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(a){c.add(this._mediaFrame,"image");var f=u.get(this._gallery,"height"),g;a.linkURL&&(g=d.create("a",{href:a.linkURL,target:this._preventNewTab(a.linkURL)?"":"_blank"},this._mediaFrame));d.create("img",{className:"esriPopupMediaImage",src:a.sourceURL},g||this._mediaFrame);var k=m.query(".esriPopupMediaImage",this._mediaFrame)[0],r=this,s;s=b.connect(k,"onload",function(){b.disconnect(s);s=null;r._imageLoaded(k,f)})},_showChart:function(a,
b,f,g,k){c.remove(this._mediaFrame,"image");f=this._chart=new f(d.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});k&&f.setTheme(k);switch(a){case "piechart":f.addPlot("default",{type:"Pie",labels:!1});f.addSeries("Series A",b.fields);break;case "linechart":f.addPlot("default",{type:"Markers"});f.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});f.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});r.forEach(b.fields,function(a,b){a.x=
b+1});f.addSeries("Series A",b.fields);break;case "columnchart":f.addPlot("default",{type:"Columns",gap:3});f.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});f.addSeries("Series A",b.fields);break;case "barchart":f.addPlot("default",{type:"Bars",gap:3}),f.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),f.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),f.addSeries("Series A",b.fields)}this._action=new g(f);f.render()},_destroyFrame:function(){this._rid=
null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);a.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var c=a.height;c<b&&(c=Math.round((b-c)/2),u.set(a,"marginTop",c+"px"))},_attListHandler:function(b,c){if(b===this._dfd){this._dfd=null;var d="";!(c instanceof Error)&&(c&&c.length)&&r.forEach(c,function(a){d+="\x3cli\x3e";d+="\x3ca href\x3d'"+E.addProxy(a.url)+"' target\x3d'_blank'\x3e"+(a.name||"[No name]")+"\x3c/a\x3e";
d+="\x3c/li\x3e"});a.set(this._attachmentsList,"innerHTML",d||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_handleComponentsSuccess:function(b){if(b){var d=this.showTitle?b.title:"",g=b.description,k=b.fields,q=b.mediaInfos,u=this.domNode,t=this._nls,w=this,y=this.template,x=this.graphic;this._prevMedia.title=t.NLS_prevMedia;this._nextMedia.title=t.NLS_nextMedia;a.set(this._title,"innerHTML",d);d||c.add(this._title,"hidden");!b.hasDescription&&k&&(g="",r.forEach(k,function(a){g+="\x3ctr valign\x3d'top'\x3e";
g+="\x3ctd class\x3d'attrName'\x3e"+B.encode(a[0])+"\x3c/td\x3e";g+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+t.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";g+="\x3c/tr\x3e"}),g&&(g="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+g+"\x3c/table\x3e"));a.set(this._description,"innerHTML",g);g||c.add(this._description,"hidden");m.query("a",this._description).forEach(function(b){w._preventNewTab(b.href)?
"_blank"===b.target&&a.remove(b,"target"):a.set(b,"target","_blank")});d&&g?m.query(".mainSection .hzLine",u).removeClass("hidden"):d||g?m.query(".mainSection .hzLine",u).addClass("hidden"):m.query(".mainSection",u).addClass("hidden");if(d=this._dfd=y.getAttachments(x))d.addBoth(s.hitch(this,this._attListHandler,d)),a.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+t.NLS_searching+"...\x3c/li\x3e"),m.query(".attachmentsSection",u).removeClass("hidden");q&&q.length&&(m.query(".mediaSection",u).removeClass("hidden"),
f.setSelectable(this._mediaFrame,!1),this._mediaInfos=q,this._mediaPtr=0,this._updateUI(),this._displayMedia());b.editSummary&&(a.set(this._editSummary,"innerHTML",b.editSummary),q&&q.length&&c.remove(this._mediaBreak,"hidden"),c.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){}});k("extend-esri")&&s.setObject("dijit._PopupRenderer",t,w);return t})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(q,t,b,s,r,m,k){m.extend(q,{waiRole:"",waiState:""});return r("dijit._Templated",[t,b],{constructor:function(){k.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(b,f){var a=this.inherited(arguments),c=f(b,"waiRole");c&&b.setAttribute("role",c);(c=f(b,"waiState"))&&s.forEach(c.split(/\s*,\s*/),function(a){-1!=a.indexOf("-")&&(a=a.split("-"),b.setAttribute("aria-"+a[0],a[1]))});
return a}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(q,t,b,s,r,m,k,g){var f=t("dijit._TemplatedMixin",g,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,d=this;return k.substitute(a,this,function(a,f){"!"==f.charAt(0)&&(a=s.getObject(f.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+
" template:"+f);return null==a?"":"!"==f.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=q(this.templatePath,{sanitize:!0}));var a=f.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),c;if(s.isString(a)){if(c=b.toDom(this._stringRepl(a),
this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+a);}else c=a.cloneNode(!0);this.domNode=c}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});f._templateCache={};f.getCachedTemplate=function(a,c,d){var g=f._templateCache,m=a,r=g[m];if(r){try{if(!r.ownerDocument||r.ownerDocument==(d||document))return r}catch(s){}b.destroy(r)}a=
k.trim(a);if(c||a.match(/\$\{([^\}]+)\}/g))return g[m]=a;c=b.toDom(a,d);if(1!=c.nodeType)throw Error("Invalid template: "+a);return g[m]=c};m("ie")&&r(window,"unload",function(){var a=f._templateCache,c;for(c in a){var d=a[c];"object"==typeof d&&b.destroy(d);delete a[c]}});return f})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(q){return q.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(q,t,b,s){var r;r=function(a,b,d){s(a,{sync:!!b,
headers:{"X-Requested-With":null}}).then(d)};var m={},k=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},g={},f={};q.cache=function(a,b,d){var f;"string"==typeof a?/\//.test(a)?(f=a,d=b):f=t.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(f=a+"",d=b);a=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof a)return m[f]=a,d?k(a):a;if(null===a)return delete m[f],
null;f in m||r(f,!0,function(a){m[f]=a});return d?k(m[f]):m[f]};return{dynamic:!0,normalize:function(a,b){var d=a.split("!"),f=d[0];return(/^\./.test(f)?b(f):f)+(d[1]?"!"+d[1]:"")},load:function(a,b,d){a=a.split("!");var s=1<a.length,q=a[0],t=b.toUrl(a[0]);a="url:"+t;var y=g,w=function(a){d(s?k(a):a)};q in m?y=m[q]:b.cache&&a in b.cache?y=b.cache[a]:t in m&&(y=m[t]);if(y===g)if(f[t])f[t].push(w);else{var E=f[t]=[w];r(t,!b.async,function(a){m[q]=m[t]=a;for(var b=0;b<E.length;)E[b++](a);delete f[t]})}else w(y)}}})},
"dojo/request":function(){define(["./request/default!"],function(q){return q})},"dojo/request/default":function(){define(["exports","require","../has"],function(q,t,b){var s=b("config-requestProvider");s||(s="./xhr");q.getPlatformDefaultId=function(){return"./xhr"};q.load=function(b,m,k,g){t(["platform"==b?"./xhr":s],function(b){k(b)})}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(q,t,b,s,r,m,k,g,f){var a=r.delegate(g,{mouseenter:m.enter,mouseleave:m.leave,keypress:b._keypress}),c;b=s("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var f=!0,g=this.attachScope||this,k=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(k)for(var m=k.split(/\s*,\s*/);k=m.shift();)r.isArray(g[k])?g[k].push(a):g[k]=a,f="containerNode"!=k,this._attachPoints.push(k);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){k=b.split(/\s*,\s*/);for(m=r.trim;b=k.shift();)if(b){var s=
null;-1!=b.indexOf(":")?(s=b.split(":"),b=m(s[0]),s=m(s[1])):b=m(b);s||(s=b);this._attachEvents.push(c(a,b,r.hitch(g,s)))}}return f},_attach:function(b,f,g){f=f.replace(/^on/,"").toLowerCase();f="dijitclick"==f?c||(c=q("./a11yclick")):a[f]||f;return k(b,f,g)},_detachTemplateNodes:function(){var a=this.attachScope||this;t.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];t.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});r.extend(f,{dojoAttachEvent:"",dojoAttachPoint:""});return b})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(q,t,b,s,r){return b("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=
!0);r.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(s.hitch(this,function(b){this._startupWidgets=b;for(var g=0;g<b.length;g++)this._processTemplateNode(b[g],function(b,a){return b[a]},function(b,a,c){return a in b?b.connect(b,a,c):b.on(a,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+
": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,k,g){return k(b,"dojoType")||k(b,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){q.forEach(this._startupWidgets,function(b){b&&(!b._started&&b.startup)&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){function w(a){return eval("("+a+")")}function E(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<A){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=A}return b}function D(a,c){c||(c=q);var d=c._dojoParserCtorMap||(c._dojoParserCtorMap={}),f=a.join();if(!d[f]){for(var g=[],k=0,m=a.length;k<m;k++){var r=a[k];g[g.length]=d[r]=d[r]||b.getObject(r)||~r.indexOf("/")&&c(r)}k=g.shift();d[f]=g.length?k.createSubclass?
k.createSubclass(g):k.extend.apply(k,g):k}return d[f]}new Date("X");var A=0;f.after(b,"extend",function(){A++},!0);var H={_clearCache:function(){A++;_ctorMap={}},_functionFromScript:function(a,b){var c="",d="",f=a.getAttribute(b+"args")||a.getAttribute("args"),g=a.getAttribute("with"),f=(f||"").split(/\s*,\s*/);g&&g.length&&s.forEach(g.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(f,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||t._scopeName)+
"Type",f="data-"+(c.scope||t._scopeName)+"-",g=f+"type",k=f+"mixins",m=[];s.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(g)||a.getAttribute(d);if(c){var f=a.getAttribute(k),c=f?[c].concat(f.split(/\s*,\s*/)):[c];m.push({node:a,types:c})}});return this._instantiate(m,b,c)},_instantiate:function(b,c,d,f){function g(a){!c._started&&!d.noStart&&s.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}b=s.map(b,function(a){var b=a.ctor||D(a.types,d.contextRequire);
if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return f?a(b).then(g):g(b)},construct:function(a,d,k,m,r,q){function y(e){C&&b.setObject(C,e);for(v=0;v<z.length;v++)f[z[v].advice||"after"](e,z[v].method,b.hitch(e,z[v].func),!0);for(v=0;v<F.length;v++)F[v].call(e);for(v=0;v<N.length;v++)e.watch(N[v].prop,N[v].func);for(v=0;v<T.length;v++)x(e,T[v].event,T[v].func);return e}var A=a&&a.prototype;m=m||{};var D=
{};m.defaults&&b.mixin(D,m.defaults);q&&b.mixin(D,q);var H;u("dom-attributes-explicit")?H=d.attributes:u("dom-attributes-specified-flag")?H=s.filter(d.attributes,function(e){return e.specified}):(q=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),H=s.map(q.split(/\s+/),function(e){var a=e.toLowerCase();return{name:e,value:"LI"==d.nodeName&&"value"==e||"enctype"==a?d.getAttribute(a):d.getAttributeNode(a).value}}));
var O=m.scope||t._scopeName;q="data-"+O+"-";var U={};"dojo"!==O&&(U[q+"props"]="data-dojo-props",U[q+"type"]="data-dojo-type",U[q+"mixins"]="data-dojo-mixins",U[O+"type"]="dojotype",U[q+"id"]="data-dojo-id");for(var v=0,K,O=[],C,l;K=H[v++];){var e=K.name,h=e.toLowerCase();K=K.value;switch(U[h]||h){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":l=K;break;case "data-dojo-id":case "jsid":C=K;break;case "data-dojo-attach-point":case "dojoattachpoint":D.dojoAttachPoint=
K;break;case "data-dojo-attach-event":case "dojoattachevent":D.dojoAttachEvent=K;break;case "class":D["class"]=d.className;break;case "style":D.style=d.style&&d.style.cssText;break;default:if(e in A||(e=E(a)[h]||e),e in A)switch(typeof A[e]){case "string":D[e]=K;break;case "number":D[e]=K.length?Number(K):NaN;break;case "boolean":D[e]="false"!=K.toLowerCase();break;case "function":""===K||-1!=K.search(/[^\w\.]+/i)?D[e]=new Function(K):D[e]=b.getObject(K,!1)||new Function(K);O.push(e);break;default:h=
A[e],D[e]=h&&"length"in h?K?K.split(/\s*,\s*/):[]:h instanceof Date?""==K?new Date(""):"now"==K?new Date:c.fromISOString(K):h instanceof g?t.baseUrl+K:w(K)}else D[e]=K}}for(H=0;H<O.length;H++)U=O[H].toLowerCase(),d.removeAttribute(U),d[U]=null;if(l)try{l=w.call(m.propsThis,"{"+l+"}"),b.mixin(D,l)}catch(n){throw Error(n.toString()+" in data-dojo-props\x3d'"+l+"'");}b.mixin(D,k);r||(r=a&&(a._noScript||A._noScript)?[]:B("\x3e script[type^\x3d'dojo/']",d));var z=[],F=[],N=[],T=[];if(r)for(v=0;v<r.length;v++)U=
r[v],d.removeChild(U),k=U.getAttribute(q+"event")||U.getAttribute("event"),m=U.getAttribute(q+"prop"),l=U.getAttribute(q+"method"),O=U.getAttribute(q+"advice"),H=U.getAttribute("type"),U=this._functionFromScript(U,q),k?"dojo/connect"==H?z.push({method:k,func:U}):"dojo/on"==H?T.push({event:k,func:U}):D[k]=U:"dojo/aspect"==H?z.push({method:l,advice:O,func:U}):"dojo/watch"==H?N.push({prop:m,func:U}):F.push(U);a=(r=a.markupFactory||A.markupFactory)?r(D,d,a):new a(D,d);return a.then?a.then(y):y(a)},scan:function(a,
b){function c(e){if(!e.inherited){e.inherited={};var a=e.node,h=c(e.parent),a={dir:a.getAttribute("dir")||h.dir,lang:a.getAttribute("lang")||h.lang,textDir:a.getAttribute(w)||h.textDir},b;for(b in a)a[b]&&(e.inherited[b]=a[b])}return e.inherited}var f=[],g=[],k={},m=(b.scope||t._scopeName)+"Type",r="data-"+(b.scope||t._scopeName)+"-",u=r+"type",w=r+"textdir",r=r+"mixins",y=a.firstChild,x=b.inherited;if(!x){var v=function(e,a){return e.getAttribute&&e.getAttribute(a)||e.parentNode&&v(e.parentNode,
a)},x={dir:v(a,"dir"),lang:v(a,"lang"),textDir:v(a,w)},A;for(A in x)x[A]||delete x[A]}for(var x={inherited:x},C,l;;)if(y)if(1!=y.nodeType)y=y.nextSibling;else if(C&&"script"==y.nodeName.toLowerCase())(e=y.getAttribute("type"))&&/^dojo\/\w/i.test(e)&&C.push(y),y=y.nextSibling;else if(l)y=y.nextSibling;else{var e=y.getAttribute(u)||y.getAttribute(m);A=y.firstChild;if(!e&&(!A||3==A.nodeType&&!A.nextSibling))y=y.nextSibling;else{l=null;if(e){var h=y.getAttribute(r);C=h?[e].concat(h.split(/\s*,\s*/)):
[e];try{l=D(C,b.contextRequire)}catch(n){}l||s.forEach(C,function(e){~e.indexOf("/")&&!k[e]&&(k[e]=!0,g[g.length]=e)});h=l&&!l.prototype._noScript?[]:null;x={types:C,ctor:l,parent:x,node:y,scripts:h};x.inherited=c(x);f.push(x)}else x={node:y,scripts:C,parent:x};C=h;l=y.stopParser||l&&l.prototype.stopParser&&!b.template;y=A}}else{if(!x||!x.node)break;y=x.node.nextSibling;l=!1;x=x.parent;C=x.scripts}var z=new d;g.length?(b.contextRequire||q)(g,function(){z.resolve(s.filter(f,function(e){if(!e.ctor)try{e.ctor=
D(e.types,b.contextRequire)}catch(a){}for(var h=e.parent;h&&!h.types;)h=h.parent;var n=e.ctor&&e.ctor.prototype;e.instantiateChildren=!(n&&n.stopParser&&!b.template);e.instantiate=!h||h.instantiate&&h.instantiateChildren;return e.instantiate}))}):z.resolve(f);return z.promise},_require:function(a,c){var f=w("{"+a.innerHTML+"}"),g=[],k=[],m=new d,r=c&&c.contextRequire||q,s;for(s in f)g.push(s),k.push(f[s]);r(k,function(){for(var a=0;a<g.length;a++)b.setObject(g[a],arguments[a]);m.resolve(arguments)});
return m.promise},_scanAmd:function(a,b){var c=new d,f=c.promise;c.resolve(!0);var g=this;B("script[type\x3d'dojo/require']",a).forEach(function(a){f=f.then(function(){return g._require(a,b)});a.parentNode.removeChild(a)});return f},parse:function(a,c){a&&("string"!=typeof a&&!("nodeType"in a))&&(c=a,a=c.rootNode);var d=a?m.byId(a):k.body();c=c||{};var f=c.template?{template:!0}:{},g=[],r=this,s=this._scanAmd(d,c).then(function(){return r.scan(d,c)}).then(function(a){return r._instantiate(a,f,c,!0)}).then(function(a){return g=
g.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});b.mixin(g,s);return g}};t.parser=H;r.parseOnLoad&&y(100,H,"parse");return H})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(q,t){var b={};q.setObject("dojo.date.stamp",b);b.fromISOString=function(s,r){b._isoRegExp||(b._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var m=b._isoRegExp.exec(s),k=null;
if(m){m.shift();m[1]&&m[1]--;m[6]&&(m[6]*=1E3);r&&(r=new Date(r),t.forEach(t.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return r["get"+a]()}),function(a,b){m[b]=m[b]||a}));k=new Date(m[0]||1970,m[1]||0,m[2]||1,m[3]||0,m[4]||0,m[5]||0,m[6]||0);100>m[0]&&k.setFullYear(m[0]||1970);var g=0,f=m[7]&&m[7].charAt(0);"Z"!=f&&(g=60*(m[8]||0)+(Number(m[9])||0),"-"!=f&&(g*=-1));f&&(g-=k.getTimezoneOffset());g&&k.setTime(k.getTime()+6E4*g)}return k};b.toISOString=function(b,
r){var m=function(a){return 10>a?"0"+a:a};r=r||{};var k=[],g=r.zulu?"getUTC":"get",f="";"time"!=r.selector&&(f=b[g+"FullYear"](),f=["0000".substr((f+"").length)+f,m(b[g+"Month"]()+1),m(b[g+"Date"]())].join("-"));k.push(f);if("date"!=r.selector){f=[m(b[g+"Hours"]()),m(b[g+"Minutes"]()),m(b[g+"Seconds"]())].join(":");g=b[g+"Milliseconds"]();r.milliseconds&&(f+="."+(100>g?"0":"")+m(g));if(r.zulu)f+="Z";else if("time"!=r.selector)var g=b.getTimezoneOffset(),a=Math.abs(g),f=f+((0<g?"-":"+")+m(Math.floor(a/
60))+":"+m(a%60));k.push(f)}return k.join("T")};return b})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x){q=q(a,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],
"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],
"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=t.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);
this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,
this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJson());return{geometryType:x.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,c,d){var f=x.getGeometryType(c);a=a.geometries;
var g=[],k={spatialReference:d.toJson()},m=t.mixin;b.forEach(a,function(a,b){g[b]=new f(m(a,k))});return g},_toProjectGeometry:function(a){var b=a.spatialReference.toJson();return a instanceof c?new u({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new d({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,d){return"esriGeometryEnvelope"===b?(a=a.rings[0],new c(a[0][0],a[0][1],a[2][0],a[2][1],d)):new B({points:a.paths[0],
spatialReference:d.toJson()})},project:function(a,b,c,d){var k=t.mixin({},this._url.query,{f:"json"}),m;a.geometries?(d=c,c=b,b=a.outSR,m=a.geometries[0],k=t.mixin(k,a.toJson())):(m=a[0],k=t.mixin(k,{outSR:b.wkid||s.toJson(b.toJson()),inSR:m.spatialReference.wkid||s.toJson(m.spatialReference.toJson()),geometries:s.toJson(this._encodeGeometries(a))}));var q=x.getJsonType(m),u=this._projectHandler,B=this._errorHandler,J=new r(f._dfdCanceller);J._pendingDfd=g({url:this._url.path+"/project",content:k,
callbackParamName:"callback",load:function(a,f){u(a,f,q,b,c,d,J)},error:function(a){B(a,d,J)}});return J},_projectHandler:function(a,b,c,d,f,g,k){try{var m=this._decodeGeometries(a,c,d);this._successHandler([m],"onProjectComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},onProjectComplete:function(){},simplify:function(a,b,c){var d=a[0].spatialReference,k=t.mixin({},this._url.query,{f:"json",sr:d.wkid?d.wkid:s.toJson(d.toJson()),geometries:s.toJson(this._encodeGeometries(a))}),m=x.getJsonType(a[0]),
q=this._simplifyHandler,u=this._errorHandler,B=new r(f._dfdCanceller);B._pendingDfd=g({url:this._url.path+"/simplify",content:k,callbackParamName:"callback",load:function(a,f){q(a,f,m,d,b,c,B)},error:function(a){u(a,c,B)}});return B},_simplifyHandler:function(a,b,c,d,f,g,k){try{var m=this._decodeGeometries(a,c,d);this._successHandler([m],"onSimplifyComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},onSimplifyComplete:function(){},convexHull:function(a,b,c){var d=a[0].spatialReference;a=t.mixin({},
this._url.query,{f:"json",sr:s.toJson(d.toJson()),geometries:s.toJson(this._encodeGeometries(a))});var k=this._convexHullHandler,m=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,f){k(a,f,d,b,c,q)},error:function(a){m(a,c,q)}});return q},_convexHullHandler:function(a,b,c,d,f,g){try{var k=x.fromJson(a.geometry).setSpatialReference(c);this._successHandler([k],"onConvexHullComplete",d,g)}catch(m){this._errorHandler(m,
f,g)}},onConvexHullComplete:function(){},union:function(a,b,c){var d=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:s.toJson(d.toJson()),geometries:s.toJson(this._encodeGeometries(a))});var k=this._unionHandler,m=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/union",content:a,callbackParamName:"callback",load:function(a,f){k(a,f,d,b,c,q)},error:function(a){m(a,c,q)}});return q},_unionHandler:function(a,b,c,d,f,g){try{var k=x.fromJson(a.geometry).setSpatialReference(c);
this._successHandler([k],"onUnionComplete",d,g)}catch(m){this._errorHandler(m,f,g)}},onUnionComplete:function(){},autoComplete:function(a,b,c,d){var k=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:s.toJson(k.toJson()),polygons:s.toJson(this._encodeGeometries(a).geometries),polylines:s.toJson(this._encodeGeometries(b).geometries)});var m=this._autoCompleteHandler,q=this._errorHandler,u=new r(f._dfdCanceller);u._pendingDfd=g({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",
load:function(a,b){m(a,b,k,c,d,u)},error:function(a){q(a,d,u)}});return u},_autoCompleteHandler:function(a,b,c,d,f,g){try{var k=a.geometries;a=[];var m,r=k.length;for(m=0;m<r;m++)a[m]=new u({spatialReference:c,rings:k[m].rings});this._successHandler([a],"onAutoCompleteComplete",d,g)}catch(s){this._errorHandler(s,f,g)}},onAutoCompleteComplete:function(){},reshape:function(a,b,c,d){var k=a.spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:s.toJson(k.toJson()),target:s.toJson({geometryType:x.getJsonType(a),
geometry:a.toJson()}),reshaper:s.toJson(b.toJson())});var m=this._reshapeHandler,q=this._errorHandler,u=new r(f._dfdCanceller);u._pendingDfd=g({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,k,c,d,u)},error:function(a){q(a,d,u)}});return u},_reshapeHandler:function(a,b,c,d,f,g){try{var k=x.fromJson(a.geometry).setSpatialReference(c);this._successHandler([k],"onReshapeComplete",d,g)}catch(m){this._errorHandler(m,f,g)}},onReshapeComplete:function(){},cut:function(a,
c,d,k){var m=a[0].spatialReference,q=b.map(a,function(a){return a.toJson()});a=t.mixin({},this._url.query,{f:"json",sr:s.toJson(m.toJson()),target:s.toJson({geometryType:x.getJsonType(a[0]),geometries:q}),cutter:s.toJson(c.toJson())});var u=this._cutHandler,B=this._errorHandler,M=new r(f._dfdCanceller);M._pendingDfd=g({url:this._url.path+"/cut",content:a,callbackParamName:"callback",load:function(a,b){u(a,b,m,d,k,M)},error:function(a){B(a,k,M)}});return M},_cutHandler:function(a,c,d,f,g,k){try{var m=
a.geometries,r={};r.cutIndexes=a.cutIndexes;r.geometries=[];b.forEach(m,function(a){r.geometries.push(x.fromJson(a).setSpatialReference(d))});this._successHandler([r],"onCutComplete",f,k)}catch(s){this._errorHandler(s,g,k)}},onCutComplete:function(){},intersect:function(a,b,c,d){var k=a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:s.toJson(k.toJson()),geometries:s.toJson(this._encodeGeometries(a)),geometry:s.toJson({geometryType:x.getJsonType(b),geometry:b.toJson()})});var m=this._intersectHandler,
q=this._errorHandler,u=new r(f._dfdCanceller);u._pendingDfd=g({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,k,c,d,u)},error:function(a){q(a,d,u)}});return u},_intersectHandler:function(a,c,d,f,g,k){try{var m=[];b.forEach(a.geometries,function(a){m.push(x.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onIntersectComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},onIntersectComplete:function(){},difference:function(a,b,c,d){var k=
a[0].spatialReference;a=t.mixin({},this._url.query,{f:"json",sr:s.toJson(k.toJson()),geometries:s.toJson(this._encodeGeometries(a)),geometry:s.toJson({geometryType:x.getJsonType(b),geometry:b.toJson()})});var m=this._differenceHandler,q=this._errorHandler,u=new r(f._dfdCanceller);u._pendingDfd=g({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,k,c,d,u)},error:function(a){q(a,d,u)}});return u},_differenceHandler:function(a,c,d,f,g,k){try{var m=[];b.forEach(a.geometries,
function(a){m.push(x.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onDifferenceComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},onDifferenceComplete:function(){},buffer:function(a,b,c){var d=t.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.outSpatialReference||a.geometries[0].spatialReference,m=this._bufferHandler,s=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/buffer",content:d,callbackParamName:"callback",load:function(a,d){m(a,d,k,b,
c,q)},error:function(a){s(a,c,q)}});return q},_bufferHandler:function(a,b,c,d,f,g){try{var k=a.geometries;a=[];var m,r=k.length;for(m=0;m<r;m++)a[m]=new u({spatialReference:c,rings:k[m].rings});this._successHandler([a],"onBufferComplete",d,g)}catch(s){this._errorHandler(s,f,g)}},onBufferComplete:function(){},areasAndLengths:function(a,b,c){a=t.mixin({},this._url.query,{f:"json"},a.toJson());var d=this._areasAndLengthsHandler,k=this._errorHandler,m=new r(f._dfdCanceller);m._pendingDfd=g({url:this._url.path+
"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,f){d(a,f,b,c,m)},error:function(a){k(a,c,m)}});return m},_areasAndLengthsHandler:function(a,b,c,d,f){try{this._successHandler([a],"onAreasAndLengthsComplete",c,f)}catch(g){this._errorHandler(g,d,f)}},onAreasAndLengthsComplete:function(){},lengths:function(a,b,c){a=t.mixin({},this._url.query,{f:"json"},a.toJson());var d=this._lengthsHandler,k=this._errorHandler,m=new r(f._dfdCanceller);m._pendingDfd=g({url:this._url.path+"/lengths",
content:a,callbackParamName:"callback",load:function(a,f){d(a,f,b,c,m)},error:function(a){k(a,c,m)}});return m},_lengthsHandler:function(a,b,c,d,f){try{this._successHandler([a],"onLengthsComplete",c,f)}catch(g){this._errorHandler(g,d,f)}},onLengthsComplete:function(){},labelPoints:function(a,c,d){var k=b.map(a,function(a){return a.toJson()}),m=a[0].spatialReference,k=t.mixin({},this._url.query,{f:"json",sr:m.wkid?m.wkid:s.toJson(m.toJson()),polygons:s.toJson(k)}),q=this._labelPointsHandler,u=this._errorHandler,
x=new r(f._dfdCanceller);x._pendingDfd=g({url:this._url.path+"/labelPoints",content:k,callbackParamName:"callback",load:function(b,f){q(b,f,a,m,c,d,x)},error:function(a){u(a,d,x)}});return x},_labelPointsHandler:function(a,c,d,f,g,k,m){try{var r=[];b.forEach(a.labelPoints,function(a){r.push(x.fromJson(a).setSpatialReference(f))});this._successHandler([r],"onLabelPointsComplete",g,m)}catch(s){this._errorHandler(s,k,m)}},onLabelPointsComplete:function(){},relation:function(a,b,c){a=t.mixin({},this._url.query,
{f:"json"},a.toJson());var d=this._relationHandler,k=this._errorHandler,m=new r(f._dfdCanceller);m._pendingDfd=g({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,f){d(a,f,b,c,m)},error:function(a){k(a,c,m)}});return m},_relationHandler:function(a,b,c,d,f){try{this._successHandler([a.relations],"onRelationComplete",c,f)}catch(g){this._errorHandler(g,d,f)}},onRelationComplete:function(){},trimExtend:function(a,b,c){var d=t.mixin({},this._url.query,{f:"json"},a.toJson()),
k=a.sr,m=this._trimExtendHandler,s=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/trimExtend",content:d,callbackParamName:"callback",load:function(a,d){m(a,d,k,b,c,q)},error:function(a){s(a,c,q)}});return q},_trimExtendHandler:function(a,b,c,f,g,k){try{var m=a.geometries;a=[];var r,s=m.length;for(r=0;r<s;r++)a[r]=new d({spatialReference:c,paths:m[r].paths});this._successHandler([a],"onTrimExtendComplete",f,k)}catch(q){this._errorHandler(q,g,k)}},onTrimExtendComplete:function(){},
densify:function(a,b,c){var d=t.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometries[0].spatialReference,m=this._densifyHandler,s=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/densify",content:d,callbackParamName:"callback",load:function(a,d){m(a,d,k,b,c,q)},error:function(a){s(a,c,q)}});return q},_densifyHandler:function(a,c,d,f,g,k){try{var m=[];b.forEach(a.geometries,function(a){m.push(x.fromJson(a).setSpatialReference(d))});this._successHandler([m],
"onDensifyComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},onDensifyComplete:function(){},generalize:function(a,b,c){var d=t.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometries[0].spatialReference,m=this._generalizeHandler,s=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/generalize",content:d,callbackParamName:"callback",load:function(a,d){m(a,d,k,b,c,q)},error:function(a){s(a,c,q)}});return q},_generalizeHandler:function(a,c,d,f,g,k){try{var m=[];
b.forEach(a.geometries,function(a){m.push(x.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onGeneralizeComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},onGeneralizeComplete:function(){},offset:function(a,b,c){var d=t.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometries[0].spatialReference,m=this._offsetHandler,s=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/offset",content:d,callbackParamName:"callback",load:function(a,d){m(a,d,k,b,
c,q)},error:function(a){s(a,c,q)}});return q},_offsetHandler:function(a,c,d,f,g,k){try{var m=[];b.forEach(a.geometries,function(a){m.push(x.fromJson(a).setSpatialReference(d))});this._successHandler([m],"onOffsetComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},onOffsetComplete:function(){},distance:function(a,b,c){var d=t.mixin({},this._url.query,{f:"json"},a.toJson()),k=a.geometry1.spatialReference,m=this._distanceHandler,s=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+
"/distance",content:d,callbackParamName:"callback",load:function(a,d){m(a,d,k,b,c,q)},error:function(a){s(a,c,q)}});return q},_distanceHandler:function(a,b,c,d,f,g){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",d,g)}catch(k){this._errorHandler(k,f,g)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,b,c){var d={};t.isObject(a.sr)?d.sr=a.sr.wkid||s.toJson(a.sr.toJson()):d.sr=a.sr;d.coordinates=s.toJson(a.coordinates);d.conversionType=a.conversionType||"MGRS";d.conversionMode=
a.conversionMode;d.numOfDigits=a.numOfDigits;d.rounding=a.rounding;d.addSpaces=a.addSpaces;a=t.mixin({},this._url.query,{f:"json"},d);var k=this._toGeoCoordinateHandler,m=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,d){k(a,d,b,c,q)},error:function(a){m(a,c,q)}});return q},_toGeoCoordinateHandler:function(a,b,c,d,f){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
c,f)}catch(g){this._errorHandler(g,d,f)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(a,b,c){var d={};t.isObject(a.sr)?d.sr=a.sr.wkid||s.toJson(a.sr.toJson()):d.sr=a.sr;d.strings=s.toJson(a.strings);d.conversionType=a.conversionType||"MGRS";d.conversionMode=a.conversionMode;a=t.mixin({},this._url.query,{f:"json"},d);var k=this._fromGeoCoordinateHandler,m=this._errorHandler,q=new r(f._dfdCanceller);q._pendingDfd=g({url:this._url.path+"/fromGeoCoordinateString",content:a,
callbackParamName:"callback",load:function(a,d){k(a,d,b,c,q)},error:function(a){m(a,c,q)}});return q},_fromGeoCoordinateHandler:function(a,b,c,d,f){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,f)}catch(g){this._errorHandler(g,d,f)}},onFromGeoCoordinateStringComplete:function(){}});t.mixin(q,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});m("extend-esri")&&t.setObject("tasks.GeometryService",q,k);return q})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/sniff dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/promise/all ../kernel ../lang ../request ../config ../deferredUtils ../SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./FeatureType ./FeatureTemplate ./FeatureEditResult ./LabelClass ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./TrackManager ./HeatmapManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S,L,Q,R,X,V,O,U,v,K,C,l,e,h,n,z,F,N,T,W,ea,na,sa,Ja,Da){var pa=D.defaults,ka=b(l,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],
"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]},constructor:function(e,a){this._preventInit||this._initFeatureLayer(e,a)},_initFeatureLayer:function(e,a){this.i18n=Da;a=a||{};this.showLabels=null!=a.showLabels?a.showLabels:!0;
this._outFields=a.outFields;this._defnExpr=a.definitionExpression;this._loadCallback=a.loadCallback;var h=a._usePatch;this._usePatch=null===h||void 0===h?!0:h;this._trackIdField=a.trackIdField;this.objectIdField=a.objectIdField;this._maxOffset=null!=a.maxAllowableOffset?a.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=a.quantize?a.quantize:!0;this._optEditable=a.editable;this._optAutoGen=a.autoGeneralize;this.editSummaryCallback=a.editSummaryCallback;this.userId=a.userId;this.userIsAdmin=
a.userIsAdmin;this.useMapTime=a.hasOwnProperty("useMapTime")?!!a.useMapTime:!0;this.source=a.source;this.gdbVersion=a.gdbVersion;this.orderByFields=a.orderByFields;this.maxPointCountForAuto=null!=a.maxPointCountForAuto?a.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=a.maxRecordCountForAuto?a.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=a.maxVertexCountForAuto?a.maxVertexCountForAuto:this.maxVertexCountForAuto;this.generalizeForScale=
null!=a.generalizeForScale?a.generalizeForScale:this.generalizeForScale;this.queryPagination=null!=a.queryPagination?a.queryPagination:this.url?this.reHostedFS.test(this.url):!1;this.multipatchOption=a.multipatchOption;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var b=ka,h=this.mode=w.isDefined(a.mode)?a.mode:b.MODE_ONDEMAND;this._isStream&&(this.mode=h=b.MODE_STREAM);switch(h){case b.MODE_SNAPSHOT:this.currentMode=
b.MODE_SNAPSHOT;this._mode=new T(this);this._isSnapshot=!0;break;case b.MODE_ONDEMAND:case b.MODE_AUTO:this.currentMode=b.MODE_ONDEMAND;this._tileWidth=a.tileWidth||512;this._tileHeight=a.tileHeight||512;this._mode=new W(this);this.latticeTiling=a.latticeTiling;break;case b.MODE_SELECTION:this.currentMode=b.MODE_SELECTION;this._mode=new ea(this);this._isSelOnly=!0;break;case b.MODE_STREAM:this.currentMode=b.MODE_STREAM,this._mode=new na(this),this._isStream=!0}this._initLayer=r.hitch(this,this._initLayer);
this._selectHandler=r.hitch(this,this._selectHandler);this._editable=!1;if(r.isObject(e)&&e.layerDefinition)return this._collection=!0,this.mode=this._isStream?b.MODE_STREAM:b.MODE_SNAPSHOT,this._initLayer(e),this;this._task=new R(this.url,{source:this.source,gdbVersion:this.gdbVersion});h=this._url.path;this._fserver=!1;-1!==h.search(/\/FeatureServer\//i)&&(this._fserver=!0);this.mode===b.MODE_AUTO&&this.reHostedFS.test(this.url)&&this._queryLimit();(b=a.resourceInfo)?this._initLayer(b):(this.source&&
(b={source:this.source.toJson()},this._url.query=r.mixin(this._url.query,{layer:k.toJson(b)})),this.gdbVersion&&(this._url.query=r.mixin(this._url.query,{gdbVersion:this.gdbVersion})),E({url:h,content:r.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler}));this.registerConnectEvents()},_initLayer:function(b,l){if(b||l){this._json=b;this._findCredential();if(this.credential&&this.credential.ssl||b&&b._ssl)this._useSSL(),this._task._useSSL();
this.version=b.currentVersion;this.version||(this.version="capabilities"in b||"drawingInfo"in b||"hasAttachments"in b||"htmlPopupType"in b||"relationships"in b||"timeInfo"in b||"typeIdField"in b||"types"in b?10:9.3);this._collection&&(this._isStream||(this.currentMode=ka.MODE_SNAPSHOT,this._mode=new T(this)),this._isSnapshot=!0,this._featureSet=b.featureSet,this._nextId=b.nextObjectId,b=b.layerDefinition);this.geometryType=b.geometryType;"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===
this.geometryType&&(this.multipatchOption="xyFootprint");if(b.hasOwnProperty("capabilities")){var v=this.capabilities=b.capabilities;v&&-1!==v.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);w.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._json=k.toJson(this._json);if(this.isEditable())this._setMaxOffset(null);
else if(this.mode!==ka.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))this._autoGeneralize=w.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===ka.MODE_ONDEMAND||this.mode===ka.MODE_AUTO,delete this._optAutoGen;var v=b.effectiveMinScale||b.minScale,c=b.effectiveMaxScale||b.maxScale;!this._hasMin&&v&&this.setMinScale(v);!this._hasMax&&c&&this.setMaxScale(c);this.layerId=b.id;this.name=b.name;this.description=b.description;
this.copyright=b.copyrightText;this.type=b.type;this.displayField=b.displayField;this.defaultDefinitionExpression=b.definitionExpression;this.fullExtent=new U(b.extent);this.initialExtent=new U(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new H(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=b.defaultVisibility;if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=b.hasM||!1;
this.hasZ=b.hasZ||!1;this.indexedFields=b.indexedFields;this.maxRecordCount=b.maxRecordCount;this.canModifyLayer=b.canModifyLayer;this.supportsStatistics=b.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:b.supportsAdvancedQueries;this.supportsCalculate=b.supportsCalculate;this.supportsAttachmentsByUploadId=b.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=b.supportsCoordinatesQuantization;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
b.hasLabels;this.canScaleSymbols=b.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=b.supportsRollbackOnFailure;this.syncCanReturnChanges=b.syncCanReturnChanges;this.isDataVersioned=b.isDataVersioned;this.editFieldsInfo=b.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=b.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=b.relationships;
this.allowGeometryUpdates=w.isDefined(b.allowGeometryUpdates)?b.allowGeometryUpdates:!0;this.advancedQueryCapabilities=b.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.useStandardizedQueries=b.useStandardizedQueries;this.tileMaxRecordCount=b.tileMaxRecordCount;this.standardMaxRecordCount=b.standardMaxRecordCount;this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;
for(var F=this.fields=[],c=b.fields,v=0;v<c.length;v++)F.push(new e(c[v]));if(!this.objectIdField&&(this.objectIdField=b.objectIdField,!this.objectIdField)){c=b.fields;for(v=0;v<c.length;v++)if(F=c[v],"esriFieldTypeOID"===F.type){this.objectIdField=F.name;break}}if(!w.isDefined(this._nextId)){c=this.objectIdField;F=-1;if(this._collection&&c)for(var d=(v=this._featureSet)&&v.features,f=d?d.length:0,g,v=0;v<f;v++)g=(g=d[v].attributes)&&g[c],g>F&&(F=g);this._nextId=F+1}this.globalIdField=b.globalIdField;
if(v=this.typeIdField=b.typeIdField)if(v=!this._getField(v)&&this._getField(v,!0))this.typeIdField=v.name;this.visibilityField=b.visibilityField;if(c=b.defaultSymbol)this.defaultSymbol=J.fromJson(c);var W=this.types=[],C=b.types,s,q,F=(v=this.editFieldsInfo)&&v.creatorField,d=v&&v.editorField;g=F||d;f=[];if(C)for(v=0;v<C.length;v++)s=new n(C[v]),q=s.templates,g&&(q&&q.length)&&(f=f.concat(q)),W.push(s);C=b.templates;s=this.templates=[];if(C)for(v=0;v<C.length;v++)W=new z(C[v]),g&&f.push(W),s.push(W);
for(v=0;v<f.length;v++)if(g=r.getObject("prototype.attributes",!1,f[v]))F&&delete g[F],d&&delete g[d];if(v=b.timeInfo)this.timeInfo=new h(v),this._startTimeField=v.startTimeField,this._endTimeField=v.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?v.trackIdField=this._trackIdField:this._trackIdField=v.trackIdField;this.hasAttachments=!this._collection&&b.hasAttachments?!0:!1;this.htmlPopupType=b.htmlPopupType;var v=b.drawingInfo,ea;if((F=v&&v.labelingInfo)&&
!this.labelingInfo)this.labelingInfo=m.map(F,function(e){return new N(e)}),this._fixLabelExpr();if(!this.renderer)if(v&&v.renderer){if(ea=v.renderer,this.setRenderer(Q.fromJson(ea)),"classBreaks"===ea.type&&this.renderer.setMaxInclusive(!0),!this._collection){var u=ea.type,c=[];ea=this.renderer;switch(u){case "simple":c.push(ea.symbol);break;case "uniqueValue":case "classBreaks":c.push(ea.defaultSymbol),c=c.concat(m.map(ea.infos,function(e){return e.symbol}))}var c=m.filter(c,w.isDefined),t=this._url.path+
"/images/",na=this._getToken();m.forEach(c,function(e){var a=e.url;a&&(-1===a.search(/https?\:/)&&-1===a.indexOf("data:")&&(e.url=t+a),na&&-1!==e.url.search(/https?\:/)&&(e.url+="?token\x3d"+na))})}}else if(c)C=this.types,0<C.length?(ea=new L(this.defaultSymbol,this.typeIdField),m.forEach(C,function(e){ea.addValue(e.id,e.symbol)})):ea=new S(this.defaultSymbol),this.setRenderer(ea);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":u=new G;break;
case "esriGeometryPolyline":u=new I;break;case "esriGeometryPolygon":u=new M;break;default:this.hasXYFootprint()&&(u=new M)}this.setRenderer(u?new S(u):null)}u=v&&v.transparency||0;!this.hasOwnProperty("opacity")&&0<u&&(this.opacity=1-u/100);if((a("ie")||7<=a("trident")||a("safari"))&&this.isEditable()&&10.02>this.version)this._ts=!0;this.statistics=b.statistics;this._fixRendererFields();this._checkFields();this._updateCaps();var x=function(){this.currentMode!==ka.MODE_SNAPSHOT&&(this.queryPagination=
!1);null!=this._maxOffset&&!this._isFractionalOffsetAllowed()&&this._setMaxOffset(this._maxOffset);this.loaded=!0;this.onLoad(this);var e=this._loadCallback;e&&(delete this._loadCallback,e(this))};this._collection?(u=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new V(u)),this._fcAdded=!0,x.call(this)):this._forceIdentity(this._limitPromise?function(){var e=this;this._limitPromise.then(function(a){e._checkMode(a)});this._limitPromise.always(function(){e._limitPromise=null;x.call(e)})}:
x)}},setShowLabels:function(e){this.showLabels=e;this.onShowLabelsChange()},onShowLabelsChange:function(){},onRendererChange:function(e){this.inherited(arguments);var a=this._map;this._ager=!(!e||!e.observationAger||!e.observationRenderer);e&&"colors"in e&&"blurRadius"in e&&"maxPixelIntensity"in e?"esriGeometryPoint"==this.geometryType&&(!this._heatmapManager&&a)&&(this._heatmapManager=new Ja(this),this._heatmapManager.initialize(a)):this.renderer&&this.renderer.getRendererInfo?m.some(this.renderer.rendererInfos,
function(e){return e.renderer&&"colors"in e.renderer&&"blurRadius"in e.renderer})||(this._heatmapManager=null):this._heatmapManager=null;if(e){var h=[],a=m.filter([e,e.observationRenderer,e.latestObservationRenderer,e.trackRenderer],w.isDefined),b=function(e){return null!=e&&"function"!=typeof e&&e};m.forEach(a,function(e){var a=b(e.attributeField),n=b(e.attributeField2);e=b(e.attributeField3);!1!==a&&h.push(a);!1!==n&&h.push(n);!1!==e&&h.push(e)});this._rendererFields=h}else this._rendererFields=
[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._rendererFields),this._collection&&(this._typesDirty=!0))},redraw:function(){this.inherited(arguments);this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(){this.inherited(arguments);var e=this._getRenderer();this._ager=!(!e||!e.observationAger||!e.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(e&&e.trackRenderer)},
_setMap:function(e){var a=this.inherited(arguments),h=this._mode,b=this;h&&h.initialize(e);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(e){e=e.graphic.attributes;(e=b._selectedFeatures[e&&e[b.objectIdField]])&&e.attr("data-selected","")});return a},_unsetMap:function(e){var a=this._mode;a&&a.suspend();this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);s.disconnect(this._zoomConnect);
s.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this._toggleTime(!1);this.inherited("_unsetMap",arguments)},refresh:function(){this._needsRefresh=!1;var e=this._mode;e&&e.refresh()},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return m.filter(this._getOutFields(),function(e){return"*"===e||!!this._getField(e)},this)},getField:function(e){return this._getField(e,!0)},getFieldLabel:function(e){var a=
this.infoTemplate,a=a&&a.getFieldInfo&&a.getFieldInfo(e);e=r.isFunction(e)?null:this.getField(e);var h=a||e,b="";h&&(b=a&&a.label||e&&e.alias||h.name||h.fieldName);return b},getDomain:function(e,a){var h,b,n=a&&a.feature,l=n&&this.typeIdField&&n.attributes&&n.attributes[this.typeIdField];null!=l&&m.some(this.types,function(a){if(a.id==l){if((h=a.domains&&a.domains[e])&&"inherited"===h.type)h=this._getLayerDomain(e),b=!0;return!0}return!1},this);!b&&!h&&(h=this._getLayerDomain(e));return h},_getLayerDomain:function(e){var a;
m.some(this.fields,function(h){h.name===e&&(a=h.domain);return!!a});return a},getType:function(e){var a,h=e&&this.typeIdField&&e.attributes&&e.attributes[this.typeIdField];m.some(this.types,function(e){e.id==h&&(a=e);return!!a});return a},setEditable:function(e){if(!this._collection)return this;if(!this.loaded)return this._optEditable=e,this;var a=this._editable;this._editable=e;this._updateCaps();if(a!==e)this.onCapabilitiesChange();return this},getEditCapabilities:function(e){var a={canCreate:!1,
canUpdate:!1,canDelete:!1};if(!this.loaded||!this.isEditable())return a;var h=e&&e.feature;e=e&&e.userId||this.getUserId();var b=m.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],r.trim),n=(a=-1<m.indexOf(b,"editing"))&&-1<m.indexOf(b,"create"),l=a&&-1<m.indexOf(b,"update"),b=a&&-1<m.indexOf(b,"delete"),z=this.ownershipBasedAccessControlForFeatures,v=this.editFieldsInfo,c=v&&v.creatorField,v=v&&v.realm,h=(h=h&&h.attributes)&&c?h[c]:void 0,F=!!this.userIsAdmin,c=!z||F||!(!z.allowOthersToUpdate&&
!z.allowUpdateToOthers),d=!z||F||!(!z.allowOthersToDelete&&!z.allowDeleteToOthers),f=!z||F||!z.hasOwnProperty("allowAnonymousToUpdate")||z.allowAnonymousToUpdate,z=!z||F||!z.hasOwnProperty("allowAnonymousToDelete")||z.allowAnonymousToDelete;e&&v&&(e=e+"@"+v);if(F||a&&!n&&!l&&!b)n=l=b=!0;a={canCreate:n,canUpdate:l,canDelete:b};e||(a.canUpdate=a.canUpdate&&f,a.canDelete=a.canDelete&&z);null===h?(a.canUpdate=a.canUpdate&&c,a.canDelete=a.canDelete&&d):""!==h&&(h&&e.toLowerCase()!==h.toLowerCase())&&(a.canUpdate=
a.canUpdate&&c,a.canDelete=a.canDelete&&d);return a},getUserId:function(){var e;this.loaded&&(e=this.credential&&this.credential.userId||this.userId||"");return e},setUserIsAdmin:function(e){this.userIsAdmin=e},setEditSummaryCallback:function(e){this.editSummaryCallback=e},getEditSummary:function(e,a,h){h=w.isDefined(h)?h:(new Date).getTime();var b="";h=this.getEditInfo(e,a,h);(a=a&&a.callback||this.editSummaryCallback)&&(h=a(e,h)||"");if(r.isString(h))b=h;else{if(h){e=h.action;a=h.userId;var n=h.timeValue,
l=0;e&&l++;a&&l++;w.isDefined(n)&&l++;1<l&&(b=("edit"===e?"edit":"create")+(a?"User":"")+(w.isDefined(n)?h.displayPattern:""))}b=b&&w.substitute(h,this.i18n.layers.FeatureLayer[b])}return b},getEditInfo:function(e,a,h){if(this.loaded){h=w.isDefined(h)?h:(new Date).getTime();a=a&&a.action||"last";var b=this.editFieldsInfo,n=b&&b.creatorField,l=b&&b.creationDateField,z=b&&b.editorField,b=b&&b.editDateField,z=(e=e&&e.attributes)&&z?e[z]:void 0,b=e&&b?e[b]:null,n=this._getEditData(e&&n?e[n]:void 0,e&&
l?e[l]:null,h);h=this._getEditData(z,b,h);var v;switch(a){case "creation":v=n;break;case "edit":v=h;break;case "last":v=h||n}v&&(v.action=v===h?"edit":"creation");return v}},_getEditData:function(e,a,h){var b,n,l;w.isDefined(a)&&(n=h-a,l=0>n?"Full":6E4>n?"Seconds":12E4>n?"Minute":36E5>n?"Minutes":72E5>n?"Hour":864E5>n?"Hours":6048E5>n?"WeekDay":"Full");if(void 0!==e||l)b=b||{},b.userId=e,l&&(e=f.format,h=new Date(a),b.minutes=Math.floor(n/6E4),b.hours=Math.floor(n/36E5),b.weekDay=e(h,{datePattern:"EEEE",
selector:"date"}),b.formattedDate=e(h,{selector:"date"}),b.formattedTime=e(h,{selector:"time"}),b.displayPattern=l,b.timeValue=a);return b},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},setMaxAllowableOffset:function(e){this.isEditable()||this._setMaxOffset(e,!0);return this},getMaxAllowableOffset:function(){var e=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:e},_setMaxOffset:function(e,a){if(null==e)return delete this._maxOffset,
delete this._quantizationParameters,this;if(this.quantize&&this.supportsCoordinatesQuantization)"esriGeometryPolyline"===this.geometryType?this._maxOffset=e:delete this._maxOffset,this._quantizationParameters={mode:"view",originPosition:"upperLeft",tolerance:e,extent:this.fullExtent};else{if(!this._isFractionalOffsetAllowed()||!a)e=Math.floor(e);isNaN(e)||0===e?delete this._maxOffset:this._maxOffset=e;delete this._quantizationParameters}return this},_isFractionalOffsetAllowed:function(){return null==
this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(e){e=(e=e&&e.split("-"))&&e[0]&&e[0].toLowerCase();return-1!==m.indexOf(this._langsWithDot,e)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(e){if(this.loaded){if(!this.isEditable()&&this.mode!==ka.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))(this._autoGeneralize=
e)?(this._autoSnapshot&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)}else this._optAutoGen=e;return this},setGDBVersion:function(e){if(!this._collection&&e!==this.gdbVersion&&(e||this.gdbVersion))this.gdbVersion=e,this._task.gdbVersion=e,this._url.query=r.mixin(this._url.query,{gdbVersion:e}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange();return this},setDefinitionExpression:function(e){this._defnExpr=e;(e=this._mode)&&e.propertyChangeHandler(1);
return this},getDefinitionExpression:function(){return this._defnExpr},setTimeDefinition:function(e){this._isSnapshot&&(this._timeDefn=e,(e=this._mode)&&e.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(e,a){this._timeOffset=e;this._timeOffsetUnits=a;var h=this._mode;h&&h.propertyChangeHandler(0);return this},setUseMapTime:function(e){this.useMapTime=e;this._toggleTime(!this.suspended);(e=this._mode)&&e.propertyChangeHandler(0)},selectFeatures:function(e,
a,h,b){a=a||ka.SELECTION_NEW;e=this._getShallowClone(e);var n=this._map,l,z=this,v=A._fixDfd(new g(A._dfdCanceller));e.outFields=this.getOutFields();e.returnGeometry=!0;e.multipatchOption=this.multipatchOption;n&&(e.outSpatialReference=new H(n.spatialReference.toJson()));if(!this._applyQueryFilters(e,!0))return l={features:[]},this._selectHandler(l,a,h,b,v),v;if(n=this._canDoClientSideQuery(e))v._pendingDfd=B(this._doQuery(e,n)),v._pendingDfd.then(function(e){l={features:e};z._selectHandler(l,a,h,
b,v)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,b,v,!0),v;var c=this;this._ts&&(e._ts=(new Date).getTime());(v._pendingDfd=this._task.execute(e)).addCallbacks(function(e){c._selectHandler(e,a,h,b,v)},function(e){c._resolve([e],null,b,v,!0)})}return v},getSelectedFeatures:function(){var e=this._selectedFeatures,a=[],h;for(h in e)e.hasOwnProperty(h)&&a.push(e[h]);return a},clearSelection:function(e){var a=this._selectedFeatures,
h=this._mode,b;for(b in a)a.hasOwnProperty(b)&&(this._unSelectFeatureIIf(b,h),h._removeFeatureIIf(b));this._selectedFeatures={};this._isSelOnly&&h._applyTimeFilter(!0);if(!e)this.onSelectionClear();return this},setSelectionSymbol:function(e){if(this._selectionSymbol=e){var a=this._selectedFeatures,h;for(h in a)a.hasOwnProperty(h)&&a[h].setSymbol(e)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(e){e?(this.labelingInfo=e,this._fixLabelExpr()):delete this.labelingInfo;
this._collection&&(this._typesDirty=!0);this.onLabelingInfoChange()},_fixLabelExpr:function(){var e=/\[([^\[\]]+)\]/ig,a,h=this,b=function(e,a){var b=h._getField(a,!0);return"["+(b&&b.name||a)+"]"};m.forEach(this.labelingInfo,function(h){if(a=h.labelExpression)h.labelExpression=a.replace(e,b)})},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(e,a,h,b,n,l){var z=l.assembly,v=l.dfd;this._applyNormalized(e,z&&z[0]);this._applyNormalized(a,z&&z[1]);this.onBeforeApplyEdits(e,
a,h);var c={},F=this.objectIdField,z={f:"json"},d=!1;if(this._collection)l={},l.addResults=e?m.map(e,function(){d=!0;return{objectId:this._nextId++,success:!0}},this):null,l.updateResults=a?m.map(a,function(e){d=!0;var a=e.attributes[F];c[a]=e;return{objectId:a,success:!0}},this):null,l.deleteResults=h?m.map(h,function(e){d=!0;return{objectId:e.attributes[F],success:!0}},this):null,d?this._editHandler(l,e,c,b,n,v):this._resolve([l.addResults,l.updateResults,l.deleteResults],null,b,v);else{e&&0<e.length&&
(z.adds=this._convertFeaturesToJson(e,0,1),d=!0);if(a&&0<a.length){for(l=0;l<a.length;l++){var f=a[l];c[f.attributes[F]]=f}z.updates=this._convertFeaturesToJson(a,0,0,1);d=!0}if(h&&0<h.length){a=[];for(l=0;l<h.length;l++)a.push(h[l].attributes[F]);z.deletes=a.join(",");d=!0}if(d){var N=this;return E({url:this._url.path+"/applyEdits",content:r.mixin(z,this._url.query),callbackParamName:"callback",load:function(a){N._editHandler(a,e,c,b,n,v)},error:function(e){N._resolve([e],null,n,v,!0)}},{usePost:!0})}this._resolve([],
null,b,v)}},queryFeatures:function(e,a,h){return this._query("execute","onQueryFeaturesComplete",e,a,h)},queryRelatedFeatures:function(e,a,h){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",e,a,h)},queryIds:function(e,a,h){return this._query("executeForIds","onQueryIdsComplete",e,a,h)},queryCount:function(e,a,h){return this._query("executeForCount","onQueryCountComplete",e,a,h)},queryExtent:function(e,a,h){return this._query("executeForExtent","onQueryExtentComplete",
e,a,h)},queryAttachmentInfos:function(e,a,h){var b=this._url.path+"/"+e+"/attachments",n=new g(A._dfdCanceller),l=this;n._pendingDfd=E({url:b,content:r.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(h){h=h.attachmentInfos;var z;m.forEach(h,function(a){z=c.objectToQuery({gdbVersion:l._url.query&&l._url.query.gdbVersion,layer:l._url.query&&l._url.query.layer,token:l._getToken()});a.url=b+"/"+a.id+(z?"?"+z:"");a.objectId=e});l._resolve([h],"onQueryAttachmentInfosComplete",
a,n)},error:function(e){l._resolve([e],null,h,n,!0)}});return n},addAttachment:function(e,a,h,b){return this._sendAttachment("add",e,a,h,b)},updateAttachment:function(e,a,h,b,n){h.appendChild(d.create("input",{type:"hidden",name:"attachmentId",value:a}));return this._sendAttachment("update",e,h,b,n)},deleteAttachments:function(e,a,h,b){var n=this._url.path+"/"+e+"/deleteAttachments",l=new g(A._dfdCanceller),z=this;a={f:"json",attachmentIds:a.join(",")};l._pendingDfd=E({url:n,content:r.mixin(a,this._url.query),
callbackParamName:"callback",load:r.hitch(this,function(a){a=a.deleteAttachmentResults;a=m.map(a,function(a){a=new F(a);a.attachmentId=a.objectId;a.objectId=e;return a});z._resolve([a],"onDeleteAttachmentsComplete",h,l)}),error:function(e){z._resolve([e],null,b,l,!0)}},{usePost:!0});return l},addType:function(e){var a=this.types;if(a){if(m.some(a,function(a){return a.id==e.id?!0:!1}))return!1;a.push(e)}else this.types=[e];return this._typesDirty=!0},deleteType:function(e){if(this._collection){var a=
this.types;if(a){var h=-1;m.some(a,function(a,b){return a.id==e?(h=b,!0):!1});if(-1<h)return this._typesDirty=!0,a.splice(h,1)[0]}}},toJson:function(){var e=this._json;if(e=r.isString(e)?k.fromJson(e):r.clone(e)){var e=e.layerDefinition?e:{layerDefinition:e},a=e.layerDefinition,h=this._collection;if(h&&this._typesDirty){a.types=m.map(this.types||[],function(e){return e.toJson()});var b=this.renderer,n=this.labelingInfo,l=a.drawingInfo;if((b||n)&&!l)l=a.drawingInfo={};l&&(b&&-1===b.declaredClass.indexOf("TemporalRenderer"))&&
(l.renderer=b.toJson());n&&(l.labelingInfo=m.map(n,function(e){return e.toJson()}))}b=null;if(!h||this._fcAdded)b={geometryType:a.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};e.featureSet=r.mixin({},e.featureSet||{},b);e.featureSet.transform&&(n=e.featureSet.transform,delete e.featureSet.transform,b=new V(e.featureSet),b.quantize(n),e.featureSet=b.toJson());h&&(e.nextObjectId=this._nextId,a.capabilities=this.capabilities);return e}},onSelectionComplete:function(){},onSelectionClear:function(){},
onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},
onLabelingInfoChange:function(){},_forceIdentity:function(e){var a=this,h,b=this._url&&this._url.path;h=b&&b.toLowerCase().indexOf("/rest/services");var n=this.editFieldsInfo,n=n&&(n.creatorField||n.editorField);(this.userIsAdmin||n)&&!this._getToken()&&-1<h&&y.id?(h=b.substring(0,h)+"/rest/info",E({url:h,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(e){if(e.owningSystemUrl)return y.id.checkSignInStatus(e.owningSystemUrl+"/sharing")}).then(function(e){if(e)return y.id.getCredential(b)}).then(function(e){e&&
a._findCredential()}).always(function(){e.call(a)})):e.call(this)},_checkMode:function(e){var a=this.geometryType,h=this.maxRecordCount;e=(e=e&&e.features&&e.features[0])&&e.attributes&&e.attributes.exceedslimit;if(this.mode===ka.MODE_AUTO&&!this.isEditable()&&0===e&&(this.queryPagination||("esriGeometryPolyline"===a||"esriGeometryPolygon"===a||"esriGeometryMultipoint"===a||this.hasXYFootprint())&&h>=this.maxRecordCountForAuto||"esriGeometryPoint"===a&&h>=this.maxPointCountForAuto))this.currentMode=
ka.MODE_SNAPSHOT,this._mode=new T(this),this._isSnapshot=this._autoSnapshot=!0},_queryLimit:function(){var e=this,a=new g;this._limitPromise=a.promise;setTimeout(function(){var h=new X,b=new O;b.statisticType="exceedslimit";b.maxPointCount=e.maxPointCountForAuto;b.maxRecordCount=e.maxRecordCountForAuto;b.maxVertexCount=e.maxVertexCountForAuto;b.outStatisticFieldName="exceedslimit";h.outStatistics=[b];e.queryFeatures(h).promise.then(function(e){a.resolve(e)},function(e){a.reject(e)})},0)},_updateCaps:function(){var e=
this._editable,a=r.trim(this.capabilities||""),h=m.map(a?a.split(","):[],r.trim),b=m.map(a?a.toLowerCase().split(","):[],r.trim),a=m.indexOf(b,"editing"),n,b={Create:m.indexOf(b,"create"),Update:m.indexOf(b,"update"),Delete:m.indexOf(b,"delete")};if(e&&-1===a)h.push("Editing");else if(!e&&-1<a){e=[a];for(n in b)-1<b[n]&&e.push(b[n]);e.sort();for(n=e.length-1;0<=n;n--)h.splice(e[n],1)}this.capabilities=h.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);
this._toggleTime(!1);var e=this._mode;e&&e.suspend()},onResume:function(e){this.inherited(arguments);this._toggleTime(!0);var a=this._mode,h=this._map,b=this._getRenderer();if(e.firstOccurrence){this._fixRendererFields();this._checkFields();this.clearSelection();if(this.timeInfo&&!this._trackManager&&(this._trackIdField||b&&(b.latestObservationRenderer||b.trackRenderer)))this._trackManager=new sa(this),this._trackManager.initialize(h),this._childLayer=this._trackManager.container;b&&("colors"in b&&
"blurRadius"in b&&"maxPixelIntensity"in b)&&("esriGeometryPoint"==this.geometryType&&!this._heatmapManager)&&(this._heatmapManager=new Ja(this),this._heatmapManager.initialize(h));if(this._autoSnapshot&&this._autoGeneralize&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())&&!this.isEditable()&&null==this.getMaxAllowableOffset())b=this.generalizeForScale,this._calculatedScale=b=this.maxScale?this.maxScale:this.minScale?Math.min(b,this.minScale):
Math.min(b,C.getScale(h,this.initialExtent)),this._calcMaxOffset=h.extent.getWidth()/h.width/h.getScale()*b;this._zoomConnect=s.connect(h,"onZoomEnd",this,this._zoomEndHandler);this._updateMaxOffset();this._needsRefresh=!1;a&&a.startup()}else this._zoomEndHandler(),a&&a.resume()},_zoomEndHandler:function(){var e=this._map;this._updateMaxOffset();this._prevScale=e.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var e=this._map;e&&e.loaded&&this._autoGeneralize&&
(this._autoSnapshot?(e=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=e!=this.getMaxAllowableOffset())):this._setMaxOffset(e.extent.getWidth()/e.width,!e.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var e=this._map.getScale(),a=this._calculatedScale,h=this._calcMaxOffset,b=this._prevScale;return e>=a&&(null==b||b<a)?h:e<a&&(null==b||b>=a)?null:this.getMaxAllowableOffset()}},_toggleTime:function(e){var a=
this._map;e&&this.timeInfo&&this.useMapTime&&a?(this._mapTimeExtent=a.timeExtent,this._timeConnect||(this._timeConnect=s.connect(a,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,s.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(e){this._mapTimeExtent=e;(e=this._mode)&&e.propertyChangeHandler(0)},_getOffsettedTE:function(e){var a=this._timeOffset,h=this._timeOffsetUnits;return e&&a&&h?e.offset(-1*a,h):e},_getTimeOverlap:function(e,
a){return e&&a?e.intersection(a):e||a},_getTimeFilter:function(e){var a=this.getTimeDefinition(),h;if(a&&(h=this._getTimeOverlap(a,null),!h))return[!1];if(e){if(e=h?this._getTimeOverlap(e,h):e,!e)return[!1]}else e=h;return[!0,e]},_getAttributeFilter:function(e){var a=this.getDefinitionExpression();return e?a?"("+a+") AND ("+e+")":e:a},_applyQueryFilters:function(e,a){e.where=this._getAttributeFilter(e.where);e.maxAllowableOffset||(e.maxAllowableOffset=this._maxOffset);e.quantizationParameters=this._quantizationParameters;
a&&this.supportsAdvancedQueries&&(e.orderByFields=e.orderByFields||this.getOrderByFields());if(this.timeInfo){var h=this._getTimeFilter(e.timeExtent);if(h[0])e.timeExtent=h[1];else return!1}return!0},_add:function(e){var a=this._selectionSymbol,h=e.attributes,b=this.visibilityField;a&&this._isSelOnly&&e.setSymbol(a);if(b&&h&&h.hasOwnProperty(b))e[h[b]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(e){var a=
[],h=this._map,b;if(!(this._isTable||!h&&!this._collection))if(!e.text&&!(e.where&&e.where!==this.getDefinitionExpression()||e.orderByFields&&e.orderByFields.length&&(b=this.getOrderByFields()||[])&&e.orderByFields.join()!==b.join()||e.outStatistics||e.returnDistinctValues)){b=this._isSnapshot;var n=this._isSelOnly,l=e.geometry;if(l)if(!n&&e.spatialRelationship===X.SPATIAL_REL_INTERSECTS&&"extent"===l.type&&(b||h.extent.contains(l)))a.push(1);else return;if(h=e.objectIds)if(b)a.push(2);else{var l=
h.length,z=this._mode,v=0,c;for(c=0;c<l;c++)z._getFeature(h[c])&&v++;if(v===l)a.push(2);else return}if(this.timeInfo)if(e=e.timeExtent,h=this._mapTimeExtent,b)e&&a.push(3);else if(n){if(e)return}else if(h)if(-1!==m.indexOf(a,2))e&&a.push(3);else if(-1!==m.indexOf(a,1))e==h&&a.push(3);else return;else if(0<a.length)e&&a.push(3);else if(e)return;return 0<a.length?a:null}},_getAbsMid:function(e){return q.toAbsMid?q.toAbsMid(e):t.id.replace(/\/[^\/]*$/ig,"/")+e},_doQuery:function(e,a,h){var b=[],n=this.objectIdField,
l=this,z=new g,v=new g,c=this.graphics;if(-1!==m.indexOf(a,1)){var F=this.spatialIndex||this._map&&this._map.spatialIndex,d,f=e.geometry._normalize(null,!0);null==F&&pa.autoSpatialIndexing?d=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(r.hitch(this,r.partial(this._getFromIndex,f,F)),function(e){v.resolve(r.hitch(this,r.partial(this._filterByExtent,c,f)))}):F&&(d=this._getFromIndex(f,F));d?d.then(function(e){for(var a=0;a<e.length;a++)e[a].results&&(b=b.concat(e[a].results));
v.resolve(b)}).otherwise(function(e){v.reject(e)}):v.resolve(this._filterByExtent(c,f))}else v.resolve(c);v.then(function(v){b=v;if(-1!==m.indexOf(a,2)){var c=e.objectIds;b=m.filter(b,function(e){return-1<m.indexOf(c,e.attributes[n])})}-1!==m.indexOf(a,3)&&l.timeInfo&&(v=e.timeExtent,b=l._filterByTime(b,v.startTime,v.endTime).match);h&&(b=m.map(b,function(e){return e.attributes[n]},this));z.resolve(b)});return z},_getFromIndex:function(e,a){a=a||this.spatialIndex||this._map.spatialIndex;e instanceof
Array||(e=[e]);var h=this.id;return x(m.map(e,function(e){return a.intersects(e,h)}))},_filterByExtent:function(e,a){for(var h=[],b=0,n=e.length;b<n;b++){var l=e[b],z=l.geometry;z&&(this.normalization&&a.length?(a[0].intersects(z)||a[1].intersects(z))&&h.push(l):a.intersects(z)&&h.push(l))}return h},_filterByTime:function(e,a,h){var b=this._startTimeField,n=this._endTimeField,l;this._twoTimeFields||(l=b||n);var z=w.isDefined,v=[],c=[],F,d=e.length,f,N;a=a?a.getTime():-Infinity;h=h?h.getTime():Infinity;
if(l)for(F=0;F<d;F++)f=e[F],N=f.attributes,b=N[l],b>=a&&b<=h?v.push(f):c.push(f);else for(F=0;F<d;F++)f=e[F],N=f.attributes,l=N[b],N=N[n],l=z(l)?l:-Infinity,N=z(N)?N:Infinity,l>=a&&l<=h||N>=a&&N<=h||a>=l&&h<=N?v.push(f):c.push(f);return{match:v,noMatch:c}},_getSizeVariables:function(e){return e&&m.filter(e.getVisualVariablesForType("sizeInfo",!1),function(e){return!(!e.field&&!e.valueExpression)})},_needClientSideSorting:function(e){return this._collection?!(!e||!e.length):m.some(e,function(e){return!!e.valueExpression})},
_sortFeatures:function(e){var a=this.renderer,h=this._getSizeVariables(a);if(e&&1<e.length&&this._needClientSideSorting(h)){var b=h[0];e.sort(function(e,h){var n=a._getDataValue(e,b,"sizeInfo"),l=a._getDataValue(h,b,"sizeInfo");return null==n?-1:null==l?1:l-n})}return e},_resolve:function(e,a,h,b,n){a&&this[a].apply(this,e);h&&h.apply(null,e);b&&A._resDfd(b,e,n)},_getShallowClone:function(e){var a=new X,h;for(h in e)e.hasOwnProperty(h)&&(a[h]=e[h]);return a},_query:function(e,a,h,b,n){var l=this,
z=this._map,v=new g(A._dfdCanceller),c=h,F,d;if("executeRelationshipQuery"!==e){var c=this._getShallowClone(h),f=this.getOutFields();c.outFields||(c.outFields=f);c.outFields&&c.outFields.length&&(d=-1<m.indexOf(f,"*")?!1:!m.every(c.outFields,function(e){return-1<m.indexOf(f,e)}));c.returnGeometry=h.hasOwnProperty("returnGeometry")?h.returnGeometry:!h.outStatistics;c.returnGeometry&&(c.multipatchOption=this.multipatchOption);var N;z&&(h=z&&z.spatialReference,(z=c.outSpatialReference)?F=!z.equals(h):
c.outSpatialReference=new H(h.toJson()));if(!this._applyQueryFilters(c,"execute"===e&&!c.outStatistics)){switch(e){case "execute":N=new V({features:[]});break;case "executeForIds":N=[];break;case "executeForCount":N=0;break;case "executeForExtent":N={}}this._resolve([N],a,b,v);return v}if(h="executeForExtent"!==e&&!F&&!d&&this._canDoClientSideQuery(c))return v._pendingDfd=B(this._doQuery(c,h,"executeForIds"===e||"executeForCount"===e)),v._pendingDfd.then(function(h){switch(e){case "execute":N=new V;
N.features=h;break;case "executeForIds":N=h;break;case "executeForCount":N=h.length}l._resolve([N],a,b,v)}),v}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,n,v,!0),v;this._ts&&(c._ts=(new Date).getTime());(v._pendingDfd=this._task[e](c)).addCallbacks(function(h){var n=!!c.outStatistics||F||d;if("execute"===e||"executeRelationshipQuery"===e){var z,f;if("execute"===e){z=h.features;f=z.length;for(f-=1;0<=f;f--)if(z[f]._layer=l,!n&&!l._isTable){var N=
l._mode._getFeature(z[f].attributes[l.objectIdField]);N&&z.splice(f,1,N)}}else for(N in h)if(h.hasOwnProperty(N)){z=h[N].features;f=z.length;for(f-=1;0<=f;f--)z[f]._layer=l}}l._resolve([h],a,b,v)},function(e){l._resolve([e],null,n,v,!0)});return v},_convertFeaturesToJson:function(e,a,h,b){var n=[],l=this._selectionSymbol,z=this.visibilityField,v,c=this.objectIdField;if(this.loaded&&(h||b))v=m.filter(this.fields,function(e){return!1===e.editable&&(!b||e.name!==c)});for(h=0;h<e.length;h++){var F=e[h],
d={},f=F.geometry,N=F.attributes,g=F.symbol;if(f&&(!b||!this.loaded||this.allowGeometryUpdates))d.geometry=f.toJson();z?(d.attributes=N=r.mixin({},N),N[z]=F.visible?1:0):N&&(d.attributes=r.mixin({},N));d.attributes&&(v&&v.length)&&m.forEach(v,function(e){delete d.attributes[e.name]});g&&g!==l&&(d.symbol=g.toJson());n.push(d)}return a?n:k.toJson(n)},_selectHandler:function(e,a,h,b,n){var l;b=ka;switch(a){case b.SELECTION_NEW:this.clearSelection(!0);l=!0;break;case b.SELECTION_ADD:l=!0;break;case b.SELECTION_SUBTRACT:l=
!1}b=e.features;var z=this._mode,v=[],c=this.objectIdField,F,d;if(l)for(l=0;l<b.length;l++)F=b[l],d=F.attributes[c],F=z._addFeatureIIf(d,F),v.push(F),this._selectFeatureIIf(d,F,z);else for(l=0;l<b.length;l++)F=b[l],d=F.attributes[c],this._unSelectFeatureIIf(d,z),d=z._removeFeatureIIf(d),v.push(d||F);this._isSelOnly&&z._applyTimeFilter(!0);this._resolve([v,a,e.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",h,n);if(e.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(e,
a,h){var b=this._selectedFeatures,n=b[e];n||(h._incRefCount(e),b[e]=a,this._isTable||(this._setSelectSymbol(a),a.attr("data-selected","")));return n||a},_unSelectFeatureIIf:function(e,a){var h=this._selectedFeatures[e];h&&(a._decRefCount(e),delete this._selectedFeatures[e],this._isTable||(this._setUnSelectSymbol(h),h.attr("data-selected")));return h},_isSelected:function(e){},_setSelectSymbol:function(e){var a=this._selectionSymbol;a&&!this._isSelOnly&&e.setSymbol(a)},_setUnSelectSymbol:function(e){var a=
this._selectionSymbol;a&&!this._isSelOnly&&a===e.symbol&&e.setSymbol(null,!0)},_getOutFields:function(){var e=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields).concat(this.dataAttributes),e=m.filter(e,function(e,a,h){return!!e&&m.indexOf(h,e)===a}),a=r.clone(this._outFields);if(a){if(-1!==m.indexOf(a,"*"))return a;m.forEach(e,function(e){-1===m.indexOf(a,e)&&a.push(e)});return a}return e},_checkFields:function(e){var a=
e||this._getOutFields();m.forEach(a,function(e){"*"!==e&&this._getField(e)},this);!e&&(!this._isTable&&!this._fserver&&!this._collection&&!this._isStream)&&m.some(this.fields,function(e){return e&&"esriFieldTypeGeometry"===e.type?!0:!1})},_fixFieldCase:function(e,a,h){var b=e&&e[a],n;if(b&&!r.isFunction(b)){if(n=!this._getField(b)&&this._getField(b,!0))b=e[a]=n.name;h&&h.push(b)}return b},_fixRendererFields:function(){var e=this.renderer;this._orderBy=null;if(e&&0<this.fields.length){var a=[],h,e=
m.filter([e,e.observationRenderer,e.latestObservationRenderer,e.trackRenderer],w.isDefined),b=[].concat(e);m.forEach(e,function(e){m.forEach(e.rendererInfos,function(e){e.renderer&&b.push(e.renderer)})});m.forEach(b,function(e){this._fixFieldCase(e,"attributeField",a);this._fixFieldCase(e,"attributeField2",a);this._fixFieldCase(e,"attributeField3",a);this._fixFieldCase(e.rotationInfo,"field",a);if((h=this._fixFieldCase(e.sizeInfo,"field",a))&&!this._orderBy)this._orderBy=[h+" DESC"];this._fixFieldCase(e.sizeInfo,
"normalizationField",a);this._fixFieldCase(e.colorInfo,"field",a);this._fixFieldCase(e.colorInfo,"normalizationField",a);this._fixFieldCase(e.field,"field",a);this._fixFieldCase(e.opacityInfo,"field",a);this._fixFieldCase(e.opacityInfo,"normalizationField",a);m.forEach(e.visualVariables,function(e){h=this._fixFieldCase(e,"field",a);"sizeInfo"===e.type&&(h&&!this._orderBy)&&(this._orderBy=[h+" DESC"]);this._fixFieldCase(e,"normalizationField",a)},this);if(!this._orderBy&&e.addBreak&&!r.isFunction(e.attributeField)&&
(e.backgroundFillSymbol||this._hasSizeDiff(e)))this._orderBy=[e.attributeField+" DESC"]},this);this._rendererFields=m.filter(a,w.isDefined)}},_hasSizeDiff:function(e){var a=Number.MAX_VALUE,h=-Number.MAX_VALUE,b,n;m.forEach(e.infos,function(e){if(n=e.symbol){b=0;switch(n.type){case "simplemarkersymbol":b=n.size;break;case "picturemarkersymbol":b=(n.width+n.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":b=n.width;break;case "simplefillsymbol":case "picturefillsymbol":b=n.outline&&
n.outline.width}b&&(a=Math.min(a,b),h=Math.max(h,b))}});return a!==Number.MAX_VALUE&&h!==-Number.MAX_VALUE&&1<Math.abs(h-a)},getOrderByFields:function(){var e=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&e?m.filter(e,function(e){e=e.split(" ")[0];return!!this._getField(e,!0)},this):null},_getField:function(e,a){var h=this.fields;if(!h||0===h.length)return null;var b;a&&(e=e.toLowerCase());m.some(h,function(h){var n=!1;(n=a?h&&h.name.toLowerCase()===e?!0:!1:h&&h.name===e?
!0:!1)&&(b=h);return n});return b},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:m.map(m.filter(this.fields,function(e){return!!(e&&"esriFieldTypeDate"===e.type)}),function(e){return e.name})});return this._dtOpts},_applyNormalized:function(e,a){e&&a&&m.forEach(e,function(e,h){e&&a[h]&&e.setGeometry(a[h])})},_editHandler:function(e,a,h,b,n,l){n=e.addResults;var z=e.updateResults;e=e.deleteResults;var c,d,f,N,g=this.objectIdField,T=this._mode,k=this._isTable;c=this.editFieldsInfo;
var W=this.getOutFields()||[],C=c&&c.creatorField,s=c&&c.creationDateField,q=c&&c.editorField,ea=c&&c.editDateField;c=c&&c.realm;-1===m.indexOf(W,"*")&&(C&&-1===m.indexOf(W,C)&&(C=null),s&&-1===m.indexOf(W,s)&&(s=null),q&&-1===m.indexOf(W,q)&&(q=null),ea&&-1===m.indexOf(W,ea)&&(ea=null));var W=s||ea?(new Date).getTime():null,u=C||q?this.getUserId():void 0;u&&c&&(u=u+"@"+c);if(n)for(c=0;c<n.length;c++)n[c]=new F(n[c]),k||(d=n[c],d.success&&(d=d.objectId,f=a[c],(N=f._graphicsLayer)&&N!==this&&N.remove(f),
N=f.attributes||{},N[g]=d,C&&(N[C]=u),q&&(N[q]=u),s&&(N[s]=W),ea&&(N[ea]=W),f.setAttributes(N),T._init&&T.drawFeature(f)));if(z)for(c=0;c<z.length;c++)if(z[c]=new F(z[c]),!k&&(d=z[c],d.success)){d=d.objectId;f=h[d];if(a=T._getFeature(d))a.geometry!==f.geometry&&f.geometry&&a.setGeometry(v.fromJson(f.geometry.toJson())),a.attributes!==f.attributes&&f.attributes&&a.setAttributes(r.mixin(a.attributes,f.attributes)),this._repaint(a,d);f=a||f;N=f.attributes||{};q&&(N[q]=u);ea&&(N[ea]=W);f.setAttributes(N)}if(e){h=
[];for(c=0;c<e.length;c++)if(e[c]=new F(e[c]),!k&&(d=e[c],d.success&&(d=d.objectId,f=T._getFeature(d))))this._unSelectFeatureIIf(d,T)&&h.push(f),f._count=0,T._removeFeatureIIf(d);if(0<h.length)this.onSelectionComplete(h,ka.SELECTION_SUBTRACT)}this._resolve([n,z,e],"onEditsComplete",b,l)},_sendAttachment:function(e,a,h,b,n){var l=this;return E({url:this._url.path+"/"+a+"/"+("add"===e?"addAttachment":"updateAttachment"),form:h,content:r.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),
callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(h){var n="add"===e?"onAddAttachmentComplete":"onUpdateAttachmentComplete";h=new F(h["add"===e?"addAttachmentResult":"updateAttachmentResult"]);h.attachmentId=h.objectId;h.objectId=a;l._resolve([h],n,b);return h}).addErrback(function(e){l._resolve([e],null,n,null,!0)})},_repaint:function(e,a,h){a=w.isDefined(a)?a:e.attributes[this.objectIdField];(!(a in this._selectedFeatures)||!this._selectionSymbol)&&e.setSymbol(e.symbol,h)},
_getKind:function(e){var a=this._trackManager;return a?a.isLatestObservation(e)?1:0:0}});r.mixin(ka,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});K._createWrappers(ka);a("extend-esri")&&r.setObject("layers.FeatureLayer",ka,y);return ka})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./RangeDomain ./CodedValueDomain".split(" "),
function(q,t,b,s,r,m){q=q(null,{declaredClass:"esri.layers.Field",constructor:function(b){if(b&&t.isObject(b)&&(this.name=b.name,this.type=b.type,this.alias=b.alias,this.length=b.length,this.editable=b.editable,this.nullable=b.nullable,(b=b.domain)&&t.isObject(b)))switch(b.type){case "range":this.domain=new r(b);break;case "codedValue":this.domain=new m(b)}}});b("extend-esri")&&t.setObject("layers.Field",q,s);return q})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),
function(q,t,b,s,r,m){q=q([m],{declaredClass:"esri.layers.RangeDomain",constructor:function(b){b&&t.isObject(b)&&(this.minValue=b.range[0],this.maxValue=b.range[1])},toJson:function(){var b=this.inherited(arguments);b.range=[this.minValue,this.maxValue];return r.fixJson(b)}});b("extend-esri")&&t.setObject("layers.RangeDomain",q,s);return q})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.layers.Domain",
constructor:function(b){b&&t.isObject(b)&&(this.name=b.name,this.type=b.type)},toJson:function(){return r.fixJson({name:this.name,type:this.type})}});b("extend-esri")&&t.setObject("layers.Domain",q,s);return q})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(q,t,b,s,r,m,k){q=q([k],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(b){b&&t.isObject(b)&&(this.codedValues=
b.codedValues)},getName:function(g){var f;b.some(this.codedValues,function(a){a.code==g&&(f=a.name);return!!f});return f},toJson:function(){var b=this.inherited(arguments);b.codedValues=t.clone(this.codedValues);return m.fixJson(b)}});s("extend-esri")&&t.setObject("layers.CodedValueDomain",q,r);return q})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c){q=q(null,{declaredClass:"esri.layers.FeatureType",constructor:function(b){if(b&&t.isObject(b)){this.id=b.id;this.name=b.name;var m=b.symbol;m&&(this.symbol=k.fromJson(m));var m=b.domains,r,s=this.domains={};for(r in m)if(m.hasOwnProperty(r)){var q=m[r];switch(q.type){case "range":s[r]=new g(q);break;case "codedValue":s[r]=new f(q);break;case "inherited":s[r]=new a(q)}}if(r=b.templates){m=this.templates=[];for(b=0;b<r.length;b++)m.push(new c(r[b]))}}},toJson:function(){var a=
{id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},c,f=this.domains,g=this.templates,k=m.fixJson;if(f){var r=a.domains={};for(c in f)f.hasOwnProperty(c)&&(r[c]=f[c]&&f[c].toJson());k(r)}g&&(a.templates=b.map(g,function(a){return a.toJson()}));return k(a)}});s("extend-esri")&&t.setObject("layers.FeatureType",q,r);return q})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(q,t,b,s,r){q=q([r],{declaredClass:"esri.layers.InheritedDomain"});
b("extend-esri")&&t.setObject("layers.InheritedDomain",q,s);return q})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(q,t,b,s,r,m){q=q(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(b){b&&t.isObject(b)&&(this.name=b.name,this.description=b.description,this.drawingTool=b.drawingTool,b=b.prototype,this.prototype=new m(b.geometry,null,b.attributes))},toJson:function(){return r.fixJson({name:this.name,
description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()})}});t.mixin(q,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",
TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});b("extend-esri")&&t.setObject("layers.FeatureTemplate",q,s);return q})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.layers.FeatureEditResult",
constructor:function(b){b&&t.isObject(b)&&(this.objectId=b.objectId,this.success=b.success,b.success||(b=b.error,this.error=Error(),this.error.code=b.code,this.error.message=b.description))}});b("extend-esri")&&t.setObject("layers.FeatureEditResult",q,s);return q})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../tasks/query ./RenderMode".split(" "),function(q,t,b,s,r,m,k){q=q([k],{declaredClass:"esri.layers._SnapshotMode",
constructor:function(b){this.featureLayer=b;this.pagination=b.queryPagination;this._featureMap={};this._drawFeatures=t.hitch(this,this._drawFeatures);this._queryErrorHandler=t.hitch(this,this._queryErrorHandler)},startup:function(){this.pagination=this.pagination&&null!=this.featureLayer.maxRecordCount;this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},propertyChangeHandler:function(b){this._init&&(b?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},drawFeature:function(b){var f=
b.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(f,b);this._incRefCount(f)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){var b=this.featureLayer;b._collection?(b._fireUpdateStart(),b._refresh(!0),b._fireUpdateEnd()):this._fetchAll()},_getRequestId:function(b){return("_"+b.name+b.layerId+b._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchAll:function(){var b=this.featureLayer;!b._collection&&!b.suspended&&(b._fireUpdateStart(),this._clearIIf(),this._sendRequest())},
_sendRequest:function(b){var f=this.map,a=this.featureLayer,c=a.getDefinitionExpression(),d=new m;d.outFields=a.getOutFields();d.where=c||"1\x3d1";d.returnGeometry=!0;d.outSpatialReference=new r(f.spatialReference.toJson());d.timeExtent=a.getTimeDefinition();d.maxAllowableOffset=a._maxOffset;d.quantizationParameters=a._quantizationParameters;a._ts&&(d._ts=(new Date).getTime());d.orderByFields=a.supportsAdvancedQueries?a.getOrderByFields():null;d.multipatchOption=a.multipatchOption;this.pagination&&
(this._start=d.start=null==b?0:b,d.num=a.maxRecordCount);var k;a._usePatch&&(k=this._getRequestId(a),this._cancelPendingRequest(null,k));a._task.execute(d,this._drawFeatures,this._queryErrorHandler,k)},_drawFeatures:function(b){this._purgeRequests();var f=b.features,a=this.featureLayer,c=a.objectIdField,d,k=f.length,m=b.exceededTransferLimit&&!a._collection,r=a._selectedFeatures,s=a.mode===a.constructor.MODE_AUTO,q,t,D;a._fireUpdateStart();a._sortFeatures(f);for(d=0;d<k;d++)t=f[d],D=t.attributes[c],
q=this._addFeatureIIf(D,t),this._incRefCount(D),s&&(q!==t&&r[D])&&(q.setGeometry(t.geometry),q.setAttributes(t.attributes));this._applyTimeFilter(!0);if(!this.pagination||!m)a._fireUpdateEnd(null,b.exceededTransferLimit?{queryLimitExceeded:!0}:null);m&&(this.pagination&&this._sendRequest(this._start+a.maxRecordCount),a.onQueryLimitExceeded())},_queryErrorHandler:function(b){this._purgeRequests();var f=this.featureLayer;f._errorHandler(b);f._fireUpdateEnd(b)}});b("extend-esri")&&t.setObject("layers._SnapshotMode",
q,s);return q})},"esri/layers/RenderMode":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/io/script ../kernel".split(" "),function(q,t,b,s,r,m,k){t=t(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(q._scopeName||"dojo")+"IoScript"},initialize:function(b){this.map=b;this._init=!0},startup:function(){},propertyChangeHandler:function(b){},destroy:function(){this._init=!1},drawFeature:function(b){},suspend:function(){},
resume:function(){},refresh:function(){},_incRefCount:function(b){(b=this._featureMap[b])&&b._count++},_decRefCount:function(b){(b=this._featureMap[b])&&b._count--},_getFeature:function(b){return this._featureMap[b]},_addFeatureIIf:function(b,f){var a=this._featureMap,c=a[b],d=this.featureLayer;c||(a[b]=f,d._add(f),f._count=0);return c||f},_removeFeatureIIf:function(b){var f=this._featureMap[b],a=this.featureLayer;if(f){if(f._count)return;delete this._featureMap[b];a._remove(f)}return f},_clearIIf:function(){var b;
b=this.featureLayer;var f=b.graphics,a=b._selectedFeatures,c=b.getSelectedFeatures().length,d=b.objectIdField;if(c)for(b=f.length-1;0<=b;b--){var c=f[b],k=c.attributes[d];k in a?c._count=1:(c._count=0,this._removeFeatureIIf(k))}else b.clear(),this._featureMap={}},_isPending:function(b){return m[this._prefix+b]?!0:!1},_cancelPendingRequest:function(b,f){if(b=b||m[this._prefix+f])try{b.cancel(),m._validCheck(b)}catch(a){}},_purgeRequests:function(){m._validCheck(null)},_toggleVisibility:function(b){var f=
this.featureLayer,a=f.graphics,c=b?"show":"hide",d,k=a.length;b=b&&f._ager;for(d=0;d<k;d++){var m=a[d];m[c]();b&&f._repaint(m)}},_applyTimeFilter:function(b){var f=this.featureLayer;if(f.timeInfo&&!f.suspended){b||f._fireUpdateStart();var a=f._trackManager;a&&a.clearTracks();var c=f.getTimeDefinition(),d=f._getOffsettedTE(f._mapTimeExtent);d?(d=f._getTimeOverlap(c,d))?(c=f._filterByTime(f.graphics,d.startTime,d.endTime),a&&a.addFeatures(c.match),s.forEach(c.match,function(a){var b=a._shape;a.visible||
(a.show(),(b=a._shape)&&b._moveToFront());f._ager&&b&&f._repaint(a)}),s.forEach(c.noMatch,function(a){a.visible&&a.hide()})):this._toggleVisibility(!1):(a&&a.addFeatures(f.graphics),this._toggleVisibility(!0));a&&(a.moveLatestToFront(),a.drawTracks());b||f._fireUpdateEnd()}}});r("extend-esri")&&b.setObject("layers._RenderMode",t,k);return t})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),
function(q,t,b,s,r,m,k,g,f,a){q=q([f],{declaredClass:"esri.layers._OnDemandMode",constructor:function(a){this.featureLayer=a;this._featureMap={};this._queryErrorHandler=b.hitch(this,this._queryErrorHandler)},initialize:function(b){this.inherited(arguments);var d=this.featureLayer,f=d._srInfo;this._gridLayer=new a(new k(f?f.valid[0]:b.extent.xmin,f?f.valid[1]:b.extent.ymax,b.spatialReference),{width:d._tileWidth,height:d._tileHeight},{width:b.width,height:b.height},f);this._cellMap={};this._gridLayer.setResolution(b.extent)},
startup:function(){this._ioQueue=[];this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&2>a&&this._zoomHandler()},destroy:function(){this._disableConnectors();this.inherited(arguments)},drawFeature:function(a){var b=this._gridLayer,f=a.geometry,g=[];if(f)for(var g=b.getCellsInExtent("point"===f.type?{xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y}:f.getExtent(),!1).cells,b=this._cellMap,k,m=a.attributes[this.featureLayer.objectIdField],r,
s,q,f=0;f<g.length;f++)k=g[f],r=k.latticeID,s=k.row,q=k.col,r?k=b[r]=b[r]||k:(b[s]=b[s]||{},k=b[s][q]=b[s][q]||k),k.features=k.features||[],k.features.push(a),this._addFeatureIIf(m,a),this._incRefCount(m)},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},_enableConnectors:function(){var a=this.map;this._zoomConnect=t.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=
t.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=t.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){t.disconnect(this._zoomConnect);t.disconnect(this._panConnect);t.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var a=this.featureLayer,b=this.map;a.suspended||(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(a){this.featureLayer._fireUpdateStart();
var b=this.featureLayer._resized;a=b?a:null;b&&this._gridLayer.setMapState(a,this.map.width,this.map.height);this._sendRequest(a)},_getRequestId:function(a,b){return("_"+a.name+a.layerId+a._ulid+"_"+b.resolution+"_"+(b.latticeID||b.row+"_"+b.col)).replace(/[^a-zA-Z0-9\_]+/g,"_")},_sendRequest:function(a){this._exceeds=!1;var b=this.featureLayer,f=this.map;a=a||f.extent;f=this._gridLayer.getCellsInExtent(a,b.latticeTiling).cells;if(!b.isEditable())var k=this._cellMap,f=s.filter(f,function(a){if(a.lattice){if(k[a.latticeID])return!1}else if(k[a.row]&&
k[a.row][a.col])return!1;return!0});var m=b.getOutFields(),r=b.getDefinitionExpression(),q=b._getOffsettedTE(b._mapTimeExtent),t=b.supportsAdvancedQueries?b.getOrderByFields():null,D=b._usePatch,A=this._ioQueue,H,G=this,I=this._drawFeatures,M,J,S;this._pending=this._pending||0;for(H=0;H<f.length;H++){M=f[H];J=new g;J.geometry=M.extent||M.lattice;J.outFields=m;J.where=r;b.latticeTiling&&M.extent&&(J.spatialRelationship=g.SPATIAL_REL_CONTAINS);J.returnGeometry=!0;J.timeExtent=q;b._ts&&(J._ts=(new Date).getTime());
J.orderByFields=t;J.multipatchOption=b.multipatchOption;J.maxAllowableOffset=b._maxOffset;J.quantizationParameters=b._quantizationParameters;if((S=b.advancedQueryCapabilities)&&S.supportsQueryWithResultType)J.resultType="tile";S=null;if(D&&(S=this._getRequestId(b,M),this._isPending(S)))continue;this._pending++;A.push(b._task.execute(J,function(){var a=M;return function(b){I.apply(G,[b,a])}}.call(this),this._queryErrorHandler,S))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,b){this._exceeds=
this._exceeds||a.exceededTransferLimit;this._finalizeIO();var f=this.featureLayer,g=this.map.extent,k=b.extent,m=b.row,r=b.col,s=f.objectIdField,q=a.features,t=this._gridLayer,H=this._cellMap,G=b.latticeID,I=G?H[G]:H[m]&&H[m][r];if(b.resolution!=t._resolution||(G?G!==t.getLatticeID(g):!t.intersects(k,g)))I&&this._removeCell(m,r,G);else if(I)f._sortFeatures(q),this._updateCell(I,q);else{f._sortFeatures(q);b.features=q;G?H[G]=b:(H[m]=H[m]||{},H[m][r]=b);g=q.length;for(f=0;f<g;f++)k=q[f],m=k.attributes[s],
this._addFeatureIIf(m,k),this._incRefCount(m)}this._endCheck()},_queryErrorHandler:function(a){this._finalizeIO();this.featureLayer._errorHandler(a);this._endCheck(!0)},_finalizeIO:function(){this._purgeRequests();this._pending--},_endCheck:function(a){if(0===this._pending){this._processIOQueue();var b=this.featureLayer,f=b._trackManager;f&&(f.clearTracks(),f.addFeatures(b.graphics),b._ager&&s.forEach(b.graphics,function(a){a._shape&&b._repaint(a)}),f.moveLatestToFront(),f.drawTracks());this.featureLayer._fireUpdateEnd(a&&
Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)b.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=s.filter(this._ioQueue,function(a){return-1<a.fired?!1:!0});a&&s.forEach(this._ioQueue,this._cancelPendingRequest)},_removeOldCells:function(a){var b=this._cellMap,f=this._gridLayer,g,k;for(g in b)if(b[g]){var m=b[g],r=m.latticeID,s=0,q=0;if(r)s++,r!==f.getLatticeID(a)&&(this._removeCell(null,null,r),q++);
else for(k in m)m[k]&&(s++,f.intersects(m[k].extent,a)||(this._removeCell(g,k),q++));q===s&&delete b[g]}},_updateCell:function(a,b){var f=this.featureLayer,g=f.objectIdField,f=f._selectedFeatures,k,m=b.length;a.features=a.features||[];for(k=0;k<m;k++){var r=b[k],s=r.attributes[g],q=this._addFeatureIIf(s,r);q===r?(this._incRefCount(s),a.features.push(q)):s in f||(q.setGeometry(r.geometry),q.setAttributes(r.attributes))}},_removeCell:function(a,b,f){var g=this._cellMap,k=this.featureLayer,m=k.objectIdField,
r=f?g[f]:g[a]&&g[a][b];if(r){f?delete g[f]:delete g[a][b];a=r.features;for(b=0;b<a.length;b++)f=a[b].attributes[m],this._decRefCount(f),f in k._selectedFeatures||this._removeFeatureIIf(f)}}});r("extend-esri")&&b.setObject("layers._OnDemandMode",q,m);return q})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/Polyline".split(" "),function(q,t,b,s,r,m,k,g){q=q(null,{declaredClass:"esri.layers._GridLayout",
constructor:function(b,a,c,d){this.origin=b;this.cellWidth=a.width;this.cellHeight=a.height;this.mapWidth=c.width;this.mapHeight=c.height;this.srInfo=d},setResolution:function(b){this._resolution=(b.xmax-b.xmin)/this.mapWidth;this.srInfo&&(b=Math.round(2*this.srInfo.valid[1]/this._resolution),b=Math.round(b/this.cellWidth),this._frameStats=[b,0,b-1])},setMapState:function(b,a,c){this.mapWidth=a;this.mapHeight=c;this.setResolution(b)},getCellCoordinates:function(b){var a=this._resolution,c=this.origin;
return{row:Math.floor((c.y-b.y)/(this.cellHeight*a)),col:Math.floor((b.x-c.x)/(this.cellWidth*a))}},normalize:function(b){var a=this._frameStats;if(a){var c=a[0],d=a[1],a=a[2];b<d?(b%=c,b=b<d?b+c:b):b>a&&(b%=c)}return b},intersects:function(f,a){var c=this.srInfo;return c?b.some(a._getParts(c),function(a){return f.intersects(a.extent)}):f.intersects(a)},getCellExtent:function(b,a){var c=this._resolution,d=this.origin,g=this.cellWidth,r=this.cellHeight;return new k(a*g*c+d.x,d.y-(b+1)*r*c,(a+1)*g*
c+d.x,d.y-b*r*c,new m(d.spatialReference.toJson()))},getLatticeID:function(b){var a=this.getCellCoordinates({x:b.xmin,y:b.ymax}),c=this.getCellCoordinates({x:b.xmax,y:b.ymin});b=a.row;var d=c.row,a=this.normalize(a.col),c=this.normalize(c.col);return b+"_"+d+"_"+a+"_"+c},sorter:function(b,a){return b<a?-1:1},getCellsInExtent:function(f,a){var c=this.getCellCoordinates({x:f.xmin,y:f.ymax}),d=this.getCellCoordinates({x:f.xmax,y:f.ymin}),k=c.row,m=d.row,c=c.col,d=d.col,r=[],s,q,t,D=[],A=[],H,G,I,M,J=
[];for(s=k;s<=m;s++)for(q=c;q<=d;q++)t=this.normalize(q),f=this.getCellExtent(s,t),b.some(r,function(a){return a.row===s&&a.col===t})||r.push({row:s,col:t,extent:f,resolution:this._resolution}),a&&(D.push(f.xmin,f.xmax),A.push(f.ymin,f.ymax));c=this.normalize(c);d=this.normalize(d);D.sort(this.sorter);A.sort(this.sorter);q=D.length;for(s=q-1;0<=s;s--)s<q-1&&D[s]===D[s+1]&&D.splice(s,1);q=A.length;for(s=q-1;0<=s;s--)s<q-1&&A[s]===A[s+1]&&A.splice(s,1);if(D.length&&A.length){H=D[0];G=D[D.length-1];
I=A[0];M=A[A.length-1];q=D.length;for(s=0;s<q;s++)J.push([[D[s],M],[D[s],I]]);q=A.length;for(s=0;s<q;s++)J.push([[H,A[s]],[G,A[s]]]);D=new g({paths:J,spatialReference:this.origin.spatialReference.toJson()});r.push({latticeID:k+"_"+m+"_"+c+"_"+d,lattice:D,resolution:this._resolution})}return{minRow:k,maxRow:m,minCol:c,maxCol:d,cells:r}}});s("extend-esri")&&t.setObject("layers._GridLayout",q,r);return q})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","./RenderMode"],function(q,t,b,s,r){q=q([r],{declaredClass:"esri.layers._SelectionMode",constructor:function(b){this.featureLayer=b;this._featureMap={}},propertyChangeHandler:function(b){this._init&&0===b&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)}});b("extend-esri")&&t.setObject("layers._SelectionMode",q,s);return q})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(q,t,b,s,r,m,k,g,f,a){q=q([a],{declaredClass:"esri.layers._StreamMode",constructor:function(a,b){this.featureLayer=a;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=t.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;a.purgeOptions&&(a.purgeOptions.age&&"number"===typeof a.purgeOptions.age)&&(this._maxFeatureAge=1E3*Math.ceil(60*a.purgeOptions.age));this._drawFeatures=
t.hitch(this,this._drawFeatures);this._queryErrorHandler=t.hitch(this,this._queryErrorHandler)},startup:function(){},propertyChangeHandler:function(a){this._init&&(0===a?this._applyTimeFilter():3===a&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(a){var b=this.featureLayer,f=b.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));
b._joinField&&this._getFeature(a.attributes[f])?this._drawBuffer.updates.push({oid:a.attributes[f],updates:a}):this._drawBuffer.adds.push(a)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){var a=this.featureLayer;a&&(!a._relatedUrl&&!a._keepLatestUrl?(a._fireUpdateStart(),a.clear(),a._fireUpdateEnd()):(a._fireUpdateStart(),a._refreshing=!0,a.disconnect(),a.clear(),a._relatedQueried=!1,a._keepLatestQueried=!1,a.connect()))},_drawFeatures:function(a,b){this._purgeRequests();var f=
this.featureLayer;f._create(a.features||[]);f._fireUpdateEnd(null,b)},_applyTimeFilter:function(a){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(a){var d=this.featureLayer,f=d.objectIdField;a&&b.forEach(a,function(a){a=a.attributes[f];d._unSelectFeatureIIf(a,this);this._decRefCount(a);this._removeFeatureIIf(a)},this)},_addFeatures:function(a){var d=this.featureLayer,f=d._endTimeField,g=d._startTimeField,k,m,r,s=[],q=[],t=[];k=d._trackManager;m=d.objectIdField;if(k)for(r in a=
k.addFeatures(a),a)a.hasOwnProperty(r)&&(s.push(r),a[r].adds&&(q=q.concat(a[r].adds)),a[r].deletes&&(t=t.concat(a[r].deletes)));else q=a;b.forEach(q,function(a){var b=a.attributes[m],c;c=f&&a.attributes[f];!c&&this._maxFeatureAge&&(c=g&&a.attributes[g]?a.attributes[g]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);c&&(c=1E3*Math.ceil(c/1E3),this._featuresByTime[c]?this._featuresByTime[c].push(b):this._featuresByTime[c]=[b]);this._addFeatureIIf(b,a);this._incRefCount(b)},this);t.length&&this._removeFeatures(t);
k&&k.refreshTracks(s)},_updateFeatures:function(a){var d=this.featureLayer,f,g,k=[];f=d._trackManager;g=d._trackIdField;b.forEach(a,function(a){var b=a.updates;a=this._getFeature(a.oid);var c;if(a){b.geometry&&a.setGeometry(b.geometry);b=b.attributes||{};for(c in b)b.hasOwnProperty(c)&&(a.attributes[c]=b[c]);a.visible=this._checkFeatureTimeIntersects(a);f&&a.attributes[g]?k.push(a.attributes[g]):d._repaint(a,null,!0)}},this);k.length&&f.refreshTracks(k)},_redrawAllTracks:function(){var a=this.featureLayer._trackManager,
b;if(a&&(b=a.trimTracks())&&0<b.length)this._removeFeatures(b),a.refreshTracks()},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var a=this._drawBuffer,b=a.adds.splice(0,a.adds.length),f=a.updates.splice(0,a.updates.length),a=this.featureLayer;if(!a)return!1;a.updating||a._fireUpdateStart();this._addFeatures(b);this._updateFeatures(f);if((b=this._getExpiredFeatures())&&b.length)this._removeFeatures(b),a._trackManager&&a._trackManager.removeFeatures(b);a._purge();a._fireUpdateEnd();this._timeoutId=
null},_clearDrawBuffer:function(){var a=this._timeoutId,b=this._drawBuffer,f=b.adds,b=b.updates;a&&clearTimeout(a);f.splice(0,f.length);b.splice(0,b.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(a){a=a||0===a?a:200;0>a&&(a=200);this._refreshRate=a},_checkFeatureTimeIntersects:function(a){var b=this.featureLayer,f=b.getMap(),f=f?f.timeExtent:
null;return!f||!b.timeInfo||!b.timeInfo.startTimeField&&!b.timeInfo.endTimeField?!0:0<b._filterByTime([a],f.startTime,f.endTime).match.length},_getRequestId:function(a){return("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchArchive:function(a){var b=this.featureLayer,r,s,q,t,w;b._fireUpdateStart();if(a&&this.map){r=new g(a);s=new k;a=this.map;q=b.getFilter()||{};t=q.where||"1\x3d1";w=q.geometry?f.fromJson(q.geometry):null;q=q.outFields?q.outFields.split(","):["*"];s.geometry=
w;s.where=t;s.outFields=q;s.returnGeometry=!0;s.outSpatialReference=new m(a.spatialReference.toJson());b._usePatch&&(a=this._getRequestId(b),this._cancelPendingRequest(null,a));var E=0,D=this,A=null,H=function(a){E++;r.execute(s).then(function(b){a(null,b)},function(b){a(b)})},G=function(a,c){a?2<=E||!b._relatedUrl?D._queryErrorHandler(Error("Could not get features from related feature service")):(A={relatedFeatureWarning:"Querying related feature service using the current filter failed. All related features are displayed, and the filter is applied to the stream service only"},
s.where="1\x3d1",H(G)):D._drawFeatures(c,A)};H(G)}else return this._fireUpdateEnd({error:"Archive data cannot be fetched if no feature service url is provided or if the layer is not added to a map"}),!1},_queryErrorHandler:function(a){this._purgeRequests();var b=this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a)},_getExpiredFeatures:function(){var a,d,f,g=[],k=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return k;a=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=
d=1E3*Math.ceil(Date.now()/1E3);if(a&&a!==d)for(f=this._featuresByTime;a<=d;a+=1E3)f[a]&&(g=g.concat(f[a]),delete f[a]);b.forEach(g,function(a){(a=this._getFeature(a))&&k.push(a)},this);return k}});s("extend-esri")&&t.setObject("layers._StreamMode",q,r);return q})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),function(q,t,b,s,r,m,k,g){q=q(null,{declaredClass:"esri.layers._TrackManager",
constructor:function(b){this.layer=b;this.trackMap={};this.trackLineMap={}},initialize:function(b){this.map=b;var a=this.layer,c=a._getRenderer(),c=c&&c.trackRenderer;if("esriGeometryPoint"===a.geometryType){var d=this.container=new g._GraphicsLayer({id:a.id+"_tracks",_child:!0,visible:a.visible,minScale:a.minScale,maxScale:a.maxScale});d.loaded=!0;d.onLoad(d);d._setMap(b,a._div);d.setRenderer(c);a.on("visibility-change",t.hitch(this,function(a){this.container.setVisibility(a.visible);this.container.evaluateSuspension()}));
a.on("scale-range-change",t.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)}))}},addFeatures:function(f){var a=this.trackMap,c=this.layer,d=c._trackIdField,g=[];b.forEach(f,function(c){var f=c.attributes[d];(a[f]=a[f]||[]).push(c);-1===b.indexOf(g,f)&&g.push(f)});var k=c._startTimeField,m=c.objectIdField,r=function(a,b){var c=a.attributes[k],d=b.attributes[k];return c===d?a.attributes[m]<b.attributes[m]?-1:1:c<d?-1:1};b.forEach(g,function(b){a[b].sort(r)})},
trimTracks:function(f){function a(a){for(a=c[a]||[];a.length>d;)g.push(a.shift())}var c=this.trackMap,d=this.layer.maximumTrackPoints||0,g=[],k;if(!d)return g;if(f)b.forEach(f,function(b){a(b)});else for(k in c)c.hasOwnProperty(k)&&a(k);return g},drawTracks:function(f){function a(a){var b=g[a],f,q,t;q=c.trackLineMap[a];d.remove(q);delete c.trackLineMap[a];if(!b||2>b.length)return!1;q=[];for(f=b.length-1;0<=f;f--)(t=b[f].geometry)&&q.push([t.x,t.y]);b={};b[s]=a;1<q.length&&(q=new m(new k({paths:[q],
spatialReference:r}),null,b),d.add(q),c.trackLineMap[a]=q)}var c=this,d=this.container,g,r,s,q;if(d)if(g=this.trackMap,r=this.map.spatialReference,s=this.layer._trackIdField,f)b.forEach(f,function(b){a(b)});else for(q in g)g.hasOwnProperty(q)&&a(q)},refreshTracks:function(f){function a(a){var b,f;c.drawTracks([a]);if(k&&k.latestObservationRenderer){a=d[a]||[];b=a.length;for(f=0;f<b;f++)g._repaint(a[f],null,!0)}}var c=this,d=this.trackMap,g=this.layer,k=g._getRenderer(),m;if(f)b.forEach(f,function(b){a(b)});
else for(m in d)d.hasOwnProperty(m)&&a(m);this.moveLatestToFront()},moveLatestToFront:function(f){b.forEach(this.getLatestObservations(f),function(a){var b=a._shape;b&&b._moveToFront();this._repaint(a,null,!0)},this.layer)},getLatestObservations:function(f){function a(a){a=g[a];return a[a.length-1]}var c=[],d=this.layer._getRenderer(),g=this.trackMap,k;if(!d.latestObservationRenderer)return c;if(f)b.forEach(f,function(b){c.push(a(b))});else for(k in g)g.hasOwnProperty(k)&&c.push(a(k));return c},clearTracks:function(f){var a=
this.getLatestObservations(f),c=this.container,d;f?b.forEach(f,function(a){delete this.trackMap[a];c&&(d=this.trackLineMap[a],c.remove(d),delete this.trackLineMap[a])},this):(this.trackMap={},this.trackLineMap={},c&&c.clear());b.forEach(a,function(a){this._repaint(a,null,!0)},this.layer)},isLatestObservation:function(b){var a=this.trackMap[b.attributes[this.layer._trackIdField]];return a?a[a.length-1]===b:!1},destroy:function(){var b=this.container;b&&(b.clear(),b._unsetMap(this.map,this.layer._div));
this.map=this.layer=this.trackMap=this.container=null}});s("extend-esri")&&t.setObject("layers._TrackManager",q,r);return q})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u){function B(){}function x(a){var b=a.layer;return{geometry:a.geometry,attributes:a.attributes,
getLayer:function(){return b}}}q=q(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(a){this.sourceLayer=a;this._hndls=[]},initialize:function(a){this.map=a;var b=this.sourceLayer,d=b.renderer;b.setDrawMode(!1);this.imageLayer=a._getMapImageLyr();var f=this;this.heatmapRenderer=d instanceof c?d:(d.getRendererInfoByZoom(a.getZoom())||d.getRendererInfoByScale(a.getScale())).renderer;this._setupDraw=
this._setupDraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);r(["../workers/heatmapCalculator"],function(a){f._calculator=new a(t.mixin({width:f.map.width,
height:f.map.height},f._getOptions()));f._setupRenderer();f.heatmapRenderer.getStats=a.calculateStats;f.heatmapRenderer.getHistogramData=a.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(a){var b=a.renderer,d=b instanceof c;this.heatmapRenderer?d?this.heatmapRenderer=b:this._removeRenderer(a):
d&&(this.heatmapRenderer=b,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(a){a=a.opacity;var b=this._getImageBySourceId(this.sourceLayer.id);b&&b.setOpacity(a)},_setupRenderer:function(){var a=this._hndls,c=this.sourceLayer,d=this.map,f=this;c._originalDraw=c._draw;c._draw=B;c._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);a.push(c.on("update-end",this._setupDraw));a.push(c.on("suspend",function(a){(a=
f._getImageBySourceId(f.sourceLayer.id))&&a.hide()}));a.push(c.on("resume",function(a){(a=f._getImageBySourceId(f.sourceLayer.id))&&a.show()}));a.push(b.after(c,"redraw",this._setupDraw));a.push(d.on("layer-remove",function(a){a.layer==c&&((a=f._getImageBySourceId(f.sourceLayer.id))&&f.imageLayer.removeImage(a),f._removeRenderer({target:c}))}));c._collection&&a.push(c.on("graphic-add",function(a){f._reprojectFeature(a.graphic);f._setupDraw()}));1!==c.mode&&(a.push(d.on("resize, pan-end",this._setupDraw)),
a.push(d.on("zoom-end",this._setupDraw)));a.push(c.on("opacity-change",this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();c.graphics&&c.graphics.length&&(c.graphics[0].geometry&&!d.spatialReference.equals(c.graphics[0].geometry.spatialReference)&&s.forEach(c.graphics,function(a){this._reprojectFeature(a)}.bind(this)),this._setupDraw())},_setupDraw:function(){if(!this._drawTimer){var a=this;this._drawTimer=setTimeout(function(){clearTimeout(a._drawTimer);a._drawTimer=null;
a.sourceLayer._getRenderer().isInstanceOf(c)&&a.recalculateHeatmap()},16)}},_removeRenderer:function(a){var b=a.target;b._draw=b._originalDraw;delete b._originalDraw;b.setDrawMode(!0);this._removeHandlers();this._hndls=[];var c=this._getImageBySourceId(this.sourceLayer.id);c&&this.imageLayer.removeImage(c);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;b.renderer!=a.renderer&&b.renderer.getRendererInfo?this.heatmapRenderer=null:(b.redraw(),this.destroy())},
recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(a){if(a&&a.geometry){var b=a.geometry,c=this.map.spatialReference;c.equals(b.spatialReference)||(b=f.project(b,c),null!=b&&(a.geometry=b))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var b=this.sourceLayer,c=this.map,f=this.heatmapRenderer,g=this.map.extent,k=this.map.width,m=this.map.height,r=this._calculator,s=this,q=function(d){d=
s._getScreenPoints(d.features,c,b);d=r.calculateImageData(t.mixin({screenPoints:d,mapinfo:{extent:[g.xmin,g.ymin,g.xmax,g.ymax],resolution:c.getResolution()},width:k,height:m},s._getOptions()));d=f.getSymbol(x({geometry:c.extent,attributes:{size:[k,m],imageData:d},layer:b}));d=new a({extent:c.extent,href:d.url,opacity:0,sourceId:b.id});s._swapMapImages(d,s._getImageBySourceId(b.id));b.suspended&&d.hide()},u={geometry:c.extent,timeExtent:b.useMapTime?c.timeExtent:void 0,spatialRelationship:d.SPATIAL_REL_INTERSECTS};
null!=b._canDoClientSideQuery(u)?b.queryFeatures(u,q):q({features:b.graphics})},_getScreenPoints:function(a,b,c){var d=[],f=a.length,k=0,m=0,r,q=new g(b.extent.xmin,b.extent.ymax,b.spatialReference),t=b.toScreen(q),u=t.x,t=t.y,x=b.getResolution(),B;for((m=b.extent.getCacheValue("_parts"))&&(B=s.map(m,function(a){return c._intersects(b,a.extent)[0]}));f--;)m=a[f],m.geometry&&(r={x:Math.ceil((m.geometry.x-q.x)/x+u),y:Math.floor((q.y-m.geometry.y)/x-t),attributes:m.attributes},B&&(m=1<B.length&&r.x<
-B[0]?B[1]:B[0],r.x+=m),d[k++]=r);return d},_getImageBySourceId:function(a){var b=this.imageLayer.getImages(),b=s.filter(b,function(b){return b.sourceId==a});if(b.length)return b[b.length-1]},_swapMapImages:function(a,b){function c(){d.removeImage(b)}var d=this.imageLayer,f=this.sourceLayer.opacity||1;d.addImage(a);u.anim(a._node,{opacity:f},null,null,function(){a.opacity=f});null!=b&&u.anim(b._node,{opacity:0},null,null,c)},_removeHandlers:function(){if(null!=this._hndls)for(var a=this._hndls.length;a--;)this._hndls[a].remove()},
_getOptions:function(){var a=this.heatmapRenderer;return{blurRadius:a.blurRadius,gradient:a.gradient,maxPixelIntensity:a.maxPixelIntensity,minPixelIntensity:a.minPixelIntensity,field:a.field,fieldOffset:a.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var a=this.sourceLayer.graphics,b=a.length,c;b--;)c=a[b],c._shape=c._offsets=void 0}});k("extend-esri")&&t.setObject("layers.HeatmapManager",q,m);return q})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),
function(q,t,b,s,r,m,k){q=q(null,{declaredClass:"esri.layers.MapImage",constructor:function(b){t.mixin(this,b);this.extent=new k(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var b=this._node,f=this._layer,a;if(b){if(a=f&&f._div)f.suspended||f._setPos(b,a._left,a._top),(f._active||a).appendChild(b);m.show(b)}}},hide:function(){if(this.visible){this.visible=!1;var b=this._node;b&&(m.hide(b),
b.parentNode&&b.parentNode.removeChild(b))}},setOpacity:function(g){var f=this._node;this.opacity=g;f&&b.set(f,"opacity",g)}});s("extend-esri")&&t.setObject("layers.MapImage",q,r);return q})},"esri/dijit/Scalebar":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/query ../kernel ../lang ../domUtils ../units ../SpatialReference ../WKIDUnitConversion ../geometry/Point ../geometry/ScreenPoint ../geometry/Polyline ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/screenUtils ../geometry/normalizeUtils dojo/i18n!../nls/jsapi".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M){q=q(null,{declaredClass:"esri.dijit.Scalebar",map:null,mapUnit:null,scalebarUnit:null,unitsDictionary:[],domNode:null,screenPt1:null,screenPt2:null,localStrings:M.widgets.scalebar,constructor:function(a,c){this.metricScalebar=m.create("div",{innerHTML:"\x3cdiv class\x3d'esriScaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLine esriScalebarMetricLine'\x3e\x3c/div\x3e"});
this.englishScalebar=m.create("div",{innerHTML:"\x3cdiv class\x3d'esriScalebarLine esriScalebarEnglishLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e"});this.domNode=m.create("div");a=a||{};if(a.map){if(a.scalebarUnit){if("english"!==a.scalebarUnit&&"metric"!==a.scalebarUnit&&"dual"!==a.scalebarUnit){console.error("scalebar unit only accepts english or metric or dual");return}this.scalebarUnit=
a.scalebarUnit}else this.scalebarUnit="english";if(a.scalebarStyle){if("ruler"!==a.scalebarStyle&&"line"!==a.scalebarStyle){console.error("scalebar style must be ruler or line");return}this.scalebarStyle=a.scalebarStyle}else this.scalebarStyle="ruler";this.background=a.background;switch(this.scalebarUnit){case "english":"ruler"===this.scalebarStyle&&(this.englishScalebar.innerHTML="\x3cdiv class\x3d'esriScalebarRuler'\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_secondpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_secondpiece'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'scaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel' style\x3d'left: -3%'\x3e0\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarFirstNumber'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e");
this.domNode.appendChild(this.englishScalebar);break;case "metric":"ruler"===this.scalebarStyle&&(this.metricScalebar.innerHTML="\x3cdiv class\x3d'esriScalebarRuler'\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock upper_secondpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_firstpiece'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarRulerBlock lower_secondpiece'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'scaleLabelDiv'\x3e\x3cdiv class\x3d'esriScalebarLabel' style\x3d'left: -3%'\x3e0\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarFirstNumber'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriScalebarLabel esriScalebarSecondNumber'\x3e\x3c/div\x3e\x3c/div\x3e");
this.domNode.appendChild(this.metricScalebar);break;case "dual":this.domNode.appendChild(this.metricScalebar),this.domNode.appendChild(this.englishScalebar)}this.map=a.map;c?c.appendChild(this.domNode):(this.map.container.appendChild(this.domNode),a.attachTo?r.add(this.domNode,"scalebar_"+a.attachTo):r.add(this.domNode,"scalebar_bottom-left"));r.add(this.domNode,"esriScalebar");if(this.map.loaded)this._getDistance(this.map.extent),this._checkBingMaps();else var d=s.connect(this.map,"onLoad",this,
function(){s.disconnect(d);d=null;this._getDistance(this.map.extent);this._checkBingMaps()});this._mapOnPan=s.connect(this.map,"onPan",this,this._getDistance);this._mapOnExtentChange=s.connect(this.map,"onExtentChange",this,this._getDistance);b.forEach(this.map.layerIds,function(a,b){"esri.virtualearth.VETiledLayer"===this.map.getLayer(a).declaredClass&&s.connect(this.map.getLayer(a),"onVisibilityChange",t.hitch(this,function(a){this._checkBingMaps()}))},this);this._mapOnLayerAdd=s.connect(this.map,
"onLayerAdd",t.hitch(this,function(a){"esri.virtualearth.VETiledLayer"===a.declaredClass&&s.connect(a,"onVisibilityChange",t.hitch(this,function(a){this._checkBingMaps()}));this._checkBingMaps()}));this._mapOnLayerRemove=s.connect(this.map,"onLayerRemove",t.hitch(this,this._checkBingMaps))}else console.error("scalebar: unable to find the 'map' property in parameters")},hide:function(){this._hidden=!0;u.hide(this.domNode)},show:function(){this._hidden=!1;u.show(this.domNode)},destroy:function(){s.disconnect(this._mapOnPan);
s.disconnect(this._mapOnExtentChange);s.disconnect(this._mapOnLayerAdd);s.disconnect(this._mapOnLayerRemove);this.hide();this.map=null;m.destroy(this.domNode)},_checkBingMaps:function(){r.contains(this.domNode,"scalebar_bottom-left")&&(g.set(this.domNode,"left","25px"),b.forEach(this.map.layerIds,function(a,b){if("esri.virtualearth.VETiledLayer"===this.map.getLayer(a).declaredClass&&this.map.getLayer(a).visible){var c="95px";this.map._mapParams.nav&&(c="115px");g.set(this.domNode,"left",c)}},this))},
_getDistance:function(a){var b=k.position(this.domNode,!0).y-this.map.position.y,b=b>this.map.height?this.map.height:b,b=0>b?0:b,c=new E(0,b),b=new E(this.map.width,b),f,g;this.mapUnit="esriDecimalDegrees";var m=G.toMapPoint(a,this.map.width,this.map.height,c),r=G.toMapPoint(a,this.map.width,this.map.height,b),c=new w(a.xmin,(a.ymin+a.ymax)/2,this.map.spatialReference),b=new w(a.xmax,(a.ymin+a.ymax)/2,this.map.spatialReference);if(3857===this.map.spatialReference.wkid||102100===this.map.spatialReference.wkid||
102113===this.map.spatialReference.wkid||this.map.spatialReference.wkt&&-1!=this.map.spatialReference.wkt.indexOf("WGS_1984_Web_Mercator"))m=H.webMercatorToGeographic(m,!0),r=H.webMercatorToGeographic(r,!0),c=H.webMercatorToGeographic(c,!0),b=H.webMercatorToGeographic(b,!0);else if(d.isDefined(y[this.map.spatialReference.wkid])||this.map.spatialReference.wkt&&0===this.map.spatialReference.wkt.indexOf("PROJCS")){this.mapUnit="linearUnit";a=Math.abs(a.xmax-a.xmin);if(d.isDefined(y[this.map.spatialReference.wkid]))g=
y.values[y[this.map.spatialReference.wkid]];else{g=this.map.spatialReference.wkt;f=g.lastIndexOf(",")+1;var s=g.lastIndexOf("]]");g=parseFloat(g.substring(f,s))}a*=g;g=a/1609;f=a/1E3}"esriDecimalDegrees"===this.mapUnit&&(a=new D(new x({wkid:4326})),a.addPath([m,r]),m=I._straightLineDensify(a,10),a=A.geodesicLengths([m],B.KILOMETERS)[0],m=new D(new x({wkid:4326})),m.addPath([c,b]),c=I._straightLineDensify(m,10),A.geodesicLengths([c],B.KILOMETERS),g=a/1.609,f=a);"english"===this.scalebarUnit?this._getScaleBarLength(g,
"mi"):"metric"===this.scalebarUnit?this._getScaleBarLength(f,"km"):"dual"===this.scalebarUnit&&(this._getScaleBarLength(g,"mi"),this._getScaleBarLength(f,"km"))},_getScaleBarLength:function(a,b){var c=50*a/this.map.width,d=0,f=b;0.1>c&&("mi"===b?(c*=5280,f="ft"):"km"===b&&(c*=1E3,f="m"));for(;1<=c;)c/=10,d++;var g,k;0.5<c?(g=1,k=0.5):0.3<c?(g=0.5,k=0.3):0.2<c?(g=0.3,k=0.2):0.15<c?(g=0.2,k=0.15):0.1<=c&&(g=0.15,k=0.1);g=g/c>=c/k?k:g;c=50*(g/c);d=Math.pow(10,d)*g;this._drawScaleBar(c,d,f)},_drawScaleBar:function(c,
d,f){var g=2*Math.round(c),k,m;"mi"===f||"ft"===f?(this.englishScalebar.style.width=g+"px",c=a(".esriScalebarFirstNumber",this.englishScalebar),k=a(".esriScalebarSecondNumber",this.englishScalebar),m=a(".esriScalebarMetricLineBackground",this.englishScalebar)):(this.metricScalebar.style.width=g+"px",c=a(".esriScalebarFirstNumber",this.metricScalebar),k=a(".esriScalebarSecondNumber",this.metricScalebar),m=a(".esriScalebarMetricLineBackground",this.metricScalebar));b.forEach(m,function(a,b){a.style.width=
g-2+"px"},this);b.forEach(c,function(a,b){a.innerHTML=d},this);b.forEach(k,function(a,b){a.innerHTML="esriUnknown"!==this.mapUnit?2*d+this.localStrings[f]:2*d+"Unknown Unit"},this)}});f("extend-esri")&&t.setObject("dijit.Scalebar",q,c);return q})},"esri/units":function(){define(["dojo/has","./kernel"],function(q,t){var b={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",FEET_US:"esriFeetUS",
INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",SQUARE_METERS:"esriSquareMeters",
HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",RADIANS:"esriDURadians"};q("extend-esri")&&
(t.Units=b);return b})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),function(q,t,b,s,r,m,k,g){function f(a){var b=Math.PI/180,c=Math.sin(a.y*b),c=0.9933056200098026*(c/(1-0.006694379990197414*c*c)-6.111035746609262*Math.log((1-0.0818191908429643*c)/(1+0.0818191908429643*c)));return new m(6378137*a.x*b,3189068.5*c)}function a(a,b,c,d){var f=1/298.257223563,g=Math.sin(c);c=Math.cos(c);
a=(1-f)*Math.tan(a);var k=1/Math.sqrt(1+a*a),s=a*k,q=Math.atan2(a,c);a=k*g*k*g;for(var t=1-a,u=2.7233160610754688E11*t/4.040829998466145E13,B=1+u/16384*(4096+u*(-768+u*(320-175*u))),L=u/1024*(256+u*(-128+u*(74-47*u))),u=d/(6356752.31424518*B),Q=2*Math.PI,R,X,V,O;1E-12<Math.abs(u-Q);)V=Math.cos(2*q+u),R=Math.sin(u),X=Math.cos(u),O=L*R*(V+L/4*(X*(-1+2*V*V)-L/6*V*(-3+4*R*R)*(-3+4*V*V))),Q=u,u=d/(6356752.31424518*B)+O;d=s*R-k*X*c;d=Math.atan2(s*X+k*R*c,(1-f)*Math.sqrt(a+d*d));g=Math.atan2(R*g,k*X-s*R*
c);c=f/16*t*(4+f*(4-3*t));f=g-(1-c)*f*Math.sqrt(a)*(u+c*R*(V+c*X*(-1+2*V*V)));return new m((b+f)/(Math.PI/180),d/(Math.PI/180),new r({wkid:4326}))}function c(a,b,c,d){var f=1/298.257223563,g=d-b,k=Math.atan((1-f)*Math.tan(a)),m=Math.atan((1-f)*Math.tan(c)),r=Math.sin(k),k=Math.cos(k),s=Math.sin(m),m=Math.cos(m),q=g,t,u=1E3,B,R,X,V,O,U,v;do{X=Math.sin(q);V=Math.cos(q);R=Math.sqrt(m*X*m*X+(k*s-r*m*V)*(k*s-r*m*V));if(0===R)return 0;V=r*s+k*m*V;O=Math.atan2(R,V);U=k*m*X/R;B=1-U*U;X=V-2*r*s/B;isNaN(X)&&
(X=0);v=f/16*B*(4+f*(4-3*B));t=q;q=g+(1-v)*f*U*(O+v*R*(X+v*V*(-1+2*X*X)))}while(1E-12<Math.abs(q-t)&&0<--u);if(0===u)return r=6371009*Math.acos(Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos(d-b)),s=d-b,k=Math.sin(s)*Math.cos(c),a=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(s),{azimuth:Math.atan2(k,a),geodesicDistance:r};a=2.7233160610754688E11*B/4.040829998466145E13;c=a/1024*(256+a*(-128+a*(74-47*a)));a=6356752.31424518*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(O-c*R*(X+c/
4*(V*(-1+2*X*X)-c/6*X*(-3+4*R*R)*(-3+4*X*X))));c=Math.atan2(m*Math.sin(q),k*s-r*m*Math.cos(q));r=Math.atan2(k*Math.sin(q),k*s*Math.cos(q)-r*m);return{azimuth:c,geodesicDistance:a,reverseAzimuth:r}}function d(b,d){var f=Math.PI/180;637.100877151506>d&&(d=637.100877151506);if(!(b instanceof k||b instanceof g))throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),Error("_geodesicDensify: the input geometry is neither polyline nor polygon");var m=b instanceof k,r=
[],s;q.forEach(m?b.paths:b.rings,function(b){r.push(s=[]);s.push([b[0][0],b[0][1]]);var g,k,m,q,t,u;g=b[0][0]*f;k=b[0][1]*f;for(t=0;t<b.length-1;t++)if(m=b[t+1][0]*f,q=b[t+1][1]*f,!(g===m&&k===q)){q=c(k,g,q,m);m=q.azimuth;q=q.geodesicDistance;var x=q/d;if(1<x){for(u=1;u<=x-1;u++){var B=a(k,g,m,u*d);s.push([B.x,B.y])}u=a(k,g,m,(q+Math.floor(x-1)*d)/2);s.push([u.x,u.y])}k=a(k,g,m,q);s.push([k.x,k.y]);g=k.x*f;k=k.y*f}});return m?new k({paths:r,spatialReference:b.spatialReference}):new g({rings:r,spatialReference:b.spatialReference})}
var u={esriMeters:1,esriKilometers:1E3,esriYards:0.9144,esriFeet:0.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:0.0254,esriDecimeters:0.1,esriCentimeters:0.01,esriMillimeters:0.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:0.83612736,esriSquareFeet:0.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,esriSquareCentimeters:1E-4,esriSquareDecimeters:0.01},B={geodesicDensify:d,
geodesicLengths:function(a,b){var d=Math.PI/180,f=[];q.forEach(a,function(a,g){var k=0;q.forEach(a.paths,function(a,b){var f=0,g,m,r,s,q;for(g=1;g<a.length;g++)m=a[g-1][0]*d,r=a[g][0]*d,s=a[g-1][1]*d,q=a[g][1]*d,s===q&&m===r||(m=c(s,m,q,r),f+=m.geodesicDistance);k+=f});k/=u[b];f.push(k)});return f},geodesicAreas:function(a,b){var c=[];q.forEach(a,function(a,b){var f=d(a,1E4);c.push(f)});var g=[],k,r;q.forEach(c,function(a,c){var d=0;q.forEach(a.rings,function(a,b){k=f(new m(a[0][0],a[0][1]));r=f(new m(a[a.length-
1][0],a[a.length-1][1]));var c=r.x*k.y-k.x*r.y,g;for(g=0;g<a.length-1;g++)k=f(new m(a[g+1][0],a[g+1][1])),r=f(new m(a[g][0],a[g][1])),c+=r.x*k.y-k.x*r.y;d+=c});d/=u[b];g.push(d/-2)});return g},_unitsDictionary:u,_toEqualAreaPoint:f,_directGeodeticSolver:a,_inverseGeodeticSolver:c};b("extend-esri")&&t.mixin(t.getObject("geometry",!0,s),B);return B})},"esri/dijit/TimeSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/kernel dojo/has dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dijit/_Widget dijit/_Templated dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojox/timing/_base dojox/form/RangeSlider dojo/text!dojox/form/resources/HorizontalRangeSlider.html ../kernel ../lang ../TimeExtent ./_EventedWidget dojo/text!./templates/TimeSlider.html dojo/i18n!../nls/jsapi".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I){f=q([H,a,c],{declaredClass:"esri.dijit.TimeSlider",widgetsInTemplate:!0,templateString:G,intermediateChanges:!1,_slideDuration:1E3,_defaultCount:10,_eventMap:{"time-extent-change":!0,play:!0,pause:!0,next:!0,previous:!0},constructor:function(a,b){t.mixin(this,I.widgets.timeSlider);this._iconClass="tsButton tsPlayButton";this.loop=this.playing=!1;this.thumbCount=1;this.thumbMovingRate=1E3;this._createTimeInstants=!1;this._options=t.mixin({excludeDataAtTrailingThumb:!1,
excludeDataAtLeadingThumb:!1},a.options||{})},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this._timer=new x.Timer;this._timer.setInterval(this.thumbMovingRate);this._timer.onTick=t.hitch(this,"_bumpSlider",1);this._createSlider()},destroy:function(){this._timer.stop();this.timeStops=this._timer=null;this._slider.destroy();this._slider=null;this._hTicks&&(this._hTicks.destroyRecursive(),this._hTicks=null);this._hLabels&&(this._hLabels.destroyRecursive(),
this._hLabels=null);this.inherited(arguments)},onTimeExtentChange:function(){},onPlay:function(){},onPause:function(){},onNext:function(){},onPrevious:function(){},_onHorizontalChange:function(){var a=this._sliderToTimeExtent();this.onTimeExtentChange(a)},_onPlay:function(){this.playing=!this.playing;this._updateUI();this.playing?(this._timer.start(),this.onPlay(this._sliderToTimeExtent())):(this._timer.stop(),this.onPause(this._sliderToTimeExtent()));var a=this._getSliderValue();this._offset=t.isArray(a)?
a[1]-a[0]:0},_onNext:function(){this.playing||(this._bumpSlider(1),this.onNext(this._sliderToTimeExtent()))},_onPrev:function(){this.playing||(this._bumpSlider(-1),this.onPrevious(this._sliderToTimeExtent()))},createTimeStopsByCount:function(a,b){if(a&&a.startTime&&a.endTime){b=b||this._defaultCount;var c=Math.ceil((a.endTime-a.startTime)/(b-1));this.createTimeStopsByTimeInterval(a,c,"esriTimeUnitsMilliseconds")}},createTimeStopsByTimeInterval:function(a,b,c,d){if(a&&a.startTime&&a.endTime){this.fullTimeExtent=
new A(a.startTime,a.endTime);d&&!0===d.resetStartTime&&this._resetStartTime(this.fullTimeExtent,c);this._timeIntervalUnits=c;d=this.fullTimeExtent.startTime;for(var f=[];d<=a.endTime;)f.push(d),d=a._getOffsettedDate(d,b,c);0<f.length&&f[f.length-1]<a.endTime&&f.push(d);this.setTimeStops(f)}},getCurrentTimeExtent:function(){return this._sliderToTimeExtent()},setTimeStops:function(a){this.timeStops=a||[];this._numTicks=this._numStops=this.timeStops.length;!1===D.isDefined(this.fullTimeExtent)&&(this.fullTimeExtent=
new A(a[0],a[a.length-1]))},setLoop:function(a){this.loop=a},setThumbCount:function(a){this.thumbCount=a;this.singleThumbAsTimeInstant(this._createTimeInstants);this._slider&&this._createSlider()},setThumbIndexes:function(a){this.thumbIndexes=t.clone(a)||[0,1];this._initializeThumbs()},setThumbMovingRate:function(a){this.thumbMovingRate=a;this._timer&&this._timer.setInterval(this.thumbMovingRate)},setLabels:function(a){this.labels=a;this._slider&&this._createSlider()},setTickCount:function(a){this._numTicks=
a;this._slider&&this._createSlider()},singleThumbAsTimeInstant:function(a){this._createTimeInstants=a&&1===this.thumbCount},next:function(){this._onNext()},pause:function(){this.playing=!1;this._updateUI();this._timer.stop()},play:function(){!0!==this.playing&&(this.playing=!1,this._onPlay())},previous:function(){this._onPrev()},_setIntermediateChangesAttr:function(a){this.intermediateChanges=!!a;this._slider&&this._slider.set("intermediateChanges",!!a)},_updateUI:function(){m.remove(this.playPauseBtn.iconNode,
this._iconClass);this._iconClass=this.playing?"tsButton tsPauseButton":"tsButton tsPlayButton";m.add(this.playPauseBtn.iconNode,this._iconClass);this.previousBtn.set("disabled",this.playing);this.nextBtn.set("disabled",this.playing)},_createSlider:function(){this._slider&&(this._slider.destroy(),this._slider=null);for(var a=this.domNode;a.parentNode&&!a.dir;)a=a.parentNode;a={onChange:t.hitch(this,"_onHorizontalChange"),showButtons:!1,discreteValues:this._numStops,slideDuration:this._slideDuration,
"class":"ts",dir:"ltr",intermediateChanges:this.intermediateChanges};this._ts=k.create("div",{},s.query(".tsTmp",this.domNode)[0],"first");this._timeSliderTicks=k.create("div",{},this._ts,"first");this._timeSliderLabels=k.create("div",{},this._ts);2===this.thumbCount?this._createRangeSlider(a):this._createSingleSlider(a);this.thumbIndexes=this.thumbIndexes||[0,1];this._createHorizRule();this._createLabels();!0===this._createTimeInstants&&s.query(".dijitSliderProgressBarH, .dijitSliderLeftBumper, .dijitSliderRightBumper",
this._ts).forEach(function(a){g.set(a,{background:"none"})});this._initializeThumbs();b.disconnect(this._onChangeConnect);this._onChangeConnect=b.connect(this._slider,"onChange",t.hitch(this,"_updateThumbIndexes"))},_createRangeSlider:function(a){this._isRangeSlider=!0;this._slider=new (q([d,y],{templateString:w}))(a,this._ts)},_createSingleSlider:function(a){this._isRangeSlider=!1;this._slider=new d(a,this._ts)},_createHorizRule:function(){this._hTicks&&(this._hTicks.destroyRecursive(),this._hTicks=
null);2>this._numTicks||(this._hTicks=new u({container:"topDecoration",ruleStyle:"","class":"tsTicks",count:this._numTicks},this._timeSliderTicks))},_createLabels:function(){this._hLabels&&(this._hLabels.destroyRecursive(),this._hLabels=null);this.labels&&0<this.labels.length&&(this._hLabels=new B({labels:this.labels,labelStyle:"","class":"tsLabels"},this._timeSliderLabels))},_initializeThumbs:function(){if(this._slider){this._offset=this._toSliderValue(this.thumbIndexes[1])||0;var a=this._toSliderValue(this.thumbIndexes[0]),
a=a>this._slider.maximum||a<this._slider.minimum?this._slider.minimum:a;if(!0===this._isRangeSlider){var b=this._toSliderValue(this.thumbIndexes[1]),b=b>this._slider.maximum||b<this._slider.minimum?this._slider.maximum:b;this._setSliderValue([a,b<a?a:b])}else this._setSliderValue(a);this._onHorizontalChange()}},_bumpSlider:function(a){var b=this._getSliderValue(),c=b,d=c,f=a;t.isArray(b)&&(d=b[0],c=b[1],f=[{change:a,useMaxValue:!0},{change:a,useMaxValue:!1}]);1E-10>Math.abs(d-this._slider.minimum)&&
0>a||1E-10>Math.abs(c-this._slider.maximum)&&0<a?this._timer.isRunning&&(this.loop?(this._timer.stop(),this._setSliderValue(this._getSliderMinValue()),a=this._sliderToTimeExtent(),this.onTimeExtentChange(a),this._timer.start(),this.playing=!0):this.pause()):this._slider._bumpValue(f)},_updateThumbIndexes:function(){var a=this._getSliderValue();t.isArray(a)?(this.thumbIndexes[0]=this._toSliderIndex(a[0]),this.thumbIndexes[1]=this._toSliderIndex(a[1])):this.thumbIndexes[0]=this._toSliderIndex(a)},_sliderToTimeExtent:function(){if(this.timeStops&&
0!==this.timeStops.length){var a=new A,b=this._getSliderValue(),c,d;t.isArray(b)?(b[0]>b[1]?(d=b[0],c=b[1]):(c=b[0],d=b[1]),a.startTime=new Date(this.timeStops[this._toSliderIndex(c)]),a.endTime=new Date(this.timeStops[this._toSliderIndex(d)]),this._adjustTimeExtent(a)):(a.startTime=!0===this._createTimeInstants?new Date(this.timeStops[this._toSliderIndex(b)]):new Date(this.fullTimeExtent.startTime),a.endTime=!0===this._createTimeInstants?a.startTime:new Date(this.timeStops[this._toSliderIndex(b)]));
return a}},_adjustTimeExtent:function(a){if(!(!1===this._options.excludeDataAtTrailingThumb&&!1===this._options.excludeDataAtLeadingThumb)&&a.startTime.getTime()!==a.endTime.getTime()){if(this._options.excludeDataAtTrailingThumb){var b=a.startTime;b.setUTCSeconds(b.getUTCSeconds()+1)}this._options.excludeDataAtLeadingThumb&&(a=a.endTime,a.setUTCSeconds(a.getUTCSeconds()-1))}},_resetStartTime:function(a,b){switch(b){case "esriTimeUnitsSeconds":a.startTime.setUTCMilliseconds(0);break;case "esriTimeUnitsMinutes":a.startTime.setUTCSeconds(0,
0,0);break;case "esriTimeUnitsHours":a.startTime.setUTCMinutes(0,0,0);break;case "esriTimeUnitsDays":a.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsWeeks":a.startTime.setUTCDate(a.startTime.getUTCDate()-a.startTime.getUTCDay());break;case "esriTimeUnitsMonths":a.startTime.setUTCDate(1);a.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsDecades":a.startTime.setUTCFullYear(a.startTime.getUTCFullYear()-a.startTime.getUTCFullYear()%10);break;case "esriTimeUnitsCenturies":a.startTime.setUTCFullYear(a.startTime.getUTCFullYear()-
a.startTime.getUTCFullYear()%100)}},_getSliderMinValue:function(){return this._isRangeSlider?[this._slider.minimum,this._slider.minimum+this._offset]:this._slider.minimum},_toSliderIndex:function(a){a=Math.floor((a-this._slider.minimum)*this._numStops/(this._slider.maximum-this._slider.minimum));0>a&&(a=0);a>=this._numStops&&(a=this._numStops-1);return a},_toSliderValue:function(a){return a*(this._slider.maximum-this._slider.minimum)/(this._numStops-1)+this._slider.minimum},_getSliderValue:function(){return this._slider.get("value")},
_setSliderValue:function(a){this._slider._setValueAttr(a,!1,!1)}});r("extend-esri")&&t.setObject("dijit.TimeSlider",f,E);return f})},"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H){var G=t("dijit.form._SliderMover",c,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=r.position(b.sliderBarContainer,!0),b._setPixelValue_=g.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){c.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,
!0)}});b=t("dijit.form.HorizontalSlider",[D,A],{templateString:H,value:0,showButtons:!0,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:x.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",
_onKeyUp:function(a){!this.disabled&&(!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey)&&this._setValueAttr(this.value,!0)},_onKeyDown:function(a){if(!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey){switch(a.keyCode){case k.HOME:this._setValueAttr(this.minimum,!1);break;case k.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?k.RIGHT_ARROW:k.LEFT_ARROW:case !1===this._descending?k.DOWN_ARROW:k.UP_ARROW:case !1===this._descending?k.PAGE_DOWN:
k.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?k.LEFT_ARROW:k.RIGHT_ARROW:case !1===this._descending?k.UP_ARROW:k.DOWN_ARROW:case !1===this._descending?k.PAGE_UP:k.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){!this.disabled&&!this.readOnly&&(f("ie")||y.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&
!this.readOnly&&this.clickSelect){y.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=r.position(this.sliderBarContainer,!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;if(1>=d||Infinity==d)d=b;d--;a=Math.round(a/(b/d));this._setValueAttr(Math.max(Math.min((this.maximum-
this.minimum)*a/d+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,b){this._set("value",a);this.valueNode.value=a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var c=this.maximum>this.minimum?(a-this.minimum)/(this.maximum-this.minimum):0,d=!1===this._descending?this.remainingBar:this.progressBar,f=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(b&&
0<this.slideDuration&&d.style[this._progressPixelSize]){var g=this,k={},m=parseFloat(d.style[this._progressPixelSize]),r=this.slideDuration*(c-m/100);0!=r&&(0>r&&(r=0-r),k[this._progressPixelSize]={start:m,end:100*c,units:"%"},this._inProgressAnim=s.animateProperty({node:d,duration:r,onAnimate:function(a){f.style[g._progressPixelSize]=100-parseFloat(a[g._progressPixelSize])+"%"},onEnd:function(){delete g._inProgressAnim},properties:k}),this._inProgressAnim.play())}else d.style[this._progressPixelSize]=
100*c+"%",f.style[this._progressPixelSize]=100*(1-c)+"%"},_bumpValue:function(a,b){if(!this.disabled&&!(this.readOnly||this.maximum<=this.minimum)){var c=m.getComputedStyle(this.sliderBarContainer),d=r.getContentBox(this.sliderBarContainer,c),c=this.discreteValues;if(1>=c||Infinity==c)c=d[this._pixelCount];c--;d=Math.round((this.value-this.minimum)*c/(this.maximum-this.minimum))+a;0>d&&(d=0);d>c&&(d=c);d=d*(this.maximum-this.minimum)/c+this.minimum;this._setValueAttr(d,b)}},_onClkBumper:function(a){!this.disabled&&
(!this.readOnly&&this.clickSelect)&&this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==k.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==k.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){this.focused&&(a.stopPropagation(),a.preventDefault(),this._bumpValue(0>
a.wheelDelta?-1:1,!0))},startup:function(){this._started||(q.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display=
"",this.decrementButton.style.display="");var a=d('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",a[0].id));this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(w.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),w.addMouseListener(this.incrementButton,this,"_typematicCallback",
25,500));this.own(B(this.domNode,u.wheel,g.hitch(this,"_mouseWheeled")));var b=t(G,{widget:this});this._movable=new a(this.sliderHandle,{mover:b});this._layoutHackIE7()},destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});b._Mover=G;return b})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(q,t,b,s,r,m){s=
q("dojo.dnd.move.constrainedMoveable",m,{constraints:function(){},within:!1,constructor:function(b,g){g||(g={});this.constraints=g.constraints;this.within=g.within},onFirstMove:function(b){var g=this.constraintBox=this.constraints.call(this,b);g.r=g.l+g.w;g.b=g.t+g.h;this.within&&(b=t.getMarginSize(b.node),g.r-=b.w,g.b-=b.h)},onMove:function(b,g){var f=this.constraintBox,a=b.node.style;this.onMoving(b,g);g.l=g.l<f.l?f.l:f.r<g.l?f.r:g.l;g.t=g.t<f.t?f.t:f.b<g.t?f.b:g.t;a.left=g.l+"px";a.top=g.t+"px";
this.onMoved(b,g)}});r=q("dojo.dnd.move.boxConstrainedMoveable",s,{box:{},constructor:function(b,g){var f=g&&g.box;this.constraints=function(){return f}}});q=q("dojo.dnd.move.parentConstrainedMoveable",s,{area:"content",constructor:function(k,g){var f=g&&g.area;this.constraints=function(){var a=this.node.parentNode,c=b.getComputedStyle(a),d=t.getMarginBox(a,c);if("margin"==f)return d;var g=t.getMarginExtents(a,c);d.l+=g.l;d.t+=g.t;d.w-=g.w;d.h-=g.h;if("border"==f)return d;g=t.getBorderExtents(a,c);
d.l+=g.l;d.t+=g.t;d.w-=g.w;d.h-=g.h;if("padding"==f)return d;g=t.getPadExtents(a,c);d.l+=g.l;d.t+=g.t;d.w-=g.w;d.h-=g.h;return d}}});return{constrainedMoveable:s,boxConstrainedMoveable:r,parentConstrainedMoveable:q}})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(q,t,b,s){var r=b.getObject("dojo.dnd",!0);r.getCopyKeyState=function(b){return b[q("mac")?"metaKey":"ctrlKey"]};r._uniqueId=0;r.getUniqueId=function(){var b;do b=t._scopeName+"Unique"+
++r._uniqueId;while(s.byId(b));return b};r._empty={};r.isFormElement=function(b){b=b.target;3==b.nodeType&&(b=b.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+b.tagName.toLowerCase()+" ")};return r})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u){return t("dojo.dnd.Mover",[f],{constructor:function(d,
f,g){function k(a){a.preventDefault();a.stopPropagation()}this.node=m.byId(d);this.marginBox={l:f.pageX,t:f.pageY};this.mouseButton=f.button;f=this.host=g;d=d.ownerDocument;this.events=[a(d,c.move,b.hitch(this,"onFirstMove")),a(d,c.move,b.hitch(this,"onMouseMove")),a(d,c.release,b.hitch(this,"onMouseUp")),a(d,"dragstart",k),a(d.body,"selectstart",k)];u.autoScrollStart(d);if(f&&f.onMoveStart)f.onMoveStart(this)},onMouseMove:function(a){u.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+
a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(s("webkit")&&s("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=k.getMarginBox(this.node);c=r.doc.body;var f=g.getComputedStyle(c),
m=k.getMarginBox(c,f),f=k.getContentBox(c,f);c=b.l-(f.l-m.l);b=b.t-(f.t-m.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){q.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(q,t,b,s,r,m){var k={};q.setObject("dojo.dnd.autoscroll",k);k.getViewport=m.getBox;k.V_TRIGGER_AUTOSCROLL=32;k.H_TRIGGER_AUTOSCROLL=32;k.V_AUTOSCROLL_VALUE=16;k.H_AUTOSCROLL_VALUE=16;var g,f=b.doc,a=Infinity,c=Infinity;k.autoScrollStart=function(d){f=d;g=m.getBox(f);d=b.body(f).parentNode;a=Math.max(d.scrollHeight-g.h,0);c=Math.max(d.scrollWidth-g.w,0)};k.autoScroll=function(d){var r=g||m.getBox(f),s=b.body(f).parentNode,q=0,t=0;d.clientX<k.H_TRIGGER_AUTOSCROLL?q=-k.H_AUTOSCROLL_VALUE:d.clientX>
r.w-k.H_TRIGGER_AUTOSCROLL&&(q=Math.min(k.H_AUTOSCROLL_VALUE,c-s.scrollLeft));d.clientY<k.V_TRIGGER_AUTOSCROLL?t=-k.V_AUTOSCROLL_VALUE:d.clientY>r.h-k.V_TRIGGER_AUTOSCROLL&&(t=Math.min(k.V_AUTOSCROLL_VALUE,a-s.scrollTop));window.scrollBy(q,t)};k._validNodes={div:1,p:1,td:1};k._validOverflow={auto:1,scroll:1};k.autoScrollNodes=function(a){for(var c,f,g,m,q,E,D=0,A=0,H=a.target;H;){if(1==H.nodeType&&H.tagName.toLowerCase()in k._validNodes){g=r.getComputedStyle(H);m=g.overflow.toLowerCase()in k._validOverflow;
q=g.overflowX.toLowerCase()in k._validOverflow;E=g.overflowY.toLowerCase()in k._validOverflow;if(m||q||E)c=s.getContentBox(H,g),f=s.position(H,!0);if(m||q){g=Math.min(k.H_TRIGGER_AUTOSCROLL,c.w/2);q=a.pageX-f.x;if(t("webkit")||t("opera"))q+=b.body().scrollLeft;D=0;0<q&&q<c.w&&(q<g?D=-g:q>c.w-g&&(D=g),H.scrollLeft+=D)}if(m||E){m=Math.min(k.V_TRIGGER_AUTOSCROLL,c.h/2);E=a.pageY-f.y;if(t("webkit")||t("opera"))E+=b.body().scrollTop;A=0;0<E&&E<c.h&&(E<m?A=-m:E>c.h-m&&(A=m),H.scrollTop+=A)}if(D||A)return}try{H=
H.parentNode}catch(G){H=null}}k.autoScroll(a)};return k})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d){return t("dojo.dnd.Moveable",[m],{handle:"",delay:0,skip:!1,constructor:function(a,d){this.node=s.byId(a);d||(d={});this.handle=d.handle?s.byId(d.handle):null;this.handle||(this.handle=this.node);this.delay=0<d.delay?d.delay:
0;this.skip=d.skip;this.mover=d.mover?d.mover:c;this.events=[k(this.handle,f.press,b.hitch(this,"onMouseDown")),k(this.handle,"dragstart",b.hitch(this,"onSelectStart")),k(this.handle,"selectstart",b.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){q.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(c){if(!this.skip||!a.isFormElement(c)){if(this.delay)this.events.push(k(this.handle,f.move,b.hitch(this,
"onMouseMove")),k(this.handle.ownerDocument,f.release,b.hitch(this,"onMouseUp"))),this._lastX=c.pageX,this._lastY=c.pageY;else this.onDragDetected(c);c.stopPropagation();c.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(b){if(!this.skip||
!a.isFormElement(b))b.stopPropagation(),b.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){g.publish("/dnd/move/start",a);r.add(d.body(),"dojoMove");r.add(this.node,"dojoMoveItem")},onMoveStop:function(a){g.publish("/dnd/move/stop",a);r.remove(d.body(),"dojoMove");r.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},
onMoved:function(){}})})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(q,t,b,s,r){var m={};q.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(b){m[b]=s[b]});b.mixin(m,{defaultDuration:t.defaultDuration||200});b.mixin(r,m);return r})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(q,
t,b,s,r,m){var k=m.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(b.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(g,f,a,c,d,k,m,r){if(d!=this._obj){this.stop();this._initialDelay=m||500;this._subsequentDelay=
k||0.9;this._minDelay=r||10;this._obj=d;this._node=a;this._count=this._currentTimeout=-1;this._callback=b.hitch(f,c);this._evt={faux:!0};for(var s in g)"layerX"!=s&&"layerY"!=s&&(f=g[s],"function"!=typeof f&&"undefined"!=typeof f&&(this._evt[s]=f));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(g,f,a,c,d,m,r){var x="keyCode"in f?"keyCode":"charCode"in
f?"charCode":"charOrCode",y=[s(g,"keyCode"in f?"keydown":"charCode"in f?"keypress":t._keypress,b.hitch(this,function(b){b[x]==f[x]&&(void 0===f.ctrlKey||f.ctrlKey==b.ctrlKey)&&(void 0===f.altKey||f.altKey==b.altKey)&&(void 0===f.metaKey||f.metaKey==(b.metaKey||!1))&&(void 0===f.shiftKey||f.shiftKey==b.shiftKey)?(b.stopPropagation(),b.preventDefault(),k.trigger(b,a,g,c,f,d,m,r)):k._obj==f&&k.stop()})),s(g,"keyup",b.hitch(this,function(){k._obj==f&&k.stop()}))];return{remove:function(){q.forEach(y,
function(a){a.remove()})}}},addMouseListener:function(g,f,a,c,d,m){var t=[s(g,"mousedown",b.hitch(this,function(b){b.preventDefault();k.trigger(b,f,g,a,g,c,d,m)})),s(g,"mouseup",b.hitch(this,function(a){this._obj&&a.preventDefault();k.stop()})),s(g,"mouseout",b.hitch(this,function(a){this._obj&&a.preventDefault();k.stop()})),s(g,"dblclick",b.hitch(this,function(s){s.preventDefault();9>r("ie")&&(k.trigger(s,f,g,a,g,c,d,m),setTimeout(b.hitch(this,k.stop),50))}))];return{remove:function(){q.forEach(t,
function(a){a.remove()})}}},addListener:function(b,f,a,c,d,k,m,r){var s=[this.addKeyListener(f,a,c,d,k,m,r),this.addMouseListener(b,c,d,k,m,r)];return{remove:function(){q.forEach(s,function(a){a.remove()})}}}};return k})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(q,t,b,s,r,m,k,g,f,a){s("dijit-legacy-requires")&&
k(0,function(){q(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});k=t("dijit.form.Button"+(s("dojo-bidi")?"_NoBidi":""),[g,f],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&
!this.label&&(this.label=m.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&b.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){r.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=m.trim(this.containerNode.innerText||
this.containerNode.textContent||""))}});s("dojo-bidi")&&(k=t("dijit.form.Button",k,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return k})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(q,t,b,s,r,m,k,g){t("dijit-legacy-requires")&&s(0,function(){require(["dijit/form/_FormValueWidget"])});return q("dijit.form._FormWidget",[r,k,m,g],{setDisabled:function(f){b.deprecated("setDisabled("+f+") is deprecated. Use set('disabled',"+f+") instead.","","2.0");this.set("disabled",f)},setValue:function(f){b.deprecated("dijit.form._FormWidget:setValue("+f+") is deprecated.  Use set('value',"+f+") instead.","","2.0");this.set("value",f)},getValue:function(){b.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!t("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d){t=
t("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);q.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,m.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(q.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");
this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,d={};q.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&q.forEach(this._stateClasses,function(a){delete d[a]});q.forEach(b,
function(a){d[a]=!0});var f=[],g;for(g in d)f.push(g);c.className=f.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,c){function d(c){s.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":s.toggle(a,b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":s.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":s.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":s.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});g(function(){function g(a,c,f){if(!f||!b.isDescendant(f,c))for(;c&&c!=f;c=c.parentNode)if(c._cssState){var k=d.getEnclosingWidget(c);k&&(c==k.domNode?k._cssMouseEvent(a):k._subnodeCssMouseEvent(c,c._cssState,a))}}var m=a.body(),r;k(m,
f.over,function(a){g(a,a.target,a.relatedTarget)});k(m,f.out,function(a){g(a,a.target,a.relatedTarget)});k(m,c.press,function(a){r=a.target;g(a,r)});k(m,c.release,function(a){g(a,r);r=null});k(m,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=d.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return t})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),
function(q,t,b,s,r,m,k,g,f,a){return t("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(c){this._set("disabled",c);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?b.set(this.focusNode,"disabled",c):this.focusNode.setAttribute("aria-disabled",c?"true":"false");this.valueNode&&
b.set(this.valueNode,"disabled",c);c?(this._set("hovering",!1),this._set("active",!1),c="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",q.forEach(r.isArray(c)?c:[c],function(b){b=this[b];g("webkit")||a.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(k(this.focusNode,
"focus",function(){s.remove();b.remove()}))[0],m=g("pointer-events")?"pointerup":g("MSPointer")?"MSPointerUp":g("touch-events")?"touchend, mouseup":"mouseup",s=this.own(k(this.ownerDocumentBody,m,r.hitch(this,function(a){s.remove();b.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){f.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=s.get(this.domNode,
"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,
this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},
"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(q,t,b,s){var r=q("dijit.form._ButtonMixin"+(b("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(b){b.stopPropagation();b.preventDefault();this.disabled||this.valueNode.click(b);return!1},_onClick:function(b){if(this.disabled)return b.stopPropagation(),b.preventDefault(),!1;!1===this.onClick(b)&&b.preventDefault();var k=b.defaultPrevented;if(!k&&"submit"==this.type&&
!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var f=s.byNode(g);if(f&&"function"==typeof f._onSubmit){f._onSubmit(b);b.preventDefault();k=!0;break}}return!k},postCreate:function(){this.inherited(arguments);t.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(b){this._set("label",b);(this.containerNode||this.focusNode).innerHTML=b;this.onLabelSet()},onLabelSet:function(){}});b("dojo-bidi")&&(r=q("dijit.form._ButtonMixin",
r,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return r})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(q,t,b,s){return q("dijit.form._FormValueWidget",[b,s],{_layoutHackIE7:function(){if(7==t("ie"))for(var b=this.domNode,m=b.parentNode,k=b.firstChild||b,g=k.style.filter,f=this;m&&0==m.clientHeight;)(function(){var a=f.connect(m,"onscroll",function(){f.disconnect(a);
k.style.filter=(new Date).getMilliseconds();f.defer(function(){k.style.filter=g})})})(),m=m.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(q,t,b,s,r,m){return q("dijit.form._FormValueMixin",m,{readOnly:!1,_setReadOnlyAttr:function(b){t.set(this.focusNode,"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=
this._resetValue=this.value)},_setValueAttr:function(b,g){this._handleOnChange(b,g)},_handleOnChange:function(b,g){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(q,t,b,s){return t("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);
this.containerNode||(this.containerNode=this.domNode)},addChild:function(r,m){var k=this.containerNode;if(0<m){for(k=k.firstChild;0<m;)1==k.nodeType&&m--,k=k.nextSibling;k?m="before":(k=this.containerNode,m="last")}b.place(r.domNode,k,m);this._started&&!r._started&&r.startup()},removeChild:function(b){"number"==typeof b&&(b=this.getChildren()[b]);b&&(b=b.domNode)&&b.parentNode&&b.parentNode.removeChild(b)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(b,m){var k=
this.getChildren(),g=q.indexOf(k,b);return k[g+m]},getIndexOfChild:function(b){return q.indexOf(this.getChildren(),b)}})})},"dijit/form/HorizontalRule":function(){define(["dojo/_base/declare","../_Widget","../_TemplatedMixin"],function(q,t,b){return q("dijit.form.HorizontalRule",[t,b],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',
_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',_genHTML:function(b){return this._positionPrefix+b+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){this.inherited(arguments);var b;if(1==this.count)b=this._genHTML(50,0);else{var r,m=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){b=this._genHTML(0,0);for(r=1;r<this.count-1;r++)b+=this._genHTML(m*r,r);b+=this._genHTML(100,this.count-1)}else{b=this._genHTML(100,0);for(r=1;r<this.count-1;r++)b+=
this._genHTML(100-m*r,r);b+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=b}})})},"dijit/form/HorizontalRuleLabels":function(){define("dojo/_base/declare dojo/has dojo/number dojo/query dojo/_base/lang ./HorizontalRule".split(" "),function(q,t,b,s,r,m){q=q("dijit.form.HorizontalRuleLabels",m,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,
constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"\x3e',_suffix:"\x3c/div\x3e\x3c/div\x3e",_calcPosition:function(b){return b},_genHTML:function(b,g){var f=this.labels[g];return this._positionPrefix+this._calcPosition(b)+this._positionSuffix+this.labelStyle+this._genDirectionHTML(f)+this._labelPrefix+f+this._suffix},_genDirectionHTML:function(b){return""},
getLabels:function(){var k=this.labels;!k.length&&this.srcNodeRef&&(k=s("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!k.length&&1<this.count)for(var k=[],g=this.minimum,f=(this.maximum-g)/(this.count-1),a=0;a<this.count;a++)k.push(a<this.numericMargin||a>=this.count-this.numericMargin?"":b.format(g,this.constraints)),g+=f;return k},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}});t("dojo-bidi")&&q.extend({_setTextDirAttr:function(b){this.textDir!=
b&&(this._set("textDir",b),s(".dijitRuleLabelContainer",this.domNode).forEach(r.hitch(this,function(b){b.style.direction=this.getTextDir(b.innerText||b.textContent||"")})))},_genDirectionHTML:function(b){return this.textDir?"direction:"+this.getTextDir(b)+";":""}});return q})},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(q){q.experimental("dojox.timing");q.getObject("timing",!0,dojox);dojox.timing.Timer=function(q){this.timer=null;this.isRunning=!1;this.interval=
q;this.onStop=this.onStart=null};q.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(t){this.isRunning&&window.clearInterval(this.timer);this.interval=t;this.isRunning&&(this.timer=window.setInterval(q.hitch(this,"onTick"),this.interval))},start:function(){if("function"==typeof this.onStart)this.onStart();this.isRunning=!0;this.timer=window.setInterval(q.hitch(this,"onTick"),this.interval)},stop:function(){if("function"==typeof this.onStop)this.onStop();this.isRunning=!1;window.clearInterval(this.timer)}});
return dojox.timing})},"dojox/form/RangeSlider":function(){define(["dojo/_base/kernel","./_RangeSliderMixin","./HorizontalRangeSlider","./VerticalRangeSlider"],function(q,t){q.deprecated("Call require() for HorizontalRangeSlider / VerticalRangeSlider, explicitly rather than 'dojox.form.RangeSlider' itself","","2.0");return t})},"dojox/form/_RangeSliderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/_base/event dojo/_base/sniff dojo/dom-style dojo/dom-geometry dojo/keys dijit dojo/dnd/Mover dojo/dnd/Moveable dijit/form/_FormValueWidget dijit/focus dojo/fx dojox/fx".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x){var y=function(a,b){return a-b};a=q("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=b.map(this.value,function(a){return parseInt(a,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(y);var a=this,b=q(w,{constructor:function(){this.widget=a}});this._movableMax=new d(this.sliderHandleMax,{mover:b});this.sliderHandle.setAttribute("aria-valuemin",
this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);b=q(E,{constructor:function(){this.widget=a}});this._movableBar=new d(this.progressBar,{mover:b});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments);this._movableMax.destroy();
this._movableBar.destroy()},_onKeyPress:function(a){if(!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey){var b=a.target===this.sliderHandleMax,c=a.target===this.progressBar,d=t.delegate(f,this.isLeftToRight()?{PREV_ARROW:f.LEFT_ARROW,NEXT_ARROW:f.RIGHT_ARROW}:{PREV_ARROW:f.RIGHT_ARROW,NEXT_ARROW:f.LEFT_ARROW}),g=0,k=!1;switch(a.keyCode){case d.HOME:this._setValueAttr(this.minimum,!0,b);r.stop(a);return;case d.END:this._setValueAttr(this.maximum,!0,b);r.stop(a);return;case d.PREV_ARROW:case d.DOWN_ARROW:k=
!0;case d.NEXT_ARROW:case d.UP_ARROW:g=1;break;case d.PAGE_DOWN:k=!0;case d.PAGE_UP:g=this.pageIncrement;break;default:this.inherited(arguments);return}k&&(g=-g);g&&(c?this._bumpValue([{change:g,useMaxValue:!1},{change:g,useMaxValue:!0}]):this._bumpValue(g,b),r.stop(a))}},_onHandleClickMax:function(a){!this.disabled&&!this.readOnly&&(m("ie")||B.focus(this.sliderHandleMax),r.stop(a))},_onClkIncBumper:function(){this._setValueAttr(!1===this._descending?this.minimum:this.maximum,!0,!0)},_bumpValue:function(a,
b){var c=t.isArray(a)?[this._getBumpValue(a[0].change,a[0].useMaxValue),this._getBumpValue(a[1].change,a[1].useMaxValue)]:this._getBumpValue(a,b);this._setValueAttr(c,!0,b)},_getBumpValue:function(a,b){var c=b?1:0,d=k.getComputedStyle(this.sliderBarContainer),f=g.getContentBox(this.sliderBarContainer,d),d=this.discreteValues,c=this.value[c];if(1>=d||Infinity==d)d=f[this._pixelCount];d--;c=this.maximum>this.minimum?(c-this.minimum)*d/(this.maximum-this.minimum)+a:0;0>c&&(c=0);c>d&&(c=d);return c*(this.maximum-
this.minimum)/d+this.minimum},_onBarClick:function(a){!this.disabled&&!this.readOnly&&(m("ie")||B.focus(this.progressBar),r.stop(a))},_onRemainingBarClick:function(a){if(!this.disabled&&!this.readOnly){m("ie")||B.focus(this.progressBar);var b=g.position(this.sliderBarContainer,!0),c=g.position(this.progressBar,!0),d=a[this._mousePixelCoord],f=c[this._startingPixelCoord],c=f+c[this._pixelCount],f=this._isReversed()?d<=f:d>=c,d=this._isReversed()?b[this._pixelCount]-d+b[this._startingPixelCoord]:d-
b[this._startingPixelCoord];this._setPixelValue(d,b[this._pixelCount],!0,f);r.stop(a)}},_setPixelValue:function(a,b,c,d){!this.disabled&&!this.readOnly&&(a=this._getValueByPixelValue(a,b),this._setValueAttr(a,c,d))},_getValueByPixelValue:function(a,b){var c=this.discreteValues;if(1>=c||Infinity==c)c=b;c--;var d=Math.round((0>a?0:b<a?b:a)/(b/c));return(this.maximum-this.minimum)*d/c+this.minimum},_setValueAttr:function(a,b,c){var d=t.clone(this.value);t.isArray(a)?d=a:d[c?1:0]=a;this._lastValueReported=
"";this.valueNode.value=a=d;d.sort(y);this.sliderHandle.setAttribute("aria-valuenow",d[0]);this.sliderHandleMax.setAttribute("aria-valuenow",d[1]);u.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(b,c)},_printSliderBar:function(a,b){var c=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0,d=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,f=c;c>d&&(c=d,d=f);var g=this._isReversed()?100*(1-c):100*c,k=this._isReversed()?
100*(1-d):100*d,m=this._isReversed()?100*(1-d):100*c;if(a&&0<this.slideDuration&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),f=this.slideDuration/10,0!==f){0>f&&(f=0-f);var r={},q={},t={};r[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:g,units:"%"};q[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:k,units:"%"};t[this._handleOffsetCoord]=
{start:this.progressBar.style[this._handleOffsetCoord],end:m,units:"%"};t[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(d-c),units:"%"};c=s.animateProperty({node:this.sliderHandle.parentNode,duration:f,properties:r});d=s.animateProperty({node:this.sliderHandleMax.parentNode,duration:f,properties:q});f=s.animateProperty({node:this.progressBar,duration:f,properties:t});x.combine([c,d,f]).play()}}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=
g+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=k+"%",this.progressBar.style[this._handleOffsetCoord]=m+"%",this.progressBar.style[this._progressPixelSize]=100*(d-c)+"%"}});var w=q("dijit.form._SliderMoverMax",c,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=g.position(b.sliderBarContainer,!0),b._setPixelValue_=t.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-
a:a,c[b._pixelCount],!1,!0)},destroy:function(a){c.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}}),E=q("dijit.form._SliderBarMover",c,{onMouseMove:function(a){var b=this.widget;if(!b.disabled&&!b.readOnly){var c=b._abspos,d=b._bar,f=b._mouseOffset;c||(c=b._abspos=g.position(b.sliderBarContainer,!0),b._setPixelValue_=t.hitch(b,"_setPixelValue"),b._getValueByPixelValue_=t.hitch(b,"_getValueByPixelValue"),b._isReversed_=b._isReversed());d||(d=b._bar=
g.position(b.progressBar,!0));f||(f=b._mouseOffset=a[b._mousePixelCoord]-d[b._startingPixelCoord]);a=a[b._mousePixelCoord]-c[b._startingPixelCoord]-f;pixelValues=[a,a+d[b._pixelCount]];pixelValues.sort(y);0>=pixelValues[0]&&(pixelValues[0]=0,pixelValues[1]=d[b._pixelCount]);pixelValues[1]>=c[b._pixelCount]&&(pixelValues[1]=c[b._pixelCount],pixelValues[0]=c[b._pixelCount]-d[b._pixelCount]);c=[b._getValueByPixelValue(b._isReversed_?c[b._pixelCount]-pixelValues[0]:pixelValues[0],c[b._pixelCount]),b._getValueByPixelValue(b._isReversed_?
c[b._pixelCount]-pixelValues[1]:pixelValues[1],c[b._pixelCount])];b._setValueAttr(c,!1,!1)}},destroy:function(){c.prototype.destroy.apply(this,arguments);var a=this.widget;a._abspos=null;a._bar=null;a._mouseOffset=null;a._setValueAttr(a.value,!0)}});return a})},"dojox/fx":function(){define(["./fx/_base"],function(q){return q})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),
function(q,t,b,s,r,m,k,g,f){q=t.getObject("dojox.fx",!0);t.mixin(q,{anim:b.anim,animateProperty:b.animateProperty,fadeTo:b._fade,fadeIn:b.fadeIn,fadeOut:b.fadeOut,combine:s.combine,chain:s.chain,slideTo:s.slideTo,wipeIn:s.wipeIn,wipeOut:s.wipeOut});q.sizeTo=function(a){var c=a.node=r.byId(a.node),d=a.method||"chain";a.duration||(a.duration=500);"chain"==d&&(a.duration=Math.floor(a.duration/2));var f,g,k,q,w,E=null,D=function(b){return function(){var c=m.getComputedStyle(b),d=c.position,r=c.width,
s=c.height;f="absolute"==d?b.offsetTop:parseInt(c.top)||0;k="absolute"==d?b.offsetLeft:parseInt(c.left)||0;w="auto"==r?0:parseInt(r);E="auto"==s?0:parseInt(s);q=k-Math.floor((a.width-w)/2);g=f-Math.floor((a.height-E)/2);"absolute"!=d&&"relative"!=d&&(c=m.coords(b,!0),f=c.y,k=c.x,b.style.position="absolute",b.style.top=f+"px",b.style.left=k+"px")}}(c),c=b.animateProperty(t.mixin({properties:{height:function(){D();return{end:a.height||0,start:E}},top:function(){return{start:f,end:g}}}},a)),d=b.animateProperty(t.mixin({properties:{width:function(){return{start:w,
end:a.width||0}},left:function(){return{start:k,end:q}}}},a));return s["combine"==a.method?"combine":"chain"]([c,d])};q.slideBy=function(a){var c,d,f=function(a){return function(){var b=m.getComputedStyle(a),f=b.position;c="absolute"==f?a.offsetTop:parseInt(b.top)||0;d="absolute"==f?a.offsetLeft:parseInt(b.left)||0;"absolute"!=f&&"relative"!=f&&(b=k.coords(a,!0),c=b.y,d=b.x,a.style.position="absolute",a.style.top=c+"px",a.style.left=d+"px")}}(a.node=r.byId(a.node));f();a=b.animateProperty(t.mixin({properties:{top:c+
(a.top||0),left:d+(a.left||0)}},a));g.connect(a,"beforeBegin",a,f);return a};q.crossFade=function(a){var c=a.nodes[0]=r.byId(a.nodes[0]),d=f.style(c,"opacity"),g=a.nodes[1]=r.byId(a.nodes[1]);f.style(g,"opacity");return s.combine([b[0==d?"fadeIn":"fadeOut"](t.mixin({node:c},a)),b[0==d?"fadeOut":"fadeIn"](t.mixin({node:g},a))])};q.highlight=function(a){var c=a.node=r.byId(a.node);a.duration=a.duration||400;var d=a.color||"#ffff99",k=f.style(c,"backgroundColor");"rgba(0, 0, 0, 0)"==k&&(k="transparent");
a=b.animateProperty(t.mixin({properties:{backgroundColor:{start:d,end:k}}},a));"transparent"==k&&g.connect(a,"onEnd",a,function(){c.style.backgroundColor=k});return a};q.wipeTo=function(a){a.node=r.byId(a.node);var c=a.node,d=c.style,g=a.width?"width":"height",k={};k[g]={start:function(){d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d[g]="1px",d.display="",d.visibility="",1;var a=f.style(c,g);return Math.max(a,1)},end:a[g]};return b.animateProperty(t.mixin({properties:k},
a))};return q})},"dojox/form/HorizontalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/HorizontalRangeSlider.html","dijit/form/HorizontalSlider"],function(q,t,b,s){return q("dojox.form.HorizontalRangeSlider",[s,t],{templateString:b})})},"dojox/form/VerticalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/VerticalRangeSlider.html","dijit/form/VerticalSlider"],function(q,t,b,s){return q("dojox.form.VerticalRangeSlider",
[s,t],{templateString:b})})},"dijit/form/VerticalSlider":function(){define(["dojo/_base/declare","./HorizontalSlider","dojo/text!./templates/VerticalSlider.html"],function(q,t,b){return q("dijit.form.VerticalSlider",t,{templateString:b,_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:!0,_isReversed:function(){return this._descending}})})},"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,showAttribution:null,showLabels:!0});b("extend-esri")&&t.setObject("tasks.PrintTemplate",q,s);return q})},"esri/dijit/Print":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/has dojo/dom dojo/dom-class dojo/dom-construct dijit/Menu dijit/MenuItem dijit/form/Button dijit/form/ComboButton ../tasks/PrintTask ../tasks/PrintParameters ../kernel ../domUtils ../Evented dojo/i18n!../nls/jsapi".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E){q=q([w],{declaredClass:"esri.dijit.Print",_eventMap:{"print-complete":["result"],error:!0,"print-start":!0},onPrintComplete:function(){},onError:function(){},onPrintStart:function(){},constructor:function(a,b){a=a||{};this.url=a.url;this.async=a.async;this.map=a.map;this.templates=a.templates;this.extraParams=a.extraParameters;var c=E.widgets.print;this._printText=c.NLS_print;this._printingText=c.NLS_printing;this._printoutText=c.NLS_printout;this.templates||
(this.templates=[{label:this._printText,format:"PNG32",layout:"MAP_ONLY",exportOptions:{width:800,height:1100,dpi:96}}]);this.printDomNode=g.create("div");k.add(this.printDomNode,"esriPrint");b=m.byId(b);b.appendChild(this.printDomNode)},startup:function(){this._createPrintButton()},destroy:function(){this.map=null;g.destroy(this.printDomNode)},hide:function(){y.hide(this.printDomNode)},show:function(){y.show(this.printDomNode)},printMap:function(a){this.onPrintStart();this._printButton.setAttribute("label",
this._printingText);this._printButton.setAttribute("disabled",!0);var b=this.map,c=new u(this.url,{async:this.async}),d=new B;d.map=b;d.template=a;d.extraParameters=this.extraParams;c.execute(d,t.hitch(this,this._printComplete),t.hitch(this,this._printError))},_createPrintButton:function(){var b=this.templates;if(1===b.length)this._printButton=new c({label:this._printText,onClick:t.hitch(this,function(){this.printMap(b[0])})}),this.printDomNode.appendChild(this._printButton.domNode);else{this._printButton=
new d({label:this._printText,onClick:t.hitch(this,function(){this.printMap(b[0])})});this.printDomNode.appendChild(this._printButton.domNode);var g=new f({style:"display: none;"});s.forEach(b,function(b){var c=new a({label:b.label,onClick:t.hitch(this,function(){this.printMap(b)})});g.addChild(c)},this);this._printButton.setAttribute("dropDown",g)}k.add(this._printButton.domNode,"esriPrintButton")},_printComplete:function(a){this.onPrintComplete(a);this._printButton.domNode.style.display="none";a=
g.create("a",{href:a.url,target:"_blank",innerHTML:this._printoutText});b.connect(a,"onclick",t.hitch(this,this._hyperlinkClick));this._removeAllChildren(this.printDomNode);k.add(a,"esriPrintout");this.printDomNode.appendChild(a)},_printError:function(a){this._removeAllChildren(this.printDomNode);this._createPrintButton();console.error(a);this.onError(a)},_hyperlinkClick:function(){this._removeAllChildren(this.printDomNode);this._createPrintButton()},_removeAllChildren:function(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}});
r("extend-esri")&&t.setObject("dijit.Print",q,x);return q})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){c("dijit-legacy-requires")&&y(0,function(){q(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return b("dijit.Menu",
x,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):t.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return u.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||
a.contentWindow&&a.contentWindow.document||a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(b){b=s.byId(b,this.ownerDocument);var c;if("iframe"==b.tagName.toLowerCase()){var k=b;c=this._iframeContentWindow(k);c=d.body(c.document)}else c=b==d.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var m={node:b,iframe:k};r.set(b,"_dijitMenu"+this.id,this._bindings.push(m));var q=f.hitch(this,function(b){var c=this.selector,d=c?function(b){return a.selector(c,
b)}:function(a){return a},f=this;return[a(b,d(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<f._lastKeyDown+500||f._scheduleOpen(this,k,{x:a.pageX,y:a.pageY},a.target)}),a(b,d("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==g.F10||f.leftClickToOpen&&a.keyCode==g.SPACE)a.stopPropagation(),a.preventDefault(),f._scheduleOpen(this,k,null,a.target),f._lastKeyDown=(new Date).getTime()})]});m.connects=c?q(c):[];k&&(m.onloadHandler=
f.hitch(this,function(){var a=this._iframeContentWindow(k),a=d.body(a.document);m.connects=q(a)}),k.addEventListener?k.addEventListener("load",m.onloadHandler,!1):k.attachEvent("onload",m.onloadHandler))},unBindDomNode:function(a){var b;try{b=s.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&r.has(b,a)){for(var d=r.get(b,a)-1,f=this._bindings[d],g;g=f.connects.pop();)g.remove();(g=f.iframe)&&(g.removeEventListener?g.removeEventListener("load",f.onloadHandler,!1):g.detachEvent("onload",
f.onloadHandler));r.remove(b,a);delete this._bindings[d]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function b(){x.refocus&&y&&y.focus();B.close(x)}var d=a.target,f=a.iframe,g=a.coords,r=!g;this.currentTarget=a.delegatedTarget;if(g){if(f){a=m.position(f,!0);var d=this._iframeContentWindow(f),d=m.docScroll(d.document),q=k.getComputedStyle(f),
t=k.toPixelValue,u=(c("ie")&&c("quirks")?0:t(f,q.paddingLeft))+(c("ie")&&c("quirks")?t(f,q.borderLeftWidth):0),f=(c("ie")&&c("quirks")?0:t(f,q.paddingTop))+(c("ie")&&c("quirks")?t(f,q.borderTopWidth):0);g.x+=a.x+u-d.x;g.y+=a.y+f-d.y}}else g=m.position(d,!0),g.x+=10,g.y+=10;var x=this,f=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var y=!a||s.isDescendant(a,this.domNode)?f:a;B.open({popup:this,x:g.x,y:g.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"});this.focus();
r||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);B.close(this)}},destroy:function(){t.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){function w(){this._popupWrapper&&(m.destroy(this._popupWrapper),delete this._popupWrapper)}b=b(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=k.position(this._firstAroundNode,!0),d=b.x-a.x,a=b.y-a.y;if(d||a){this._firstAroundPosition=b;for(b=0;b<this._stack.length;b++){var f=this._stack[b].wrapper.style;f.top=parseFloat(f.top)+a+"px";"auto"==f.right?f.left=parseFloat(f.left)+
d+"px":f.right=parseFloat(f.right)-d+"px"}}this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),d||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,c=a.domNode;b||(b=m.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=b,t.after(a,"destroy",w,!0),"ontouchend"in document&&d(b,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(a){var b=this._createWrapper(a);a=k.isBodyLtr(a.ownerDocument);var c={visibility:"hidden",top:"-9999px",display:""};c[a?"left":"right"]="-9999px";c[a?"right":"left"]="auto";g.set(b,c);return b},hide:function(a){var b=this._createWrapper(a);g.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var m=this._stack,q=b.popup,t=q.domNode,w=b.orient||["below","below-alt","above","above-alt"],y=b.parent?b.parent.isLeftToRight():k.isBodyLtr(q.ownerDocument),M=b.around,J=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;m.length&&(!b.parent||!s.isDescendant(b.parent.domNode,m[m.length-1].widget.domNode));)this.close(m[m.length-1].widget);var S=this.moveOffScreen(q);
q.startup&&!q._started&&q.startup();var L,Q=k.position(t);if("maxHeight"in b&&-1!=b.maxHeight)L=b.maxHeight||Infinity;else{L=x.getEffectiveBox(this.ownerDocument);var R=M?k.position(M,!1):{y:b.y-(b.padding||0),h:2*(b.padding||0)};L=Math.floor(Math.max(R.y,L.h-(R.y+R.h)))}Q.h>L&&(Q=g.getComputedStyle(t),g.set(S,{overflowY:"scroll",height:L+"px",border:Q.borderLeftWidth+" "+Q.borderLeftStyle+" "+Q.borderLeftColor}),t._originalStyle=t.style.cssText,t.style.border="none");r.set(S,{id:J,style:{zIndex:this._beginZIndex+
m.length},"class":"dijitPopup "+(q.baseClass||q["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});0==m.length&&M&&(this._firstAroundNode=M,this._firstAroundPosition=k.position(M,!0),this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),50));f("config-bgIframe")&&!q.bgIframe&&(q.bgIframe=new B(S));J=q.orient?c.hitch(q,"orient"):null;w=M?u.around(S,M,w,y,J):u.at(S,b,"R"==w?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding,J);S.style.visibility="visible";
t.style.visibility="visible";t=[];t.push(d(S,"keydown",c.hitch(this,function(c){if(c.keyCode==a.ESCAPE&&b.onCancel)c.stopPropagation(),c.preventDefault(),b.onCancel();else if(c.keyCode==a.TAB&&(c.stopPropagation(),c.preventDefault(),(c=this.getTopPopup())&&c.onCancel))c.onCancel()})));q.onCancel&&b.onCancel&&t.push(q.on("cancel",b.onCancel));t.push(q.on(q.onExecute?"execute":"change",c.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));m.push({widget:q,wrapper:S,parent:b.parent,
onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:t});if(q.onOpen)q.onOpen(w);return w},close:function(a){for(var b=this._stack;a&&q.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),d=c.widget,f=c.onClose;d.bgIframe&&(d.bgIframe.destroy(),delete d.bgIframe);if(d.onClose)d.onClose();for(var g;g=c.handlers.pop();)g.remove();d&&d.domNode&&this.hide(d);f&&f()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return y.popup=new b})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(q,t,b,s,r,m,k){function g(a,c,d,f){var g=m.getEffectiveBox(a.ownerDocument);(!a.parentNode||"body"!=String(a.parentNode.tagName).toLowerCase())&&r.body(a.ownerDocument).appendChild(a);var k=null;q.some(c,function(b){var c=b.corner,m=b.pos,r=0,s={w:{L:g.l+g.w-m.x,R:m.x-g.l,M:g.w}[c.charAt(1)],
h:{T:g.t+g.h-m.y,B:m.y-g.t,M:g.h}[c.charAt(0)]},q=a.style;q.left=q.right="auto";d&&(r=d(a,b.aroundCorner,c,s,f),r="undefined"==typeof r?0:r);var w=a.style,y=w.display,S=w.visibility;"none"==w.display&&(w.visibility="hidden",w.display="");q=t.position(a);w.display=y;w.visibility=S;y={L:m.x,R:m.x-q.w,M:Math.max(g.l,Math.min(g.l+g.w,m.x+(q.w>>1))-q.w)}[c.charAt(1)];S={T:m.y,B:m.y-q.h,M:Math.max(g.t,Math.min(g.t+g.h,m.y+(q.h>>1))-q.h)}[c.charAt(0)];m=Math.max(g.l,y);w=Math.max(g.t,S);y=Math.min(g.l+g.w,
y+q.w);S=Math.min(g.t+g.h,S+q.h);y-=m;S-=w;r+=q.w-y+(q.h-S);if(null==k||r<k.overflow)k={corner:c,aroundCorner:b.aroundCorner,x:m,y:w,w:y,h:S,overflow:r,spaceAvailable:s};return!r});k.overflow&&d&&d(a,k.aroundCorner,k.corner,k.spaceAvailable,f);c=k.y;var s=k.x,w=r.body(a.ownerDocument);/relative|absolute/.test(b.get(w,"position"))&&(c-=b.get(w,"marginTop"),s-=b.get(w,"marginLeft"));w=a.style;w.top=c+"px";w.left=s+"px";w.right="auto";return k}var f={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return k.place={at:function(a,
b,d,k,m){d=q.map(d,function(a){var d={corner:a,aroundCorner:f[a],pos:{x:b.x,y:b.y}};k&&(d.pos.x+="L"==a.charAt(1)?k.x:-k.x,d.pos.y+="T"==a.charAt(0)?k.y:-k.y);return d});return g(a,d,m)},around:function(a,c,d,f,k){function m(a,b){S.push({aroundCorner:a,corner:b,pos:{x:{L:G,R:G+M,M:G+(M>>1)}[a.charAt(1)],y:{T:I,B:I+J,M:I+(J>>1)}[a.charAt(0)]}})}var r;if("string"==typeof c||"offsetWidth"in c||"ownerSVGElement"in c){if(r=t.position(c,!0),/^(above|below)/.test(d[0])){var w=t.getBorderExtents(c),E=c.firstChild?
t.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0},D=t.getBorderExtents(a),A=a.firstChild?t.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};r.y+=Math.min(w.t+E.t,D.t+A.t);r.h-=Math.min(w.t+E.t,D.t+A.t)+Math.min(w.b+E.b,D.b+A.b)}}else r=c;if(c.parentNode){w="absolute"==b.getComputedStyle(c).position;for(c=c.parentNode;c&&1==c.nodeType&&"BODY"!=c.nodeName;){E=t.position(c,!0);D=b.getComputedStyle(c);/relative|absolute/.test(D.position)&&(w=!1);if(!w&&/hidden|auto|scroll/.test(D.overflow)){var A=Math.min(r.y+
r.h,E.y+E.h),H=Math.min(r.x+r.w,E.x+E.w);r.x=Math.max(r.x,E.x);r.y=Math.max(r.y,E.y);r.h=A-r.y;r.w=H-r.x}"absolute"==D.position&&(w=!0);c=c.parentNode}}var G=r.x,I=r.y,M="w"in r?r.w:r.w=r.width,J="h"in r?r.h:(s.deprecated("place.around: dijit/place.__Rectangle: { x:"+G+", y:"+I+", height:"+r.height+", width:"+M+" } has been deprecated.  Please use { x:"+G+", y:"+I+", h:"+r.height+", w:"+M+" }","","2.0"),r.h=r.height),S=[];q.forEach(d,function(a){var b=f;switch(a){case "above-centered":m("TM","BM");
break;case "below-centered":m("BM","TM");break;case "after-centered":b=!b;case "before-centered":m(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":m(b?"TL":"TR",b?"TR":"TL");m(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":m(b?"BL":"BR",b?"TL":"TR");m(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":m(b?"TL":"TR",b?"BL":"BR");m(b?"TR":"TL",b?"BR":"BL");break;default:m(a.aroundCorner,a.corner)}});a=g(a,S,k,{w:M,h:J});a.aroundNodePos=r;return a}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(q,t,b,s,r){var m=new q,k;b(function(){var b=r.getBox();m._rlh=t(window,"resize",function(){var a=r.getBox();b.h==a.h&&b.w==a.w||(b=a,m.emit("resize"))});if(8==s("ie")){var f=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=f&&(f=screen.deviceXDPI,m.emit("resize"))},500)}s("ios")&&(t(document,"focusin",function(a){k=a.target}),t(document,"focusout",function(a){k=null}))});m.getEffectiveBox=
function(b){b=r.getBox(b);var f=k&&k.tagName&&k.tagName.toLowerCase();if(s("ios")&&k&&!k.readOnly&&("textarea"==f||"input"==f&&/^(color|email|number|password|search|tel|text|url)$/.test(k.type)))b.h*=0==orientation||180==orientation?0.66:0.4,f=k.getBoundingClientRect(),b.h=Math.max(b.h,f.top+f.height);return b};return m})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(q,t,b,s,r,
m,k,g){g.add("config-bgIframe",g("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||g("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var f=new function(){var a=[];this.pop=function(){var c;a.length?(c=a.pop(),c.style.display=""):(9>g("ie")?(c="\x3ciframe src\x3d'"+(b.dojoBlankHtmlUrl||q.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",c=document.createElement(c)):
(c=s.create("iframe"),c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role","presentation"),r.set(c,"opacity",0.1)),c.tabIndex=-1);return c};this.push=function(b){b.style.display="none";a.push(b)}};t.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(g("config-bgIframe")){var b=this.iframe=f.pop();a.appendChild(b);7>g("ie")||g("quirks")?(this.resize(a),this._conn=k(a,"resize",m.hitch(this,"resize",a))):r.set(b,{width:"100%",height:"100%"})}};m.extend(t.BackgroundIframe,
{resize:function(a){this.iframe&&r.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),f.push(this.iframe),delete this.iframe)}});return t.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(q,t,b,s){return q("dijit.DropDownMenu",s,{templateString:b,baseClass:"dijitMenu",
_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(b){this._moveToPopup(b);b.stopPropagation();b.preventDefault()},_onLeftArrow:function(b){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else b.stopPropagation(),b.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x){return t("dijit._MenuBase",[d,x,B,u],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){r.toggle(this.domNode,"dijitMenuActive",a);r.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var b=c.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var b=this,d="string"==typeof this.childSelector?this.childSelector:m.hitch(this,"childSelector");this.own(g(this.containerNode,g.selector(d,k.enter),function(){b.onItemHover(c.byNode(this))}),g(this.containerNode,g.selector(d,k.leave),function(){b.onItemUnhover(c.byNode(this))}),g(this.containerNode,g.selector(d,a),function(a){b.onItemClick(c.byNode(this),a);a.stopPropagation()}),
g(this.containerNode,g.selector(d,"focusin"),function(){b._onItemFocus(c.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),a.popup&&(!a.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||
b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var c=a.popup;c.parentMenu=this;this.own(this._mouseoverHandle=g.once(c.domNode,"mouseover",m.hitch(this,"_onPopupHover")));var d=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&
d.focusChild(a);d._cleanUp()},onExecute:m.hitch(this,"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},b);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(s.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(q,t,b,s,r,m,k,g,f,a){return t("dijit._KeyNavContainer",[f,a,g],{connectKeyNavHandlers:function(a,b){var f=this._keyNavCodes={},g=m.hitch(this,"focusPrev"),k=m.hitch(this,"focusNext");q.forEach(a,function(a){f[a]=g});q.forEach(b,function(a){f[a]=k});f[r.HOME]=m.hitch(this,"focusFirstChild");f[r.END]=m.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){s.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);q.forEach(this.getChildren(),
m.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=
k.byNode(a))&&a.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(q,t,b,s,r,m,k,g){return t("dijit._KeyNavMixin",g,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);b.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var f=this._keyNavCodes={};f[s.HOME]=r.hitch(this,"focusFirstChild");f[s.END]=r.hitch(this,
"focusLastChild");f[this.isLeftToRight()?s.LEFT_ARROW:s.RIGHT_ARROW]=r.hitch(this,"_onLeftArrow");f[this.isLeftToRight()?s.RIGHT_ARROW:s.LEFT_ARROW]=r.hitch(this,"_onRightArrow");f[s.UP_ARROW]=r.hitch(this,"_onUpArrow");f[s.DOWN_ARROW]=r.hitch(this,"_onDownArrow")}var a=this,f="string"==typeof this.childSelector?this.childSelector:r.hitch(this,"childSelector");this.own(m(this.domNode,"keypress",r.hitch(this,"_onContainerKeypress")),m(this.domNode,"keydown",r.hitch(this,"_onContainerKeydown")),m(this.domNode,
"focus",r.hitch(this,"_onContainerFocus")),m(this.containerNode,m.selector(f,"focusin"),function(b){a._onChildFocus(k.getEnclosingWidget(this),b)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},
focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(b,a){b&&(this.focusedChild&&b!==this.focusedChild&&this._onChildBlur(this.focusedChild),b.set("tabIndex",this.tabIndex),b.focus(a?"end":"start"))},_onContainerFocus:function(b){b.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){b.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(f){b.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex",
"-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(b){b&&b!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),b.set("tabIndex",this.tabIndex),this.lastFocused=b,this._set("focusedChild",b))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,a,c,d){b&&this.focusChild(b)},_keyboardSearchCompare:function(b,a){var c=b.domNode,c=(b.label||(c.focusNode?
c.focusNode.label:"")||c.innerText||c.textContent||"").replace(/^\s+/,"").substr(0,a.length).toLowerCase();return a.length&&c==a?-1:0},_isFormElement:function(b){return"INPUT"===b.tagName||"TEXTAREA"===b.tagName||"SELECT"===b.tagName||"BUTTON"===b.tagName},_onContainerKeydown:function(b){if(!this._isFormElement(document.activeElement)){var a=this._keyNavCodes[b.keyCode];a?(a(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode==s.SPACE&&(this._searchTimer&&
!b.ctrlKey&&!b.altKey&&!b.metaKey)&&(b.stopImmediatePropagation(),b.preventDefault(),this._keyboardSearch(b," "))}},_onContainerKeypress:function(b){if(!this._isFormElement(document.activeElement)&&!(b.charCode<=s.SPACE||b.ctrlKey||b.altKey||b.metaKey))b.preventDefault(),b.stopPropagation(),this._keyboardSearch(b,String.fromCharCode(b.charCode).toLowerCase())},_keyboardSearch:function(b,a){var c=null,d,g=0;r.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=a;
var b=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;d=this._searchString.substr(0,b);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var f=this.focusedChild||null;if(1==b||!f)if(f=this._getNextFocusableChild(f,1),!f)return;b=f;do{var k=this._keyboardSearchCompare(f,d);k&&0==g++&&(c=f);if(-1==k){g=-1;break}f=this._getNextFocusableChild(f,1)}while(f&&f!=b)})();this.onKeyboardSearch(c,b,d,g)},_onChildBlur:function(){},
_getNextFocusableChild:function(b,a){var c=b;do{if(b)b=this._getNext(b,a);else if(b=this[0<a?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=c&&b.isFocusable())return b}while(b!=c);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(b,a){if(b)for(b=b.domNode;b;)if((b=b[0>a?"previousSibling":"nextSibling"])&&"getAttribute"in b){var c=k.byNode(b);if(c)return c}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d){k=q("dijit.MenuItem"+(m("dojo-bidi")?"_NoBidi":""),[g,f,a,c],{templateString:d,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var b="",c;c=a.search(/{\S}/);if(0<=c){var b=a.charAt(c+1),d=a.substr(0,c);a=a.substr(c+3);c=d+b+a;a=d+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+a}else c=a;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);b.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&b.set(this.accelKeyNode,"id",this.id+"_accel");t.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==m("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_setSelected:function(a){s.toggle(this.domNode,
"dijitMenuItemSelected",a)},setLabel:function(a){r.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){r.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=
a?"":"none",this.accelKeyNode.innerHTML=a,b.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}});m("dojo-bidi")&&(k=q("dijit.MenuItem",k,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return k})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(q,t){return q("dijit._Contained",null,{_getSibling:function(b){var s=this.getParent();return s&&s._getSiblingOfChild&&s._getSiblingOfChild(this,
"previous"==b?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var b=this.getParent();return!b||!b.getIndexOfChild?-1:b.getIndexOfChild(this)}})})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),function(q,t,b,s,r){return q("dijit.form.ComboButton",s,{templateString:r,
_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(m){if(m.keyCode==t[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"])b.focus(this._popupStateNode),m.stopPropagation(),m.preventDefault()},_onArrowKeyDown:function(m){if(m.keyCode==t[this.isLeftToRight()?"LEFT_ARROW":
"RIGHT_ARROW"])b.focus(this.titleNode),m.stopPropagation(),m.preventDefault()},focus:function(m){this.disabled||b.focus("start"==m?this.titleNode:this._popupStateNode)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),function(q,t,b,s,r,m,k,g,f,a){return q("dijit.form.DropDownButton",[k,g,f],{baseClass:"dijitDropDownButton",
templateString:a,_fillContent:function(){var a=this.srcNodeRef,b=this.containerNode;if(a&&b)for(;a.hasChildNodes();){var f=a.firstChild;f.hasAttribute&&(f.hasAttribute("data-dojo-type")||f.hasAttribute("dojoType")||f.hasAttribute("data-"+t._scopeName+"-type")||f.hasAttribute(t._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(f)):b.appendChild(f)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=
r.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&m.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var d=this.dropDown,f=d.on("load",b.hitch(this,function(){f.remove();a()}));d.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){return q("dijit._HasDropDown",y,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(b){!this.disabled&&!this.readOnly&&("MSPointerDown"!=b.type&&"pointerdown"!=b.type&&b.preventDefault(),this.own(c.once(this.ownerDocument,d.release,a.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},
_onDropDownMouseUp:function(a){var b=this.dropDown,c=!1;if(a&&this._opened){var d=m.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w)||!(a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!c;)r.contains(d,"dijitPopup")?c=!0:d=d.parentNode;if(c){d=a.target;if(b.onItemClick){for(var f;d&&!(f=u.byNode(d));)d=d.parentNode;if(f&&f.onClick&&f.getParent)f.getParent().onItemClick(f,a)}return}}}if(this._opened){if(b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering))this._focusDropDownTimer=
this.defer(function(){b.focus();delete this._focusDropDownTimer})}else this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",
left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";r.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var b=this.focusNode||this.domNode;this.own(c(this._buttonNode,d.press,a.hitch(this,"_onDropDownMouseDown")),c(this._buttonNode,"click",a.hitch(this,"_onDropDownClick")),c(b,"keydown",a.hitch(this,"_onKey")),c(b,"keyup",a.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);
this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;if(b&&(this._opened&&b.handleKey)&&!1===b.handleKey(a))a.stopPropagation(),a.preventDefault();else if(b&&this._opened&&a.keyCode==f.ESCAPE)this.closeDropDown(),a.stopPropagation(),a.preventDefault();else if(!this._opened&&(a.keyCode==f.DOWN_ARROW||(a.keyCode==f.ENTER||a.keyCode==f.SPACE&&(!this._searchTimer||
a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase())))this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var b=this.dropDown;b&&b.focus&&this.defer(a.hitch(b,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var b=
new t,c=a.hitch(this,function(){this.openDropDown();b.resolve(this.dropDown)});this.isLoaded()?c():this.loadDropDown(c);return b},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var b=this.dropDown,c=b.domNode,d=this._aroundNode||this.domNode,f=this,g=x.open({parent:this,popup:b,around:d,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){f.closeDropDown(!0)},onCancel:function(){f.closeDropDown(!0)},
onClose:function(){s.set(f._popupStateNode,"popupActive",!1);r.remove(f._popupStateNode,"dijitHasDropDownOpen");f._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&d.offsetWidth>b._popupWrapper.offsetWidth){var d=d.offsetWidth-b._popupWrapper.offsetWidth,k={w:b.domNode.offsetWidth+d};this._origStyle=c.style.cssText;a.isFunction(b.resize)?b.resize(k):m.setMarginBox(c,k);"R"==g.corner[1]&&(b._popupWrapper.style.left=b._popupWrapper.style.left.replace("px","")-d+"px")}s.set(this._popupStateNode,
"popupActive","true");r.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",b.id);"presentation"!==c.getAttribute("role")&&!c.getAttribute("aria-labelledby")&&c.setAttribute("aria-labelledby",this.id);return g},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded",
"false"),a&&this.focus&&this.focus(),x.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../urlUtils ./Task ../geometry/Polygon ../renderers/SimpleRenderer ../geometry/scaleUtils ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query dojo/has!extend-esri?./PrintParameters dojo/has!extend-esri?./LegendLayer".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M){q=q(u,{declaredClass:"esri.tasks.PrintTask",constructor:function(a,b){this.url=a;this.printGp=new E(this.url);this._handler=t.hitch(this,this._handler);b&&b.async&&(this.async=b.async);this._colorEvaluator=M("$..color")},_handler:function(a,b,c,d,f){try{var g;this.async?"esriJobSucceeded"===a.jobStatus&&this.printGp.getResultData(a.jobId,"Output_File",t.hitch(this,function(a){g=a.value;this._successHandler([g],"onComplete",c,f)})):(g=a[0].value,
this._successHandler([g],"onComplete",c,f))}catch(k){this._errorHandler(k,d,f)}},execute:function(c,d,f){var k=this._handler,m=this._errorHandler,q=c.template||new D;q.hasOwnProperty("showLabels")||(q.showLabels=!0);var u=q.exportOptions,w;u&&(w={outputSize:[u.width,u.height],dpi:u.dpi});var u=q.layoutOptions,x,v=[];if(u){this.legendAll=!1;u.legendLayers?b.forEach(u.legendLayers,function(e){var a={};a.id=e.layerId;e.subLayerIds&&(a.subLayerIds=e.subLayerIds);v.push(a)}):this.legendAll=!0;var K,C;
if("Miles"===u.scalebarUnit||"Kilometers"===u.scalebarUnit)K="esriKilometers",C="esriMiles";else if("Meters"===u.scalebarUnit||"Feet"===u.scalebarUnit)K="esriMeters",C="esriFeet";x={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};x={titleText:u.titleText,authorText:u.authorText,copyrightText:u.copyrightText,customTextElements:u.customTextElements,scaleBarOptions:{metricUnit:K,metricLabel:x[K],nonMetricUnit:C,nonMetricLabel:x[C]},legendOptions:{operationalLayers:v}}}K=this._getPrintDefinition(c.map,
q);c.outSpatialReference&&(K.mapOptions.spatialReference=c.outSpatialReference.toJson());c.template&&g.isDefined(c.template.showAttribution)&&(K.mapOptions.showAttribution=c.template.showAttribution);t.mixin(K,{exportOptions:w,layoutOptions:x});this.allLayerslegend&&t.mixin(K.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(K.operationalLayers){w=K.operationalLayers;var l,e=function(e){return g.fixJson(t.mixin(e,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))};
for(x=0;x<w.length;x++)if(w[x].featureCollection&&w[x].featureCollection.layers)for(C=0;C<w[x].featureCollection.layers.length;C++){var h=w[x].featureCollection.layers[C];h.layerDefinition&&(h.layerDefinition.drawingInfo&&h.layerDefinition.drawingInfo.renderer&&h.layerDefinition.drawingInfo.renderer.symbol)&&(l=h.layerDefinition.drawingInfo.renderer,"esriCLS"===l.symbol.type?l.symbol=e(l.symbol):l.symbol.outline&&"esriCLS"===l.symbol.outline.type&&(l.symbol.outline=e(l.symbol.outline)));if(h.featureSet&&
h.featureSet.features)for(u=0;u<h.featureSet.features.length;u++)l=h.featureSet.features[u],l.symbol&&("esriCLS"===l.symbol.type?l.symbol=e(l.symbol):l.symbol.outline&&"esriCLS"===l.symbol.outline.type&&(l.symbol.outline=e(l.symbol.outline)))}}q={Web_Map_as_JSON:s.toJson(g.fixJson(K)),Format:q.format,Layout_Template:q.layout};c.extraParameters&&(q=t.mixin(q,c.extraParameters));var n=new r(a._dfdCanceller);c=function(e,a){k(e,a,d,f,n)};K=function(e){m(e,f,n)};n._pendingDfd=this.async?this.printGp.submitJob(q,
c,null,K):this.printGp.execute(q,c,K);return n},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",
geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},_convertSvgSymbol:function(a){if(!(8>=m("ie")||!a.path&&"image/svg+xml"!==a.contentType)){var b,c=I.createSurface(H.create("div"),1024,1024);b="image/svg+xml"===a.contentType?
c.createObject(I.Image,{src:"data:image/svg+xml;base64,"+a.imageData,width:G.pt2px(a.width),height:G.pt2px(a.height),x:0,y:0}):c.createObject(I.Path,a.path).setFill(a.color).setStroke(a.outline);"pendingRender"in c&&c._render(!0);var d=c.rawNode.getContext("2d"),f=Math.ceil(b.getBoundingBox().width),g=Math.ceil(b.getBoundingBox().height);b=d.getImageData(b.getBoundingBox().x,b.getBoundingBox().y,f,g);d.canvas.width=f;d.canvas.height=g;d.putImageData(b,0,0);d=d.canvas.toDataURL("image/png");a={type:"esriPMS",
imageData:d.substr(22,d.length),angle:a.angle,contentType:"image/png",height:a.size?a.size:G.px2pt(g),width:a.size?a.size*(f/g):G.px2pt(f),xoffset:a.xoffset,yoffset:a.yoffset};c.destroy();return a}},_convertSvgRenderer:function(a){if("simple"===a.type&&a.symbol&&(a.symbol.path||"image/svg+xml"===a.symbol.contentType))a.symbol=this._convertSvgSymbol(a.symbol);else if("uniqueValue"===a.type){if(a.defaultSymbol&&(a.defaultSymbol.path||"image/svg+xml"===a.defaultSymbol.contentType))a.defaultSymbol=this._convertSvgSymbol(a.defaultSymbol);
a.uniqueValueInfos&&b.forEach(a.uniqueValueInfos,function(a){if(a.symbol.path||"image/svg+xml"===a.symbol.contentType)a.symbol=this._convertSvgSymbol(a.symbol)},this)}else if("classBreaks"===a.type){if(a.defaultSymbol&&(a.defaultSymbol.path||"image/svg+xml"===a.defaultSymbol.contentType))a.defaultSymbol=this._convertSvgSymbol(a.defaultSymbol);a.classBreakInfos&&b.forEach(a.classBreakInfos,function(a){if(a.symbol.path||"image/svg+xml"===a.symbol.contentType)a.symbol=this._convertSvgSymbol(a.symbol)},
this)}},_createFeatureCollection:function(a,c,d){var f=this._createPolygonLayer(),g=this._createPolylineLayer(),k=this._createPointLayer(),m=this._createMultipointLayer(),r=this._createPointLayer();r.layerDefinition.name="textLayer";delete r.layerDefinition.drawingInfo;if("esri.layers.FeatureLayer"===a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass)f.layerDefinition.name=g.layerDefinition.name=k.layerDefinition.name=m.layerDefinition.name=t.getObject("arcgisProps.title",!1,a)||a.name||
a.id;if(a.renderer&&!t.isFunction(a.renderer.attributeField)){var s=a.renderer.toJson();if("temporal"===s.type){var s={latestObservationRenderer:s.latestObservationRenderer,trackLinesRenderer:s.trackRenderer,observationAger:s.observationAger,renderer:s.observationRenderer},v={};a._trackIdField&&(v.trackIdField=a._trackIdField);a._startTimeField&&(v.startTimeField=a._startTimeField);a._endTimeField&&(v.endTimeField=a._endTimeField);f.layerDefinition.drawingInfo=s;f.layerDefinition.timeInfo=v;g.layerDefinition.drawingInfo=
s;g.layerDefinition.timeInfo=v;k.layerDefinition.drawingInfo=s;k.layerDefinition.timeInfo=v;m.layerDefinition.drawingInfo=s;m.layerDefinition.timeInfo=v}else f.layerDefinition.drawingInfo.renderer=s,g.layerDefinition.drawingInfo.renderer=s,k.layerDefinition.drawingInfo.renderer=s,m.layerDefinition.drawingInfo.renderer=s}else delete f.layerDefinition.drawingInfo,delete g.layerDefinition.drawingInfo,delete k.layerDefinition.drawingInfo,delete m.layerDefinition.drawingInfo;s=a.fields;!s&&(a.renderer&&
!t.isFunction(a.renderer.attributeField))&&("esri.renderer.ClassBreaksRenderer"===a.renderer.declaredClass?(s=[{name:a.renderer.attributeField,type:"esriFieldTypeDouble"}],a.renderer.normalizationField&&s.push({name:a.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===a.renderer.declaredClass&&(s=[{name:a.renderer.attributeField,type:"esriFieldTypeString"}],a.renderer.attributeField2&&s.push({name:a.renderer.attributeField2,type:"esriFieldTypeString"}),
a.renderer.attributeField3&&s.push({name:a.renderer.attributeField3,type:"esriFieldTypeString"})));s&&(f.layerDefinition.fields=s,g.layerDefinition.fields=s,k.layerDefinition.fields=s,m.layerDefinition.fields=s);var s=a.graphics.length,q;for(q=0;q<s;q++){var C=a.graphics[q];if(!1!==C.visible&&C.geometry){v=C.toJson();v.symbol&&(v.symbol.outline&&v.symbol.outline.color&&v.symbol.outline.color[3])&&(v.symbol.outline.color[3]=255);if(a.renderer&&!v.symbol&&(t.isFunction(a.renderer.attributeField)||this._isFeatureCollectionRequired(a.renderer)||
"esri.renderer.DotDensityRenderer"===a.renderer.declaredClass||d)){d=d||a.renderer;var l=d.getSymbol(C);if(!l)continue;v.symbol=l.toJson();this._isFeatureCollectionRequired(d)&&this._applyVisualVariables(v.symbol,{renderer:d,graphic:C,symbol:l,mapResolution:c&&c.getResolutionInMeters(),mapScale:c&&c.getScale()})}v.symbol&&(v.symbol.path||"image/svg+xml"===v.symbol.contentType?v.symbol=this._convertSvgSymbol(v.symbol):v.symbol.text&&delete v.attributes);switch(C.geometry.type){case "polygon":f.featureSet.features.push(v);
break;case "polyline":g.featureSet.features.push(v);break;case "point":v.symbol&&v.symbol.text?r.featureSet.features.push(v):k.featureSet.features.push(v);break;case "multipoint":m.featureSet.features.push(v);break;case "extent":v.geometry=B.fromExtent(C.geometry).toJson(),f.featureSet.features.push(v)}}}c=[];0<f.featureSet.features.length&&c.push(f);0<g.featureSet.features.length&&c.push(g);0<m.featureSet.features.length&&c.push(m);0<k.featureSet.features.length&&c.push(k);0<r.featureSet.features.length&&
c.push(r);b.forEach(c,function(e){e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&b.every(e.featureSet.features,function(e){return e.symbol})&&delete e.layerDefinition.drawingInfo});b.forEach(c,function(e){e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(e.layerDefinition.drawingInfo.renderer)},this);return{id:a.id,opacity:a.opacity,minScale:a.minScale||0,maxScale:a.maxScale||0,featureCollection:{layers:c}}},_getPrintDefinition:function(a,
b){var c={operationalLayers:this._createOperationalLayers(a,b)},d=a.extent,f=a.spatialReference;a.spatialReference._isWrappable()&&(d=d._normalize(!0),f=d.spatialReference);d={mapOptions:{showAttribution:a.showAttribution,extent:d.toJson(),spatialReference:f.toJson()}};b.preserveScale&&t.mixin(d.mapOptions,{scale:b.outScale||y.getScale(a)});a.timeExtent&&t.mixin(d.mapOptions,{time:[a.timeExtent.startTime.getTime(),a.timeExtent.endTime.getTime()]});f={};t.mixin(f,d,c);return f},_createOperationalLayers:function(a,
c){var g,k,m,r,q=[];this.allLayerslegend=this.legendAll?[]:null;var u=b.map(a.layerIds,a.getLayer,a);a._mapImageLyr&&u.push(a._mapImageLyr);for(g=0;g<u.length;g++)if(k=u[g],k.loaded&&k.visible)switch(m=k.declaredClass,r={id:k.id,title:t.getObject("arcgisProps.title",!1,k)||k.id,opacity:k.opacity,minScale:k.minScale||0,maxScale:k.maxScale||0},r=t.mixin(r,this._getUrlAndToken(k)),k.getNode()&&A.get(k.getNode(),"data-reference")&&(r._isRefLayer=!0),m){case "esri.layers.ArcGISDynamicMapServiceLayer":var w=
[];m=!!k._params.layers;if(k._params.dynamicLayers)m=s.fromJson(k._params.dynamicLayers),b.forEach(m,function(a){w.push({id:a.id,name:a.name,layerDefinition:a});delete a.id;delete a.name;delete a.maxScale;delete a.minScale}),0===w.length&&(r.visibleLayers=[-1]);else if(k.supportsDynamicLayers){if(m||k.layerDefinitions||k.layerTimeOptions){var v=k.createDynamicLayerInfosFromLayerInfos(),K=null;m&&(K=k.visibleLayers);var K=f._getVisibleLayers(v,K),C=f._getLayersForScale(c.outScale||a.getScale(),v);
b.forEach(v,function(a){if(!a.subLayerIds){var e=a.id;-1<b.indexOf(K,e)&&-1<b.indexOf(C,e)&&(a={source:a.source.toJson()},k.layerDefinitions&&k.layerDefinitions[e]&&(a.definitionExpression=k.layerDefinitions[e]),k.layerTimeOptions&&k.layerTimeOptions[e]&&(a.layerTimeOptions=k.layerTimeOptions[e].toJson()),w.push({id:e,layerDefinition:a}))}});0===w.length&&(r.visibleLayers=[-1])}}else b.forEach(k.layerInfos,function(a){var e={id:a.id,layerDefinition:{}};k.layerDefinitions&&k.layerDefinitions[a.id]&&
(e.layerDefinition.definitionExpression=k.layerDefinitions[a.id]);k.layerTimeOptions&&k.layerTimeOptions[a.id]&&(e.layerDefinition.layerTimeOptions=k.layerTimeOptions[a.id].toJson());(e.layerDefinition.definitionExpression||e.layerDefinition.layerTimeOptions)&&w.push(e)}),m&&(r.visibleLayers=k.visibleLayers);w.length&&(r.layers=w);q.push(r);this.allLayerslegend&&this.allLayerslegend.push({id:k.id,subLayerIds:k.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":r=t.mixin(r,{url:k.url,
bandIds:k.bandIds,compressionQuality:k.compressionQuality,format:k.format,interpolation:k.interpolation});k.mosaicRule&&t.mixin(r,{mosaicRule:k.mosaicRule.toJson()});k.renderingRule&&t.mixin(r,{renderingRule:k.renderingRule.toJson()});q.push(r);this.allLayerslegend&&this.allLayerslegend.push({id:k.id});break;case "esri.layers.WMSLayer":r=t.mixin(r,{url:k.url,title:k.title,type:"wms",version:k.version,transparentBackground:k.imageTransparency,visibleLayers:k.visibleLayers});q.push(r);this.allLayerslegend&&
this.allLayerslegend.push({id:k.id,subLayerIds:k.visibleLayers});break;case "esri.virtualearth.VETiledLayer":m=k.mapStyle;"aerialWithLabels"===m&&(m="Hybrid");r=t.mixin(r,{visibility:k.visible,type:"BingMaps"+m,culture:k.culture,key:k.bingMapsKey});q.push(r);break;case "esri.layers.OpenStreetMapLayer":r=t.mixin(r,{credits:k.copyright,type:"OpenStreetMap",url:d.getAbsoluteUrl(k.tileServers[0])});q.push(r);break;case "esri.layers.WMTSLayer":r=t.mixin(r,{url:k.url,type:"wmts",layer:k._identifier,style:k._style,
format:k.format,tileMatrixSet:k._tileMatrixSetId});q.push(r);break;case "esri.layers.MapImageLayer":m=k.getImages();b.forEach(m,function(a,e){a.href&&(r={id:k.id+"_image"+e,type:"image",title:k.id,minScale:k.minScale||0,maxScale:k.maxScale||0,opacity:k.opacity*a.opacity,extent:a.extent.toJson()},"data:image/png;base64,"===a.href.substr(0,22)?r.imageData=a.href.substr(22):r.url=a.href,q.push(r))});break;case "esri.layers.VectorTileLayer":m=/^https?:\/\/basemaps(dev)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;
!r._isRefLayer&&(k.currentStyleInfo&&m.test(k.currentStyleInfo.serviceUrl))&&(r.url="http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer",q.push(r));break;case "esri.layers.WebTiledLayer":m=k.url.replace(/\$\{/g,"{");r=t.mixin(r,{type:"WebTiledLayer",urlTemplate:m,credits:k.copyright});k.subDomains&&0<k.subDomains.length&&(r.subDomains=k.subDomains);k._wmtsInfo&&(r.wmtsInfo=k._wmtsInfo);delete r.url;q.push(r);break;default:if(k.getTileUrl||k.getImageUrl)r=t.mixin(r,{url:k.url}),
q.push(r)}for(g=0;g<a.graphicsLayerIds.length;g++)if(k=a.getLayer(a.graphicsLayerIds[g]),k.loaded&&k.visible)switch(m=k.declaredClass,m){case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.CSVLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===m&&!c.showLabels||k.renderer&&"esri.renderer.HeatmapRenderer"===k.renderer.declaredClass)continue;u=null;k.url&&k.renderer&&("esri.renderer.ScaleDependentRenderer"===k.renderer.declaredClass?"scale"===k.renderer.rangeType?
u=k.renderer.getRendererInfoByScale(a.getScale())&&k.renderer.getRendererInfoByScale(a.getScale()).renderer:"zoom"===k.renderer.rangeType&&(u=k.renderer.getRendererInfoByZoom(a.getZoom())&&k.renderer.getRendererInfoByZoom(a.getZoom()).renderer):u=k.renderer);if(u&&("esri.renderer.SimpleRenderer"===u.declaredClass||"esri.renderer.TemporalRenderer"===u.declaredClass||t.isString(u.attributeField)&&k._getField(u.attributeField,!0))&&!this._isFeatureCollectionRequired(u)&&"esri.renderer.DotDensityRenderer"!==
u.declaredClass&&"esri.layers.CSVLayer"!==k.declaredClass&&"esri.layers.StreamLayer"!==k.declaredClass)if(r={id:k.id,title:t.getObject("arcgisProps.title",!1,k)||k.id,opacity:k.opacity,minScale:k.minScale||0,maxScale:k.maxScale||0,layerDefinition:{drawingInfo:{renderer:u.toJson()}}},r=t.mixin(r,this._getUrlAndToken(k)),"esri.renderer.TemporalRenderer"===u.declaredClass&&(m=r.layerDefinition.drawingInfo,m.latestObservationRenderer=m.renderer.latestObservationRenderer,m.trackLinesRenderer=m.renderer.trackRenderer,
m.observationAger=m.renderer.observationAger,m.renderer=m.renderer.observationRenderer,k._trackIdField&&(r.layerDefinition.timeInfo={trackIdField:k._trackIdField})),this._convertSvgRenderer(r.layerDefinition.drawingInfo.renderer),1>k.opacity||"esri.renderer.TemporalRenderer"===u.declaredClass||this._updateLayerOpacity(r))if(k._params.source&&(u=k._params.source.toJson(),t.mixin(r.layerDefinition,{source:u})),k.getDefinitionExpression()&&t.mixin(r.layerDefinition,{definitionExpression:k.getDefinitionExpression()}),
2!==k.mode)0<k.getSelectedFeatures().length&&(u=b.map(k.getSelectedFeatures(),function(a){return a.attributes[k.objectIdField]}),0<u.length&&k.getSelectionSymbol()&&t.mixin(r,{selectionObjectIds:u,selectionSymbol:k.getSelectionSymbol().toJson()}));else{u=b.map(k.getSelectedFeatures(),function(a){return a.attributes[k.objectIdField]});if(0===u.length||!k._params.drawMode)break;t.mixin(r.layerDefinition,{objectIds:u});u=null;k.getSelectionSymbol()&&(u=new x(k.getSelectionSymbol()));t.mixin(r.layerDefinition.drawingInfo,
{renderer:u&&u.toJson()})}else r=this._createFeatureCollection(k,a);else r=u&&(this._isFeatureCollectionRequired(u)||"esri.renderer.DotDensityRenderer"===u.declaredClass)?this._createFeatureCollection(k,a,u):this._createFeatureCollection(k,a);q.push(r);this.allLayerslegend&&this.allLayerslegend.push({id:k.id});break;case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":r=this._createFeatureCollection(k,a),q.push(r),this.allLayerslegend&&this.allLayerslegend.push({id:k.id})}a.graphics&&0<a.graphics.graphics.length&&
(r=this._createFeatureCollection(a.graphics,a),q.push(r));a._labels&&c.showLabels&&(r=this._createFeatureCollection(a._labels,a),q.push(r));b.forEach(q,function(a,e,b){a._isRefLayer&&(delete a._isRefLayer,b.splice(e,1),b.push(a))});return q},_getUrlAndToken:function(a){return{token:a._getToken(),url:a._url?a._url.path:null}},_updateLayerOpacity:function(a){var c=this._colorEvaluator(a),c=b.filter(c,function(a){return t.isArray(a)&&4===a.length}),d=!0;if(c.length){var f=c[0][3],g;for(g=1;g<c.length;g++)if(f!==
c[g][3]){d=!1;break}if(d){a.opacity=f/255;for(g=0;g<c.length;g++)c[g][3]=255}}return d},_isFeatureCollectionRequired:function(a){return a.hasVisualVariables("sizeInfo")||a.hasVisualVariables("colorInfo")||a.hasVisualVariables("opacityInfo")},_getVariable:function(a,b,c){var d;a&&(d=(a=a.getVisualVariablesForType(b,c))&&a[0]);return d},_applyVisualVariables:function(a,b){var d=b.renderer,f=b.graphic,g=b.symbol,k=b.mapResolution,m=b.mapScale,r=g.type;if(!("textsymbol"===r||"shieldlabelsymbol"===r)){var s=
this._getVariable(d,"sizeInfo",!1),v=this._getVariable(d,"colorInfo",!1),q=this._getVariable(d,"opacityInfo",!1);g instanceof w&&(s=this._getVariable(d,"sizeInfo","outline")||s);s&&(g=d.getSize(f,{sizeInfo:s,shape:"simplemarkersymbol"===r?g.style:null,resolution:k,scale:m}),null!=g&&("simplemarkersymbol"===r?a.size=G.px2pt(g):"picturemarkersymbol"===r?(a.width=G.px2pt(g),a.height=G.px2pt(g)):"simplelinesymbol"===r?a.width=G.px2pt(g):a.outline&&(a.outline.width=G.px2pt(g))));if(v&&(v=d.getColor(f,
{colorInfo:v}))&&("simplemarkersymbol"===r||"simplelinesymbol"===r||"simplefillsymbol"===r))a.color=c.toJsonColor(v);q&&(d=d.getOpacity(f,{opacityInfo:q}),null!=d&&a.color&&(a.color[3]=Math.round(255*d)))}}});m("extend-esri")&&t.setObject("tasks.PrintTask",q,k);return q})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I){q=q(d,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(a){this._jobUpdateHandler=t.hitch(this,this._jobUpdateHandler);this._getJobStatus=t.hitch(this,this._getJobStatus);this._getResultDataHandler=
t.hitch(this,this._getResultDataHandler);this._getResultImageHandler=t.hitch(this,this._getResultImageHandler);this._executeHandler=t.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(a){this.updateDelay=a},setProcessSpatialReference:function(a){this.processSpatialReference=a},setOutputSpatialReference:function(a){this._setOutSR(a)},setOutSpatialReference:function(a){this._setOutSR(a)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(a){this.outSpatialReference=this.outputSpatialReference=a},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(a,c,d){for(var f in a){var g=a[f];t.isArray(g)?a[f]=r.toJson(b.map(g,function(a){return this._gpEncode({item:a},!0).item},this)):g instanceof Date&&(a[f]=g.getTime())}return this._encode(a,c,d)},_decode:function(a){var c=a.dataType,
d=new A(a);if(-1!==b.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],c))return d;if("GPLinearUnit"===c)d.value=new y(d.value);else if("GPFeatureRecordSetLayer"===c||"GPRecordSet"===c)d.value=new u(d.value);else if("GPDataFile"===c)d.value=new w(d.value);else if("GPDate"===c)a=d.value,t.isString(a)?d.value=new D({date:a}):d.value=new Date(a);else if("GPRasterData"===c||"GPRasterDataLayer"===c)a=a.value.mapImage,d.value=a?new I(a):new E(d.value);else if(-1!==c.indexOf("GPMultiValue:")){var f=c.split(":")[1];
a=d.value;d.value=b.map(a,function(a){return this._decode({paramName:"_name",dataType:f,value:a}).value},this)}else d=null;return d},submitJob:function(a,b,c,d,g){var k=this._getOutSR(),m=g.assembly;a=this._gpEncode(t.mixin({},this._url.query,{f:"json","env:outSR":k?k.wkid||r.toJson(k.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||r.toJson(this.processSpatialReference.toJson()):null},a),null,m&&m[0]);var s=this._jobUpdateHandler,q=this._errorHandler;
return f({url:this._url.path+"/submitJob",content:a,callbackParamName:"callback",load:function(a,v){s(a,v,!1,b,c,g.dfd)},error:function(a){q(a,d,g.dfd)}})},_jobUpdateHandler:function(a,b,c,d,f,g){var k=a.jobId;b=new B(a);this._successHandler([b],"onStatusUpdate",f,c&&g);if(!c)switch(clearTimeout(this._updateTimers[k]),this._updateTimers[k]=null,g&&g.progress(b),a.jobStatus){case B.STATUS_SUBMITTED:case B.STATUS_EXECUTING:case B.STATUS_WAITING:case B.STATUS_NEW:var m=this._getJobStatus;this._updateTimers[k]=
setTimeout(function(){m(k,c,d,f,g)},this.updateDelay);break;default:this._successHandler([b],"onJobComplete",d,g)}},_getJobStatus:function(a,b,c,d,g){var k=this._jobUpdateHandler;f({url:this._url.path+"/jobs/"+a,content:t.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,f){k(a,f,b,c,d,g)},error:this._errorHandler})},_getResultDataHandler:function(a,b,c,d,f){try{var g=this._decode(a);this._successHandler([g],"onGetResultDataComplete",c,f)}catch(k){this._errorHandler(k,
d,f)}},getResultData:function(b,c,d,g){var k=this._getResultDataHandler,m=this._errorHandler,r=new s(a._dfdCanceller);r._pendingDfd=f({url:this._url.path+"/jobs/"+b+"/results/"+c,content:t.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(a,b){k(a,b,d,g,r)},error:function(a){m(a,g,r)}});return r},checkJobStatus:function(b,c,d){var g=this._jobUpdateHandler,k=this._errorHandler,m=new s(a._dfdCanceller);m._pendingDfd=f({url:this._url.path+"/jobs/"+b,content:t.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(a,b){g(a,b,!0,null,c,m)},error:function(a){k(a,d,m)}});return m},cancelJob:function(b,c,d){var g=this._errorHandler,k=new s(a._dfdCanceller);k._pendingDfd=f({url:this._url.path+"/jobs/"+b+"/cancel",content:t.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:t.hitch(this,function(a,b){this._successHandler([a],"onJobCancel",c,k)}),error:function(a){g(a,d,k)}});return k},execute:function(a,b,c,d){var g=this._getOutSR(),
k=d.assembly;a=this._gpEncode(t.mixin({},this._url.query,{f:"json","env:outSR":g?g.wkid||r.toJson(g.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||r.toJson(this.processSpatialReference.toJson()):null},a),null,k&&k[0]);var m=this._executeHandler,s=this._errorHandler;return f({url:this._url.path+"/execute",content:a,callbackParamName:"callback",load:function(a,f){m(a,f,b,c,d.dfd)},error:function(a){s(a,c,d.dfd)}})},_executeHandler:function(a,b,c,d,f){try{var g=
a.results,k,m,r=a.messages;k=0;for(m=g.length;k<m;k++)g[k]=this._decode(g[k]);k=0;for(m=r.length;k<m;k++)r[k]=new x(r[k]);this._successHandler([g,r],"onExecuteComplete",c,f)}catch(s){this._errorHandler(s,d,f)}},_getResultImageHandler:function(a,b,c,d,f){try{var g=this._decode(a);this._successHandler([g],"onGetResultImageComplete",c,f)}catch(k){this._errorHandler(k,d,f)}},getResultImage:function(b,c,d,g,k){var m=this._getResultImageHandler,r=this._errorHandler;d=this._gpEncode(t.mixin({},this._url.query,
{f:"json"},d.toJson()));var q=new s(a._dfdCanceller);q._pendingDfd=f({url:this._url.path+"/jobs/"+b+"/results/"+c,content:d,callbackParamName:"callback",load:function(a,b){m(a,b,g,k,q)},error:function(a){r(a,k,q)}});return q},cancelJobStatusUpdates:function(a){clearTimeout(this._updateTimers[a]);this._updateTimers[a]=null},getResultImageLayer:function(a,b,c,d){if(null==b){var f=this._url.path.indexOf("/GPServer/");a=this._url.path.substring(0,f)+"/MapServer/jobs/"+a}else a=this._url.path+"/jobs/"+
a+"/results/"+b;this._url.query&&(a+="?"+k.objectToQuery(this._url.query));b=null==b?new G(a,{imageParameters:c}):new H(a,{imageParameters:c},!0);this.onGetResultImageLayerComplete(b);d&&d(b);return b},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});c._createWrappers(q);m("extend-esri")&&t.setObject("tasks.Geoprocessor",
q,g);return q})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(b){this.messages=[];t.mixin(this,b);b=this.messages;var k,g=b.length;for(k=0;k<g;k++)b[k]=new r(b[k])},jobId:"",jobStatus:""});t.mixin(q,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",
STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});b("extend-esri")&&t.setObject("tasks.JobInfo",q,s);return q})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(b){t.mixin(this,b)}});t.mixin(q,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",
TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});b("extend-esri")&&t.setObject("tasks.GPMessage",q,s);return q})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,
b,s){q=q(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(b){b&&t.mixin(this,b)},distance:0,units:null,toJson:function(){var b={};this.distance&&(b.distance=this.distance);this.units&&(b.units=this.units);return b}});b("extend-esri")&&t.setObject("tasks.LinearUnit",q,s);return q})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.tasks.DataFile",constructor:function(b){b&&t.mixin(this,
b)},url:null,itemID:null,toJson:function(){var b={};this.url&&(b.url=this.url);this.itemID&&(b.itemID=this.itemID);return b}});b("extend-esri")&&t.setObject("tasks.DataFile",q,s);return q})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.tasks.RasterData",constructor:function(b){b&&t.mixin(this,b)},url:null,format:null,itemID:null,toJson:function(){var b={};this.url&&(b.url=this.url);this.format&&
(b.format=this.format);this.itemID&&(b.itemID=this.itemID);return b}});b("extend-esri")&&t.setObject("tasks.RasterData",q,s);return q})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.tasks.Date",constructor:function(m){m&&(m.format&&(this.format=m.format),this.date=b.parse(m.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",
toJson:function(){return{date:b.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});s("extend-esri")&&t.setObject("tasks.Date",q,r);return q})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(b){t.mixin(this,b)}});b("extend-esri")&&t.setObject("tasks.ParameterValue",q,s);return q})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),
function(q,t,b,s,r,m,k){q=q(k,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(b,f){f&&(f.imageParameters&&f.imageParameters.extent)&&(this.initialExtent=this.fullExtent=f.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=t.hitch(this,this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(g,f,a,c){var d=g.spatialReference.wkid;c(this._url.path+"?"+r.objectToQuery(t.mixin(this._params,{f:"image",bbox:b.toJson(g.toJson()),
bboxSR:d,imageSR:d,size:f+","+a})))}});s("extend-esri")&&t.setObject("tasks._GPResultImageLayer",q,m);return q})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),function(q,
t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D){q=q([u,B],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(a,b,c){a=b&&b.imageParameters;var d=t.hitch;if(a){var f=a.layerDefinitions;f&&this.setLayerDefinitions(f);a.layerOption===w.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(a.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=d(this,this._setIsPNG32);this.dpi=a&&a.dpi||96;this.imageFormat=a&&a.format||
"png8";this.imageTransparency=a&&!1===a.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=b&&b.gdbVersion;this._params.gdbVersion=this.gdbVersion;t.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},a?a.toJson():{});this.getImageUrl=d(this,this.getImageUrl);this._initLayer=d(this,this._initLayer);this._load=d(this,this._load);this.useMapImage=b?b.useMapImage:!1;this._loadCallback=b&&b.loadCallback;(b=b&&b.resourceInfo)?this._initLayer(b):
(void 0===c||!1===c)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(a,b){this.inherited(arguments);a.timeInfo&&(this.timeInfo=new x(a.timeInfo));this.loaded=!0;this.onLoad(this);var c=this._loadCallback;c&&(delete this._loadCallback,c(this))},getImageUrl:function(b,c,d,k){var r=this._url.path+"/export?",q=this._params,u=b.spatialReference.wkid||s.toJson(b.spatialReference.toJson()),w=this._errorHandler;delete q._ts;t.mixin(q,{bbox:b.xmin+
","+b.ymin+","+b.xmax+","+b.ymax,bboxSR:u,imageSR:u,size:c+","+d},this.disableClientCaching?{_ts:(new Date).getTime()}:{});q.layerDefs&&(b=q.layerDefs,delete q.layerDefs,t.mixin(q,{layerDefs:b}));var x=q.token=this._getToken();b=a.addProxy(r+m.objectToQuery(t.mixin({},q,{f:"image"})));b.length>g.defaults.io.postLength||this.useMapImage?this._jsonRequest=f({url:r,content:t.mixin(q,{f:"json"}),callbackParamName:"callback",load:function(b){b=b.href;x&&(b+=-1===b.indexOf("?")?"?token\x3d"+x:"\x26token\x3d"+
x);k(a.addProxy(b))},error:w}):k(b)},_setIsPNG32:function(){var a=this.imageFormat.toLowerCase(),b=r("ie");this.isPNG32=b&&6===b&&("png32"===a||"png24"===a)&&this.imageTransparency},_setTime:function(a){var d=this.timeInfo;a=this._params.time=a?a.toJson().join(","):null;if(10.02>this.version&&d)if(a)this._params.layerTimeOptions=c._serializeTimeOptions(this.layerTimeOptions);else{var f=this.layerInfos;if(f){var g=this.layerTimeOptions,k=g?g.slice(0):[],m=[];b.forEach(f,function(a){a.subLayerIds||
m.push(a.id)});m.length&&(b.forEach(m,function(a){if(!k[a]){var b=new y;b.useTime=!1;k[a]=b}}),this._params.layerTimeOptions=c._serializeTimeOptions(k,m))}}10.02<=this.version&&d&&(!a&&!d.hasLiveData)&&(this._params.time="null,null")},setDPI:function(a,b){this.dpi=this._params.dpi=a;b||this.refresh(!0)},setImageFormat:function(a,b){this.imageFormat=this._params.format=a;this._setIsPNG32();b||this.refresh(!0)},setImageTransparency:function(a,b){this.imageTransparency=this._params.transparent=a;this._setIsPNG32();
b||this.refresh(!0)},setVisibleLayers:function(a,b){this.visibleLayers=a;this._params.layers=w.LAYER_OPTION_SHOW+":"+(a.length?a.join():"-1");this._updateDynamicLayers();b||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(a){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();a||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(a,
b){this.layerDefinitions=a;this._params.layerDefs=c._serializeLayerDefinitions(a);this._updateDynamicLayers();b||this.refresh(!0)},setDefaultLayerDefinitions:function(a){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setLayerTimeOptions:function(a,b){this.layerTimeOptions=a;this._params.layerTimeOptions=c._serializeTimeOptions(a);this._updateDynamicLayers();b||this.refresh(!0)},refresh:function(a){if(a)this.inherited(arguments);
else{var b=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=b}},setLayerDrawingOptions:function(a,b){this.layerDrawingOptions=a;this._updateDynamicLayers();b||this.refresh(!0)},setDynamicLayerInfos:function(a,b){a&&0<a.length?(this.dynamicLayerInfos=a,this.visibleLayers=c._getDefaultVisibleLayers(a),this.onVisibleLayersChange(this.visibleLayers)):this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();b||this.refresh(!0)},
createDynamicLayerInfosFromLayerInfos:function(){var a=[],c;b.forEach(this.layerInfos,function(b){c=new E(b.toJson());c.source=new D({mapLayerId:b.id});a.push(c)});return a},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){if(!this.dynamicLayerInfos||0===this.dynamicLayerInfos.length)this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();var a;a=
this.dynamicLayerInfos;var f=[],g=this._map&&d.getScale(this._map),k=this.visibleLayers,m=g?c._getLayersForScale(g,a):k;b.forEach(a,function(a){if(!a.subLayerIds){var c,d=a.id;if(-1!==b.indexOf(k,d)&&-1!==b.indexOf(m,d)){c={id:d,name:a.name};c.source=a.source&&a.source.toJson();var g;this.layerDefinitions&&this.layerDefinitions[d]&&(g=this.layerDefinitions[d]);g&&(c.definitionExpression=g);var r;this.layerDrawingOptions&&this.layerDrawingOptions[d]&&(r=this.layerDrawingOptions[d]);r&&(c.drawingInfo=
r.toJson());var s;this.layerTimeOptions&&this.layerTimeOptions[d]&&(s=this.layerTimeOptions[d]);s&&(c.layerTimeOptions=s.toJson());c.minScale=a.minScale||0;c.maxScale=a.maxScale||0;f.push(c)}}},this);a=s.toJson(f);if(!this._params.dynamicLayers||this._params.dynamicLayers.length!==a.length||this._params.dynamicLayers!==a)this._params.dynamicLayers=a,this._onDynamicLayersChange(this._params.dynamicLayers)}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):
this._params.dynamicLayers=null},_onExtentChangeHandler:function(a,b,c){c&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(a,b,c){this._map=a;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(a,b){this.gdbVersion=a;this._params.gdbVersion=a;this.onGDBVersionChange();b||this.refresh(!0)},exportMapImage:function(a,b){var c=g.defaults.map,c=t.mixin({size:c.width+","+c.height},this._params,a?a.toJson(this.normalization):
{},{f:"json"});delete c._ts;if(c.layerDefs){var d=c.layerDefs;delete c.layerDefs;t.mixin(c,{layerDefs:d})}this._exportMapImage(this._url.path+"/export",c,b)}});r("extend-esri")&&t.setObject("layers.ArcGISDynamicMapServiceLayer",q,k);return q})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(q,t,
b,s,r,m,k,g,f,a,c,d,u){var B=g.defaults.map.zoomDuration;q=q(d,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(a,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0;this.extentProcessor=c&&c.extentProcessor;var d=b.hitch;this._exportMapImageHandler=d(this,this._exportMapImageHandler);this._imgSrcFunc=d(this,this._imgSrcFunc);this._divAlphaImageFunc=d(this,this._divAlphaImageFunc);this._tileLoadHandler=d(this,this._tileLoadHandler);
this._tileErrorHandler=d(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(a,b,c){this.inherited(arguments);this._map=a;var d=this._div=s.create("div",null,b),g=k._css.names,m={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible",opacity:this.opacity},q=f("ie"),u=t.connect,B=a.__visibleDelta;8===q&&delete m.opacity;"css-transforms"===a.navigationMode?(this._isChildLayer||(m[g.transform]=k._css.translate(B.x,B.y),r.set(d,m)),
this._left=B.x,this._top=B.y):(m.left="0px",m.top="0px",r.set(d,m),this._left=this._top=0);r.set(d,m);this._onResizeHandler_connect=u(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=u(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!a.loaded)var M=t.connect(a,"onLoad",this,function(){t.disconnect(M);M=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=
t.connect(a,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=t.connect(a,"onZoomEnd",this,this.evaluateSuspension));return d},_unsetMap:function(a,b){this._img&&this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);s.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var c=t.disconnect;c(this._onResizeHandler_connect);c(this._opacityChangeHandler_connect);c(this._panEndEvalHandle);c(this._zoomEndEvalHandle);this._panEndEvalHandle=
this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(a,b,c){r.set(this._div,{width:b+"px",height:c+"px"});this._onExtentChangeHandler(a)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();c.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=
null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var a=this._map;this._toggleTime();"css-transforms"===a.navigationMode&&(a=a.__visibleDelta,this._left=a.x,this._top=a.y,this._isChildLayer||r.set(this._div,k._css.names.transform,k._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(b.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var a=
this.inherited(arguments);if(a){var b=this._map.extent;this.extentProcessor&&b&&(a=!!this.extentProcessor({layer:this,extent:b,width:this._map.width}).extent)}return a},_enableDrawConnectors:function(){var a=t.connect,b=this._map;b&&(this._onPanHandler_connect=a(b,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=a(b,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===b.navigationMode?this._onScaleHandler_connect=a(b,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=
a(b,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var a=t.disconnect;a(this._onPanHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=t.connect(a,"onTimeExtentChange",
this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(t.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(a){this._params&&(this._params.time=a?a.toJson().join(","):null)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._dragOrigin,d=this._map.__visibleDelta,f=this._img;f&&("css-transforms"===this._map.navigationMode?(this._left=d.x+b.x,this._top=d.y+b.y,this._isChildLayer||r.set(this._div,k._css.names.transform,k._css.translate(this._left,
this._top))):r.set(f,{left:c.x+b.x+"px",top:c.y+b.y+"px"}))},_onExtentChangeHandler:function(a,b,c){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var d=this._map,g=this._img,q=g&&g.style,u=this._dragOrigin;if(b&&!c&&g&&(b.x!==this._panDx||b.y!==this._panDy))"css-transforms"===d.navigationMode?(b=d.__visibleDelta,this._left=b.x,this._top=b.y,this._isChildLayer||r.set(this._div,k._css.names.transform,k._css.translate(this._left,this._top))):r.set(g,{left:u.x+b.x+"px",top:u.y+
b.y+"px"});g?(u.x=parseInt(q.left,10),u.y=parseInt(q.top,10)):u.x=u.y=0;"css-transforms"===d.navigationMode&&(c&&g)&&(r.set(g,k._css.names.transition,"none"),g._multiply=g._multiply?m.multiply(g._matrix,g._multiply):g._matrix);this._fireUpdateStart();if(c=this._img_loading)if(this._clearEventListeners(c),s.destroy(c),this._img_loading=null,c=this._jsonRequest){try{c.cancel()}catch(G){}this._jsonRequest=null}var I=d.width;c=d.height;b=I;var M=0;10<=this.version&&d.wrapAround180&&(a=a._normalize(!0));
this.extentProcessor&&(M=this.extentProcessor({layer:this,extent:a,width:b}),a=M.extent,b=M.width,M=M.marginLeft||0);if(this.isPNG32)g=this._img_loading=s.create("div"),g.id=d.id+"_"+this.id+"_"+(new Date).getTime(),r.set(g,{position:"absolute",left:"0px",top:"0px",width:b+"px",height:c+"px"}),d=g.appendChild(s.create("div")),r.set(d,{opacity:0,width:b+"px",height:c+"px"}),this.getImageUrl(a,b,c,this._divAlphaImageFunc);else{var J=this._img_loading=s.create("img"),S=k._css.names,L=f("ie"),Q={position:"absolute",
width:b+"px",height:c+"px"};8===L&&(Q.opacity=this.opacity);null!=M&&0!==M&&(Q.marginLeft=M+"px");"css-transforms"===d.navigationMode?(Q[S.transform]=k._css.translate(-this._left,-this._top),J._tdx=-this._left,J._tdy=-this._top,Q[S.transition]=S.transformName+" "+B+"ms ease",this.extentProcessor&&(Q[S.origin]=I/2-M+"px "+c/2+"px")):(Q.left="0px",Q.top="0px");J.id=d.id+"_"+this.id+"_"+(new Date).getTime();r.set(J,Q);J._onload_connect=t.connect(J,"onload",this,"_onLoadHandler");J._onerror_connect=t.connect(J,
"onerror",this,"_onErrorHandler");J._onabort_connect=t.connect(J,"onabort",this,"_onErrorHandler");this._startRect={left:u.x,top:u.y,width:g?parseInt(q.width,10):b,height:g?parseInt(q.height,10):c,marginLeft:g?parseInt(q.marginLeft||"0",10):M,zoom:q&&q.zoom?parseFloat(q.zoom):1};this.getImageUrl(a,b,c,this._imgSrcFunc)}}},_onTimeExtentChangeHandler:function(a){this.suspended||(this._setTime(a),this.refresh(!0))},getImageUrl:function(a,b,c,d){},_imgSrcFunc:function(a){this._img_loading.src=a},_divAlphaImageFunc:function(a){r.set(this._img_loading,
"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+a+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(a){a=a.currentTarget;var b=this._map;this._clearEventListeners(a);!b||b.__panning||b.__zooming?s.destroy(a):(this._img&&this._div.removeChild(this._img),this._img=a,b=a.style,this._startRect={left:0,top:0,width:parseInt(b.width,10),height:parseInt(b.height,10),marginLeft:parseInt(b.marginLeft||"0",10),zoom:1},this._div.appendChild(a),
this.suspended||c.show(this._div),this._img_loading=null,a=this._dragOrigin,a.x=a.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(a){a=a.currentTarget;r.set(a,"visibility","hidden");this._clearEventListeners(a);a=Error("Unable to load image: "+a.src);this.onError(a);this._fireUpdateEnd(a)},_clearEventListeners:function(a){t.disconnect(a._onload_connect);t.disconnect(a._onerror_connect);t.disconnect(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null},
setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();b||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(a,b){var c={},d=k._css.names,f=this._img;if(f){r.set(f,d.transition,b?"none":d.transformName+" "+B+"ms ease");f._matrix=a;a=f._multiply?m.multiply(a,f._multiply):a;if(f._tdx||f._tdy)a=m.multiply(a,{xx:1,xy:0,yx:0,yy:1,dx:f._tdx,dy:f._tdy});c[d.transform]=k._css.matrix(a);r.set(f,c)}},_onZoomHandler:function(a,b,
c){a=this._startRect;var d=a.width*b,g=a.height*b,k=a.marginLeft*b,m=this._img,q=f("ie");m&&(q&&8>q?r.set(m,{left:a.left-(d-a.width)*(c.x-a.left)/a.width+"px",top:a.top-(g-a.height)*(c.y-a.top)/a.height+"px",zoom:b*a.zoom}):r.set(m,{left:a.left-(d-a.width)*(c.x-a.left)/a.width+"px",top:a.top-(g-a.height)*(c.y-a.top)/a.height+"px",width:d+"px",height:g+"px"}),null!=k&&0!==k&&r.set(m,{marginLeft:k+"px"}))},_exportMapImage:function(b,c,d){var f=this._exportMapImageHandler;c.token=this._getToken();a({url:b,
content:c,callbackParamName:"callback",load:function(a,b){f(a,b,d)},error:g.defaults.io.errorHandler})},_exportMapImageHandler:function(a,b,c){a=new u(a);this.onMapImageExport(a);c&&c(a)},onMapImageExport:function(){},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=8===f("ie")?this._img:this._div;r.set(b,"opacity",a)}});f("extend-esri")&&b.setObject("layers.DynamicMapServiceLayer",q,k);return q})},
"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(q,t,b,s,r,m,k,g){t=t(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(b){this.bbox&&
q.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var a=this.bbox||this.extent,a=a&&b&&a._normalize(!0);b=this.layerOption;var c=a?a.spatialReference.wkid||s.toJson(a.spatialReference.toJson()):null,d=this.imageSpatialReference,a={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:a?a.xmin+","+a.ymin+","+a.xmax+","+a.ymax:null,bboxSR:c,layers:b?b+":"+this.layerIds.join(","):
null,imageSR:d?d.wkid||s.toJson(d.toJson()):c};a.layerDefs=g._serializeLayerDefinitions(this.layerDefinitions);b=this.timeExtent;a.time=b?b.toJson().join(","):null;a.layerTimeOptions=g._serializeTimeOptions(this.layerTimeOptions);return k.filter(a,function(a){if(null!==a)return!0})}});b.mixin(t,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});r("extend-esri")&&b.setObject("layers.ImageParameters",t,m);return t})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),
function(q,t,b,s,r,m,k,g){q=q(m,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(b){b&&(b.source?b="mapLayer"===b.source.type?new k(b.source):new g(b.source):(b=new k,b.mapLayerId=this.id),this.source=b)},toJson:function(){var b=this.inherited(arguments);b.source=this.source&&this.source.toJson();return r.fixJson(b)}});b("extend-esri")&&t.setObject("layers.DynamicLayerInfo",q,s);return q})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),
function(q,t,b,s,r,m){q=q(m,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return r.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});b("extend-esri")&&t.setObject("layers.LayerMapSource",q,s);return q})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(b){b&&t.mixin(this,b)},toJson:function(){}});
b("extend-esri")&&t.setObject("layers.LayerSource",q,s);return q})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),function(q,t,b,s,r,m,k,g,f,a){q=q(m,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(b){if(b&&b.dataSource){switch(b.dataSource.type){case "table":b=new k(b.dataSource);break;case "queryTable":b=
new g(b.dataSource);break;case "joinTable":b=new f(b.dataSource);break;case "raster":b=new a(b.dataSource);break;default:b=b.dataSource}this.dataSource=b}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return r.fixJson(a)}});b("extend-esri")&&t.setObject("layers.LayerDataSource",q,s);return q})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(q,t,b,s,r,
m){q=q(m,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return r.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});b("extend-esri")&&t.setObject("layers.TableDataSource",q,s);return q})},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.layers.DataSource",constructor:function(b){b&&t.mixin(this,b)},toJson:function(){}});
b("extend-esri")&&t.setObject("layers.DataSource",q,s);return q})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(q,t,b,s,r,m,k){q=q(m,{declaredClass:"esri.layers.QueryDataSource",constructor:function(b){b&&(b.oidFields&&t.isString(b.oidFields)&&(this.oidFields=b.oidFields.split(",")),b.spatialReference&&(this.spatialReference=new k(b.spatialReference)))},toJson:function(){var b={type:"queryTable",
workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var f;f="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;b.geometryType=f}return r.fixJson(b)}});
b("extend-esri")&&t.setObject("layers.QueryDataSource",q,s);return q})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(q,t,b,s,r,m,k,g,f,a){var c=q(m,{declaredClass:"esri.layers.JoinDataSource",constructor:function(a){a&&(a.leftTableSource&&(this.leftTableSource=this._createLayerSource(a.leftTableSource)),a.rightTableSource&&(this.rightTableSource=
this._createLayerSource(a.rightTableSource)))},_createLayerSource:function(b){var m;if("mapLayer"===b.type)m=new k(b);else{m={type:"dataLayer"};var q;switch(b.dataSource.type){case "table":q=new g(b.dataSource);break;case "queryTable":q=new f(b.dataSource);break;case "joinTable":q=new c(b.dataSource);break;case "raster":q=new a(b.dataSource);break;default:q=b.dataSource}m.dataSource=q;m.toJson=function(){var a={type:"dataLayer",dataSource:q.toJson()};return r.fixJson(a)}}return m},toJson:function(){var a=
{type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey},b;b="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;a.joinType=b;return r.fixJson(a)}});b("extend-esri")&&t.setObject("layers.JoinDataSource",c,s);return c})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),
function(q,t,b,s,r,m){q=q(m,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return r.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});b("extend-esri")&&t.setObject("layers.RasterDataSource",q,s);return q})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(q,t,b,s,r,m,k,g,
f,a,c,d,u){function B(a,b,c,l,e,h,n,z,F,d){var f,g,k=b.length,m=0;d?(g=d.l/e,m=d.i):g=b[0]/e;for(;h<n;)h+g>n&&(f={l:(h+g-n)*e,i:m},g=n-h),m%2||(a.beginPath(),a.arc(c,l,e,h,h+g,z),F&&a.stroke()),h+=g,++m,g=b[m%k]/e;return f}function x(a,b,c,l){var e=0,h=0,n,z=0;l?(n=l.l,z=l.i):n=b[0];for(;1>h;)h=u.tAtLength(a,n),1==h&&(e=u.computeLength(a),e={l:n-e,i:z}),a=u.splitBezierAtT(a,h),z%2||c.push(a[0]),a=a[1],++z,n=b[z%b.length];return e}function y(a,b,c,l){var e=[b.last.x,b.last.y].concat(c),h=!(a instanceof
Array);c=4===c.length?"quadraticCurveTo":"bezierCurveTo";var n=[];b=x(e,b.canvasDash,n,l);for(l=0;l<n.length;++l)e=n[l],h?(a.moveTo(e[0],e[1]),a[c].apply(a,e.slice(2))):(a.push("moveTo",[e[0],e[1]]),a.push(c,e.slice(2)));return b}function w(a,b,c,l,e,h,n){var z=0,F=0,d=0,f=u.distance(c,l,e,h),g=0;b=b.canvasDash;var k=c,m=l,r,q=!(a instanceof Array);n?(d=n.l,g=n.i):d+=b[0];for(;0.01<Math.abs(1-F);)d>f&&(z={l:d-f,i:g},d=f),F=d/f,n=c+(e-c)*F,r=l+(h-l)*F,g++%2||(q?(a.moveTo(k,m),a.lineTo(n,r)):(a.push("moveTo",
[k,m]),a.push("lineTo",[n,r]))),k=n,m=r,d+=b[g%b.length];return z}var E=q.canvas={},D=null,A=c.multiplyPoint,H=Math.PI,G=2*H,I=H/2;d=t.extend;if(r.global.CanvasRenderingContext2D){r=r.doc.createElement("canvas").getContext("2d");var M="function"==typeof r.setLineDash,J="function"==typeof r.fillText}var S={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,
3,1,3]};E.Shape=s("dojox.gfx.canvas.Shape",g.Shape,{_render:function(a){a.save();this._renderTransform(a);this._renderClip(a);this._renderShape(a);this._renderFill(a,!0);this._renderStroke(a,!0);a.restore()},_renderClip:function(a){this.canvasClip&&(this.canvasClip.render(a),a.clip())},_renderTransform:function(a){if("canvasTransform"in this){var b=this.canvasTransform;a.translate(b.dx,b.dy);a.rotate(b.angle2);a.scale(b.sx,b.sy);a.rotate(b.angle1)}},_renderShape:function(a){},_renderFill:function(a,
b){if("canvasFill"in this){var c=this.fillStyle;if("canvasFillImage"in this){var l=c.width,e=c.height,h=this.canvasFillImage.width,n=this.canvasFillImage.height,z=Math.min(l==h?1:l/h,e==n?1:e/n),F=(l-z*h)/2,d=(e-z*n)/2;D.width=l;D.height=e;var f=D.getContext("2d");f.clearRect(0,0,l,e);f.drawImage(this.canvasFillImage,0,0,h,n,F,d,z*h,z*n);this.canvasFill=a.createPattern(D,"repeat");delete this.canvasFillImage}a.fillStyle=this.canvasFill;b&&("pattern"===c.type&&(0!==c.x||0!==c.y)&&a.translate(c.x,c.y),
a.fill())}else a.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(a,b){var c=this.strokeStyle;c?(a.strokeStyle=c.color.toString(),a.lineWidth=c.width,a.lineCap=c.cap,"number"==typeof c.join?(a.lineJoin="miter",a.miterLimit=c.join):a.lineJoin=c.join,this.canvasDash?M?(a.setLineDash(this.canvasDash),b&&a.stroke()):this._renderDashedStroke(a,b):b&&a.stroke()):b||(a.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(a,b){},getEventSource:function(){return null},on:function(){},connect:function(){},
disconnect:function(){},canvasClip:null,setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;this.canvasClip=a?L(b,a):null;this.parent&&this.parent._makeDirty();return this}});var L=function(a,b){switch(a){case "ellipse":return{canvasEllipse:V({shape:b}),render:function(a){return E.Ellipse.prototype._renderShape.call(this,a)}};case "rect":return{shape:t.delegate(b,{r:0}),render:function(a){return E.Rect.prototype._renderShape.call(this,
a)}};case "path":return{canvasPath:Q(b),render:function(a){this.canvasPath._renderShape(a)}};case "polyline":return{canvasPolyline:b.points,render:function(a){return E.Polyline.prototype._renderShape.call(this,a)}}}return null},Q=function(a){var b=new dojox.gfx.canvas.Path;b.canvasPath=[];b._setPath(a.d);return b},R=function(a,b,c){var l=a.prototype[b];a.prototype[b]=c?function(){this.parent&&this.parent._makeDirty();l.apply(this,arguments);c.call(this);return this}:function(){this.parent&&this.parent._makeDirty();
return l.apply(this,arguments)}};R(E.Shape,"setTransform",function(){this.matrix?this.canvasTransform=q.decompose(this.matrix):delete this.canvasTransform});R(E.Shape,"setFill",function(){var a=this.fillStyle,c;if(a){if("object"==typeof a&&"type"in a){var d=this.surface.rawNode.getContext("2d");switch(a.type){case "linear":case "radial":c="linear"==a.type?d.createLinearGradient(a.x1,a.y1,a.x2,a.y2):d.createRadialGradient(a.cx,a.cy,0,a.cx,a.cy,a.r);b.forEach(a.colors,function(a){c.addColorStop(a.offset,
q.normalizeColor(a.color).toString())});break;case "pattern":D||(D=document.createElement("canvas")),d=new Image,this.surface.downloadImage(d,a.src),this.canvasFillImage=d}}else c=a.toString();this.canvasFill=c}else delete this.canvasFill});R(E.Shape,"setStroke",function(){var a=this.strokeStyle;if(a){var b=this.strokeStyle.style.toLowerCase();b in S&&(b=S[b]);if(b instanceof Array){this.canvasDash=b=b.slice();var c;for(c=0;c<b.length;++c)b[c]*=a.width;if("butt"!=a.cap){for(c=0;c<b.length;c+=2)b[c]-=
a.width,1>b[c]&&(b[c]=1);for(c=1;c<b.length;c+=2)b[c]+=a.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!M&&!!this.canvasDash});R(E.Shape,"setShape");E.Group=s("dojox.gfx.canvas.Group",E.Shape,{constructor:function(){g.Container._init.call(this)},_render:function(a){a.save();this._renderTransform(a);this._renderClip(a);for(var b=0;b<this.children.length;++b)this.children[b]._render(a);a.restore()},destroy:function(){g.Container.clear.call(this,!0);E.Shape.prototype.destroy.apply(this,
arguments)}});E.Rect=s("dojox.gfx.canvas.Rect",[E.Shape,g.Rect],{_renderShape:function(a){var b=this.shape,c=Math.min(b.r,b.height/2,b.width/2),l=b.x,e=l+b.width,h=b.y,b=h+b.height,n=l+c,z=e-c,F=h+c,d=b-c;a.beginPath();a.moveTo(n,h);c?(a.arc(z,F,c,-I,0,!1),a.arc(z,d,c,0,I,!1),a.arc(n,d,c,I,H,!1),a.arc(n,F,c,H,H+I,!1)):(a.lineTo(z,h),a.lineTo(e,d),a.lineTo(n,b),a.lineTo(l,F));a.closePath()},_renderDashedStroke:function(a,b){var c=this.shape,l=Math.min(c.r,c.height/2,c.width/2),e=c.x,h=e+c.width,n=
c.y,z=n+c.height,F=e+l,d=h-l,f=n+l,g=z-l;l?(a.beginPath(),c=w(a,this,F,n,d,n),b&&a.stroke(),c=B(a,this.canvasDash,d,f,l,-I,0,!1,b,c),a.beginPath(),c=w(a,this,h,f,h,g,c),b&&a.stroke(),c=B(a,this.canvasDash,d,g,l,0,I,!1,b,c),a.beginPath(),c=w(a,this,d,z,F,z,c),b&&a.stroke(),c=B(a,this.canvasDash,F,g,l,I,H,!1,b,c),a.beginPath(),c=w(a,this,e,g,e,f,c),b&&a.stroke(),B(a,this.canvasDash,F,f,l,H,H+I,!1,b,c)):(a.beginPath(),c=w(a,this,F,n,d,n),c=w(a,this,d,n,h,g,c),c=w(a,this,h,g,F,z,c),w(a,this,F,z,e,f,c),
b&&a.stroke())}});var X=[];(function(){var b=a.curvePI4;X.push(b.s,b.c1,b.c2,b.e);for(var d=45;360>d;d+=45){var f=c.rotateg(d);X.push(A(f,b.c1),A(f,b.c2),A(f,b.e))}})();var V=function(a){var b,d,l,e=[],h=a.shape,n=c.normalize([c.translate(h.cx,h.cy),c.scale(h.rx,h.ry)]);b=A(n,X[0]);e.push([b.x,b.y]);for(h=1;h<X.length;h+=3)d=A(n,X[h]),l=A(n,X[h+1]),b=A(n,X[h+2]),e.push([d.x,d.y,l.x,l.y,b.x,b.y]);if(a._needsDash){b=[];d=e[0];for(h=1;h<e.length;++h)l=[],x(d.concat(e[h]),a.canvasDash,l),d=[e[h][4],e[h][5]],
b.push(l);a._dashedPoints=b}return e};E.Ellipse=s("dojox.gfx.canvas.Ellipse",[E.Shape,g.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=V(this);return this},setStroke:function(){this.inherited(arguments);M||(this.canvasEllipse=V(this));return this},_renderShape:function(a){var b=this.canvasEllipse,c;a.beginPath();a.moveTo.apply(a,b[0]);for(c=1;c<b.length;++c)a.bezierCurveTo.apply(a,b[c]);a.closePath()},_renderDashedStroke:function(a,b){var c=this._dashedPoints;a.beginPath();
for(var l=0;l<c.length;++l)for(var e=c[l],h=0;h<e.length;++h){var n=e[h];a.moveTo(n[0],n[1]);a.bezierCurveTo(n[2],n[3],n[4],n[5],n[6],n[7])}b&&a.stroke()}});E.Circle=s("dojox.gfx.canvas.Circle",[E.Shape,g.Circle],{_renderShape:function(a){var b=this.shape;a.beginPath();a.arc(b.cx,b.cy,b.r,0,G,1)},_renderDashedStroke:function(a,b){var c=this.shape,l=0,e,h=this.canvasDash.length;for(i=0;l<G;)e=this.canvasDash[i%h]/c.r,i%2||(a.beginPath(),a.arc(c.cx,c.cy,c.r,l,l+e,0),b&&a.stroke()),l+=e,++i}});E.Line=
s("dojox.gfx.canvas.Line",[E.Shape,g.Line],{_renderShape:function(a){var b=this.shape;a.beginPath();a.moveTo(b.x1,b.y1);a.lineTo(b.x2,b.y2)},_renderDashedStroke:function(a,b){var c=this.shape;a.beginPath();w(a,this,c.x1,c.y1,c.x2,c.y2);b&&a.stroke()}});E.Polyline=s("dojox.gfx.canvas.Polyline",[E.Shape,g.Polyline],{setShape:function(){this.inherited(arguments);var a=this.shape.points,b=a[0],c,l;this.bbox=null;this._normalizePoints();if(a.length)if("number"==typeof b)b=a;else{b=[];for(l=0;l<a.length;++l)c=
a[l],b.push(c.x,c.y)}else b=[];this.canvasPolyline=b;return this},_renderShape:function(a){var b=this.canvasPolyline;if(b.length){a.beginPath();a.moveTo(b[0],b[1]);for(var c=2;c<b.length;c+=2)a.lineTo(b[c],b[c+1])}},_renderDashedStroke:function(a,b){var c=this.canvasPolyline,l=0;a.beginPath();for(var e=0;e<c.length;e+=2)l=w(a,this,c[e],c[e+1],c[e+2],c[e+3],l);b&&a.stroke()}});E.Image=s("dojox.gfx.canvas.Image",[E.Shape,g.Image],{setShape:function(){this.inherited(arguments);var a=new Image;this.surface.downloadImage(a,
this.shape.src);this.canvasImage=a;return this},_renderShape:function(a){var b=this.shape;a.drawImage(this.canvasImage,b.x,b.y,b.width,b.height)}});E.Text=s("dojox.gfx.canvas.Text",[E.Shape,g.Text],{_setFont:function(){this.fontStyle?this.canvasFont=q.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var a=this.shape,b=0,c;a.text&&(c=this.surface.rawNode.getContext("2d"),c.save(),this._renderTransform(c),this._renderFill(c,!1),this._renderStroke(c,!1),this.canvasFont&&
(c.font=this.canvasFont),b=c.measureText(a.text).width,c.restore());return b},_render:function(a){a.save();this._renderTransform(a);this._renderFill(a,!1);this._renderStroke(a,!1);this._renderShape(a);a.restore()},_renderShape:function(a){var b,c=this.shape;c.text&&(b="middle"===c.align?"center":c.align,a.textAlign=b,this.canvasFont&&(a.font=this.canvasFont),this.canvasFill&&a.fillText(c.text,c.x,c.y),this.strokeStyle&&(a.beginPath(),a.strokeText(c.text,c.x,c.y),a.closePath()))}});R(E.Text,"setFont");
J||E.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var O={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};E.Path=s("dojox.gfx.canvas.Path",[E.Shape,f.Path],{constructor:function(){this.lastControl=
{}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);M||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(a){var b=t.clone(this.last);this[O[a.action]](this.canvasPath,a.action,a.args,this._needsDash?this._dashedPath:null);this.last=b;this.inherited(arguments)},_renderShape:function(a){var b=this.canvasPath;
a.beginPath();for(var c=0;c<b.length;c+=2)a[b[c]].apply(a,b[c+1])},_renderDashedStroke:M?function(){}:function(a,b){var c=this._dashedPath;a.beginPath();for(var l=0;l<c.length;l+=2)a[c[l]].apply(a,c[l+1]);b&&a.stroke()},_moveToA:function(a,b,c,l){a.push("moveTo",[c[0],c[1]]);l&&l.push("moveTo",[c[0],c[1]]);for(b=2;b<c.length;b+=2)a.push("lineTo",[c[b],c[b+1]]),l&&(this._dashResidue=w(l,this,c[b-2],c[b-1],c[b],c[b+1],this._dashResidue));this.last.x=c[c.length-2];this.last.y=c[c.length-1];this.lastControl=
{}},_moveToR:function(a,b,c,l){b="x"in this.last?[this.last.x+=c[0],this.last.y+=c[1]]:[this.last.x=c[0],this.last.y=c[1]];a.push("moveTo",b);l&&l.push("moveTo",b);for(b=2;b<c.length;b+=2)a.push("lineTo",[this.last.x+=c[b],this.last.y+=c[b+1]]),l&&(this._dashResidue=w(l,this,l[l.length-1][0],l[l.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(a,b,c,l){for(b=0;b<c.length;b+=2)l&&(this._dashResidue=w(l,this,this.last.x,this.last.y,c[b],c[b+1],this._dashResidue)),
a.push("lineTo",[c[b],c[b+1]]);this.last.x=c[c.length-2];this.last.y=c[c.length-1];this.lastControl={}},_lineToR:function(a,b,c,l){for(b=0;b<c.length;b+=2)a.push("lineTo",[this.last.x+=c[b],this.last.y+=c[b+1]]),l&&(this._dashResidue=w(l,this,l[l.length-1][0],l[l.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(a,b,c,l){for(b=0;b<c.length;++b)a.push("lineTo",[c[b],this.last.y]),l&&(this._dashResidue=w(l,this,l[l.length-1][0],l[l.length-1][1],c[b],this.last.y,
this._dashResidue));this.last.x=c[c.length-1];this.lastControl={}},_hLineToR:function(a,b,c,l){for(b=0;b<c.length;++b)a.push("lineTo",[this.last.x+=c[b],this.last.y]),l&&(this._dashResidue=w(l,this,l[l.length-1][0],l[l.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(a,b,c,l){for(b=0;b<c.length;++b)a.push("lineTo",[this.last.x,c[b]]),l&&(this._dashResidue=w(l,this,l[l.length-1][0],l[l.length-1][1],this.last.x,c[b],this._dashResidue));this.last.y=c[c.length-
1];this.lastControl={}},_vLineToR:function(a,b,c,l){for(b=0;b<c.length;++b)a.push("lineTo",[this.last.x,this.last.y+=c[b]]),l&&(this._dashResidue=w(l,this,l[l.length-1][0],l[l.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(a,b,c,l){for(b=0;b<c.length;b+=6)a.push("bezierCurveTo",c.slice(b,b+6)),l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue));this.last.x=c[c.length-2];this.last.y=c[c.length-1];this.lastControl.x=c[c.length-4];this.lastControl.y=
c[c.length-3];this.lastControl.type="C"},_curveToR:function(a,b,c,l){for(b=0;b<c.length;b+=6)a.push("bezierCurveTo",[this.last.x+c[b],this.last.y+c[b+1],this.lastControl.x=this.last.x+c[b+2],this.lastControl.y=this.last.y+c[b+3],this.last.x+c[b+4],this.last.y+c[b+5]]),l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue)),this.last.x+=c[b+4],this.last.y+=c[b+5];this.lastControl.type="C"},_smoothCurveToA:function(a,b,c,l){for(b=0;b<c.length;b+=4){var e="C"==this.lastControl.type;a.push("bezierCurveTo",
[e?2*this.last.x-this.lastControl.x:this.last.x,e?2*this.last.y-this.lastControl.y:this.last.y,c[b],c[b+1],c[b+2],c[b+3]]);l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue));this.lastControl.x=c[b];this.lastControl.y=c[b+1];this.lastControl.type="C"}this.last.x=c[c.length-2];this.last.y=c[c.length-1]},_smoothCurveToR:function(a,b,c,l){for(b=0;b<c.length;b+=4){var e="C"==this.lastControl.type;a.push("bezierCurveTo",[e?2*this.last.x-this.lastControl.x:this.last.x,e?2*this.last.y-this.lastControl.y:
this.last.y,this.last.x+c[b],this.last.y+c[b+1],this.last.x+c[b+2],this.last.y+c[b+3]]);l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue));this.lastControl.x=this.last.x+c[b];this.lastControl.y=this.last.y+c[b+1];this.lastControl.type="C";this.last.x+=c[b+2];this.last.y+=c[b+3]}},_qCurveToA:function(a,b,c,l){for(b=0;b<c.length;b+=4)a.push("quadraticCurveTo",c.slice(b,b+4));l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue));this.last.x=c[c.length-2];this.last.y=c[c.length-
1];this.lastControl.x=c[c.length-4];this.lastControl.y=c[c.length-3];this.lastControl.type="Q"},_qCurveToR:function(a,b,c,l){for(b=0;b<c.length;b+=4)a.push("quadraticCurveTo",[this.lastControl.x=this.last.x+c[b],this.lastControl.y=this.last.y+c[b+1],this.last.x+c[b+2],this.last.y+c[b+3]]),l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue)),this.last.x+=c[b+2],this.last.y+=c[b+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(a,b,c,l){for(b=0;b<c.length;b+=2){var e="Q"==this.lastControl.type;
a.push("quadraticCurveTo",[this.lastControl.x=e?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=e?2*this.last.y-this.lastControl.y:this.last.y,c[b],c[b+1]]);l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=c[c.length-2];this.last.y=c[c.length-1]},_qSmoothCurveToR:function(a,b,c,l){for(b=0;b<c.length;b+=2){var e="Q"==this.lastControl.type;a.push("quadraticCurveTo",[this.lastControl.x=e?2*this.last.x-this.lastControl.x:this.last.x,
this.lastControl.y=e?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+c[b],this.last.y+c[b+1]]);l&&(this._dashResidue=y(l,this,a[a.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=c[b];this.last.y+=c[b+1]}},_arcTo:function(c,d,f,l){d="a"==d;for(var e=0;e<f.length;e+=7){var h=f[e+5],n=f[e+6];d&&(h+=this.last.x,n+=this.last.y);var z=a.arcAsBezier(this.last,f[e],f[e+1],f[e+2],f[e+3]?1:0,f[e+4]?1:0,h,n);b.forEach(z,function(a){c.push("bezierCurveTo",a)});l&&(this._dashResidue=
y(l,this,p,this._dashResidue));this.last.x=h;this.last.y=n}this.lastControl={}},_closePath:function(a,b,c,l){a.push("closePath",[]);l&&(this._dashResidue=w(l,this,this.last.x,this.last.y,l[1][0],l[1][1],this._dashResidue));this.lastControl={}}});b.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),function(a){R(E.Path,a)});E.TextPath=s("dojox.gfx.canvas.TextPath",[E.Shape,f.TextPath],{_renderShape:function(a){},_setText:function(){},_setFont:function(){}});
E.Surface=s("dojox.gfx.canvas.Surface",g.Surface,{constructor:function(){g.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){g.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(a,b){this.width=q.normalizedLength(a);this.height=q.normalizedLength(b);if(!this.rawNode)return this;var c=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,c=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,c=!0);c&&
this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(a){if(this.rawNode&&(a||!this.pendingImageCount))a=this.rawNode.getContext("2d"),a.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(a),"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender)},render:function(a){a.save();for(var b=0;b<this.children.length;++b)this.children[b]._render(a);a.restore()},makeDirty:function(){!this.pendingImagesCount&&
(!("pendingRender"in this)&&!this._batch)&&(this.pendingRender=setTimeout(t.hitch(this,this._render),0))},downloadImage:function(a,b){var c=t.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);a.onload=c;a.onerror=c;a.onabort=c;a.src=b},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},
disconnect:function(){},on:function(){}});E.createSurface=function(a,b,c){if(!b&&!c){var l=m.position(a);b=b||l.w;c=c||l.h}"number"==typeof b&&(b+="px");"number"==typeof c&&(c+="px");l=new E.Surface;a=k.byId(a);var e=a.ownerDocument.createElement("canvas");e.width=q.normalizedLength(b);e.height=q.normalizedLength(c);a.appendChild(e);l.rawNode=e;l._parent=a;return l.surface=l};var U=g.Container;s={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:
0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(a){this._makeDirty();return U.add.apply(this,arguments)},remove:function(a,b){this._makeDirty();return U.remove.apply(this,arguments)},clear:function(){this._makeDirty();return U.clear.apply(this,arguments)},getBoundingBox:U.getBoundingBox,_moveChildToFront:function(a){this._makeDirty();return U._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(a){this._makeDirty();return U._moveChildToBack.apply(this,
arguments)}};f={createObject:function(a,b){var c=new a;c.surface=this.surface;c.setShape(b);this.add(c);return c}};d(E.Group,s);d(E.Group,g.Creator);d(E.Group,f);d(E.Surface,s);d(E.Surface,g.Creator);d(E.Surface,f);E.fixTarget=function(a,b){return!0};return E})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(q,t,b,s,r,m,k,g,f,a){var c=q.shape=
{};c.Shape=b("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(r("gfxRegistry")){var a=c.register(this);this.getUID=function(){return a}}},destroy:function(){r("gfxRegistry")&&c.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},
getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b)return null;var c=this._getRealMatrix();return[a.multiplyPoint(c,b.x,b.y),a.multiplyPoint(c,b.x+b.width,b.y),a.multiplyPoint(c,b.x+b.width,b.y+b.height),a.multiplyPoint(c,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=
a},getClip:function(){return this.clip},setShape:function(a){this.shape=q.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=q.makeParameters(q.defaultLinearGradient,a);break;case "radial":b=q.makeParameters(q.defaultRadialGradient,a);break;case "pattern":b=q.makeParameters(q.defaultPattern,a)}else b=q.normalizeColor(a);this.fillStyle=b;return this},setStroke:function(a){if(!a)return this.strokeStyle=
null,this;if("string"==typeof a||t.isArray(a)||a instanceof f)a={color:a};a=this.strokeStyle=q.makeParameters(q.defaultStroke,a);a.color=q.normalizeColor(a.color);return this},setTransform:function(b){this.matrix=a.clone(b?a.normalize(b):a.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),
this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},_updateParentMatrix:function(b){this.parentMatrix=
b?a.clone(b):null;return this._applyTransform()},_getRealMatrix:function(){for(var b=this.matrix,c=this.parent;c;)c.matrix&&(b=a.multiply(c.matrix,b)),c=c.parent;return b}});c._eventsProcessing={on:function(a,b){return m(this.getEventSource(),a,c.fixCallback(this,q.fixTarget,b))},connect:function(a,b,c){"on"==a.substring(0,2)&&(a=a.substring(2));return this.on(a,c?t.hitch(b,c):b)},disconnect:function(a){return a.remove()}};c.fixCallback=function(a,b,c,f){f||(f=c,c=null);if(t.isString(f)){c=c||s.global;
if(!c[f])throw['dojox.gfx.shape.fixCallback: scope["',f,'"] is null (scope\x3d"',c,'")'].join("");return function(g){return b(g,a)?c[f].apply(c,arguments||[]):void 0}}return!c?function(g){return b(g,a)?f.apply(c,arguments):void 0}:function(g){return b(g,a)?f.apply(c,arguments||[]):void 0}};t.extend(c.Shape,c._eventsProcessing);c.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var b=a.getParent();b&&b.remove(a,
!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){b||(a.parent=null,a.parentMatrix=null);this.children.splice(c,1);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;k.forEach(this.children,function(c){var f=c.getBoundingBox();
f&&((c=c.getTransform())&&(f=a.multiplyRectangle(c,f)),b?(b.x=Math.min(b.x,f.x),b.y=Math.min(b.y,f.y),b.endX=Math.max(b.endX,f.x+f.width),b.endY=Math.max(b.endY,f.y+f.height)):b={x:f.x,y:f.y,endX:f.x+f.width,endY:f.y+f.height})});b&&(b.width=b.endX-b.x,b.height=b.endY-b.y);return b}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==
a){this.children.splice(b,1);this.children.unshift(a);break}return this}};c.Surface=b("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){k.forEach(this._nodes,g.destroy);this._nodes=[];k.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(r("ie"))for(;this._parent.lastChild;)g.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},
_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,b){var c=t.hitch(a,b);if(this.isLoaded)c(this);else m.once(this,"load",function(a){c(a)})}});t.extend(c.Surface,c._eventsProcessing);c.Rect=b("dojox.gfx.shape.Rect",c.Shape,{constructor:function(a){this.shape=q.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});c.Ellipse=b("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(a){this.shape=q.getDefault("Ellipse");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});c.Circle=b("dojox.gfx.shape.Circle",c.Shape,{constructor:function(a){this.shape=q.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});c.Line=b("dojox.gfx.shape.Line",c.Shape,{constructor:function(a){this.shape=q.getDefault("Line");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});c.Polyline=b("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(a){this.shape=q.getDefault("Polyline");this.rawNode=a},setShape:function(a,b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);
return this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],f=0;f<b;f+=2)c.push({x:a[f],y:a[f+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],f=c.x,g=c.y,k=c.x,m=c.y,r=1;r<b;++r)c=a[r],f>c.x&&(f=c.x),k<c.x&&(k=c.x),g>c.y&&(g=c.y),m<c.y&&(m=c.y);this.bbox={x:f,y:g,width:k-f,height:m-g}}return this.bbox}});c.Image=b("dojox.gfx.shape.Image",c.Shape,
{constructor:function(a){this.shape=q.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});c.Text=b(c.Shape,{constructor:function(a){this.fontStyle=null;this.shape=q.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?q.splitFontString(a):q.makeParameters(q.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=
null;this.getShape().text&&(a=q._base._computeTextBoundingBox(this));return a}});c.Creator={createShape:function(a){switch(a.type){case q.defaultPath.type:return this.createPath(a);case q.defaultRect.type:return this.createRect(a);case q.defaultCircle.type:return this.createCircle(a);case q.defaultEllipse.type:return this.createEllipse(a);case q.defaultLine.type:return this.createLine(a);case q.defaultPolyline.type:return this.createPolyline(a);case q.defaultImage.type:return this.createImage(a);
case q.defaultText.type:return this.createText(a);case q.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(q.Group)},createRect:function(a){return this.createObject(q.Rect,a)},createEllipse:function(a){return this.createObject(q.Ellipse,a)},createCircle:function(a){return this.createObject(q.Circle,a)},createLine:function(a){return this.createObject(q.Line,a)},createPolyline:function(a){return this.createObject(q.Polyline,a)},createImage:function(a){return this.createObject(q.Image,
a)},createText:function(a){return this.createObject(q.Text,a)},createPath:function(a){return this.createObject(q.Path,a)},createTextPath:function(a){return this.createObject(q.TextPath,{}).setText(a)},createObject:function(a,b){return null}};return c})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(q,t,b,s,r){r=b("dojox.gfx.path.Path",r.Shape,{constructor:function(b){this.shape=t.clone(q.defaultPath);this.segments=[];this.tbbox=
null;this.absolute=!0;this.last={};this.rawNode=b;this.segmented=!1},setAbsoluteMode:function(b){this._confirmSegmented();this.absolute="string"==typeof b?"absolute"==b:b;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;
var b=this.bbox,k=this._getRealMatrix();this.bbox=null;for(var g=0,f=this.segments.length;g<f;++g)this._updateWithSegment(this.segments[g],k);k=this.bbox;this.bbox=b;return this.tbbox=k?[{x:k.l,y:k.t},{x:k.r,y:k.t},{x:k.r,y:k.b},{x:k.l,y:k.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(b,k,g){g&&(k=s.multiplyPoint(g,b,k),b=k.x,k=k.y);this.bbox&&"l"in
this.bbox?(this.bbox.l>b&&(this.bbox.l=b),this.bbox.r<b&&(this.bbox.r=b),this.bbox.t>k&&(this.bbox.t=k),this.bbox.b<k&&(this.bbox.b=k)):this.bbox={l:b,b:k,r:b,t:k}},_updateWithSegment:function(b,k){var g=b.args,f=g.length,a;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=0;a<f;a+=2)this._updateBBox(g[a],g[a+1],k);this.last.x=g[f-2];this.last.y=g[f-1];this.absolute=!0;break;case "H":for(a=0;a<f;++a)this._updateBBox(g[a],this.last.y,k);this.last.x=g[f-1];this.absolute=!0;
break;case "V":for(a=0;a<f;++a)this._updateBBox(this.last.x,g[a],k);this.last.y=g[f-1];this.absolute=!0;break;case "m":a=0;"x"in this.last||(this._updateBBox(this.last.x=g[0],this.last.y=g[1],k),a=2);for(;a<f;a+=2)this._updateBBox(this.last.x+=g[a],this.last.y+=g[a+1],k);this.absolute=!1;break;case "l":case "t":for(a=0;a<f;a+=2)this._updateBBox(this.last.x+=g[a],this.last.y+=g[a+1],k);this.absolute=!1;break;case "h":for(a=0;a<f;++a)this._updateBBox(this.last.x+=g[a],this.last.y,k);this.absolute=!1;
break;case "v":for(a=0;a<f;++a)this._updateBBox(this.last.x,this.last.y+=g[a],k);this.absolute=!1;break;case "c":for(a=0;a<f;a+=6)this._updateBBox(this.last.x+g[a],this.last.y+g[a+1],k),this._updateBBox(this.last.x+g[a+2],this.last.y+g[a+3],k),this._updateBBox(this.last.x+=g[a+4],this.last.y+=g[a+5],k);this.absolute=!1;break;case "s":case "q":for(a=0;a<f;a+=4)this._updateBBox(this.last.x+g[a],this.last.y+g[a+1],k),this._updateBBox(this.last.x+=g[a+2],this.last.y+=g[a+3],k);this.absolute=!1;break;
case "A":for(a=0;a<f;a+=7)this._updateBBox(g[a+5],g[a+6],k);this.last.x=g[f-2];this.last.y=g[f-1];this.absolute=!0;break;case "a":for(a=0;a<f;a+=7)this._updateBBox(this.last.x+=g[a+5],this.last.y+=g[a+6],k);this.absolute=!1}var c=[b.action];for(a=0;a<f;++a)c.push(q.formatNumber(g[a],!0));if("string"==typeof this.shape.path)this.shape.path+=c.join("");else{a=0;for(f=c.length;a<f;++a)this.shape.path.push(c[a])}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(b,k){this.tbbox=
null;var g=this._validSegments[b.toLowerCase()];"number"==typeof g&&(g?k.length>=g&&(g={action:b,args:k.slice(0,k.length-k.length%g)},this.segments.push(g),this._updateWithSegment(g)):(g={action:b,args:[]},this.segments.push(g),this._updateWithSegment(g)))},_collectArgs:function(b,k){for(var g=0;g<k.length;++g){var f=k[g];"boolean"==typeof f?b.push(f?1:0):"number"==typeof f?b.push(f):f instanceof Array?this._collectArgs(b,f):"x"in f&&"y"in f&&b.push(f.x,f.y)}},moveTo:function(){this._confirmSegmented();
var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"M":"m",b);return this},lineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"L":"l",b);return this},hLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"H":"h",b);return this},vLineTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"V":"v",b);
return this},curveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"C":"c",b);return this},smoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"S":"s",b);return this},qCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"Q":"q",b);return this},qSmoothCurveTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,
arguments);this._pushSegment(this.absolute?"T":"t",b);return this},arcTo:function(){this._confirmSegmented();var b=[];this._collectArgs(b,arguments);this._pushSegment(this.absolute?"A":"a",b);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var b=this.shape.path;this.shape.path=[];this._setPath(b);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(b){b=t.isArray(b)?b:b.match(q.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(b){for(var k="",g=[],f=b.length,a=0;a<f;++a){var c=b[a],d=parseFloat(c);isNaN(d)?(k&&this._pushSegment(k,g),g=[],k=c):g.push(d)}this._pushSegment(k,g)}},setShape:function(b){this.inherited(arguments,["string"==typeof b?{path:b}:b]);this.segmented=!1;this.segments=[];q.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});b=b("dojox.gfx.path.TextPath",r,{constructor:function(b){"text"in this||(this.text=t.clone(q.defaultTextPath));
"fontStyle"in this||(this.fontStyle=t.clone(q.defaultFont))},getText:function(){return this.text},setText:function(b){this.text=q.makeParameters(this.text,"string"==typeof b?{text:b}:b);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(b){this.fontStyle="string"==typeof b?q.splitFontString(b):q.makeParameters(q.defaultFont,b);this._setFont();return this}});return q.path={Path:r,TextPath:b}})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],
function(q,t,b){function s(a){var b=Math.cos(a);a=Math.sin(a);var d={x:b+4/3*(1-b),y:a-4/3*b*(1-b)/a};return{s:{x:b,y:-a},c1:{x:d.x,y:-d.y},c2:d,e:{x:b,y:a}}}var r=2*Math.PI,m=Math.PI/4,k=Math.PI/8,g=m+k,f=s(k);return q.arc={unitArcAsBezier:s,curvePI4:f,arcAsBezier:function(a,c,d,q,t,x,y,w){t=Boolean(t);x=Boolean(x);var E=b._degToRad(q);q=c*c;var D=d*d,A=b.multiplyPoint(b.rotate(-E),{x:(a.x-y)/2,y:(a.y-w)/2}),H=A.x*A.x,G=A.y*A.y;q=Math.sqrt((q*D-q*G-D*H)/(q*G+D*H));isNaN(q)&&(q=0);q={x:q*c*A.y/d,
y:-q*d*A.x/c};t==x&&(q={x:-q.x,y:-q.y});q=b.multiplyPoint([b.translate((a.x+y)/2,(a.y+w)/2),b.rotate(E)],q);c=b.normalize([b.translate(q.x,q.y),b.rotate(E),b.scale(c,d)]);q=b.invert(c);a=b.multiplyPoint(q,a);w=b.multiplyPoint(q,y,w);y=Math.atan2(a.y,a.x);w=Math.atan2(w.y,w.x);q=y-w;x&&(q=-q);0>q?q+=r:q>r&&(q-=r);d=k;w=f;d=x?d:-d;a=[];for(t=q;0<t;t-=m)t<g&&(d=t/2,w=s(d),d=x?d:-d,t=0),A=b.normalize([c,b.rotate(y+d)]),x?(q=b.multiplyPoint(A,w.c1),E=b.multiplyPoint(A,w.c2),A=b.multiplyPoint(A,w.e)):(q=
b.multiplyPoint(A,w.c2),E=b.multiplyPoint(A,w.c1),A=b.multiplyPoint(A,w.s)),a.push([q.x,q.y,E.x,E.y,A.x,A.y]),y+=2*d;return a}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(q,t,b){function s(b,a){return Math.abs(b-a)<=1E-6*(Math.abs(b)+Math.abs(a))}function r(b,a,c,d){if(isFinite(b)){if(!isFinite(c))return b}else return c;a=Math.abs(a);d=Math.abs(d);return(a*b+d*c)/(a+d)}function m(f){f=b.normalize(f);var a=-f.xx-f.yy,c=f.xx*f.yy-f.xy*f.yx,d=Math.sqrt(a*
a-4*c),a=-(a+(0>a?-d:d))/2,c=c/a,d=f.xy/(a-f.xx),g=1,k=f.xy/(c-f.xx),m=1;s(a,c)&&(d=1,k=g=0,m=1);isFinite(d)||(d=1,g=(a-f.xx)/f.xy,isFinite(g)||(d=(a-f.yy)/f.yx,g=1,isFinite(d)||(d=1,g=f.yx/(a-f.yy))));isFinite(k)||(k=1,m=(c-f.xx)/f.xy,isFinite(m)||(k=(c-f.yy)/f.yx,m=1,isFinite(k)||(k=1,m=f.yx/(c-f.yy))));f=Math.sqrt(d*d+g*g);var r=Math.sqrt(k*k+m*m);if(!isFinite(d/=f))d=0;if(!isFinite(g/=f))g=0;if(!isFinite(k/=r))k=0;if(!isFinite(m/=r))m=0;return{value1:a,value2:c,vector1:{x:d,y:g},vector2:{x:k,
y:m}}}function k(b,a){var c=0>b.xx*b.yy||0<b.xy*b.yx?-1:1,d=a.angle1=(Math.atan2(b.yx,b.yy)+Math.atan2(-c*b.xy,c*b.xx))/2,c=Math.cos(d),d=Math.sin(d);a.sx=r(b.xx/c,c,-b.xy/d,d);a.sy=r(b.yy/c,c,b.yx/d,d);return a}function g(b,a){var c=0>b.xx*b.yy||0<b.xy*b.yx?-1:1,d=a.angle2=(Math.atan2(c*b.yx,c*b.xx)+Math.atan2(-b.xy,b.yy))/2,c=Math.cos(d),d=Math.sin(d);a.sx=r(b.xx/c,c,b.yx/d,d);a.sy=r(b.yy/c,c,-b.xy/d,d);return a}return q.decompose=function(f){var a=b.normalize(f);f={dx:a.dx,dy:a.dy,sx:1,sy:1,angle1:0,
angle2:0};if(s(a.xy,0)&&s(a.yx,0))return t.mixin(f,{sx:a.xx,sy:a.yy});if(s(a.xx*a.yx,-a.xy*a.yy))return k(a,f);if(s(a.xx*a.xy,-a.yx*a.yy))return g(a,f);var c,d=new b.Matrix2D(a);c=t.mixin(d,{dx:0,dy:0,xy:d.yx,yx:d.xy});d=m([a,c]);c=m([c,a]);d=new b.Matrix2D({xx:d.vector1.x,xy:d.vector2.x,yx:d.vector1.y,yy:d.vector2.y});c=new b.Matrix2D({xx:c.vector1.x,xy:c.vector1.y,yx:c.vector2.x,yy:c.vector2.y});a=new b.Matrix2D([b.invert(d),a,b.invert(c)]);k(c,f);a.xx*=f.sx;a.yy*=f.sy;g(d,f);a.xx*=f.sx;a.yy*=f.sy;
return t.mixin(f,{sx:a.xx,sy:a.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(q){q=q.bezierutils={};q.tAtLength=function(k,g){var f=0,a=6==k.length,c=0,d=0,r=a?s:m,q=function(m,s){for(var t=0,E=0;E<m.length-2;E+=2)t+=b(m[E],m[E+1],m[E+2],m[E+3]);E=a?b(k[0],k[1],k[4],k[5]):b(k[0],k[1],k[6],k[7]);t-E>s||c+t>g+s?(++d,t=r(m,0.5),q(t[0],s),Math.abs(c-g)<=s||q(t[1],s)):(c+=t,f+=1/(1<<d))};g&&q(k,0.5);return f};var t=q.computeLength=function(k){for(var g=6==k.length,f=0,a=0;a<k.length-
2;a+=2)f+=b(k[a],k[a+1],k[a+2],k[a+3]);a=g?b(k[0],k[1],k[4],k[5]):b(k[0],k[1],k[6],k[7]);0.1<f-a&&(k=g?s(k,0.5):r(k,0.5),f=t(k[0],g),f+=t(k[1],g));return f},b=q.distance=function(b,g,f,a){return Math.sqrt((f-b)*(f-b)+(a-g)*(a-g))},s=function(b,g){var f=1-g,a=f*f,c=g*g,d=b[0],m=b[1],r=b[2],q=b[3],s=b[4],t=b[5],E=a*d+2*f*g*r+c*s,a=a*m+2*f*g*q+c*t;return[[d,m,f*d+g*r,f*m+g*q,E,a],[E,a,f*r+g*s,f*q+g*t,s,t]]},r=function(b,g){var f=1-g,a=f*f,c=a*f,d=g*g,m=d*g,r=b[0],q=b[1],s=b[2],t=b[3],E=b[4],D=b[5],A=
b[6],H=b[7],G=c*r+3*a*g*s+3*f*d*E+m*A,c=c*q+3*a*g*t+3*f*d*D+m*H;return[[r,q,f*r+g*s,f*q+g*t,a*r+2*f*g*s+d*E,a*q+2*f*g*t+d*D,G,c],[G,c,a*s+2*f*g*E+d*A,a*t+2*f*g*D+d*H,f*E+g*A,f*D+g*H,A,H]]},m=q.splitBezierAtT=function(b,g){return 6==b.length?s(b,g):r(b,g)};return q})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(q,t,b){t.getObject("json",!0,b);b.json._slice=function(b,r,m,k){var g=b.length,f=[];m=m||g;r=0>r?Math.max(0,r+g):Math.min(g,
r);for(m=0>m?Math.max(0,m+g):Math.min(g,m);r<m;r+=k)f.push(b[r]);return f};b.json._find=function(b,r){function m(b){r&&(!0===r&&!(b instanceof Array)?k.push(b):b[r]&&k.push(b[r]));for(var a in b){var c=b[a];r?c&&"object"==typeof c&&m(c):k.push(c)}}var k=[];if(r instanceof Array){if(1==r.length)return b[r[0]];for(var g=0;g<r.length;g++)k.push(b[r[g]])}else m(b);return k};b.json._distinctFilter=function(b,r){for(var m=[],k={},g=0,f=b.length;g<f;++g){var a=b[g];r(a,g,b)&&("object"==typeof a&&a?a.__included||
(a.__included=!0,m.push(a)):k[a+typeof a]||(k[a+typeof a]=!0,m.push(a)))}g=0;for(f=m.length;g<f;++g)m[g]&&delete m[g].__included;return m};return b.json.query=function(b,r){function m(b){a=b+"("+a}function k(a,b,c,d,g,k,m,r){return f[r].match(/[\*\?]/)||"~"==m?"/^"+f[r].substring(1,f[r].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==m?"$/i":"$/")+".test("+b+")":a}var g=0,f=[];b=b.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(a){g+="["==
a?1:"]"==a?-1:0;return"]"==a&&0<g?"`]":'"'==a.charAt(0)||"'"==a.charAt(0)?"`"+(f.push(a)-1):a});var a="";b.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});b=b.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(a){return"."==a.charAt(0)?a:"@"==a?"$obj":(a.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+a}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(a,b,c){return(b=a.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?
(c="",a.match(/^\./)&&(m("dojox.json._find"),c=",true)"),m(b[1].match(/\=/)?"dojo.map":b[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter"),c+",function($obj){return "+b[2]+"})"):(b=a.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+b[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(a,b,c){return"var av\x3d "+c.replace(/\$obj/,"a")+",bv\x3d "+c.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==b?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==b?-1:
1)+";}\n"})+"return 0;})":(b=a.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(m("dojox.json._slice"),","+(b[1]||0)+","+(b[2]||0)+","+(b[3]||1)+")"):a.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(m("dojox.json._find"),("."==a.charAt(1)?",'"+c+"'":a.match(/,/)?","+a:"")+")"):a}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,k).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(a,b,c,d,f,g,m,r){return k(a,d,f,g,m,r,c,b)});b=a+("$"==
b.charAt(0)?"":"$")+b.replace(/`([0-9]+|\])/g,function(a,b){return"]"==b?"]":f[b]});for(var c=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+b+"}"),d=0;d<arguments.length-1;d++)arguments[d]=arguments[d+1];return r?c.apply(this,arguments):c}})},"dojox/main":function(){define(["dojo/_base/kernel"],function(q){return q.dojox})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q(null,{declaredClass:"esri.tasks.PrintParameters",
map:null,template:null,outSpatialReference:null,extraParameters:null});b("extend-esri")&&t.setObject("tasks.PrintParameters",q,s);return q})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S,L,Q,R,X,V,O,U,v,K,C,l,e,h,n,z){t=t([E,D,A,r],{declaredClass:"esri.dijit.Search",templateString:w,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(a,h){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",
searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",
latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",
searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this.defaultSource={locator:new e("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],name:y.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:y.widgets.Search.main.placeholder,
highlightSymbol:(new R(q.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:150,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,
enableLabel:!1,labelSymbol:(new U).setColor(new n([181,56,46,0.9])).setFont(new v("14px",v.STYLE_NORMAL,v.VARIANT_NORMAL,v.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new M(y.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),searchResults:null,suggestResults:null,
selectedResult:null,magicKey:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:1,enableSearchingAll:!0};var l=b.mixin({},this.options,a);this.set(l);this._updateActiveSource();this._i18n=y;this._defaultSR=new S(4326);this.domNode=h},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(b.hitch(this,this._init))},postCreate:function(){var a=this;this.inherited(arguments);this._moreResultsId=this.id+
"_more_results";this.own(g(this.submitNode,H,b.hitch(this,this._searchButton)));this.own(g(this.sourcesBtnNode,H,b.hitch(this,this._toggleSourcesMenu)));this.own(g(this.inputNode,H,b.hitch(this,this._inputClick)));this.own(g(this.clearNode,H,b.hitch(this,this._clearButton)));this.own(g(this.formNode,"submit",b.hitch(this,function(a){a.preventDefault();this._cancelSuggest();this.search()})));this.own(g(this.inputNode,"keyup",b.hitch(this,function(a){this._inputKey(a)})));this.own(g(this.sourcesBtnNode,
"keyup",b.hitch(this,function(a){this._sourceBtnKey(a)})));this.own(g(this.suggestionsNode,"li:click, li:keyup",function(e){a._suggestionsEvent(e,this)}));this.own(g(this.sourcesNode,"li:click, li:keyup",function(e){a._sourcesEvent(e,this)}));this.own(g(this.inputNode,"input, paste",b.hitch(this,function(){this._suggestDelay()})));this.map&&(this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow)&&(this.own(g(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_show:click",b.hitch(this,
function(a){this._showMoreResultsClick(a)}))),this.own(g(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",b.hitch(this,function(a){this._moreResultsClick(a)}))),this.own(g(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",b.hitch(this,function(a){this._switchCoordinatesClick(a)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);this._updateButtonMode(this.enableButtonMode);
this.toggle(this.expanded)},destroy:function(){this.clear();x.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();d.get(this.inputNode,"value")&&d.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);u.remove(this.containerNode,this.css.hasValue);d.set(this.clearNode,"title","");this._hideMenus();this._closePopup();this._hideLoading();
this.emit("clear-search")},show:function(){B.set(this.domNode,"display","block")},hide:function(){B.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(u.add(this.containerNode,this.css.searchExpanded),u.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(u.remove(this.containerNode,this.css.searchExpanded),u.add(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",
!1))},toggle:function(a){this.enableButtonMode&&("undefined"===typeof a&&(a=!this.expanded),a?this.expand():this.collapse())},search:function(a){var e=new m;this._mapLoaded().then(b.hitch(this,function(){this._searchDeferred(a).then(b.hitch(this,function(a){var b=a.results;this.set("searchResults",b);0===a.numResults&&(this._noResults(a.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",a);this._selectFirstResult(b,a.activeSourceIndex);e.resolve(b)}),b.hitch(this,function(a){e.reject(a)}))}));
return e.promise},suggest:function(a){var e=new m;this._mapLoaded().then(b.hitch(this,function(){this._suggestDeferred(a).then(b.hitch(this,function(a){if(a){var b=a.results;this.set("suggestResults",b);this._insertSuggestions(b,a.value);this.emit("suggest-results",a);e.resolve(b)}}),b.hitch(this,function(a){e.reject(a)}))}));return e.promise},select:function(a){var e=this._getDefaultSymbol(a),h=this.labelSymbol,n,l=this.sources,c=this.activeSourceIndex,z=this.enableHighlight,v=this.enableLabel,d=
this.autoNavigate,f=this.showInfoWindowOnSelect,g=this.enableInfoWindow,k=this.infoTemplate,m=new L(a.feature.toJson());if(c===this._allIndex){var r=this._getSourceIndexOfResult(a);null!==r&&(n=l[r],c=r)}else n=l[c];n&&(n.hasOwnProperty("highlightSymbol")&&(e=n.highlightSymbol),n.hasOwnProperty("labelSymbol")&&(h=n.labelSymbol),n.hasOwnProperty("enableHighlight")&&(z=n.enableHighlight),n.hasOwnProperty("enableLabel")&&(v=n.enableLabel),n.hasOwnProperty("autoNavigate")&&(d=n.autoNavigate),n.hasOwnProperty("showInfoWindowOnSelect")&&
(f=n.showInfoWindowOnSelect),n.hasOwnProperty("enableInfoWindow")&&(g=n.enableInfoWindow),n.hasOwnProperty("infoTemplate")?k=n.infoTemplate:n.featureLayer&&n.featureLayer.infoTemplate&&(k=n.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(m){var l=this.highlightGraphic,C=this.graphicsLayer,r=this.labelGraphic,q=b.mixin({},m.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(a),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,
searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(a)}),s=null;g&&(s=k);r?(r.setGeometry(m.geometry),r.setAttributes(q),r.setSymbol(h),h&&"textsymbol"===h.type&&r.symbol.setText(a.name)):(r=new L(m.geometry,h,q),h&&"textsymbol"===h.type&&r.symbol.setText(a.name),v&&(C?C.add(r):this.map&&this.map.graphics&&this.map.graphics.add(r)));l?(l.setGeometry(m.geometry),l.setAttributes(q),l.setInfoTemplate(s),l.setSymbol(e)):(l=new L(m.geometry,e,q,s),z&&(C?C.add(l):this.map&&
this.map.graphics&&this.map.graphics.add(l)));l&&(l.symbol&&"textsymbol"===l.symbol.type)&&l.symbol.setText(a.name);this.map&&(this.map.infoWindow&&g&&f)&&(this.map.infoWindow.setFeatures([l]),e=this._getPointFromGeometry(l.geometry),this.map.infoWindow.show(e));this.map&&d&&a&&a.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(a.extent);this.set("highlightGraphic",l);this.set("labelGraphic",r)}this.set("selectedResult",a);this.emit("select-result",{result:a,source:n,
sourceIndex:c})},focus:function(){G.focus(this.inputNode)},blur:function(){this.inputNode.blur();G.curNode&&G.curNode.blur()},clearGraphics:function(){var a=this.highlightGraphic,e=this.graphicsLayer,b=this.labelGraphic;a&&(e?e.remove(a):this.map&&this.map.graphics&&this.map.graphics.remove(a));b&&(e?e.remove(b):this.map&&this.map.graphics&&this.map.graphics.remove(b));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_mapLoaded:function(){var a=new m;if(this.map)if(this.map.loaded)a.resolve();
else g.once(this.map,"load",b.hitch(this,function(){a.resolve()}));else a.resolve();return a.promise},_init:function(){this._getMapLayers().then(b.hitch(this,function(){this.set("loaded",!0);this.emit("load")}))},_clearButton:function(){this.clear();G.focus(this.inputNode)},_error:function(a){return Error(this.declaredClass+" "+a)},_searchDeferred:function(a){var e=new m,h=this.value,n=this.activeSourceIndex;a&&a.hasOwnProperty("index")&&(n=a.index);this._showLoading();this._hideMenus();this._closePopup();
this.clearGraphics();var l={magicKey:this.magicKey,text:h};a?"string"===typeof a?(l.text=a,a=this._searchQueries(l)):a="object"===typeof a&&a.hasOwnProperty("magicKey")?this._searchQueries(a):"object"===typeof a&&a.hasOwnProperty("geometry")?this._searchQueries({geometry:a}):"object"===typeof a&&a.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(a):"object"===typeof a&&"point"===a.type?this._searchQueries({point:a}):a instanceof Array&&2===a.length?this._searchQueries({latlon:a}):this._searchQueries(l):
a=this._searchQueries(l);a.always(b.hitch(this,function(a){a=this._formatResults(a,n,h);e.resolve(a)}));return e.promise},_suggestDeferred:function(a){var e=new m;this._deferreds.push(e);a||(a=this.value);var h=this.activeSourceIndex;this._suggestQueries({text:a}).always(b.hitch(this,function(b){var n;if(b)for(var l=0;l<b.length;l++)b[l]&&(n=!0);n?(b=this._formatResults(b,h,a),e.resolve(b)):e.resolve()}));return e.promise},_getDefaultSymbol:function(a){var e,b,h,n;this.map&&(n=this.map.getBasemap());
n||(n="topo");a&&(a.feature&&a.feature.geometry)&&(h=a.feature.geometry.type);"polyline"===h?h="line":"circle"===h||"extent"===h?h="polygon":"multipoint"===h&&(h="point");if(h){if(a=z.getSchemes({theme:"default",basemap:n,geometryType:h}))b=a.primaryScheme;if(b){b.color&&b.hasOwnProperty("opacity")&&(b.color.a=b.opacity);e=b;a=b.color;b=b.size;var l;switch(h){case "point":l=new X;l.setColor(a);l.setSize(null!==b?b:e.size);h=new V;h.setColor(e.outline.color);h.setWidth(e.outline.width);l.setOutline(h);
break;case "line":l=new V;l.setColor(a);l.setWidth(null!==b?b:e.width);break;case "polygon":l=new O,l.setColor(a),h=new V,h.setColor(e.outline.color),h.setWidth(e.outline.width),l.setOutline(h)}e=l}}return e},_selectFirstResult:function(a,e){if(this.autoSelect&&a){var b;e===this._allIndex?b=this._getFirstResult(a):a[e]&&a[e][0]&&(b=a[e][0]);b&&this.select(b)}},_getSourceIndexOfResult:function(a){var e=this.searchResults;if(e)for(var b in e)if(e[b]&&e[b].length)for(var h=0;h<e[b].length;h++)if(e[b][h]===
a)return parseInt(b,10);return null},_getFirstResult:function(a){if(a)for(var e in a)if(a[e]&&a[e][0])return a[e][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus");this.inherited(arguments)},_onBlur:function(){this._hideMenus();this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");
this.inherited(arguments)},_getMapLayers:function(){var a=new m;if(this.addLayersFromMap&&this.map){var e=[],h=this.map.graphicsLayerIds;if(h&&h.length){for(var n=0;n<h.length;n++){var l=this.map.getLayer(h[n]);l&&e.push(this._featureLayerLoaded(l))}Q(e).always(b.hitch(this,function(e){for(var b,h=this.sources,n=0;n<e.length;n++)e[n]&&(e[n].loaded&&"Feature Layer"===e[n].type)&&(h.push({featureLayer:e[n],enableSuggestions:!0}),b=!0);b&&this.set("sources",h);a.resolve()}))}else a.resolve()}else a.resolve();
return a.promise},_switchCoordinatesClick:function(a){a.preventDefault();if(a=d.get(a.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",a),this.search()},_moreResultsClick:function(a){a.preventDefault();var e=a.target;a=parseInt(d.get(e,"data-source-index"),10);var e=parseInt(d.get(e,"data-index"),10),b=this.searchResults;b&&b[a]&&(a=b[a][e])&&this.select(a)},_showMoreResultsClick:function(a){a.preventDefault();if(a=c.byId(this._moreResultsId)){u.toggle(a,this.css.searchShowMoreResults);
var e=c.byId(this._moreResultsId+"_show");e&&(u.contains(a,this.css.searchShowMoreResults)?d.set(e,"textContent",y.widgets.Search.main.hideMoreResults):d.set(e,"textContent",y.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(a){var e=new m;if(a.loaded)e.resolve(a);else if(a.loadError)e.reject(this._error("Layer failed to load."));else{var h,n;h=g.once(a,"load",b.hitch(this,function(){n.remove();e.resolve(a)}));n=g.once(a,"error",b.hitch(this,function(){h.remove();e.reject(this._error("Layer could not be loaded."))}))}return e.promise},
_getObjectSize:function(a){var e=0,b;for(b in a)a.hasOwnProperty(b)&&e++;return e},_sourcesEvent:function(a,e){var b=d.get(e,"data-index"),h=f("li",this.sourcesNode),n=s.indexOf(h,e);b!==this._allIndex&&(b=parseInt(b,10));"click"===a.type||a.keyCode===k.ENTER?(this.set("activeSourceIndex",b),G.focus(this.inputNode),this._hideSourcesMenu()):a.keyCode===k.UP_ARROW?(a.stopPropagation(),a.preventDefault(),b=n-1,0>b?G.focus(this.sourcesBtnNode):G.focus(h[b])):a.keyCode===k.DOWN_ARROW?(a.stopPropagation(),
a.preventDefault(),b=n+1,b>=h.length?G.focus(this.sourcesBtnNode):G.focus(h[b])):a.keyCode===k.ESCAPE&&(this._hideSourcesMenu(),G.focus(this.inputNode))},_suggestionsEvent:function(a,e){var b=d.get(e,"data-source-index"),h=parseInt(d.get(e,"data-index"),10),n=f("li",this.suggestionsNode),l=this.sources,c=s.indexOf(n,e);b!==this._allIndex&&(b=parseInt(b,10));this._clearQueryTimeout();if("click"===a.type||a.keyCode===k.ENTER){var n=this.suggestResults,z;n&&(n[b]&&n[b][h])&&(z=n[b][h]);z&&(z.index=b,
l[b].featureLayer?z[this._objectIdIdentifier]=z.feature.attributes[l[b].featureLayer.objectIdField]:z.magicKey&&z.text&&(this.set("value",z.text),this.set("magicKey",z.magicKey)),this.search(z),G.focus(this.inputNode))}else a.keyCode===k.BACKSPACE||a.keyCode===k.DELETE?G.focus(this.inputNode):a.keyCode===k.UP_ARROW?(a.stopPropagation(),a.preventDefault(),b=c-1,0>b?G.focus(this.inputNode):G.focus(n[b])):a.keyCode===k.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),b=c+1,b>=n.length?G.focus(this.inputNode):
G.focus(n[b])):a.keyCode===k.ESCAPE&&(this._hideMenus(),G.focus(this.inputNode))},_getResultName:function(a){var e;a.hasOwnProperty("name")&&null!==a.name&&(e=a.name.toString());e||(e=y.widgets.Search.main.untitledResult);return e},_getSuggestionName:function(a){var e;a.hasOwnProperty("name")&&(e=a.name.toString());a=a.text||e;a||(a=y.widgets.Search.main.untitledResult);return a},_searchResultHTML:function(a){var e="";if(a.feature&&a.feature.attributes&&a.feature.attributes.Addr_type&&"LatLong"===
a.feature.attributes.Addr_type){var b=a.name.split(" "),h,n;2===b.length&&(h=b[0],n=b[1]);if(n&&h){if(a=parseFloat(h),n=parseFloat(n),b=n+", "+a,e+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e',e+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+y.widgets.Search.main.lonlat+"\x3c/div\x3e",e+=a+", "+n,e=e+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e'),a!==n&&!(90<a||-90>a||180<n||-180>n))e+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+y.widgets.Search.main.reverseLonLatHeader+
"\x3c/div\x3e",e+='\x3ca data-switch-coordinates\x3d"'+b+'" tabindex\x3d"0" href\x3d"#"\x3e'+b+"\x3c/a\x3e",e+="\x3c/div\x3e"}else e=a.name}else e=a.name;return e},_moreResultsHTML:function(a){var e="",b="",h=this.searchResults,n=this.sources,l=0;if(h){var b=b+('\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e'),b=b+('\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+y.widgets.Search.main.showMoreResults+"\x3c/a\x3e"),b=b+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsList+
'"\x3e'),b=b+('\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e'),c;for(c in h)if(h[c]){var z=h[c].length;if(z){var v=1===z&&h[c][0]===a;if(1<this._getObjectSize(h)&&!v)var d=this._getSourceName(c),b=b+('\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+d+"\x3c/div\x3e");if(z&&!v){b+="\x3cul\x3e";d=n[c].maxResults||this.maxResults;for(v=0;v<z&&v<d;++v)if(h[c][v]!==a){var f=this._getResultName(h[c][v]),b=b+('\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+v+'" data-source-index\x3d"'+
c+'" href\x3d"#"\x3e'+f+"\x3c/a\x3e\x3c/li\x3e");l++}b+="\x3c/ul\x3e"}}}b+="\x3c/div\x3e";b+="\x3c/div\x3e"}l&&(e+=b);return e},_validField:function(a,e){return a.getField(e)},_validFields:function(a,e){if(a&&e&&e.length){for(var b=0;b<e.length;b++)if(!this._validField(a,e[b]))return!1;return!0}return!1},_getCodedName:function(a,e){if(a&&a.length)for(var b=0,h=a.length;b<h;b++){var n=a[b];if(n.code===e)return n.name}},_getCodedValue:function(a,e,b){if(a&&a.length)for(var h=0,n=a.length;h<n;h++){var l=
a[h],c=l.name,z=e;b||(c=c.toLowerCase(),z=z.toLowerCase());if(c===z)return l.code}return!1},_whereClause:function(a,e,b,h){var n=null;if(a){var l="";this.reHostedFS.test(e.url)&&this._containsNonLatinCharacter(a)&&(l="N");if(b&&b.length)for(var c=0,z=b.length;c<z;c++){var v="",d=a.replace(/\'/g,"''"),v=b[c],f=e.getField(v),g=e.getDomain(v);g&&"codedValue"===g.type&&(d=this._getCodedValue(g.codedValues,d,h));!1!==d&&(f=f.type,"esriFieldTypeString"===f||"esriFieldTypeDate"===f?v=h?v+" \x3d "+l+"'"+
d+"'":"UPPER("+v+") LIKE "+l+"'%"+d.toUpperCase()+"%'":"esriFieldTypeOID"===f||"esriFieldTypeSmallInteger"===f||"esriFieldTypeInteger"===f||"esriFieldTypeSingle"===f||"esriFieldTypeDouble"===f?(d=parseFloat(d),v=isNaN(d)?!1:v+" \x3d "+d):v=v+" \x3d "+d,v&&(n=n?n+" or ":"",n+=v))}}return n},_suggest:function(a){a||(a={index:this.activeSourceIndex,text:this.value});var e=new m,n=a.index,l=this.sources[n],c=this.enableSuggestions;l.hasOwnProperty("enableSuggestions")&&(c=l.enableSuggestions);var z=0,
v;a.hasOwnProperty("text")&&a.text&&(v=b.trim(a.text),z=a.text.length);a=l.minCharacters||this.minCharacters;if(c&&v&&z>=a&&this._supportsPagination(l)){var d="";l.prefix&&(d+=l.prefix);d+=v;l.suffix&&(d+=l.suffix);var f=this._defaultSR;this.map&&(f=this.map.spatialReference);c={};if(l.locator){l.categories&&(c.categories=l.categories);l.locator.outSpatialReference=f;if(this.map&&(l.localSearchOptions&&l.localSearchOptions.hasOwnProperty("distance")&&l.localSearchOptions.hasOwnProperty("minScale"))&&
(z=this._getScale(),!l.localSearchOptions.minScale||z&&z<=parseFloat(l.localSearchOptions.minScale)))c.location=this.map.extent.getCenter(),c.distance=l.localSearchOptions.distance;c.text=d;l.useMapExtent&&(this.map&&this.map.extent)&&(c.searchExtent=this.map.extent);l.searchExtent&&(c.searchExtent=l.searchExtent);c.maxSuggestions=l.maxSuggestions||this.maxSuggestions;l.sourceCountry&&(c.countryCode=l.sourceCountry);l.countryCode&&(c.countryCode=l.countryCode);l.locator.suggestLocations(c).then(b.hitch(this,
function(a){e.resolve(a)}),b.hitch(this,function(a){a||(a=this._error("Locator suggestLocations could not be performed."));e.reject(a)}))}else l.featureLayer?this._featureLayerLoaded(l.featureLayer).then(b.hitch(this,function(){var a=this._getDisplayField(l),c=l.searchFields||[a],z=[];l.suggestionTemplate?l.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(a,e){z.push(e)}):z=[a];-1===s.indexOf(z,l.featureLayer.objectIdField)&&z.push(l.featureLayer.objectIdField);var a=this._validField(l.featureLayer,
a),v=this._validFields(l.featureLayer,z),F=this._validFields(l.featureLayer,c);if(!a||!v||!F)e.reject(this._error("Invalid FeatureLayer field"));else{a=new h;l.hasOwnProperty("suggestQueryParams")&&b.mixin(a,l.suggestQueryParams);a.outSpatialReference=f;a.returnGeometry=!1;a.num=l.maxSuggestions||this.maxSuggestions;a.outFields=z;l.useMapExtent&&(this.map&&this.map.extent)&&(a.geometry=this.map.extent);l.searchExtent&&(a.geometry=l.searchExtent);var g;if(c=this._whereClause(d,l.featureLayer,c,!1))a.where=
c,g=!0;g?l.featureLayer.queryFeatures(a,b.hitch(this,function(a){var b;(a=a.features)&&(b=this._hydrateResults(a,n,!0));e.resolve(b)}),b.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures errored with suggestions"));e.reject(a)})):e.resolve()}})):e.reject(this._error("Invalid source"))}else e.resolve();return e.promise},_supportsPagination:function(a){var e;a.locator?e=!0:a.featureLayer&&a.featureLayer.advancedQueryCapabilities&&a.featureLayer.advancedQueryCapabilities.supportsPagination&&
(e=!0);return e},_suggestQueries:function(a){var e=this.sources,b=this.activeSourceIndex,h=[],n;if(b===this._allIndex)for(b=0;b<e.length;b++)n=a,n.index=b,n=this._suggest(n),h.push(n);else a.index=b,n=this._suggest(a),h.push(n);return Q(h)},_getPointFromGeometry:function(a){var e;switch(a.type){case "extent":e=a.getCenter();break;case "multipoint":e=a.getExtent().getCenter();break;case "point":e=a;break;case "polygon":e=a.getExtent().getCenter();break;case "polyline":e=a.getExtent().getCenter()}return e},
_searchQueries:function(a){a.hasOwnProperty("index")||(a.index=this.activeSourceIndex);var e=[],b;if(a.index===this._allIndex)for(var h=this.sources,n=0;n<h.length;n++)b=a,b.index=n,b=this._search(b),e.push(b);else a=this._search(a),e.push(a);return Q(e)},_searchButton:function(){this.enableButtonMode&&!this.expanded?(this.expand(),G.focus(this.inputNode)):(this._cancelSuggest(),this.search())},_search:function(a){a||(a={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,
latlon:null});var e,n=new m,c=a.index,z=this.sources[c],v;a.hasOwnProperty("text")&&a.text&&(v=b.trim(a.text));if(z){var d="";z.prefix&&!a.magicKey&&(d+=z.prefix);d+=v;z.suffix&&!a.magicKey&&(d+=z.suffix);var f=this._defaultSR;this.map&&(f=this.map.spatialReference);if(z.locator)if(a.hasOwnProperty("text")&&v){var g={};z.categories&&(g.categories=z.categories);f&&(z.locator.outSpatialReference=f);if(this.map&&z.localSearchOptions&&z.localSearchOptions.hasOwnProperty("distance")&&z.localSearchOptions.hasOwnProperty("minScale")){var k=
this._getScale();if(!z.localSearchOptions.minScale||k&&k<=parseFloat(z.localSearchOptions.minScale))g.location=this.map.extent.getCenter(),g.distance=z.localSearchOptions.distance}g.address={};g.maxLocations=z.maxResults||this.maxResults;z.useMapExtent&&(this.map&&this.map.extent)&&(g.searchExtent=this.map.extent);z.searchExtent&&(g.searchExtent=z.searchExtent);z.sourceCountry&&(g.countryCode=z.sourceCountry);z.countryCode&&(g.countryCode=z.countryCode);a.magicKey&&(g.magicKey=a.magicKey);z.singleLineFieldName?
g.address[z.singleLineFieldName]=d:g.address["Single Line Input"]=d;z.outFields&&(g.outFields=z.outFields);z.locator.addressToLocations(g).then(b.hitch(this,function(a){a=this._hydrateResults(a,c,!1);n.resolve(a)}),b.hitch(this,function(a){a||(a=this._error("Locator addressToLocations could not be performed"));n.reject(a)}))}else a.geometry?(e=this._getPointFromGeometry(a.geometry.geometry))?this._reverseGeocodePoint(c,e).then(function(a){n.resolve(a)},function(a){n.reject(a)}):n.reject(this._error("Invalid point to reverse geocode")):
a.point?this._reverseGeocodePoint(c,a.point).then(function(a){n.resolve(a)},function(a){n.reject(a)}):a.latlon?(g=new K(a.latlon,this._defaultSR),this._reverseGeocodePoint(c,g).then(function(a){n.resolve(a)},function(a){n.reject(a)})):a.hasOwnProperty("text")&&!v?n.resolve([]):n.reject(this._error("Invalid query type for Locator"));else z.featureLayer?this._featureLayerLoaded(z.featureLayer).then(b.hitch(this,function(){var g=this._getDisplayField(z),k=z.searchFields||[g],g=this._validField(z.featureLayer,
g),m=this._validFields(z.featureLayer,k);if(!g||!m)n.reject(this._error("Invalid FeatureLayer field"));else{g=new h;z.hasOwnProperty("searchQueryParams")&&b.mixin(g,z.searchQueryParams);if(f&&(g.outSpatialReference=f,m=l.getUnitValueForSR(f)))g.maxAllowableOffset=m;g.returnGeometry=!0;z.outFields&&(g.outFields=z.outFields);var r;a.hasOwnProperty(this._objectIdIdentifier)||(this._supportsPagination(z)&&(g.num=z.maxResults||this.maxResults),z.useMapExtent&&(this.map&&this.map.extent)&&(g.geometry=this.map.extent),
z.searchExtent&&(g.geometry=z.searchExtent),r=z.exactMatch);a.hasOwnProperty("text")&&v?(k=this._whereClause(d,z.featureLayer,k,r))?(g.where=k,k=!0):k=!1:a.hasOwnProperty(this._objectIdIdentifier)?(g.objectIds=[a[this._objectIdIdentifier]],k=!0):a.geometry?(g.geometry=a.geometry,k=!0):a.point?(g.geometry=a.point,k=!0):a.latlon?(e=new K(a.latlon,this._defaultSR),g.geometry=e,k=!0):(a.hasOwnProperty("text")&&!v?n.resolve([]):n.reject(this._error("Invalid query type for FeatureLayer")),k=!1);k?z.featureLayer.queryFeatures(g,
b.hitch(this,function(a){a=a.features;var e;a&&(e=this._hydrateResults(a,c,!1));n.resolve(e)}),b.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures could not be performed"));n.reject(a)})):n.resolve()}})):n.reject(this._error("Invalid source"))}else n.reject(this._error("Source is undefined"));return n.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(a,e,b){b={activeSourceIndex:e,value:b,numResults:0,numErrors:0,errors:null,
results:null};var h={},n={};if(a)if(e===this._allIndex)for(e=0;e<a.length;e++)a[e]&&(a[e]instanceof Error?(h[e]=a[e],b.numErrors++):(n[e]=a[e],b.numResults+=a[e].length));else a[0]&&(a[0]instanceof Error?(h[e]=a[0],b.numErrors++):(n[e]=a[0],b.numResults+=a[0].length));b.numErrors&&(b.errors=h);b.numResults&&(b.results=n);return b},_reverseGeocodePoint:function(a,e){var h=new m,n=this.sources[a];if(e&&n){var l=n.locationToAddressDistance||this.locationToAddressDistance;n.locator.outSpatialReference=
this._defaultSR;this.map&&(n.locator.outSpatialReference=this.map.spatialReference);n.locator.locationToAddress(e,l,b.hitch(this,function(e){e=this._hydrateResults([e],a,!1);h.resolve(e)}),b.hitch(this,function(a){a||(a=this._error("Locator locationToAddress could not be performed"));h.reject(a)}))}else h.reject(this._error("No point or source defined for reverse geocoding"));return h.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var a=0;a<this._deferreds.length;a++)this._deferreds[a].cancel(this.declaredClass+
" cancelling request");this._deferreds=[]},_sourceBtnKey:function(a){if(a){var e=f("li",this.sourcesNode);a.keyCode===k.UP_ARROW?(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),(a=e.length)&&G.focus(e[a-1])):a.keyCode===k.DOWN_ARROW&&(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),e[0]&&G.focus(e[0]))}},_inputKey:function(a){if(a){var e=f("li",this.suggestionsNode),b=this.suggestResults;if(a.keyCode===k.TAB||a.keyCode===k.ESCAPE)this._cancelSuggest(),this._hideMenus();
else if(a.keyCode===k.UP_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),b&&this._showSuggestionsMenu(),(a=e.length)&&G.focus(e[a-1]);else if(a.keyCode===k.DOWN_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),b&&this._showSuggestionsMenu(),e[0]&&G.focus(e[0]);else{if(a.ctrlKey||a.metaKey||a.keyCode===k.copyKey||a.keyCode===k.LEFT_ARROW||a.keyCode===k.RIGHT_ARROW||a.keyCode===k.ENTER)return a;this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();
this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(b.hitch(this,function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this.set("magicKey",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},_getSourceName:function(a){var e=this.sources[a];a=e.name;var b=e.featureLayer;if(!a&&b){a=b.name||y.widgets.Search.main.untitledSource;
for(var e=e.searchFields||[this._getDisplayField(e)],h=0;h<e.length;h++){a=0===h?a+": ":a+", ";var n=e[h],l=b.getField(n);a+=l&&l.alias||n}}return a||y.widgets.Search.main.untitledSource},_insertSuggestions:function(a,e){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var b,h=this.sources;if(a){b=x.create("div");for(var n in a)if(a[n]&&a[n].length){var l=this._getSourceName(n);1<h.length&&this.activeSourceIndex===this._allIndex&&x.create("div",
{className:this.css.searchMenuHeader,textContent:l},b);for(var l=x.create("ul",{role:"menu"},b),c=h[n].maxSuggestions||this.maxSuggestions,z=0;z<a[n].length&&z<c;++z)for(var v=x.create("li",{"data-index":z,"data-source-index":n,role:"menuitem",tabindex:0},l),d=RegExp("("+e+")","gi"),d=this._getSuggestionName(a[n][z]).replace(d,"|$1|").split("|"),f=d.length,g=0;g<f;g++){var k=d[g];k.toLowerCase()===e.toLowerCase()?x.create("strong",{textContent:k},v):(k=document.createTextNode(k),x.place(k,v))}}}b?
(x.place(b,this.suggestionsNode,"only"),this._showSuggestionsMenu()):(x.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(a){if(this.enableSourcesMenu&&a&&1<a.length){var e,b,h=this.activeSourceIndex,n=x.create("ul",{role:"menu"});this.enableSearchingAll&&(e="",h===this._allIndex&&(e="active"),x.create("li",{"data-index":this._allIndex,role:"menuitem",className:e,tabIndex:0,textContent:y.widgets.Search.main.all},n));for(b=0;b<a.length;b++){e="";b===h&&(e=this.css.activeSource);
var l=this._getSourceName(b);x.create("li",{"data-index":b,role:"menuitem",className:e,tabIndex:0,textContent:l},n)}u.add(this.containerNode,this.css.hasMultipleSources);x.place(n,this.sourcesNode,"only")}else u.remove(this.containerNode,this.css.hasMultipleSources),x.empty(this.sourcesNode)},_showLoading:function(){u.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){u.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(u.add(this.containerNode,
this.css.hasValue),d.set(this.clearNode,"title",y.widgets.Search.main.clearButtonTitle)):this.clear()},_closePopup:function(){this.enableInfoWindow&&(this.map&&this.map.infoWindow)&&this.map.infoWindow.hide()},_noResults:function(a){var e;a&&(e=b.trim(a));var h=x.create("div",{className:this.css.searchNoResultsBody});a&&e?(x.create("div",{className:this.css.searchNoResultsHeader,textContent:y.widgets.Search.main.noResults},h),x.create("div",{className:this.css.searchNoResultsText,textContent:I.substitute({value:'"'+
a+'"'},y.widgets.Search.main.noResultsFound)},h)):(a=x.create("div",{},h),x.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},a),x.create("span",{className:this.css.searchNoValueText,textContent:y.widgets.Search.main.emptyValue},a));x.place(h,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){u.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();
this._hideSuggestionsMenu();u.add(this.containerNode,this.css.showNoResults)},_hideSourcesMenu:function(){u.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){u.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();u.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();u.add(this.containerNode,this.css.showSuggestions)},
_toggleSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();u.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(a){if(a&&(a=a.fields)&&a.length)for(var e=0;e<a.length;e++){var b=a[e];if("esriFieldTypeString"===b.type)return b.name}return""},_getDisplayField:function(a){return a.displayField||a.featureLayer.displayField||this._getFirstStringField(a.featureLayer)},_validExtent:function(a){return a&&a.xmin&&"NaN"!==a.xmin&&a.ymin&&"NaN"!==a.ymin&&
a.xmax&&"NaN"!==a.xmax&&a.ymax&&"NaN"!==a.ymax?!0:!1},_hydrateResult:function(a,e,b){var h={},n=this._defaultSR,c;e=this.sources[e];this.map&&(n=this.map.spatialReference);if(a.hasOwnProperty("text")&&a.hasOwnProperty("magicKey"))return a;if(a.hasOwnProperty("geometry"))c=new L(a.toJson()),h.feature=c,(c=h.feature.geometry)&&c.setSpatialReference(n);else if(a.hasOwnProperty("location")){var z=new K(a.location.x,a.location.y,n);c={};a.hasOwnProperty("attributes")&&(c=a.attributes);a.hasOwnProperty("score")&&
(c.score=a.score);h.feature=new L(z,null,c,null)}else h.feature=null;if(a.hasOwnProperty("extent")&&this._validExtent(a.extent))h.extent=new C(a.extent),h.extent.setSpatialReference(n);else if(h.feature&&h.feature.geometry)switch(h.feature.geometry.type){case "extent":h.extent=h.feature.geometry;break;case "multipoint":h.extent=h.feature.geometry.getExtent();break;case "polygon":h.extent=h.feature.geometry.getExtent();break;case "polyline":h.extent=h.feature.geometry.getExtent();break;case "point":this.map?
(n=this.zoomScale,e&&e.zoomScale&&(n=e.zoomScale),this._getScale()>n?h.extent=l.getExtentForScale(this.map,n).centerAt(h.feature.geometry):h.extent=this.map.extent.centerAt(h.feature.geometry)):h.extent=new C({xmin:h.feature.geometry.x-0.25,ymin:h.feature.geometry.y-0.25,xmax:h.feature.geometry.x+0.25,ymax:h.feature.geometry.y+0.25,spatialReference:this._defaultSR})}else h.extent=null;h.name="";e.featureLayer?e.suggestionTemplate&&b?h.name=I.substitute(a.attributes,e.suggestionTemplate):e.searchTemplate?
h.name=I.substitute(a.attributes,e.searchTemplate):(b=this._getDisplayField(e),e=e.featureLayer.getDomain(b),b&&(a.hasOwnProperty("attributes")&&a.attributes.hasOwnProperty(b))&&(a=a.attributes[b],h.name=e&&"codedValue"===e.type?this._getCodedName(e.codedValues,a):a)):a.address&&e.searchTemplate?h.name=I.substitute(a.address,e.searchTemplate):a.hasOwnProperty("name")?h.name=a.name:a.hasOwnProperty("attributes")&&"object"===typeof a.attributes&&a.attributes.Match_addr?(h.name=a.attributes.Match_addr,
a.attributes.Addr_type&&("POI"===a.attributes.Addr_type&&a.attributes.StAddr&&a.attributes.City)&&(h.name+=" - "+a.attributes.StAddr+", "+a.attributes.City)):a.hasOwnProperty("address")&&"string"===typeof a.address?h.name=a.address:a.hasOwnProperty("address")&&"object"===typeof a.address&&a.address.hasOwnProperty("Address")?h.name=a.address.Address:h.feature&&h.feature.geometry&&(h.name=h.feature.geometry.x+","+h.feature.geometry.y);return h},_getScale:function(){var a;this.map&&"function"===typeof this.map.getScale&&
(a=this.map.getScale());return a},_hydrateResults:function(a,e,b,h){h=[];var n=0;if(a&&a.length)for(n;n<a.length;n++){var l=this._hydrateResult(a[n],e,b);h.push(l)}return h},_containsNonLatinCharacter:function(a){for(var e=0;e<a.length;e++)if(255<a.charCodeAt(e))return!0;return!1},_setPlaceholder:function(a){var e="",b=this.sources[a];a===this._allIndex?e=this.allPlaceholder||y.widgets.Search.main.allPlaceholder:b&&b.placeholder&&(e=b.placeholder);var h=y.widgets.Search.main.all;b&&(h=this._getSourceName(a));
d.set(this.sourceNameNode,"textContent",h);d.set(this.inputNode,"placeholder",e);d.set(this.inputNode,"title",e)},_updateActiveSource:function(){var a=this.sources,e=this.activeSourceIndex,b;a&&a[e]&&(b=a[e]);b?this.set("activeSource",b):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(a){a?(u.toggle(this.containerNode,this.css.searchExpanded,this.expanded),u.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),
u.add(this.containerNode,this.css.hasButtonMode)):(u.remove(this.containerNode,this.css.searchExpanded),u.remove(this.containerNode,this.css.searchCollapsed),u.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(){var a=this.sources;a&&1===a.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(a){this._set("enableSourcesMenu",a);this._created&&this._insertSources(this.sources)},
_setEnableSearchingAllAttr:function(a){this._set("enableSearchingAll",a);this._created&&(this._setDefaultActiveSourceIndex(),this._hideMenus(),this._insertSources(this.sources))},_setSourcesAttr:function(a){this._set("sources",a);this._created&&(this._setDefaultActiveSourceIndex(),this._hideMenus(),this._insertSources(a))},_setAllPlaceholderAttr:function(a){this._set("allPlaceholder",a);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(a){this._set("activeSourceIndex",
a);this._updateActiveSource();this._created&&(this._setPlaceholder(a),this._hideMenus(),this._insertSources(this.sources))},_setMaxLengthAttr:function(a){this._set("maxLength",a);this._created&&d.set(this.inputNode,"maxLength",a)},_setValueAttr:function(a){this.set("magicKey",null);this._set("value",a);this._created&&(d.set(this.inputNode,"value",a),this._checkStatus())},_setVisibleAttr:function(a){this._set("visible",a);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(a){this._set("enableButtonMode",
a);this._created&&this._updateButtonMode(a)},_setThemeAttr:function(a){this._created&&(u.remove(this.domNode,this.theme),u.add(this.domNode,a));this._set("theme",a)}});a("extend-esri")&&b.setObject("dijit.Search",t,J);return t})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(q,t,b){var s=q.forEach;return function(r){function m(a,b){f[b]=a;d.progress([a,b]);0===--q&&d.resolve(f)}var k,g;r instanceof Array?g=r:r&&"object"===typeof r&&(k=r);var f,a=[];
if(k){g=[];for(var c in k)Object.hasOwnProperty.call(k,c)&&(a.push(c),g.push(k[c]));f={}}else g&&(f=[]);if(!g||!g.length)return(new t).resolve(f);var d=new t;d.promise.always(function(){f=a=null});var q=g.length;s(g,function(c,d){k||a.push(d);b(c,function(b){m(b,a[d])},function(b){m(b,a[d])})});return d.promise}})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c){q=q(a,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(a){this._geocodeHandler=t.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=t.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=t.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},
outSpatialReference:null,setOutSpatialReference:function(a){this.outSpatialReference=a},_geocodeHandler:function(a,b,f,g,k){try{var m=a.candidates,r;b=[];var q,s=m.length,t=a.spatialReference,G;for(q=0;q<s;q++){r=m[q];if(G=r.location)G.spatialReference=t;b[q]=new c(r)}this._successHandler([b],"onAddressToLocationsComplete",f,k)}catch(I){this._errorHandler(I,g,k)}},_geocodeAddressesHandler:function(a,b,f,g,k){try{var m=a.locations;b=[];var r,q=m.length,s=a.spatialReference,t;for(r=0;r<q;r++){if(t=
m[r].location)t.spatialReference=s;b[r]=new c(m[r])}this._successHandler([b],"onAddressesToLocationsComplete",f,k)}catch(G){this._errorHandler(G,g,k)}},addressToLocations:function(a,b,c,k,m){var q,E,D,A,H,G,I;a.address&&(k=c,c=b,b=a.outFields,m=a.searchExtent,I=a.countryCode,q=a.magicKey,E=a.distance,G=a.categories,a.location&&this.normalization&&(D=a.location.normalize()),A=a.maxLocations,H=a.forStorage,a=a.address);m&&(m=m.shiftCentralMeridian());var M=this.outSpatialReference;a=this._encode(t.mixin({},
this._url.query,a,{f:"json",outSR:M&&r.toJson(M.toJson()),outFields:b&&b.join(",")||null,searchExtent:m&&r.toJson(m.toJson()),category:G&&G.join(",")||null,countryCode:I||null,magicKey:q||null,distance:E||null,location:D||null,maxLocations:A||null,forStorage:H||null}));var J=this._geocodeHandler,S=this._errorHandler,L=new s(f._dfdCanceller);L._pendingDfd=g({url:this._url.path+"/findAddressCandidates",content:a,callbackParamName:"callback",load:function(a,b){J(a,b,c,k,L)},error:function(a){S(a,k,L)}});
return L},suggestLocations:function(a){var b;b=new s(f._dfdCanceller);a.hasOwnProperty("location")&&this.normalization&&(a.location=a.location.normalize());a.searchExtent&&(a.searchExtent=a.searchExtent.shiftCentralMeridian());a=this._encode(t.mixin({},this._url.query,{f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:a.searchExtent&&r.toJson(a.searchExtent.toJson()),category:a.categories&&a.categories.join(",")||null,countryCode:a.countryCode||null,location:a.location||null,distance:a.distance||
null},{f:"json"}));a=g({url:this._url.path+"/suggest",content:a,callbackParamName:"callback"});b._pendingDfd=a;a.then(t.hitch(this,function(a){a=a.suggestions||[];this.onSuggestLocationsComplete(a);b.resolve(a)}),t.hitch(this,function(a){this._errorHandler(a);b.reject(a)}));return b},addressesToLocations:function(a,c,k){var m=this.outSpatialReference,q=[],w=a.categories,E=a.countryCode;b.forEach(a.addresses,function(a,b){q.push({attributes:a})});a=this._encode(t.mixin({},this._url.query,{category:w&&
w.join(",")||null,sourceCountry:E||null},{addresses:r.toJson({records:q})},{f:"json",outSR:m&&r.toJson(m.toJson())}));var D=this._geocodeAddressesHandler,A=this._errorHandler,H=new s(f._dfdCanceller);H._pendingDfd=g({url:this._url.path+"/geocodeAddresses",content:a,callbackParamName:"callback",load:function(a,b){D(a,b,c,k,H)},error:function(a){A(a,k,H)}});return H},_reverseGeocodeHandler:function(a,b,f,g,k){try{var m=new c({address:a.address,location:a.location,score:100});this._successHandler([m],
"onLocationToAddressComplete",f,k)}catch(r){this._errorHandler(r,g,k)}},locationToAddress:function(a,b,c,k){a&&this.normalization&&(a=a.normalize());var m=this.outSpatialReference;a=this._encode(t.mixin({},this._url.query,{outSR:m&&r.toJson(m.toJson()),location:a&&r.toJson(a.toJson()),distance:b,f:"json"}));var q=this._reverseGeocodeHandler,E=this._errorHandler,D=new s(f._dfdCanceller);D._pendingDfd=g({url:this._url.path+"/reverseGeocode",content:a,callbackParamName:"callback",load:function(a,b){q(a,
b,c,k,D)},error:function(a){E(a,k,D)}});return D},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});m("extend-esri")&&t.setObject("tasks.Locator",q,k);return q})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(b){t.mixin(this,
b);this.location=new r(this.location)}});b("extend-esri")&&t.setObject("tasks.AddressCandidate",q,s);return q})},"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../Color"],function(q,t,b,s,r){function m(a,b){var f;if(a)switch(f={},f.color=new r(a.color),f.opacity=a.opacity||1,b){case "point":f.outline={color:new r(a.outline.color),width:a.outline.width};f.size=a.size;break;case "line":f.width=a.width;break;case "polygon":f.outline={color:new r(a.outline.color),
width:a.outline.width}}return f}function k(a){"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?a="point":"esriGeometryPolyline"===a?a="line":"esriGeometryPolygon"===a&&(a="polygon");return a}var g={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),dark:["satellite","hybrid","dark-gray"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,
255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],
width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,1],width:1},opacity:0.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,1],width:1},opacity:0.8},{color:[255,255,255,1],outline:{color:[128,128,128,1],width:1},opacity:0.8}]},dark:{primary:{color:[227,139,79,1],outline:{color:[51,51,51,1],width:1},
opacity:0.8},secondary:[{color:[178,178,178,1],outline:{color:[51,51,51,1],width:1},opacity:0.8},{color:[26,26,26,1],outline:{color:[128,128,128,1],width:1},opacity:0.8}]}}}},f={};(function(){var a,b,k,m,r,q,s,t;for(a in g)for(m in b=g[a],k=b.basemapGroups,r=f[a]={basemaps:[].concat(k.light).concat(k.dark),point:{},line:{},polygon:{}},k){q=k[m];for(s=0;s<q.length;s++)t=q[s],b.pointSchemes&&(r.point[t]=b.pointSchemes[m]),b.lineSchemes&&(r.line[t]=b.lineSchemes[m]),b.polygonSchemes&&(r.polygon[t]=b.polygonSchemes[m])}})();
var a={getAvailableThemes:function(a){var b=[],k,m,r;for(k in g)m=g[k],r=f[k],a&&-1===q.indexOf(r.basemaps,a)||b.push({name:m.name,label:m.label,description:m.description,basemaps:r.basemaps.slice(0)});return b},getSchemes:function(a){var b=a.theme,g=a.basemap,r=k(a.geometryType);a=f[b];var s;(a=(a=a&&a[r])&&a[g])&&(s={primaryScheme:m(a.primary,r),secondarySchemes:q.map(a.secondary,function(a){return m(a,r)})});return s},cloneScheme:function(a){var b;a&&(b=t.mixin({},a),b.color&&(b.color=new r(b.color)),
b.outline&&(b.outline={color:b.outline.color&&new r(b.outline.color),width:b.outline.width}));return b}};b("extend-esri")&&t.setObject("styles.basic",a,s);return a})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(q,t,b,s){q=new q;t.id=s.safeMixin(q,b);return t.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){t=t([x],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(a){r.mixin(this,a);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(a,c,d){this._nls||(this._nls=y.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var f=this._loginDialog,g=d&&d.error,m=d&&d.token,r=new s(function(){f.onCancel()});if(f.open)return a=Error("BUSY"),a.code="IdentityManager.1",a.log=b.isDebug,r.errback(a),r;u.hide(f.errMsg_);g&&(403==g.code&&m)&&(k.set(f.errMsg_,"innerHTML",this._nls.forbidden),u.show(f.errMsg_));f.dfd_=
r;f.serverInfo_=c;f.resUrl_=a;f.admin_=d&&d.isAdmin;k.set(f.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"});k.set(f.serverLink_,{title:c.server,innerHTML:(-1!==c.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":c.server)+" "});f.txtPwd_.set("value","");f.show();return r},_createLoginDialog:function(){var m=this._nls,r=d.substitute(m,this._dialogContent),r=d.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},r),s=new a({title:m.title,content:r,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(a){a.charOrCode===g.ENTER&&this.execute_()},execute_:function(){var b=this.txtUser_.get("value"),f=this.txtPwd_.get("value"),g=this.dfd_,r=this;if(this.form_.validate()&&b&&f){this.btnSubmit_.set("label",m.lblSigning);var q=c.id.findCredential(r.resUrl_,b),s=function(c){r.btnSubmit_.set("label",
m.lblOk);r.btnSubmit_.set("disabled",!1);u.hide(r.errMsg_);r.hide();a._DialogLevelManager.hide(r);var f=r.serverInfo_;r.dfd_=r.serverInfo_=r.generateDfd_=r.resUrl_=null;var k,s,t=q,x;c&&(k=c.token,s=d.isDefined(c.expires)?Number(c.expires):null,x=!!c.ssl,t?(t.userId=b,t.token=k,t.expires=s,t.validity=c.validity,t.ssl=x,t.creationTime=(new Date).getTime()):t=new B({userId:b,server:f.server,token:k,expires:s,ssl:x,isAdmin:r.admin_,validity:c.validity}));g.callback(t)};q&&!q._enqueued?s():(r.btnSubmit_.set("disabled",
!0),r.generateDfd_=c.id.generateToken(this.serverInfo_,{username:b,password:f},{isAdmin:this.admin_}).addCallback(s).addErrback(function(a){r.btnSubmit_.set("disabled",!1);r.generateDfd_=null;r.btnSubmit_.set("label",m.lblOk);k.set(r.errMsg_,"innerHTML",a&&a.code?m.invalidUser:m.noAuthService);u.show(r.errMsg_)}))}},cancel_:function(){s.generateDfd_&&s.generateDfd_.cancel();var c=s.dfd_,d=s.resUrl_,f=s.serverInfo_;s.btnSubmit_.set("disabled",!1);s.dfd_=s.serverInfo_=s.generateDfd_=s.resUrl_=null;
u.hide(s.errMsg_);a._DialogLevelManager.hide(s);s.esriIdMgr_.onDialogCancel({resourceUrl:d,serverInfo:f});d=Error("ABORTED");d.code="IdentityManager.2";d.log=b.isDebug;c.errback(d)}}),r=s.domNode;s.form_=f.byNode(q.query(".esriIdForm",r)[0]);s.txtUser_=f.byNode(q.query(".esriIdUser",r)[0]);s.txtPwd_=f.byNode(q.query(".esriIdPwd",r)[0]);s.btnSubmit_=f.byNode(q.query(".esriIdSubmit",r)[0]);s.btnCancel_=f.byNode(q.query(".esriIdCancel",r)[0]);s.resLink_=q.query(".resLink",r)[0];s.serverLink_=q.query(".serverLink",
r)[0];s.errMsg_=q.query(".esriErrorMsg",r)[0];s.connect(s.txtUser_,"onKeyPress",s.keypressed_);s.connect(s.txtPwd_,"onKeyPress",s.keypressed_);s.connect(s.btnSubmit_,"onClick",s.execute_);s.connect(s.btnCancel_,"onClick",s.onCancel);s.connect(s,"onCancel",s.cancel_);return s}});m("extend-esri")&&(c.IdentityManagerDialog=c.IdentityManager=t);return t})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S,L,Q,R,X){function V(){}var O=new r;O.resolve(!0);H=s("dijit._DialogBase"+(y("dojo-bidi")?"_NoBidi":""),[I,J,S,M],{templateString:X,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:H.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=c.getLocalization("dijit","common");u.mixin(this,a);this.inherited(arguments)},postCreate:function(){f.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);b.after(this,"onExecute",u.hitch(this,"hide"),!0);b.after(this,"onCancel",u.hitch(this,"hide"),!0);this._modalconnects=
[]},onLoad:function(){this.resize();this._position();this.autofocus&&v.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();A.focus(this._firstFocusItem)},_endDrag:function(){var a=g.position(this.domNode),b=w.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?
(this._moveable=new (6==y("ie")?D:E)(a,{handle:this.titleBar}),b.after(this._moveable,"onMoveStop",u.hitch(this,"_endDrag"),!0)):k.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":t.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:u.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!k.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=w.getBox(this.ownerDocument),
e=this._relativePosition,h=g.position(a),n=Math.floor(b.l+(e?Math.min(e.x,b.w-h.w):(b.w-h.w)/2)),b=Math.floor(b.t+(e?Math.min(e.y,b.h-h.h):(b.h-h.h)/2));f.set(a,{left:n+"px",top:b+"px"})}},_onKey:function(a){if(a.keyCode==d.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(A.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b==this._lastFocusItem&&!a.shiftKey&&(A.focus(this._firstFocusItem),
a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==d.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return O.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),v.hide(this));var b=w.get(this.ownerDocument);this._modalconnects.push(B(b,"scroll",u.hitch(this,"resize",null)));this._modalconnects.push(B(this.domNode,"keydown",
u.hitch(this,"_onKey")));f.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var l;this._fadeInDeferred=new r(u.hitch(this,function(){l.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,V);b=this._fadeInDeferred.promise;l=a.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:u.hitch(this,function(){v.show(this,this.underlayAttrs)}),onEnd:u.hitch(this,function(){this.autofocus&&v.isTop(this)&&(this._getFocusItems(),
A.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return b},hide:function(){if(!this._alreadyInitialized||!this.open)return O.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var b;this._fadeOutDeferred=new r(u.hitch(this,function(){b.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,V);this._fadeOutDeferred.then(u.hitch(this,"onHide"));var l=this._fadeOutDeferred.promise;b=a.fadeOut({node:this.domNode,duration:this.duration,
onEnd:u.hitch(this,function(){this.domNode.style.display="none";v.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var e;e=this._modalconnects.pop();)e.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return l},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),t.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&f.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=w.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var e=g.position(this.domNode);e.w>=b.w||e.h>=b.h?(a={w:Math.min(e.w,b.w),h:Math.min(e.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){g.setMarginBox(this.domNode,
a);b=[];this.titleBar&&b.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,region:"bottom"});e={domNode:this.containerNode,region:"center"};b.push(e);var h=R.marginBox2contentBox(this.domNode,a);R.layoutChildren(this.domNode,h,b);this._singleChild?(b=R.marginBox2contentBox(this.containerNode,e),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();!y("touch")&&!a&&this._position()}},
_layoutChildren:function(){t.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();v.hide(this);this.inherited(arguments)}});y("dojo-bidi")&&(H=s("dijit._DialogBase",H,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var U=s("dijit.Dialog",[Q,H],{});U._DialogBase=H;var v=U._DialogLevelManager={_beginZIndex:950,show:function(a,b){K[K.length-1].focus=A.curNode;var e=K[K.length-1].dialog?K[K.length-1].zIndex+2:U._DialogLevelManager._beginZIndex;f.set(a.domNode,"zIndex",e);L.show(b,e-1);K.push({dialog:a,underlayAttrs:b,zIndex:e})},hide:function(a){if(K[K.length-1].dialog==a){K.pop();var b=K[K.length-
1];1==K.length?L.hide():L.show(b.underlayAttrs,b.zIndex-1);if(a.refocus){a=b.focus;if(b.dialog&&(!a||!m.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(),a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(e){}}}else b=t.indexOf(t.map(K,function(a){return a.dialog}),a),-1!=b&&K.splice(b,1)},isTop:function(a){return K[K.length-1].dialog==a}},K=U._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];A.watch("curNode",function(a,b,e){a=K[K.length-1].dialog;if(e&&a&&!a._fadeOutDeferred&&
e.ownerDocument==a.ownerDocument){do if(e==a.domNode||k.contains(e,"dijitPopup"))return;while(e=e.parentNode);a.focus()}});y("dijit-legacy-requires")&&x(0,function(){q(["dijit/TooltipDialog"])});return U})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(q,t){var b=t.prototype.onMove;return q("dojo.dnd.TimedMoveable",t,{timeout:40,constructor:function(b,r){r||(r={});r.timeout&&("number"==typeof r.timeout&&0<=r.timeout)&&(this.timeout=r.timeout)},onMoveStop:function(q){q._timer&&
(clearTimeout(q._timer),b.call(this,q,q._leftTop));t.prototype.onMoveStop.apply(this,arguments)},onMove:function(q,r){q._leftTop=r;if(!q._timer){var m=this;q._timer=setTimeout(function(){q._timer=null;b.call(m,q,q._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(q,t,b,s,r,m){return t("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var g=
[];q.forEach(b||this.getChildren(),function(b){"value"in b?g.push(b):g=g.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return g},reset:function(){q.forEach(this._getDescendantFormWidgets(),function(b){b.reset&&b.reset()})},validate:function(){var b=!1;return q.every(q.map(this._getDescendantFormWidgets(),function(g){g._hasBeenBlurred=!0;var f=g.disabled||!g.validate||g.validate();!f&&!b&&(m.scrollIntoView(g.containerNode||g.domNode),g.focus(),b=!0);return f}),function(b){return b})},
setValues:function(k){b.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",k)},_setValueAttr:function(b){var g={};q.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(g[a.name]||(g[a.name]=[])).push(a)});for(var f in g)if(g.hasOwnProperty(f)){var a=g[f],c=s.getObject(f,!1,b);void 0!==c&&(c=[].concat(c),"boolean"==typeof a[0].checked?q.forEach(a,function(a){a.set("value",-1!=q.indexOf(c,a._get("value")))}):a[0].multiple?
a[0].set("value",c):q.forEach(a,function(a,b){a.set("value",c[b])}))}},getValues:function(){b.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b={};q.forEach(this._getDescendantFormWidgets(),function(g){var f=g.name;if(f&&!g.disabled){var a=g.get("value");"boolean"==typeof g.checked?/Radio/.test(g.declaredClass)?!1!==a?s.setObject(f,a,b):(a=s.getObject(f,!1,b),void 0===a&&s.setObject(f,null,b)):
(g=s.getObject(f,!1,b),g||(g=[],s.setObject(f,g,b)),!1!==a&&g.push(a)):(g=s.getObject(f,!1,b),"undefined"!=typeof g?s.isArray(g)?g.push(a):s.setObject(f,[g,a],b):s.setObject(f,a,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var b=q.map(this._descendants,function(b){return b.get("state")||""});return 0<=q.indexOf(b,"Error")?"Error":0<=q.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=
this._getDescendantFormWidgets();q.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){(!b||"state"==b||"disabled"==b)&&this._set("state",this._getState());if(!b||"value"==b||"disabled"==b||"checked"==b)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=
this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(r(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(g){g.target!=b.domNode&&b._onChildChange(g.type.replace("attrmodified-",""))}));this.watch("state",function(b,f,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(q,
t){return q("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var b=t._getTabNavigable(this.domNode);this._firstFocusItem=b.lowest||b.first||this.closeButtonNode||this.domNode;this._lastFocusItem=b.last||b.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d){var u=q("dijit.DialogUnderlay",[g,f],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){s.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(m(this.domNode,"keydown",t.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=k.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new a(this.domNode);var b=k.get(this.ownerDocument);this._modalConnects=[c.on("resize",t.hitch(this,"layout")),m(b,"scroll",
t.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});u.show=function(a,b){var c=u._singleton;!c||c._destroyed?c=d._underlay=u._singleton=new u(a):a&&c.set(a);r.set(c.domNode,"zIndex",b);c.open||c.show()};u.hide=function(){var a=
u._singleton;a&&!a._destroyed&&a.hide()};return u})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){return f("dijit.layout.ContentPane",[b,s,r],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:q._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,
b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){b=c.byId(b);for(var d=b.ownerDocument.createDocumentFragment();b.firstChild;)d.appendChild(b.firstChild);a=t.delegate(a,{content:d})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=
x.getLocalization("dijit","loading",this.lang);this.loadingMessage=m.substitute(this.loadingMessage,a);this.errorMessage=m.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&t.isFunction(a.startup))&&(a.startup(),a._started=
!0)},this)},_startChildren:function(){g.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&t.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&g.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&t.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(a){q.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(b){this.cancel();
this.onLoadDeferred=new a(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._set("href",b);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){q.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(b){this._set("href","");this.cancel();this.onLoadDeferred=new a(t.hitch(this,"cancel"));this._created&&
this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._setContent(b||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&
!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new a(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};t.isObject(this.ioArgs)&&t.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||
B.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",
!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;g.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(g.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||
u.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);this.destroyDescendants();var c=this._contentSetter;c&&c instanceof k._ContentSetter||(c=this._contentSetter=new k._ContentSetter({node:this.containerNode,_onError:t.hitch(this,this._onError),onContentError:t.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})}));var d=
t.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(t.isObject(a)&&a.domNode?a.domNode:a,d),f=this;return y(d&&d.then?d:c.parseDeferred,function(){delete f._contentSetterParams;b||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,
b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(q,t,b,s,r,m,k,g,f,a){return t("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(f.on("resize",m.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],d=!1;k("\x3e *",this.containerNode).some(function(b){var f=
g.byNode(b);f&&f.resize?a.push(f):!/script|link|style/i.test(b.nodeName)&&b.offsetHeight&&(d=!0)});this._singleChild=1==a.length&&!d?a[0]:null;b.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(b,d){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();
b&&s.setMarginBox(this.domNode,b);var f=this.containerNode;if(f===this.domNode){var g=d||{};m.mixin(g,b||{});if(!("h"in g)||!("w"in g))g=m.mixin(s.getMarginBox(f),g);this._contentBox=a.marginBox2contentBox(f,g)}else this._contentBox=s.getContentBox(f);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||s.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),
b,f=0;b=a[f++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,d=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!b.contains(a,"dijitHidden")&&d&&d.style&&"none"!=d.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(q,t,b,s,r){function m(g,f){var a=g.resize?g.resize(f):b.setMarginBox(g.domNode,f);a?r.mixin(g,a):(r.mixin(g,b.getMarginBox(g.domNode)),r.mixin(g,f))}var k={marginBox2contentBox:function(g,f){var a=s.getComputedStyle(g),c=b.getMarginExtents(g,a),d=b.getPadBorderExtents(g,a);return{l:s.toPixelValue(g,a.paddingLeft),t:s.toPixelValue(g,a.paddingTop),w:f.w-(c.w+d.w),h:f.h-(c.h+d.h)}},layoutChildren:function(b,f,a,c,d){f=
r.mixin({},f);t.add(b,"dijitLayoutContainer");a=q.filter(a,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(q.filter(a,function(a){return"center"==a.region||"client"==a.layoutAlign}));q.forEach(a,function(a){var b=a.domNode,g=a.region||a.layoutAlign;if(!g)throw Error("No region setting for "+a.id);var k=b.style;k.left=f.l+"px";k.top=f.t+"px";k.position="absolute";t.add(b,"dijitAlign"+(g.substring(0,1).toUpperCase()+g.substring(1)));b={};c&&c==a.id&&(b["top"==a.region||"bottom"==
a.region?"h":"w"]=d);"leading"==g&&(g=a.isLeftToRight()?"left":"right");"trailing"==g&&(g=a.isLeftToRight()?"right":"left");"top"==g||"bottom"==g?(b.w=f.w,m(a,b),f.h-=a.h,"top"==g?f.t+=a.h:k.top=f.t+f.h+"px"):"left"==g||"right"==g?(b.h=f.h,m(a,b),f.w-=a.w,"left"==g?f.l+=a.w:k.left=f.l+f.w+"px"):("client"==g||"center"==g)&&m(a,f)})}};r.setObject("dijit.layout.utils",k);return k})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(q,t,b,s,r,m,k){var g=0,f={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:m.empty,_setNodeContent:function(a,b){m.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=m.toDom(b,a.ownerDocument)),!b.nodeType&&t.isArrayLike(b))for(var d=b.length,f=0;f<b.length;f=d==b.length?f+1:0)m.place(b[f],a,"last");else m.place(b,a,"last");return a},_ContentSetter:s("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:q._scopeName,startup:!0,constructor:function(a,b){t.mixin(this,a||{});b=this.node=r.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",g++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);b&&this._mixin(b);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?d:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=
f._setNodeContent(a,this.content)}catch(b){var d=this.onContentError(b);try{a.innerHTML=d}catch(g){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+g.message,g)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(b.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);m.empty(this.node)},onBegin:function(){var a=
this.content;if(t.isString(a)&&(this.cleanContent&&(a=f._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+
a},_mixin:function(a){var b={},d;for(d in a)d in b||(this[d]=a[d])},_parse:function(){var a=this.node;try{var c={};b.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=k.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(f){this._onError("Content",f,"Error parsing in _ContentSetter#"+this.id)}},
_onError:function(a,b,d){a=this["on"+a+"Error"].call(this,b);d?console.error(d,b):a&&f._setNodeContent(this.node,a,!0)}}),set:function(a,b,d){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return d?(new f._ContentSetter(t.mixin(d,{content:b,node:a}))).set():f._setNodeContent(a,b,!0)}};t.setObject("dojo.html",f);return f})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],
function(q,t,b,s){q=q(s.Credential,{});t("extend-esri")&&(b.Credential=q);return q})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H){var G={},I=function(a){var b=
(new k(a.owningSystemUrl)).host;a=(new k(a.server)).host;var c=/.+\.arcgis\.com$/i;return c.test(b)&&c.test(a)},M=function(a,b){return!(!I(a)||!b||!s.some(b,function(b){return b.test(a.server)}))},J,S=q(D,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=b.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash()},_defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,
signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},
{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!1,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var b=this.serverInfos;b?(a=s.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):
this.serverInfos=a;s.forEach(a,function(a){a.owningSystemUrl&&this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var b=u.defaults.io.corsEnabledServers,c=this._getOrigin(a.tokenServiceUrl);y.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));y.canUseXhr(c)||b.push(c.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=s.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=b.concat(a)):
this.oAuthInfos=a},registerToken:function(a){var c=this._sanitizeUrl(a.server),d=this.findServerInfo(c),f=!0,g;d||(d=new x,d.server=this._getServerInstanceRoot(c),d.tokenServiceUrl=this._getTokenSvcUrl(c),d.hasPortal=!0,this.registerServers([d]));(g=this.findCredential(c,a.userId))?(b.mixin(g,a),f=!1):(g=new J({userId:a.userId,server:d.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:this._isServerRsrc(c)?"server":"portal"}),g.resources=[c],this.credentials.push(g));g.onTokenChange(!1);f||g.refreshServerTokens()},
toJson:function(){return B.fixJson({serverInfos:s.map(this.serverInfos,function(a){return a.toJson()}),oAuthInfos:s.map(this.oAuthInfos,function(a){return a.toJson()}),credentials:s.map(this.credentials,function(a){return a.toJson()})})},initialize:function(a){if(a){b.isString(a)&&(a=m.fromJson(a));var c=a.serverInfos,d=a.oAuthInfos;a=a.credentials;if(c){var f=[];s.forEach(c,function(a){a.server&&a.tokenServiceUrl&&f.push(a.declaredClass?a:new x(a))});f.length&&this.registerServers(f)}if(d){var g=
[];s.forEach(d,function(a){a.appId&&g.push(a.declaredClass?a:new H(a))});g.length&&this.registerOAuthInfos(g)}a&&s.forEach(a,function(a){a.userId&&(a.server&&a.token&&a.expires&&a.expires>(new Date).getTime())&&(a=a.declaredClass?a:new J(a),a.onTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var b;a=this._sanitizeUrl(a);s.some(this.serverInfos,function(c){this._hasSameServerInstance(c.server,a)&&(b=c);return!!b},this);return b},findOAuthInfo:function(a){var b;a=this._sanitizeUrl(a);
s.some(this.oAuthInfos,function(c){this._hasSameServerInstance(c.portalUrl,a)&&(b=c);return!!b},this);return b},findCredential:function(a,b){var c,d;a=this._sanitizeUrl(a);d=this._isServerRsrc(a)?"server":"portal";b?s.some(this.credentials,function(f){this._hasSameServerInstance(f.server,a)&&(b===f.userId&&f.scope===d)&&(c=f);return!!c},this):s.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&(-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===d)&&(c=b);return!!c},this);return c},
getCredential:function(a,c){var d,f,g=!0;B.isDefined(c)&&(b.isObject(c)?(d=!!c.token,f=c.error,g=!1!==c.prompt):d=c);a=this._sanitizeUrl(a);var k=new r(w._dfdCanceller),m=this._isAdminResource(a),v=d&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;d=d?this.findCredential(a):null;if(v||d)return g=Error("You are currently signed in as: '"+(v&&v.email||d&&d.userId)+"'. You do not have access to this resource: "+a),g.code="IdentityManagerBase.1",g.httpCode=f&&f.httpCode,g.messageCode=f?f.messageCode:
null,g.subcode=f?f.subcode:null,g.details=f?f.details:null,g.log=t.isDebug,k.errback(g),k;if(f=this._findCredential(a,c))return k.callback(f),k;if(f=this.findServerInfo(a))!f.hasServer&&this._isServerRsrc(a)&&(f._restInfoDfd=this._getTokenSvcUrl(a,!0),f.hasServer=!0);else{v=this._getTokenSvcUrl(a);if(!v)return g=Error("Unknown resource - could not find token service endpoint."),g.code="IdentityManagerBase.2",g.log=t.isDebug,k.errback(g),k;f=new x;f.server=this._getServerInstanceRoot(a);b.isString(v)?
(f.tokenServiceUrl=v,f.hasPortal=!0):(f._restInfoDfd=v,f.hasServer=!0);this.registerServers([f])}g&&(f.hasPortal&&void 0===f._selfReq&&!this._findOAuthInfo(a))&&(f._selfReq={owningTenant:c&&c.owningTenant,selfDfd:this._getPortalSelf(f.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)});return this._enqueue(a,f,c,k,m)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&
a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,c,f){var g,m,r,q,v,s,C=this._rePortalTokenSvc.test(a.tokenServiceUrl),l=new k(window.location.href.toLowerCase()),e=this._getEsriAuthCookie(),h,n=!c;q=a.shortLivedTokenValidity;var z;c&&(z=d.id.tokenValidity||q||d.id.defaultTokenValidity,z>q&&(z=q));f&&(g=f.isAdmin,m=f.serverUrl,r=f.token,s=f.ssl,a.customParameters=f.customParameters);
if(g)q=a.adminTokenServiceUrl;else{q=a.tokenServiceUrl;v=new k(q.toLowerCase());e&&(h=(h=e.auth_tier)&&h.toLowerCase());if(("web"===h||a.webTierAuth)&&f&&f.serverUrl&&!s&&"http"===l.scheme&&(y.hasSameOrigin(l.uri,q,!0)||"https"===v.scheme&&l.host===v.host&&"7080"===l.port&&"7443"===v.port))q=q.replace(/^https:/i,"http:").replace(/:7443/i,":7080");n&&C&&(q=q.replace(/\/rest/i,""))}g=b.mixin({url:q,content:b.mixin({request:"getToken",username:c&&c.username,password:c&&c.password,serverUrl:m,token:r,
expiration:z,referer:g||C?window.location.host:null,client:g?"referer":null,f:"json"},a.customParameters),handleAs:"json",callbackParamName:n?"callback":void 0},f&&f.ioArgs);f={usePost:!n,disableIdentityLookup:!0,useProxy:this._useProxy(a,f)};C||(g.withCredentials=!1);C=E(g,f);C.addCallback(function(e){if(!e||!e.token)return e=Error("Unable to generate token"),e.code="IdentityManagerBase.3",e.log=t.isDebug,e;var b=a.server;G[b]||(G[b]={});c&&(G[b][c.username]=c.password);e.validity=z;return e});C.addErrback(function(a){});
return C},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();s.forEach(a,function(a){a.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var b=
window.location.hash;if(b){"#"===b.charAt(0)&&(b=b.substring(1));var b=a.queryToObject(b),c=!1;b.access_token&&b.expires_in&&b.state&&b.hasOwnProperty("username")?(b.state=m.fromJson(b.state),this._oAuthHash=b,c=!0):b.error&&b.error_description&&"access_denied"===b.error&&(c=!0);if(c&&(!g("ie")||8<g("ie")))window.location.hash=""}},_findCredential:function(a,b){var c=-1,d,f,g,k,v=b&&b.token;d=b&&b.resource;var m=this._isServerRsrc(a)?"server":"portal",r=s.filter(this.credentials,function(e){return this._hasSameServerInstance(e.server,
a)&&e.scope===m},this);a=d||a;if(r.length)if(1===r.length)if(d=r[0],g=(f=(k=this.findServerInfo(d.server))&&k.owningSystemUrl)&&this.findCredential(f,d.userId),c=this._getIdenticalSvcIdx(a,d),v)-1!==c&&(d.resources.splice(c,1),this._removeResource(a,g));else return-1===c&&d.resources.push(a),this._addResource(a,g),d;else{var l,e;s.some(r,function(b){e=this._getIdenticalSvcIdx(a,b);return-1!==e?(l=b,g=(f=(k=this.findServerInfo(l.server))&&k.owningSystemUrl)&&this.findCredential(f,l.userId),c=e,!0):
!1},this);if(v)l&&(l.resources.splice(c,1),this._removeResource(a,g));else if(l)return this._addResource(a,g),l}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);b||s.some(this.oAuthInfos,function(c){this._isIdProvider(c.portalUrl,a)&&(b=c);return!!b},this);return b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))},_useProxy:function(a,b){return b&&
b.isAdmin&&!y.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!y.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new k(a);return a.scheme+"://"+a.host+(B.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=b.indexOf("/admin"));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&
(c=b.length-1);return-1<c?a.substring(0,c):a},_hasSameServerInstance:function(a,b){a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b},_sanitizeUrl:function(a){a=y.fixUrl(b.trim(a));var c=(u.defaults.io.proxyUrl||"").toLowerCase(),d=c?a.toLowerCase().indexOf(c+"?"):-1;-1!==d&&(a=a.substring(d+c.length+1));return y.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||
this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,b){var c;if(this._isRESTService(a)&&this._isRESTService(b)){var d=this._getSuffix(a).toLowerCase(),f=this._getSuffix(b).toLowerCase();c=d===f;c||(c=/(.*)\/(MapServer|FeatureServer).*/ig,c=d.replace(c,"$1")===f.replace(c,"$1"))}else this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:!this._isServerRsrc(a)&&(!this._isServerRsrc(b)&&this._isPortalDomain(a))&&
(c=!0);return c},_isPortalDomain:function(a){a=a.toLowerCase();var c=(new k(a)).authority,d=this._portalConfig,f=-1!==c.indexOf(this._agolSuffix);!f&&d&&(f=this._hasSameServerInstance(this._getServerInstanceRoot(d.restBaseUrl),a));if(!f){if(!this._arcgisUrl&&(d=b.getObject("esri.arcgis.utils.arcgisUrl")))this._arcgisUrl=(new k(d)).authority;this._arcgisUrl&&(f=this._arcgisUrl.toLowerCase()===c)}f||(f=s.some(this._portals,function(b){return this._hasSameServerInstance(b,a)},this));return f=f||this._agsPortal.test(a)},
_isIdProvider:function(a,b){var c=-1,d=-1;s.forEach(this._gwDomains,function(v,f){-1===c&&v.regex.test(a)&&(c=f);-1===d&&v.regex.test(b)&&(d=f)});var f=!1;if(-1<c&&-1<d)if(0===c||4===c){if(0===d||4===d)f=!0}else if(1===c){if(1===d||2===d)f=!0}else 2===c?2===d&&(f=!0):3===c&&3===d&&(f=!0);if(!f){var g=this.findServerInfo(b),k=g&&g.owningSystemUrl;k&&(I(g)&&this._isPortalDomain(k)&&this._isIdProvider(a,k))&&(f=!0)}return f},_isPublic:function(a){a=this._sanitizeUrl(a);return s.some(this._publicUrls,
function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var c=-1;s.some(b.resources,function(b,d){return this._isIdenticalService(a,b)?(c=d,!0):!1},this);return c},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,c;if((b=this._isRESTService(a))||this._isAdminResource(a))return c=a.toLowerCase().indexOf(b?this._agsRest:"/admin/"),b=a.substring(0,c)+"/admin/generateToken",a=a.substring(0,c)+"/rest/info",c=
E({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),c.adminUrl_=b,c;if(this._isPortalDomain(a)){var d="";s.some(this._gwDomains,function(b){b.regex.test(a)&&(d=b.tokenServiceUrl);return!!d});d||s.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(d=b+this._gwTokenUrl);return!!d},this);d||(c=a.toLowerCase().indexOf("/sharing"),-1!==c&&(d=a.substring(0,c)+this._gwTokenUrl));d||(d=this._getOrigin(a)+this._gwTokenUrl);d&&(b=(new k(a)).port,/^http:\/\//i.test(a)&&
"7080"===b&&(d=d.replace(/:7080/i,":7443")),d=d.replace(/http:/i,"https:"));return d}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return E({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},
_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;if(f.isSupported()){var b=this._getAllCookies("esri_auth"),c;for(c=0;c<b.length;c++){var d=m.fromJson(b[c]);if(d.portalApp){a=d;break}}}return a},_getAllCookies:function(a){var b=[],d=document.cookie.match(RegExp("(?:^|; )"+c.escapeString(a)+"\x3d([^;]*)","g"));if(d)for(a=0;a<d.length;a++){var f=d[a],g=f.indexOf("\x3d");-1<g&&(f=f.substring(g+1),b.push(decodeURIComponent(f)))}return b},_doPortalSignIn:function(a){if(f.isSupported()){var b=
this._getEsriAuthCookie(),c=this._portalConfig,d=window.location.href,g=this.findServerInfo(a);if(this.useSignInPage&&(c||this._isPortalDomain(d)||b)&&(g?g.hasPortal||g.owningSystemUrl&&this._isPortalDomain(g.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(d,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||y.hasSameOrigin(d,a,!0)))return!0}return!1},_checkProtocol:function(a,c,d,f){var g=!0;f=f?c.adminTokenServiceUrl:
c.tokenServiceUrl;if(0===b.trim(f).toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&(!u.defaults.io.useCors||!y.canUseXhr(f)&&!y.canUseXhr(y.getProxyUrl(!0).path)))g=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:c}):!1,g||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.code="IdentityManagerBase.4",a.log=t.isDebug,d(a));return g},_enqueue:function(a,b,c,d,f,g){d||(d=new r(w._dfdCanceller));d.resUrl_=
a;d.sinfo_=b;d.options_=c;d.admin_=f;d.refresh_=g;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(d)):this._xoReqs.push(d):this._doSignIn(d);return d},_doSignIn:function(a){this._busy=a;var c=this,d=function(b){var l=a.options_&&a.options_.resource,e=a.resUrl_,h=a.refresh_,n=!1;-1===s.indexOf(c.credentials,b)&&(h&&-1!==s.indexOf(c.credentials,h)?(h.userId=b.userId,
h.token=b.token,h.expires=b.expires,h.validity=b.validity,h.ssl=b.ssl,h.creationTime=b.creationTime,n=!0,b=h):c.credentials.push(b));b.resources||(b.resources=[]);b.resources.push(l||e);b.scope=c._isServerRsrc(e)?"server":"portal";b.onTokenChange();var l=c._soReqs,z={};c._soReqs=[];s.forEach(l,function(a){if(!this._isIdenticalService(e,a.resUrl_)){var h=this._getSuffix(a.resUrl_);z[h]||(z[h]=!0,b.resources.push(a.resUrl_))}},c);a.callback(b);s.forEach(l,function(a){a.callback(b)});c._busy=a.resUrl_=
a.sinfo_=a.refresh_=null;if(!n)c.onCredentialCreate({credential:b});c._soReqs.length&&c._doSignIn(c._soReqs.shift());c._xoReqs.length&&c._doSignIn(c._xoReqs.shift())},f=function(b){a.errback(b);c._busy=a.resUrl_=a.sinfo_=a.refresh_=null;c._soReqs.length&&c._doSignIn(c._soReqs.shift());c._xoReqs.length&&c._doSignIn(c._xoReqs.shift())},g=function(b,l,e,h){var n=a.sinfo_,z=!a.options_||!1!==a.options_.prompt,v=n.hasPortal&&c._findOAuthInfo(a.resUrl_);c._doPortalSignIn(a.resUrl_)?(b=c._getEsriAuthCookie(),
v=c._portalConfig,b?d(new J({userId:b.email,server:n.server,token:b.token,expires:null})):z?(z="",b=window.location.href,z=c.signInPage?c.signInPage:v?v.baseUrl+v.signin:c._isIdProvider(b,a.resUrl_)?c._getOrigin(b)+"/home/signin.html":n.tokenServiceUrl.replace(c._rePortalTokenSvc,"")+"/home/signin.html",z=z.replace(/http:/i,"https:"),v&&!1===v.useSSL&&(z=z.replace(/https:/i,"http:")),0===b.toLowerCase().replace("https","http").indexOf(z.toLowerCase().replace("https","http"))?(n=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+
a.resUrl_),n.code="IdentityManagerBase.5",n.log=t.isDebug,f(n)):c._redirectFunc?c._redirectFunc({signInPage:z,returnUrlParamName:"returnUrl",returnUrl:b,resourceUrl:a.resUrl_,serverInfo:n}):window.location=z+"?returnUrl\x3d"+window.escape(b)):(n=Error("User is not signed in."),n.code="IdentityManagerBase.6",n.log=t.isDebug,f(n))):b?d(new J({userId:b,server:n.server,token:e,expires:B.isDefined(h)?Number(h):null,ssl:!!l})):v?(b=v._oAuthCred,b||(l=new A(v,window.localStorage),e=new A(v,window.sessionStorage),
l.isValid()&&e.isValid()?l.expires>e.expires?(b=l,e.destroy()):(b=e,l.destroy()):b=l.isValid()?l:e,v._oAuthCred=b),b.isValid()?d(new J({userId:b.userId,server:n.server,token:b.token,expires:b.expires,ssl:b.ssl,_oAuthCred:b})):c._oAuthHash&&c._oAuthHash.state.portalUrl===v.portalUrl?(z=c._oAuthHash,n=new J({userId:z.username,server:n.server,token:z.access_token,expires:(new Date).getTime()+1E3*Number(z.expires_in),ssl:"true"===z.ssl,oAuthState:z.state,_oAuthCred:b}),b.storage=z.persist?window.localStorage:
window.sessionStorage,b.token=n.token,b.expires=n.expires,b.userId=n.userId,b.ssl=n.ssl,b.save(),c._oAuthHash=null,d(n)):z?a._pendingDfd=c.oAuthSignIn(a.resUrl_,n,v,a.options_).addCallbacks(d,f):(n=Error("User is not signed in."),n.code="IdentityManagerBase.6",n.log=t.isDebug,f(n))):z?c._checkProtocol(a.resUrl_,n,f,a.admin_)&&(z=a.options_,a.admin_&&(z=z||{},z.isAdmin=!0),a._pendingDfd=c.signIn(a.resUrl_,n,z).addCallbacks(d,f)):(n=Error("User is not signed in."),n.code="IdentityManagerBase.6",n.log=
t.isDebug,f(n))},k=function(){var b=a.sinfo_,l=b.owningSystemUrl,e=a.options_,h,n,z;e&&(h=e.token,n=e.error);z=c._findCredential(l,{token:h,resource:a.resUrl_});!z&&I(b)&&s.some(c.credentials,function(a){this._isIdProvider(l,a.server)&&(z=a);return!!z},c);z?(e=c.findCredential(a.resUrl_,z.userId))?d(e):M(b,c._legacyFed)?(e=z.toJson(),e.server=b.server,e.resources=null,d(new J(e))):(a._pendingDfd=c.generateToken(c.findServerInfo(z.server),null,{serverUrl:a.resUrl_,token:z.token,ssl:z.ssl})).addCallbacks(function(e){d(new J({userId:z.userId,
server:b.server,token:e.token,expires:B.isDefined(e.expires)?Number(e.expires):null,ssl:!!e.ssl,isAdmin:a.admin_,validity:e.validity}))},f):(c._busy=null,h&&(a.options_.token=null),(a._pendingDfd=c.getCredential(l.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:b.owningTenant,token:h,error:n})).addCallbacks(function(e){c._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){f(a)}))},m=a.sinfo_.owningSystemUrl,v=this._isServerRsrc(a.resUrl_),r=a.sinfo_._restInfoDfd;r?r.addCallbacks(function(d){var l=
a.sinfo_;l.adminTokenServiceUrl=l._restInfoDfd.adminUrl_;l._restInfoDfd=null;l.tokenServiceUrl=b.getObject("authInfo.tokenServicesUrl",!1,d)||b.getObject("authInfo.tokenServiceUrl",!1,d)||b.getObject("tokenServiceUrl",!1,d);l.shortLivedTokenValidity=b.getObject("authInfo.shortLivedTokenValidity",!1,d);l.currentVersion=d.currentVersion;l.owningTenant=d.owningTenant;(d=l.owningSystemUrl=d.owningSystemUrl)&&c._portals.push(d);v&&d?k():g()},function(){a.sinfo_._restInfoDfd=null;var b=Error("Unknown resource - could not find token service endpoint.");
b.code="IdentityManagerBase.2";b.log=t.isDebug;f(b)}):v&&m?k():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(b){var l={},e,h,n,z;b&&(e=b.user&&b.user.username,l.username=e,l.allSSL=b.allSSL,h=b.supportsOAuth,n=b.currentVersion||"4.3","multitenant"===b.portalMode&&(z=b.customBaseUrl));a.sinfo_.webTierAuth=!!e;return e&&c.normalizeWebTierAuth?c.generateToken(a.sinfo_,null,{ssl:l.allSSL}).always(function(a){l.portalToken=a&&a.token;l.tokenExpiration=a&&a.expires;return l}):!e&&h&&4.3<=parseFloat(n)&&
!c._doPortalSignIn(a.resUrl_)?c._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:z,owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return l}):l}).always(function(b){a.sinfo_._selfReq=null;b?g(b.username,b.allSSL,b.portalToken,b.tokenExpiration):g()}):g()},_generateOAuthInfo:function(a){var b=this,c,d=a.portalUrl;if(a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){c=window.location.href;var f=c.indexOf("?");-1<f&&(c=c.slice(0,f));
f=c.search(/\/(apps|home)\//);c=-1<f?c.slice(0,f):null}a&&c?(this._hasTestedIfAppIsOnPortal=!0,c=E({url:c+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){b._defaultOAuthInfo=new H({appId:"arcgisonline",popup:!0,popupCallbackUrl:"/home/oauth-callback.html"})})):(c=new r,c.resolve(),c=c.promise);return c.always(function(){if(b._defaultOAuthInfo){var a=b._defaultOAuthInfo.clone();a.portalUrl=d;b.oAuthInfos.push(a)}})}});J=q(D,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,
constructor:function(a){b.mixin(this,a);this.resources=this.resources||[];B.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var a=this,b=this.resources&&this.resources[0],c=d.id.findServerInfo(this.server),f=c&&c.owningSystemUrl,g=!!f&&"server"===this.scope,k=g&&M(c,d.id._legacyFed),m=g&&d.id.findServerInfo(f),v,r=(v=c.webTierAuth)&&d.id.normalizeWebTierAuth,q=G[this.server],q=q&&q[this.userId],l={username:this.userId,password:q},e;if(!v||
r)if(g&&!m&&s.some(d.id.serverInfos,function(a){d.id._isIdProvider(f,a.server)&&(m=a);return!!m}),v=m&&d.id.findCredential(m.server,this.userId),!g||v)if(k)v.refreshToken();else{if(g)e={serverUrl:b,token:v&&v.token,ssl:v&&v.ssl};else if(r)l=null,e={ssl:this.ssl};else if(q)this.isAdmin&&(e={isAdmin:!0});else{var h;b&&(b=d.id._sanitizeUrl(b),this._enqueued=1,h=d.id._enqueue(b,c,null,null,this.isAdmin,this),h.addCallback(function(){a._enqueued=0;a.refreshServerTokens()}).addErrback(function(){a._enqueued=
0}));return h}return d.id.generateToken(g?m:c,g?null:l,e).addCallback(function(e){a.token=e.token;a.expires=B.isDefined(e.expires)?Number(e.expires):null;a.creationTime=(new Date).getTime();a.validity=e.validity;a.onTokenChange();a.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&s.forEach(d.id.credentials,function(a){var b=d.id.findServerInfo(a.server),c=b&&b.owningSystemUrl;if(a!==this&&a.userId===this.userId&&c&&"server"===a.scope&&(d.id._hasSameServerInstance(this.server,
c)||d.id._isIdProvider(c,this.server)))M(b,d.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.onTokenChange()):a.refreshToken()},this)},onTokenChange:function(a){clearTimeout(this._refreshTimer);var b=this.server&&d.id.findServerInfo(this.server),c=(b=b&&b.owningSystemUrl)&&d.id.findServerInfo(b);!1!==a&&((!b||"portal"===this.scope||c&&c.webTierAuth&&!d.id.normalizeWebTierAuth)&&(B.isDefined(this.expires)||B.isDefined(this.validity)))&&
this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=s.indexOf(d.id.credentials,this);-1<a&&d.id.credentials.splice(a,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var a=B.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,
validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b);return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,c=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>c&&(c=0);this._refreshTimer=setTimeout(b.hitch(this,this.refreshToken),c>a?c-a:c)}});S.Credential=J;g("extend-esri")&&(d.IdentityManagerBase=S);return S})},
"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(q,t){q.cookie=function(b,q,r){var m=document.cookie,k;if(1==arguments.length)k=(k=m.match(RegExp("(?:^|; )"+t.escapeString(b)+"\x3d([^;]*)")))?decodeURIComponent(k[1]):void 0;else{r=r||{};m=r.expires;if("number"==typeof m){var g=new Date;g.setTime(g.getTime()+864E5*m);m=r.expires=g}m&&m.toUTCString&&(r.expires=m.toUTCString());q=encodeURIComponent(q);var m=b+"\x3d"+q,f;for(f in r)m+="; "+f,g=r[f],!0!==g&&(m+="\x3d"+g);document.cookie=
m}return k};q.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return q.cookie})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.ServerInfo",constructor:function(b){t.mixin(this,
b)},toJson:function(){return r.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});b("extend-esri")&&(s.ServerInfo=q);return q})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare",
"dojo/has","dojo/json"],function(q,t,b,s){t=t(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(b,m){this.oAuthInfo=b;this.storage=m;this._init()},isValid:function(){var b=!1;if(this.oAuthInfo&&this.token&&this.userId){var m=(new Date).getTime();this.expires>m&&(this.expires-m)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(b=!0)}return b},save:function(){if(this.storage){var b=this._load(),m=this.oAuthInfo;if(m&&
m.authNamespace&&m.portalUrl){var k=b[m.authNamespace];k||(k=b[m.authNamespace]={});k[m.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",s.stringify(b))}catch(g){}}}},destroy:function(){var b=this._load(),m=this.oAuthInfo;if(m&&m.authNamespace&&m.portalUrl&&this.storage){var k=b[m.authNamespace];if(k){delete k[m.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",s.stringify(b))}catch(g){}}}m&&(this.oAuthInfo=m._oAuthCred=
null)},_init:function(){var b=this._load(),m=this.oAuthInfo;if(m&&(m.authNamespace&&m.portalUrl)&&(b=b[m.authNamespace]))if(b=b[m.portalUrl])this.expires=b.expires,this.ssl=b.ssl,this.token=b.token,this.userId=b.userId},_load:function(){var b={};if(this.storage){var m=this.storage.getItem("esriJSAPIOAuth");if(m)try{b=s.parse(m)}catch(k){}}return b}});b("extend-esri")&&(q.OAuthCredential=t);return t})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang",
"dojo/has"],function(q,t,b,s,r){var m=b(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(b){s.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,showSocialLogins:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d480,width\x3d800,location,resizable,scrollbars,status"},b)},_oAuthCred:null,toJson:function(){return t.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,
minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,showSocialLogins:this.showSocialLogins,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures})},clone:function(){return new m(this.toJson())}});r("extend-esri")&&s.setObject("arcgis.OAuthInfo",m,q);return m})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(q,t,b,s,r,m,k,g){return q("dijit.form.Form",[r,m,k,g],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){t.set(this.domNode,
"encType",b);s("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var a={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(a)&&a.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(f){var a=this.constructor.prototype;if(this.execute!=
a.execute||this.onExecute!=a.onExecute)b.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(f)&&(f.stopPropagation(),f.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(q,t,b,s,r,m,k){var g=q("dijit.form.ValidationTextBox",r,{templateString:k,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,a){a!=g.prototype[b]&&(t.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",a))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",
b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(b,a){return RegExp("^(?:"+this._computeRegexp(a)+")"+(this.required?"":"?")+"$").test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,a))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,a="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?b:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?a:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var a=
"",c=this.disabled||this.isValid(b);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),g=!c&&b&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||b)&&d||g)&&(this._maskValidSubsetError||g&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=b&&g,a=this.getErrorMessage(b)):"Incomplete"==this.state?(a=this.getPromptMessage(b),this._maskValidSubsetError=
!this._hasBeenBlurred||b):d&&(a=this.getPromptMessage(b));this.set("message",a);return c},displayMessage:function(b){b&&this.focused?m.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):m.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(f){this.constraints=b.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&
this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b);this._refreshState()},_computeRegexp:function(b){var a=this.pattern;"function"==typeof a&&(a=a.call(this,b));if(a!=this._lastRegExp){var c="";this._lastRegExp=a;".*"!=a&&a.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(d){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return a},postMixInProperties:function(){this.inherited(arguments);this.messages=s.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",
b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){m.hide(this.domNode);this.inherited(arguments)}});return g})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c){g=q("dijit.form.TextBox"+(k("dojo-bidi")?"_NoBidi":""),[g,f],{templateString:a,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:k("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>k("ie")&&this.defer(function(){try{var a=b.getComputedStyle(this.domNode);if(a){var c=a.fontFamily;if(c){var f=this.domNode.getElementsByTagName("INPUT");if(f)for(a=0;a<f.length;a++)f[a].style.fontFamily=c}}}catch(g){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=t.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(m(this._phspan,"mousedown",function(a){a.preventDefault()}),m(this._phspan,"touchend, pointerup, MSPointerUp",r.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){s.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){s.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),k("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});9>k("ie")&&(g.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},c._setSelectionRange=f._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});k("dojo-bidi")&&(g=q("dijit.form.TextBox",g,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return g})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(q,t,b,s,r,m,k,g){var f=
t("dijit.form._TextBoxMixin"+(s("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,d){var f;void 0!==a&&(f=this.filter(a),"string"!=typeof d&&(d=null!==f&&("number"!=typeof f||!isNaN(f))?this.filter(this.format(f,this.constraints)):"",0!=this.compare(f,this.filter(this.parse(d,this.constraints)))&&(d=null)));
if(null!=d&&("number"!=typeof d||!isNaN(d))&&this.textbox.value!=d)this.textbox.value=d,this._set("displayedValue",this.get("displayedValue"));this.inherited(arguments,[f,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==
a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);
this.inherited(arguments);this.own(k(this.textbox,"keydown, keypress, paste, cut, compositionend",m.hitch(this,function(a){var b;if("keydown"==a.type&&229!=a.keyCode){b=a.keyCode;switch(b){case r.SHIFT:case r.ALT:case r.CTRL:case r.META:case r.CAPS_LOCK:case r.NUM_LOCK:case r.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case r.NUMPAD_0:case r.NUMPAD_1:case r.NUMPAD_2:case r.NUMPAD_3:case r.NUMPAD_4:case r.NUMPAD_5:case r.NUMPAD_6:case r.NUMPAD_7:case r.NUMPAD_8:case r.NUMPAD_9:case r.NUMPAD_MULTIPLY:case r.NUMPAD_PLUS:case r.NUMPAD_ENTER:case r.NUMPAD_MINUS:case r.NUMPAD_PERIOD:case r.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==r.SPACE)return;b=!1;for(var d in r)if(r[d]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==r.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}var f={faux:!0},g;for(g in a)/^(layer[XY]|returnValue|keyLocation)$/.test(g)||
(d=a[g],"function"!=typeof d&&"undefined"!=typeof d&&(f[g]=d));m.mixin(f,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){f._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=f;!1===this.onInput(f)&&(f.preventDefault(),f.stopPropagation());if(!f._wasConsumed&&9>=s("ie"))switch(a.keyCode){case r.TAB:case r.ESCAPE:case r.DOWN_ARROW:case r.UP_ARROW:case r.LEFT_ARROW:case r.RIGHT_ARROW:break;default:if(a.keyCode==r.ENTER&&"textarea"!=
this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&k.emit(this.textbox,"input",{bubbles:!0})})}})),k(this.textbox,"input",m.hitch(this,"_onInput")),k(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=m.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,
function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=k.once(this.domNode,"mouseup, touchend",m.hitch(this,function(a){this._isTextSelected()||
f.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});s("dojo-bidi")&&(f=t("dijit.form._TextBoxMixin",f,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);
this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));f._setSelectionRange=g._setSelectionRange=function(a,b,d){a.setSelectionRange&&a.setSelectionRange(b,d)};f.selectInputText=g.selectInputText=function(a,c,d){a=b.byId(a);isNaN(c)&&(c=0);isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),f._setSelectionRange(a,c,d)}catch(g){}};return f})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E){function D(){}var A=t("dijit._MasterTooltip",[B,x],{duration:d.defaultDuration,templateString:w,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new y(this.domNode);this.fadeIn=b.fadeIn({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,"_onShow")});this.fadeOut=b.fadeOut({node:this.domNode,duration:this.duration,onEnd:g.hitch(this,"_onHide")})},show:function(a,b,c,d,f,m,r){if(!this.aroundNode||!(this.aroundNode===
b&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;f&&this.set("textDir",f);this.containerNode.align=d?"right":"left";var q=u.around(this.domNode,b,c&&c.length?c:H.defaultPosition,!d,g.hitch(this,"orient")),s=q.aroundNodePos;"M"==q.corner.charAt(0)&&"M"==q.aroundCorner.charAt(0)?(this.connectorNode.style.top=s.y+(s.h-this.connectorNode.offsetHeight>>1)-q.y+"px",this.connectorNode.style.left=""):"M"==q.corner.charAt(1)&&
"M"==q.aroundCorner.charAt(1)?this.connectorNode.style.left=s.x+(s.w-this.connectorNode.offsetWidth>>1)-q.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");k.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=m||D;this.onMouseLeave=r||D}},orient:function(a,b,d,f,g){this.connectorNode.style.top="";var k=f.h;f=f.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+d];this.domNode.style.width="auto";var r=m.position(this.domNode);if(c("ie")||c("trident"))r.w+=2;var q=Math.min(Math.max(f,1),r.w);m.setMarginBox(this.domNode,{w:q});"B"==d.charAt(0)&&"B"==b.charAt(0)?(a=m.position(a),b=
this.connectorNode.offsetHeight,a.h>k?(this.connectorNode.style.top=k-(g.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(g.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,r.w-f)},_onShow:function(){c("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=
!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=D},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});c("dojo-bidi")&&A.extend({_setAutoTextDir:function(a){this.applyTextDir(a);q.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=
this.textDir}});E.showTooltip=function(a,b,c,d,f,g,k){c&&(c=q.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));H._masterTT||(E._masterTT=H._masterTT=new A);return H._masterTT.show(a,b,c,d,f,g,k)};E.hideTooltip=function(a){return H._masterTT&&H._masterTT.hide(a)};var H=t("dijit.Tooltip",B,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){q.forEach(this._connections||[],function(a){q.forEach(a,function(a){a.remove()})},
this);this._connectIds=q.filter(g.isArrayLike(b)?b:b?[b]:[],function(a){return s.byId(a,this.ownerDocument)},this);this._connections=q.map(this._connectIds,function(b){b=s.byId(b,this.ownerDocument);var c=this.selector,d=c?function(b){return a.selector(c,b)}:function(a){return a},k=this;return[a(b,d(f.enter),function(){k._onHover(this)}),a(b,d("focusin"),function(){k._onHover(this)}),a(b,d(f.leave),g.hitch(k,"_onUnHover")),a(b,d("focusout"),g.hitch(k,"set","state","DORMANT"))]},this);this._set("connectId",
b)},addTarget:function(a){a=a.id||a;-1==q.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=q.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);r.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;q.forEach(g.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||
this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(H.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state",
"SHOWING")},this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}H.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,g.hitch(this,"set","state","SHOWING"),g.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&
a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");q.forEach(this._connections||[],function(a){q.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});
H._MasterTooltip=A;H.show=E.showTooltip;H.hide=E.hideTooltip;H.defaultPosition=["after-centered","before-centered"];return H})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(b,d,f,k){var m=this._oAuthDfd=new g;m.resUrl_=b;m.sinfo_=d;m.oinfo_=f;var r=!k||!1!==k.oAuthPopupConfirmation;if(!f.popup||!r)return this._doOAuthSignIn(b,d,f),m;this._nls||(this._nls=c.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());b=this.oAuthDialog;d=k&&k.error;k=k&&k.token;t.hide(b.errMsg_);d&&(403==d.code&&k)&&(a.set(b.errMsg_,"innerHTML",this._nls.forbidden),t.show(b.errMsg_));b.show();
return m},setOAuthResponseHash:function(a){var b=this._oAuthDfd;this._oAuthDfd=null;if(b&&a)if(clearInterval(this._oAuthIntervalId),"#"===a.charAt(0)&&(a=a.substring(1)),a=d.queryToObject(a),a.error)a=Error("access_denied"===a.error?"ABORTED":"OAuth: "+a.error+" - "+a.error_description),a.code="IdentityManagerBase.2",a.log=k.isDebug,b.errback(a);else{var c=b.oinfo_._oAuthCred,f=new q({userId:a.username,server:b.sinfo_.server,token:a.access_token,expires:(new Date).getTime()+1E3*Number(a.expires_in),
ssl:"true"===a.ssl,_oAuthCred:c});c.storage=a.persist?window.localStorage:window.sessionStorage;c.token=f.token;c.expires=f.expires;c.userId=f.userId;c.ssl=f.ssl;c.save();b.callback(f)}},_createOAuthDialog:function(){var a=this._nls,c=b.substitute(a,this._oAuthDialogContent),d=new r({title:a.title,content:c,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=d.esriIdMgr_._oAuthDfd;d.hide_();d.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=
d.esriIdMgr_._oAuthDfd;d.esriIdMgr_._oAuthDfd=null;d.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=k.isDebug;a.errback(b)},hide_:function(){t.hide(d.errMsg_);d.hide();r._DialogLevelManager.hide(d)}}),a=d.domNode;d.btnSubmit_=m.byNode(f.query(".esriIdSubmit",a)[0]);d.btnCancel_=m.byNode(f.query(".esriIdCancel",a)[0]);d.errMsg_=f.query(".esriErrorMsg",a)[0];d.connect(d.btnSubmit_,"onClick",d.execute_);d.connect(d.btnCancel_,"onClick",d.onCancel);d.connect(d,"onCancel",d.cancel_);return d},
_doOAuthSignIn:function(a,b,c){var f=this,g={client_id:c.appId,response_type:"token",state:B.stringify({portalUrl:c.portalUrl}),expiration:c.expiration,locale:c.locale,redirect_uri:c.popup?s.getAbsoluteUrl(c.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};c.forceLogin&&(g.force_login=!0);c.showSocialLogins&&(g.showSocialLogins=!0);var m=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",r=m+"?"+d.objectToQuery(g);if(c.popup){var q;7===u("ie")?(q=window.open(c.popupCallbackUrl,
"esriJSAPIOAuth",c.popupWindowFeatures),q.location=r):q=window.open(r,"esriJSAPIOAuth",c.popupWindowFeatures);q?(q.focus(),this._oAuthDfd.oAuthWin_=q,this._oAuthIntervalId=setInterval(function(){if(q.closed){clearInterval(f._oAuthIntervalId);var a=f._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=k.isDebug;a.errback(b)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=k.isDebug,this._oAuthDfd.errback(a))}else this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:g,
authorizeUrl:m,resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location=r}}})},"esri/layers/WebTiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/url dojo/sniff dojo/string ../config ../kernel ../request ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B){function x(b,c){var d=[],f,g;if(b&&c&&(c.customLayerParameters||c.customParameters)){f=t.clone(c.customParameters||{});
t.mixin(f,c.customLayerParameters||{});g=a.urlToObject(b);for(var k in g.query)f.hasOwnProperty(k)||d.push(k+"\x3d"+g.query[k]);b=g.path+(d.length?"?"+d.join("\x26"):"")}return b}q=q(u,{declaredClass:"esri.layers.WebTiledLayer",constructor:function(g,q){q||(q={});this.urlTemplate=g=x(g,q.wmtsInfo);var u=new d(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new c({wkid:102100})),D=new d(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new c({wkid:102100}));
this.initialExtent=q.initialExtent||u;this.fullExtent=q.fullExtent||D;this.tileInfo=q.tileInfo?q.tileInfo:new B({dpi:96,rows:256,cols:256,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,resolution:156543.033928,scale:5.91657527591555E8},{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,
scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,
resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176},{level:20,resolution:0.14929107082380833,scale:564.248588},{level:21,resolution:0.07464553541190416,scale:282.124294},
{level:22,resolution:0.03732276770595208,scale:141.062147},{level:23,resolution:0.01866138385297604,scale:70.5310735}]});this.spatialReference=new c(this.tileInfo.spatialReference.toJson());this.copyright=q.copyright||"";var A=new s(g),u=A.scheme+"://"+A.authority+"/";this.urlPath=g.substring(u.length);this.tileServers=q.tileServers||[];-1===A.authority.indexOf("{subDomain}")&&this.tileServers.push(u);if(q.subDomains&&0<q.subDomains.length&&1<A.authority.split(".").length){this.subDomains=q.subDomains;
var H;b.forEach(q.subDomains,function(a){-1<A.authority.indexOf("${subDomain}")?H=A.scheme+"://"+m.substitute(A.authority,{subDomain:a})+"/":-1<A.authority.indexOf("{subDomain}")&&(H=A.scheme+"://"+A.authority.replace(/\{subDomain\}/gi,a)+"/");this.tileServers.push(H)},this)}this.tileServers=b.map(this.tileServers,function(a){"/"!==a.charAt(a.length-1)&&(a+="/");return a});this._levelToLevelValue=[];b.forEach(this.tileInfo.lods,function(a){this._levelToLevelValue[a.level]=a.levelValue||a.level},this);
this._wmtsInfo=q.wmtsInfo;var G=t.hitch(this,function(){this.loaded=!0;this.onLoad(this)});if(r("chrome")){var u=this.getTileUrl(0,0,0),D=k.defaults.io,I="with-credentials"===D.useCors?a.canUseXhr(u,!0):-1;(D=-1<I?D.corsEnabledServers[I]:null)&&D.withCredentials?f({url:u,handleAs:"arraybuffer"}).addBoth(function(a){G()}):G()}else G()},getTileUrl:function(b,c,d){b=this._levelToLevelValue[b];var f=this.tileServers[c%this.tileServers.length]+m.substitute(this.urlPath,{level:b,col:d,row:c}),f=f.replace(/\{level\}/gi,
b).replace(/\{row\}/gi,c).replace(/\{col\}/gi,d),f=this._appendCustomLayerParameters(f),f=this.addTimestampToURL(f);return a.addProxy(f)},_appendCustomLayerParameters:function(a){var b,c;if(this._wmtsInfo&&(this._wmtsInfo.customLayerParameters||this._wmtsInfo.customParameters))for(b in c=t.clone(this._wmtsInfo.customParameters||{}),t.mixin(c,this._wmtsInfo.customLayerParameters||{}),c)a+=(-1===a.indexOf("?")?"?":"\x26")+b+"\x3d"+encodeURIComponent(c[b]);return a}});r("extend-esri")&&t.setObject("layers.WebTiledLayer",
q,g);return q})},"esri/layers/ArcGISImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),function(q,t,b,s,r,m,k){q=q([m,k],{declaredClass:"esri.layers.ArcGISImageServiceLayer",constructor:function(b,f){this._initialize(b,f);this.useMapImage=f&&f.useMapImage||!1},refresh:function(b){if(b)this.inherited(arguments);else{var f=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);
this.disableClientCaching=f}},exportMapImage:function(b,f){var a=r.defaults.map,a=t.mixin({size:a.width+","+a.height},this._params,b?b.toJson(this.normalization):{},{f:"json"});delete a._ts;this._exportMapImage(this._url.path+"/exportImage",a,f)}});b("extend-esri")&&t.setObject("layers.ArcGISImageServiceLayer",q,s);return q})},"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y,w,E,D,A,H,G,I,M,J,S,L,Q,R,X){q=q(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_eventMap:{"rendering-change":!0,"mosaic-rule-change":!0,"spatial-reference-change":!0},constructor:function(a,b){this.useMapTime=b&&b.hasOwnProperty("useMapTime")?!!b.useMapTime:!0},_initialize:function(a,b){this._url=x.urlToObject(a);this.raster=new G(a);this.infoTemplate=b&&b.infoTemplate;
var c=b&&b.imageServiceParameters;this.format=c&&c.format;this.compressionTolerance=c&&c.compressionTolerance?c.compressionTolerance:0.01;this.interpolation=c?c.interpolation:null;this.compressionQuality=c?c.compressionQuality:null;this.bandIds=c?c.bandIds:null;this.mosaicRule=c?c.mosaicRule:null;this.renderingRule=c?c.renderingRule:null;this.useMapDimensionValue=b&&b.hasOwnProperty("useMapDimensionValue")?!!b.useMapDimensionValue:!0;this.activeMapDimensions=b&&b.activeMapDimensions;this._params=
t.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},c?c.toJson():{});this.pixelFilter=b&&b.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=t.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=t.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=t.hitch(this,this._initLayer);
this._queryVisibleRastersHandler=t.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=b&&b.loadCallback;(c=b&&b.resourceInfo)?this._initLayer(c):u({url:this._url.path,content:t.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},
disableClientCaching:!1,_initLayer:function(a,b){if(!(null===a||void 0===a)){this._findCredential();(this.credential&&this.credential.ssl||a&&a._ssl)&&this._useSSL();var c=this.minScale,v=this.maxScale;t.mixin(this,a);this.minScale=c;this.maxScale=v;this.initialExtent=this.fullExtent=this.extent=new y(a.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);for(var f=this.minValues,g=this.maxValues,
l=this.meanValues,e=this.stdvValues,h=this.bands=[],c=0,v=this.bandCount;c<v;c++)h[c]={min:f[c],max:g[c],mean:l[c],stddev:e[c]};this.timeInfo=(c=this.timeInfo)&&c.timeExtent?new S(c):null;v=this.fields=[];if(f=a.fields)for(c=0;c<f.length;c++)v.push(new L(f[c]));this.version=a.currentVersion;this.version||(this.version="fields"in a||"objectIdField"in a||"timeInfo"in a?10:9.3);d.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);d.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale);
c={};a.defaultMosaicMethod?(c.method=a.defaultMosaicMethod,c.operation=a.mosaicOperator,c.sortField=a.sortField,c.sortValue=a.sortValue):c.method=D.METHOD_NONE;this.defaultMosaicRule=new D(c);this.defaultMosaicRule.ascending=!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===this.serviceDataType&&!this.hasRasterAttributeTable;this._setDefaultRenderingRule(!0);this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&
this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(t.hitch(this,function(a){a&&(a.features&&0<a.features.length)&&(this._rasterAttributeTableFeatures=t.clone(a.features));a&&(a.fields&&0<a.fields.length)&&(this._rasterAttributeTableFields=t.clone(a.fields))}));this._isVectorData()&&!d.isDefined(this.pixelFilter)&&(this.vectorFieldPixelFilter=new M,this.vectorFieldPixelFilter.isDataUV="esriImageServiceDataTypeVector-UV"===
this.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(t.hitch(this,this._setFlowRepresentation)));this.loaded=!0;this.onLoad(this);if(c=this._loadCallback)delete this._loadCallback,c(this)}},getKeyProperties:function(){var a=this._url.path+"/keyProperties",c=new b(B._dfdCanceller);10<this.version?(c._pendingDfd=u({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),c._pendingDfd.then(function(a){c.callback(a)},
function(a){c.errback(a)})):(a=Error("Layer does not have key properties"),a.log=m.isDebug,c.errback(a));return c},getRasterAttributeTable:function(a){var c=this._url.path+"/rasterAttributeTable",d=new b(B._dfdCanceller),v={f:"json"},f=this.hasRasterAttributeTable;a&&a.renderingRule&&(v.renderingRule=r.toJson(a.renderingRule.toJson()),f=!0);10<this.version&&f?(d._pendingDfd=u({url:c,content:v,handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(a){d.callback(a)},function(a){d.errback(a)})):
(a=Error("Layer does not support raster attribute table"),a.log=m.isDebug,d.errback(a));return d},_getRenderingRuleAttributeTable:function(a){var c=new b(B._dfdCanceller);if(!a||!a.renderingRule)return c.errback(Error("Rendering rule is not specified")),c;a=a.renderingRule;var d=a.functionName;this._renderingRuleAttributeTable&&d&&this._renderingRuleAttributeTable.hasOwnProperty(d)?c.resolve(this._renderingRuleAttributeTable[d]):c=this.getRasterAttributeTable({renderingRule:a}).then(t.hitch(this,
function(a){var b;a&&(a.features&&a.features.length&&a.fields&&a.fields.length)&&(b={features:t.clone(a.features),fields:t.clone(a.fields)},d&&(this._renderingRuleAttributeTable[d]=b));return b}));return c},_getRasterAttributeTableFeatures:function(){var a=new b;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return a.resolve(this._rasterAttributeTableFeatures),a;if(10<this.version&&this.hasRasterAttributeTable)return a=this.getRasterAttributeTable(),a.then(t.hitch(this,
function(a){a&&(a.features&&0<a.features.length)&&(this._rasterAttributeTableFeatures=t.clone(a.features))})),a;a.resolve(this._rasterAttributeTableFeatures);return a},_getRenderingRuleAttributeTableFeatures:function(a){a=a&&a.renderingRule;return!a?(a=new b,a.errback(Error("Rendering rule is not specified")),a):this._getRenderingRuleAttributeTable({renderingRule:a}).then(function(a){return a&&a.features})},getCustomRasterFields:function(a){var b=a?a.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;
a=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var c={name:this._rasterFieldPrefix+"ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:a},v={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:a},f={name:this._rasterFieldPrefix+"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},g=this.fields?t.clone(this.fields):[];a=g.length;
g[a]=v;if(10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||!this.rasterFunctionInfos.length||this._isRasterFunctionInfoAvailable("none")))a++,g[a]=f;if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)a++,g[a]=c;if(d.isDefined(this.pixelFilter)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType))c={name:this._rasterFieldPrefix+
"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},v={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},a++,g[a]=c,a++,g[a]=v;a=this._rasterAttributeTableFields;if((c=this.renderingRule&&this.renderingRule.functionName)&&this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(c))a=this._renderingRuleAttributeTable[c].fields;a&&0<a.length&&(a=s.filter(a,function(a){return"esriFieldTypeOID"!==
a.type&&"value"!==a.name.toLowerCase()}),a=s.map(a,function(a){var h=t.clone(a);h.name=b+a.name;return h}),g=g.concat(a));var l=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&s.forEach(this.rasterFunctionInfos,function(a){a&&(a.name&&"none"!==a.name.toLowerCase())&&(a={name:l+a.name.replace(/ /gi,"_"),alias:a.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},g.push(a))});return g},_prepareGetImageParameters:function(a,b,c,v){v=d.isDefined(v)?
v:this._params;var f=a.spatialReference.wkid||r.toJson(a.spatialReference.toJson(!1));delete v._ts;t.mixin(v,{bbox:a.xmin+","+a.ymin+","+a.xmax+","+a.ymax,imageSR:f,bboxSR:f,size:b+","+c},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete v.compressionTolerance;v.format&&"LERC"===v.format.toUpperCase()&&(v.compressionTolerance=this.compressionTolerance);v.token=this._getToken()},getImageUrl:function(a,b,g,v,k){k=d.isDefined(k)?k:this._params;this._prepareGetImageParameters(a,b,g,k);a=
t.clone(k);this._cleanupRequestParams(a);b=this._url.path+"/exportImage?";g=x.addProxy(b+f.objectToQuery(t.mixin(a,{f:"image"})));var m=a.token;g.length>c.defaults.io.postLength||this.useMapImage?this._jsonRequest=u({url:b,content:t.mixin(a,{f:"json"}),callbackParamName:"callback",load:function(a,e){var b=a.href;m&&(b+=-1===b.indexOf("?")?"?token\x3d"+m:"\x26token\x3d"+m);v(x.addProxy(b))},error:this._errorHandler}):v(g)},onRenderingChange:function(){},onMosaicRuleChange:function(){},setInterpolation:function(a,
b){this.interpolation=this._params.interpolation=a;b||this.refresh(!0)},setCompressionQuality:function(a,b){this.compressionQuality=this._params.compressionQuality=a;b||this.refresh(!0)},setCompressionTolerance:function(a,b){this.compressionTolerance=a;b||this.refresh(!0)},setBandIds:function(a,b){var c=!1;this.bandIds!==a&&(c=!0);this.bandIds=a;this._params.bandIds=a.join(",");if(c&&!b)this.onRenderingChange();b||this.refresh(!0)},setDefaultBandIds:function(a){this.bandIds=this._params.bandIds=null;
a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setMosaicRule:function(a,b){var c=!1;this.mosaicRule!==a&&(c=!0);this.mosaicRule=a;this._params.mosaicRule=r.toJson(a.toJson());if(c&&!b)this.onMosaicRuleChange();b||this.refresh(!0)},setRenderingRule:function(a,b){var c=!1;this.renderingRule!==a&&(c=!0);this.renderingRule=a;this._params.renderingRule=a?r.toJson(a.toJson()):null;this._useRenderingRuleAttributeTable&&this._getRenderingRuleAttributeTable({renderingRule:a});
if(c&&!b)this.onRenderingChange();b||this.refresh(!0)},setImageFormat:function(a,b){this.format=this._params.format=a;b||this.refresh(!0)},setInfoTemplate:function(a){this.infoTemplate=a},setDefinitionExpression:function(a,b){var c=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?c=this.defaultMosaicRule.toJson():c.method=D.METHOD_NONE);c.where=a;c=new D(c);this.setMosaicRule(c,b);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:
null},setPixelFilter:function(a){this.pixelFilter=a},getPixelData:function(a){return a?(this._useBrowserDecoding()&&(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},queryVisibleRasters:function(a,c,d,v){var f=this._map,g=B._fixDfd(new b(B._dfdCanceller));this._visibleRasters=[];var l,
e,h=!0,n=this.infoTemplate?this.infoTemplate.info:null,z=n?t.clone(this.infoTemplate.info.fieldInfos):null;c=c||{};if(n&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var F=[];s.forEach(this.infoTemplate.info.mediaInfos,function(a){F=F.concat(a&&a.value&&a.value.fields||[])});F.length&&s.forEach(z,function(a){a&&-1<F.indexOf(a.fieldName)&&(a.visible=!0)})}if(z&&0<z.length){h=!1;for(l=0;l<z.length;l++)if((e=z[l])&&e.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+
"servicepixelvalue"&&(e.visible||n.title&&-1<n.title.toLowerCase().indexOf(e.fieldName.toLowerCase()))){h=!0;break}}var N=(e=this._removeVisualizationStretchFunction(this.renderingRule))&&e.functionName,k=[];if(10.4<=this.version){var m=!1;if(this.rasterFunctionInfos&&z){var r=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;s.forEach(this.rasterFunctionInfos,function(a){var e=r+a.name.replace(/ /gi,"_");s.some(z,function(a){return a.visible&&a.fieldName===e})&&(m=m||N&&N===a.name,k.push(new A({rasterFunction:a.name})))})}e&&
!m&&k.push(e)}l=new X;l.geometry=a.geometry;l.returnGeometry=this._map.spatialReference.equals(this.spatialReference);l.returnCatalogItems=h;l.timeExtent=a.timeExtent;l.mosaicRule=this.mosaicRule||null;l.renderingRule=10.4>this.version&&e||null;l.renderingRules=k||null;f&&(a=new w((f.extent.xmax-f.extent.xmin)/(2*f.width),(f.extent.ymax-f.extent.ymin)/(2*f.height),f.extent.spatialReference),l.pixelSize=a);c.requestParams=l;var q=this;a=new R(this.url);(g._pendingDfd=a.execute(l)).addCallbacks(function(a){q._queryVisibleRastersHandler(a,
c,d,v,g)},function(a){q._resolve([a],null,v,g,!0)});return g},_queryVisibleRastersHandler:function(a,b,c,v,f){function g(){var a=this.getCustomRasterFields(b),z=this._getDomainFields(a),v=b?b.returnDomainValues:!1,F=b&&b.rasterAttributeTableFieldPrefix,N,k,T,m,r,W,q,C,ea,u;this._useRenderingRuleAttributeTable&&this.renderingRule?(a=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),u=l):a=this._getRasterAttributeTableFeatures();a.then(t.hitch(this,function(a){for(N=0;N<
n.length;N++){la=n[N];la.setInfoTemplate(this.infoTemplate);la._layer=this;if(l){ea=l.replace(/ /gi,"").split(",");k=l;T=ea;h&&h.length>=N&&(k=h[N].replace(/ /gi,", "),T=h[N].split(" "));la.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=T;la.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=ea;e&&(la.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=e.replace(/ /gi,"").split(","));if(this.pixelFilter){var b=new I({height:1,width:1,pixelType:"F32",pixels:[],statistics:[]});s.forEach(T,
function(a){b.addData({pixels:[a],statistics:{minValue:a,maxValue:a,noDataValue:null}})});this.pixelFilter({pixelBlock:b,extent:new y(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)la.attributes[this._rasterFieldPrefix+"Magnitude"]=b.pixels[0][0],la.attributes[this._rasterFieldPrefix+"Direction"]=b.pixels[1][0]}s.forEach(na,function(a){la.attributes[a.name]=a.value});var g=u||k;if(a&&
0<a.length&&(m=s.filter(a,function(a){if(a&&a.attributes)return a.attributes.hasOwnProperty("Value")?a.attributes.Value==g:a.attributes.VALUE==g}),0<m.length&&(r=t.clone(m[0]),F&&r))){C={};for(W in r.attributes)r.attributes.hasOwnProperty(W)&&(q=F+W,C[q]=r.attributes[W]);r.attributes=C;la.attributes=t.mixin(la.attributes,r.attributes)}}v&&(z&&0<z.length)&&s.forEach(z,function(a){if(a){var e=la.attributes[a.name];d.isDefined(e)&&(e=this._getDomainValue(a.domain,e),d.isDefined(e)&&(la.attributes[a.name]=
e))}},this);L.push(la);this._visibleRasters.push(la)}this._resolve([L,null,!0],null,c,f)}))}var l=a.value,e=a.value,h,n,z=0,F=0,N=this,k=this.objectIdField,m,q,na=[];v=b.requestParams.renderingRules;var sa=a.processedValues,w=this.renderingRule&&dojo.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(v&&sa&&v.length===sa.length){var x=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;s.forEach(v,function(a,e){if(a.functionName){var b={name:x+a.functionName.replace(/ /gi,
"_"),value:sa[e].replace(/ /gi,"").split(",")};na.push(b);w&&w===dojo.toJson(a.toJson())&&(l=sa[e])}})}v=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(a.catalogItems){var A=0,B,D,za=a.catalogItems.features.length;q=0;n=Array(za);h=Array(za);m=Array(za);for(z=0;z<za;z++)-1<a.properties.Values[z].toLowerCase().indexOf("nodata")&&q++;B=
za-q;for(z=0;z<za;z++)q=!0,-1<a.properties.Values[z].toLowerCase().indexOf("nodata")?(D=B++,v||(q=!1,n.length--,h.length--,m.length--)):D=A++,q&&(n[D]=a.catalogItems.features[z],h[D]=a.properties.Values[z],m[D]=n[D].attributes[k])}this._visibleRasters=[];var la;if((a=-1<l.toLowerCase().indexOf("nodata"))&&!v)n=[],h=[],m=[];l&&(!n&&!a)&&(k="ObjectId",n=[],la=new Q(new y(this.fullExtent),null,{ObjectId:0}),n.push(la));var L=[];n?!this._map.spatialReference.equals(this.spatialReference)&&m&&0<m.length?
u({url:this._url.path+"/query",content:{f:"json",objectIds:m.join(","),returnGeometry:!0,outSR:r.toJson(N._map.spatialReference.toJson()),outFields:k},handleAs:"json",callbackParamName:"callback",load:function(a){if(0===a.features.length)N._resolve([L,null,null],null,c,f);else{for(z=0;z<a.features.length;z++)for(F=0;F<n.length;F++)n[F].attributes[k]==a.features[z].attributes[k]&&(n[F].geometry=new E(a.features[z].geometry),n[F].geometry.setSpatialReference(N._map.spatialReference));g.call(N)}},error:function(a){N._resolve([L,
null,null],null,c,f)}}):g.call(this):this._resolve([L,null,null],null,c,f)},getVisibleRasters:function(){var a=this._visibleRasters,b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},_getDomainFields:function(a){if(a){var b=[];s.forEach(a,function(a){if(a.domain){var c={};c.name=a.name;c.domain=a.domain;b.push(c)}});return b}},_getDomainValue:function(a,b){if(a&&a.codedValues){var c;s.some(a.codedValues,function(a){return a.code===b?(c=a.name,!0):!1});return c}},_requestData:function(a,
b,c){this._rasterReadPromise&&this._rasterReadPromise.cancel();a=t.clone(a);var v=a._normalize(!0);this._prepareGetImageParameters(v,b,c);b=t.clone(this._params);this._cleanupRequestParams(b);b.extent=a;c=null;this._useBrowserDecoding()&&(c=new J({ctx:this._context}));b={imageServiceParameters:b,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:c?t.hitch(c,"decode"):null};this._rasterReadPromise=this.raster.read(b,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(a){if(!this._rasterReadPromise||
!this._rasterReadPromise.isCanceled())this.originalPixelData=a,this.hasDataChanged=!0,this._setPixelData(a)},_setPixelData:function(a){a=this._clonePixelData(a);this.pixelFilter&&this.pixelFilter(a);this.pixelData=a;if(!this._rasterReadPromise||!this._rasterReadPromise.isCanceled())this._drawPixelData(),this._rasterReadPromise=null},_clonePixelData:function(a){if(null===a||void 0===a)return a;var b={};a.extent&&(b.extent=t.clone(a.extent));a=a.pixelBlock;if(null===a||void 0===a)return b;b.pixelBlock=
a.clone();return b},_getPixelBlockFromCanvas:function(a,b,c){a=a.getImageData(0,0,b,c).data;for(var v=b*c,d=0,f=0,l=new Uint8Array(v),e=new Uint8Array(v),h=new Uint8Array(v),n=new Uint8Array(v),z=Infinity,F=Infinity,g=Infinity,k=-Infinity,m=-Infinity,r=-Infinity,q,s,t,d=0;d<v;d++)q=a[f++],s=a[f++],t=a[f++],z=z<q?z:q,k=k>q?k:q,F=F<s?F:s,m=m>s?m:s,g=g<t?g:t,r=r>t?r:t,l[d]=q,e[d]=s,h[d]=t,n[d]=a[f++]&1;return new I({width:b,height:c,pixels:[l,e,h],pixelType:"U8",mask:n,statistics:[{minValue:z,maxValue:k},
{minValue:F,maxValue:m},{minValue:g,maxValue:r}]})},_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var a=this._url.path+"/multiDimensionalInfo",c=new b(B._dfdCanceller);if(this._multidimensionalInfo)return c.resolve(this._multidimensionalInfo),c;10.3<=this.version&&this.hasMultidimensions?(c._pendingDfd=
u({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),c._pendingDfd.then(t.hitch(this,function(a){this._multidimensionalInfo=a.multidimensionalInfo;c.callback(a.multidimensionalInfo)}),function(a){c.errback(a)})):(a=Error("Layer does not support multidimensional info"),a.log=m.isDebug,c.errback(a));return c},getDefaultMultidimensionalDefinition:function(){var a,c,d,v=[],f=new b(B._dfdCanceller);if(this._defaultMultidimensionalDefinition)return f.resolve(this._defaultMultidimensionalDefinition),
f;f._pendingDfd=this.getMultidimensionalInfo();f._pendingDfd.then(t.hitch(this,function(b){a=b;c=a.variables[0].dimensions;for(d in c)c.hasOwnProperty(d)&&(c[d].hasRanges&&!0==c[d].hasRanges?v.push(new H({variableName:"",dimensionName:c[d].name,isSlice:!1,values:[c[d].values[0]]})):v.push(new H({variableName:"",dimensionName:c[d].name,isSlice:!0,values:[c[d].extent[0]]})));this._defaultMultidimensionalDefinition=v;f.callback(v)}),function(a){f.errback(a)});return f},_setDefaultMultidimensionalDefinition:function(a){var b,
c={};this.getDefaultMultidimensionalDefinition().then(t.hitch(this,function(v){b=v;0<b.length&&(this.mosaicRule?(c=t.clone(this.mosaicRule),c.multidimensionalDefinition=b):this.defaultMosaicRule?(c=t.clone(this.defaultMosaicRule),c.multidimensionalDefinition=b):c=new D({multidimensionalDefinition:b}),this.setMosaicRule(c,a))}))},_setDefaultRenderingRule:function(a){var b={};if(!this.renderingRule&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&
"none"!==this.rasterFunctionInfos[0].name.toLowerCase())b.rasterFunction=this.rasterFunctionInfos[0].name;else if(!this.renderingRule&&"esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version){var c="esriImageServiceDataTypeVector-UV"===this.serviceDataType?7:10;b.rasterFunction="Resample";b.rasterFunctionArguments={ResamplingType:c,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}}}b.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new A(b),this.setRenderingRule(this.defaultRenderingRule,
a))},_cleanupRequestParams:function(a){if(!a)return a;if(a.time&&a.mosaicRule){var b=new D(r.fromJson(a.mosaicRule));if(b&&b.multidimensionalDefinition&&0<b.multidimensionalDefinition.length){var c=s.filter(b.multidimensionalDefinition,function(a){return"StdTime"!==a.dimensionName});b.multidimensionalDefinition=c;a.mosaicRule=r.toJson(b.toJson())}}var b="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent".split(" "),v;for(v in b)a.hasOwnProperty(b[v])&&delete a[b[v]];
return a},_removeVisualizationStretchFunction:function(a){var b=a&&a.functionName;if(!b||"stretch"!==b.toLowerCase())return a;var c=a.functionArguments.Raster;return c&&c.functionName&&s.some(this.rasterFunctionInfos,function(a){return c.functionName===a.name})?c:a},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType},_isVectorData:function(){return"esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType},_isRasterFunctionInfoAvailable:function(a){return s.some(a&&(this.rasterFunctionInfos||[]),function(b){return b&&b.name&&b.name.toLowerCase()===a.toLowerCase()})},_createPixelData:function(a){a=new I({width:2,height:2,pixels:a,pixelType:this.pixelType,statistics:a});var b=this.fullExtent.getCenter(),b=new y(b.x,b.y,b.x+this.pixelSizeX,b.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:a,extent:b}},_resolve:function(a,
b,c,v,d){b&&this[b].apply(this,a);c&&c.apply(null,a);v&&B._resDfd(v,a,d)},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=k.connect(a,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(k.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();!b&&this._map&&this.refresh(!0)},_setTime:function(a){this._params&&
(this._params.time=a?a.toJson().join(","):null)},_onTimeExtentChangeHandler:function(a){this.suspended||(this._setTime(a),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()}});g("extend-esri")&&t.setObject("layers.ImageServiceLayerMixin",q,a);return q})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point".split(" "),function(q,t,b,s,r,m){var k=q(null,{declaredClass:"esri.layers.MosaicRule",
method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],constructor:function(b){t.isObject(b)&&(t.mixin(this,b),b.mosaicMethod&&(this.method=b.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),b.mosaicOperation&&(this.operation=b.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=
this._getOperatorEnum(this.operation)),b.fids&&(this.objectIds=b.fids),b.viewpoint&&(this.viewpoint=new m(b.viewpoint)),this.multidimensionalDefinition=b.multidimensionalDefinition||[])},toJson:function(){var b=null,f=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(f)for(var b=[],a=0;a<f;a++)b.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[a].declaredClass?this.multidimensionalDefinition[a].toJson():this.multidimensionalDefinition[a]);b={mosaicMethod:this.method,
where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation,multidimensionalDefinition:b};return r.filter(b,function(a){if(null!==a)return!0})},_getMethodEnum:function(b){if(b){var f=k.METHOD_NONE;switch(b.toLowerCase()){case "byattribute":f=k.METHOD_ATTRIBUTE;break;case "center":f=k.METHOD_CENTER;break;case "lockraster":f=k.METHOD_LOCKRASTER;
break;case "nadir":f=k.METHOD_NADIR;break;case "northwest":f=k.METHOD_NORTHWEST;break;case "seamline":f=k.METHOD_SEAMLINE;break;case "viewpoint":f=k.METHOD_VIEWPOINT}return f}},_getOperatorEnum:function(b){if(b)switch(b.toLowerCase()){case "first":return k.OPERATION_FIRST;case "last":return k.OPERATION_LAST;case "max":return k.OPERATION_MAX;case "min":return k.OPERATION_MIN;case "blend":return k.OPERATION_BLEND;case "mean":return k.OPERATION_MEAN;case "sum":return k.OPERATION_SUM}}});t.mixin(k,{METHOD_NONE:"esriMosaicNone",
METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});b("extend-esri")&&t.setObject("layers.MosaicRule",k,s);return k})},
"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(q,t,b,s,r){var m=q(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,constructor:function(b){if(t.isObject(b)){var g=0;this.functionName=b.rasterFunction;this.functionArguments=t.clone(b.rasterFunctionArguments||b.arguments);t.mixin(this,b);if(b=this.functionArguments)if(b.Raster=
this._toRasterFunction(b.Raster),b.Raster2=this._toRasterFunction(b.Raster2),b.DEM=this._toRasterFunction(b.DEM),b.FillRaster=this._toRasterFunction(b.FillRaster),b.Rasters&&b.Rasters.length)for(g=0;g<b.Rasters.length;g++)b.Rasters[g]=this._toRasterFunction(b.Rasters[g])}},_toRasterFunction:function(b){return b&&(b.rasterFunction||b.functionName)?new m(b):b},_rfToJson:function(b){b&&"esri.layers.RasterFunction"===b.declaredClass&&(b=b.toJson());return b},toJson:function(){var b=t.clone(this.functionArguments||
this.arguments);if(b&&(b.Raster=this._rfToJson(b.Raster),b.Raster2=this._rfToJson(b.Raster2),b.DEM=this._rfToJson(b.DEM),b.FillRaster=this._rfToJson(b.FillRaster),b.Rasters&&b.Rasters.length)){var g,f=[];for(g=0;g<b.Rasters.length;g++)f.push(this._rfToJson(b.Rasters[g]));b.Rasters=f}return r.filter({rasterFunction:this.functionName,rasterFunctionArguments:b,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(a){if(null!==a&&void 0!==a)return!0})}});
b("extend-esri")&&t.setObject("layers.RasterFunction",m,s);return m})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(q,t,b,s,r){q=q(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(b){t.isObject(b)&&t.mixin(this,b)},toJson:function(){return r.filter({variableName:this.variableName,dimensionName:this.dimensionName,values:this.values,
isSlice:this.isSlice},function(b){return null!==b})}});b("extend-esri")&&t.setObject("layers.DimensionalDefinition",q,s);return q})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec".split(" "),function(q,t,b,s,r,m,k,g,f,a,c,d,u,B,x,y){var w,E,D,A,H,G;t=t(a,{declaredClass:"esri.layers.Raster",
imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(a){this.imageServiceUrl=a;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(a,d,f){var k=this,m=new s(B._dfdCanceller);if(10>g("ie"))throw"This browser is not supported.";if(!a.imageServiceParameters)throw"Insufficient parameters to read data";
var q=b.clone(a.imageServiceParameters),t=a.pixelType;r.some(this.validPixelTypes,function(a){return a===t})||(q.pixelType="F32");r.some(this.validFormats,function(a){return a.toLowerCase()===q.format.toLowerCase()})||(q.format="lerc");var u=a.decodeFunc,v;this._prepareGetImageParameters(q);m._pendingDfd=c({url:this.imageServiceUrl+"/exportImage",handleAs:"arraybuffer",content:b.mixin(q,{f:"image"}),load:function(a){k.decode(a,{width:q.width,height:q.height,planes:null,pixelType:t,noDataValue:q.noData,
format:q.format,decodeFunc:u}).then(function(a){v={pixelBlock:a,extent:q.extent};k._resolve([v,q],"onRasterReadComplete",d,m)},function(a){k._resolve([a],null,f,m,!0)})},error:function(a){k._resolve([a],null,f,m,!0)}});return m.promise},decode:function(a,b){if(void 0===b||null===b)throw"missing decode options";var c,d;b.format&&(c=b.format.toUpperCase());"BSQ"!==c&&"BIP"!==c&&(c=this._getFormat(a));d=b.decodeFunc;if(void 0===d||null===d)d=this._getFormatDecoderDfd(c);return d(a,b)},onRasterReadComplete:function(){},
_prepareGetImageParameters:function(a){if(a.size&&a.bbox){var c=a.size.split(",");a.width=parseFloat(c[0]);a.height=parseFloat(c[1]);a.extent||(c=a.bbox.split(","),a.extent=new d(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]),new u(a.bboxSR)))}else{if(!a.width||Math.floor(a.width)!==a.width||!a.height||Math.floor(a.height)!==a.height)throw"Incorrect Image Dimensions";if(!a.extent||"esri.geometry.Extent"!==a.extent.declaredClass)throw"Incorrect extent";var c=a.extent,f=c.spatialReference.wkid||
k.toJson(c.spatialReference.toJson());delete a._ts;b.mixin(a,{bbox:c.xmin+","+c.ymin+","+c.xmax+","+c.ymax,imageSR:f,bboxSR:f,size:a.width+","+a.height},a.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(a,b,c){var d=a.ymax-a.ymin,f=a.xmax-a.xmin;c>=b?a.ymax=a.ymin+f*b/c:(f=d*c/b,a.xmax=a.xmin+f);return a},_resolve:function(a,b,c,d,f){b&&this[b].apply(this,a);c&&c.apply(null,a);d&&B._resDfd(d,a,f)},_getFormatDecoderDfd:function(a){var c=null;switch(a){case "LERC":c=this._decodeLerc;
break;case "JPEG":c=this._decodeJpeg;break;case "PNG":c=this._decodePng;break;case "BSQ":c=this._decodeBsq;break;case "BIP":c=this._decodeBip;break;case "TIFF":c=this._decodeTiff;break;default:c=function(a,b){throw"The raster format is not supported";}}c=b.hitch(this,c);return function(b,d){var f=new s;try{var g;"LERC"===a||!0===H?(g=c(b,d),f.resolve(g)):G.then(function(){g=c(b,d);f.resolve(g)})}catch(k){f.reject(k)}return f}},_getFormat:function(a){a=new Uint8Array(a,0,10);var b="";if(255===a[0]&&
216===a[1])b="JPEG";else if(137===a[0]&&80===a[1]&&78===a[2]&&71===a[3])b="PNG";else if(67===a[0]&&110===a[1]&&116===a[2]&&90===a[3]&&73===a[4]&&109===a[5]&&97===a[6]&&103===a[7]&&101===a[8]&&32===a[9])b="LERC";else if(-1<String.fromCharCode.apply(null,a).toLowerCase().indexOf("error"))b="ERROR";else if(73===a[0]&&73===a[1]&&42===a[2]&&0===a[3]||77===a[0]&&77===a[1]&&0===a[2]&&42===a[3])b="TIFF";return b},_validateDecodeParams:function(a){if(!a.height||Math.floor(a.height)!==a.height)throw"Height not provided.";
if(!a.width||Math.floor(a.width)!==a.width)throw"Width not provided.";},_decodeJpeg:function(a,b){if(!w)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(b);var c=(new w).decode(a);if(c.height!==b.height||c.width!==b.width)throw"The decoded image dimensions are incorrect.";var d=[],f,g;for(f=0;f<c.pixels.length;f++)g=c.pixels[f],d.push(this._calculateBandStatistics(g));return new x({width:c.width,height:c.height,pixels:c.pixels,pixelType:"U8",mask:c.mask,statistics:d})},_decodePng:function(a,
b){if(!E)throw"The png decoder module is not loaded.";this._validateDecodeParams(b);var c=new Uint8Array(a),d=new E(c),c=new Uint8Array(4*b.width*b.height);d.copyToImageData(c,d.decodePixels());for(var f=d=0,g,f=new Uint8Array(b.width*b.height),d=0;d<b.width*b.height;d++)f[d]=c[4*d+3];for(var k=new x({width:b.width,height:b.height,pixels:[],pixelType:"U8",mask:f,statistics:[]}),d=0;3>d;d++){g=new Uint8Array(b.width*b.height);for(f=0;f<b.width*b.height;f++)g[f]=c[4*f+d];k.addData({pixels:g,statistics:this._calculateBandStatistics(g)})}return k},
_decodeBsq:function(a,b){if(!D)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(b);M=b.noDataValue;b.pixelType=J(b.pixelType);var c=D.decodeBSQ(a,{bandCount:b.planes,width:b.width,height:b.height,pixelType:I,noDataValue:M}),d=[],f,g=null;for(f=0;f<c.pixels.length;f++)g=c.pixels[f],d.push(this._calculateBandStatistics(g));return new x({width:b.width,height:b.height,pixels:c.pixels,pixelType:b.pixelType,mask:c.maskData,statistics:d})},_decodeBip:function(a,b){this._validateDecodeParams(b);
M=b.noDataValue;b.pixelType=J(b.pixelType);var c=D.decodeBIP(a,{bandCount:b.planes,width:b.width,height:b.height,pixelType:I,noDataValue:M}),d=[],f,g=null;for(f=0;f<c.pixels.length;f++)g=c.pixels[f],d.push(this._calculateBandStatistics(g));return new x({width:b.width,height:b.height,pixels:c.pixels,pixelType:b.pixelType,mask:c.maskData,statistics:d})},_decodeTiff:function(a,b){this._validateDecodeParams(b);M=b.noDataValue;b.pixelType=J(b.pixelType);var c=A.decode(a),d=[],f,g=null;for(f=0;f<c.pixels.length;f++)g=
c.pixels[f],d.push(this._calculateBandStatistics(g,c.maskData));return new x({width:c.width,height:c.height,pixels:c.pixels,pixelType:c.pixelType,mask:c.maskData,statistics:d})},_decodeLerc:function(a,b){this._validateDecodeParams(b);M=b.noDataValue;b.pixelType=J(b.pixelType);for(var c=0,d,f=0,g,k=a.byteLength-10;f<k;){var m=y.decode(a,{inputOffset:f,encodedMaskData:d,returnMask:0===c?!0:!1,returnEncodedMask:0===c?!0:!1,returnFileInfo:!0,pixelType:I,noDataValue:M}),f=m.fileInfo.eofOffset;0===c&&(d=
m.encodedMaskData,g=new x({width:b.width,height:b.height,pixels:[],pixelType:b.pixelType,mask:m.maskData,statistics:[]}));c++;if(m.height!==b.height||m.width!==b.width)throw"The decoded image dimensions are incorrect";g.addData({pixels:m.pixelData,statistics:{minValue:m.minValue,maxValue:m.maxValue,noDataValue:m.noDataValue}})}return g},_calculateBandStatistics:function(a,b){var c=Infinity,d=-Infinity,f=a.length,g,k=0;if(b)for(g=0;g<f;g++)b[g]&&(k=a[g],c=k<c?k:c,d=k>d?k:d);else for(g=0;g<f;g++)k=
a[g],c=k<c?k:c,d=k>d?k:d;return{minValue:c,maxValue:d}},_loadRasterFormatModules:function(){G=new s;10>g("ie")?G.reject("unsupported browser version"):q(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(a,b,c,d){w=a;E=b;D=c;A=d;H=!0;G.resolve(!0)})}});var I=null,M=null,J=function(a){"U1"===a||"U2"===a||"U4"===a||"U8"===a?(a="U8",M=Math.pow(2,8)-1,I=Uint8Array):"U16"===a?(M=M||Math.pow(2,16)-1,I=Uint16Array):"U32"===
a?(M=M||Math.pow(2,32)-1,I=Uint32Array):"S8"===a?(M=M||0-Math.pow(2,7),I=Int8Array):"S16"===a?(M=M||0-Math.pow(2,15),I=Int16Array):"S32"===a?(M=M||0-Math.pow(2,31),I=Int32Array):I=Float32Array;return a};g("extend-esri")&&b.setObject("layers.Raster",t,f);return t})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(q,t,b,s){q=q([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],
constructor:function(b){if(b){if(!b.width||Math.floor(b.width)!==b.width)throw"PixelBlock: incorrect width";if(!b.height||Math.floor(b.height)!==b.height)throw"PixelBlock: incorrect height";if(!b.pixels||!b.statistics)throw"PixelBlock: pixel data or statistics not present";this.width=b.width;this.height=b.height;this.pixels=b.pixels;this.pixelType=b.pixelType||null;this.statistics=b.statistics;this.mask=b.mask||null}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?console.error("Inconsistent pixel data and statistics"):
this.statistics.length},addData:function(b){if(!b.pixels||!b.statistics)throw"Pixel data or statistics are not present";if(b.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(b.statistics);this.pixels.push(b.pixels)},getAsRGBA:function(){var b=new ArrayBuffer(4*this.width*this.height);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(b);break;default:this._fillFrom8Bit(b)}return new Uint8ClampedArray(b)},
getAsRGBAFloat:function(){var b=new Float32Array(4*this.width*this.height);this._fillFrom32Bit(b);return b},clone:function(){var b=new this.constructor;b.width=this.width;b.height=this.height;b.pixelType=this.pixelType;this.mask&&(b.mask=new Uint8Array(this.mask));var m,k;if(this.pixels){b.pixels=[];k=this.pixels.length;for(m=0;m<k;m++)b.pixels[m]=new Float32Array(this.pixels[m])}if(this.statistics){b.statistics=[];k=this.statistics.length;for(m=0;m<k;m++)b.statistics[m]=t.clone(this.statistics[m])}return b},
_fillFrom8Bit:function(b){var m=this.pixels,k=this.mask;if(!b||!m||!m.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var g,f,a;g=f=a=m[0];3<=m.length&&(f=m[1],a=m[2]);var m=new Uint32Array(b),c=this.width*this.height;if(g.length!==c)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(k&&k.length===c)for(b=0;b<c;b++)k[b]&&(m[b]=-16777216|a[b]<<16|f[b]<<8|g[b]);else for(b=0;b<c;b++)m[b]=-16777216|a[b]<<16|f[b]<<8|g[b]},_fillFromNon8Bit:function(b){var m=
this.pixels,k=this.mask,g=this.statistics;if(!b||!m||!m.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var f=1,a=0;g&&0<g.length?(a=g[0].minValue,f=255/(g[0].maxValue-g[0].minValue)):(f=255,"S8"===this.pixelType?(a=-128,f=127):"U16"===this.pixelType?f=65535:"S16"===this.pixelType?(a=-32768,f=32767):"U32"===this.pixelType?f=4294967295:"S32"===this.pixelType?(a=-2147483648,f=2147483647):"F32"===this.pixelType?(a=-3.4*1E39,f=3.4*1E39):"F64"===this.pixelType&&
(a=-Number.MAX_VALUE,f=Number.MAX_VALUE),f=255/(f-a));b=new Uint32Array(b);var g=this.width*this.height,c,d,q;c=m[0];if(c.length!==g)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(3<=m.length)if(d=m[1],q=m[2],k&&k.length===g)for(m=0;m<g;m++)k[m]&&(b[m]=-16777216|(q[m]-a)*f<<16|(d[m]-a)*f<<8|(c[m]-a)*f);else for(m=0;m<g;m++)b[m]=-16777216|(q[m]-a)*f<<16|(d[m]-a)*f<<8|(c[m]-a)*f;else if(k&&k.length===g)for(m=0;m<g;m++)d=(c[m]-a)*f,k[m]&&(b[m]=-16777216|d<<16|d<<8|d);
else for(m=0;m<g;m++)d=(c[m]-a)*f,b[m]=-16777216|d<<16|d<<8|d},_fillFrom32Bit:function(b){var m=this.pixels,k=this.mask;if(!b||!m||!m.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var g,f,a;g=f=a=m[0];3<=m.length&&(f=m[1],a=m[2]);var c=this.width*this.height;if(g.length!==c)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");var d=0;if(k&&k.length===c)for(m=0;m<c;m++)b[d++]=g[m],b[d++]=f[m],b[d++]=a[m],b[d++]=k[m];else for(m=0;m<
c;m++)b[d++]=g[m],b[d++]=f[m],b[d++]=a[m],b[d++]=255}});b("extend-esri")&&t.setObject("layers.PixelBlock",q,s);return q})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var q={defaultNoDataValue:-3.4027999387901484E38,decode:function(b,s){var r;s=s||{};var m=s.inputOffset||0,k=s.encodedMaskData||null===s.encodedMaskData,g={},f=new Uint8Array(b,m,10);g.fileIdentifierString=String.fromCharCode.apply(null,f);if("CntZImage"!=g.fileIdentifierString.trim())throw"Unexpected file identifier string: "+
g.fileIdentifierString;var m=m+10,a=new DataView(b,m,24);g.fileVersion=a.getInt32(0,!0);g.imageType=a.getInt32(4,!0);g.height=a.getUint32(8,!0);g.width=a.getUint32(12,!0);g.maxZError=a.getFloat64(16,!0);m+=24;if(!k)if(a=new DataView(b,m,16),g.mask={},g.mask.numBlocksY=a.getUint32(0,!0),g.mask.numBlocksX=a.getUint32(4,!0),g.mask.numBytes=a.getUint32(8,!0),g.mask.maxValue=a.getFloat32(12,!0),m+=16,0<g.mask.numBytes){var k=new Uint8Array(Math.ceil(g.width*g.height/8)),a=new DataView(b,m,g.mask.numBytes),
f=a.getInt16(0,!0),c=2,d=0;do{if(0<f)for(;f--;)k[d++]=a.getUint8(c++);else for(var u=a.getUint8(c++),f=-f;f--;)k[d++]=u;f=a.getInt16(c,!0);c+=2}while(c<g.mask.numBytes);if(-32768!==f||d<k.length)throw"Unexpected end of mask RLE encoding";g.mask.bitset=k;m+=g.mask.numBytes}else 0==(g.mask.numBytes|g.mask.numBlocksY|g.mask.maxValue)&&(k=new Uint8Array(Math.ceil(g.width*g.height/8)),g.mask.bitset=k);a=new DataView(b,m,16);g.pixels={};g.pixels.numBlocksY=a.getUint32(0,!0);g.pixels.numBlocksX=a.getUint32(4,
!0);g.pixels.numBytes=a.getUint32(8,!0);g.pixels.maxValue=a.getFloat32(12,!0);m+=16;k=g.pixels.numBlocksX;f=g.pixels.numBlocksY;k+=0<g.width%k?1:0;f+=0<g.height%f?1:0;g.pixels.blocks=Array(k*f);c=1E9;for(u=d=0;u<f;u++)for(var B=0;B<k;B++){var x=0,a=new DataView(b,m,Math.min(10,b.byteLength-m)),y={};g.pixels.blocks[d++]=y;var w=a.getUint8(0);x++;y.encoding=w&63;if(3<y.encoding)throw"Invalid block encoding ("+y.encoding+")";if(2===y.encoding)m++,c=Math.min(c,0);else{if(0!==w&&2!==w){w>>=6;y.offsetType=
w;if(2===w)y.offset=a.getInt8(1),x++;else if(1===w)y.offset=a.getInt16(1,!0),x+=2;else if(0===w)y.offset=a.getFloat32(1,!0),x+=4;else throw"Invalid block offset type";c=Math.min(y.offset,c);if(1===y.encoding)if(w=a.getUint8(x),x++,y.bitsPerPixel=w&63,w>>=6,y.numValidPixelsType=w,2===w)y.numValidPixels=a.getUint8(x),x++;else if(1===w)y.numValidPixels=a.getUint16(x,!0),x+=2;else if(0===w)y.numValidPixels=a.getUint32(x,!0),x+=4;else throw"Invalid valid pixel count type";}m+=x;if(3!=y.encoding)if(0===
y.encoding){a=(g.pixels.numBytes-1)/4;if(a!==Math.floor(a))throw"uncompressed block has invalid length";x=new ArrayBuffer(4*a);w=new Uint8Array(x);w.set(new Uint8Array(b,m,4*a));x=new Float32Array(x);for(w=0;w<x.length;w++)c=Math.min(c,x[w]);y.rawData=x;m+=4*a}else 1===y.encoding&&(a=Math.ceil(y.numValidPixels*y.bitsPerPixel/8),x=Math.ceil(a/4),x=new ArrayBuffer(4*x),w=new Uint8Array(x),w.set(new Uint8Array(b,m,a)),y.stuffedData=new Uint32Array(x),m+=a)}}g.pixels.minValue=c;g.eofOffset=m;var m=null!=
s.noDataValue?s.noDataValue:q.defaultNoDataValue,f=s.encodedMaskData,x=s.returnMask,c=0,d=g.pixels.numBlocksX,u=g.pixels.numBlocksY,B=Math.floor(g.width/d),y=Math.floor(g.height/u),a=2*g.maxZError,f=f||(g.mask?g.mask.bitset:null),E,k=new (s.pixelType||Float32Array)(g.width*g.height);x&&f&&(E=new Uint8Array(g.width*g.height));for(var x=new Float32Array(B*y),D,A,w=0;w<=u;w++){var H=w!==u?y:g.height%u;if(0!==H)for(var G=0;G<=d;G++){var I=G!==d?B:g.width%d;if(0!==I){var M=w*g.width*y+G*B,J=g.width-I,
S=g.pixels.blocks[c],L,Q;if(2>S.encoding){if(0===S.encoding)L=S.rawData;else{L=S.stuffedData;Q=S.bitsPerPixel;D=S.numValidPixels;A=S.offset;var R=a,X=x,V=g.pixels.maxValue,O=(1<<Q)-1,U=0,v=void 0,K=0,C=void 0,l=void 0,e=Math.ceil((V-A)/R),v=4*L.length-Math.ceil(Q*D/8);L[L.length-1]<<=8*v;for(v=0;v<D;v++)0===K&&(l=L[U++],K=32),K>=Q?(C=l>>>K-Q&O,K-=Q):(K=Q-K,C=(l&O)<<K&O,l=L[U++],K=32-K,C+=l>>>K),X[v]=C<e?A+C*R:V;L=x}Q=0}else r=2===S.encoding?0:S.offset;var h;if(f)for(A=0;A<H;A++){M&7&&(h=f[M>>3],h<<=
M&7);for(D=0;D<I;D++)M&7||(h=f[M>>3]),h&128?(E&&(E[M]=1),k[M++]=2>S.encoding?L[Q++]:r):(E&&(E[M]=0),k[M++]=m),h<<=1;M+=J}else if(2>S.encoding)for(A=0;A<H;A++){for(D=0;D<I;D++)k[M++]=L[Q++];M+=J}else for(A=0;A<H;A++){for(D=0;D<I;D++)k[M++]=r;M+=J}if(1===S.encoding&&Q!==S.numValidPixels)throw"Block and Mask do not match";c++}}}r=E;E={width:g.width,height:g.height,pixelData:k,minValue:g.pixels.minValue,maxValue:g.pixels.maxValue,noDataValue:m};r&&(E.maskData=r);s.returnEncodedMask&&g.mask&&(E.encodedMaskData=
g.mask.bitset?g.mask.bitset:null);if(s.returnFileInfo&&(E.fileInfo=t(g),s.computeUsedBitDepths)){r=E.fileInfo;h=g.pixels.numBlocksX*g.pixels.numBlocksY;L={};for(Q=0;Q<h;Q++)m=g.pixels.blocks[Q],0===m.encoding?L.float32=!0:1===m.encoding?L[m.bitsPerPixel]=!0:L[0]=!0;g=Object.keys(L);r.bitDepths=g}return E}},t=function(b){return{fileIdentifierString:b.fileIdentifierString,fileVersion:b.fileVersion,imageType:b.imageType,height:b.height,width:b.width,maxZError:b.maxZError,eofOffset:b.eofOffset,mask:b.mask?
{numBlocksX:b.mask.numBlocksX,numBlocksY:b.mask.numBlocksY,numBytes:b.mask.numBytes,maxValue:b.mask.maxValue}:null,pixels:{numBlocksX:b.pixels.numBlocksX,numBlocksY:b.pixels.numBlocksY,numBytes:b.pixels.numBytes,maxValue:b.pixels.maxValue,minValue:b.pixels.minValue,noDataValue:this.noDataValue}}};return q})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(q,t,b,s,r,m){q=q(null,
{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(b){t.mixin(this,b);this.isDataUV=b&&b.isDataUV?b.isDataUV:!1;this.computeMagnitudeAndDirection=t.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(b,g){this.inputUnit=b;this.outputUnit=g;this.unitConversionFactor=1;this._updateUnitConvFactor()},
_updateUnitConvFactor:function(){var b=m.indexOf(this.speedUnits,this.inputUnit),g=m.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=b&&0<=g){var f=[1,0.277778,0.514444,0.3048,0.44704,0];this.unitConversionFactor=f[b]/f[g]}},computeMagnitudeAndDirection:function(b){if(!r.isDefined(b))throw"Could not compute magnitude and direction. No pixel data is available.";var g=b.pixelBlock;if(!r.isDefined(g)||2!==g.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";
var f=b.extent,a=(f.xmax-f.xmin)/g.width,c=(f.ymax-f.ymin)/g.height,d=f.xmin+a/2,f=f.ymax-c/2;g.statistics[0].minValue=0;g.statistics[0].maxValue=0;var m=180/Math.PI,q=[],s=0,t=0,w=0,E=!r.isDefined(g.mask),D,A,H,G,I,M,J,S;I=J=Infinity;M=S=-Infinity;for(s=0;s<g.height;s++)for(t=0;t<g.width;t++,w++)if(q.push([d+a*t,f-c*s]),E||g.mask[w])H=D=g.pixels[0][w]*this.unitConversionFactor,G=A=g.pixels[1][w],this.isDataUV&&(H=Math.sqrt(D*D+A*A),G=90-m*Math.atan2(A,D),g.pixels[0][w]=H*this.unitConversionFactor,
g.pixels[1][w]=G),H>M&&(M=H),H<I&&(I=H),G>S&&(S=G),G<J&&(J=G);g.statistics[0].maxValue=M;g.statistics[0].minValue=I;g.statistics[1].maxValue=S;g.statistics[1].minValue=J;b.locations=q;return b}});b("extend-esri")&&t.setObject("layers.pixelFilters.VectorFieldPixelFilter",q,s);return q})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred","dojo/sniff"],function(q,t,b,s){var r;return t(null,{constructor:function(b){this.ctx=b.ctx;this._loadRasterFormatModule()},
decode:function(m,k){if(!k.width||!k.height)throw"Native decoding requires the image format, width and height";var g=new b,f,a=new Uint8Array(m),c=this._getFormat(m);if("error"===c)throw"invalid format";"jpeg"===c&&(f=this._getMask(a,k));var d="",q,r;for(q=0;q<a.length;q+=65535)r=a.subarray(q,q+65535>a.length-1?a.length-1:q+65535),d+=String.fromCharCode.apply(null,r);var a="data:image/"+c+";base64,"+window.btoa(d),s=new Image,t;s.src=a;var w=this;s.onload=function(){w.ctx.clearRect(0,0,k.width,k.height);
w.ctx.drawImage(s,0,0);var a=w.ctx.getImageData(0,0,s.width,s.height);t=a.data;if(f)for(q=0;q<f.length;q++)t[4*q+3]=f[q]?255:0;w.ctx.putImageData(a,0,0);g.resolve(null)};s.onerror=function(){g.reject("cannot load image")};return g},_getFormat:function(b){b=new Uint8Array(b,0,10);var k="error";255===b[0]&&216===b[1]?k="jpeg":137===b[0]&&(80===b[1]&&78===b[2]&&71===b[3])&&(k="png");return k},_getMask:function(b,k){var g;try{if(!r)throw"The zlib decoder module is not loaded.";var f=0,a=0,c=Math.round(b.length/
2);1===c%2&&(c+=1);for(var d=b.length-2,f=c;f<d&&!(255===b[f]&&217===b[f+1]);f++);c=f+=2;if(c<b.length-1){var q=(new r(b.subarray(c))).getBytes();g=new Uint8Array(k.width*k.height);for(f=c=0;f<q.length;f++)for(a=7;0<=a;a--)g[c++]=q[f]>>a&1}}catch(s){}return g},_loadRasterFormatModule:function(){10>s("ie")||q(["./Zlib"],function(b){r=b})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),
function(q,t,b,s,r,m,k,g){q=q(k,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(b){this._url.path+="/identify";this._handler=t.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(b,a,c,d,k){try{var m=new g(b);this._successHandler([m],"onComplete",c,k)}catch(q){this._errorHandler(q,d,k)}},execute:function(b,a,c,d){var g=d.assembly;b=this._encode(t.mixin({},this._url.query,{f:"json"},b.toJson(g&&g[0])));var k=this._handler,
m=this._errorHandler;return r({url:this._url.path,content:b,callbackParamName:"callback",load:function(b,f){k(b,f,a,c,d.dfd)},error:function(a){m(a,c,d.dfd)}})},onComplete:function(){}});m._createWrappers(q);b("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyTask",q,s);return q})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),function(q,t,b,s,r,m){q=q(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",
constructor:function(b){b.catalogItems&&(this.catalogItems=new m(b.catalogItems));b.location&&(this.location=r.fromJson(b.location));this.catalogItemVisibilities=b.catalogItemVisibilities;this.name=b.name;this.objectId=b.objectId;this.value=b.value;this.processedValues=b.processedValues;this.properties=b.properties}});b("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyResult",q,s);return q})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),
function(q,t,b,s,r,m,k,g){q=q(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,toJson:function(f){var a=f&&f.geometry||this.geometry;f={geometry:a,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?b.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?
b.toJson(this.renderingRule.toJson()):null};a&&(f.geometryType=g.getJsonType(a));a=this.timeExtent;f.time=a?a.toJson().join(","):null;k.isDefined(this.pixelSizeX)&&k.isDefined(this.pixelSizeY)?f.pixelSize=b.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(f.pixelSize=this.pixelSize?b.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(f.renderingRules=b.toJson(s.map(this.renderingRules,function(a){return a.toJson()})));return f}});r("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyParameters",
q,m);return q})},"esri/geometry/geometryEngine":function(){define("require exports esri/kernel esri/geometry/Geometry esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Point esri/geometry/Extent esri/geometry/Multipoint dojo/_base/lang".split(" "),function(q,t,b,s,r,m,k,g,f,a){function c(a){if(void 0===k.fromJson){if(void 0!==a.x&&void 0!==a.y)return new k(a);if(void 0!==a.paths)return new m(a);if(void 0!==a.rings)return new r(a);if(void 0!==a.points)return new f(a);if(void 0!==a.xmin&&void 0!==
a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new g(a)}else{if(void 0!==a.x&&void 0!==a.y)return k.fromJson(a);if(void 0!==a.paths)return m.fromJson(a);if(void 0!==a.rings)return r.fromJson(a);if(void 0!==a.points)return f.fromJson(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return g.fromJson(a)}}function d(a){if(void 0===k.fromJson){if(void 0!==a.x&&void 0!==a.y)return new k(a);if(void 0!==a.paths)return new m(a);if(void 0!==a.rings)return new r(a);if(void 0!==a.points)return new f(a);
if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new g(a)}else{if(void 0!==a.x&&void 0!==a.y)return k.fromJSON(a);if(void 0!==a.paths)return m.fromJSON(a);if(void 0!==a.rings)return r.fromJSON(a);if(void 0!==a.points)return f.fromJSON(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return g.fromJSON(a)}}function u(a,b){var c;if(null==a||void 0===a||"number"===typeof a)return a;var l=a.toString();if(""===l)return null;if(2==b){if(c=X[l],void 0!==
c)return c}else if(0==b){c=R[l];if(void 0!==c)return c;c=V[a];if(void 0!==c)return c}else if(3==b&&(c=R[l],void 0!==c))return c;if(1==b&&(c=V[a],void 0!==c))return c;if(!0===/^\d+$/.test(l))return parseInt(l);throw Error("Unrecognised Unit Type");}function B(a){if(void 0!==a&&null!==a)switch(a){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function x(a,b){if(null===a||void 0===a||a.u())return null;switch(a.F()){case A.j.Point:var c=
new k(a.lk(),a.mk(),b);if(L){var l=a.hasAttribute(A.xf.M);a.hasAttribute(A.xf.Z)&&c.set("z",a.kO());l&&c.set("m",a.MN())}return c;case A.j.Polygon:var c=a.hasAttribute(A.xf.Z),l=a.hasAttribute(A.xf.M),e=y(a,c,l),c=new r({rings:e,hasZ:c,hasM:l});L?c.set("spatialReference",b):c.setSpatialReference(b);c.setCacheValue("_geVersion",a);return c;case A.j.Polyline:return c=a.hasAttribute(A.xf.Z),l=a.hasAttribute(A.xf.M),e=y(a,c,l),c=new m({paths:e,hasZ:c,hasM:l}),L?c.set("spatialReference",b):c.setSpatialReference(b),
c.setCacheValue("_geVersion",a),c;case A.j.MultiPoint:var c=a.hasAttribute(A.xf.Z),l=a.hasAttribute(A.xf.M),h=e=null;c&&(e=a.oc(A.xf.Z));l&&(h=a.oc(A.xf.M));var n=new A.b,z=a.G(),d=new f(b);L&&(d.set("hasZ",c),d.set("hasM",l));for(var N=0;N<z;N++){a.A(N,n);var T=[n.x,n.y];c&&T.push(e.get(N));l&&T.push(h.get(N));d.addPoint(T)}d.setCacheValue("_geVersion",a);return d;case A.j.Envelope:return e=a.hasAttribute(A.xf.Z),c=a.hasAttribute(A.xf.M),l=new g(a.S.w,a.S.D,a.S.C,a.S.H,b),L&&(e&&(e=a.Ah(A.xf.Z,0),
l.set("zmin",e.ra),l.set("zmax",e.wa)),c&&(e=a.Ah(A.xf.M,0),l.set("mmin",e.ra),l.set("mmax",e.wa))),l.setCacheValue("_geVersion",a),l}return null}function y(a,b,c){var l=[],e=a.fa(),h=null,n=null;b&&(h=a.oc(A.xf.Z));c&&(n=a.oc(A.xf.M));for(var z=new A.b,d=0;d<e;d++){for(var f=a.Fa(d),g=a.Ia(d),k=0,m=0,q=NaN,r=NaN,s=NaN,t=NaN,u=a.wc(d),w=[],x=f;x<f+g;x++){a.A(x,z);var t=s=NaN,y=[z.x,z.y];b&&(s=h.get(x),y.push(s));c&&(e=n.get(x),y.push(t));x==f&&u&&(k=z.x,m=z.y,q=s,r=t);w.push(y)}!u||k==z.x&&m==z.y&&
(!b||isNaN(q)&&isNaN(s)||q==s)&&(!c||isNaN(r)&&isNaN(t)||r==t)||w.push(w[0].slice(0));l.push(w)}return l}function w(a){var b=a._geVersion;if(null==b||void 0==b){if(Object.freeze&&Object.isFrozen(a))return 102100===a.wkid?U:4326===a.wkid?O:A.Nf.create(a.wkid);-1!=a.wkid&&null!==a.wkid&&void 0!==a.wkid?(b=A.Nf.create(a.wkid),a._geVersion=b):""!==a.wkt&&void 0!==a.wkt&&null!==a.wkt&&(b=A.Nf.ML(a.wkt),a._geVersion=b)}return b}function E(a){if(null==a)return null;var b=a.getCacheValue("_geVersion");if(null==
b||void 0==b)b=A.Qb.HL(a),a.setCacheValue("_geVersion",b);return b}function D(a){return null===a.spatialReference?null:w(a.spatialReference)}var A;(function(a){var b=function(){function a(){}a.Sk=!1;a.ht=!1;a.Zv="";return a}();a.ah=b;if("undefined"!==typeof window)a.ah.Zv="browser","Float64Array"in window&&(a.ah.ht=!0),"ArrayBuffer"in window&&(a.ah.Sk=!0);else if("undefined"!==typeof process)b.Zv="node",a.ah.Sk=!0,a.ah.ht=!0;else{b.Zv="browser";try{var c=new ArrayBuffer(0);new Uint8Array(c);a.ah.Sk=
!0;a.ah.ht=!0}catch(l){a.ah.Sk=!1}}})(A||(A={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Point=33]="Point";a[a.Line=322]="Line";a[a.Envelope=197]="Envelope";a[a.MultiPoint=550]="MultiPoint";a[a.Polyline=1607]="Polyline";a[a.Polygon=1736]="Polygon"})(a.j||(a.j={}));var b=a.j;(function(a){a[a.enumMild=0]="enumMild";a[a.enumMedium=1]="enumMedium";a[a.enumHot=2]="enumHot"})(a.rH||(a.rH={}));var c=function(){function l(){this.description=null;this.Tx=0}l.prototype.F=function(){return 0};
l.prototype.gb=function(){return-1};l.prototype.Qf=function(a){this.rc();a!=this.description&&this.om(a)};l.prototype.om=function(){};l.prototype.Ik=function(e){this.rc();e!=this.description&&(e=a.Pd.PN(this.description,e),e!=this.description&&this.om(e))};l.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)};l.prototype.Oe=function(e){this.rc();this.description.hasAttribute(e)||(e=a.Pd.ON(this.description,e),this.om(e))};l.prototype.Ah=function(){return null};l.prototype.Dp=
function(){};l.prototype.s=function(){};l.prototype.Dn=function(){};l.prototype.ed=function(a){this.s(a)};l.prototype.u=function(){return!0};l.prototype.Ka=function(){};l.prototype.Pe=function(){};l.prototype.Qa=function(){return null};l.prototype.copyTo=function(){};l.prototype.Mh=function(){return 0};l.prototype.ac=function(){return 0};l.prototype.WC=function(){return this.hasAttribute(1)};l.ve=function(a){return((a&192)>>6)+1>>1};l.Lm=function(a){return 0!=(a&32)};l.oT=function(a){return 0!=(a&
64)};l.RO=function(a){return 0!=(a&128)};l.Mc=function(a){return 0!=(a&256)};l.Th=function(a){return 0!=(a&512)};l.Lc=function(a){return 0!=(a&1024)};l.prototype.wm=function(){var a=this.Qa();this.copyTo(a);return a};l.prototype.Rf=function(){return null};l.Zj=function(a){var b=a.Qa();a.copyTo(b);return b};l.prototype.rc=function(){0<=this.Tx&&(this.Tx+=2147483649)};l.Uu=function(e){var h=e.F();if(l.Th(h))return e.G();if(e.u())return 0;if(h==b.Envelope)return 4;if(h==b.Point)return 1;if(l.Mc(h))return 2;
throw a.g.sa("missing type");};return l}();a.U=c})(A||(A={}));(function(a){var b=function(){function b(){this.y=this.x=0}b.Pa=function(a,e){var h=new b;h.x=a;h.y=e;return h};b.prototype.na=function(a,e){this.x=a;this.y=e};b.prototype.K=function(a){this.x=a.x;this.y=a.y};b.prototype.Bq=function(a,e){return this.x===a&&this.y===e};b.prototype.Vw=function(a){return 2.220446049250313E-16>=Math.abs(this.x-a.x)&&2.220446049250313E-16>=Math.abs(this.y-a.y)};b.prototype.vb=function(a){return this.x===a.x&&
this.y===a.y};b.prototype.mc=function(a){return a==this?!0:a instanceof b?this.x==a.x&&this.y==a.y:!1};b.prototype.sub=function(a){this.x-=a.x;this.y-=a.y};b.prototype.qc=function(a,e){this.x=a.x-e.x;this.y=a.y-e.y};b.prototype.add=function(a,e){void 0!==e?(this.x=a.x+e.x,this.y=a.y+e.y):(this.x+=a.x,this.y+=a.y)};b.prototype.zp=function(){this.x=-this.x;this.y=-this.y};b.prototype.pr=function(a){this.x=-a.x;this.y=-a.y};b.prototype.NO=function(a,e,b){this.x=a.x*(1-b)+e.x*b;this.y=a.y*(1-b)+e.y*b};
b.prototype.Er=function(a,e){this.x=this.x*a+e.x;this.y=this.y*a+e.y};b.prototype.CR=function(a,e,b){this.x=e.x*a+b.x;this.y=e.y*a+b.y};b.prototype.scale=function(a){this.x*=a;this.y*=a};b.prototype.compare=function(a){return this.y<a.y?-1:this.y>a.y?1:this.x<a.x?-1:this.x>a.x?1:0};b.prototype.normalize=function(){var a=this.length();0==a&&(this.x=1,this.y=0);this.x/=a;this.y/=a};b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};b.prototype.Sp=function(){return this.x*this.x+
this.y*this.y};b.Gb=function(a,e){return Math.sqrt(this.$b(a,e))};b.Xv=function(a,e,b,n){a-=b;e-=n;return Math.sqrt(a*a+e*e)};b.prototype.ml=function(a){return this.x*a.x+this.y*a.y};b.prototype.uA=function(a){return Math.abs(this.x*a.x)+Math.abs(this.y*a.y)};b.prototype.Ai=function(a){return this.x*a.y-this.y*a.x};b.prototype.Dr=function(a,e){var b=-this.x*e+this.y*a;this.x=this.x*a+this.y*e;this.y=b};b.prototype.st=function(){var a=this.x;this.x=-this.y;this.y=a};b.prototype.zD=function(a){this.x=
-a.y;this.y=a.x};b.prototype.Ip=function(){var a=this.x;this.x=this.y;this.y=-a};b.prototype.FA=function(){this.y=this.x=NaN};b.prototype.ov=function(){return isNaN(this.x)};b.prototype.os=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3};b.aq=function(a,e){var b=a.os(),n=e.os();return n==b?(b=a.Ai(e),0>b?1:0<b?-1:0):b<n?-1:1};b.GT=function(a,e){return b.aq(a,e)};b.$b=function(a,e){var b=a.x-e.x,n=a.y-e.y;return b*b+n*n};b.prototype.toString=function(){return"("+this.x+" , "+this.y+
")"};b.prototype.Eh=function(){this.y=this.x=NaN};b.prototype.xJ=function(){if(this.ov())return NaN;switch(0){case 0:return Math.abs(this.x)>=Math.abs(this.y)?Math.abs(this.x):Math.abs(this.y);case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:return Math.pow(Math.pow(this.x,0)+Math.pow(this.y,0),1/0)}};b.prototype.offset=function(a,e){var h=b.Gb(a,e),n=b.Pa(this.x,this.y);if(0==h)return b.Gb(n,a);var c=new b;c.K(e);c.sub(a);n.sub(a);return n.Ai(c)/
h};b.zn=function(b,e,h){var n=new a.$k;n.set(e.x);n.sub(b.x);var c=new a.$k;c.set(h.y);c.sub(b.y);var d=new a.$k;d.set(e.y);d.sub(b.y);var f=new a.$k;f.set(h.x);f.sub(b.x);n.yp(c);d.yp(f);n.sub(d);if(!n.Cq())return h=n.value(),0>h?-1:0<h?1:0;n=new a.Tn(e.x);c=new a.Tn(b.x);d=new a.Tn(b.y);n=n.mr(c);b=new a.Tn(h.y);b=b.mr(d);e=new a.Tn(e.y);e=e.mr(d);h=new a.Tn(h.x);h=h.mr(c);n=n.Up(b);e=e.Up(h);n=n.Up(e);return n.uP()?-1:n.mO()?1:0};b.prototype.ic=function(){return a.J.Rh(a.J.Rh())};return b}();a.b=
b})(A||(A={}));(function(a){var b=function(){function a(b){this.Nv=this.Nr=0;this.DS=b}a.prototype.reset=function(){this.Nv=this.Nr=0};a.prototype.add=function(a){a-=this.Nv;var e=this.Nr+a;this.Nv=e-this.Nr-a;this.Nr=e};a.prototype.sub=function(a){this.add(-a)};a.prototype.rl=function(){return this.DS+this.Nr};return a}();a.$u=b;b=function(){function a(){}a.KT=function(a,e){return 0<=e?Math.abs(a):-Math.abs(a)};a.sign=function(a){return 0>a?-1:0<a?1:0};a.gH=function(a){return a-360*Math.floor(a/
360)};a.round=function(a){return Math.floor(a+0.5)};a.Sy=function(a){return a*a};a.tt=function(a,e,b){var n;0.5>=b?n=a+(e-a)*b:n=e-(e-a)*(1-b);return n};a.BD=function(a,e,b,n){0.5>=b?(n.x=a.x+(e.x-a.x)*b,n.y=a.y+(e.y-a.y)*b):(n.x=e.x-(e.x-a.x)*(1-b),n.y=e.y-(e.y-a.y)*(1-b))};a.sP=function(a,e,b,n,c,d){0.5>=c?(d.x=a+(b-a)*c,d.y=e+(n-e)*c):(d.x=b-(b-a)*(1-c),d.y=n-(n-e)*(1-c))};return a}();a.vi=b})(A||(A={}));var H=self.__extends||function(a,b){function c(){this.constructor=a}for(var l in b)b.hasOwnProperty(l)&&
(a[l]=b[l]);c.prototype=b.prototype;a.prototype=new c};(function(a){var b=function(b){function l(){b.call(this);this.ia=this.ma=this.ka=this.oa=0;this.ga=null}H(l,b);l.prototype.Nb=function(){return a.b.Pa(this.oa,this.ka)};l.prototype.gt=function(a){a.x=this.oa;a.y=this.ka};l.prototype.fd=function(a){this.gl(0,a)};l.prototype.My=function(e,b){this.gl(0,a.b.Pa(e,b))};l.prototype.Fn=function(a){this.wA(0,a)};l.prototype.setStart=function(a){this.CA(0,a)};l.prototype.ft=function(a,b){return this.zd(0,
a,b)};l.prototype.Ly=function(a,b,n){this.pm(0,a,b,n)};l.prototype.pc=function(){return a.b.Pa(this.ma,this.ia)};l.prototype.tw=function(a){a.x=this.ma;a.y=this.ia};l.prototype.wd=function(a){this.gl(1,a)};l.prototype.Ok=function(e,b){this.gl(1,a.b.Pa(e,b))};l.prototype.Cn=function(a){this.wA(1,a)};l.prototype.setEnd=function(a){this.CA(1,a)};l.prototype.Vs=function(a,b){return this.zd(1,a,b)};l.prototype.By=function(a,b,n){this.pm(1,a,b,n)};l.prototype.gb=function(){return 1};l.prototype.u=function(){return this.tc()};
l.prototype.Ka=function(){};l.prototype.Mh=function(){return 0};l.prototype.Ha=function(a,b,n,l,c){return this.vJ(a,b,n,l,c)};l.prototype.kc=function(a,b){return 0!=this.cq(a,b,!1)};l.prototype.Dq=function(a,b){return this.ps(a,b,!1)};l.prototype.ps=function(){return null};l.prototype.tc=function(){return!1};l.prototype.qv=function(e){this.rc();if(null==this.ga&&0<e)this.ga=a.J.Lh(2*e);else if(null!=this.ga&&this.ga.length<2*e){for(var b=this.ga.slice(0),n=this.ga.length;n<2*e;n++)b[n]=0;this.ga=
b}};l.JI=function(a,b,n){if(0<n)var l=0;for(var c=0;c<n;c++)b[0+l]=a[0],l++};l.prototype.gl=function(a,b){0!=a?(this.ma=b.x,this.ia=b.y):(this.oa=b.x,this.ka=b.y)};l.prototype.om=function(e){if(null!=this.ga){for(var b=a.Pd.hu(e,this.description),n=[],c=l.Xk(this.description,0),d=l.Xk(this.description,1),f=l.Xk(e,0),g=l.Xk(e,1),k=0,m=1,q=e.Ba;m<q;m++){var r=e.Id(m),s=a.qa.Xa(r);if(-1==b[m])for(var C=a.qa.ue(r),r=0;r<s;r++)n[f+k]=C,n[g+k]=C,k++;else{C=this.description.fj(b[m])-2;for(r=0;r<s;r++)n[f+
k]=this.ga[c+C],n[g+k]=this.ga[d+C],k++,C++}}this.ga=n}this.description=e};l.prototype.wA=function(e,b){if(this.tc())throw a.g.sa("empty geometry");b.Qf(this.description);b.tc()&&b.jo();for(var n=0;n<this.description.Ba;n++)for(var l=this.description.Gd(n),c=0,d=a.qa.Xa(l);c<d;c++){var f=this.zd(e,l,c);b.setAttribute(l,c,f)}};l.prototype.CA=function(e,b){this.rc();if(b.tc())throw a.g.sa("empty geometry");for(var n=b.description,l=0,c=n.Ba;l<c;l++)for(var d=n.Gd(l),f=a.qa.Xa(d),g=0;g<f;g++){var k=
b.md(d,g);this.pm(e,d,g,k)}};l.prototype.zd=function(e,b,n){if(this.tc())throw a.g.sa("This operation was performed on an Empty Geometry.");if(0==b)return 0!=e?0!=n?this.ia:this.ma:0!=n?this.ka:this.oa;if(n>=a.qa.Xa(b))throw a.g.Vc();var c=this.description.zf(b);return 0<=c?(null!=this.ga&&this.qv(this.description.me.length-2),this.ga[l.Xk(this.description,e)+this.description.fj(c)-2+n]):a.qa.ue(b)};l.prototype.pm=function(e,b,n,c){this.rc();if(n>=a.qa.Xa(b))throw a.g.Vc();var d=this.description.zf(b);
0>d&&(this.Oe(b),d=this.description.zf(b));0==b?0!=e?0!=n?this.ia=c:this.ma=c:0!=n?this.ka=c:this.oa=c:(null==this.ga&&this.qv(this.description.me.length-2),this.ga[l.Xk(this.description,e)+this.description.fj(d)-2+n]=c)};l.prototype.copyTo=function(e){if(e.F()!=this.F())throw a.g.O();e.description=this.description;e.qv(this.description.me.length-2);l.JI(this.ga,e.ga,2*(this.description.me.length-2));e.oa=this.oa;e.ka=this.ka;e.ma=this.ma;e.ia=this.ia;e.rc();this.co(e)};l.prototype.Ah=function(e,
b){var n=new a.Od;if(this.tc())return n.Ka(),n;n.ra=this.zd(0,e,b);n.wa=n.ra;n.Pj(this.zd(1,e,b));return n};l.prototype.XE=function(a){this.tc()?a.Ka():(a.ra=this.zd(0,0,0),a.wa=a.ra,a.Pj(this.zd(1,0,0)))};l.prototype.tu=function(e,b){b.Qf(this.description);b.jc(this.Lb(e));for(var n=1,l=this.description.Ba;n<l;n++)for(var c=this.description.Gd(n),d=a.qa.Xa(c),f=0;f<d;f++){var g=this.md(e,c,f);b.setAttribute(c,f,g)}};l.prototype.rJ=function(a){if(this.description!=a.description||this.oa!=a.oa||this.ma!=
a.ma||this.ka!=a.ka||this.ia!=a.ia)return!1;for(var b=0;b<2*(this.description.me.length-2);b++)if(this.ga[b]!=a.ga[b])return!1;return!0};l.prototype.kD=function(){return this.oa==this.ma&&this.ka==this.ia};l.prototype.reverse=function(){var e=this.oa;this.oa=this.ma;this.ma=e;e=this.ka;this.ka=this.ia;this.ia=e;for(var e=1,b=this.description.Ba;e<b;e++)for(var n=this.description.Id(e),l=0,c=a.qa.Xa(n);l<c;l++){var d=this.zd(0,n,l),f=this.zd(1,n,l);this.pm(0,n,l,f);this.pm(1,n,l,d)}};l.prototype.cq=
function(e,b,n){var l=e.F();switch(this.F()){case a.j.Line:if(l==a.j.Line)return a.zb.wJ(this,e,b,n);throw a.g.xa();default:throw a.g.xa();}};l.prototype.vJ=function(e,b,n,l,c){var d=e.F();switch(this.F()){case a.j.Line:if(d==a.j.Line)return a.zb.nv(this,e,b,n,l,c);throw a.g.xa();default:throw a.g.xa();}};l.prototype.jv=function(){return null};l.Xk=function(a,b){return b*(a.me.length-2)};l.prototype.Lb=function(e,b){if(void 0===b){var n=new a.b;this.Lb(e,n);return n}a.vi.sP(this.oa,this.ka,this.ma,
this.ia,e,b)};l.prototype.Hd=function(){return null};l.prototype.TC=function(){return null};l.prototype.mt=function(){return null};l.prototype.mg=function(){return null};l.prototype.mD=function(){return null};l.prototype.Pf=function(){return null};l.prototype.rA=function(a,b){return void 0!==b?this.Qu(b)-this.Qu(a):this.Qu(a)};l.prototype.co=function(){};l.prototype.ym=function(){return null};l.prototype.Bi=function(){};l.prototype.md=function(){return null};l.prototype.xe=function(){return null};
l.prototype.Qu=function(){return null};l.prototype.AD=function(){return null};l.prototype.Gb=function(a,b){if(!b&&0!=this.cq(a,0,!1))return 0;var n=1.7976931348623157E308,l,c=0;l=this.Nb();c=a.Hd(l,!1);l.sub(a.Lb(c));l=l.length();l<n&&(n=l);l=this.pc();c=a.Hd(l,!1);l.sub(a.Lb(c));l=l.length();l<n&&(n=l);l=a.Nb();c=this.Hd(l,!1);l.sub(this.Lb(c));l=l.length();l<n&&(n=l);l=a.pc();c=this.Hd(l,!1);l.sub(this.Lb(c));l=l.length();l<n&&(n=l);return n};l.prototype.Rf=function(){return a.Hh.il(this,null)};
return l}(a.U);a.fA=b})(A||(A={}));new A.b;(function(a){(function(a){a[a.Unknown=-1]="Unknown";a[a.Not=0]="Not";a[a.Weak=1]="Weak";a[a.Strong=2]="Strong"})(a.tH||(a.tH={}));(function(a){a[a.DirtyIsKnownSimple=1]="DirtyIsKnownSimple";a[a.IsWeakSimple=2]="IsWeakSimple";a[a.IsStrongSimple=4]="IsStrongSimple";a[a.DirtyOGCFlags=8]="DirtyOGCFlags";a[a.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";a[a.DirtyExactIntervals=64]="DirtyExactIntervals";a[a.DirtyLooseIntervals=128]="DirtyLooseIntervals";a[a.DirtyIntervals=
192]="DirtyIntervals";a[a.DirtyIsEnvelope=256]="DirtyIsEnvelope";a[a.DirtyLength2D=512]="DirtyLength2D";a[a.DirtyRingAreas2D=1024]="DirtyRingAreas2D";a[a.DirtyCoordinates=1993]="DirtyCoordinates";a[a.DirtyAllInternal=65535]="DirtyAllInternal";a[a.DirtyAll=16777215]="DirtyAll"})(a.cH||(a.cH={}));var b=function(b){function l(){b.call(this);this.El=65535;this.ua=0;this.rg=-1;this.qb=null}H(l,b);l.prototype.co=function(){};l.prototype.pv=function(){};l.prototype.wv=function(){};l.prototype.G=function(){return this.ua};
l.prototype.u=function(){return this.tc()};l.prototype.tc=function(){return 0==this.ua};l.prototype.gj=function(a){return 0!=(this.El&a)};l.prototype.yf=function(a,b){this.El=b?this.El|a:this.El&~a};l.prototype.lc=function(){this.gj(32)&&this.EJ()};l.prototype.Ru=function(){if(this.tc())throw a.g.sa("This operation was performed on an Empty Geometry.");};l.prototype.Td=function(e,b){if(0>e||e>=this.ua)throw a.g.sa("index out of bounds");this.lc();b.Qf(this.description);b.u()&&b.jo();for(var n=0;n<
this.description.Ba;n++)for(var l=this.description.Gd(n),c=0,d=a.qa.Xa(l);c<d;c++){var f=this.Ca[n].Bh(d*e+c);b.setAttribute(l,c,f)}};l.prototype.Hu=function(e,b){this.lc();for(var n=b.description,l=0;l<n.Ba;l++)for(var c=n.Gd(l),d=a.qa.Xa(c),f=0;f<d;f++){var g=b.md(c,f);this.setAttribute(c,e,f,g)}};l.prototype.A=function(e,b){if(0>e||e>=this.G())throw a.g.Vc();this.lc();this.Ca[0].fc(2*e,b)};l.prototype.Ga=function(e){var b=new a.b;this.A(e,b);return b};l.prototype.vc=function(a,b){this.Ca[0].fc(2*
a,b)};l.prototype.jc=function(e,b,n){if(0>e||e>=this.ua)throw a.g.Vc();this.lc();var l=this.Ca[0];void 0!==n?(l.write(2*e,b),l.write(2*e+1,n)):l.Sn(2*e,b);this.de(1993)};l.prototype.Kw=function(e){if(0>e||e>=this.G())throw a.g.Vc();this.lc();var b=this.Ca[0],n=new a.fe;n.x=b.read(2*e);n.y=b.read(2*e+1);n.z=this.hasAttribute(1)?this.Ca[1].Bh(e):a.qa.ue(1);return n};l.prototype.Oy=function(e,b){if(0>e||e>=this.G())throw a.g.Vc();this.Oe(1);this.lc();this.de(1993);var n=this.Ca[0];n.write(2*e,b.x);n.write(2*
e+1,b.y);this.Ca[1].Uk(e,b.z)};l.prototype.md=function(e,b,n){if(0>b||b>=this.ua)throw a.g.Vc();var l=a.qa.Xa(e);if(n>=l)throw a.g.Vc();this.lc();var c=this.description.zf(e);return 0<=c?this.Ca[c].Bh(b*l+n):a.qa.ue(e)};l.prototype.nC=function(a,b,n){return this.md(a,b,n)};l.prototype.setAttribute=function(e,b,n,l){if(0>b||b>=this.ua)throw a.g.Vc();var c=a.qa.Xa(e);if(n>=c)throw a.g.Vc();this.Oe(e);this.lc();e=this.description.zf(e);this.de(1993);this.Ca[e].Uk(b*c+n,l)};l.prototype.oc=function(a){this.Ru();
this.Oe(a);this.lc();return this.Ca[this.description.zf(a)]};l.prototype.bm=function(e,b){if(null!=b&&a.qa.Qh(e)!=b.Qh())throw a.g.O();this.Oe(e);var n=this.description.zf(e);null==this.Ca&&(this.Ca=a.Bc.$x(this.description.Ba));this.Ca[n]=b;this.de(16777215)};l.prototype.om=function(e){var b=null;if(null!=this.Ca)for(var n=a.Pd.hu(e,this.description),b=[],l=0,c=e.Ba;l<c;l++)-1!=n[l]&&(b[l]=this.Ca[n[l]]);this.description=e;this.Ca=b;this.rg=-1;this.de(16777215)};l.prototype.IA=function(e){this.rs(!0);
e instanceof a.i?this.S.s(e):this.S.Dn(e)};l.prototype.DJ=function(e){this.rs(!1);e instanceof a.i?this.S.s(e):this.S.Dn(e)};l.prototype.Dp=function(a){this.rs(!0);this.S.copyTo(a)};l.prototype.s=function(a){this.IA(a)};l.prototype.Dn=function(a){this.IA(a)};l.prototype.ed=function(a){this.DJ(a)};l.prototype.Ah=function(e,b){var n=new a.Od;if(this.tc())return n.Ka(),n;this.rs(!0);return this.S.Ah(e,b)};l.prototype.ic=function(){var e=this.description.ic();if(!this.tc())for(var b=this.G(),n=0,l=this.description.Ba;n<
l;n++)e=this.Ca[n].jj(e,0,b*a.qa.Xa(this.description.Gd(n)));return e};l.prototype.mc=function(e){if(e==this)return!0;if(!(e instanceof l&&this.description.mc(e.description))||this.tc()!=e.tc())return!1;if(this.tc())return!0;var b=this.G();if(b!=e.G())return!1;for(var n=0;n<this.description.Ba;n++){var c=this.description.Id(n),d=this.oc(c),f=e.oc(c);if(!d.mc(f,0,b*a.qa.Xa(c)))return!1}return!0};l.prototype.copyTo=function(e){if(e.F()!=this.F())throw a.g.O();this.tA(e)};l.prototype.tA=function(e){this.lc();
e.description=this.description;e.Ca=null;var b=this.description.Ba,n=null;if(null!=this.Ca)for(var n=[],l=0;l<b;l++)null!=this.Ca[l]&&(n[l]=this.Ca[l].Gp(this.G()*a.qa.Xa(this.description.Gd(l))));null!=this.S?(e.S=this.S.Qa(),this.S.copyTo(e.S)):e.S=null;e.ua=this.ua;e.El=this.El;e.Ca=n;try{this.co(e)}catch(c){throw e.Ka(),a.g.AI();}};l.prototype.EA=function(){this.ua=0;this.rg=-1;this.Ca=null;this.de(16777215)};l.prototype.de=function(a){16777215==a&&(this.rg=-1,this.pv());this.El|=a;this.jJ();
this.rc()};l.prototype.rs=function(e){this.lc();if(this.gj(192))if(null==this.S?this.S=new a.Wj(this.description):this.S.Qf(this.description),this.u())this.S.Ka();else{this.vv(e);for(var b=1;b<this.description.Ba;b++)for(var n=this.description.Gd(b),l=a.qa.Xa(n),c=this.Ca[b],d=0;d<l;d++){var f=new a.Od;f.Ka();for(var g=0;g<this.ua;g++){var k=c.Bh(g*l+d);f.Eb(k)}this.S.setInterval(n,d,f)}e&&this.yf(192,!1)}};l.prototype.vv=function(){this.S.Ka();for(var e=this.Ca[0],b=new a.b,n=0;n<this.ua;n++)e.fc(2*
n,b),this.S.Eb(b)};l.prototype.um=function(e){e.Ka();for(var b=this.Ca[0],n=new a.b,l=0;l<this.ua;l++)b.fc(2*l,n),e.Eb(n)};l.prototype.EJ=function(){if(this.rg<this.ua){null==this.Ca&&(this.Ca=a.Bc.$x(this.description.Ba));this.rg=2147483647;for(var e=0;e<this.description.Ba;e++){var b=this.description.Gd(e);if(null!=this.Ca[e]){var n=a.qa.Xa(b),l=a.J.truncate(this.Ca[e].size/n);l<this.ua&&(l=a.J.truncate(this.rg>this.ua+5?(5*this.ua+3)/4:this.ua),this.Ca[e].resize(l*n,a.qa.ue(b)));l<this.rg&&(this.rg=
l)}else this.Ca[e]=a.Bc.Sv(b,this.ua),this.rg=this.ua}}this.wv();this.yf(32,!1)};l.prototype.io=function(e){if(0>e)throw a.g.O();e!=this.ua&&(this.ua=e,this.de(65535))};l.prototype.sj=function(a){if(!this.gj(1)){if(!this.gj(2))return 0;if(this.SP>=a)return this.gj(8)?1:2}return-1};l.prototype.hg=function(e,b){this.SP=b;if(-1==e)this.yf(1,!0),this.yf(8,!0);else if(this.yf(1,!1),this.yf(8,!0),0==e)this.yf(2,!1),this.yf(4,!1);else if(1==e)this.yf(2,!0),this.yf(4,!1);else if(2==e)this.yf(2,!0),this.yf(4,
!0);else throw a.g.sa("internal error.");};l.prototype.jJ=function(){null!=this.qb&&(this.qb=null)};l.prototype.uJ=function(e,b,n,l){if(0>e||e>=this.ua)throw a.g.sa("index out of bounds");if(0>b||b>=this.ua)throw a.g.sa("index out of bounds");this.lc();l.Qf(this.description);l.u()&&l.jo();for(var c=0;c<this.description.Ba;c++)for(var d=this.description.Gd(c),f=0,g=a.qa.Xa(d);f<g;f++){var k=this.Ca[c].Bh(g*e+f),m=this.Ca[c].Bh(g*b+f);l.setAttribute(d,f,a.vi.tt(k,m,n))}};l.prototype.lv=function(a,b){var n=
this.Ca[0].f,l=n[2*a]-n[2*b],n=n[2*a+1]-n[2*b+1];return Math.sqrt(l*l+n*n)};l.prototype.bh=function(e,b){if(0>e||e>=this.ua)throw a.g.Vc();if(b.u())throw a.g.O();this.lc();for(var n=b.description,l=0;l<n.Ba;l++)for(var c=n.Id(l),d=a.qa.Xa(c),f=0;f<d;f++){var g=b.md(c,f);this.setAttribute(c,e,f,g)}};l.prototype.iv=function(){return null};l.prototype.dj=function(){return null};return l}(a.U);a.Vr=b})(A||(A={}));(function(a){var b=function(){function b(){this.eb=this.Rm=null;this.Ol=124234251;this.Bt=
!0;this.Ae=-1;this.eb=new a.Gc(7);this.Rm=null}b.prototype.In=function(a){this.Rm=a};b.prototype.kM=function(){this.Bt=!1};b.prototype.ee=function(a){this.eb.ee(a)};b.prototype.lq=function(a){var b=this.eb.ce();this.lS(b);this.nS(a,b);return b};b.prototype.eM=function(a){this.eb.Kc(a)};b.prototype.addElement=function(a,b){var h;-1==b?(-1==this.Ae&&(this.Ae=this.lq(-1)),h=this.Ae):h=b;return this.MA(a,0,h)};b.prototype.PA=function(a){-1==this.Ae&&(this.Ae=this.lq(-1));return this.MA(a,1,this.Ae)};
b.prototype.rm=function(a){var b;-1==this.Ae&&(this.Ae=this.lq(-1));b=this.Ae;var h=this.eb.f;if(-1==b||-1==h[7*b])return a=this.eb.Qj([-1,-1,-1,a,this.dk(),-1,-1]),h=this.eb.f,h[7*b]=a,this.lo(-1,a,b,h),a;var n=-1==b?-1:h[7*b+2];a=this.eb.Qj([-1,-1,n,a,this.dk(),-1,-1]);h=this.eb.f;h[7*n+1]=a;this.Ev(a,h);-1===h[7*a+2]&&(h[7*b]=a);this.lo(-1,a,b,h);return a};b.prototype.us=function(b,e,h,n){var c=-1;-1==c&&(-1==this.Ae&&(this.Ae=this.lq(-1)),c=this.Ae);var d=this.eb.f;if(-1==c||-1==d[7*c])return h=
this.eb.Qj([-1,-1,-1,h,this.dk(),-1,-1]),d=this.eb.f,d[7*c]=h,this.lo(-1,h,c,d),h;var f;n?(n=-1!=e?this.Rm.compare(this,h,e):-1,f=-1!=b?this.Rm.compare(this,h,b):1):(n=-1,f=1);if(0==n||0==f)return d[7*c+3]=0==n?e:b,-1;(-1!=e&&-1!=b?this.Ol>a.J.Zx(this.Ol)>>1:-1!=e)?b=e:n=f;f=-1;for(e=!0;;){if(0>n)if(f=d[7*b],-1!=f)b=f;else{f=b;e=this.eb.Qj([-1,-1,b,h,this.dk(),-1,-1]);d=this.eb.f;d[7*b]=e;break}else if(f=d[7*b+1],-1!=f)b=f;else{f=d[7*b+6];e=this.eb.Qj([-1,-1,b,h,this.dk(),-1,-1]);d=this.eb.f;d[7*
b+1]=e;break}e&&(n*=-1,e=!1)}this.Ev(e,d);-1===d[7*e+2]&&(d[7*c]=e);this.lo(f,e,c,d);return e};b.prototype.tC=function(){return this.wN(this.Ae)};b.prototype.ld=function(a,b){var h;h=-1==b?this.Ae:b;this.Bt?this.dM(a,h):this.ZS(a,h)};b.prototype.search=function(a,b){for(var h=this.ct(b);-1!=h;){var n=this.Rm.compare(this,a,h);if(0==n)return h;h=0>n?this.ik(h):this.Io(h)}return-1};b.prototype.FR=function(a){for(var b=this.ct(-1),h=-1;-1!=b;){var n=a.compare(this,b);if(0==n)return b;0>n?b=this.ik(b):
(h=b,b=this.Io(b))}return h};b.prototype.sF=function(a){for(var b=this.ct(-1),h=-1;-1!=b;){var n=a.compare(this,b);if(0==n)return b;0>n?(h=b,b=this.ik(b)):b=this.Io(b)}return h};b.prototype.ea=function(a){return this.eb.P(a,3)};b.prototype.ik=function(a){return this.eb.P(a,0)};b.prototype.Io=function(a){return this.eb.P(a,1)};b.prototype.getParent=function(a){return this.eb.P(a,2)};b.prototype.cb=function(a){return this.eb.P(a,6)};b.prototype.he=function(a){return this.eb.P(a,5)};b.prototype.hc=function(a){return-1==
a?this.gk(this.Ae):this.gk(a)};b.prototype.uc=function(a){return-1==a?this.sq(this.Ae):this.sq(a)};b.prototype.gO=function(a){return-1==a?this.QC(this.Ae):this.QC(a)};b.prototype.Vi=function(a,b){this.Ay(a,b)};b.prototype.ct=function(a){return-1==a?this.MC(this.Ae):this.MC(a)};b.prototype.clear=function(){this.eb.Nh(!1);this.Ae=-1};b.prototype.size=function(a){return-1==a?this.OC(this.Ae):this.OC(a)};b.prototype.oK=function(a,b){for(var h=b[7*a],n=b[7*a+1],c=b[7*a+4];-1!=h||-1!=n;){var d=-1!=h?b[7*
h+4]:2147483647,n=-1!=n?b[7*n+4]:2147483647,v=Math.min(d,n);if(c<=v)break;d<=n?this.oF(h,b):this.nF(a,b);h=b[7*a];n=b[7*a+1]}};b.prototype.Ev=function(a,b){if(this.Bt)for(var h=b[7*a+4],n=b[7*a+2];-1!=n&&b[7*n+4]>h;)b[7*n]==a?this.oF(a,b):this.nF(n,b),n=b[7*a+2]};b.prototype.nF=function(a,b){var h=b[7*a+1],n;b[7*h+2]=b[7*a+2];b[7*a+2]=h;n=b[7*h];b[7*a+1]=n;-1!=n&&(b[7*n+2]=a);b[7*h]=a;n=b[7*h+2];-1!=n&&(b[7*n]==a?b[7*n]=h:b[7*n+1]=h)};b.prototype.oF=function(a,b){var h=b[7*a+2],n;b[7*a+2]=b[7*h+2];
b[7*h+2]=a;n=b[7*a+1];b[7*h]=n;-1!=n&&(b[7*n+2]=h);b[7*a+1]=h;n=b[7*a+2];-1!=n&&(b[7*n]===h?b[7*n]=a:b[7*n+1]=a)};b.prototype.Uj=function(a,b){this.eb.N(a,2,b)};b.prototype.Fy=function(a,b){this.eb.N(a,0,b)};b.prototype.Jy=function(a,b){this.eb.N(a,1,b)};b.prototype.Iy=function(a,b){this.eb.N(a,5,b)};b.prototype.Fu=function(a,b){this.eb.N(a,6,b)};b.prototype.VF=function(a,b){this.eb.N(b,0,a)};b.prototype.lS=function(a){this.eb.N(a,4,0)};b.prototype.nS=function(a,b){this.eb.N(b,5,a)};b.prototype.MC=
function(a){return-1==a?-1:this.eb.P(a,0)};b.prototype.gk=function(a){return-1==a?-1:this.eb.P(a,1)};b.prototype.sq=function(a){return-1==a?-1:this.eb.P(a,2)};b.prototype.wN=function(a){return-1==a?-1:this.eb.P(a,3)};b.prototype.OC=function(a){return-1==a?0:this.eb.P(a,4)};b.prototype.QC=function(a){return this.eb.P(a,5)};b.prototype.nu=function(a){return this.eb.Qj([-1,-1,-1,a,this.dk(),-1,-1])};b.prototype.ck=function(a){-1!=a&&this.eb.Kc(a)};b.prototype.dk=function(){this.Ol=a.J.Zx(this.Ol);return this.Ol&
1073741823};b.prototype.MA=function(a,b,h){var n=this.eb.f;if(-1==h||-1==n[7*h])return a=this.eb.Qj([-1,-1,-1,a,this.dk(),-1,-1]),n=this.eb.f,n[7*h]=a,this.lo(-1,a,h,n),a;for(var c=-1==h?-1:n[7*h],d=-1;;)if(d=-1==b?1:this.Rm.compare(this,a,c),0>d)if(d=this.ik(c),-1!=d)c=d;else{d=c;a=this.eb.Qj([-1,-1,c,a,this.dk(),-1,-1]);n=this.eb.f;n[7*c]=a;break}else{if(1==b&&0==d)return n[7*h+3]=c,-1;d=n[7*c+1];if(-1!=d)c=d;else{d=n[7*c+6];a=this.eb.Qj([-1,-1,c,a,this.dk(),-1,-1]);n=this.eb.f;n[7*c+1]=a;break}}this.Ev(a,
n);-1===n[7*a+2]&&(n[7*h]=a);this.lo(d,a,h,n);return a};b.prototype.lo=function(a,b,h,n){var c;-1!=a?(c=n[7*a+5],n[7*a+5]=b):c=-1==h?-1:n[7*h+2];n[7*b+5]=c;-1!=c&&(n[7*c+6]=b);n[7*b+6]=a;a==(-1==h?-1:n[7*h+1])&&(n[7*h+1]=b);-1==a&&(n[7*h+2]=b);n[7*h+4]=(-1==h?0:n[7*h+4])+1};b.prototype.qy=function(a,b){var h=this.eb.f,n=h[7*a+5],c=h[7*a+6];-1!=n?h[7*n+6]=c:h[7*b+1]=c;-1!=c?h[7*c+5]=n:h[7*b+2]=n;h[7*b+4]=-1===b?-1:h[7*b+4]-1};b.prototype.ZS=function(b,e){this.qy(b,e);var h=this.ik(b),n=this.Io(b),
c=this.getParent(b),d=b;if(-1!=h&&-1!=n){this.Ol=a.J.Zx(this.Ol);var f;f=1073741823<this.Ol?this.cb(b):this.he(b);var g=this.getParent(f)==b;this.eb.Ou(b,f,0);this.eb.Ou(b,f,1);this.eb.Ou(b,f,2);-1!=c?this.ik(c)==b?this.Fy(c,f):this.Jy(c,f):this.VF(f,e);g?(h==f?(this.Fy(f,b),this.Uj(n,f)):n==f&&(this.Jy(f,b),this.Uj(h,f)),this.Uj(b,f),c=f):(this.Uj(h,f),this.Uj(n,f),c=this.getParent(b),d=f);h=this.ik(b);n=this.Io(b);-1!=h&&this.Uj(h,b);-1!=n&&this.Uj(n,b)}h=-1!=h?h:n;-1==c?this.VF(h,e):this.ik(c)==
d?this.Fy(c,h):this.Jy(c,h);-1!=h&&this.Uj(h,c);this.ck(b,e)};b.prototype.dM=function(a,b){var h=this.eb.f;h[7*a+4]=2147483647;var n=-1,c=-1,d=-1===b?-1:h[7*b],v=d==a;v&&(n=h[7*d],c=h[7*d+1],-1==n&&-1==c)?(this.qy(d,b),this.ck(d,b),h[7*b]=-1):(this.oK(a,h),d=h[7*a+2],-1!=d&&(h[7*d]==a?h[7*d]=-1:h[7*d+1]=-1),this.qy(a,b),this.ck(a,b),v&&(h[7*b]=-1==n||-1!=h[7*n+2]?c:n))};b.prototype.Ay=function(a,b){this.eb.N(a,3,b)};return b}();a.bj=b})(A||(A={}));(function(a){var b=function(){function b(a,e){void 0!==
a&&this.L(a,e)}b.prototype.L=function(a,b){this.ra=a;this.wa=b;this.normalize()};b.prototype.normalize=function(){if(!isNaN(this.ra)){if(this.ra>this.wa){var a=this.ra;this.ra=this.wa;this.wa=a}isNaN(this.wa)&&this.Ka()}};b.prototype.Ka=function(){this.wa=this.ra=NaN};b.prototype.u=function(){return isNaN(this.ra)};b.prototype.Eb=function(a){"number"===typeof a?this.u()?this.wa=this.ra=a:this.Pj(a):a.u()||(this.u()?(this.ra=a.ra,this.wa=a.wa):(this.ra>a.ra&&(this.ra=a.ra),this.wa<a.wa&&(this.wa=a.wa),
this.ra>this.wa&&this.Ka()))};b.prototype.Pj=function(a){a<this.ra?this.ra=a:a>this.wa&&(this.wa=a)};b.prototype.contains=function(a){return"number"===typeof a?a>=this.ra&&a<=this.wa:a.ra>=this.ra&&a.wa<=this.wa};b.prototype.Ha=function(a){this.u()||a.u()?this.Ka():(this.ra<a.ra&&(this.ra=a.ra),this.wa>a.wa&&(this.wa=a.wa),this.ra>this.wa&&this.Ka())};b.prototype.R=function(a){this.u()||(this.ra-=a,this.wa+=a,this.wa<this.ra&&this.Ka())};b.prototype.kv=function(){return this.u()?2.220446049250313E-14:
2.220446049250313E-14*(Math.abs(this.ra)+Math.abs(this.wa)+1)};b.prototype.xy=function(a,b){a>b?(this.ra=b,this.wa=a):(this.ra=a,this.wa=b)};b.prototype.Ry=function(b){return a.J.Jr(b,this.ra,this.wa)};b.prototype.ba=function(){return this.wa-this.ra};b.prototype.Af=function(){return 0.5*(this.ra+this.wa)};b.prototype.mc=function(a){return a==this?!0:a instanceof b?this.u()&&a.u()?!0:this.ra!=a.ra||this.wa!=a.wa?!1:!0:!1};b.prototype.ic=function(){return a.J.Rh(a.J.Rh())};return b}();a.Od=b})(A||
(A={}));(function(a){var b=new a.Od,c=new a.Od,l=function(){return function(){this.$d=null;this.Lf=-1;this.jb=new a.zb;this.tx=55555555;this.Dt=this.Et=!1;this.$h=new a.Od;this.$h.xy(0,0)}}();a.WT=l;var e=function(){function e(b,h,c){this.a=b;this.Nj=NaN;this.mE=this.qp=0;this.nE=NaN;this.la=h;this.rp=10*h;this.oE=this.pE=NaN;this.Zf=!1;this.Cl=this.lr=this.vn=this.fr=this.er=-1;this.kx=c;this.Qx=new l;this.vE=new l;b=Math.min(a.J.truncate(3*b.qd/2),67);Math.min(7,b)}e.prototype.$C=function(a,b,e,
h){a.$d=null===h?null:h[e[5*b]];a.Dt=null!=a.$d;a.Dt||(h=e[5*b+2],-1!==h&&this.a.fR(e[5*b],e[5*h],a.jb),a.$d=a.jb,a.$h.xy(a.jb.oa,a.jb.ma),a.$h.wa+=this.la,a.jb.KE(),a.Et=a.jb.ia==a.jb.ka,a.Et||(a.tx=(a.jb.ma-a.jb.oa)/(a.jb.ia-a.jb.ka)))};e.prototype.sL=function(a,b){var e=a.cq(b,this.la,!0);if(0!=e)return 2==e?this.$v():this.Oh();a.gt(I);a.tw(M);b.gt(J);b.tw(S);G.na(this.qp,this.Nj);I.vb(J)&&this.Nj==I.y?0>M.compare(S)?G.K(M):G.K(S):I.vb(S)&&this.Nj==I.y?0>M.compare(J)?G.K(M):G.K(J):J.vb(M)&&this.Nj==
J.y?0>I.compare(S)?G.K(I):G.K(S):M.vb(S)&&this.Nj==M.y&&(0>I.compare(J)?G.K(I):G.K(J));return a.xe(G.y,G.x)<b.xe(G.y,G.x)?-1:1};e.prototype.qL=function(a,b){if(a.jb.ka==b.jb.ka&&a.jb.oa==b.jb.oa)return a.jb.ia==b.jb.ia&&a.jb.ma==b.jb.ma?this.kx?this.$v():0:this.HB(a,b);if(a.jb.ia==b.jb.ia&&a.jb.ma==b.jb.ma)return this.GB(a,b);var e=this.GB(a,b),h=this.HB(a,b);return 0>e&&0>h?-1:0<e&&0<h?1:this.Oh()};e.prototype.lL=function(a,b){if(a.ma>b.ma){if(b.ma>b.oa&&b.ia-b.ka<2*this.la&&a.Kh(b.ma,b.ia,this.la))return this.Oh()}else if((b.ia-
b.ka)/(b.ma-b.oa)*(a.ma-a.oa)<this.rp&&b.Kh(a.ma,a.ia,this.la))return this.Oh();return 1};e.prototype.mL=function(a,b){if(a.oa<b.oa){if(b.ma>b.oa&&b.ia-b.ka<2*this.la&&a.Kh(b.ma,b.ia,this.la))return this.Oh()}else if((b.ia-b.ka)/(b.ma-b.oa)*(a.oa-a.ma)<this.rp&&b.Kh(a.oa,a.ka,this.la))return this.Oh();return-1};e.prototype.nL=function(b,e){var h=new a.b;h.qc(e.pc(),e.Nb());h.Ip();h.normalize();var l=new a.b;l.qc(b.Nb(),e.Nb());var c=new a.b;c.qc(b.pc(),e.Nb());var l=l.ml(h),h=c.ml(h),c=Math.abs(l),
d=Math.abs(h);if(c<d){if(c<this.rp&&e.Kh(b.oa,b.ka,this.la))return this.Oh()}else if(d<this.rp&&e.Kh(b.ma,b.ia,this.la))return this.Oh();return 0>l&&0>h?-1:0<l&&0<h?1:this.Oh()};e.prototype.FB=function(a,b){return a.ka==b.ka&&a.oa==b.oa?this.lL(a,b):a.ia==b.ia&&a.ma==b.ma?this.mL(a,b):this.nL(a,b)};e.prototype.oL=function(a,b){return a.ia==b.ia&&a.ma==b.ma&&a.ka==b.ka&&a.oa==b.oa?this.kx?this.$v():0:this.Oh()};e.prototype.GB=function(a,b){var e=1;if(a.jb.ka<b.jb.ka){var e=-1,h=a;a=b;b=h}var h=a.jb,
l=b.jb,c=h.oa-l.oa,d=b.tx*(h.ka-l.ka),v=this.rp;return c<d-v?-e:c>d+v?e:l.Kh(h.oa,h.ka,this.la)?this.Oh():c<d?-e:e};e.prototype.HB=function(a,b){var e=1;if(b.jb.ia<a.jb.ia){var e=-1,h=a;a=b;b=h}var h=a.jb,l=b.jb,c=h.ma-l.oa,d=b.tx*(h.ia-l.ka),v=this.rp;return c<d-v?-e:c>d+v?e:l.Kh(h.ma,h.ia,this.la)?this.Oh():c<d?-e:e};e.prototype.$v=function(){this.Zf=!0;this.ei=new a.xd(5,this.vn,this.lr);return-1};e.prototype.Oh=function(){this.Zf=!0;this.kx?this.ei=new a.xd(4,this.vn,this.lr):this.lr=this.vn=
this.fr=this.er=-1;return-1};e.prototype.rL=function(a,e,h,l){if(this.Zf)return-1;var d=this.nE==this.Nj&&this.mE==this.qp,v;d&&a==this.er?v=this.oE:(v=NaN,this.er=-1);d&&e==this.fr?d=this.pE:(d=NaN,this.fr=-1);h.$d.XE(b);l.$d.XE(c);if(b.wa<c.ra)return-1;if(c.wa<b.ra)return 1;this.nE=this.Nj;this.mE=this.qp;isNaN(v)&&(this.er=a,this.oE=v=h.$d.xe(this.Nj,this.qp));isNaN(d)&&(this.fr=e,this.pE=d=l.$d.xe(this.Nj,this.qp));return Math.abs(v-d)<=this.la?this.sL(h.$d,l.$d):v<d?-1:v>d?1:0};e.prototype.jq=
function(){this.Zf=!1};e.prototype.rl=function(){return this.ei};e.prototype.XF=function(a,b){this.Nj=a;this.qp=b;this.lr=this.vn=this.fr=this.er=-1};e.prototype.compare=function(a,b,e){if(this.Zf)return-1;a=a.ea(e);this.Cl=e;return this.JB(b,b,a,a)};e.prototype.JB=function(a,b,e,h){var l;this.vn==b?l=this.Qx:(this.vn=b,l=this.Qx,this.Qx.Lf=a,this.$C(l,b,this.a.dd.f,this.a.He));var c;null==c&&(this.lr=h,c=this.vE,this.vE.Lf=e,this.$C(c,h,this.a.dd.f,this.a.He));if(l.Dt||c.Dt)return this.rL(b,h,l,
c);if(l.$h.wa<c.$h.ra)return-1;if(c.$h.wa<l.$h.ra)return 1;a=l.Et?1:0;a|=c.Et?2:0;return 0==a?this.qL(l,c):1==a?this.FB(l.jb,c.jb):2==a?-1*this.FB(c.jb,l.jb):this.oL(l.jb,c.jb)};return e}();a.hA=e})(A||(A={}));(function(a){var b=function(){function b(l,e){this.a=l;this.la=e;this.Zf=!1;this.vn=-1;this.$h=new a.Od;this.np=new a.b;this.np.Eh();this.Wd=new a.zb;this.Cl=-1;this.Bx=1.7976931348623157E308}b.prototype.jq=function(){this.Zf=!1;this.Bx=1.7976931348623157E308};b.prototype.bh=function(a){this.np.K(a)};
b.prototype.compare=function(a,b){return this.KB(b,a.ea(b))};b.prototype.KB=function(b,e){var h=null!=this.a.dc(e);h||(this.a.Pc(e,this.Wd),this.$h.xy(this.Wd.oa,this.Wd.ma));if(h)throw a.g.sa("not implemented");if(this.np.x+this.la<this.$h.ra)return-1;if(this.np.x-this.la>this.$h.wa)return 1;if(this.Wd.ka==this.Wd.ia)return this.Cl=b,this.Zf=!0,0;this.Wd.KE();var n=this.Wd.Nb(),h=new a.b;h.qc(this.Wd.pc(),n);h.Ip();var c=new a.b;c.qc(this.np,n);n=h.ml(c);n/=h.length();return n<10*-this.la?-1:n>10*
this.la?1:this.Wd.Dq(this.np,this.la)&&(h=Math.abs(n),h<this.Bx&&(this.Cl=b,this.Bx=h),this.Zf=!0,h<0.25*this.la)?0:0>n?-1:1};return b}();a.II=b})(A||(A={}));(function(a){function b(a,e,h,n){h=new Float64Array(a.subarray(h,n));a.set(h,e)}var c=function(){function b(e){this.Ta=this.Xf=!1;this.f=[];var h=e;2>h&&(h=2);this.f=a.J.Lh(h,b.pb);this.size=e}b.Zc=function(a,h){b.pb=h;var n=new b(a);b.pb=0;return n};b.lj=function(a){var h=new b(0);h.f=a.f.slice(0);h.size=a.size;return h};b.W=function(a,h){var n=
new b(0);n.size=a.size;n.size>h&&(n.size=h);n.f=a.f.slice(0,n.size);return n};b.prototype.yb=function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};b.prototype.set=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};b.prototype.Sn=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h.x;this.f[b+1]=h.y};b.prototype.add=
function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Gp=function(a){return b.W(this,a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(b,h){void 0===h&&(h=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(a.J.truncate(5*b/4)<this.f.length){var n=this.f.slice(0,b);this.f=n}}else if(b>this.f.length){a.J.truncate(64>b?Math.max(2*b,4):5*b/4);for(var n=this.f.slice(0),l=this.f.length;l<b;l++)n[l]=
h;this.f=n}this.size=b};b.prototype.df=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(b,h,n){for(var l=this.size;h<l&&h<n;h++)b=a.J.Rh(this.read(h));return b};b.prototype.mc=function(a,h,n){if(null==a||!(a instanceof b))return!1;var c=this.size,d=a.size;if(n>c||n>d&&c!=d)return!1;for(n>c&&(n=c);h<n;h++)if(this.read(h)!=
a.read(h))return!1;return!0};b.prototype.nk=function(b,h,n,l,c,d,f){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();var g=this.size-f;g<l&&this.resize(this.size+l-g);for(g=0;g<f-b;g++)this.f[b+l+g]=this.f[b+g];this.f==h.f&&b<n&&(n+=l);if(c)for(g=0;g<l;g++)this.f[g+b]=h.f[n+g];else{c=l;for(f=0;f<l;f+=d){c-=d;for(g=0;g<d;g++)this.f[b+f+g]=h.f[n+c+g]}}};b.prototype.ul=function(b,h,n,l){if(this.Ta)throw a.g.ya();l-=b;for(var c=this.f.slice(b,b+l),d=0;d<l;d++)this.f[b+n+d]=c[d];for(l=0;l<
n;l++)this.f[b+l]=h};b.prototype.lg=function(b,h,n){if(this.Ta)throw a.g.ya();for(var l=this.f.slice(b,b+(n-b)),c=0;c<n-b;c++)this.f[c+b+2]=l[c];this.f[b]=h.x;this.f[b+1]=h.y};b.prototype.km=function(b,h,n,l,c,d){if(0>b||0>h||0>l)throw a.g.O();if(!c&&(0>=d||0!=h%d))throw a.g.O();if(n.size<l+h)throw a.g.O();if(0!=h)if(this.size<h+b&&this.resize(h+b),n==this)this.xi(b,h,l,c,d);else if(c)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l++;else if(l=l+h-d,1==d)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l--;else{c=0;for(h=
a.J.truncate(h/d);c<h;c++){for(var f=0;f<d;f++)this.f[b+f]=n.f[l+f];b+=d;l-=d}}};b.prototype.oj=function(b,h,n){if(this.Ta)throw a.g.ya();if(b+h>this.size)throw a.g.ya();if(0<n-(b+h)){n-=b+h;for(var l=this.f.slice(b+h,b+n+h),c=0;c<n;c++)this.f[b+c]=l[c]}this.size-=h};b.prototype.Hp=function(b,h,n){if(this.Ta)throw a.g.ya();if(1>n||0!=h%n)throw a.g.ya();for(var l=h>>1,c=0;c<l;c+=n){h-=n;for(var d=0;d<n;d++){var f=this.f[b+c+d];this.f[b+c+d]=this.f[b+h+d];this.f[b+h+d]=f}}};b.prototype.dh=function(b,
h,n){if(0>h||0>n||0>h||n+h>this.size)throw a.g.O();for(var l=h;l<h+n;l++)this.f[l]=b};b.prototype.xi=function(b,h,n,l,c){if(!l||b!=n){for(var d=0;d<h;d++)this.f[b+d]=this.f[n+d];if(!l){n=b;b=b+h-c;l=0;for(h=a.J.truncate(h/2);l<h;l++){for(d=0;d<c;d++){var f=this.f[n+d];this.f[n+d]=this.f[b+d];this.f[b+d]=f}n+=c;b-=c}}}};b.prototype.Yp=function(b,h,n,l,c){if(0>b||0>h||0>l)throw a.g.O();if(0!=h){this.size<(h<<1)+b&&this.resize((h<<1)+b);c||(b+=h-1<<1);c=c?2:-2;for(h+=l;l<h;l++)this.f[b]=n[l].x,this.f[b+
1]=n[l].y,b+=c}};b.prototype.Fp=function(b,h,n,l,c){if(0>b||0>h||0>l||this.size<h+b)throw a.g.O();if(c)for(c=0;c<h;c++)n[l+c]=this.f[b+c];else for(l=l+h-1;b<h;b++)n[l]=this.f[b],l--};b.prototype.clear=function(a){a?this.resize(0):this.df(0)};b.prototype.yd=function(a,b,n){var l=this.f.slice(0,a),c=this.f.slice(b);a=this.f.slice(a,b).sort(n);this.f.length=0;this.f.push.apply(this.f,l.concat(a).concat(c))};b.prototype.Qh=function(){return 1};b.pb=0;return b}();a.rd=c;c=function(){function l(a){this.Ta=
this.Xf=!1;this.f=null;var b=a;2>b&&(b=2);this.f=new Float64Array(b);this.size=a}l.Zc=function(a,b){var n=new l(a),c=a,d=n.f;2>c&&(c=2);if(0!==b)for(var v=0;v<c;v++)d[v]=b;return n};l.lj=function(a){var b=new l(0);b.f=new Float64Array(a.f);b.size=a.size;return b};l.W=function(a,b){var n=new l(0);n.size=a.size;n.size>b&&(n.size=b);var c=n.size;2>c&&(c=2);n.f=new Float64Array(c);n.f.set(a.f.length<=c?a.f:a.f.subarray(0,c),0);return n};l.prototype.yb=function(a){0>=a||(null==this.f?this.f=new Float64Array(a):
a<=this.f.length||(0<this.f.length?(a=new Float64Array(a),a.set(this.f),this.f=a):this.f=new Float64Array(a)))};l.prototype.read=function(a){return this.f[a]};l.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};l.prototype.get=function(a){return this.f[a]};l.prototype.write=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};l.prototype.set=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};l.prototype.Sn=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h.x;this.f[b+1]=h.y};l.prototype.add=
function(a){this.resize(this.size+1);this.f[this.size-1]=a};l.prototype.Gp=function(a){return l.W(this,a)};l.prototype.Bh=function(a){return this.read(a)};l.prototype.resize=function(b,h){void 0===h&&(h=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var n=new Float64Array(this.f,0,b);this.f=n}}else{b>this.f.length&&(n=a.J.truncate(64>b?Math.max(2*b,4):5*b/4),n=new Float64Array(n),n.set(this.f),
this.f=n);for(var n=this.f,l=this.size;l<b;l++)n[l]=h}this.size=b};l.prototype.df=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};l.prototype.Uk=function(a,b){this.write(a,b)};l.prototype.jj=function(b,h,n){for(var l=this.size;h<l&&h<n;h++)b=a.J.Rh(this.read(h));return b};l.prototype.mc=function(a,b,n){if(null==a||!(a instanceof l))return!1;var c=this.size,d=a.size;if(n>c||n>d&&c!=d)return!1;
for(n>c&&(n=c);b<n;b++)if(this.read(b)!=a.read(b))return!1;return!0};l.prototype.nk=function(e,h,n,l,c,d,f){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();var g=this.size-f;g<l&&this.resize(this.size+l-g);b(this.f,e+l,e,e+(f-e));this.f==h.f&&e<n&&(n+=l);if(c)this.f.set(h.f.subarray(n,n+l),e);else{c=l;for(f=0;f<l;f+=d){c-=d;for(g=0;g<d;g++)this.f[e+f+g]=h.f[n+c+g]}}};l.prototype.ul=function(e,h,n,l){if(this.Ta)throw a.g.ya();l-=e;b(this.f,e+l,e,e+l);for(l=0;l<n;l++)this.f[e+l]=h};l.prototype.lg=
function(e,h,n){if(this.Ta)throw a.g.ya();b(this.f,e+2,e,e+(n-e));this.f[e]=h.x;this.f[e+1]=h.y};l.prototype.km=function(b,h,n,l,c,d){if(0>b||0>h||0>l)throw a.g.O();if(!c&&(0>=d||0!=h%d))throw a.g.O();if(n.size<l+h)throw a.g.O();if(0!=h)if(this.size<h+b&&this.resize(h+b),n==this)this.xi(b,h,l,c,d);else if(c)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l++;else if(l=l+h-d,1==d)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l--;else{c=0;for(h=a.J.truncate(h/d);c<h;c++){for(var f=0;f<d;f++)this.f[b+f]=n.f[l+f];b+=d;l-=
d}}};l.prototype.oj=function(e,h,n){if(this.Ta)throw a.g.ya();if(e+h>this.size)throw a.g.ya();0<n-(e+h)&&b(this.f,e,e+h,e+(n-(e+h))+h);this.size-=h};l.prototype.Hp=function(b,h,n){if(this.Ta)throw a.g.ya();if(1>n||0!=h%n)throw a.g.ya();for(var l=h>>1,c=0;c<l;c+=n){h-=n;for(var d=0;d<n;d++){var f=this.f[b+c+d];this.f[b+c+d]=this.f[b+h+d];this.f[b+h+d]=f}}};l.prototype.dh=function(b,h,n){if(0>h||0>n||0>h||n+h>this.size)throw a.g.O();for(var l=h;l<h+n;l++)this.f[l]=b};l.prototype.xi=function(b,h,n,l,
c){if(!l||b!=n)if(this.f.set(this.f.subarray(n,n+h),b),!l){n=b;b=b+h-c;l=0;for(h=a.J.truncate(h/2);l<h;l++){for(var d=0;d<c;d++){var f=this.f[n+d];this.f[n+d]=this.f[b+d];this.f[b+d]=f}n+=c;b-=c}}};l.prototype.Yp=function(b,h,n,l,c){if(0>b||0>h||0>l)throw a.g.O();if(0!=h){this.size<(h<<1)+b&&this.resize((h<<1)+b);c||(b+=h-1<<1);c=c?2:-2;for(h+=l;l<h;l++)this.f[b]=n[l].x,this.f[b+1]=n[l].y,b+=c}};l.prototype.Fp=function(b,h,n,l,c){if(0>b||0>h||0>l||this.size<h+b)throw a.g.O();if(c)for(c=0;c<h;c++)n[l+
c]=this.f[b+c];else for(l=l+h-1;b<h;b++)n[l]=this.f[b],l--};l.prototype.clear=function(a){a?this.resize(0):this.df(0)};l.prototype.yd=function(a,b,n){Array.prototype.sort.call(this.f.subarray(a,b),n)};l.prototype.Qh=function(){return 1};return l}();a.QG=c})(A||(A={}));!0===A.ah.Sk&&!0===A.ah.ht&&(A.rd=A.QG);(function(a){function b(a,e,h,n){h=new Int32Array(a.subarray(h,n));a.set(h,e)}a.sT=function(){return function(){this.random=1973}}();var c=function(){function b(e){this.Ta=this.Xf=!1;this.f=[];
var h=e;2>h&&(h=2);this.f=this.f=a.J.Lh(h,b.pb);this.size=e}b.Zc=function(a,h){b.pb=h;var n=new b(a);b.pb=0;return n};b.lj=function(a){var h=new b(0);h.f=a.f.slice(0);h.size=a.size;return h};b.W=function(a,h){var n=new b(0);n.size=a.size;n.size>h&&(n.size=h);n.f=a.f.slice(0,n.size);return n};b.prototype.yb=function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(b,
h){if(this.Ta)throw a.g.ya();this.f[b]=h};b.prototype.set=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};b.prototype.Sn=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h.x;this.f[b+1]=h.y};b.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Gp=function(a){return b.W(this,a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(b,h){void 0===h&&(h=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");
if(b<=this.size){if(a.J.truncate(5*b/4)<this.f.length){var n=this.f.slice(0,b);this.f=n}}else if(b>this.f.length){a.J.truncate(64>b?Math.max(2*b,4):5*b/4);for(var n=this.f.slice(0),l=this.f.length;l<b;l++)n[l]=h;this.f=n}this.size=b};b.prototype.df=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(b,h,n){for(var l=this.size;h<
l&&h<n;h++)b=a.J.kg(this.read(h),b);return b};b.prototype.mc=function(a,h,n){if(null==a||!(a instanceof b))return!1;var c=this.size,d=a.size;if(n>c||n>d&&c!=d)return!1;for(n>c&&(n=c);h<n;h++)if(this.read(h)!=a.read(h))return!1;return!0};b.prototype.nk=function(b,h,n,l,c,d,f){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();for(var g=0;g<f-b;g++)this.f[b+l+g]=this.f[b+g];this.f==h.f&&b<n&&(n+=l);if(c)for(g=0;g<l;g++)this.f[g+b]=h.f[n+g];else{c=l;for(f=0;f<l;f+=d){c-=d;for(g=0;g<d;g++)this.f[b+
f+g]=h.f[n+c+g]}}};b.prototype.ul=function(b,h,n,l){if(this.Ta)throw a.g.ya();l-=b;for(var c=this.f.slice(b,b+l),d=0;d<l;d++)this.f[b+n+d]=c[d];for(l=0;l<n;l++)this.f[b+l]=h};b.prototype.lg=function(b,h,n){if(this.Ta)throw a.g.ya();for(var l=this.f.slice(b,b+(n-b)),c=0;c<n-b;c++)this.f[c+b+2]=l[c];this.f[b]=h.x;this.f[b+1]=h.y};b.prototype.km=function(b,h,n,l,c,d){if(0>b||0>h||0>l)throw a.g.O();if(!c&&(0>=d||0!=h%d))throw a.g.O();if(n.size<l+h)throw a.g.O();if(0!=h)if(this.size<h+b&&this.resize(h+
b),n==this)this.xi(b,h,l,c,d);else if(c)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l++;else if(l=l+h-d,1==d)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l--;else{c=0;for(h=a.J.truncate(h/d);c<h;c++){for(var f=0;f<d;f++)this.f[b+f]=n.f[l+f];b+=d;l-=d}}};b.prototype.oj=function(b,h,n){if(this.Ta)throw a.g.ya();if(b+h>this.size)throw a.g.ya();if(0<n-(b+h)){n-=b+h;for(var l=this.f.slice(b+h,b+n+h),c=0;c<n;c++)this.f[b+c]=l[c]}this.size-=h};b.prototype.Hp=function(b,h,n){if(this.Ta)throw a.g.ya();if(1>n||0!=h%n)throw a.g.ya();
for(var l=h>>1,c=0;c<l;c+=n){h-=n;for(var d=0;d<n;d++){var f=this.f[b+c+d];this.f[b+c+d]=this.f[b+h+d];this.f[b+h+d]=f}}};b.prototype.dh=function(b,h,n){if(0>h||0>n||0>h||n+h>this.size)throw a.g.O();for(var l=h;l<h+n;l++)this.f[l]=b};b.prototype.xi=function(b,h,n,l,c){if(!l||b!=n){for(var d=0;d<h;d++)this.f[b+d]=this.f[n+d];if(!l){n=b;b=b+h-c;l=0;for(h=a.J.truncate(h/2);l<h;l++){for(d=0;d<c;d++){var f=this.f[n+d];this.f[n+d]=this.f[b+d];this.f[b+d]=f}n+=c;b-=c}}}};b.prototype.Yp=function(b,h,n,l,
c){if(0>b||0>h||0>l)throw a.g.O();if(0!=h){this.size<(h<<1)+b&&this.resize((h<<1)+b);c||(b+=h-1<<1);c=c?2:-2;for(h+=l;l<h;l++)this.f[b]=n[l].x,this.f[b+1]=n[l].y,b+=c}};b.prototype.Fp=function(b,h,n,l,c){if(0>b||0>h||0>l||this.size<h+b)throw a.g.O();if(c)for(c=0;c<h;c++)n[l+c]=this.f[b+c];else for(l=l+h-1;b<h;b++)n[l]=this.f[b],l--};b.prototype.clear=function(a){a?this.resize(0):this.df(0)};b.prototype.yd=function(a,b,n){var l=this.f.slice(0,a),c=this.f.slice(b);a=this.f.slice(a,b).sort(n);this.f.length=
0;this.f.push.apply(this.f,l.concat(a).concat(c))};b.prototype.Qh=function(){return 2};b.prototype.uc=function(){return this.f[this.size-1]};b.prototype.bf=function(){this.resize(this.size-1)};b.prototype.JF=function(a){this.f[this.size-1]=a};b.prototype.QE=function(a){a<this.size-1&&(this.f[a]=this.f[this.size-1]);this.resize(this.size-1)};b.prototype.Ps=function(a){for(var b=0,n=this.size;b<n;b++)if(this.f[b]==a)return b;return-1};b.prototype.Mw=function(a){return 0<=this.Ps(a)};b.pb=0;return b}();
a.ha=c;c=function(){function l(a){this.Ta=this.Xf=!1;this.f=null;var b=a;2>b&&(b=2);this.f=new Int32Array(b);this.size=a}l.Zc=function(a,b){var n=new l(a),c=a,d=n.f;2>c&&(c=2);if(0!==b)for(var f=0;f<c;f++)d[f]=b;return n};l.lj=function(a){var b=new l(0);b.f=new Int32Array(a.f);b.size=a.size;return b};l.W=function(a,b){var n=new l(0);n.size=a.size;n.size>b&&(n.size=b);var c=n.size;2>c&&(c=2);n.f=new Int32Array(c);n.f.set(a.f.length<=c?a.f:a.f.subarray(0,c),0);return n};l.prototype.yb=function(a){0>=
a||(null==this.f?this.f=new Int32Array(a):a<=this.f.length||(0<this.f.length?(a=new Int32Array(a),a.set(this.f),this.f=a):this.f=new Int32Array(a)))};l.prototype.read=function(a){return this.f[a]};l.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};l.prototype.get=function(a){return this.f[a]};l.prototype.write=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};l.prototype.set=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};l.prototype.Sn=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=
h.x;this.f[b+1]=h.y};l.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};l.prototype.Gp=function(a){return l.W(this,a)};l.prototype.Bh=function(a){return this.read(a)};l.prototype.resize=function(b,h){void 0===h&&(h=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var n=new Int32Array(this.f,0,b);this.f=n}}else{b>this.f.length&&(n=a.J.truncate(64>b?Math.max(2*b,4):5*b/4),
n=new Int32Array(n),n.set(this.f),this.f=n);for(var n=this.f,l=this.size;l<b;l++)n[l]=h}this.size=b};l.prototype.df=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};l.prototype.Uk=function(a,b){this.write(a,b)};l.prototype.jj=function(b,h,n){for(var l=this.size;h<l&&h<n;h++)b=a.J.kg(this.read(h),b);return b};l.prototype.mc=function(a,b,n){if(null==a||!(a instanceof l))return!1;var c=
this.size,d=a.size;if(n>c||n>d&&c!=d)return!1;for(n>c&&(n=c);b<n;b++)if(this.read(b)!=a.read(b))return!1;return!0};l.prototype.nk=function(e,h,n,l,c,d,f){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();b(this.f,e+l,e,e+(f-e));this.f==h.f&&e<n&&(n+=l);if(c)this.f.set(h.f.subarray(n,n+l),e);else{c=l;for(f=0;f<l;f+=d){c-=d;for(var g=0;g<d;g++)this.f[e+f+g]=h.f[n+c+g]}}};l.prototype.ul=function(e,h,n,l){if(this.Ta)throw a.g.ya();l-=e;b(this.f,e+l,e,e+l);for(l=0;l<n;l++)this.f[e+l]=h};l.prototype.lg=
function(e,h,n){if(this.Ta)throw a.g.ya();b(this.f,e+2,e,e+(n-e));this.f[e]=h.x;this.f[e+1]=h.y};l.prototype.km=function(b,h,n,l,c,d){if(0>b||0>h||0>l)throw a.g.O();if(!c&&(0>=d||0!=h%d))throw a.g.O();if(n.size<l+h)throw a.g.O();if(0!=h)if(this.size<h+b&&this.resize(h+b),n==this)this.xi(b,h,l,c,d);else if(c)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l++;else if(l=l+h-d,1==d)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l--;else{c=0;for(h=a.J.truncate(h/d);c<h;c++){for(var f=0;f<d;f++)this.f[b+f]=n.f[l+f];b+=d;l-=
d}}};l.prototype.oj=function(e,h,n){if(this.Ta)throw a.g.ya();if(e+h>this.size)throw a.g.ya();0<n-(e+h)&&b(this.f,e,e+h,e+(n-(e+h))+h);this.size-=h};l.prototype.Hp=function(b,h,n){if(this.Ta)throw a.g.ya();if(1>n||0!=h%n)throw a.g.ya();for(var l=h>>1,c=0;c<l;c+=n){h-=n;for(var d=0;d<n;d++){var f=this.f[b+c+d];this.f[b+c+d]=this.f[b+h+d];this.f[b+h+d]=f}}};l.prototype.dh=function(b,h,n){if(0>h||0>n||0>h||n+h>this.size)throw a.g.O();for(var l=h;l<h+n;l++)this.f[l]=b};l.prototype.xi=function(b,h,n,l,
c){if(!l||b!=n)if(this.f.set(this.f.subarray(n,n+h),b),!l){n=b;b=b+h-c;l=0;for(h=a.J.truncate(h/2);l<h;l++){for(var d=0;d<c;d++){var f=this.f[n+d];this.f[n+d]=this.f[b+d];this.f[b+d]=f}n+=c;b-=c}}};l.prototype.Yp=function(b,h,n,l,c){if(0>b||0>h||0>l)throw a.g.O();if(0!=h){this.size<(h<<1)+b&&this.resize((h<<1)+b);c||(b+=h-1<<1);c=c?2:-2;for(h+=l;l<h;l++)this.f[b]=n[l].x,this.f[b+1]=n[l].y,b+=c}};l.prototype.Fp=function(b,h,n,l,c){if(0>b||0>h||0>l||this.size<h+b)throw a.g.O();if(c)for(c=0;c<h;c++)n[l+
c]=this.f[b+c];else for(l=l+h-1;b<h;b++)n[l]=this.f[b],l--};l.prototype.clear=function(a){a?this.resize(0):this.df(0)};l.prototype.yd=function(a,b,n){10>b-a?l.$i(this.f,a,b,n):l.$g(this.f,a,b-1,n)};l.prototype.Qh=function(){return 2};l.prototype.uc=function(){return this.f[this.size-1]};l.prototype.bf=function(){this.resize(this.size-1)};l.prototype.JF=function(a){this.f[this.size-1]=a};l.prototype.QE=function(a){a<this.size-1&&(this.f[a]=this.f[this.size-1]);this.resize(this.size-1)};l.prototype.Ps=
function(a){for(var b=0,n=this.size;b<n;b++)if(this.f[b]==a)return b;return-1};l.prototype.Mw=function(a){return 0<=this.Ps(a)};l.$i=function(a,b,n,l){for(var c=b;c<n;c++){for(var d=a[c],f=c-1;f>=b&&0<l(a[f],d);)a[f+1]=a[f],f--;a[f+1]=d}};l.Wf=function(a,b,n){var l=a[n];a[n]=a[b];a[b]=l};l.$g=function(a,b,n,c){if(!(b>=n))for(;;){if(9>n-b){l.$i(a,b,n+1,c);break}var d=a[b];l.Wf(a,b,n);for(var f=b,v=b;v<n;v++)0>=c(a[v],d)&&(l.Wf(a,f,v),f+=1);l.Wf(a,f,n);f-b<n-f?(l.$g(a,b,f-1,c),b=f+1):(l.$g(a,f+1,n,
c),n=f-1)}};return l}();a.Wu=c})(A||(A={}));!0===A.ah.Sk&&(A.ha=A.Wu);(function(a){function b(a,e,h,n){h=new Int8Array(a.subarray(h,n));a.set(h,e)}var c=function(){function b(e){this.Ta=this.Xf=!1;this.f=[];var h=e;2>h&&(h=2);this.f=a.J.Lh(h,b.pb);this.size=e}b.Zc=function(a,h){b.pb=h;var n=new b(a);b.pb=0;return n};b.lj=function(a){var h=new b(0);h.f=a.f.slice(0);h.size=a.size;return h};b.W=function(a,h){var n=new b(0);n.size=a.size;n.size>h&&(n.size=h);n.f=a.f.slice(0,n.size);return n};b.prototype.yb=
function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};b.prototype.set=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};b.prototype.Sn=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h.x;this.f[b+1]=h.y};b.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Gp=function(a){return b.W(this,
a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(b,h){void 0===h&&(h=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(a.J.truncate(5*b/4)<this.f.length){var n=this.f.slice(0,b);this.f=n}}else if(b>this.f.length){a.J.truncate(64>b?Math.max(2*b,4):5*b/4);for(var n=this.f.slice(0),l=this.f.length;l<b;l++)n[l]=h;this.f=n}this.size=b};b.prototype.df=function(b){(null==this.f||b>this.f.length)&&this.resize(b);
if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(b,h,n){for(var l=this.size;h<l&&h<n;h++)b=a.J.kg(this.read(h),b);return b};b.prototype.mc=function(a,h,n){if(null==a||!(a instanceof b))return!1;var c=this.size,d=a.size;if(n>c||n>d&&c!=d)return!1;for(n>c&&(n=c);h<n;h++)if(this.read(h)!=a.read(h))return!1;return!0};b.prototype.nk=function(b,h,n,l,c,d,f){if(this.Ta)throw a.g.ya();
if(!c&&(1>d||0!=l%d))throw a.g.O();for(var g=0;g<f-b;g++)this.f[b+l+g]=this.f[b+g];this.f==h.f&&b<n&&(n+=l);if(c)for(g=0;g<l;g++)this.f[g+b]=h.f[n+g];else{c=l;for(f=0;f<l;f+=d){c-=d;for(g=0;g<d;g++)this.f[b+f+g]=h.f[n+c+g]}}};b.prototype.ul=function(b,h,n,l){if(this.Ta)throw a.g.ya();l-=b;for(var c=this.f.slice(b,b+l),d=0;d<l;d++)this.f[b+n+d]=c[d];for(l=0;l<n;l++)this.f[b+l]=h};b.prototype.lg=function(b,h,n){if(this.Ta)throw a.g.ya();for(var l=this.f.slice(b,b+(n-b)),c=0;c<n-b;c++)this.f[c+b+2]=
l[c];this.f[b]=h.x;this.f[b+1]=h.y};b.prototype.km=function(b,h,n,l,c,d){if(0>b||0>h||0>l)throw a.g.O();if(!c&&(0>=d||0!=h%d))throw a.g.O();if(n.size<l+h)throw a.g.O();if(0!=h)if(this.size<h+b&&this.resize(h+b),n==this)this.xi(b,h,l,c,d);else if(c)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l++;else if(l=l+h-d,1==d)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l--;else{c=0;for(h=a.J.truncate(h/d);c<h;c++){for(var f=0;f<d;f++)this.f[b+f]=n.f[l+f];b+=d;l-=d}}};b.prototype.oj=function(b,h,n){if(this.Ta)throw a.g.ya();
if(b+h>this.size)throw a.g.ya();if(0<n-(b+h)){n-=b+h;for(var l=this.f.slice(b+h,b+n+h),c=0;c<n;c++)this.f[b+c]=l[c]}this.size-=h};b.prototype.Hp=function(b,h,n){if(this.Ta)throw a.g.ya();if(1>n||0!=h%n)throw a.g.ya();for(var l=h>>1,c=0;c<l;c+=n){h-=n;for(var d=0;d<n;d++){var f=this.f[b+c+d];this.f[b+c+d]=this.f[b+h+d];this.f[b+h+d]=f}}};b.prototype.dh=function(b,h,n){if(0>h||0>n||0>h||n+h>this.size)throw a.g.O();for(var l=h;l<h+n;l++)this.f[l]=b};b.prototype.xi=function(b,h,n,l,c){if(!l||b!=n){for(var d=
0;d<h;d++)this.f[b+d]=this.f[n+d];if(!l){n=b;b=b+h-c;l=0;for(h=a.J.truncate(h/2);l<h;l++){for(d=0;d<c;d++){var f=this.f[n+d];this.f[n+d]=this.f[b+d];this.f[b+d]=f}n+=c;b-=c}}}};b.prototype.Yp=function(b,h,n,l,c){if(0>b||0>h||0>l)throw a.g.O();if(0!=h){this.size<(h<<1)+b&&this.resize((h<<1)+b);c||(b+=h-1<<1);c=c?2:-2;for(h+=l;l<h;l++)this.f[b]=n[l].x,this.f[b+1]=n[l].y,b+=c}};b.prototype.Fp=function(b,h,n,l,c){if(0>b||0>h||0>l||this.size<h+b)throw a.g.O();if(c)for(c=0;c<h;c++)n[l+c]=this.f[b+c];else for(l=
l+h-1;b<h;b++)n[l]=this.f[b],l--};b.prototype.clear=function(a){a?this.resize(0):this.df(0)};b.prototype.yd=function(a,b,n){var l=this.f.slice(0,a),c=this.f.slice(b);a=this.f.slice(a,b).sort(n);this.f.length=0;this.f.push.apply(this.f,l.concat(a).concat(c))};b.prototype.Qh=function(){return 1};b.prototype.wy=function(b,h){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");this.f[b]|=h};b.prototype.BB=function(b,h){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");
this.f[b]&=~h};b.pb=0;return b}();a.Wk=c;c=function(){function l(a){this.f=null;var b=a;2>b&&(b=2);this.f=new Int8Array(b);this.size=a}l.Zc=function(a,b){var n=new l(a),c=a,d=n.f;2>c&&(c=2);if(0!==b)for(var f=0;f<c;f++)d[f]=b;return n};l.lj=function(a){var b=new l(0);b.f=new Int8Array(a.f);b.size=a.size;return b};l.W=function(a,b){var n=new l(0);n.size=a.size;n.size>b&&(n.size=b);var c=n.size;2>c&&(c=2);n.f=new Int8Array(c);n.f.set(a.f.length<=c?a.f:a.f.subarray(0,c),0);return n};l.prototype.yb=function(a){0>=
a||(null==this.f?this.f=new Int8Array(a):a<=this.f.length||(0<this.f.length?(a=new Int8Array(a),a.set(this.f),this.f=a):this.f=new Int8Array(a)))};l.prototype.read=function(a){return this.f[a]};l.prototype.fc=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};l.prototype.get=function(a){return this.f[a]};l.prototype.write=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};l.prototype.set=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=h};l.prototype.Sn=function(b,h){if(this.Ta)throw a.g.ya();this.f[b]=
h.x;this.f[b+1]=h.y};l.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};l.prototype.Gp=function(a){return l.W(this,a)};l.prototype.Bh=function(a){return this.read(a)};l.prototype.resize=function(b,h){void 0===h&&(h=0);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var n=new Int8Array(this.f,0,b);this.f=n}}else{b>this.f.length&&(n=a.J.truncate(64>b?Math.max(2*b,4):5*b/4),
n=new Int8Array(n),n.set(this.f),this.f=n);for(var n=this.f,l=this.size;l<b;l++)n[l]=h}this.size=b};l.prototype.df=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.sa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};l.prototype.Uk=function(a,b){this.write(a,b)};l.prototype.jj=function(b,h,n){for(var l=this.size;h<l&&h<n;h++)b=a.J.kg(this.read(h),b);return b};l.prototype.mc=function(a,b,n){if(null==a||!(a instanceof l))return!1;var c=this.size,
d=a.size;if(n>c||n>d&&c!=d)return!1;for(n>c&&(n=c);b<n;b++)if(this.read(b)!=a.read(b))return!1;return!0};l.prototype.nk=function(e,h,n,l,c,d,f){if(this.Ta)throw a.g.ya();if(!c&&(1>d||0!=l%d))throw a.g.O();b(this.f,e+l,e,e+(f-e));this.f==h.f&&e<n&&(n+=l);if(c)this.f.set(h.f.subarray(n,n+l),e);else{c=l;for(f=0;f<l;f+=d){c-=d;for(var g=0;g<d;g++)this.f[e+f+g]=h.f[n+c+g]}}};l.prototype.ul=function(e,h,n,l){if(this.Ta)throw a.g.ya();l-=e;b(this.f,e+l,e,e+l);for(l=0;l<n;l++)this.f[e+l]=h};l.prototype.lg=
function(e,h,n){if(this.Ta)throw a.g.ya();b(this.f,e+2,e,e+(n-e));this.f[e]=h.x;this.f[e+1]=h.y};l.prototype.km=function(b,h,n,l,c,d){if(0>b||0>h||0>l)throw a.g.O();if(!c&&(0>=d||0!=h%d))throw a.g.O();if(n.size<l+h)throw a.g.O();if(0!=h)if(this.size<h+b&&this.resize(h+b),n==this)this.xi(b,h,l,c,d);else if(c)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l++;else if(l=l+h-d,1==d)for(c=0;c<h;c++)this.f[b]=n.f[l],b++,l--;else{c=0;for(h=a.J.truncate(h/d);c<h;c++){for(var f=0;f<d;f++)this.f[b+f]=n.f[l+f];b+=d;l-=
d}}};l.prototype.oj=function(e,h,n){if(this.Ta)throw a.g.ya();if(e+h>this.size)throw a.g.ya();0<n-(e+h)&&b(this.f,e,e+h,e+(n-(e+h))+h);this.size-=h};l.prototype.Hp=function(b,h,n){if(this.Ta)throw a.g.ya();if(1>n||0!=h%n)throw a.g.ya();for(var l=h>>1,c=0;c<l;c+=n){h-=n;for(var d=0;d<n;d++){var f=this.f[b+c+d];this.f[b+c+d]=this.f[b+h+d];this.f[b+h+d]=f}}};l.prototype.dh=function(b,h,n){if(0>h||0>n||0>h||n+h>this.size)throw a.g.O();for(var l=h;l<h+n;l++)this.f[l]=b};l.prototype.xi=function(b,h,n,l,
c){if(!l||b!=n)if(this.f.set(this.f.subarray(n,n+h),b),!l){n=b;b=b+h-c;l=0;for(h=a.J.truncate(h/2);l<h;l++){for(var d=0;d<c;d++){var f=this.f[n+d];this.f[n+d]=this.f[b+d];this.f[b+d]=f}n+=c;b-=c}}};l.prototype.Yp=function(b,h,n,l,c){if(0>b||0>h||0>l)throw a.g.O();if(0!=h){this.size<(h<<1)+b&&this.resize((h<<1)+b);c||(b+=h-1<<1);c=c?2:-2;for(h+=l;l<h;l++)this.f[b]=n[l].x,this.f[b+1]=n[l].y,b+=c}};l.prototype.Fp=function(b,h,n,l,c){if(0>b||0>h||0>l||this.size<h+b)throw a.g.O();if(c)for(c=0;c<h;c++)n[l+
c]=this.f[b+c];else for(l=l+h-1;b<h;b++)n[l]=this.f[b],l--};l.prototype.clear=function(a){a?this.resize(0):this.df(0)};l.prototype.yd=function(a,b,n){b=this.f.subarray(a,b);Array.prototype.sort.call(b,n);this.f.set(b,a)};l.prototype.wy=function(b,h){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");this.f[b]|=h};l.prototype.BB=function(b,h){if(this.Ta)throw a.g.sa("invalid call. Attribute Stream is read only.");this.f[b]&=~h};l.prototype.Qh=function(){return 1};return l}();a.Xu=
c})(A||(A={}));!0===A.ah.Sk&&(A.Wk=A.Xu);(function(a){var b=function(){function b(){}b.so=function(b,e){return a.Wk.Zc(b,e)};b.kl=function(b,e){return a.rd.Zc(b,e)};b.Rv=function(b,e,h){switch(b){case 1:b=a.rd.Zc(e,h);break;case 2:b=a.ha.Zc(e,h);break;case 4:b=a.Wk.Zc(e,h);break;default:throw a.g.xa();}return b};b.Sv=function(l,e){return b.Rv(a.qa.Qh(l),e*a.qa.Xa(l),a.qa.ue(l))};b.Dg=function(b,e){return a.ha.Zc(b,e)};b.$x=function(a){for(var b=0,h=[],b=0;b<a;b++)h.push(null);return h};return b}();
a.Bc=b})(A||(A={}));(function(a){var b=function(){function b(){}b.so=function(b,e){return a.Xu.Zc(b,e)};b.kl=function(b,e){return a.rd.Zc(b,e)};b.Rv=function(b,e,h){switch(b){case 1:b=a.rd.Zc(e,h);break;case 2:b=a.Wu.Zc(e,h);break;case 4:b=a.Xu.Zc(e,h);break;default:throw a.g.xa();}return b};b.Sv=function(b,e){return a.Bc.Rv(a.qa.Qh(b),e*a.qa.Xa(b),a.qa.ue(b))};b.Dg=function(b,e){return a.Wu.Zc(b,e)};b.$x=function(a){for(var b=0,h=[],b=0;b<a;b++)h.push(null);return h};return b}();a.RG=b})(A||(A={}));
!0===A.ah.Sk&&(A.Bc=A.RG);(function(a){a.da=function(){return function(a){void 0===a&&(a=0);this.o=a}}()})(A||(A={}));(function(a){var b=function(){function a(){}a.ob=function(b,h){return 0<=h?a.I(b):-a.I(b)};a.I=function(a){return 0>a?-a:a};a.Ih=function(a){return 3.552713678800501E-15>a};a.Xz=function(b,h,n){return a.I(b-h)<=n*(1+(a.I(b)+a.I(h))/2)};a.T=function(b,h){return a.Xz(b,h,3.552713678800501E-15)};a.vI=function(b){return 3.552713678800501E-15>=a.I(b)};a.Wc=function(b){return a.vI(b)};return a}();
a.l=b;var c=function(){function l(){}l.lm=function(a,h){var n=b.I(a),l=b.I(h),c=0;0!=n+l&&(n>l?(c=l/n,c=n*Math.sqrt(1+c*c)):(c=n/l,c=l*Math.sqrt(1+c*c)));return c};l.Cp=function(a,h,n,c,d){for(var f=[0,0,0],v=[0,0,0],g=0;2>=g;g++)h[g]-=a[g],n[g]-=h[g];n=f[1]*v[2]-f[2]*v[1];h=f[2]*v[0]-f[0]*v[2];f=f[0]*v[1]-f[1]*v[0];a=-1*(n*a[0]+h*a[1]+f*a[2]);c[0]=n;c[1]=h;c[2]=f;c[3]=a;v=l.jm(c);c[0]/=v;c[1]/=v;c[2]/=v;c[3]/=v;0!=d&&(v=b.Wc(f)?b.Wc(a)?b.ob(1,h):-b.ob(1,a):b.ob(1,f),v*=b.ob(1,d),c[0]*=v,c[1]*=v,
c[2]*=v,c[3]*=v)};l.Tu=function(a,b,n){n[0]=a[1]*b[2]-b[1]*a[2];n[1]=a[2]*b[0]-b[2]*a[0];n[2]=a[0]*b[1]-b[0]*a[1]};l.Pr=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};l.jm=function(a){return l.lm(l.lm(a[0],a[1]),a[2])};l.xm=function(a,b,n,c,d,f){var v=l.n(1,a,b),g=Math.cos(b);c.o=(v+0)*g*Math.cos(n);d.o=(v+0)*g*Math.sin(n);f.o=(v*(1-a)+0)*Math.sin(b)};l.IK=function(a,h,n,c,d,f,v){var g=l.lm(h,n),k=1*Math.sqrt(1-a),m=k/1;if(b.T(g,0))f.o=0,d.o=b.ob(1.570796326794897,c),v.o=b.I(c)-k;else{f.o=Math.atan2(n,
h);n=Math.atan2(1*c,k*g);f=Math.cos(n);var q=Math.sin(n);h=k*a/(1-a);a*=1;n=Math.atan2(c+h*q*q*q,g-a*f*f*f);3.141592653589793<b.I(n)&&(n=b.ob(3.141592653589793,n)-n);n=Math.atan(m*Math.tan(n));q=Math.sin(n);f=Math.cos(n);d.o=Math.atan2(c+h*q*q*q,g-a*f*f*f);1.570796326794897<b.I(d.o)&&(d.o=b.ob(3.141592653589793,d.o)-d.o);n=Math.atan(m*Math.tan(d.o));q=Math.sin(n);f=Math.cos(n);v.o=(c-k*q)*Math.sin(d.o)+(g-1*f)*Math.cos(d.o)}};l.n=function(a,b,n){n=Math.sin(n);return a/Math.sqrt(1-b*n*n)};l.rr=function(a,
b){return Math.atan2(Math.sin(b)*(1-a),Math.cos(b))};l.Si=function(a,b){return Math.atan2(Math.sin(b),Math.cos(b)*(1-a))};l.yn=function(a,h){if(b.Ih(a)||0==h||b.T(b.I(h),1.570796326794897))return h;var n,c,d,f,v,g,k,m,q;if(0.006884661117170036>a){f=Math.sqrt(1-a);v=(1-f)/(1+f);g=v*v;k=v*g;m=v*k;n=v*m;q=v*n;c=v*q;d=1.572916666666667*k-3.2578125*n+4.295068359375*c;f=2.142578125*m-6.071484375*q;var r=3.129296875*n-11.249837239583334*c,s=4.775276692708333*q,C=7.958636765252976*c,t=Math.cos(2*h);return h+
Math.sin(2*h)*(1.5*v-0.84375*k+0.525390625*n-0.2688395182291667*c-d+r-C+t*(2*(1.3125*g-1.71875*m+1.650146484375*q)-4*f+6*s+t*(4*d-12*r+24*C+t*(8*f-32*s+t*(16*r-80*C+t*(32*s+64*t*C))))))}f=1-a;v=a/2;g=b.I(h);k=g*l.Xr(a)/(1.570796326794897*f);m=9999;q=g;for(g=0;1E-16<m&&50>g;g++)c=l.Tk(a,q),n=(l.Lz(q,a)-v*Math.sin(2*q)/c)/f-k,c=1/(c*c*c),d=n/c,n=q-d,m=b.I(d),q=n;return 0<=h?q:-q};l.mR=function(a,h){return b.Ih(h)?a:a*l.Xr(h)/1.570796326794897};l.X=function(a){a=l.Hz(a,6.283185307179586);return 0>a?
a+6.283185307179586:3.141592653589793>b.I(a)||b.T(b.I(a),3.141592653589793)?a:a-6.283185307179586};l.Hz=function(a,b){return a-Math.floor(a/b)*b};l.gg=function(a,b){if(0.006884661117170036>b){var n=Math.sqrt(1-b),n=(1-n)/(1+n),c=n*n,d=c*c;return 1.570796326794897*a/(1+n)*(1+0.25*c+0.015625*d+0.00390625*c*d)}return a*l.Xr(b)};l.Bp=function(a,h){var n=b.ob(1,Math.sin(h)),c=b.I(l.Hz(h,3.141592653589793));h=1.570796326794897>=c?c:3.141592653589793-c;var d;b.T(h,1.570796326794897)?d=h:d=Math.atan(Math.sqrt(1-
a)*Math.tan(h));return d*n};l.q=function(a,b,n){if(0.006884661117170036>b){b=Math.sqrt(1-b);b=(1-b)/(1+b);var c=b*b,d=b*c,f=b*d,v=b*f,g=b*v,k=b*g,m=-0.7291666666666666*d+0.2278645833333333*v+0.03987630208333334*k,q=0.615234375*f-0.21533203125*g,r=-0.54140625*v+0.20302734375*k,s=0.48876953125*g,C=-0.4488699776785715*k,t=Math.cos(2*n);return a/(1+b)*((1+0.25*c+0.015625*f+0.00390625*g)*n+Math.sin(2*n)*(-1.5*b+0.1875*d+0.0234375*v+0.00732421875*k-m+r-C+t*(2*(0.9375*c-0.234375*f-0.03662109375*g)-4*q+6*
s+t*(4*m-12*r+24*C+t*(8*q-32*s+t*(16*r-80*C+t*(32*s+64*t*C)))))))}return a*(l.Lz(n,b)-0.5*b*Math.sin(2*n)/l.Tk(b,n))};l.Tk=function(a,b){var n=Math.sin(b);return Math.sqrt(1-a*n*n)};l.Xr=function(a){return b.Xz(a,1,2.220446049250313E-16)?1:1>a?l.hs(0,1-a)-a/3*l.gs(0,1-a):NaN};l.Lz=function(e,h){var n=b.ob(1,e);e=b.I(e);var c=Math.floor(e/1.570796326794897),d;if(1<h)d=0==e?0:NaN;else if(b.Wc(c))d=l.sin(e),d=d*l.hs(1-d*d,1-h*d*d)-h/3*d*d*d*l.gs(1-d*d,1-h*d*d);else{d=a.J.truncate(c%2);var f=l.Xr(h);
0<d?(d=Math.sin(1.570796326794897*(c+1)-e),d=d*l.hs(1-d*d,1-h*d*d)-h/3*d*d*d*l.gs(1-d*d,1-h*d*d),d=f*(c+1)-d):(e-=1.570796326794897*c,d=Math.sin(e),d=d*l.hs(1-d*d,1-h*d*d)-h/3*d*d*d*l.gs(1-d*d,1-h*d*d),d=f*c+d)}return d*n};l.sin=function(a){a=l.X(a);var h=b.ob(1,a);a=b.I(a);return b.T(a,3.141592653589793)?0:b.T(a,1.570796326794897)?1*h:Math.sin(a)*h};l.gs=function(a,h){for(var n=a,l=h,c=1,d=0,f=1,v,g,k,m;;){v=0.2*(n+l+3*c);g=(v-n)/v;k=(v-l)/v;m=(v-c)/v;if(1E-4>b.I(g)&&1E-4>b.I(k)&&1E-4>b.I(m))break;
m=Math.sqrt(n);g=Math.sqrt(l);v=Math.sqrt(c);m=m*(g+v)+g*v;d+=f/(v*(c+m));f*=0.25;n=0.25*(n+m);l=0.25*(l+m);c=0.25*(c+m)}n=g*k;c=m*m;l=n-c;c=n-6*c;g=c+l+l;return 3*d+f*(1+c*(-0.2142857142857143+0.10227272727272728*c-0.1730769230769231*m*g)+m*(0.1666666666666667*g+m*(-0.4090909090909091*l+0.1153846153846154*m*n)))/(v*Math.sqrt(v))};l.hs=function(a,h){for(var n=a,l=h,c,d,f,v,g=1;;g=0.25*(g+c)){c=(n+l+g)/3;d=2-(c+n)/c;f=2-(c+l)/c;v=2-(c+g)/c;if(1E-4>b.I(d)&&1E-4>b.I(f)&&1E-4>b.I(v))break;c=Math.sqrt(n);
d=Math.sqrt(l);f=Math.sqrt(g);c=c*(d+f)+d*f;n=0.25*(n+c);l=0.25*(l+c)}n=d*f-v*v;l=d*f*v;return(1+(0.04166666666666666*n-0.1-0.06818181818181818*l)*n+0.07142857142857142*l)/Math.sqrt(c)};l.pu=function(a,h){if(b.Ih(a)||0==h||b.T(b.I(h),1.570796326794897))return h;var n,l,c;if(0.006884661117170036>a){n=a*a;l=a*n;c=a*l;var d=a*c,f=a*d,v=a*f,g=-(0.02708333333333333*l+0.03430059523809524*c+0.03149181547619048*d+0.02634359154541446*f+0.02156896735835538*v),k=0.007669890873015873*c+0.01299603174603175*d+
0.0148051353064374*f+0.01454454953803912*v,m=-(0.002275545634920635*d+0.004830845032667949*f+0.006558395368616723*v),q=6.957236677288761E-4*f+0.001775193002406544*v,r=-(2.17324089394402E-4*v),s=Math.cos(2*h);return h+Math.sin(2*h)*(-(0.5*a+0.2083333333333333*n+0.09375*l+0.04878472222222222*c+0.02916666666666667*d+0.01938905423280423*f+0.01388255931712963*v)-g+m-r+s*(2*(0.1041666666666667*n+0.0875*l+0.06050347222222222*c+0.04151785714285714*d+0.02958958540013228*f+0.02203667534722222*v)-4*k+6*q+s*
(4*g-12*m+24*r+s*(8*k-32*q+s*(16*m-80*r+s*(32*q+64*s*r))))))}0==h||b.T(b.I(h),1.570796326794897)?n=h:(l=Math.sqrt(a),c=l*Math.sin(h),n=Math.tan(0.7853981633974483+h/2)*Math.pow((1-c)/(1+c),l/2),n=2*Math.atan(n)-1.570796326794897);return n};l.ZK=function(a,h){if(b.Ih(a)||0==h||b.T(b.I(h),1.570796326794897))return h;var n,l;if(0.006884661117170036>a){s=a*a;m=a*s;q=a*m;n=a*q;r=a*n;l=a*r;var c=0.05833333333333333*m+0.07232142857142858*q+0.05634300595238095*n+0.0355325796406526*r+0.020235546186067*l,d=
0.02653149801587302*q+0.04379960317460317*n+0.0429211791776896*r+0.03255384637546096*l,f=0.01294022817460318*n+0.02668104344536636*r+0.03155651254609588*l,v=0.00659454790965208*r+0.0163075268674227*l,g=0.003463473736911237*l,k=Math.cos(2*h);return h+Math.sin(2*h)*(0.5*a+0.2083333333333333*s+0.08333333333333333*m+0.03611111111111111*q+0.01875*n+0.01195601851851852*r+0.008863673941798942*l-c+f-g+k*(2*(0.1458333333333333*s+0.1208333333333333*m+0.07039930555555556*q+0.03616071428571429*n+0.01839451058201058*
r+0.01017113095238095*l)-4*d+6*v+k*(4*c-12*f+24*g+k*(8*d-32*v+k*(16*f-80*g+k*(32*v+64*k*g))))))}for(var m=Math.sqrt(a),q=m/2,r=Math.tan(0.7853981633974483+h/2),c=0,d=1,s=h;0!=d;s=l)if(n=m*Math.sin(s),l=r*Math.pow((1+n)/(1-n),q),l=2*Math.atan(l)-1.570796326794897,c++,b.T(l,s)||3E4<c)d=0;return s};return l}();a.v=c})(A||(A={}));(function(a){var b=function(){function b(){}b.Gb=function(b,e,h,n,c,d,f,g){if(null!=d||null!=f||null!=g){n=a.v.X(n);e=a.v.X(e);h=a.v.X(h);c=a.v.X(c);1.570796326794897<a.l.I(h)&&
(h=a.l.ob(3.141592653589793,h)-h,e=a.v.X(e+3.141592653589793));1.570796326794897<a.l.I(c)&&(c=a.l.ob(3.141592653589793,c)-c,n=a.v.X(n+3.141592653589793));var k=a.v.X(n-e);if(a.l.T(h,c)&&(a.l.T(e,n)||a.l.T(a.l.I(h),1.570796326794897)))null!=d&&(d.o=0),null!=f&&(f.o=0),null!=g&&(g.o=0);else{if(a.l.T(h,-c)){if(a.l.T(a.l.I(h),1.570796326794897)){null!=d&&(d.o=3.141592653589793*b);null!=f&&(f.o=0<h?a.v.X(3.141592653589793-a.v.X(n)):a.v.X(n));null!=g&&(g.o=0<h?a.v.X(n):a.v.X(3.141592653589793-a.v.X(n)));
return}if(a.l.T(a.l.I(k),3.141592653589793)){null!=d&&(d.o=3.141592653589793*b);null!=f&&(f.o=0);null!=g&&(g.o=0);return}}var m=1.570796326794897==a.l.I(h)?0:Math.cos(h),q=Math.sin(h),r=1.570796326794897==a.l.I(c)?0:Math.cos(c),s=Math.sin(c),C=1.570796326794897==a.l.I(k)?0:Math.cos(k),t=3.141592653589793==a.l.I(k)?0:Math.sin(k);if(null!=d){var u=Math.sin((c-h)/2),k=Math.sin(k/2),u=2*Math.asin(Math.sqrt(u*u+m*r*k*k));d.o=u*b}null!=f&&(a.l.T(a.l.I(h),1.570796326794897)?f.o=0>h?n:a.v.X(3.141592653589793-
n):f.o=Math.atan2(r*t,m*s-q*r*C));null!=g&&(a.l.T(a.l.I(c),1.570796326794897)?g.o=0>c?e:a.v.X(3.141592653589793-e):(g.o=Math.atan2(m*t,s*m*C-r*q),g.o=a.v.X(g.o+3.141592653589793)))}}};b.hf=function(b,e,h,n,c,d,f){if(null!=d||null!=f){e=a.v.X(e);h=a.v.X(h);1.570796326794897<a.l.I(h)&&(h=a.l.ob(3.141592653589793,h)-h,e=a.v.X(e+3.141592653589793));a.l.T(a.l.I(h),1.570796326794897)&&(e=0);c=a.v.X(c);var g=a.l.T(a.l.I(c),1.570796326794897)?0:Math.cos(c),k=a.l.T(a.l.I(c),3.141592653589793)?0:Math.sin(c),
m=a.l.T(a.l.I(h),1.570796326794897)?0:Math.cos(h),q=Math.sin(h);b=n/b;n=a.l.T(a.l.I(b),1.570796326794897)?0:Math.cos(b);var r=a.l.T(a.l.I(b),3.141592653589793)?0:Math.sin(b),s=Math.asin(q*n+m*r*g);null!=f&&(f.o=s);null!=d&&(d.o=a.l.T(a.l.I(s),1.570796326794897)?a.l.T(h,-s)?0>s?c:a.v.X(3.141592653589793-c):e:a.l.T(a.l.I(h),1.570796326794897)&&a.l.T(b,3.141592653589793)?0>h?c:a.v.X(3.141592653589793-c):a.v.X(e+Math.atan2(r*k,m*n-q*r*g)))}};return b}();a.zg=b})(A||(A={}));(function(a){var b=function(){function b(){}
b.Gb=function(b,e,h,n,c,d,f,g,k){var m=new a.da(0),q=new a.da(0),r=[0,0,0],s=[0,0,0],C=[0,0,0],t=new a.da(0),u=new a.da(0),w=new a.da(0),x=new a.da(0),y=new a.da(0);if(null!=f||null!=g||null!=k)if(a.l.Ih(e))a.zg.Gb(b,h,n,c,d,f,g,k);else{c=a.v.X(c);h=a.v.X(h);var A=a.v.X(c-h);if(a.l.T(n,d)&&(a.l.T(h,c)||a.l.T(a.l.I(n),1.570796326794897)))null!=f&&(f.o=0),null!=g&&(g.o=0),null!=k&&(k.o=0);else{if(a.l.T(n,-d)){if(a.l.T(a.l.I(n),1.570796326794897)){null!=f&&(f.o=2*a.v.gg(b,e));null!=g&&(g.o=0<n?a.v.X(3.141592653589793-
a.v.X(c)):a.v.X(c));null!=k&&(k.o=0<n?a.v.X(c):a.v.X(3.141592653589793-a.v.X(c)));return}a.l.T(a.l.I(A),3.141592653589793)&&(null!=f&&(f.o=2*a.v.gg(b,e)),null!=g&&(g.o=0),null!=k&&(k.o=0))}else if(a.l.T(a.l.I(n),1.570796326794897)||a.l.T(a.l.I(d),1.570796326794897))a.l.T(a.l.I(n),1.570796326794897)?h=c:c=h;var B=0,K;0>A&&(B=1,K=h,h=c,c=K,K=n,n=d,d=K);var A=a.v.rr(e,n),D=a.v.rr(e,d);if(null!=g||null!=k)a.zg.Gb(b,h,A,c,D,null,m,q),m=Math.atan2(Math.sin(m.o)*Math.cos(n-A),Math.cos(m.o)),q=Math.atan2(Math.sin(q.o)*
Math.cos(d-D),Math.cos(q.o)),0!=B&&(K=m,m=q,q=K),null!=g&&(g.o=m),null!=k&&(k.o=q);null!=f&&(a.v.xm(e,n,h,w,x,y),r[0]=w.o,r[1]=x.o,r[2]=y.o,a.v.xm(e,d,c,w,x,y),s[0]=w.o,s[1]=x.o,s[2]=y.o,C[0]=r[1]*s[2]-s[1]*r[2],C[1]=-(r[0]*s[2]-s[0]*r[2]),C[2]=r[0]*s[1]-s[0]*r[1],g=Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]),e=1-a.v.Tk(e,a.v.Bp(e,a.v.Si(e,Math.acos(C[2]/g)))),e*=2-e,g=Math.atan2(-C[1],-C[0]),C=a.v.X(g-1.570796326794897),g=a.v.X(g+1.570796326794897),C=a.l.I(a.v.X(h-C))<=a.l.I(a.v.X(h-g))?C:g,a.zg.Gb(1,
C,0,h,A,t,null,null),a.zg.Gb(1,C,0,c,D,u,null,null),3.141592653589793<t.o+u.o&&(C=a.v.X(C+3.141592653589793),a.zg.Gb(1,C,0,h,A,t,null,null),a.zg.Gb(1,C,0,c,D,u,null,null)),t.o*=a.l.ob(1,n),u.o*=a.l.ob(1,d),t.o=a.v.Si(e,t.o),u.o=a.v.Si(e,u.o),h=a.v.q(b,e,t.o),b=a.v.q(b,e,u.o),f.o=a.l.I(b-h))}}};b.hf=function(b,e,h,n,c,d,f,g){var k=0,m=new a.da(0),q=new a.da(0),r=[0,0,0],s=[0,0,0],C=new a.da(0),t=new a.da(0),u=new a.da(0);if(null!=f||null!=g)if(a.l.Ih(e))a.zg.hf(b,h,n,c,d,f,g);else if(a.l.Wc(c))null!=
f&&(f.o=h),null!=g&&(g.o=n);else{d=a.v.X(d);0>c&&(c=a.l.I(c),d=a.v.X(d+3.141592653589793));h=a.v.X(h);n=a.v.X(n);1.570796326794897<a.l.I(n)&&(h=a.v.X(h+3.141592653589793),n=a.l.ob(3.141592653589793,n)-n);a.l.T(a.l.I(n),1.570796326794897)&&(h=0);var w;if(a.l.Wc(n))w=a.l.I(1.570796326794897-a.l.I(d)),w=a.v.Si(e,w),w=1-a.v.Tk(e,a.v.Bp(e,w)),w*=2-w,b=1.570796326794897*(c/a.v.gg(b,w)),b=a.v.yn(w,b),b=a.v.rr(w,b),a.zg.hf(1,h,n,b,d,f,m),null!=g&&(k=m.o),null!=g&&(g.o=a.v.Si(e,k));else if(a.l.T(a.l.I(n),
1.570796326794897))k=a.v.gg(b,e),m=2*k,b=a.l.ob(1.570796326794897,n),d=0<b?a.v.X(3.141592653589793-d):d,n=k-c,a.l.I(n)<=k?null!=f&&(f.o=d):(n=Math.floor(c/m),0==a.J.truncate(n%2)?(null!=f&&(f.o=d),n=k-(c-n*m)):(null!=f&&(f.o=a.v.X(d+3.141592653589793)),c=(n+1)*m-c,n=k-c)),null!=g&&(g.o=a.v.yn(e,n/k*b));else{w=a.v.rr(e,n);d=Math.atan2(Math.sin(d),Math.cos(d)*Math.cos(n-w));var x=a.J.truncate(a.l.ob(1,w))*(1.570796326794897>=a.l.I(d)?1:-1);d=a.v.X(h+Math.atan(Math.tan(d)*-Math.sin(w)));a.zg.Gb(b,d,
0,h,w,null,q,null);w=a.l.I(1.570796326794897-a.l.I(q.o));w=a.v.Si(e,w);w=1-a.v.Tk(e,a.v.Bp(e,w));w*=2-w;a.v.xm(e,0,d,C,t,u);r[0]=C.o;r[1]=t.o;r[2]=u.o;a.v.xm(e,n,h,C,t,u);s[0]=C.o;s[1]=t.o;s[2]=u.o;n=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);n=Math.acos((r[0]*s[0]+r[1]*s[1]+r[2]*s[2])/n);n=a.v.Si(w,n);n=a.v.q(b,w,n)+c*x;c=0<n?q.o:a.v.X(q.o+3.141592653589793);b=1.570796326794897*(a.l.I(n)/a.v.gg(b,w));b=a.v.yn(w,b);b=a.v.rr(w,b);a.zg.hf(1,d,0,b,c,f,m);null!=g&&(k=m.o);null!=g&&(g.o=a.v.Si(e,k))}}};
return b}();a.Yj=b})(A||(A={}));(function(a){var b=function(){function b(){}b.Gb=function(b,e,h,n,c,d,f,g,k){var m=0,q=0,r=0;if(null!=f||null!=g||null!=k)if(a.l.Ih(e))a.zg.Gb(b,h,n,c,d,f,g,k);else{var s=a.v.X(c-h);if(a.l.T(n,d)&&(a.l.Wc(s)||a.l.T(a.l.I(n),1.570796326794897)))null!=f&&(f.o=0),null!=g&&(g.o=0),null!=k&&(k.o=0);else{if(a.l.T(n,-d)){if(a.l.T(a.l.I(n),1.570796326794897)){null!=f&&(f.o=2*a.v.gg(b,e));null!=g&&(g.o=0<n?a.v.X(3.141592653589793-a.v.X(c)):a.v.X(c));null!=k&&(k.o=0<n?a.v.X(c):
a.v.X(3.141592653589793-a.v.X(c)));return}a.l.T(a.l.I(s),3.141592653589793)&&(null!=f&&(f.o=2*a.v.gg(b,e)),null!=g&&(g.o=0),null!=k&&(k.o=0))}else{if(a.l.T(a.l.I(n),1.570796326794897)||a.l.T(a.l.I(d),1.570796326794897)){a.Yj.Gb(b,e,h,n,c,d,f,g,k);return}if(a.l.Wc(s)||a.l.T(a.l.I(s),3.141592653589793)){a.Yj.Gb(b,e,h,n,c,d,f,g,k);return}}var C=1-Math.sqrt(1-e),t=e/(1-e),u=b*(1-C);b=a.v.Bp(e,n);var w=a.v.Bp(e,d);e=1.570796326794897==a.l.I(b)?0:Math.cos(b);var x=Math.sin(b),y=1.570796326794897==a.l.I(w)?
0:Math.cos(w),A=Math.sin(w),B=s,K=Math.cos(B),D=Math.sin(B),E=1,G=0,H,I,J,L,M;do{H=B;I=Math.sqrt(Math.pow(y*D,2)+Math.pow(e*A-x*y*K,2));J=x*A+e*y*K;L=Math.atan2(I,J);if(0==I){E=0;break}M=e*y*D/I;q=Math.cos(Math.asin(M));m=q*q;q=J-2*x*A/m;1<a.l.I(q)&&(q=a.l.ob(1,q));r=q*q;B=C/16*m*(4+C*(4-3*m));B=s+(1-B)*C*M*(L+B*I*(q+B*J*(2*r-1)));K=Math.cos(B);D=Math.sin(B);G++;if(3.141592653589793<a.l.I(B)&&30<G){E=0;break}}while(5E3>=G&&!a.l.T(H,B));if(0!=E)t*=m,C=t*(256+t*(-128+t*(74-47*t)))/1024,null!=f&&(f.o=
u*(1+t*(4096+t*(-768+t*(320-175*t)))/16384)*(L-C*I*(q+C/4*(J*(2*r-1)-C/6*q*(4*I*I-3)*(4*r-3))))),null!=g&&(a.l.T(a.l.I(n),1.570796326794897)?g.o=0>n?c:a.v.X(3.141592653589793-c):g.o=Math.atan2(y*D,e*A-x*y*K)),null!=k&&(a.l.T(a.l.I(d),1.570796326794897)?k.o=0>d?h:a.v.X(3.141592653589793-h):(k.o=Math.atan2(e*D,e*A*K-x*y),k.o=a.v.X(k.o+3.141592653589793)));else{B=a.l.ob(3.141592653589793,s);J=x*A-e*y;L=Math.acos(J);I=Math.sin(L);q=1;G=M=0;do r=M,m=q*q,K=m*m,M=C*m*(1+C+C*C),q=C*C*K*(1+2.25*C),E=C*C*C*
K*m,K=1-0.25*M+0.1875*q-0.1953125*E,M=0.25*M-0.25*q+0.29296875*E,D=0.03125*q-0.05859375*E,E*=0.00651041666666667,q=J-2*x*A/m,1<a.l.I(q)&&(q=a.l.ob(1,q)),H=Math.acos(q),m=Math.cos(2*H),J=Math.cos(3*H),M=a.l.T(n,-d)?a.v.X(3.141592653589793-s)/(3.141592653589793*C*K):a.v.X(B-s)/(C*(K*L+M*I*q+D*Math.sin(2*L)*m+E*Math.sin(3*L)*J)),D=M*I/(e*y),B=1.570796326794897<a.l.I(s)?a.l.ob(3.141592653589793,D)-Math.asin(D):Math.asin(D),K=Math.cos(B),I=Math.sqrt(Math.pow(y*D,2)+Math.pow(e*A-x*y*K,2)),L=3.141592653589793-
Math.asin(a.l.I(I)),J=Math.cos(L),q=Math.cos(Math.asin(M)),G++;while(70>=G&&!a.l.T(r,M));null!=f&&(m=q*q,t*=m,K=1+t*(4096+t*(-768+t*(320-175*t)))/16384,a.l.T(n,-d)?f.o=3.141592653589793*u*K:(q=J-2*x*A/m,H=Math.acos(q),m=Math.cos(2*H),J=Math.cos(3*H),G=Math.cos(4*H),f.o=u*(K*L+t*(-512+t*(128+t*(-60+35*t)))/2048*I*q+t*(-4+5*t)/6144*t*t*Math.sin(2*L)*m+E*Math.sin(3*L)*J+-7.62939453125E-5*t*t*t*t*Math.sin(4*L)*G)));null!=g&&(a.l.Wc(n)&&a.l.Wc(d)?(q=Math.sqrt(1-M*M),g.o=Math.acos(q),0>s&&(g.o*=-1)):a.l.T(a.l.I(n),
1.570796326794897)?g.o=0>n?c:a.v.X(3.141592653589793-c):(f=M/e,u=Math.sqrt(1-f*f),0>e*A-x*y*Math.cos(B)&&(u*=-1),g.o=Math.atan2(f,u),a.l.T(n,-d)&&a.l.I(a.v.X(h-c))>3.141592653589793*(1-C*Math.cos(n))&&(0<n&&1.570796326794897>a.l.I(g.o)||0>n&&1.570796326794897<a.l.I(g.o))&&(g.o=a.l.ob(3.141592653589793,g.o)-g.o)));if(null!=k)if(a.l.Wc(n)&&a.l.Wc(d))q=Math.sqrt(1-M*M),k.o=Math.acos(q),0<=s&&(k.o*=-1);else if(a.l.T(a.l.I(d),1.570796326794897))k.o=0>d?h:a.v.X(3.141592653589793-h);else if(s=M/y,f=Math.sqrt(1-
s*s),u=Math.sin(B/2),0>Math.sin(w-b)-2*e*A*u*u&&(f*=-1),k.o=Math.atan2(s,f),k.o=a.v.X(k.o+3.141592653589793),a.l.T(n,-d)&&!a.l.Wc(n)&&!a.l.T(a.l.I(n),1.570796326794897)&&a.l.I(a.v.X(h-c))>3.141592653589793*(1-C*Math.cos(n))&&(null!=g?u=g.o:(f=M/e,u=Math.sqrt(1-f*f),0>e*A-x*y*Math.cos(B)&&(u*=-1),u=Math.atan2(f,u),a.l.T(n,-d)&&a.l.I(a.v.X(h-c))>3.141592653589793*(1-C*Math.cos(n))&&(0<n&&1.570796326794897>a.l.I(u)||0>n&&1.570796326794897<a.l.I(u))&&(u=a.l.ob(3.141592653589793,u)-u)),1.570796326794897>=
a.l.I(u)&&1.570796326794897<a.l.I(k.o)||1.570796326794897<=a.l.I(u)&&1.570796326794897>a.l.I(k.o)))k.o=-1*a.v.X(k.o+3.141592653589793)}}}};b.hf=function(b,e,h,n,c,d,f,g){if(null!=f||null!=g)if(a.l.Ih(e))a.zg.hf(b,h,n,c,d,f,g);else if(d=a.v.X(d),a.l.T(a.l.I(n),1.570796326794897)||a.l.Wc(d)||a.l.T(a.l.I(d),3.141592653589793))a.Yj.hf(b,e,h,n,c,d,f,g);else{var k=1.570796326794897==a.l.I(d)?0:Math.cos(d),m=3.141592653589793==a.l.I(d)?0:Math.sin(d);a.l.T(a.l.I(n),1.570796326794897)&&(h=0);d=1-Math.sqrt(1-
e);var q=e/(1-e),r=b*(1-d);b=a.v.Bp(e,n);e=1.570796326794897==a.l.I(b)?0:Math.cos(b);n=Math.sin(b);b=Math.atan2(Math.tan(b),k);var s=e*m,C=s*s,t=1-C,u=q*t,q=u*(256+u*(-128+u*(74-47*u)))/1024,w=q/4,x=q/6,y=c/(r*(1+u*(4096+u*(-768+u*(320-175*u)))/16384)),A=y,B;do{B=A;var r=1.570796326794897==a.l.I(A)?0:Math.cos(A),u=3.141592653589793==a.l.I(A)?0:Math.sin(A),K=u*u;c=Math.cos(2*b+A);A=c*c;A=q*u*(c+w*(r*(2*A-1)-x*c*(4*K-3)*(4*A-3)))+y}while(!a.l.T(B,A));r=1.570796326794897==a.l.I(A)?0:Math.cos(A);u=3.141592653589793==
a.l.I(A)?0:Math.sin(A);null!=f&&(m=Math.atan2(u*m,e*r-n*u*k),t=d/16*t*(4+d*(4-3*t)),c=Math.cos(2*b+A),f.o=a.v.X(h+(m-(1-t)*d*s*(A+t*u*(c+t*r*(2*c*c-1))))));null!=g&&(t=n*u-e*r*k,t=C+t*t,t=(1-d)*Math.sqrt(t),g.o=Math.atan2(n*r+e*u*k,t))}};return b}();a.bs=b})(A||(A={}));(function(a){var b=function(){function b(){}b.Gb=function(b,e,h,n,c,d,f,g,k){var m=a.v.X(c-h),q=a.l.T(a.l.I(n),1.570796326794897),r=a.l.T(a.l.I(d),1.570796326794897);if(a.l.T(n,d)&&(a.l.Wc(m)||q))null!=f&&(f.o=0),null!=g&&(g.o=0),null!=
k&&(k.o=0);else{var s,C;a.l.Ih(e)?(s=Math.sin(n),C=Math.sin(d),s=Math.sqrt((1+s)/(1-s)),C=Math.sqrt((1+C)/(1-C)),s=Math.log(C)-Math.log(s),s=Math.atan2(m,s),null!=f&&(f.o=a.l.T(n,d)?a.l.I(b*Math.cos(n)*m):a.l.I((b*d-b*n)/Math.cos(s)))):(s=a.v.pu(e,n),C=a.v.pu(e,d),s=Math.sin(s),C=Math.sin(C),s=Math.sqrt((1+s)/(1-s)),C=Math.sqrt((1+C)/(1-C)),s=Math.log(C)-Math.log(s),s=Math.atan2(m,s),null!=f&&(a.l.T(n,d)?f.o=a.l.I(b*m*Math.cos(n)/a.v.Tk(e,n)):(m=a.v.q(b,e,n),b=a.v.q(b,e,d),f.o=a.l.I((b-m)/Math.cos(s)))));
if(null!=g||null!=k)f=a.v.X(s+3.141592653589793),q&&r||!q&&!r||(q?s=0>n?c:a.v.X(3.141592653589793-c):r&&(f=0>d?h:a.v.X(3.141592653589793-h))),null!=g&&(g.o=s),null!=k&&(k.o=f)}};b.hf=function(b,e,h,n,c,d,f,g){d=a.v.X(d);0>c&&(c=a.l.I(c),d=a.v.X(d+3.141592653589793));a.l.Ih(e)?a.l.T(a.l.I(n),1.570796326794897)?(h=0>n?d:a.v.X(3.141592653589793-d),d=c/b%6.283185307179586,3.141592653589793>=d?b=n-a.l.ob(d,n):(h=a.v.X(h+3.141592653589793),b=-n+a.l.ob(d-3.141592653589793,n))):a.l.T(a.l.I(d),1.570796326794897)?
(h=a.v.X(h+a.l.ob(c,d)/(b*Math.cos(n))),b=n):(b=n+c*Math.cos(d)/b,1.570796326794897<a.l.I(b)&&(b=1.570796326794897),a.l.T(a.l.I(b),1.570796326794897)&&(a.l.Wc(d)||a.l.T(a.l.I(d),3.141592653589793))||(1.570796316258184<a.l.I(b)&&(b=a.l.ob(1.570796316258184,b)),e=Math.sin(n),n=Math.sin(b),e=Math.sqrt((1+e)/(1-e)),n=Math.sqrt((1+n)/(1-n)),e=Math.log(n)-Math.log(e),h=a.v.X(h+Math.tan(d)*e))):a.l.T(a.l.I(n),1.570796326794897)?(h=0>n?d:a.v.X(3.141592653589793-d),d=c/a.v.mR(b,e),d%=6.283185307179586,3.141592653589793>=
d?(b=n-a.l.ob(d,n),b=a.v.yn(e,b)):(h=a.v.X(h+3.141592653589793),b=-n+a.l.ob(d-3.141592653589793,n),b=a.v.yn(e,b))):a.l.T(a.l.I(d),1.570796326794897)?(h=a.v.X(h+a.l.ob(c,d)*a.v.Tk(e,n)/(b*Math.cos(n))),b=n):(b=1.570796326794897*(c*Math.cos(d)+a.v.q(b,e,n))/a.v.gg(b,e),1.570796326794897<a.l.I(b)&&(b=a.l.ob(1.570796326794897,b)),b=a.v.yn(e,b),a.l.T(a.l.I(b),1.570796326794897)&&(a.l.Wc(d)||a.l.T(a.l.I(d),3.141592653589793))||(c=a.v.pu(e,n),n=a.v.pu(e,b),1.570796316258184<a.l.I(n)&&(n=a.l.ob(1.570796316258184,
b),b=a.v.ZK(e,n)),e=Math.sin(c),n=Math.sin(n),e=Math.sqrt((1+e)/(1-e)),n=Math.sqrt((1+n)/(1-n)),e=Math.log(n)-Math.log(e),h=a.v.X(h+Math.tan(d)*e)));null!=f&&(f.o=h);null!=g&&(g.o=b)};return b}();a.Zz=b})(A||(A={}));(function(a){var b=function(){function b(){}b.fw=function(b,e,h,n,c,d,f){a.bs.Gb(b,e,h,n,c,d,null,f,null)};b.Ph=function(b,e,h,n,c,d,f,g){a.bs.hf(b,e,h,n,c,d,f,g)};b.Sd=function(b,e,h,n,c,d,f,g,k,m){switch(m){case 2:a.Yj.Gb(b,e,h,n,c,d,f,g,k);break;case 3:a.$z.Gb(b,e,h,n,c,d,f,g,k);break;
case 1:a.Zz.Gb(b,e,h,n,c,d,f,g,k);break;default:a.bs.Gb(b,e,h,n,c,d,f,g,k)}};b.ek=function(b,e,h,n,c,d,f,g,k){switch(k){case 2:a.Yj.hf(b,e,h,n,c,d,f,g);break;case 3:a.$z.hf(b,e,h,n,c,d,f,g);break;case 1:a.Zz.hf(b,e,h,n,c,d,f,g);break;default:a.bs.hf(b,e,h,n,c,d,f,g)}};return b}();a.Ab=b})(A||(A={}));(function(a){var b=function(){function b(){}b.PS=function(c,e){var h=8;0>h&&(h=8);var n=[0,0,0,0],d=new a.b;d.K(e);d.scale(9102==a.Za.Fm(c).Te().Rc()?1:180*(a.Za.Fm(c).Te().Ej/3.141592653589793));-180>
d.x?(d.x-=d.x%360,-180>d.x&&(d.x+=360)):180<d.x&&(d.x-=d.x%360,180<d.x&&(d.x-=360));90<d.y&&(d.y=90);-90>d.y&&(d.y=-90);for(var f=5*h,g=(f+31)/32,k=-180,m=180,q=f-1,r=g-1;0<=r;r--)for(var s=q-32*r,t=Math.min(32,f-32*r),u=1;u<t;u+=2){var w=0.5*(m+k);d.x>=w?(n[r]|=1<<s,k=w):m=w;s-=2;q-=2}k=-90;m=90;q=f-2;for(r=g-1;0<=r;r--){s=q-32*r;t=Math.min(32,f-32*r);for(u=0;u<t;u+=2)w=0.5*(m+k),d.y>=w?(n[r]|=1<<s,k=w):m=w,s-=2,q-=2}return b.WS(n,h,h)};b.WS=function(a,b,h){for(var n=[],c=0;c<b;c++)n[c]="";for(var d=
c=0,f=0;f<b;f++){var v=a[c]>>d&31,d=d+5;if(31<d){var g=37-d,v=v&(1<<g)-1,d=d-32;c++;v|=(a[c]&(1<<d)-1)<<g}n[b-1-f]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[v]}if(h>b)for(f=0;f<h-b;f++)n.push("0");else h<b&&(n.length=h);return n.join("")};return b}();a.qH=b})(A||(A={}));(function(a){var b={gcstol:[0,1E-8,1,1.11111E-8,2,1.68845E-8,3,2.17661E-8,4,2.22508E-8,5,2.34848E-8,6,2.37811E-8,7,2.88455E-8,8,3.1456E-8,9,3.29779E-8,10,3.66789E-8,11,4.23597E-8,12,4.79463E-8,13,6.45223E-8,14,7.26274E-8,15,7.49945E-8,
16,7.52506E-8,17,7.97991E-8,18,9.66202E-8,19,9.79918E-8,20,9.89735E-8,21,1.02314E-7,22,1.08146E-7,23,2.29734E-7,24,2.42985E-7,25,2.7546E-7,26,3.37034E-7,27,4.30795E-7,28,5.20871E-7,29,5.50921E-7,30,6.74068E-7,31,6.86177E-7,32,7.25263E-7,33,7.44101E-7,34,7.74267E-7,35,9.62954E-7,36,1.06103E-6,37,1.14363E-6,38,1.16219E-6,39,1.36419E-6,40,1.36744E-6,41,1.43239E-6,42,1.73624E-6,43,1.84825E-6,44,1.90986E-6,45,1.97572E-6,46,2.12207E-6,47,2.72837E-6,48,3.1831E-6,49,3.58099E-6,50,3.81972E-6,51,4.09256E-6,
52,4.40737E-6,53,4.77465E-6,54,5.16178E-6,55,5.20871E-6,56,5.72958E-6,57,6.03113E-6,58,6.98729E-6,59,9.24125E-6,60,1.14592E-5],pcstol:[0,6.66667E-9,1,2E-8,2,4.97098E-5,3,0.001,4,0.00109362,5,0.00328087,6,0.00497101],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,
102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,
102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,
102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,
102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,
3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3400,102184,3401,102185,3404,3359,3407,3366,
3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,
102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,
104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,
37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,
5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,
29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077],pcsid:[2066,6,2136,5,2155,5,2157,3,2158,3,2159,5,2160,5,2219,3,2220,3,2244,5,2245,5,2256,5,2265,5,2266,5,2269,5,2270,5,2273,5,2290,3,2291,3,2294,3,
2295,3,2313,3,2314,5,2964,5,2967,5,2968,5,2991,3,2992,5,2993,3,2994,5,3073,3,3076,3,3079,3,3091,5,3106,3,3108,3,3109,3,3141,3,3142,3,3167,2,3337,3,3347,3,3348,3,3359,5,3360,3,3361,5,3362,3,3363,5,3364,3,3365,5,3366,5,3402,3,3403,3,3405,3,3406,3,3439,3,3440,3,3447,3,3449,3,3450,3,3453,5,3454,5,3460,3,3479,5,3480,3,3481,5,3482,3,3483,5,3484,3,3485,5,3486,3,3487,5,3488,3,3489,3,3490,5,3491,3,3492,5,3493,3,3494,5,3495,3,3496,5,3497,3,3498,5,3499,3,3500,5,3501,3,3502,5,3503,3,3504,5,3505,3,3506,5,3507,
3,3508,5,3509,3,3510,5,3511,3,3512,5,3513,3,3514,3,3515,5,3516,3,3517,5,3518,3,3519,5,3520,3,3521,5,3522,3,3523,5,3524,3,3525,5,3526,3,3527,5,3528,3,3529,5,3530,3,3531,5,3532,3,3533,5,3534,3,3535,5,3536,3,3537,5,3538,3,3539,5,3540,3,3541,5,3542,3,3543,5,3544,3,3545,5,3546,3,3547,5,3548,3,3549,5,3550,3,3551,5,3552,3,3553,5,3582,5,3583,3,3584,5,3585,3,3586,5,3587,3,3588,5,3589,3,3590,5,3591,3,3592,3,3593,5,3598,5,3599,3,3600,5,3605,5,3606,3,3607,3,3608,5,3609,3,3610,5,3611,3,3612,5,3613,3,3614,5,3615,
3,3616,5,3617,3,3618,5,3619,3,3620,5,3621,3,3622,5,3623,3,3624,5,3625,3,3626,5,3627,3,3628,5,3629,3,3630,5,3631,3,3632,5,3633,3,3634,5,3635,3,3636,5,3640,5,3641,3,3642,5,3643,3,3644,5,3645,3,3646,5,3647,3,3648,5,3649,3,3650,5,3651,3,3652,5,3653,3,3654,5,3655,3,3656,5,3657,3,3658,5,3659,3,3660,5,3661,3,3662,5,3663,3,3664,5,3668,5,3669,3,3670,5,3671,3,3672,5,3673,3,3674,5,3675,3,3676,5,3677,5,3678,3,3679,5,3680,5,3681,3,3682,5,3683,5,3684,3,3685,3,3686,5,3687,3,3688,5,3689,3,3690,5,3691,3,3692,5,3696,
5,3697,3,3698,5,3699,3,3700,5,3740,3,3749,3,3783,3,3784,3,3793,3,3794,3,3802,3,3816,3,3829,3,3854,3,3920,3,3978,3,3979,3,3991,5,3992,5,4026,3,4037,3,4038,3,4217,5,4438,5,4439,5,4467,3,4471,3,4474,3,4559,3,4839,3,5018,3,5048,3,5167,3,5168,3,5223,3,5234,3,5235,3,5243,3,5266,3,5316,3,5320,3,5321,3,5330,3,5331,3,5337,3,5361,3,5362,3,5382,3,5383,3,5396,3,5456,3,5457,3,5469,3,5472,4,5490,3,5518,3,5523,3,5559,3,5588,5,5589,5,5596,3,5627,3,5629,3,5641,3,5643,3,5644,3,5654,5,5655,5,5659,3,5700,3,5825,3,5836,
3,5837,3,5842,3,5844,3,5880,3,5887,3,5890,3,20499,3,20538,3,20539,3,20790,3,20791,3,21291,3,21292,3,21500,3,21817,3,21818,3,22032,3,22033,3,22091,3,22092,3,22332,3,22391,3,22392,3,22700,3,22770,3,22780,3,22832,3,23090,3,23095,3,23239,3,23240,3,23433,3,23700,3,24047,3,24048,3,24100,5,24200,3,24305,3,24306,3,24382,4,24383,3,24500,3,24547,3,24548,3,24571,2,24600,3,25E3,3,25231,3,25884,3,25932,3,26237,3,26331,3,26332,3,26591,3,26592,3,26632,3,26692,3,26855,5,26856,5,27120,3,27200,3,27291,4,27292,4,27429,
3,27492,3,27500,3,27700,3,28232,3,28600,3,28991,3,28992,3,29100,3,29220,3,29221,3,29333,3,29635,3,29636,3,29701,3,29738,3,29739,3,29849,3,29850,3,29871,2,29872,5,29873,3,29900,3,29901,3,29903,3,30200,6,30339,3,30340,3,30591,3,30592,3,30791,3,30792,3,31028,3,31121,3,31154,3,31170,3,31171,3,31370,3,31528,3,31529,3,31600,3,31700,3,31838,3,31839,3,31901,3,32061,3,32062,3,32098,3,32099,5,32100,3,32104,3,32161,3,32766,3,53034,3,53048,3,53049,3,54034,3,65061,5,65062,5,65161,3,65163,3,102041,5,102064,4,102068,
1,102069,0,102217,5,102218,3,102219,5,102220,5,102378,5,102379,5,102380,3,102381,5,102589,5,102599,5,102600,5,102604,5,102605,3,102606,3,102647,3,102704,5,102705,5,102733,5,102761,5,102762,3,102763,5,102764,3,102765,3,102766,5,102970,5,102974,5,102993,3,102994,3,102995,5,102996,5,103015,3,103016,5,103017,3,103018,5,103025,3,103026,3,103027,5,103028,5,103035,3,103036,3,103037,5,103038,5,103039,3,103040,3,103041,5,103042,5,103043,3,103044,3,103045,5,103046,5,103047,3,103048,3,103049,5,103050,5,103051,
3,103052,5,103053,3,103054,5,103055,3,103056,5,103057,3,103058,3,103059,5,103060,5,103061,3,103062,3,103063,5,103064,5,103069,5,103070,3,103071,3,103072,5,103073,5,103086,3,103087,3,103088,5,103089,5,103094,5,103095,3,103096,5,103103,3,103104,5,103105,3,103106,5,103121,3,103122,5,103123,3,103124,3,103125,5,103126,5,103127,3,103128,3,103129,5,103130,5,103131,3,103132,3,103133,5,103134,5,103135,3,103136,3,103137,5,103138,5,103139,3,103140,5,103141,3,103142,5,103143,3,103144,5,103145,3,103146,5,103147,
3,103148,3,103149,5,103150,5,103151,3,103152,5,103172,3,103173,5,103174,3,103175,3,103176,5,103177,5,103178,3,103179,3,103180,5,103181,5,103182,3,103183,3,103184,5,103185,5,103228,3,103229,3,103230,5,103231,5,103250,3,103251,5,103252,3,103253,5,103260,3,103261,3,103262,5,103263,5,103270,3,103271,3,103272,5,103273,5,103274,3,103275,3,103276,5,103277,5,103278,3,103279,3,103280,5,103281,5,103282,3,103283,3,103284,5,103285,5,103286,3,103287,5,103288,3,103289,5,103290,3,103291,5,103292,3,103293,3,103294,
5,103295,5,103296,3,103297,3,103298,5,103299,5,103376,5,103377,3,103378,3,103379,5,103380,5,103393,3,103394,3,103395,5,103396,5,103472,3,103473,5,103474,3,103475,5,103482,3,103483,5,103484,3,103485,5,103500,3,103501,5,103502,3,103503,3,103504,5,103505,5,103506,3,103507,3,103508,5,103509,5,103510,3,103511,3,103512,5,103513,5,103514,3,103515,5,103516,3,103517,5,103518,3,103519,5,103520,3,103521,5,103522,3,103523,3,103524,5,103525,5,103526,3,103527,5,103561,5,103562,5,103563,3,103564,3,103565,5,103566,
5,103567,3,103568,3,103569,5,103570,5,103585,5,103695,5],pcsidc:[[2E3,2045,3],[2056,2065,3],[2067,2135,3],[2137,2153,3],[2161,2170,3],[2172,2193,3],[2196,2198,3],[2200,2203,3],[2206,2217,3],[2222,2224,5],[2251,2253,5],[2280,2282,5],[2308,2311,3],[2315,2325,3],[2327,2394,3],[2400,2462,3],[2523,2576,3],[2578,2693,3],[2695,2758,3],[2867,2888,5],[2891,2930,5],[2931,2941,3],[2969,2973,3],[2975,2982,3],[2984,2988,3],[2995,3002,3],[3006,3051,3],[3054,3059,3],[3061,3066,3],[3068,3071,3],[3084,3087,3],[3112,
3118,3],[3120,3138,3],[3146,3151,3],[3153,3157,3],[3161,3166,3],[3168,3172,3],[3174,3203,3],[3294,3313,3],[3315,3335,3],[3339,3345,3],[3350,3358,3],[3367,3369,3],[3374,3399,3],[3408,3416,3],[3425,3432,5],[3441,3446,5],[3456,3459,5],[3465,3478,3],[3554,3559,3],[3561,3565,5],[3568,3570,5],[3571,3581,3],[3594,3597,3],[3601,3604,3],[3637,3639,3],[3665,3667,3],[3693,3695,3],[3701,3727,3],[3728,3733,5],[3744,3747,3],[3753,3758,5],[3761,3763,3],[3765,3769,3],[3779,3781,3],[3788,3791,3],[3797,3799,3],[3832,
3841,3],[3844,3852,3],[3873,3885,3],[3890,3893,3],[3907,3912,3],[3942,3950,3],[3968,3970,3],[3973,3976,3],[3986,3989,3],[3994,3997,3],[4399,4413,5],[4418,4433,5],[4491,4554,3],[5069,5072,3],[5105,5130,3],[5180,5184,3],[5253,5259,3],[5269,5275,3],[5292,5311,3],[5343,5349,3],[5355,5357,3],[5387,5389,3],[5459,5463,3],[5479,5482,3],[5530,5539,3],[5550,5552,3],[5562,5583,3],[5623,5625,5],[5631,5639,3],[5649,5653,3],[5663,5680,3],[5682,5685,3],[5875,5877,3],[20002,20032,3],[20062,20092,3],[20135,20138,
3],[20248,20258,3],[20348,20358,3],[20436,20440,3],[20822,20824,3],[20934,20936,3],[21035,21037,3],[21095,21097,3],[21148,21150,3],[21413,21423,3],[21473,21483,3],[21780,21782,3],[21891,21894,3],[22171,22177,3],[22181,22187,3],[22191,22197,3],[22234,22236,3],[22521,22525,3],[22991,22994,3],[23028,23038,3],[23830,23853,3],[23866,23872,3],[23877,23884,3],[23886,23894,3],[23946,23948,3],[24311,24313,3],[24342,24347,3],[24370,24374,4],[24375,24381,3],[24718,24721,3],[24817,24821,3],[24877,24882,3],[24891,
24893,3],[25391,25395,3],[25828,25838,3],[26191,26195,3],[26391,26393,3],[26703,26722,3],[26729,26760,5],[26766,26798,5],[26860,26870,5],[26891,26899,3],[26903,26923,3],[26929,26946,3],[26948,26998,3],[27037,27040,3],[27205,27232,3],[27258,27260,3],[27391,27398,3],[27561,27564,3],[27571,27574,3],[27581,27584,3],[27591,27594,3],[28191,28193,3],[28348,28358,3],[28402,28432,3],[28462,28492,3],[29118,29122,3],[29177,29185,3],[30161,30179,3],[30491,30494,3],[30729,30732,3],[31251,31259,3],[31265,31268,
3],[31275,31278,3],[31288,31297,3],[31461,31465,3],[31491,31495,3],[31917,31922,3],[31965,31985,3],[31992,32E3,3],[32001,32003,5],[32005,32031,5],[32033,32060,5],[32074,32077,5],[32081,32086,3],[32107,32130,3],[32133,32158,3],[32164,32167,5],[32180,32199,3],[32201,32260,3],[32301,32360,3],[32601,32662,3],[32664,32667,5],[32701,32761,3],[53001,53004,3],[53008,53019,3],[53021,53032,3],[53042,53046,3],[54001,54004,3],[54008,54019,3],[54021,54032,3],[54042,54046,3],[54048,54053,3],[102001,102040,3],[102042,
102063,3],[102065,102067,3],[102070,102112,3],[102114,102117,3],[102118,102121,5],[102122,102208,3],[102210,102216,3],[102221,102300,3],[102304,102377,3],[102382,102388,3],[102389,102391,5],[102401,102444,3],[102450,102452,3],[102461,102468,5],[102469,102492,3],[102500,102519,5],[102530,102549,3],[102570,102588,3],[102590,102598,3],[102601,102603,3],[102608,102628,3],[102629,102646,5],[102648,102672,5],[102675,102700,5],[102701,102703,3],[102707,102730,5],[102735,102758,5],[102767,102798,3],[102962,
102969,3],[102971,102973,3],[102975,102989,3],[102990,102992,5],[102997,103002,3],[103003,103008,5],[103009,103011,3],[103012,103014,5],[103019,103021,3],[103022,103024,5],[103029,103031,3],[103032,103034,5],[103065,103068,3],[103074,103076,3],[103077,103079,5],[103080,103082,3],[103083,103085,5],[103090,103093,3],[103097,103099,3],[103100,103102,5],[103107,103109,3],[103110,103112,5],[103113,103116,3],[103117,103120,5],[103153,103157,3],[103158,103162,5],[103163,103165,3],[103166,103171,5],[103186,
103188,3],[103189,103191,5],[103192,103195,3],[103196,103199,5],[103200,103224,3],[103225,103227,5],[103232,103237,3],[103238,103243,5],[103244,103246,3],[103247,103249,5],[103254,103256,3],[103257,103259,5],[103264,103266,3],[103267,103269,5],[103300,103375,3],[103381,103383,3],[103384,103386,5],[103387,103389,3],[103390,103392,5],[103397,103399,3],[103400,103471,5],[103476,103478,3],[103479,103481,5],[103486,103488,3],[103489,103491,5],[103492,103495,3],[103496,103499,5],[103539,103543,3],[103544,
103548,5],[103549,103551,3],[103552,103557,5],[103558,103560,3],[103571,103573,3],[103574,103576,5],[103577,103580,3],[103581,103583,5],[103600,103694,3],[103700,103793,5],[103794,103799,3]],gcsid:[4042,0,4075,0,4081,0,4168,0,4170,0,4188,0,4261,1,4262,0,4263,0,4288,0,4289,0,4305,1,4322,0,4324,0,4326,0,4466,0,4469,0,4475,0,4483,0,4490,0,4555,0,4558,0,4614,0,4619,0,4657,0,4670,0,4671,0,4674,0,4682,0,4683,0,4718,0,4720,0,4721,0,4723,0,4726,0,4737,0,4738,0,4759,0,4761,0,4807,1,4808,0,4809,0,4816,1,4817,
0,4818,0,4819,1,4820,0,4821,1,4823,0,4824,0,4901,1,4902,1,4903,0,4904,0,5228,0,5229,0,5233,0,5252,0,5264,0,5340,0,5354,0,5360,0,5371,0,5373,0,5381,0,5393,0,5464,0,5467,0,5489,0,5524,0,5527,0,5546,0,5561,0,5593,0,5681,0,5886,0,37225,1,37235,0,37257,0,37259,0,37260,0,104020,0,104139,1,104140,1,104223,0,104286,0,104287,0,104304,0,104305,0,104896,0,104900,5,104901,0,104902,0,104903,9,104904,2,104905,2,104906,59,104907,54,104908,0,104909,58,104910,31,104911,56,104912,6,104913,50,104914,41,104915,10,104916,
3,104917,30,104918,8,104919,60,104920,53,104921,44,104922,48,104923,51,104924,38,104925,0,104926,49,104927,57,104928,21,104929,23,104930,35,104931,49,104932,27,104933,17,104934,13,104935,7,104936,56,104937,40,104938,28,104939,37,104940,15,104941,55,104942,22,104943,4,104944,0,104945,20,104946,42,104947,47,104948,52,104949,43,104950,46,104951,39,104952,24,104953,16,104954,50,104955,36,104956,33,104957,46,104958,14,104959,19,104960,0,104961,34,104962,32,104963,29,104964,45,104965,26,104966,25,104967,
41,104968,11,104969,12,104970,18],gcsidc:[[4001,4016,0],[4018,4025,0],[4027,4029,0],[4031,4036,0],[4044,4047,0],[4052,4054,0],[4120,4166,0],[4172,4176,0],[4178,4185,0],[4190,4196,0],[4198,4216,0],[4218,4222,0],[4224,4232,0],[4234,4260,0],[4265,4267,0],[4269,4286,0],[4291,4303,0],[4306,4319,0],[4600,4610,0],[4621,4625,0],[4627,4633,0],[4636,4639,0],[4641,4646,0],[4659,4667,0],[4676,4680,0],[4686,4697,0],[4699,4706,0],[4740,4757,0],[4763,4765,0],[4801,4806,0],[4810,4812,1],[4813,4815,0],[37001,37008,
0],[37201,37208,0],[37211,37224,0],[37226,37233,0],[37237,37243,0],[37245,37247,0],[37249,37255,0],[104100,104138,0],[104141,104145,0],[104256,104261,0],[104700,104786,0],[104990,104992,0]]},c={c:[[2E3,2045,9001],[2056,2065,9001],[2067,2135,9001],[2137,2153,9001],[2161,2170,9001],[2172,2193,9001],[2196,2198,9001],[2200,2203,9001],[2206,2217,9001],[2222,2224,9002],[2251,2253,9002],[2280,2282,9002],[2308,2311,9001],[2315,2325,9001],[2327,2394,9001],[2400,2462,9001],[2523,2576,9001],[2578,2693,9001],
[2695,2758,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2941,9001],[2969,2973,9001],[2975,2982,9001],[2984,2988,9001],[2995,3002,9001],[3006,3051,9001],[3054,3059,9001],[3061,3066,9001],[3068,3071,9001],[3084,3087,9001],[3112,3118,9001],[3120,3138,9001],[3146,3151,9001],[3153,3157,9001],[3161,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3335,9001],[3339,3345,9001],[3350,3358,
9001],[3367,3369,9001],[3374,3399,9001],[3408,3416,9001],[3425,3432,9003],[3441,3446,9003],[3456,3459,9003],[3465,3478,9001],[3554,3559,9001],[3561,3565,9003],[3568,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3733,9003],[3744,3747,9001],[3753,3758,9003],[3761,3763,9001],[3765,3769,9001],[3779,3781,9001],[3788,3791,9001],[3797,3799,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3907,
3912,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4052,4054,9102],[4120,4166,9102],[4172,4176,9102],[4178,4185,9102],[4190,4196,9102],[4198,4216,9102],[4218,4222,9102],[4224,4232,9102],[4234,4260,9102],[4265,4267,9102],[4269,4286,9102],[4291,4303,9102],[4306,4319,9102],[4399,4413,9003],[4418,4433,9003],[4491,4554,9001],[4600,4610,9102],[4621,4625,9102],[4627,4633,9102],
[4636,4639,9102],[4641,4646,9102],[4659,4667,9102],[4676,4680,9102],[4686,4697,9102],[4699,4706,9102],[4740,4757,9102],[4763,4765,9102],[4801,4806,9102],[4810,4812,9105],[4813,4815,9102],[5069,5072,9001],[5105,5130,9001],[5180,5184,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5343,5349,9001],[5355,5357,9001],[5387,5389,9001],[5459,5463,9001],[5479,5482,9001],[5530,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,
9001],[5875,5877,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21891,21894,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,
23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26703,26722,9001],[26729,26760,9003],[26766,26798,9003],[26860,26870,9003],[26891,26899,9001],[26903,26923,9001],[26929,26946,9001],[26948,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],
[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29118,29122,9001],[29177,29185,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31278,9001],[31288,31297,9001],[31461,31465,9001],[31491,31495,9001],[31917,31922,9001],[31965,31985,9001],[31992,32E3,9001],[32001,32003,9003],[32005,32031,9003],[32033,32060,9003],[32074,32077,9003],[32081,32086,9001],[32107,32130,
9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37001,37008,9102],[37201,37208,9102],[37211,37224,9102],[37226,37233,9102],[37237,37243,9102],[37245,37247,9102],[37249,37255,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53042,53046,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[102001,102040,9001],[102042,102063,9001],
[102065,102067,9001],[102070,102112,9001],[102114,102117,9001],[102122,102208,9001],[102210,102216,9001],[102221,102300,9001],[102304,102377,9001],[102382,102388,9001],[102389,102391,9003],[102401,102444,9001],[102450,102452,9001],[102461,102468,9003],[102469,102492,9001],[102500,102519,9002],[102530,102549,9001],[102570,102588,9001],[102590,102598,9001],[102601,102603,9001],[102608,102628,9001],[102629,102646,9003],[102648,102672,9003],[102675,102700,9003],[102701,102703,9001],[102707,102730,9003],
[102735,102758,9003],[102767,102798,9001],[102962,102969,9001],[102971,102973,9001],[102975,102989,9001],[102990,102992,9002],[102997,103002,9001],[103003,103008,9003],[103009,103011,9001],[103012,103014,9003],[103019,103021,9001],[103022,103024,9003],[103029,103031,9001],[103032,103034,9003],[103065,103068,9001],[103074,103076,9001],[103077,103079,9002],[103080,103082,9001],[103083,103085,9003],[103090,103093,9001],[103097,103099,9001],[103100,103102,9003],[103107,103109,9001],[103110,103112,9003],
[103113,103116,9001],[103117,103120,9003],[103153,103157,9001],[103158,103162,9003],[103163,103165,9001],[103166,103168,9002],[103169,103171,9003],[103186,103188,9001],[103189,103191,9003],[103192,103195,9001],[103196,103199,9003],[103200,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103300,103375,9001],[103381,103383,9001],[103384,103386,9002],
[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103400,103471,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103600,103694,9001],[103700,103793,9003],[103794,103799,9001],[104100,104138,9102],
[104141,104145,9102],[104256,104261,9102],[104700,104786,9102],[104900,104970,9102],[104990,104992,9102]],nc:[2066,9039,2136,9094,2155,9003,2157,9001,2158,9001,2159,9094,2160,9094,2219,9001,2220,9001,2244,9003,2245,9003,2256,9002,2265,9002,2266,9002,2269,9002,2270,9002,2273,9002,2290,9001,2291,9001,2294,9001,2295,9001,2313,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2964,9003,2967,9003,2968,9003,2991,9001,2992,9002,2993,9001,2994,9002,3073,
9001,3076,9001,3079,9001,3091,9003,3106,9001,3108,9001,3109,9001,3141,9001,3142,9001,3167,9301,3337,9001,3347,9001,3348,9001,3359,9003,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3366,9005,3402,9001,3403,9001,3405,9001,3406,9001,3439,9001,3440,9001,3447,9001,3449,9001,3450,9001,3453,9003,3454,9003,3460,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,
3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,
9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,
3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,
9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3740,9001,3749,9001,3783,9001,3784,9001,3793,9001,3794,9001,3802,9001,3816,9001,3829,9001,3854,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4075,9102,4081,9102,4168,9102,4170,9102,4188,9102,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4305,9105,4322,9102,4324,9102,4326,9102,4438,9003,4439,9003,4466,9102,4467,9001,4469,9102,4471,9001,4474,9001,4475,9102,4483,9102,
4490,9102,4555,9102,4558,9102,4559,9001,4614,9102,4619,9102,4657,9102,4670,9102,4671,9102,4674,9102,4682,9102,4683,9102,4718,9102,4720,9102,4721,9102,4723,9102,4726,9102,4737,9102,4738,9102,4759,9102,4761,9102,4807,9105,4808,9102,4809,9102,4816,9105,4817,9102,4818,9102,4819,9105,4820,9102,4821,9105,4823,9102,4824,9102,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5018,9001,5048,9001,5167,9001,5168,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5252,9102,5264,9102,5266,
9001,5316,9001,5320,9001,5321,9001,5330,9001,5331,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5393,9102,5396,9001,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5518,9001,5523,9001,5524,9102,5527,9102,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,
5842,9001,5844,9001,5880,9001,5886,9102,5887,9001,5890,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23433,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,
9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,26855,9003,26856,9003,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27492,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29100,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,29900,9001,29901,9001,29903,9001,30200,9039,30339,9001,30340,9001,30591,9001,30592,
9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37225,9105,37235,9102,37257,9102,37259,9102,37260,9102,53034,9001,53048,9001,53049,9001,54034,9001,65061,9003,65062,9003,65161,9001,65163,9001,102041,9003,102064,9085,102068,109030,102069,109031,102118,9003,102119,9002,102120,9003,102121,9003,
102217,9003,102218,9001,102219,9003,102220,9003,102378,9002,102379,9002,102380,9001,102381,9002,102589,9003,102599,9003,102600,9003,102604,9003,102605,9001,102606,9001,102647,9001,102704,9003,102705,9003,102733,9003,102761,9003,102762,9001,102763,9003,102764,9001,102765,9001,102766,9003,102970,9002,102974,9003,102993,9001,102994,9001,102995,9003,102996,9003,103015,9001,103016,9003,103017,9001,103018,9003,103025,9001,103026,9001,103027,9003,103028,9003,103035,9001,103036,9001,103037,9003,103038,9003,
103039,9001,103040,9001,103041,9003,103042,9003,103043,9001,103044,9001,103045,9003,103046,9003,103047,9001,103048,9001,103049,9003,103050,9003,103051,9001,103052,9003,103053,9001,103054,9003,103055,9001,103056,9003,103057,9001,103058,9001,103059,9003,103060,9003,103061,9001,103062,9001,103063,9003,103064,9003,103069,9003,103070,9001,103071,9001,103072,9003,103073,9003,103086,9001,103087,9001,103088,9003,103089,9003,103094,9002,103095,9001,103096,9003,103103,9001,103104,9003,103105,9001,103106,9003,
103121,9001,103122,9003,103123,9001,103124,9001,103125,9002,103126,9002,103127,9001,103128,9001,103129,9003,103130,9003,103131,9001,103132,9001,103133,9003,103134,9003,103135,9001,103136,9001,103137,9002,103138,9002,103139,9001,103140,9003,103141,9001,103142,9003,103143,9001,103144,9003,103145,9001,103146,9002,103147,9001,103148,9001,103149,9003,103150,9003,103151,9001,103152,9003,103172,9001,103173,9003,103174,9001,103175,9001,103176,9003,103177,9003,103178,9001,103179,9001,103180,9003,103181,9003,
103182,9001,103183,9001,103184,9003,103185,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,
103296,9001,103297,9001,103298,9003,103299,9003,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,
103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103695,9003,104020,9102,104139,9105,104140,9105,104223,9102,104286,9102,104287,9102,104304,9102,104305,9102,104896,9102]},l=function(){function a(){}a.cC=function(b){!1===a.ti&&a.ao();var n=a.NG(b);if(-1==n){var c=a.js(b);c!=b&&(n=a.cC(c))}return n};a.NG=function(b){return void 0!==a.cs[b]?
a.cs[b]:-1};a.RM=function(b){!1===a.ti&&a.ao();var n=a.Fz(b);if(1E38==n){var c=a.js(b);c!=b&&(n=a.Fz(c));if(1E38==n)return 1E-10}return n};a.VO=function(b){if(void 0!==a.Un[b])return!0;var n=a.js(b);return n!=b&&void 0!==a.Un[n]?!0:!1};a.YO=function(b){if(void 0!==a.Gh[b])return!0;var n=a.js(b);return n!=b&&void 0!==a.Gh[n]?!0:!1};a.Fz=function(b){!1===a.ti&&a.ao();return void 0!==a.Un[b]?a.Un[b]:void 0!==a.Gh[b]?a.Gh[b]:1E38};a.nU=function(b){!1===a.ti&&a.ao();return void 0!==a.dw[b]?a.dw[b]:b};
a.js=function(b){!1===a.ti&&a.ao();return void 0!==a.Lw[b]?a.Lw[b]:b};a.ao=function(){for(var h=b,n=null,l=0;l<h.pcsid.length;l+=2)a.Gh[h.pcsid[l]]=h.pcstol[2*h.pcsid[l+1]+1];for(l=0;l<h.pcsidc.length;l+=1)for(var n=h.pcsidc[l],d=n[0];d<=n[1];d++)a.Gh[d]=h.pcstol[2*n[2]+1];for(l=0;l<h.gcsid.length;l+=2)a.Un[h.gcsid[l]]=h.gcstol[2*h.gcsid[l+1]+1];for(l=0;l<h.gcsidc.length;l+=1){n=h.gcsidc[l];for(d=n[0];d<=n[1];d++)a.Gh[d]=h.gcstol[2*n[2]+1]}for(l=0;l<c.c.length;l+=1){n=c.c[l];for(d=n[0];d<=n[1];d++)a.cs[d]=
n[2]}for(l=0;l<c.nc.length;l+=2)a.cs[c.nc[l]]=c.nc[l+1];c=null;for(l=0;l<h.newtoold.length;l+=2)a.dw[h.newtoold[l+1]]=h.newtoold[l],a.Lw[h.newtoold[l]]=h.newtoold[l+1];b=null;a.ti=!0};a.ti=!1;a.Un=[];a.Gh=[];a.dw=[];a.Lw=[];a.cs=[];return a}();a.ks=l})(A||(A={}));(function(a){function b(a){return 0===a.length?'""':'"'==a[0]||"."==a[0]||"0"<=a[0]&&"9">=a[0]?a:'"'+a.trim()+'"'}var c=[],l=function(){function e(){}e.TM=function(h){try{for(var n=0;n<c.length;n++)if(c[n].wkttext===h)return c[n].unit;for(var l,
d=n="",f=!1,g=0;g<h.length;g++){var k=h[g];!0===f?'"'==k?'"'==h[g+1]?n+=k:f=!1:n+=k:/[\s]/.test(k)||(","==k?(d=""!==n?d+(b(n)+","):d+",",n=""):")"==k||"]"==k?(d=""!==n?d+(b(n)+"]}"):d+"]}",n=""):"("==k||"["==k?(d+='{ "entity": "'+n.toUpperCase().trim()+'", "values":[',n=""):'"'==k?(f=!0,n=""):n+=k)}l=JSON.parse(d);var m=e.Dz(l);if(null===m)return null;l=null;for(k=0;k<m.values.length;k++)if("object"===typeof m.values[k]&&"UNIT"===m.values[k].entity){l=m.values[k];break}if(null===l)return null;var q=
a.Ub.DL("GEOGCS"===m.entity?1:0,l.values[1],l.values[2]);c.push({wkttext:h,unit:q});10<c.length&&c.shift();return q}catch(r){return null}};e.Dz=function(a){if(null===a)return null;if("GEOGCS"===a.entity||"PROJCS"===a.entity)return a;for(var b=[],c=0;c<a.values.length;c++)if("object"===typeof a.values[c]&&void 0!==a.values[c].entity){if("GEOGCS"===a.values[c].entity||"PROJCS"==a.values[c].entity)return a.values[c];b.push(a.values[c])}for(a=0;a<b.length;a++)if(c=e.Dz(b[a]),null!==c)return c;return null};
e.SM=function(a){var b=-1;if(null!=a&&0<a.length){var e,c;e=a.indexOf("PROJCS");if(0<=e){var l=0;e=a.lastIndexOf("UNIT");if(0<=e&&(e=a.indexOf(",",e+4),0<e&&(e++,c=a.indexOf("]",e+1),0<c)))try{l=parseFloat(a.substring(e,c))}catch(d){l=0}0<l&&(b=0.001/l)}else if(e=a.indexOf("GEOGCS"),0<=e){var f=0,l=0;e=a.indexOf("SPHEROID",e+6);if(0<e&&(e=a.indexOf(",",e+8),0<e)){e++;c=a.indexOf(",",e+1);if(0<c)try{f=parseFloat(a.substring(e,c))}catch(v){f=0}if(0<f&&(e=a.indexOf("UNIT",c+1),0<=e&&(e=a.indexOf(",",
e+4),0<e&&(e++,c=a.indexOf("]",e+1),0<c))))try{l=parseFloat(a.substring(e,c))}catch(g){l=0}}0<f&&0<l&&(b=0.001/(f*l))}}return b};return e}();a.mA=l})(A||(A={}));(function(a){(function(a){a[a.NONE=0]="NONE";a[a.LINEAR=1]="LINEAR";a[a.ANGULAR=2]="ANGULAR"})(a.AH||(a.AH={}));(function(a){a[a.enumFloat=0]="enumFloat";a[a.enumDouble=1]="enumDouble";a[a.enumInt32=2]="enumInt32";a[a.enumInt64=3]="enumInt64";a[a.enumInt8=4]="enumInt8";a[a.enumInt16=5]="enumInt16"})(a.nI||(a.nI={}));(function(a){a[a.POSITION=
0]="POSITION";a[a.Z=1]="Z";a[a.M=2]="M";a[a.ID=3]="ID";a[a.NORMAL=4]="NORMAL";a[a.TEXTURE1D=5]="TEXTURE1D";a[a.TEXTURE2D=6]="TEXTURE2D";a[a.TEXTURE3D=7]="TEXTURE3D";a[a.ID2=8]="ID2";a[a.MAXSEMANTICS=10]="MAXSEMANTICS"})(a.xf||(a.xf={}));var b=function(){function b(a,e){this.dr=this.me=null;this.sp=this.Ba=0;this.Wg=this.Jf=null;this.tk=0;if(void 0!==e){this.Ba=e.Ba;this.sp=e.sp;this.Jf=e.Jf.slice(0);this.Wg=e.Wg.slice(0);this.tk=e.tk;this.dr=[];for(var h=0,n=0;n<this.Ba;n++)this.dr[n]=h,h+=b.Xa(this.Jf[n]);
this.sp=h;this.me=[];for(n=0;n<this.Ba;n++)for(var h=b.Xa(this.Id(n)),c=b.ue(this.Id(n)),d=0;d<h;d++)this.me[this.dr[n]+d]=c}else this.sp=this.Ba=0}b.prototype.Id=function(b){if(0>b||b>this.Ba)throw a.g.O();return this.Jf[b]};b.prototype.zf=function(a){return this.Wg[a]};b.IN=function(a){return b.bc[a]};b.Qh=function(a){return b.Dc[a]};b.ye=function(a){return b.Cd[a]};b.Gh=function(a){return b.ye(b.Qh(a))*b.Xa(a)};b.Xa=function(a){return b.pb[a]};b.Wf=function(a){return 2>a};b.ti=function(a){return b.Wf(b.Qh(a))};
b.prototype.hasAttribute=function(a){return 0<=this.Wg[a]};b.prototype.WC=function(){return this.hasAttribute(1)};b.ue=function(a){return b.W[a]};b.prototype.WN=function(a){return this.dr[a]};b.nD=function(a,e){return b.W[a]===e};b.$g=function(b){if(4==b)return 2;if(8==b)return 3;throw a.g.O();};b.prototype.mc=function(a){return this===a};b.prototype.jj=function(){for(var b=a.J.kg(this.Jf[0]),e=1;e<this.Ba;e++)b=a.J.kg(this.Jf[e],b);return b};b.prototype.fj=function(a){return this.dr[a]};b.prototype.ic=
function(){return this.tk};b.prototype.Gd=function(a){return this.Jf[a]};b.W=[0,0,NaN,0,0,0,0,0,0];b.bc=[1,1,1,0,2,1,1,1,0];b.Dc=[1,1,1,2,0,0,0,0,2];b.Cd=[4,8,4,8,1,2];b.pb=[2,1,1,1,3,1,2,3,2];return b}();a.qa=b})(A||(A={}));(function(a){function b(a,e,l,d){var f=a.kd,v=a.e+e+1;1===l?d=5<=f[v]:2===l?d=5<f[v]||5==f[v]&&(d||0>v||void 0!==f[v+1]||f[v-1]&1):3===l?d=d||void 0!==f[v]||0>v:(d=!1,0!==l&&c("!Big.RM!"));if(1>v||!f[0])d?(a.e=-e,a.kd=[1]):a.kd=[a.e=0];else{f.length=v--;if(d)for(;9<++f[v];)f[v]=
0,v--||(++a.e,f.unshift(1));for(v=f.length;!f[--v];f.pop());}}function c(a){a=Error(a);a.name="BigError";throw a;}var l=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,e=function(){function a(b){if(b instanceof a)this.Ed=b.Ed,this.e=b.e,this.kd=b.kd.slice();else{var e,d,f;0===b&&0>1/b?b="-0":l.test(b+="")||c(NaN);this.Ed="-"==b.charAt(0)?(b=b.slice(1),-1):1;-1<(e=b.indexOf("."))&&(b=b.replace(".",""));0<(d=b.search(/e/i))?(0>e&&(e=d),e+=+b.slice(d+1),b=b.substring(0,d)):0>e&&(e=b.length);for(d=0;"0"==b.charAt(d);d++);
if(d==(f=b.length))this.kd=[this.e=0];else{for(;"0"==b.charAt(--f););this.e=e-d-1;this.kd=[];for(e=0;d<=f;this.kd[e++]=+b.charAt(d++));}}}a.prototype.abs=function(){var b=new a(this);b.Ed=1;return b};a.prototype.DB=function(){var b,e=this.kd,c=(b=new a(0)).kd,l=this.Ed,d=b.Ed,f=this.e,v=b.e;if(!e[0]||!c[0])return e[0]?l:c[0]?-d:0;if(l!=d)return l;b=0>l;if(f!=v)return f>(v^b)?1:-1;l=-1;for(d=(f=e.length)<(v=c.length)?f:v;++l<d;)if(e[l]!=c[l])return e[l]>(c[l]^b)?1:-1;return f==v?0:f>(v^b)?1:-1};a.prototype.VB=
function(e){var l=this.kd,d=(e=new a(e)).kd,f=this.Ed==e.Ed?1:-1,v=a.Dc;(v!==~~v||0>v||1E6<v)&&c("!Big.DP!");if(!l[0]||!d[0])return l[0]==d[0]&&c(NaN),d[0]||c(f/0),new a(0*f);var g,k,m,q,r=d.slice(),s=g=d.length,t=l.length,u=l.slice(0,g),w=u.length,x=e,y=x.kd=[],A=0,B=v+(x.e=this.e-e.e)+1;x.Ed=f;f=0>B?0:B;for(r.unshift(0);w++<g;u.push(0));do{for(k=0;10>k;k++){if(g!=(w=u.length))m=g>w?1:-1;else{q=-1;for(m=0;++q<g;)if(d[q]!=u[q]){m=d[q]>u[q]?1:-1;break}}if(0>m){for(e=w==g?d:r;w;){if(u[--w]<e[w]){for(q=
w;q&&!u[--q];u[q]=9);--u[q];u[w]+=10}u[w]-=e[w]}for(;!u[0];u.shift());}else break}y[A++]=m?k:++k;u[0]&&m?u[w]=l[s]||0:u=[l[s]]}while((s++<t||void 0!==u[0])&&f--);y[0]||1==A||(y.shift(),x.e--);A>B&&b(x,v,a.ye,void 0!==u[0]);return x};a.prototype.mO=function(){return 0<this.DB()};a.prototype.uP=function(){return 0>this.DB()};a.prototype.mr=function(b){var e,c,l=this.Ed,d=(b=new a(b)).Ed;if(l!=d)return b.Ed=-d,this.NE(b);var f=this.kd.slice();c=this.e;var v=b.kd,g=b.e;if(!f[0]||!v[0])return v[0]?(b.Ed=
-d,b):new a(f[0]?this:0);if(l=c-g){(e=0>l)?(l=-l,c=f):(g=c,c=v);c.reverse();for(d=l;d--;c.push(0));c.reverse()}else{c=((e=f.length<v.length)?f:v).length;for(l=d=0;d<c;d++)if(f[d]!=v[d]){e=f[d]<v[d];break}}e&&(c=f,f=v,v=c,b.Ed=-b.Ed);if(0<(d=(c=v.length)-(e=f.length)))for(;d--;f[e++]=0);for(d=e;c>l;){if(f[--c]<v[c]){for(e=c;e&&!f[--e];f[e]=9);--f[e];f[c]+=10}f[c]-=v[c]}for(;0==f[--d];f.pop());for(;0==f[0];)f.shift(),--g;f[0]||(b.Ed=1,f=[g=0]);b.kd=f;b.e=g;return b};a.prototype.NE=function(b){var e,
c=this.Ed;e=(b=new a(b)).Ed;if(c!=e)return b.Ed=-e,this.mr(b);e=this.e;var l=this.kd,d=b.e,f=b.kd;if(!l[0]||!f[0])return f[0]?b:new a(l[0]?this:0*c);l=l.slice();if(c=e-d){0<c?(d=e,e=f):(c=-c,e=l);for(e.reverse();c--;e.push(0));e.reverse()}0>l.length-f.length&&(e=f,f=l,l=e);c=f.length;for(e=0;c;)e=(l[--c]=l[c]+f[c]+e)/10|0,l[c]%=10;e&&(l.unshift(e),++d);for(c=l.length;0==l[--c];l.pop());b.kd=l;b.e=d;return b};a.prototype.pow=function(b){var e=this,l=new a(1),d=l,f=0>b;(b!==~~b||-1E6>b||1E6<b)&&c("!pow!");
for(b=f?-b:b;;){b&1&&(d=d.Up(e));b>>=1;if(!b)break;e=e.Up(e)}return f?l.VB(d):d};a.prototype.round=function(e,l){var d=this;null==e?e=0:(e!==~~e||0>e||1E6<e)&&c("!round!");b(d=new a(d),e,null==l?a.ye:l);return d};a.prototype.sqrt=function(){var e,l,d;l=this.kd;e=this.Ed;d=this.e;var f=new a("0.5");if(!l[0])return new a(this);0>e&&c(NaN);e=Math.sqrt(this.toString());0==e||e==1/0?(e=l.join(""),e.length+d&1||(e+="0"),l=new a(Math.sqrt(e).toString()),l.e=((d+1)/2|0)-(0>d||d&1)):l=new a(e.toString());
e=l.e+(a.Dc+=4);do d=l,l=f.Up(d.NE(this.VB(d)));while(d.kd.slice(0,e).join("")!==l.kd.slice(0,e).join(""));b(l,a.Dc-=4,a.ye);return l};a.prototype.Up=function(b){var e,c=this.kd,l=(b=new a(b)).kd,d=c.length,f=l.length,v=this.e,g=b.e;b.Ed=this.Ed==b.Ed?1:-1;if(!c[0]||!l[0])return new a(0*b.Ed);b.e=v+g;d<f&&(e=c,c=l,l=e,g=d,d=f,f=g);for(e=Array(g=d+f);g--;e[g]=0);for(v=f;v--;){f=0;for(g=d+v;g>v;)f=e[g]+l[v]*c[g-v-1]+f,e[g--]=f%10,f=f/10|0;e[g]=(e[g]+f)%10}f&&++b.e;e[0]||e.shift();for(v=e.length;!e[--v];e.pop());
b.kd=e;return b};a.prototype.toString=function(){var a=this.e,b=this.kd.join(""),e=b.length;if(-7>=a||21<=a)b=b.charAt(0)+(1<e?"."+b.slice(1):"")+(0>a?"e":"e+")+a;else if(0>a){for(;++a;b="0"+b);b="0."+b}else if(0<a)if(++a>e)for(a-=e;a--;b+="0");else a<e&&(b=b.slice(0,a)+"."+b.slice(a));else 1<e&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.Ed&&this.kd[0]?"-"+b:b};a.Dc=20;a.ye=1;return a}();a.Tn=e})(A||(A={}));(function(a){var b=function(){function b(a){this.af=a}b.prototype.Xp=function(b,h,n){var c=
new a.b,l=new a.b,d=this.af;n.yd(b,h,function(a,b){d.fc(2*a,c);d.fc(2*b,l);return c.compare(l)})};b.prototype.Ko=function(a){return this.af.read(2*a+1)};return b}(),c=function(){function c(){}c.Lo=function(b){if(b.u())return!1;var h=b.F();return h==a.j.Polygon?0==b.Mh()?!1:!0:h==a.j.Polyline?(h=[!1],c.pz(b,!0,h),h[0]):h==a.j.Envelope||a.U.Mc(h)&&!b.kD()?!0:!1};c.il=function(b){var h=b.F();if(h==a.j.Polygon)return h=new a.Ya(b.description),b.u()||b.tA(h),h;if(h==a.j.Polyline)return c.pz(b,!1,null);
if(h==a.j.Envelope)return h=new a.Ya(b.description),b.u()||h.Xc(b,!1),h;if(a.U.Mc(h)){h=new a.pe(b.description);if(!b.u()&&!b.kD()){var n=new a.Wa;b.Fn(n);h.add(n);b.Cn(n);h.add(n)}return h}if(a.U.Lm(h))return null;throw a.g.O();};c.pz=function(e,h,n){null!=n&&(n[0]=!1);var c=null;h||(c=new a.pe(e.description));if(!e.u()){var l=new a.ha(0);l.yb(2*e.fa());for(var d=0,f=e.fa();d<f;d++)if(0<e.Ia(d)&&!e.Mo(d)){var g=e.Fa(d);l.add(g);g=e.Ec(d)-1;l.add(g)}if(0<l.size){f=new a.Qr;d=e.oc(0);f.sort(l,0,l.size,
new b(d));f=new a.b;d.fc(2*l.get(0),f);for(var g=0,k=1,m=new a.Wa,q=new a.b,r=1,s=l.size;r<s;r++)if(d.fc(2*l.get(r),q),q.vb(f))l.get(g)>l.get(r)?(l.set(g,2147483647),g=r):l.set(r,2147483647),k++;else{if(0==(k&1))l.set(g,2147483647);else if(h)return null!=n&&(n[0]=!0),null;f.K(q);g=r;k=1}if(0==(k&1))l.set(g,2147483647);else if(h)return null!=n&&(n[0]=!0),null;if(!h){l.yd(0,l.size,function(a,b){return a-b});r=0;for(s=l.size;r<s&&2147483647!=l.get(r);r++)e.Td(l.get(r),m),c.add(m)}}}return h?null:c};
return c}();a.Hh=c})(A||(A={}));(function(a){var b=function(){function b(){this.mf=new a.ha(0);this.Kq=new a.ha(0);this.gE=1;this.Pq=NaN}b.prototype.sort=function(a,b,h,n){if(32>h-b)n.Xp(b,h,a);else{var c=!0;try{for(var d=Infinity,f=-Infinity,v=b;v<h;v++){var g=n.Ko(a.get(v));g<d&&(d=g);g>f&&(f=g)}if(this.reset(h-b,d,f,h-b)){for(v=b;v<h;v++){var k=a.get(v),g=n.Ko(k),m=this.oC(g);this.mf.set(m,this.mf.get(m)+1);this.Kq.write(v-b,k)}var q=this.mf.get(0);this.mf.set(0,0);for(var v=1,r=this.mf.size;v<
r;v++){var s=this.mf.get(v);this.mf.set(v,q);q+=s}for(v=b;v<h;v++){var k=this.Kq.read(v-b),g=n.Ko(k),m=this.oC(g),t=this.mf.get(m);a.set(t+b,k);this.mf.set(m,t+1)}c=!1}}catch(C){this.mf.resize(0),this.Kq.resize(0)}if(c)n.Xp(b,h,a);else{v=h=0;for(r=this.mf.size;v<r;v++)c=h,h=this.mf.get(v),h>c&&n.Xp(b+c,b+h,a);100<this.mf.size&&(this.mf.resize(0),this.Kq.resize(0))}}};b.prototype.reset=function(a,e,h,n){if(2>a||h==e)return!1;a=Math.min(b.sI,a);this.mf.yb(a);this.mf.resize(a);this.mf.dh(0,0,this.mf.size);
this.gE=e;this.Kq.resize(n);this.Pq=(h-e)/(a-1);return!0};b.prototype.oC=function(b){return a.J.truncate((b-this.gE)/this.Pq)};b.sI=65536;return b}();a.Qr=b})(A||(A={}));(function(a){var b;(function(a){a[a.enum_line=1]="enum_line";a[a.enum_arc=2]="enum_arc";a[a.enum_dummy=4]="enum_dummy";a[a.enum_concave_dip=8]="enum_concave_dip";a[a.enum_connection=3]="enum_connection"})(b||(b={}));var c=function(){function b(){}b.Js=function(e,h,n,c,l,d){var f=new b;f.Fl=new a.b;f.Ql=new a.b;f.Kt=new a.b;f.Fl.K(e);
f.Ql.K(h);f.Kt.K(n);f.rn=c;f.Rg=l;f.Ug=d;return f};b.Pa=function(e,h,n,c){var l=new b;l.Fl=new a.b;l.Ql=new a.b;l.Kt=new a.b;l.Fl.K(e);l.Ql.K(h);l.Kt.Eh();l.rn=4;l.Rg=n;l.Ug=c;return l};return b}(),l=function(){function b(a,e,h,n,c,l){this.Ht=null;this.va=0;this.Dx=a;this.yE=this.wE=0;this.Ea=e;this.Pi=h;this.Dj=n;this.kp=c;this.Zb=l}b.prototype.next=function(){for(var b=new a.Wa;;){if(this.va==this.Dx.G())return null;this.Dx.Td(this.va,b);this.va++;if(!b.u())break}var e=!1;null==this.Ht&&(this.wE=
b.lk(),this.yE=b.mk(),this.Ht=n.buffer(b,this.Ea,this.Pi,this.Dj,this.kp,this.Zb),e=!0);var h;this.va<this.Dx.G()?(h=new a.La,this.Ht.copyTo(h)):h=this.Ht;if(!e){var e=new a.Bg,c=b.lk()-this.wE,b=b.mk()-this.yE;e.On(c,b);h.Pe(e)}return h};b.prototype.za=function(){return 0};return b}(),e=function(){function b(a,e){this.Na=a;this.va=0;this.Wo=e}b.prototype.next=function(){var b=this.Na.V;if(this.va<b.fa()){var e=this.va;this.va++;if(!b.Mo(e))for(var h=b.Ga(b.Ec(e)-1);this.va<b.fa();){var n=b.Ga(b.Fa(this.va));
if(b.Mo(this.va))break;if(n!=h)break;h=b.Ga(b.Ec(this.va)-1);this.va++}if(1==this.va-e)return this.Na.kB(this.Na.V,e,this.Wo);h=new a.Ya(this.Na.V.description);h.$j(this.Na.V,e,!0);for(e+=1;e<this.va;e++)h.xs(this.Na.V,e,0,b.bt(e),!1);return this.Na.kB(h,0,this.Wo)}return null};b.prototype.za=function(){return 0};return b}(),h=function(){function a(b){this.Na=b;this.va=0}a.prototype.next=function(){var a=this.Na.V;if(this.va<a.fa()){var b=this.va;a.no(this.va);for(this.va++;this.va<a.fa()&&!(0<a.no(this.va));)this.va++;
return 0==b&&this.va==a.fa()?this.Na.Fv(a,0,a.fa()):this.Na.Fv(a,b,this.va)}return null};a.prototype.za=function(){return 0};return a}(),n=function(){function n(a){this.Uq=this.St=this.Vq=this.td=null;this.Kd=[];this.Zb=a;this.ib=this.vt=this.NP=this.Ea=this.ux=this.ir=this.la=0;this.rx=this.Dj=-1;this.Wo=!0}n.buffer=function(b,e,h,c,l,d){if(null==b)throw a.g.O();if(0>c)throw a.g.O();if(b.u())return new a.La(b.description);var f=new a.i;b.ed(f);0<e&&f.R(e,e);d=new n(d);d.Pi=h;d.V=b;d.la=a.Ja.Ad(h,
f,!0);d.ir=a.Ja.Ad(null,f,!0);d.Ea=e;d.NP=b.F();0>=l&&(l=96);d.ib=Math.abs(d.Ea);d.vt=0!=d.ib?1/d.ib:0;isNaN(c)||0==c?c=1E-5*d.ib:c>0.5*d.ib&&(c=0.5*d.ib);12>l&&(l=12);b=Math.abs(e)*(1-Math.cos(Math.PI/l));b>c?c=b:(b=Math.PI/Math.acos(1-c/Math.abs(e)),b<l-1&&(l=a.J.truncate(b),12>l&&(l=12,c=Math.abs(e)*(1-Math.cos(Math.PI/l)))));d.Dj=c;d.kp=l;d.ux=Math.min(d.ir,0.25*c);return d.lB()};n.prototype.Rs=function(){if(null==this.td)this.td=[];else if(0!==this.td.length)return;var b=this.pB(),b=a.J.truncate((b+
3)/4),e=0.5*Math.PI/b;this.rx=e;for(var h=0;h<4*b;h++)this.td.push(null);for(var n=Math.cos(e),e=Math.sin(e),c=a.b.Pa(0,1),h=0;h<b;h++)this.td[h+0*b]=a.b.Pa(c.y,-c.x),this.td[h+1*b]=a.b.Pa(-c.x,-c.y),this.td[h+2*b]=a.b.Pa(-c.y,c.x),this.td[h+3*b]=c,c=a.b.Pa(c.x,c.y),c.Dr(n,e)};n.prototype.lB=function(){var b=this.V.F();if(a.U.Mc(b))return b=new a.Ya(this.V.description),b.Cc(this.V,!0),this.V=b,this.lB();if(this.Ea<=this.la)if(a.U.RO(b)){if(0>=this.Ea&&(b=new a.i,this.V.s(b),b.ba()<=2*-this.Ea||b.ca()<=
2*this.Ea))return new a.La(this.V.description)}else return new a.La(this.V.description);switch(this.V.F()){case a.j.Point:return this.sK();case a.j.MultiPoint:return this.rK();case a.j.Polyline:return this.uK();case a.j.Polygon:return this.tK();case a.j.Envelope:return this.pK();default:throw a.g.xa();}};n.prototype.uK=function(){if(this.oD(this.V)){var b=new a.Wa;this.V.Td(0,b);var h=new a.i;this.V.s(h);b.jc(h.Af());return this.Ds(b)}this.V=this.RQ(this.V);b=new e(this,this.Wo);return a.wi.local().aa(b,
this.Pi,this.Zb).next()};n.prototype.tK=function(){if(0==this.Ea)return this.V;var b=a.$r.local();this.Rs();this.V=b.aa(this.V,null,!1,this.Zb);if(0>this.Ea){var e=this.V,e=this.Fv(e,0,e.fa());return b.aa(e,this.Pi,!1,this.Zb)}if(this.oD(this.V))return b=new a.Wa,this.V.Td(0,b),e=new a.i,this.V.s(e),b.jc(e.Af()),this.Ds(b);b=new h(this);return a.wi.local().aa(b,this.Pi,this.Zb).next()};n.prototype.Fv=function(b,e,h){for(var c=new a.La(b.description);e<h;e++)if(!(1>b.Ia(e))){var l=b.no(e),d=new a.i;
b.Ti(e,d);if(0<this.Ea)if(0<l)if(this.pD(b,e))l=new a.Wa,b.Td(b.Fa(e),l),l.jc(d.Af()),this.ts(c,l);else{var f=l=new a.Ya(b.description),f=a.Sr.sD(this.V,e)||2==this.tm(this.V,e,f,!0,1)?this.jB(b,e):this.sm(l);c.add(f,!1)}else{if(!(d.ba()+this.la<=2*this.ib||d.ca()+this.la<=2*this.ib||(f=l=new a.Ya(b.description),this.tm(this.V,e,f,!0,1),l.u()))){var g=new a.i;g.L(d);g.R(this.ib,this.ib);f.vs(g);f=this.sm(l);d=1;for(l=f.fa();d<l;d++)c.$j(f,d,!0)}}else if(0<l){if(!(d.ba()+this.la<=2*this.ib||d.ca()+
this.la<=2*this.ib||(f=l=new a.Ya(b.description),this.tm(this.V,e,f,!0,-1),l.u()))){g=new a.i;f.ed(g);g.R(this.ib,this.ib);f.vs(g);f=this.sm(l);d=1;for(l=f.fa();d<l;d++)c.$j(f,d,!0)}}else{f=l=new a.Ya(b.description);this.tm(this.V,e,f,!0,-1);f=this.sm(l);d=0;for(l=f.fa();d<l;d++)c.$j(f,d,!0)}}if(0<this.Ea)return 1<c.fa()?this.sm(c):n.Jd(c);b=new a.i;c.ed(b);if(c.u())return n.Jd(c);b.R(this.ib,this.ib);c.vs(b);c=this.sm(c);b=new a.La(c.description);d=1;for(l=c.fa();d<l;d++)b.$j(c,d,!1);return n.Jd(b)};
n.prototype.sK=function(){return this.Ds(this.V)};n.prototype.Ds=function(b){var e=new a.La(this.V.description);this.ts(e,b);return this.mS(e)};n.prototype.rK=function(){var b=new l(this.V,this.Ea,this.Pi,this.Dj,this.kp,this.Zb);return a.wi.local().aa(b,this.Pi,this.Zb).next()};n.prototype.pK=function(){var b=new a.La(this.V.description);if(0>=this.Ea){if(0==this.Ea)b.Xc(this.V,!1);else{var e=new a.Wj;this.V.Dp(e);e.R(this.Ea,this.Ea);b.Xc(e,!1)}return b}b.Xc(this.V,!1);this.V=b;return this.jB(b,
0)};n.prototype.jB=function(b,e){this.Rs();for(var h=new a.La(b.description),c=new a.b,l=new a.b,d=new a.b,f=new a.b,g=new a.b,k=new a.b,m=new a.b,q=new a.b,r=b.Ia(e),s=b.Fa(e),t=0,C=b.Ia(e);t<C;t++){b.A(s+t,l);b.A(s+(t+1)%r,f);b.A(s+(t+2)%r,k);m.qc(f,l);if(0==m.length())throw a.g.xa();m.st();m.normalize();m.scale(this.ib);c.add(m,l);d.add(m,f);0==t?h.Mr(c):h.Mm(c);h.Mm(d);q.qc(k,f);if(0==q.length())throw a.g.xa();q.st();q.normalize();q.scale(this.ib);g.add(q,f);this.NA(h,f,d,g,!1)}return n.Jd(h)};
n.prototype.kB=function(b,e,h){this.Rs();if(1>b.Ia(e))return null;if(this.pD(b,e)&&0<this.Ea){h=new a.Wa;b.Td(b.Fa(e),h);var n=new a.i;b.Ti(e,n);h.jc(n.Af());return this.Ds(h)}n=new a.Ya(b.description);if(b.Mo(e))this.tm(b,e,n,h,1),this.tm(b,e,n,h,-1);else{var c=new a.Ya(b.description);c.$j(b,e,!1);c.xs(b,e,0,b.bt(e),!1);this.tm(c,0,n,h,1)}return this.sm(n)};n.prototype.sm=function(b){return a.Of.Rj(b,this.ir,!0,!0,this.Zb)};n.prototype.pB=function(){if(0==this.Dj)return this.kp;var b=1-this.Dj*Math.abs(this.vt),
e;-1>b?e=4:e=2*Math.PI/Math.acos(b)+0.5;4>e?e=4:e>this.kp&&(e=this.kp);return a.J.truncate(e)};n.prototype.NA=function(b,e,h,n,c){this.Rs();var l=new a.b;l.qc(h,e);l.scale(this.vt);var d=new a.b;d.qc(n,e);d.scale(this.vt);l=Math.atan2(l.y,l.x)/this.rx;0>l&&(l=this.td.length+l);l=this.td.length-l;d=Math.atan2(d.y,d.x)/this.rx;0>d&&(d=this.td.length+d);d=this.td.length-d;d<l&&(d+=this.td.length);var f=a.J.truncate(d),d=a.J.truncate(Math.ceil(l)),l=new a.b;l.K(this.td[d%this.td.length]);l.Er(this.ib,
e);var z=10*this.la;l.sub(h);l.length()<z&&(d+=1);l.K(this.td[f%this.td.length]);l.Er(this.ib,e);l.sub(n);l.length()<z&&--f;h=f-d;h++;f=0;for(d%=this.td.length;f<h;f++,d=(d+1)%this.td.length)l.K(this.td[d]),l.Er(this.ib,e),b.Mm(l);c&&b.Mm(n)};n.prototype.tm=function(b,e,h,n,l){var d=new a.gd,f=d.PJ(b,e);d.wo(this.ux,!1,!1);if(2>d.G(f)){if(0>l)return 1;l=b;d=new a.Wa;l.Td(l.Fa(e),d);this.ts(h,d);return 1}var z=d.Ga(d.Db(d.Wb(f))),g=new a.Bg;g.On(-z.x,-z.y);d.Pe(g);if(n&&(this.LM(d,f,l),2>d.G(f))){if(0>
l)return 1;l=b;d=new a.Wa;l.Td(l.Fa(e),d);this.ts(h,d);return 1}this.Kd.length=0;var k=d.Wb(f);e=d.Db(k);var m=1==l?d.Va(e):d.Y(e);b=1==l?d.Y(e):d.Va(e);var q=!0;n=new a.b;for(var f=new a.b,r=new a.b,s=new a.b,t=new a.b,u=new a.b,w=new a.b,x=new a.b,y=new a.b,A=new a.b,B=this.ib,k=d.Ia(k),K=0;K<k;K++)d.A(b,f),q&&(d.A(e,n),d.A(m,r),x.qc(n,r),x.normalize(),A.zD(x),A.scale(B),s.add(A,n)),w.qc(f,n),w.normalize(),y.zD(w),y.scale(B),t.add(n,y),m=x.Ai(w),q=x.ml(w),0>m||0>q&&0==m?this.Kd.push(c.Js(s,t,n,
2,this.Kd.length+1,this.Kd.length-1)):s.vb(t)||(this.Kd.push(c.Pa(s,n,this.Kd.length+1,this.Kd.length-1,"dummy")),this.Kd.push(c.Pa(n,t,this.Kd.length+1,this.Kd.length-1,"dummy"))),u.add(f,y),this.Kd.push(c.Js(t,u,n,1,this.Kd.length+1,this.Kd.length-1)),s.K(u),A.K(y),r.K(n),n.K(f),x.K(w),m=e,e=b,q=!1,b=1==l?d.Y(e):d.Va(e);this.Kd[this.Kd.length-1].Rg=0;this.Kd[0].Ug=this.Kd.length-1;this.TQ(h);g.On(z.x,z.y);h.ZA(g,h.fa()-1);return 1};n.prototype.TQ=function(a){for(var b=this.$K(),e=!0,h=b+1,n=b;h!=
b;n=h){var c=this.Kd[n],h=-1!=c.Rg?c.Rg:(n+1)%this.Kd.length;0!=c.rn&&(e&&a.Mr(c.Fl),2==c.rn?this.NA(a,c.Kt,c.Fl,c.Ql,!0):a.Mm(c.Ql),e=!1)}};n.prototype.$K=function(){null==this.Uq&&(this.Uq=[null,null,null,null,null,null,null,null,null]);for(var e=0,h=0,n=this.Kd.length;h<n;){var c=this.Kd[h];if(0!=(c.rn&b.enum_connection)){e=h;break}h=c.Rg}n=e+1;for(h=e;n!=e;h=n){for(var c=this.Kd[h],n=c.Rg,l=1,d=null;n!=h;){d=this.Kd[n];if(0!=(d.rn&b.enum_connection))break;n=d.Rg;l++}1!=l&&1==(c.rn&d.rn)&&(null==
this.Vq&&(this.Vq=new a.zb,this.St=new a.zb),this.Vq.fd(c.Fl),this.Vq.wd(c.Ql),this.St.fd(d.Fl),this.St.wd(d.Ql),1==this.Vq.Ha(this.St,this.Uq,null,null,this.ir)&&(c.Ql.K(this.Uq[0]),d.Fl.K(this.Uq[0]),c.Rg=n,d.Ug=h))}return e};n.prototype.qt=function(b,e,h){var n=new a.b;n.qc(h,b);h=n.length();h=this.ib*this.ib-0.25*h*h;if(0<h){h=Math.sqrt(h);n.normalize();n.Ip();var c=new a.b;c.qc(e,b);if(c.ml(n)+h>=this.ib)return!0}return!1};n.prototype.LM=function(b,e,h){for(var n=0;1>n;n++){var c=!1,l=b.Wb(e),
d=b.Ia(l);if(0==d)break;var f=d;if(3>d)break;!b.wc(l)&&(f=d-1);for(var l=b.Db(l),d=0<h?b.Va(l):b.Y(l),z=0<h?b.Y(l):b.Va(l),g=d,k=!0,m=new a.b,q=new a.b,r=new a.b,s=new a.b,t=new a.b,C=a.b.Pa(0,0),u=new a.b,w=new a.b,x=new a.b,y=new a.b,A=this.ib,B=0,K=0;K<f;){b.A(z,q);k&&(b.A(l,m),b.A(d,r),g=d);w.qc(m,r);w.normalize();u.qc(q,m);u.normalize();if(g==z)break;var D=w.Ai(u),E=w.ml(u),G=!0;0>D||0>E&&0==D||!this.qt(r,m,q)||(C.K(q),G=!1,++B,c=!0);if(G){if(0<B)for(;;){D=0<h?b.Va(g):b.Y(g);if(D==l)break;b.A(D,
s);if(this.qt(s,r,C))r.K(s),g=D,G=!1,++B;else{D!=z&&this.qt(s,r,q)&&this.qt(s,m,q)&&(r.K(s),g=D,G=!1,++B);break}}if(!G)continue;if(0<B){g=0<h?b.Va(d):b.Y(d);for(k=1;k<B;k++)G=0<h?b.Va(g):b.Y(g),b.vf(g,!0),g=G;x.qc(m,r);B=x.length();B=A*A-0.25*B*B;B=Math.sqrt(B);A-B>0.5*this.Dj?(t.add(r,m),t.scale(0.5),x.normalize(),x.Ip(),y.K(x),y.scale(A-B),t.add(y),b.Yi(d,t)):b.vf(d,!0);B=0}r.K(m);g=l}m.K(q);d=l;l=z;z=0<h?b.Y(l):b.Va(l);K++;k=!1}if(0<B){g=0<h?b.Va(d):b.Y(d);for(k=1;k<B;k++)G=0<h?b.Va(g):b.Y(g),
b.vf(g,!0),g=G;t.add(r,m);t.scale(0.5);x.qc(m,r);B=x.length();B=A*A-0.25*B*B;B=Math.sqrt(B);x.normalize();x.Ip();y.K(x);y.scale(A-B);t.add(y);b.Yi(d,t)}b.wo(this.ux,!1,!1);if(!c)break}};n.prototype.pD=function(b,e){if(1==b.Ia(e))return!0;var h=new a.i;b.Ti(e,h);return Math.max(h.ba(),h.ca())<0.5*this.Dj?!0:!1};n.prototype.oD=function(b){var e=new a.i;b.s(e);return Math.max(e.ba(),e.ca())<0.5*this.Dj?!0:!1};n.prototype.RQ=function(b){b=a.Sz.local().aa(b,0.25*this.Dj,!1,this.Zb);for(var e=0,h=0,n=b.fa();h<
n;h++)e=Math.max(b.Ia(h),e);if(32>e)return this.Wo=!1,b;this.Wo=!0;return a.Of.Rj(b,this.ir,!1,!0,this.Zb)};n.prototype.ts=function(b,e){var h=e.A();if(null!=this.td&&0!==this.td.length){var n=new a.b;n.K(this.td[0]);n.Er(this.ib,h);b.Mr(n);for(var c=1,l=this.td.length;c<l;c++)n.K(this.td[c]),n.Er(this.ib,h),b.Mm(n)}else for(var c=this.pB(),n=a.J.truncate((c+3)/4),c=0.5*Math.PI/n,l=Math.cos(c),d=Math.sin(c),f=new a.b,z=3;0<=z;z--)switch(f.na(0,this.ib),z){case 0:for(c=0;c<n;c++)b.xj(f.x+h.x,f.y+h.y),
f.Dr(l,d);break;case 1:for(c=0;c<n;c++)b.xj(-f.y+h.x,f.x+h.y),f.Dr(l,d);break;case 2:for(c=0;c<n;c++)b.xj(-f.x+h.x,-f.y+h.y),f.Dr(l,d);break;default:b.Ty(f.y+h.x,-f.x+h.y);for(c=1;c<n;c++)f.Dr(l,d),b.xj(f.y+h.x,-f.x+h.y)}};n.Jd=function(a){a.hg(1,0);return a};n.prototype.mS=function(a){a.hg(2,this.la);a.hl();return a};return n}();a.UG=n})(A||(A={}));(function(a){var b=function(){function b(c){this.Rb=c;this.a=new a.gd;this.vg=new a.ha(0)}b.prototype.oo=function(a,b,h){switch(b){case 0:if(a.w<h&&a.C<=
h)break;else return a.w>=h?1:-1;case 1:if(a.D<h&&a.H<=h)break;else return a.D>=h?1:-1;case 2:if(a.w>=h&&a.C>h)break;else return a.C<=h?1:-1;case 3:if(!(a.D>=h&&a.H>h))return a.H<=h?1:-1}return 0};b.prototype.bL=function(b,e){return b.F()==a.j.Polygon?this.cL(b,e):this.dL(b)};b.prototype.cL=function(b,e){if(0==this.Rb.ba()||0==this.Rb.ca())return b.Qa();var h=new a.i;b.ed(h);this.V=this.a.Fb(b);var n=new a.i,c=new a.i,d=new a.b,f=new a.b,g=[0,0,0,0,0,0,0,0,0],k=[0,0,0,0,0,0,0,0,0];new a.Ag;var m=new a.zb,
q=new a.ha(0);q.yb(Math.min(100,b.G()));for(var r=!1,s=0;!r&&4>s;s++){var t=!1,C=0!=(s&1),u=0;switch(s){case 0:u=this.Rb.w;t=h.w<=u&&h.C>=u;break;case 1:u=this.Rb.D;t=h.D<=u&&h.H>=u;break;case 2:u=this.Rb.C;t=h.w<=u&&h.C>=u;break;case 3:u=this.Rb.H,t=h.D<=u&&h.H>=u}if(t){r=!0;for(t=this.a.Wb(this.V);-1!=t;){var w=-1,x=-1,y=this.a.Db(t),A=y;do{var B=this.a.dc(A);null==B&&(B=m,this.a.A(A,d),B.fd(d),this.a.A(this.a.Y(A),f),B.wd(f));B.s(n);var K=this.oo(n,s,u),D=0,E=-1;if(-1==K){B=B.mt(C,u,g,k);0<B?D=
this.a.Lr(A,k,B):D=0;for(var D=D+1,G=A,H=this.a.Y(G),B=0;B<D;B++){this.a.A(G,d);this.a.A(H,f);E=this.a.dc(G);null==E&&(E=m,E.fd(d),E.wd(f));E.s(c);E=this.oo(c,s,u);if(-1==E){if(C)E=Math.abs(d.y-u),I=Math.abs(f.y-u),E<I?(d.y=u,this.a.Yi(G,d)):(f.y=u,this.a.Yi(H,f));else{var E=Math.abs(d.x-u),I=Math.abs(f.x-u);E<I?(d.x=u,this.a.Yi(G,d)):(f.x=u,this.a.Yi(H,f))}E=this.a.dc(G);null==E&&(E=m,E.fd(d),E.wd(f));E.s(c);E=this.oo(c,s,u)}I=w;w=E;-1==x&&(x=w);if(0!=I||1!=w)1==I&&0==w||0!=I||0!=w||q.add(G);1==
w&&(r=!1);E=G=H;H=this.a.Y(H)}}if(0==D){I=w;w=K;-1==x&&(x=w);if(0!=I||1!=w)1==I&&0==w||0!=I||0!=w||q.add(A);1==w&&(r=!1);E=this.a.Y(A)}A=E}while(A!=y);0==x&&0==w&&q.add(y);B=0;for(w=q.size;B<w;B++)x=q.get(B),this.a.vf(x,!1);q.clear(!1);t=3>this.a.Ia(t)?this.a.Br(t):this.a.cc(t)}}}if(r)return b.Qa();this.zR();0<e&&this.fM(e);return this.a.jf(this.V)};b.prototype.dL=function(b){var e=new a.i,h=new a.i,n=[0,0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0],d=new a.Ag,f=b,g=new a.i;b.ed(g);for(var k=0;4>k;k++){var m=
!1,q=0!=(k&1),r=0;switch(k){case 0:r=this.Rb.w;m=g.w<=r&&g.C>=r;break;case 1:r=this.Rb.D;m=g.D<=r&&g.H>=r;break;case 2:r=this.Rb.C;m=g.w<=r&&g.C>=r;break;case 3:r=this.Rb.H,m=g.D<=r&&g.H>=r}if(m){m=f;f=b.Qa();m=m.Da();m.Lk();for(var s,t=new a.b;m.lb();)for(var C=-1,u=!0;m.Ma();){var w=m.ja();w.s(e);var x=this.oo(e,k,r);if(-1==x){if(x=w.mt(q,r,n,c),0<x){var A=0;s=w.Nb();for(var y=0;y<=x;y++)if(C=y<x?c[y]:1,A!=C){w.Bi(A,C,d);var B=d.get();B.fd(s);y<x&&(q?(t.x=n[y],t.y=r):(t.x=r,t.y=n[y]),B.wd(t));B.s(h);
var K=this.oo(h,k,r);if(-1==K){s=B.Nb();A=B.pc();if(q)K=Math.abs(s.y-r),D=Math.abs(A.y-r),K<D?(s.y=r,B.fd(s)):(A.y=r,B.wd(A));else{var K=Math.abs(s.x-r),D=Math.abs(A.x-r);K<D?(s.x=r,B.fd(s)):(A.x=r,B.wd(A))}B.s(h);K=this.oo(h,k,r)}s=B.pc();A=C;C=K;1==C?(f.Cc(B,u),u=!1):u=!0}}}else C=x,1==C?(f.Cc(w,u),u=!1):u=!0}}}return f};b.prototype.zR=function(){this.wn=-1;this.Mu(!1,this.Rb.w);this.Mu(!1,this.Rb.C);this.Mu(!0,this.Rb.D);this.Mu(!0,this.Rb.H);this.vg.resize(0);this.vg.yb(100);this.wn=this.a.re();
for(var b=new a.b,e=this.a.Wb(this.V);-1!=e;e=this.a.cc(e))for(var h=this.a.Db(e),n=0,c=this.a.Ia(e);n<c;n++,h=this.a.Y(h))if(this.a.A(h,b),this.Rb.w==b.x||this.Rb.C==b.x||this.Rb.D==b.y||this.Rb.H==b.y)this.a.mb(h,this.wn,this.vg.size),this.vg.add(h);this.yu(!1,this.Rb.w);this.yu(!1,this.Rb.C);this.yu(!0,this.Rb.D);this.yu(!0,this.Rb.H);this.VM()};b.prototype.fM=function(b){for(var e=new a.b,h=new a.b,n=a.J.Lh(2048,0),c=this.a.Wb(this.V);-1!=c;c=this.a.cc(c)){var d=this.a.Db(c),f=d;do{var g=this.a.Y(f);
this.a.A(f,e);var k=-1;e.x==this.Rb.w?(this.a.A(g,h),h.x==this.Rb.w&&(k=1)):e.x==this.Rb.C&&(this.a.A(g,h),h.x==this.Rb.C&&(k=1));e.y==this.Rb.D?(this.a.A(g,h),h.y==this.Rb.D&&(k=0)):e.y==this.Rb.H&&(this.a.A(g,h),h.y==this.Rb.H&&(k=0));if(-1!=k&&(k=a.b.Gb(e,h),k=a.J.truncate(Math.min(Math.ceil(k/b),2048)),!(1>=k))){for(var m=1;m<k;m++)n[m-1]=1*m/k;this.a.Lr(f,n,k-1)}f=g}while(f!=d)}};b.prototype.Mu=function(b,e){var h=this.a.re(),n=new a.b,c=new a.ha(0);c.yb(100);for(var d=this.a.Wb(this.V);-1!=
d;d=this.a.cc(d))for(var f=this.a.Db(d),g=0,k=this.a.Ia(d);g<k;g++){var m=this.a.Y(f);this.a.A(f,n);if(b?n.y==e:n.x==e)if(this.a.A(m,n),b?n.y==e:n.x==e)1!=this.a.Sa(f,h)&&(c.add(f),this.a.mb(f,h,1)),1!=this.a.Sa(m,h)&&(c.add(m),this.a.mb(m,h,1));f=m}this.a.cf(h);if(!(3>c.size)){var q=this;c.yd(0,c.size,function(a,b){return q.kj(a,b)});h=new a.b;d=new a.b;f=new a.b;d.Eh();for(var r=-1,g=new a.ha(0),k=new a.ha(0),m=this.a.re(),s=this.a.re(),t=0,C=c.size;t<C;t++){var u=c.get(t);this.a.A(u,n);if(!n.vb(d)){if(-1!=
r){for(var w=r;w<t;w++){var r=c.get(w),x=this.a.Y(r),u=this.a.Va(r),A=!1;0>this.kj(r,x)&&(this.a.A(x,h),b?h.y==e:h.x==e)&&(g.add(r),A=!0,this.a.mb(r,s,1));0>this.kj(r,u)&&(this.a.A(u,h),b?h.y==e:h.x==e)&&(A||g.add(r),this.a.mb(r,m,1))}w=0;for(A=g.size;w<A;w++){r=g.get(w);u=this.a.Sa(r,m);x=this.a.Sa(r,s);if(1==u){u=this.a.Va(r);this.a.A(u,f);var y=[0];y[0]=0;if(!f.vb(n)){var B=a.b.Gb(d,f);y[0]=a.b.Gb(f,n)/B;0==y[0]?y[0]=2.220446049250313E-16:1==y[0]&&(y[0]=0.9999999999999998);this.a.Lr(u,y,1);u=this.a.Va(r);
this.a.Yi(u,n);k.add(u);this.a.mb(u,m,1);this.a.mb(u,s,-1)}}1==x&&(x=this.a.Y(r),this.a.A(x,f),y=[0],y[0]=0,f.vb(n)||(B=a.b.Gb(d,f),y[0]=a.b.Gb(d,n)/B,0==y[0]?y[0]=2.220446049250313E-16:1==y[0]&&(y[0]=0.9999999999999998),this.a.Lr(r,y,1),u=this.a.Y(r),this.a.Yi(u,n),k.add(u),this.a.mb(u,m,-1),this.a.mb(u,s,1)))}r=g;g=k;k=r;k.clear(!1)}r=t;d.K(n)}}this.a.cf(m);this.a.cf(s)}};b.prototype.yu=function(b,e){var h=new a.b,n=new a.ha(0);n.yb(100);for(var c=this.a.re(),d=0,f=this.vg.size;d<f;d++){var g=this.vg.get(d);
if(-1!=g){var k=this.a.Y(g);this.a.A(g,h);if(b?h.y==e:h.x==e)if(this.a.A(k,h),b?h.y==e:h.x==e)-2!=this.a.Sa(g,c)&&(n.add(g),this.a.mb(g,c,-2)),-2!=this.a.Sa(k,c)&&(n.add(k),this.a.mb(k,c,-2))}}if(0!=n.size){var m=this;n.yd(0,n.size,function(a,b){return m.kj(a,b)});d=0;for(f=n.size;d<f;d++){var q=n.get(d);this.a.mb(q,c,d)}g=new a.b;k=new a.b;k.Eh();for(var r=-1,d=0,f=n.size;d<f;d++)if(q=n.get(d),-1!=q&&(this.a.A(q,h),!h.vb(k))){if(-1!=r)for(;;){for(var q=!1,s=1<d-r?d-1:d,t=r;t<s;t++){var C=n.get(t);
if(-1!=C){var u=-1,w=this.a.Y(C);0>this.kj(C,w)&&(this.a.A(w,g),b?g.y==e:g.x==e)&&(u=w);var w=-1,x=this.a.Va(C);0>this.kj(C,x)&&(this.a.A(x,g),b?g.y==e:g.x==e)&&(w=x);if(-1!=u&&-1!=w)this.mo(C,n,c),this.a.vf(C,!1),this.mo(u,n,c),this.a.vf(u,!1),q=!0;else if(-1!=u||-1!=w){for(x=t+1;x<d;x++){var y=n.get(x);if(-1!=y){var A=this.a.Y(y),B=-1;0>this.kj(y,A)&&(this.a.A(A,g),b?g.y==e:g.x==e)&&(B=A);var A=this.a.Va(y),K=-1;0>this.kj(y,A)&&(this.a.A(A,g),b?g.y==e:g.x==e)&&(K=A);if(-1!=B&&-1!=K){this.mo(y,n,
c);this.a.vf(y,!1);this.mo(B,n,c);this.a.vf(B,!1);q=!0;break}if(-1!=u&&-1!=K){this.dF(n,C,u,y,K,c);q=!0;break}else if(-1!=w&&-1!=B){this.dF(n,y,B,C,w,c);q=!0;break}}}if(q)break}}}if(!q)break}r=d;k.K(h)}}this.a.cf(c)};b.prototype.mo=function(a,b,h){h=this.a.Sa(a,h);b.set(h,-1);h=this.a.Sa(a,this.wn);this.vg.set(h,-1);b=this.a.sd(a);-1!=b&&this.a.Db(b)==a&&(this.a.Dh(b,-1),this.a.Wi(b,-1))};b.prototype.dF=function(a,b,h,n,c,d){this.a.Tc(b,n);this.a.Uc(n,b);this.a.Uc(h,c);this.a.Tc(c,h);this.mo(n,a,
d);this.a.Ui(n,!1);this.mo(c,a,d);this.a.Ui(c,!0)};b.prototype.VM=function(){for(var a=0,b=this.vg.size;a<b;a++){var h=this.vg.get(a);-1!=h&&this.a.im(h,-1)}for(var n=0,c=0,d=this.a.Wb(this.V);-1!=d;){var f=this.a.Db(d);if(-1==f||d!=this.a.sd(f)){var v=d,d=this.a.cc(d);this.a.Dh(v,-1);this.a.xu(v)}else{h=f;v=0;do this.a.im(h,d),v++,h=this.a.Y(h);while(h!=f);2>=v?(h=this.a.Sa(f,this.wn),this.vg.set(h,-1),f=this.a.vf(f,!1),2==v&&(h=this.a.Sa(f,this.wn),this.vg.set(h,-1),this.a.vf(f,!1)),v=d,d=this.a.cc(d),
this.a.Dh(v,-1),this.a.xu(v)):(this.a.Ir(d,!1),this.a.Wi(d,this.a.Va(f)),this.a.hm(d,v),c+=v,n++,d=this.a.cc(d))}}a=0;for(b=this.vg.size;a<b;a++)if(h=this.vg.get(a),-1!=h&&(d=this.a.sd(h),-1==d)){d=this.a.Cf(this.V,-1);v=0;f=h;do this.a.im(h,d),v++,h=this.a.Y(h);while(h!=f);2>=v?(h=this.a.Sa(f,this.wn),this.vg.set(h,-1),f=this.a.vf(f,!1),2==v&&(h=this.a.Sa(f,this.wn),0<=h&&this.vg.set(h,-1),this.a.vf(f,!1)),v=d,this.a.Dh(v,-1),this.a.xu(v)):(this.a.Hn(d,!0),this.a.hm(d,v),this.a.Dh(d,f),this.a.Wi(d,
this.a.Va(f)),this.a.Ir(d,!1),c+=v,n++)}this.a.gm(this.V,n);this.a.Pk(this.V,c);a=0;for(b=this.a.ad;-1!=b;b=this.a.we(b))a+=this.a.G(b);this.a.ZF(a)};b.Xk=function(a,e,h){return(new b(e)).bL(a,h)};b.clip=function(c,e,h,n){if(c.u())return c;if(e.u())return c.Qa();h=c.F();if(h==a.j.Point)return n=c.A(),e.contains(n)?c:c.Qa();if(h==a.j.Envelope)return n=new a.i,c.s(n),n.Ha(e)?(e=new a.Wj,c.copyTo(e),e.Bu(n),e):c.Qa();var d=new a.i;c.ed(d);if(e.contains(d))return c;if(!e.kc(d))return c.Qa();d=c.qb;if(null!=
d&&(d=d.hi,null!=d)){d=d.En(e);if(1==d){if(h!=a.j.Polygon)throw a.g.xa();c=new a.La(c.description);c.vs(e);return c}if(0==d)return c.Qa()}switch(h){case a.j.MultiPoint:h=null;for(var d=c.G(),f=c.oc(0),g=0,k=0;k<d;k++)n=new a.b,f.fc(2*k,n),e.contains(n)||(0==g&&(h=c.Qa()),g<k&&h.Qd(c,g,k),g=k+1);0<g&&h.Qd(c,g,d);return 0==g?c:h;case a.j.Polygon:case a.j.Polyline:return b.Xk(c,e,n);default:throw a.g.xa();}};b.prototype.kj=function(b,e){var h=new a.b;this.a.A(b,h);var n=new a.b;this.a.A(e,n);return h.compare(n)};
return b}();a.Fd=b})(A||(A={}));(function(a){var b=new a.b,c=function(){function b(e,n,c,l,d){this.Ml=new a.b;this.mn=new a.b;this.Ck=new a.b;this.a=e;this.Ox=c;this.cn=l;this.Ml=n;this.vk=d;this.mn.Eh();this.Ck.Eh()}b.prototype.sB=function(b){this.a.A(b,this.mn);b=a.J.truncate((this.mn.x-this.Ml.x)*this.cn+0.5);var e=a.J.truncate((this.mn.y-this.Ml.y)*this.cn+0.5);return l.XC(b,e)};b.prototype.uw=function(a){return this.a.Sa(a,this.vk)};return b}();a.vT=function(){return function(){}}();var l=function(){function e(){this.Ml=
new a.b;this.Xo=[0,0,0,0];this.Jq=[0,0,0,0];this.fn=this.vk=-1}e.yM=function(a,b){var c=new e;c.a=a;c.la=b;c.Ox=b*b;c.Jt=2*b;c.cn=1/c.Jt;return c.eL()};e.Uw=function(a,b,e,c,l){a-=e;b-=c;return a*a+b*b<=l};e.XC=function(b,e){return a.J.kg(e,a.J.kg(b))};e.prototype.gL=function(h,n){this.a.vc(h,b);for(var c=(b.y-this.Ml.y)*this.cn,l=a.J.truncate((b.x-this.Ml.x)*this.cn),d=a.J.truncate(c),f=c=0;1>=f;f+=1)for(var g=0;1>=g;g+=1){var k=e.XC(l+f,d+g),m=this.uk.CN(k);-1!=m&&(this.Xo[c]=m,this.Jq[c]=k,c++)}for(l=
c-1;1<=l;l--){m=this.Xo[l];for(d=l-1;0<=d;d--)if(m==this.Xo[d]){this.Jq[d]=-1;c--;l!=c&&(this.Jq[l]=this.Jq[c],this.Xo[l]=this.Xo[c]);break}}for(d=0;d<c;d++)this.hL(h,this.Jq[d],b,this.Xo[d],n)};e.prototype.hL=function(b,n,c,l,d){for(var f=new a.b;-1!=l;l=this.uk.RN(l)){var g=this.uk.ea(l);b==g||-1!=n&&this.a.Sa(g,this.vk)!=n||(this.a.vc(g,f),e.Uw(c.x,c.y,f.x,f.y,this.Ox)&&d.add(l))}};e.prototype.Tl=function(a,b,e){var c=this.a.Sa(a,this.fn),l=this.a.Sa(b,this.fn);-1==c&&(c=this.od.jh(),this.od.addElement(c,
a),this.a.mb(a,this.fn,c));-1==l?this.od.addElement(c,b):this.od.Pv(c,l);this.a.mb(b,this.fn,-2);b=this.$P(a,b);e&&(e=this.Rt.sB(a),this.a.mb(a,this.vk,e));return b};e.ZP=function(b,n,c){b.mc(n);c=b;var l=new a.b;e.GH(b.A(),n.A(),l);c.jc(l)};e.GH=function(a,b,e){var c=a.x;a.x!=b.x&&(c=(1*a.x+1*b.x)/2);var l=a.y;a.y!=b.y&&(l=(1*a.y+1*b.y)/2);e.na(c,l)};e.prototype.$P=function(b,e){var c=new a.b;this.a.A(b,c);var l=new a.b;this.a.A(e,l);var d=this.a.RC(b),f=this.a.RC(e),g=d+f,k=0,m=c.x;c.x!=l.x&&(m=
(c.x*d+l.x*f)/g,k++);var q=c.y;c.y!=l.y&&(q=(c.y*d+l.y*f)/g,k++);0<k&&this.a.jc(b,m,q);this.a.oS(b,g);return 0!=k};e.prototype.eL=function(){var b=this.a.qd,e=this.a.wC();this.Ml=e.xw();e=Math.max(e.ca(),e.ba())/2147483646;this.Jt<e&&(this.Jt=e,this.cn=1/this.Jt);this.od=new a.Tr;this.od.Cr(a.J.truncate(this.a.qd/3+1));this.od.$l(a.J.truncate(this.a.qd/3+1));this.vk=this.a.re();this.fn=this.a.re();this.Rt=new c(this.a,this.Ml,this.Ox,this.cn,this.vk);this.uk=new a.zH(a.J.truncate(4*b/3),this.Rt);
this.uk.vR(this.a.qd);b=!1;for(e=this.a.ad;-1!=e;e=this.a.we(e))for(var l=this.a.Wb(e);-1!=l;l=this.a.cc(l))for(var d=this.a.Db(l),f=0,g=this.a.Ia(l);f<g;f++){var k=this.Rt.sB(d);this.a.mb(d,this.vk,k);this.uk.addElement(d,k);d=this.a.Y(d)}var m=new a.ha(0);m.yb(10);for(e=this.a.ad;-1!=e;e=this.a.we(e))for(l=this.a.Wb(e);-1!=l;l=this.a.cc(l)){d=this.a.Db(l);f=0;for(g=this.a.Ia(l);f<g;f++){if(-2!=this.a.Sa(d,this.fn)){k=this.a.Sa(d,this.vk);for(this.uk.Kc(d,k);;){this.gL(d,m);if(0==m.size)break;for(var k=
!1,q=0,r=m.size;q<r;q++){var s=m.get(q),t=this.uk.ea(s);this.uk.ld(s);k=this.Tl(d,t,q+1==r)||k}b=b||k;m.clear(!1);if(!k)break}}d=this.a.Y(d)}}b&&this.YJ();this.Rt=this.uk=null;this.a.cf(this.vk);this.a.cf(this.fn);return b};e.prototype.YJ=function(){for(var b=new a.b,e=this.od.Xd;-1!=e;e=this.od.Bw(e)){var c=this.od.hc(e);this.a.A(this.od.ea(c),b);for(c=this.od.cb(c);-1!=c;c=this.od.cb(c))this.a.Yi(this.od.ea(c),b)}};return e}();a.Rr=l})(A||(A={}));(function(a){var b=Math.PI,c=2*Math.PI,l=Math.PI/
2,e=function(){function a(){}a.xL=function(b,e){var h=new a;h.x=b;h.y=e;h.type=0;h.mh=0;return h};a.vm=function(b){var e=new a;e.x=b.x;e.y=b.y;e.type=0;e.mh=0;return e};a.wL=function(b){var e=new a;e.x=b.x;e.y=b.y;e.type=b.type;e.mh=b.mh;return e};a.Bd=function(b,e,h){var c=new a;c.x=b.x+e*Math.cos(h);c.y=b.y+e*Math.sin(h);c.type=b.type;c.mh=b.mh;return c};a.Is=function(b,e){var h=new a;h.x=0.5*(b.x+e.x);h.y=0.5*(b.y+e.y);h.type=b.type;h.mh=b.mh;return h};a.LB=function(b,e){var h=new a;h.x=b.x+0.001*
(e.x-b.x);h.y=b.y+0.001*(e.y-b.y);h.type=b.type;h.mh=b.mh;return h};return a}(),h=function(){return function(){}}();(function(a){a[a.Round=0]="Round";a[a.Bevel=1]="Bevel";a[a.Miter=2]="Miter";a[a.Square=3]="Square"})(a.DH||(a.DH={}));var n=function(){function n(a){this.Jx=this.Jb=this.dg=null;this.Ee=a}n.aa=function(b,e,h,c,l,d){if(null==b)throw a.g.O();if(1>b.gb())throw a.g.O();if(0==e||b.u())return b;d=new n(d);d.an=b;d.Ea=e;d.la=l;d.bi=h;d.Cx=c;return d.gv()};n.prototype.gJ=function(){var b=this.an,
e=b.Nb(),h=b.pc(),c=new a.b;c.qc(h,e);c.normalize();c.st();c.scale(this.Ea);e.add(c);h.add(c);c=b.Qa();b.fd(e);b.wd(h);return c};n.prototype.fJ=function(){var b=this.an;if(0<this.Ea&&2!=this.bi){var e=new a.La;e.Xc(b,!1);this.an=e;return this.gv()}b=new a.Wj(b.S);b.R(this.Ea,this.Ea);return b};n.prototype.rF=function(a,b,e,h){return(b.x-a.x)*(h.x-e.x)+(b.y-a.y)*(h.y-e.y)};n.prototype.Vb=function(a,b){if(void 0===b)this.Jb.push(a),this.Ye++;else if(0==this.Ye)this.Vb(a);else{var h=this.du,c,n;c=this.dg[0==
b?h-1:b-1];n=this.dg[b];var d=this.rF(c,n,this.Jb[this.Ye-1],a);0<d?this.Vb(a):0>d&&(0<this.rF(c,n,n,this.Jb[this.Ye-1])?(n=this.dg[0==b?h-2:1==b?h-1:b-2],h=e.Bd(c,this.Ea,Math.atan2(c.y-n.y,c.x-n.x)-l),this.Jb[this.Ye-1]=h,1==this.bi||2==this.bi?(h=e.Is(h,c),this.Vb(h),h=e.Bd(c,this.Ea,this.ut+l),c=e.Is(h,c),c.type|=256,this.Vb(c)):(h=e.Bd(c,this.Ea,this.ut+l),h.type|=256),this.Vb(h),this.Vb(a,b)):(h=e.Bd(n,this.Ea,this.ut+l),this.Vb(h),1==this.bi||2==this.bi?(h=e.Is(h,n),this.Vb(h),h=e.Bd(n,this.Ea,
this.fx-l),c=e.Is(h,n),c.type|=256,this.Vb(c)):(h=e.Bd(n,this.Ea,this.fx-l),h.type|=256),this.Vb(h)))}};n.prototype.mB=function(){var h,n,d,f,z,g,k=this.du;this.Ye=0;var m=0.5*this.la,q=0,r=0;for(h=0;h<k;h++){f=this.dg[h];z=0==h?this.dg[k-1]:this.dg[h-1];g=h==k-1?this.dg[0]:this.dg[h+1];var s=z.x-f.x,t=z.y-f.y,u=g.x-f.x,w=g.y-f.y;n=Math.atan2(t,s);d=Math.atan2(w,u);this.ut=n;this.fx=d;0==h&&(q=n,r=d);s=s*w-u*t;t=d;d<n&&(d+=c);if(0<s*this.Ea)1==this.bi||2==this.bi?(n=e.Bd(f,this.Ea,n+l),this.Vb(n),
n=e.LB(f,n),this.Vb(n),n=e.Bd(f,this.Ea,d-l),f=e.LB(f,n),f.type|=256,this.Vb(f),this.Vb(n)):(s=0.5*(d-n),s=this.Ea/Math.abs(Math.sin(s)),n=e.Bd(f,s,0.5*(n+d)),this.Vb(n,h));else if(0!=(f.type&512)){s=1-m/Math.abs(this.Ea);z=1;g=0>this.Ea?-b:b;-1<s&&1>s&&(t=2*Math.acos(s),0.017453292519943295>t&&(t=0.017453292519943295),z=a.J.truncate(b/t+1.5),1<z&&(g/=z));t=n+l;n=e.Bd(f,this.Ea,t);0==h&&(n.type|=1024);this.Vb(n,h);s=this.Ea/Math.cos(g/2);t+=g/2;n=e.Bd(f,s,t);n.type|=1024;for(this.Vb(n);0<--z;)t+=
g,n=e.Bd(f,s,t),n.type|=1024,this.Vb(n);n=e.Bd(f,this.Ea,d-l);n.type|=1024;this.Vb(n)}else if(1==this.bi)n=e.Bd(f,this.Ea,n+l),this.Vb(n,h),n=e.Bd(f,this.Ea,d-l),this.Vb(n);else if(0==this.bi){s=1-m/Math.abs(this.Ea);z=1;g=d-l-(n+l);-1<s&&1>s&&(t=2*Math.acos(s),0.017453292519943295>t&&(t=0.017453292519943295),z=a.J.truncate(Math.abs(g)/t+1.5),1<z&&(g/=z));s=this.Ea/Math.cos(0.5*g);t=n+l+0.5*g;n=e.Bd(f,s,t);for(this.Vb(n,h);0<--z;)t+=g,n=e.Bd(f,s,t),this.Vb(n)}else 2==this.bi?(s=z.x-f.x,t=z.y-f.y,
u=g.x-f.x,w=g.y-f.y,z=Math.sqrt(s*s+t*t),g=Math.sqrt(u*u+w*w),z=(s*u+t*w)/z/g,0.99999999<z?(n=e.Bd(f,1.4142135623730951*this.Ea,d-0.25*b),this.Vb(n,h),n=e.Bd(f,1.4142135623730951*this.Ea,d+0.25*b),this.Vb(n)):(z=Math.abs(this.Ea/Math.sin(0.5*Math.acos(z))),g=Math.abs(this.Cx*this.Ea),z>g?(s=0.5*(d-n),s=this.Ea/Math.abs(Math.sin(s)),n=e.Bd(f,s,0.5*(n+d)),d=a.b.Pa(n.x,n.y),n=a.b.Pa(f.x,f.y),f=new a.b,f.qc(d,n),d=new a.b,d.CR(g/f.length(),f,n),n=Math.sqrt(z*z-this.Ea*this.Ea),n=(z-g)*Math.abs(this.Ea)/
n,0<this.Ea?f.st():f.Ip(),f.scale(n/f.length()),n=new a.b,n.add(d,f),z=new a.b,z.qc(d,f),n=e.vm(n),this.Vb(n,h),n=e.vm(z),this.Vb(n)):(s=0.5*(d-n),s=this.Ea/Math.abs(Math.sin(s)),n=e.Bd(f,s,0.5*(n+d)),this.Vb(n,h)))):(d=t,0<this.Ea?(d>n&&(d-=c),z=n-d<l):(d<n&&(d+=c),z=d-n<l),z?(s=1.4142135623730951*this.Ea,t=0>s?n+0.25*b:n+0.75*b,n=e.Bd(f,s,t),this.Vb(n,h),t=0>s?d-0.25*b:d-0.75*b,n=e.Bd(f,s,t),this.Vb(n)):(s=0.5*(d-n),s=this.Ea/Math.abs(Math.sin(s)),d<n&&(d+=c),n=e.Bd(f,s,(n+d)/2),this.Vb(n,h)))}this.ut=
q;this.fx=r;this.Vb(this.Jb[0],0);f=e.wL(this.Jb[this.Ye-1]);this.Jb[0]=f;return this.rR()};n.prototype.ws=function(b,e){if(!(2>e))for(var h=0;h<e;h++){var n=this.Jb[b+h];0!=h?this.Jx.Mm(a.b.Pa(n.x,n.y)):this.Jx.Mr(a.b.Pa(n.x,n.y))}};n.prototype.hJ=function(a,b,h){var n=a.Fa(b),c=a.Ec(b);this.Jb=[];this.Jx=h;if(a.wc(b)){for(b=a.Ga(n);a.Ga(c-1).vb(b);)c--;if(2<=c-n){this.du=c-n;this.dg=[];for(b=n;b<c;b++)this.dg.push(e.vm(a.Ga(b)));this.mB()&&this.ws(0,this.Ye-1)}}else{for(b=a.Ga(n);n<c&&a.Ga(n+1).vb(b);)n++;
for(b=a.Ga(c-1);n<c&&a.Ga(c-2).vb(b);)c--;if(2<=c-n){this.du=2*(c-n)-2;this.dg=[];h=e.vm(a.Ga(n));h.type|=1536;this.dg.push(h);for(b=n+1;b<c-1;b++)h=e.vm(a.Ga(b)),this.dg.push(h);h=e.vm(a.Ga(c-1));h.type|=512;this.dg.push(h);for(b=c-2;b>=n+1;b--)h=e.vm(a.Ga(b)),h.type|=1024,this.dg.push(h);if(this.mB())if(2<=this.Jb.length){a=-1;(c=0!=(this.Jb[this.Ye-1].type&1024))||(a=0);for(b=1;b<this.Ye;b++)(n=0!=(this.Jb[b].type&1024))?c||(c=b-1,1<c-a+1&&this.ws(a,c-a+1)):c&&(a=b-1),c=n;c||(c=this.Ye-1,1<c-a+
1&&this.ws(a,c-a+1))}else a=0,c=this.Ye-1,0<=a&&1<=c-a&&this.ws(a,c-a+1)}}this.dg=null;this.du=0;this.Jb=null;this.Ye=0};n.prototype.rR=function(){for(var a=!1,b=0;b<this.Ye;b++){var e=this.Jb[b];e.Rg=b+1;e.Ug=b-1;this.Jb[b]=e}e=this.Jb[0];e.Ug=this.Ye-2;this.Jb[0]=e;e=this.Jb[this.Ye-2];e.Rg=0;this.Jb[this.Ye-2]=e;for(b=e=0;b<this.Ye;b++)if(0!=(this.Jb[e].type&256)){var h=this.ZL(e);if(-1!=h)e=h;else{a=!0;break}}else e=this.Jb[e].Rg;if(a)return!1;this.uL(e);return!0};n.prototype.ZL=function(a){for(var b=
this.Ye-1,e=a,h,n,c=1;c<=b-2;c++){h=e=this.Jb[e].Rg;n=a;for(var l=1;l<=c;l++){n=this.Jb[n].Ug;if(0==(this.Jb[n].type&256)&&0==(this.Jb[h].type&256)){var d=this.nO(n,h);if(-1!=d)return d}h=this.Jb[h].Ug}}return-1};n.prototype.nO=function(b,e){var n,c,l,d;n=this.Jb[this.Jb[b].Ug];c=this.Jb[b];l=this.Jb[this.Jb[e].Ug];d=this.Jb[e];if(!this.GR(n,c,l,d))return-1;var f=new h;return this.MM(n,c,l,d,f)&&!f.cB&&a.J.bG((c.x-n.x)*(d.y-l.y)-(c.y-n.y)*(d.x-l.x))!=a.J.bG(this.Ea)?(n=this.Jb[b].Ug,f.Xl.type=c.type,
f.Xl.Rg=e,f.Xl.Ug=n,this.Jb[b]=f.Xl,f.Xl=this.Jb[e],f.Xl.Ug=b,this.Jb[e]=f.Xl,e):-1};n.prototype.GR=function(a,b,e,h){return Math.max(a.x,b.x)>=Math.min(e.x,h.x)&&Math.max(e.x,h.x)>=Math.min(a.x,b.x)&&Math.max(a.y,b.y)>=Math.min(e.y,h.y)&&Math.max(e.y,h.y)>=Math.min(a.y,b.y)};n.prototype.MM=function(a,b,h,n,c){c.cB=!1;var l,d,f;l=(b.y-a.y)*(n.x-h.x)-(b.x-a.x)*(n.y-h.y);d=(h.y-a.y)*(b.x-a.x)-(h.x-a.x)*(b.y-a.y);l=0==l?2:d/l;return 0<=l&&1>=l&&(f=l,l=(n.y-h.y)*(b.x-a.x)-(n.x-h.x)*(b.y-a.y),d=(a.y-h.y)*
(n.x-h.x)-(a.x-h.x)*(n.y-h.y),l=0==l?2:d/l,0<=l&&1>=l)?(c.Xl=e.xL(a.x+l*(b.x-a.x),a.y+l*(b.y-a.y)),c.Xl.mh=h.mh+f*(n.mh-h.mh),0!=f&&1!=f||0!=l&&1!=l||(c.cB=!0),c.vU=l,c.wU=f,(0==f||1==f)&&0<l&&1>l||(0==l||1==l)&&0<f&&1>f?!1:!0):!1};n.prototype.uL=function(a){for(;this.Jb[a].Ug<a;)a=this.Jb[a].Ug;var b=0,e=a;do e=this.Jb[e],this.Jb[b]=e,e=e.Rg,b++;while(e!=a);this.Jb[b]=this.Jb[0];this.Ye=b+1};n.prototype.qA=function(a){var b=this.an,e=b.Da();if(null!=e){e.Lk();for(var h=-1;e.lb();)h++,this.hJ(b,h,
a)}};n.prototype.gv=function(){var b=this.an.F();return b==a.j.Line?this.gJ():b==a.j.Envelope?this.fJ():a.U.Mc(b)?(b=new a.Ya,b.Cc(this.an,!0),this.an=b,this.gv()):b==a.j.Polyline?(b=new a.Ya,this.qA(b),b):b==a.j.Polygon?(b=new a.La,this.qA(b),b):null};return n}();a.XG=n})(A||(A={}));(function(a){var b=function(){function a(b){this.yj=b}a.prototype.A=function(a,b){this.yj.a.A(a,b)};a.prototype.ld=function(a){var b=this.yj.Aa.ea(a);this.yj.Aa.ld(a,-1);this.yj.a.vf(b,!1)};return a}(),c=function(){function a(b){this.yj=
b}a.prototype.A=function(a,b){this.yj.MP.A(a,b)};a.prototype.ld=function(a){this.yj.Aa.ld(a,-1)};return a}(),l=function(){function a(b){this.yj=b}a.prototype.A=function(a,b){b.K(this.yj.OP[a])};a.prototype.ld=function(a){this.yj.Aa.ld(a,-1)};return a}(),e=function(){function e(h){void 0===h?(this.Aa=new a.bj,this.Aa.ee(20),this.a=new a.gd,this.EP=this.a.jg(a.j.MultiPoint),this.br=this.a.Cf(this.EP,-1),this.oh=new b(this)):h instanceof Array?(this.Aa=new a.bj,this.Aa.ee(20),this.OP=h,this.oh=new l(this)):
(this.Aa=new a.bj,this.Aa.ee(20),this.MP=h,this.oh=new c(this))}e.prototype.Fb=function(b){var e=b.F();if(a.Vr.Th(e))this.NJ(b);else if(a.al.Mc(e))this.RJ(b);else if(e==a.j.Envelope)this.KJ(b);else if(e==a.j.Point)this.QJ(b);else throw a.g.O("invalid shape type");};e.prototype.rN=function(){var b=new a.Wa,e=this.Aa.hc(-1),h=new a.La(this.a.up);this.a.Jk(this.Aa.ea(e),b);h.ef(b);for(e=this.Aa.cb(e);-1!=e;e=this.Aa.cb(e))this.a.Jk(this.Aa.ea(e),b),h.lineTo(b);return h};e.vL=function(b){var c=new e(b),
l=b.G(),d=1,f=new a.b,g=new a.b,k=new a.b;for(b.A(0,f);;){b.A(d,g);if(!(g.Vw(f)&&d<l-1))break;d++}c.Aa.addElement(0,-1);c.Aa.rm(d);for(l=d+1;l<b.G();l++)b.A(l,k),d=c.bz(k),-1!=d&&c.Aa.Vi(d,l);k=new a.Wa;d=c.Aa.hc(-1);l=new a.La(b.description);b.Td(c.Aa.ea(d),k);l.ef(k);for(d=c.Aa.cb(d);-1!=d;d=c.Aa.cb(d))b.Td(c.Aa.ea(d),k),l.lineTo(k);return l};e.Pa=function(a,b,c){for(var l=new e(a),d=1,f=a[0];a[d].Vw(f)&&d<b-1;)d++;l.Aa.addElement(0,-1);l.Aa.rm(d);for(d+=1;d<b;d++)f=l.bz(a[d]),-1!=f&&l.Aa.Vi(f,
d);a=0;for(b=l.Aa.hc(-1);-1!=b;b=l.Aa.cb(b))c[a++]=l.Aa.ea(b);return a};e.sD=function(b,c){var l=b.Fa(c),d=b.Ec(c),f=!b.wc(c)&&b.Mo(c),g=b.oc(0),l=2*l,d=2*d;f&&(d-=2);if(6>d-l)return!0;var f=new a.b,k=new a.b,m=new a.b;g.fc(l,f);g.fc(l+2,k);g.fc(l+4,m);var q=e.Cd(k,m,f);if(q.Cq()||!e.bc(q.value()))return!1;for(var r=a.b.Pa(k.x,k.y),s=new a.b,l=l+6;l<d;l+=2){s.K(k);k.K(m);g.fc(l,m);q=e.Cd(k,m,f);if(q.Cq()||!e.bc(q.value()))return!1;q=e.Cd(r,m,f);if(q.Cq()||!e.bc(q.value()))return!1;q=e.Cd(k,m,s);if(q.Cq()||
!e.bc(q.value()))return!1}return!0};e.prototype.NJ=function(b){for(var e=new a.Wa,h=new a.b,c=0;c<b.G();c++){b.A(c,h);var l=this.fq(h);if(-1!=l){b.Td(c,e);var d=this.a.Vb(this.br,e);this.Aa.Vi(l,d)}}};e.prototype.KJ=function(b){for(var e=new a.Wa,h=new a.b,c=0;4>c;c++){b.uu(c,h);var l=this.fq(h);if(-1!=l){b.uf(c,e);var d=this.a.Vb(this.br,e);this.Aa.Vi(l,d)}}};e.prototype.RJ=function(b){var e=new a.Wa,h=b.Nb(),h=this.fq(h);if(-1!=h){b.Fn(e);var c=this.a.Vb(this.br,e);this.Aa.Vi(h,c)}h=b.pc();h=this.fq(h);
-1!=h&&(b.Cn(e),b=this.a.Vb(this.br,e),this.Aa.Vi(h,b))};e.prototype.QJ=function(a){var b=a.A(),b=this.fq(b);-1!=b&&(a=this.a.Vb(this.br,a),this.Aa.Vi(b,a))};e.prototype.fq=function(a){var b=-1;if(0==this.Aa.size(-1))return this.Aa.addElement(-4,-1);if(1==this.Aa.size(-1)){var e=this.a.Ga(this.Aa.ea(this.Aa.hc(-1)));a.Vw(e)||(b=this.Aa.rm(-5));return b}return this.bz(a)};e.prototype.bz=function(b){var c=-1,l=this.Aa.hc(-1),d=this.Aa.uc(-1),f=this.Aa.ea(l),g=this.Aa.ea(d),k=new a.b,m=new a.b;this.oh.A(f,
k);this.oh.A(g,m);f=a.b.zn(m,b,k);if(e.bc(f))c=this.Aa.rm(-1),k=this.$y(b,d,l),k!=l&&this.az(b,l,this.Aa.he(k));else if(e.ti(f)){for(var m=this.Aa.ct(-1),q=this.Aa.hc(-1),r=this.Aa.uc(-1),s,f=new a.b,g=new a.b;q!=this.Aa.he(r);)s=this.Aa.ea(m),this.oh.A(s,f),s=a.b.zn(f,b,k),e.ti(s)?(r=m,m=this.Aa.ik(m)):(q=m,m=this.Aa.Io(m));m=r;k=q;s=this.Aa.ea(m);q=this.Aa.ea(k);this.oh.A(s,f);this.oh.A(q,g);if(!(k!=l&&(f=a.b.zn(g,b,f),!e.bc(f))))c=this.Aa.us(k,m,-2,!1),this.az(b,m,d),this.$y(b,k,l)}else null==
this.jb&&(this.jb=new a.zb),this.jb.fd(m),this.jb.wd(k),k=this.jb.Hd(b,!0),0>k?(k=this.Aa.he(d),this.Aa.ld(d,-1),c=this.Aa.rm(-3),this.$y(b,k,l)):1<k&&(k=this.Aa.cb(l),this.Aa.ld(l,-1),c=this.Aa.us(-1,k,-3,!1),this.az(b,k,d));return c};e.prototype.az=function(b,c,l){if(c!=l){var d=this.Aa.ea(c),f=this.Aa.cb(c),g=new a.b,k=new a.b;for(this.oh.A(d,g);c!=l&&2<this.Aa.size(-1);){this.oh.A(this.Aa.ea(f),k);d=a.b.zn(k,b,g);if(e.bc(d))break;d=c;c=f;g.K(k);f=this.Aa.cb(c);this.oh.ld(d)}}};e.prototype.$y=
function(b,c,l){if(c==l)return l;var d=this.Aa.ea(c),f=this.Aa.he(c),g=new a.b,k=new a.b;for(this.oh.A(d,g);c!=l&&2<this.Aa.size(-1);){this.oh.A(this.Aa.ea(f),k);d=a.b.zn(g,b,k);if(e.bc(d))break;d=c;c=f;g.K(k);f=this.Aa.he(c);this.oh.ld(d)}return c};e.Cd=function(b,e,h){var c=new a.$k;c.set(e.x);c.sub(b.x);var l=new a.$k;l.set(h.y);l.sub(b.y);var d=new a.$k;d.set(e.y);d.sub(b.y);e=new a.$k;e.set(h.x);e.sub(b.x);c.yp(l);d.yp(e);c.sub(d);return c};e.bc=function(a){return 0>a};e.ti=function(a){return 0<
a};e.$n=function(a){return 0==a};return e}();a.Sr=e})(A||(A={}));(function(a){var b=function(){function b(a){this.Ee=this.a=null;this.WD=!0;this.Ee=a}b.HE=function(b,e,h){b=a.Ja.zs(b);return a.Rr.Uw(e.lk(),e.mk(),h.lk(),h.mk(),a.vi.Sy(b))};b.fL=function(b,e){var h=new a.Wa;a.Rr.ZP(b,e,h);return h};b.aa=function(a,e,h,c){h=new b(h);h.a=a;h.la=e;h.WD=c;return h.qJ()};b.prototype.kJ=function(b){return a.Rr.yM(this.a,b)};b.prototype.nJ=function(b){return a.Yu.aa(this.a,b,this.Ee)};b.prototype.qJ=function(){for(var b=
this.la,e=a.Ja.zs(b),b=a.Ja.TJ(b),h=1.00001*b,b=1.000001*b,c=!1,d=30<this.a.qd+10?1E3:(this.a.qd+10)*(this.a.qd+10),f=0,g=this.a.oO();;f++){if(f>d)throw a.g.sa("Internal Error: max number of iterations exceeded");var k=this.kJ(e),c=c||k;this.WD&&(k=0!=this.a.wo(e,!0,!1),c=c||k);k=!1;if(0==f||g||a.Yu.DE(!0,this.a,b,null,this.Ee))k=this.nJ(h),c=c||k;if(!k)break}return c};return b}();a.aj=b})(A||(A={}));(function(a){var b=function(){function b(a){this.Md=this.Ac=null;this.Zb=a;this.gx=!0}b.prototype.dt=
function(a,b){var h=this.a.dc(a);if(null==h){if(!this.a.Pc(a,b))return null;h=b}return h};b.prototype.KL=function(){var b=this.a.Ep(!1),e=!1,h=new a.zb,c=new a.zb,d=new a.i;d.Ka();var f=new a.i;f.Ka();for(var g=new a.Wa,k=new a.gA,m=b.next();-1!=m;m=b.next()){var q=null,r=!1;if(!a.U.Lm(this.a.Mb(b.mj))){q=this.dt(m,h);if(null==q)continue;q.s(d);d.R(this.la,this.la);if(q.mg(this.la))if(q.mg(0))r=!0,q=null;else continue}var s=this.a.Ep(b),t=s.next();for(-1!=t&&(t=s.next());-1!=t;t=s.next()){var C=null,
u=!1;if(!a.U.Lm(this.a.Mb(s.mj))){C=this.dt(t,c);if(null==C)continue;C.s(f);if(C.mg(this.la))if(C.mg(0))u=!0,C=null;else continue}var w=0,x=0;if(null!=q&&null!=C)d.rD(f)&&(k.An(q),k.An(C),k.Ha(this.la,!1),w=k.kk(0),x=k.kk(1),0<w+x&&(this.a.Rp(m,k,0,!0),this.a.Rp(t,k,1,!0)),k.clear());else if(null!=q){var y=new a.b;this.a.A(t,y);if(d.contains(y)){k.An(q);this.a.Jk(t,g);k.Sw(this.la,g,!1);w=k.kk(0);if(0<w)if(this.a.Rp(m,k,0,!0),u){u=-1;for(y=this.a.Y(t);-1!=y&&y!=t&&(C=this.dt(y,c),u=y,null!=C&&C.mg(0));y=
this.a.Y(y));for(y=t;-1!=y&&(this.a.bh(y,k.of),y!=u);y=this.a.Y(y));}else this.a.bh(t,k.of);k.clear()}}else if(null!=C){if(y=new a.b,this.a.A(m,y),f.R(this.la,this.la),f.contains(y)){k.An(C);this.a.Jk(m,g);k.Sw(this.la,g,!1);x=k.kk(0);if(0<x)if(this.a.Rp(t,k,0,!0),r){u=-1;for(y=this.a.Y(m);-1!=y&&y!=m&&(C=this.dt(y,c),u=y,null!=C&&C.mg(0));y=this.a.Y(y));for(y=m;-1!=y&&(this.a.bh(y,k.of),y!=u);y=this.a.Y(y));}else this.a.bh(m,k.of);k.clear()}}else continue;if(0!=w+x){if(0!=w){q=this.a.dc(m);if(null==
q){if(!this.a.Pc(m,h))continue;q=h;h.s(d)}else q.s(d);if(q.mg(this.la))break}e=!0}}}return e};b.prototype.LL=function(){return this.GQ()};b.prototype.GQ=function(){return(new a.aA).FS(this.a,this.la)};b.prototype.EE=function(){var b=!1,e,h;null==this.Ac&&(this.Ac=new a.bj);var c=new a.ha(0);c.yb(this.a.qd+1);for(var d=this.a.Ep(),f=d.next();-1!=f;f=d.next())c.add(f);this.a.Lu(c,c.size);c.add(-1);d=this.a.re();f=this.a.re();this.Md=new a.hA(this.a,this.la,!this.gx);this.Ac.In(this.Md);var g=new a.ha(0),
k=new a.ha(0),m=0;new a.b;var q=this.a.dd;this.a.xb.lc();for(var r=this.a.xb.Ca[0].f,s,t,C=c.get(m++);-1!=C;){t=q.P(C,0);s=r[2*t];t=r[2*t+1];var u=s,w=t;do{var x=q.P(C,2),y=q.P(C,1);-1!=x&&(e=q.P(x,0),h=r[2*e],e=r[2*e+1],0>(w<e?-1:w>e?1:u<h?-1:u>h?1:0)&&(k.add(C),k.add(x)));-1!=y&&(e=q.P(y,0),h=r[2*e],e=r[2*e+1],0>(w<e?-1:w>e?1:u<h?-1:u>h?1:0)&&(k.add(y),k.add(y)));h=this.a.Sa(C,d);-1!=h&&(g.add(h),this.a.mb(C,d,-1));h=this.a.Sa(C,f);-1!=h&&(g.add(h),this.a.mb(C,f,-1));C=c.get(m++);-1!==C&&(w=q.P(C,
0),u=r[2*w],w=r[2*w+1])}while(-1!=C&&u===s&&w===t);u=1==g.size&&2==k.size;h=w=-1;x=0;for(y=g.size;x<y;x++){e=g.get(x);var A=this.Ac.he(e);-1==A||g.Mw(A)||(w=A);e=this.Ac.cb(e);-1==e||g.Mw(e)||(h=e);if(-1!=w&&-1!=h)break}this.Md.XF(t,s);x=0;for(y=g.size;x<y;x++)e=g.get(x),this.Ac.ld(e,-1);g.clear(!1);if(!u&&-1!=w&&-1!=h&&this.RK(w,h)){b=!0;this.ei=this.Md.rl();break}x=0;for(y=k.size;x<y;x+=2){s=k.get(x);t=k.get(x+1);e=-1;u?(e=this.Ac.us(w,h,s,!0),u=!1):e=this.Ac.addElement(s,-1);if(this.Md.Zf){this.ei=
this.Md.rl();b=!0;break}-1==this.a.Sa(t,d)?this.a.mb(t,d,e):this.a.mb(t,f,e)}if(b)break;k.df(0)}this.a.cf(d);this.a.cf(f);return b};b.prototype.RK=function(a,b){this.Md.compare(this.Ac,this.Ac.ea(a),b);var h=this.Md.Zf;this.Md.jq();return h};b.Gh=function(b){for(var e=b.ad;-1!=e;e=b.we(e))if(a.U.Lc(b.Mb(e)))return!0;return!1};b.Yk=function(a,e,h,c){if(!b.Gh(a))return!1;e=new b(c);e.a=a;e.la=h;if(15>a.qd)h=e.KL();else return e.LL();return h};b.aa=function(a,e,h){return b.Yk(a,a.wC(),e,h)};b.DE=function(c,
e,h,n,d){if(!b.Gh(e))return!1;var f=new b(d);f.a=e;f.la=h;f.gx=c;if(f.EE())return null!=n&&n.Zp(f.ei),!0;var g=new a.Bg;g.Ny();e.Pe(g);f=new b(d);f.a=e;f.la=h;f.gx=c;c=f.EE();g.Ny();e.Pe(g);return c?(null!=n&&n.Zp(f.ei),!0):!1};return b}();a.Yu=b})(A||(A={}));(function(a){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Coincident=2]="Coincident";a[a.Undefined=3]="Undefined";a[a.Uncut=4]="Uncut"})(a.ZG||(a.ZG={}));var b=function(){return function(a,b,e,c,l,d,f,v,g,k,m){this.V=a;this.bu=b;
this.Xq=e;this.ag=c;this.Il=k;this.xk=m}}();a.xT=b;var c=function(){function b(a,e){this.jE=a;this.Zh=e}b.prototype.mJ=function(b,e){var h=new a.b;this.Zh.A(b,h);var c=new a.b;this.Zh.A(e,c);h=h.compare(c);if(0!=h)return h;h=this.Zh.Sa(b,this.jE);c=this.Zh.Sa(e,this.jE);return h<c?-1:h==c?0:1};return b}(),l=function(){return function(a,b,e,c,l,d,f,v,g){this.ag=a;this.Xq=b;this.Kx=e;this.sE=c;this.Wh=l;this.xk=d;this.Il=f;this.tE=v;this.QP=g}}();a.wT=l;var e=function(){function e(){}e.YG=function(c,
l,d,f,g,k){if(l.u())c=new b(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),g.push(c);else{var m=new a.gd;m.Fb(l);m.Fb(d);a.aj.aa(m,f,k,!0);l=0;d=m.re();for(f=m.ad;-1!=f;f=m.we(f))for(k=m.Wb(f);-1!=k;k=m.cc(k))for(var q=m.Db(k),r=0,s=m.Ia(k);r<s;q=m.Y(q),r++)m.mb(q,d,l++);l=e.pM(d,m);e.BI(c,l,m,g)}};e.pM=function(b,l){for(var d=l.qd,f=new a.ha(0),g=l.ad;-1!=g;g=l.we(g))for(var k=l.Wb(g);-1!=k;k=l.cc(k))for(var m=l.Db(k),q=0,r=l.Ia(k);q<r;m=l.Y(m),q++)f.add(m);var s=new c(b,l);f.yd(0,d,function(a,b){return s.mJ(a,
b)});var t=[],u=[],w=l.re(),x=l.re(),g=l.ad,k=l.we(g),r=new a.b,y=new a.b,A=f.get(0),B=l.sd(A),K=l.Vf(B);l.A(A,r);for(var D=1,m=0;D<d-1;){for(var E=!1,q=D;q<d;q++)if(q!=m){var G=f.get(q),H=l.sd(G),I=l.Vf(H);l.A(G,y);if(r.vb(y))K==g&&I==k&&(E=e.RI(w,x,l,t,u,B,A,H,G));else break}if(E||m==D-1){E&&m==D-1&&D--;if(++m==d)break;A=f.get(m);B=l.sd(A);K=l.Vf(B);l.A(A,r)}E||(D=m+1)}d=[];for(g=l.ad;-1!=g;g=l.we(g))for(k=l.Wb(g);-1!=k;k=l.cc(k)){f=l.Db(k);q=0;for(r=l.Ia(k);q<r;f=l.Y(f),q++){m=l.Sa(f,x);if(0<=
m)for(;m<u.length&&u[m].ag==f;)d.push(u[m++]);m=l.Sa(f,w);if(0<=m)for(;m<t.length&&t[m].ag==f;)d.push(t[m++])}}l.cf(w);l.cf(x);return d};e.RI=function(a,b,c,l,d,f,g,v,k){var m=c.hk(f),q=c.hk(v),r=c.Db(f),s=c.Db(v),t=c.Va(g),C=c.Va(k),u=!1,w=!1,x=!1,y=!1;g!=r&&(k!=s&&(u=e.UI(a,c,l,f,t,v,C)),k!=q&&(w=e.XI(a,c,l,f,t,v,k)));g!=m&&(k!=s&&(x=e.$I(b,c,d,f,g,v,C,r)),k!=q&&(y=e.cJ(b,c,d,f,g,v,k,r)));u&&w&&x?(a=l.length-1,2==d[y?d.length-2:d.length-1].Wh&&(l[a-1]=l[a],l.length-=1)):u&&w&&y&&2==d[d.length-1].Wh&&
(d=l[l.length-1],l.length-=1,c.Sa(d.ag,a)==l.length&&c.mb(d.ag,a,-1));return u||w||x||y};e.UI=function(b,e,h,c,d,f,g){var k,m;m=new a.zb;var q=new a.zb,r=[0,0],s=[0,0];k=e.dc(d);null==k&&(e.Pc(d,m),k=m);m=e.dc(g);null==m&&(e.Pc(g,q),m=q);k=k.Ha(m,null,r,s,0);2>k&&(c=new l(d,c,r[0],NaN,k,g,f,s[0],NaN),h.push(c),c=e.Sa(d,b),0>c&&e.mb(d,b,h.length-1));return!0};e.XI=function(b,e,h,c,d,f,g){var k,m;m=new a.zb;var q=new a.zb,r=[0,0],s=[0,0];k=e.dc(d);null==k&&(e.Pc(d,m),k=m);m=e.dc(g);null==m&&(e.Pc(g,
q),m=q);k=k.Ha(m,null,r,s,0);return 2>k?(c=new l(d,c,r[0],NaN,k,g,f,s[0],NaN),h.push(c),c=e.Sa(d,b),0>c&&e.mb(d,b,h.length-1),!0):!1};e.$I=function(b,e,h,c,d,f,g,k){var m,q;q=new a.zb;var r=new a.zb,s=[0,0],t=[0,0];m=e.dc(d);null==m&&(e.Pc(d,q),m=q);q=e.dc(g);null==q&&(e.Pc(g,r),q=r);m=m.Ha(q,null,s,t,0);if(2==m)return c=new l(d,c,s[0],s[1],m,g,f,t[0],t[1]),h.push(c),c=e.Sa(d,b),0>c&&e.mb(d,b,h.length-1),!0;r=!1;d==k&&(c=new l(d,c,s[0],NaN,m,g,f,t[0],NaN),h.push(c),c=e.Sa(d,b),0>c&&e.mb(d,b,h.length-
1),r=!0);return r};e.cJ=function(b,e,h,c,d,f,g,k){var m,q;q=new a.zb;var r=new a.zb,s=[0,0],t=[0,0];m=e.dc(d);null==m&&(e.Pc(d,q),m=q);q=e.dc(g);null==q&&(e.Pc(g,r),q=r);m=m.Ha(q,null,s,t,0);if(2==m)return c=new l(d,c,s[0],s[1],m,g,f,t[0],t[1]),h.push(c),c=e.Sa(d,b),0>c&&e.mb(d,b,h.length-1),!0;r=!1;d==k&&(c=new l(d,c,s[0],NaN,m,g,f,t[0],NaN),h.push(c),c=e.Sa(d,b),0>c&&e.mb(d,b,h.length-1),r=!0);return r};e.BI=function(c,l,d,f){var g,k=[];k[0]=new a.b;k[1]=new a.b;k[2]=new a.b;k[3]=new a.b;var m=
new a.b,q=new a.b,r=new a.b,s=new a.b,t=null;null!=f&&(t=new a.Ag,t.kq());var C=null,u=0,w=null,x=new a.zb;new a.zb;for(var y=d.Wb(d.ad);-1!=y;y=d.cc(y)){var A,B=4,D=-1,E=-1,G=NaN,H=-1,I=-1,J=NaN,M=-1,L=-1,O=NaN,Q=-1,S=-1,R=NaN;A=!0;for(var U=!1,V=!0,X=!0,va=!0,ca=0,H=y,J=0,xa=d.Db(y),Fa=d.Ia(y),ia=0;ia<Fa;xa=d.Y(xa),ia++){C=d.dc(xa);if(null==C){if(!d.Pc(xa,x))continue;C=x}-1==I&&(I=xa);for(var ga=0;u<l.length&&xa==l[u].ag;){D=l[u].Xq;E=l[u].ag;G=l[u].Kx;M=l[u].Il;L=l[u].xk;O=l[u].tE;if(2==l[u].Wh){if(U||
(H=D,I=E,J=G,Q=M,S=L,R=O,B=2,null!=f?w=new a.Ya:ca=0,va=!1,X=!0),G=l[u].sE,O=l[u].QP,null!=f?(C.Bi(ga,l[u].sE,t),w.Cc(t.get(),X)):ca++,ga=G,U=!0,X=A=!1,u+1==l.length||2!=l[u+1].Wh||l[u+1].ag==E&&l[u+1].Kx!=ga)null!=f?(g=new b(w,2,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):null.add(ca),H=D,I=E,J=G,Q=M,S=L,R=O,B=2,U=A=!1,X=va=!0}else{var Y=d.Y(E);if(u<l.length-1&&l[u+1].ag==Y&&l[u+1].xk==L&&2==l[u+1].Wh)G!=ga&&(va&&(null!=f?w=new a.Ya:ca=0),A=0<u&&l[u-1].Xq==D?1==B?0:0==B?1:3:3,null!=f?(C.Bi(ga,G,t),w.Cc(t.get(),
X),g=new b(w,A,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):(ca++,null.add(ca)),ga=G,H=D,I=E,J=G,Q=M,S=L,R=O,B=A,A=V=!1,X=va=!0);else if(!e.JK(c,d,l,u,m,q)){e.KG(d,l,u,y,xa,r,s);var ba=!1,Y=!1;g=!0;if(!m.vb(r)&&!q.vb(r)&&!m.vb(s)&&!q.vb(s)){k[0].K(m);k[1].K(q);k[2].K(r);k[3].K(s);k.sort(a.b.aq);var P=k[0],ha=k[1],ja=k[2],ma=k[3];P.vb(m)?ha.vb(q)?c?(Y=ba=!0,g=!1):ba=!1:ma.vb(q)?c?g=Y=ba=!0:ba=!1:(ba=!0,g=ha.vb(r)):ha.vb(m)?ja.vb(q)?c?(Y=ba=!0,g=!1):ba=!1:P.vb(q)?c?g=Y=ba=!0:ba=!1:(ba=!0,g=ja.vb(r)):ja.vb(m)?
ma.vb(q)?c?(Y=ba=!0,g=!1):ba=!1:ha.vb(q)?c?g=Y=ba=!0:ba=!1:(ba=!0,g=ma.vb(r)):P.vb(q)?c?(Y=ba=!0,g=!1):ba=!1:ja.vb(q)?c?g=Y=ba=!0:ba=!1:(ba=!0,g=P.vb(r))}if(ba){ba=xa==E;if(G!=ga||ba&&0==ga)va&&(null!=f?w=new a.Ya:ca=0),null!=f?(C.Bi(ga,G,t),w.Cc(t.get(),X)):ca++;if(g)if(1!=B){if(G!=ga||ba&&0==ga)null!=f?(g=new b(w,1,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):null.add(ca);if(Y){if(u==l.length-2||l[u+2].Xq!=D)B=0}else B=1}else{if(G!=ga||ba&&0==ga)null!=f?(g=new b(w,3,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):
null.add(ca);B=1}else if(0!=B){if(G!=ga||ba&&0==ga)null!=f?(g=new b(w,0,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):null.add(ca);if(Y){if(u==l.length-2||l[u+2].Xq!=D)B=1}else B=0}else{if(G!=ga||ba&&0==ga)null!=f?(g=new b(w,3,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):null.add(ca);B=0}if(G!=ga||ba&&0==ga)ga=G,H=D,I=E,J=G,Q=M,S=L,R=O,A=V=!1,X=va=!0}}}u++}1!=ga&&(va&&(null!=f?w=new a.Ya:ca=0),null!=f?(C.Bi(ga,1,t),w.Cc(t.get(),X)):ca++,X=va=!1,V=!0)}V&&(G=1,E=d.hk(y),E=d.Va(E),L=M=-1,O=NaN,A?null!=f?(g=new b(w,
4,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):null.add(ca):(A=1==B?0:0==B?1:3,null!=f?(g=new b(w,A,D,E,G,B,H,I,J,M,L,O,Q,S,R),f.push(g)):null.add(ca)))}};e.JK=function(b,c,l,d,f,g){var k=l[d].tE;if(1==k)return e.FJ(b,c,l,d,f,g);if(0==k)return e.cK(b,c,l,d,f,g);throw a.g.xa();};e.FJ=function(b,e,h,c,l,d){var f=new a.zb,g=h[c].ag,k=h[c].Il,m=h[c].xk,q=-1,r=-1,s=-1,t=-1;if(!b&&0<c)var C=h[c-1],q=C.ag,r=C.Il,s=C.xk,t=C.Wh;var u=-1,w=-1,x=-1,y=-1;c<h.length-1&&(C=h[c+1],u=C.ag,w=C.Il,x=C.xk,y=C.Wh);var A=e.Y(g),
C=e.Y(m);if(!b)return 0<c&&q==g&&r==k&&s==C&&2==t||c<h.length-1&&u==A&&w==k&&x==C&&2==y?(b=e.dc(m),null==b&&(e.Pc(m,f),b=f),d.K(b.Pf(1)),l.pr(d),d.normalize(),l.normalize(),!1):c<h.length-1&&u==g&&w==k&&x==C?(b=e.dc(m),null==b&&(e.Pc(m,f),b=f),l.K(b.Pf(1)),b=e.dc(C),null==b&&(e.Pc(C,f),b=f),d.K(b.Pf(0)),l.zp(),d.normalize(),l.normalize(),!1):!0;if(c==h.length-1||u!=g||w!=k||x!=C||2==y)return b=e.dc(m),null==b&&(e.Pc(m,f),b=f),d.K(b.Pf(1)),l.pr(d),d.normalize(),l.normalize(),!1;b=e.dc(m);null==b&&
(e.Pc(m,f),b=f);l.K(b.Pf(1));b=e.dc(C);null==b&&(e.Pc(C,f),b=f);d.K(b.Pf(0));l.zp();d.normalize();l.normalize();return!1};e.cK=function(b,e,h,c,l,d){var f=new a.zb,g=h[c].ag,k=h[c].Il,m=h[c].xk,q=-1,r=-1,s=-1,t=-1;if(!b&&c<h.length-1)var C=h[c+1],q=C.ag,r=C.Il,s=C.xk,t=C.Wh;var u=-1,w=-1,x=-1,C=-1;0<c&&(C=h[c-1],u=C.ag,w=C.Il,x=C.xk,C=C.Wh);var y=e.Y(g),A=e.Va(m);return b?0==c||u!=g||w!=k||x!=A||2==C?(b=e.dc(m),null==b&&(e.Pc(m,f),b=f),d.K(b.Pf(0)),l.pr(d),d.normalize(),l.normalize(),!1):!0:0<c&&
u==g&&w==k&&x==A&&2==C||c<h.length-1&&q==y&&r==k&&s==A&&2==t?(b=e.dc(m),null==b&&(e.Pc(m,f),b=f),d.K(b.Pf(0)),l.pr(d),d.normalize(),l.normalize(),!1):!0};e.KG=function(b,e,h,c,l,d,f){var g=new a.zb,k=b.dc(l);null==k&&(b.Pc(l,g),k=g);h=e[h];e=h.ag;h=h.Kx;l=b.Y(e);if(1==h)d.K(k.Pf(1)),-1!=l&&l!=b.hk(c)?(k=b.dc(l),null==k&&(b.Pc(l,g),k=g),f.K(k.Pf(0)),k=b.dc(e),null==k&&b.Pc(e,g)):f.K(d),d.zp(),f.normalize(),d.normalize();else if(0==h)f.K(k.Pf(h)),d.pr(f),f.normalize(),d.normalize();else throw a.g.xa();
};return e}();a.$G=e})(A||(A={}));(function(a){(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area"})(a.QI||(a.QI={}));var b=function(){function b(a,e,h){this.Oc=e;this.Ej=h;this.vx=a}b.PC=function(a){return 0!==a.Oc?null:-1===a.vx?new b(-1,2,a.Ej*a.Ej):b.Rd(n[a.vx])};b.Rd=function(a){a=h[a];return void 0===a?null:a};b.DL=function(a,e,h){var c=null;if(void 0!==h&&null!==h)try{"EPSG"===h.values[0]&&(c=b.Rd(parseInt(h.values[1])))}catch(n){}null===c&&(c=new b(-1,a,e));return c};
b.prototype.Rc=function(){return this.vx};b.prototype.rC=function(b){if(b.Oc!=this.Oc)throw a.g.ya();return this.Ej/b.Ej};b.ih=function(a,b,e){return b.rC(e)*a};b.OB=function(a,b,e,h,c){e=e.rC(h);for(h=0;h<b;h++)c[h]=a[h]*e};return b}();a.Ub=b;for(var c=[109402,4046.8564224,109403,4046.87260987425,109463,100,109401,1E4,109461,225E8,109460,25E8,109451,1E-4,109444,404.68564224000005,109424,404.6849341289498,109428,404.68493792602754,109416,404.67838076760535,109420,404.68423895571647,109448,404.683871963536,
109411,404.6872609874253,109450,0.01,109408,3.34450944,109405,0.09290304,109430,0.09290354800069446,109423,0.0929028774400711,109427,0.09290287831176021,109441,0.09290349665192114,109407,0.09290137299531805,109440,0.09290286332673177,109431,0.09290274144751023,109432,0.09290207073852812,109433,0.09290279616016,109434,0.09290273520025,109419,0.09290271785025629,109447,0.0929026336004445,109406,0.09290341161327487,109453,6.4516E-4,109454,6.451625806477421E-4,109414,1E6,109445,0.04046856422400001,109425,
0.04046849341289498,109429,0.04046849379260275,109417,0.04046783807676053,109421,0.04046842389557164,109449,0.0404683871963536,109412,0.04046872609874253,109404,1,109410,1.000027193184865,109413,2589998.4703195216,109452,1E-6,109409,3429904,109458,3434290.937856,109457,3434528.1495040003,109464,1.244521604938272E-7,109455,25.292852640000003,109456,25.29295381171408,109459,2.89612324,109439,2589988.110336,109462,0.7168473118308245,109442,0.83612736,109422,0.83612589696064,109426,0.836125904805842,
109415,0.8361123569578626,109435,0.836124673027592,109436,0.836118636646753,109437,0.8361251654414399,109438,0.83612461680225,109418,0.8361244606523066,109446,0.8361237024040001,109443,0.8361307045194736],l=[9103,2.908882086657216E-4,9104,4.84813681109536E-6,9102,0.0174532925199433,9106,0.01570796326794897,9105,0.01570796326794897,9109,1E-6,9114,9.817477042468104E-4,1031,4.84813681109536E-9,9112,1.570796326794897E-4,9101,1,9113,1.570796326794897E-6],e=[109031,15E4,109461,109030,5E4,109460,1033,0.01,
109451,9097,20.1168,109444,9052,20.1167824,109424,9062,20.116782494375872,109428,9038,20.1166195164,109416,9042,20.116765121552632,109420,9301,20.116756,109448,9033,20.11684023368047,109411,109005,0.1,109450,9014,1.8288,109408,9002,0.3048,109405,9070,0.3048008333333334,109430,9051,0.3047997333333333,109423,9061,0.3047997347632708,109427,9095,0.3048007491,109441,9005,0.3047972654,109407,9094,0.3047997101815088,109440,9080,0.3047995102481469,109431,9081,0.30479841,109432,9082,0.3047996,109433,9083,
0.3047995,109434,9041,0.304799471538676,109419,9300,0.3047993333333334,109447,9003,0.3048006096012192,109406,109008,0.0254,109453,109009,0.0254000508001016,109454,9036,1E3,109414,9098,0.201168,109445,9053,0.201167824,109425,9063,0.2011678249437587,109429,9039,0.201166195164,109417,9043,0.2011676512155263,109421,9302,0.20116756,109449,9034,0.2011684023368047,109412,9001,1,109404,9031,1.0000135965,109410,9035,1609.3472186944375,109413,1025,0.001,109452,9030,1852,109409,109013,1853.184,109458,109012,
1853.248,109457,109016,3.527777777777778E-4,109464,109010,5.0292,109455,109011,5.029210058420118,109456,109014,1.7018,109459,9093,1609.344,109439,109015,0.8466683600033867,109462,9096,0.9144,109442,9050,0.9143992,109422,9060,0.9143992042898124,109426,9037,0.9143917962000001,109415,9084,0.9143985307444408,109435,9085,0.91439523,109436,9086,0.9143988,109437,9087,0.9143985,109438,9040,0.9143984146160287,109418,9099,0.914398,109446,109002,0.9144018288036576,109443,109001,0.9144,109442,109003,20.1168,
109444,109004,0.201168,109445,109006,0.01,109451,109007,0.001,109452],h=[],n=[],d=0;d<c.length;d+=2)h[c[d]]=new b(c[d],2,c[d+1]);c=null;for(d=0;d<l.length;d+=2)h[l[d]]=new b(l[d],1,l[d+1]);l=null;for(d=0;d<e.length;d+=3)h[e[d]]=new b(e[d],0,e[d+1]),n[e[d]]=e[d+2];e=null})(A||(A={}));(function(a){var b=function(){function a(){}a.prototype.set=function(a,b){void 0!==b?(this.Lf=a,this.Og=b):"number"===typeof a?(this.Lf=a,this.Og=0):(this.Lf=a.Lf,this.Og=a.Og)};a.prototype.value=function(){return this.Lf};
a.prototype.sub=function(a){if("number"===typeof a){var b=this.Lf-a;a=this.Og+2.220446049250313E-16*Math.abs(b)}else b=this.Lf-a.Lf,a=this.Og+a.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b;this.Og=a};a.prototype.yp=function(a){var b=this.Lf*a.Lf;this.Og=this.Og*Math.abs(a.Lf)+a.Og*Math.abs(this.Lf)+this.Og*a.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b};a.prototype.dP=function(){return Math.abs(this.Lf)<=this.Og};a.prototype.Cq=function(){return this.dP()&&0!=this.Og};return a}();a.$k=b})(A||
(A={}));var G=new A.b,I=new A.b,M=new A.b,J=new A.b,S=new A.b;(function(a){var b;(function(a){a[a.closedPath=1]="closedPath";a[a.exteriorPath=2]="exteriorPath";a[a.ringAreaValid=4]="ringAreaValid"})(b||(b={}));var c=function(){function b(a,h,c,l,d,f,g){void 0!==h?(this.bb=a,this.mj=h,this.ak=c,this.zh=l,this.va=f,this.lx=g,this.Ot=d):(this.bb=a.bb,this.mj=a.mj,this.ak=a.ak,this.zh=a.zh,this.va=a.va,this.lx=a.lx,this.Ot=a.Ot);this.JD=!0}b.prototype.next=function(){return this.JD?(this.JD=!1,this.zh):
-1!=this.zh?(this.zh=this.bb.Y(this.zh),this.va++,-1!=this.zh&&this.zh!=this.Ot?this.zh:this.bQ()):-1};b.prototype.bQ=function(){this.ak=this.bb.cc(this.ak);for(this.va=0;-1!=this.mj;){for(;-1!=this.ak;this.ak=this.bb.cc(this.ak))if(this.Ot=this.zh=this.bb.Db(this.ak),-1!=this.zh)return this.zh;this.mj=this.bb.we(this.mj);if(-1==this.mj)break;if(!this.lx||a.U.Lc(this.bb.Mb(this.mj)))this.ak=this.bb.Wb(this.mj)}return-1};b.TL=function(a,h,c,d,f,g,v){return new b(a,h,c,d,f,g,v)};return b}();a.BT=c;
b=function(){function b(){this.$m=this.Al=this.Fj=this.Nc=this.Kj=this.kn=this.fi=this.Sc=this.sh=this.wg=this.He=this.up=this.xp=this.xb=this.Hk=null;this.Wt=this.ad=-1;this.qd=0;this.jx=!1;this.up=this.xp=this.xb=null}b.prototype.Fi=function(a){return null!=this.He?this.He[a]:null};b.prototype.Fh=function(a,b){if(null==this.He){if(null==b)return;this.He=[];for(var c=0,l=this.xb.G();c<l;c++)this.He.push(null)}this.He[a]=b};b.prototype.Nn=function(a,b){this.Sc.N(a,1,b)};b.prototype.Mn=function(a,
b){this.Sc.N(a,2,b)};b.prototype.Hy=function(a,b){this.Sc.N(a,6,b)};b.prototype.Go=function(a){return this.Sc.P(a,6)};b.prototype.Gu=function(a,b){this.Sc.N(a,7,b)};b.prototype.at=function(a){return this.Sc.P(a,0)};b.prototype.MF=function(a,b){this.Nc.N(a,1,b)};b.prototype.QF=function(a,b){this.Nc.N(a,0,b)};b.prototype.xC=function(a){return this.Nc.P(a,7)};b.prototype.Kn=function(a,b){this.Nc.N(a,3,b)};b.prototype.Ln=function(a,b){this.Nc.N(a,4,b)};b.prototype.iQ=function(b){null==this.Nc&&(this.Nc=
new a.Gc(8));var h=this.Nc.ce();this.Nc.N(h,2,b);this.Nc.N(h,5,0);this.Nc.N(h,6,0);this.Nc.N(h,7,h);return h};b.prototype.aN=function(a){this.Nc.Kc(a)};b.prototype.kQ=function(b){null==this.Sc&&(this.Sc=new a.Gc(8),this.dd=new a.Gc(5),this.fi=new a.rd(0),this.kn=new a.rd(0));var h=this.Sc.ce();this.Sc.N(h,0,h);this.Sc.N(h,3,0);this.Sc.N(h,6,0);this.Gu(h,b);h>=this.fi.size&&(b=16>h?16:a.J.truncate(3*h/2),this.fi.resize(b),this.kn.resize(b));this.fi.set(h,0);this.kn.set(h,0);return h};b.prototype.iC=
function(a){this.Sc.Kc(a)};b.prototype.cw=function(a){this.dd.Kc(a);this.qd--};b.prototype.lQ=function(b){null==this.Sc&&(this.Sc=new a.Gc(8),this.dd=new a.Gc(5),this.fi=new a.rd(0),this.kn=new a.rd(0));var h=this.dd.ce(),c=0<=b?b:h;this.dd.N(h,0,c);if(0>b){if(c>=this.xb.G()){b=16>c?16:a.J.truncate(3*c/2);this.xb.resize(b);if(null!=this.He)for(var l=0;l<b;l++)this.He.push(null);null!=this.wg&&this.wg.resize(b);this.xp=this.xb.oc(0)}this.xb.jc(c,-1E38,-1E38);null!=this.He&&(this.He[c]=null);null!=
this.wg&&this.wg.write(c,1)}this.dd.N(h,4,2*c);this.qd++;return h};b.prototype.vl=function(a,b,c){var l=-1!=b?this.Va(b):this.hk(a),d=-1!=l?this.Y(l):-1,f=this.lQ(null==c?this.qd:-1),g=this.hb(f);null!=c&&this.xb.Hu(g,c);this.im(f,a);this.Tc(f,d);this.Uc(f,l);-1!=d&&this.Uc(d,f);-1!=l&&this.Tc(l,f);c=this.wc(a);l=this.Db(a);-1==b&&this.Wi(a,f);b==l&&this.Dh(a,f);c&&-1==d&&(this.Tc(f,f),this.Uc(f,f));this.hm(a,this.Ia(a)+1);a=this.Vf(a);this.Pk(a,this.G(a)+1);return f};b.prototype.Eo=function(){null==
this.$m&&(this.$m=new a.Wa(this.xb.description));return this.$m};b.prototype.Np=function(a,b){var c=this.Nc.P(a,2);this.Nc.N(a,2,c&-134217729||(1==b?134217728:0))};b.prototype.Dm=function(a){return 0!=(this.Nc.P(a,2)&134217728)?1:0};b.prototype.LJ=function(b){var h=this.jg(b.F(),b.description);b.F()==a.j.Polygon&&this.Np(h,b.Dm());this.WA(h,b);return h};b.prototype.MJ=function(a){var b=this.jg(a.F(),a.description);this.XA(b,a);return b};b.prototype.SQ=function(b,h){null==this.Sc&&(this.Sc=new a.Gc(8),
this.dd=new a.Gc(5),this.fi=new a.rd(0),this.kn=new a.rd(0));this.Sc.ee(this.Sc.Yc+b);this.dd.ee(this.dd.Yc+h);this.fi.yb(this.fi.size+b);this.kn.yb(this.kn.size+b)};b.prototype.WA=function(b,h){this.SQ(h.fa(),h.G());this.Hk.Qd(h,0,h.G());this.xp=this.xb.oc(0);for(var c=null!=this.He&&null!=h.Ge,l=0,d=h.fa();l<d;l++)if(!(2>h.Ia(l))){var f=this.Cf(b,-1);this.Hn(f,h.wc(l));for(var g=h.Fa(l),k=h.Ec(l);g<k;g++){var m=this.vl(f,-1,null);if(c)if(m=this.hb(m),0!=(h.NC(g)&1))this.Fh(m,null);else{var q=new a.Ag;
h.dc(g,q,!0);this.Fh(m,q.get())}}}};b.prototype.XA=function(a,b){this.Hk.Qd(b,0,b.G());this.xp=this.xb.oc(0);for(var c=this.Cf(a,-1),l=0,d=b.G();l<d;l++)this.vl(c,-1,null)};b.prototype.CS=function(b,h,c){var l=this.Y(b);if(-1==l)throw a.g.xa();for(var d=this.Eo(),f=this.sd(b),g=0,k=h.kk(c);g<k;g++){var m=this.hb(b),q=this.Y(b),r=h.Ho(c,g);0==g&&(r.Fn(d),this.bh(b,d));r.F()==a.j.Line?this.Fh(m,null):this.Fh(m,a.U.Zj(r));r.Cn(d);g<k-1?b=this.vl(f,q,d):this.bh(l,d)}};b.prototype.BS=function(b,h,c){var l=
this.Y(b);if(-1==l)throw a.g.xa();for(var d=this.Eo(),f=this.sd(b),g=0,k=h.kk(c);g<k;g++){var m=this.hb(b),q=this.Y(b),r=h.Ho(c,k-g-1);0==g&&(r.Cn(d),this.bh(b,d));r.F()==a.j.Line?this.Fh(m,null):this.Fh(m,a.U.Zj(r));r.Fn(d);g<k-1?b=this.vl(f,q,d):this.bh(l,d)}};b.prototype.wC=function(){var b=new a.i;b.Ka();for(var h=this.Ep(),c=new a.b,l=!0,d=h.next();-1!=d;d=h.next())this.A(d,c),l?b.Eb(c.x,c.y):b.Pj(c.x,c.y),l=!1;return b};b.prototype.Fb=function(b){var h=b.F();if(a.U.Lc(h))return this.LJ(b);if(h==
a.j.MultiPoint)return this.MJ(b);throw a.g.xa();};b.prototype.XJ=function(b,h){var c=h.F();if(a.U.Lc(c))this.WA(b,h);else if(c==a.j.MultiPoint)this.XA(b,h);else throw a.g.xa();};b.prototype.PJ=function(b,h){var c=this.jg(a.j.Polygon,b.description);if(2>b.Ia(h))return c;this.Hk.Qd(b,b.Fa(h),b.Ec(h));this.xp=this.xb.oc(0);var l=this.Cf(c,-1);this.Hn(l,b.wc(h)||!0);for(var d=null!=this.He&&null!=b.Ge,f=b.Fa(h),g=b.Ec(h);f<g;f++){var k=this.vl(l,-1,null);if(d)if(k=this.hb(k),0!=(b.NC(f)&1))this.Fh(k,
null);else{var m=new a.Ag;b.dc(f,m,!0);this.Fh(k,m.get())}}return c};b.prototype.jf=function(b){var h=this.Mb(b),c=a.sH.jg(h,this.Hk.description),l=this.G(b);if(0==l)return c;if(a.U.Lc(h)){for(var h=this.fa(b),d=a.Bc.Dg(h+1),f=a.Bc.so(h+1,0),g=c.description,k=0,m=g.Ba;k<m;k++){for(var q=g.Id(k),r=a.qa.Xa(q),s=a.Bc.Sv(q,l),t=this.xb.oc(q),C=0,u=0,w=0,x=this.Wb(b);-1!=x;x=this.cc(x)){var y=0;this.wc(x)&&(y|=1);this.UO(x)&&(y|=4);0!=y&&f.wy(u,y);var A=this.Ia(x);d.write(u++,w);w+=A;if(0==q)for(var A=
t,B=s,K=new a.b,y=this.Db(x);C<w;y=this.Y(y),C++){var D=this.hb(y);A.fc(2*D,K);B.Sn(2*C,K)}else for(y=this.Db(x);C<w;y=this.Y(y),C++){D=this.hb(y);for(B=0;B<r;B++)K=t.Bh(D*r+B),s.Uk(C*r+B,K)}}c.bm(q,s);d.write(h,l)}c.NF(f);c.OF(d);c.de(16777215)}else if(h==a.j.MultiPoint){g=c.description;c.resize(l);k=0;for(m=g.Ba;k<m;k++){q=g.Id(k);r=a.qa.Xa(q);s=c.oc(q);t=this.xb.oc(q);C=0;x=this.Wb(b);A=this.Ia(x);for(y=this.Db(x);C<A;y=this.Y(y),C++){D=this.hb(y);for(B=0;B<r;B++)K=t.Bh(D*r+B),s.Uk(C*r+B,K)}c.bm(q,
s)}c.de(16777215)}return c};b.prototype.ry=function(a){for(var b=this.Wb(a);-1!=b;b=this.Br(b));var b=this.$N(a),c=this.we(a);-1!=b?this.MF(b,c):this.ad=c;-1!=c?this.QF(c,b):this.Wt=b;this.aN(a)};b.prototype.jg=function(b,h){return void 0===h?this.QB(b,a.Pd.Tf()):this.QB(b,h)};b.prototype.QB=function(b,h){var c=this.iQ(b);null==this.xb?this.xb=this.Hk=new a.pe(h):this.Hk.Ik(h);this.up=this.Hk.description;this.jx=1<this.up.Ba;-1==this.ad?this.ad=c:(this.QF(c,this.Wt),this.MF(this.Wt,c));return this.Wt=
c};b.prototype.we=function(a){return this.Nc.P(a,1)};b.prototype.$N=function(a){return this.Nc.P(a,0)};b.prototype.Mb=function(a){return this.Nc.P(a,2)&2147483647};b.prototype.EF=function(b,h,c){h=this.Fj[h];b=this.xC(b);b>=h.size&&h.resize(Math.max(a.J.truncate(1.25*b),16),-1);h.write(b,c)};b.prototype.yC=function(a,b){var c=this.xC(a),l=this.Fj[b];return c<l.size?l.read(c):-1};b.prototype.RB=function(){null==this.Fj&&(this.Fj=[]);for(var b=0;b<this.Fj.length;b++)if(null==this.Fj[b])return this.Fj[b]=
a.Bc.Dg(0),b;this.Fj.push(a.Bc.Dg(0));return this.Fj.length-1};b.prototype.sR=function(a){this.Fj[a]=null};b.prototype.Wb=function(a){return this.Nc.P(a,3)};b.prototype.Xs=function(a){return this.Nc.P(a,4)};b.prototype.G=function(a){return this.Nc.P(a,5)};b.prototype.fa=function(a){return this.Nc.P(a,6)};b.prototype.wo=function(b,h,c){for(var l=0,d=this.ad;-1!=d;d=this.we(d)){var f=this.Mb(d);if(a.U.Lc(f)&&(!c||f==a.j.Polygon))for(var f=this.Mb(d)==a.j.Polygon,g=this.Wb(d);-1!=g;){for(var k=0,m=this.Db(g);k<
a.J.truncate(this.Ia(g)/2);){var q=this.Y(m);if(-1==q)break;var r=this.hb(m),s=this.Fi(r),t=0;null!=s?t=s.ac():(s=this.hb(q),t=this.xb.lv(r,s));t<=b?(0==t?0==l&&(l=-1):l=1,q!=this.hk(g)&&(this.Yy(q,m),this.vf(q,!0))):m=this.Y(m);k++}k=this.Db(g);for(m=this.wc(g)?k:this.hk(g);0<this.Ia(g);)if(q=this.Va(m),-1!=q)if(t=this.hb(q),s=this.Fi(t),null!=s?t=s.ac():(r=this.hb(m),t=this.xb.lv(r,t)),t<=b)0==t?0==l&&(l=-1):l=1,this.Yy(q,m),this.vf(q,!1),k==q&&(k=this.Db(g));else{if(m=this.Va(m),m==k)break}else{this.vf(m,
!0);0==l&&(l=-1);break}m=this.Ia(g);h&&(f?3>m:2>m)?(g=this.Br(g),l=0<m?1:0==l?-1:l):g=this.cc(g)}}return l};b.prototype.Yy=function(a,b){var c=this.hb(a),l=this.hb(b);null!=this.wg&&(c=this.wg.read(c),this.wg.write(l,c));if(null!=this.sh){l=0;for(c=this.sh.length;l<c;l++)if(null!=this.sh[l]){var d=this.Sa(a,l);-1!=d&&this.mb(b,l,d)}}};b.prototype.Lr=function(b,h,c){var l=0,d=this.Y(b);if(-1==d)throw a.g.xa();for(var f=this.hb(b),g=this.hb(d),k=this.Fi(f),m=null==k?this.xb.lv(f,g):k.ac(),q=0;q<c;q++){var r=
h[q];if(0<r&&1>r){var s=r;null!=k&&(s=0<m?k.rA(r)/m:0);this.xb.uJ(f,g,s,this.Eo());var t=this.vl(this.sd(b),d,this.Eo());l++;if(null!=k){var C=k.ym(0,r),s=this.hb(this.Va(t));this.Fh(s,C);this.Yi(t,C.pc());if(q==c-1||1==h[q+1])r=k.ym(r,1),this.Fh(s,r)}}}return l};b.prototype.bh=function(a,b){var c=this.hb(a);this.xb.Hu(c,b);c=this.Fi(c);null!=c&&c.setStart(b);var l=this.Va(a);-1!=l&&(l=this.hb(l),null!=this.Fi(l)&&c.setEnd(b))};b.prototype.Jk=function(a,b){var c=this.hb(a);this.xb.Td(c,b)};b.prototype.Yi=
function(a,b){this.jc(a,b.x,b.y)};b.prototype.jc=function(a,b,c){var l=this.hb(a);this.xb.jc(l,b,c);l=this.Fi(l);null!=l&&l.My(b,c);a=this.Va(a);-1!=a&&(a=this.hb(a),null!=this.Fi(a)&&l.Ok(b,c))};b.prototype.A=function(a,b){this.xb.A(this.dd.P(a,0),b)};b.prototype.vc=function(a,b){this.xb.Ca[0].fc(2*this.dd.P(a,0),b)};b.prototype.Ga=function(b){var h=new a.b;this.xb.A(this.dd.P(b,0),h);return h};b.prototype.SC=function(a,b){this.xp.fc(2*a,b)};b.prototype.md=function(a,b,c){return this.xb.md(a,this.hb(b),
c)};b.prototype.setAttribute=function(a,b,c,l){this.xb.setAttribute(a,this.hb(b),c,l)};b.prototype.hb=function(a){return this.dd.P(a,0)};b.prototype.mk=function(b){var h=new a.b;this.A(b,h);return h.y};b.prototype.Bq=function(a,b){var c=this.hb(a),l=this.hb(b),d=this.xb.Ca[0].f;return d[2*c]===d[2*l]&&d[2*c+1]===d[2*l+1]};b.prototype.ot=function(a,b){var c=this.hb(a),l=this.xb.Ca[0].f;return l[2*c]===b.x&&l[2*c+1]===b.y};b.prototype.oS=function(b,h){1>h&&(h=1);if(null==this.wg){if(1==h)return;this.wg=
a.Bc.kl(this.xb.G(),1)}var c=this.hb(b);c>=this.wg.size&&this.wg.resize(c+1,1);this.wg.write(c,h)};b.prototype.RC=function(a){a=this.hb(a);return null==this.wg||a>=this.wg.size?1:this.wg.read(a)};b.prototype.mb=function(a,b,c){b=this.sh[b];a=this.hb(a);b.size<this.xb.G()&&b.resize(this.xb.G(),-1);b.write(a,c)};b.prototype.Sa=function(a,b){var c=this.hb(a),l=this.sh[b];return c<l.size?l.read(c):-1};b.prototype.re=function(){null==this.sh&&(this.sh=[]);for(var b=0;b<this.sh.length;b++)if(null==this.sh[b])return this.sh[b]=
a.Bc.Dg(0,-1),b;this.sh.push(a.Bc.Dg(0,-1));return this.sh.length-1};b.prototype.cf=function(a){this.sh[a]=null};b.prototype.dc=function(a){return null!=this.He?(a=this.hb(a),this.He[a]):null};b.prototype.Pc=function(b,h){var c=this.dd.P(b,2);if(-1==c)return!1;if(this.jx){var l=new a.Wa;this.Jk(b,l);h.setStart(l);this.Jk(c,l);h.setEnd(l)}else this.xb.vc(this.dd.P(b,0),G),h.gl(0,G),this.xb.vc(this.dd.P(c,0),G),h.gl(1,G);return!0};b.prototype.fR=function(b,h,c){if(this.jx){var l=new a.Wa;this.Jk(b,
l);c.setStart(l);this.Jk(h,l);c.setEnd(l)}else this.xb.vc(b,G),c.gl(0,G),this.xb.vc(h,G),c.gl(1,G)};b.prototype.Cf=function(b,h){var c=-1;if(-1!=h){if(b!=this.Vf(h))throw a.g.xa();c=this.uq(h)}else c=this.Xs(b);var l=this.kQ(b);-1!=h&&this.Nn(h,l);this.Mn(l,h);this.Nn(l,c);-1!=c?this.Mn(c,l):this.Kn(b,l);-1==h&&this.Ln(b,l);this.gm(b,this.fa(b)+1);return l};b.prototype.aD=function(a,b,c,l){a=this.Cf(a,-1);for(var d=0,f=b,g=!1;f==c&&(g=!0),this.im(f,a),d++,f=this.Y(f),f!=b;);this.Hn(a,!0);this.hm(a,
d);g&&(b=c);this.Dh(a,b);this.Wi(a,this.Va(b));this.Ir(a,!1);null!=l&&(l[0]=g);return a};b.prototype.Br=function(a){var b=this.uq(a),c=this.cc(a),l=this.Vf(a);-1!=b?this.Mn(b,c):this.Kn(l,c);-1!=c?this.Nn(c,b):this.Ln(l,b);this.aL(a);this.gm(l,this.fa(l)-1);this.iC(a);return c};b.prototype.aL=function(a){var b=this.Db(a);if(-1!=b){for(var c=0,l=this.Ia(a);c<l;c++){var d=b,b=this.Y(b);this.cw(d)}b=this.Vf(a);this.Pk(b,this.G(b)-this.Ia(a))}this.hm(a,0)};b.prototype.cc=function(a){return this.Sc.P(a,
2)};b.prototype.uq=function(a){return this.Sc.P(a,1)};b.prototype.Ia=function(a){return this.Sc.P(a,3)};b.prototype.wc=function(a){return 0!=(this.Go(a)&1)};b.prototype.Hn=function(a,b){if(this.wc(a)!=b){if(0<this.Ia(a)){var c=this.Db(a),l=this.hk(a);b?(this.Tc(l,c),this.Uc(c,l)):(this.Tc(l,-1),this.Uc(c,-1));c=this.hb(l);this.Fh(c,null)}this.Hy(a,(this.Go(a)|1)-1|(b?1:0))}};b.prototype.Vf=function(a){return this.Sc.P(a,7)};b.prototype.UO=function(a){return 0!=(this.Go(a)&2)};b.prototype.Cy=function(a,
b){this.Hy(a,(this.Go(a)|2)-2|(b?2:0))};b.prototype.Fw=function(b){if(this.aP(b))return this.fi.get(this.at(b));var h=new a.zb,c=this.Db(b);if(-1==c)return 0;var l=new a.b;this.A(c,l);for(var d=0,f=0,g=this.Ia(b);f<g;f++,c=this.Y(c)){var k=this.dc(c);if(null==k){if(!this.Pc(c,h))continue;k=h}d+=k.jv(l.x,l.y)}this.Ir(b,!0);this.fi.set(this.at(b),d);return d};b.prototype.Pp=function(a,b,c){b=this.Kj[b];a=this.at(a);b.size<this.fi.size&&b.resize(this.fi.size,-1);b.write(a,c)};b.prototype.Ei=function(a,
b){var c=this.at(a),l=this.Kj[b];return c<l.size?l.read(c):-1};b.prototype.Tv=function(){null==this.Kj&&(this.Kj=[]);for(var b=0;b<this.Kj.length;b++)if(null==this.Kj[b])return this.Kj[b]=a.Bc.Dg(0),b;this.Kj.push(a.Bc.Dg(0));return this.Kj.length-1};b.prototype.sy=function(a){this.Kj[a]=null};b.prototype.aQ=function(b,h,c){if(-1==c)throw a.g.O();if(h!=c){var l=this.cc(c),d=this.uq(c),f=this.Vf(c);-1==d?this.Kn(f,l):this.Mn(d,l);-1==l?this.Ln(f,d):this.Nn(l,d);this.Pk(f,this.G(f)-this.Ia(c));this.gm(f,
this.fa(f)-1);d=-1==h?this.Xs(b):this.uq(h);this.Nn(c,d);this.Mn(c,h);-1==h?this.Ln(b,c):this.Nn(h,c);-1==d?this.Kn(b,c):this.Mn(d,c);this.Pk(b,this.G(b)+this.Ia(c));this.gm(b,this.fa(b)+1);this.Gu(c,b)}};b.prototype.zi=function(a,b){this.xb.Td(this.hb(b),this.Eo());this.vl(a,-1,this.Eo())};b.prototype.vf=function(b,h){var c=this.sd(b),l=this.Va(b),d=this.Y(b);-1!=l&&this.Tc(l,d);var f=this.Ia(c);b==this.Db(c)&&this.Dh(c,1<f?d:-1);-1!=d&&this.Uc(d,l);b==this.hk(c)&&this.Wi(c,1<f?l:-1);if(-1!=l&&-1!=
d){var l=this.hb(l),g=this.hb(d);if(h){var k=this.Fi(l);null!=k&&(l=new a.b,this.xb.A(g,l),k.wd(l))}else g=this.hb(b),k=this.Fi(g),this.Fh(l,k),null!=k&&(l=this.xb.Ga(l),k.fd(l))}this.hm(c,f-1);c=this.Vf(c);this.Pk(c,this.G(c)-1);this.cw(b);return d};b.prototype.Db=function(a){return this.Sc.P(a,4)};b.prototype.hk=function(a){return this.Sc.P(a,5)};b.prototype.Y=function(a){return this.dd.P(a,2)};b.prototype.Va=function(a){return this.dd.P(a,1)};b.prototype.sd=function(a){return this.dd.P(a,3)};b.prototype.Vb=
function(a,b){return this.vl(a,-1,b)};b.prototype.Ep=function(b){if(void 0===b)return this.Ep(!1);if(b instanceof c)return new c(b);for(var h=-1,l=-1,d=-1,f=-1,g=0,k=!1,h=this.ad;-1!=h;h=this.we(h))if(!b||a.U.Lc(this.Mb(h))){for(l=this.Wb(h);-1!=l;l=this.cc(l))if(f=d=this.Db(l),g=0,-1!=d){k=!0;break}if(k)break}return c.TL(this,h,l,d,f,g,b)};b.prototype.Pe=function(a){this.Hk.Pe(a);if(null!=this.He)for(var b=0,c=this.He.length;b<c;b++)null!=this.He[b]&&this.He[b].Pe(a)};b.prototype.Rp=function(a,b,
c,l){l?this.CS(a,b,c):this.BS(a,b,c)};b.prototype.Uc=function(a,b){this.dd.N(a,1,b)};b.prototype.Tc=function(a,b){this.dd.N(a,2,b)};b.prototype.im=function(a,b){this.dd.N(a,3,b)};b.prototype.hm=function(a,b){this.Sc.N(a,3,b)};b.prototype.Dh=function(a,b){this.Sc.N(a,4,b)};b.prototype.Wi=function(a,b){this.Sc.N(a,5,b)};b.prototype.gm=function(a,b){this.Nc.N(a,6,b)};b.prototype.Pk=function(a,b){this.Nc.N(a,5,b)};b.prototype.lF=function(a){var b=a;do{var c=this.Y(b);this.Tc(b,this.Va(b));this.Uc(b,c);
b=c}while(b!=a)};b.prototype.ZF=function(a){this.qd=a};b.prototype.xu=function(a){var b=this.uq(a),c=this.cc(a),l=this.Vf(a);-1!=b?this.Mn(b,c):this.Kn(l,c);-1!=c?this.Nn(c,b):this.Ln(l,b);this.Dh(a,-1);this.Wi(a,-1);this.iC(a)};b.prototype.Ui=function(b,h){var c=this.Va(b),l=this.Y(b);-1!=c&&this.Tc(c,l);-1!=l&&this.Uc(l,c);if(-1!=c&&-1!=l)if(c=this.hb(c),l=this.hb(l),h){var d=this.Fi(c);if(null!=d){var f=new a.b;this.xb.A(l,f);d.wd(f)}}else l=this.hb(b),d=this.Fi(l),this.Fh(c,d),null!=d&&(f=new a.b,
this.xb.A(c,f),d.fd(f));this.cw(b)};b.prototype.aP=function(a){return 0!=(this.Go(a)&4)};b.prototype.Ir=function(a,b){this.Hy(a,(this.Go(a)|4)-4|(b?4:0))};b.prototype.Lu=function(a,b){var c=this.dd.f;this.xb.lc();var l=this.xb.Ca[0].f;a.yd(0,b,function(a,b){var e=c[5*a],h=c[5*b],d=l[2*e],e=l[2*e+1],f=l[2*h],h=l[2*h+1];return e<h?-1:e>h?1:d<f?-1:d>f?1:0})};b.prototype.oO=function(){for(var b=this.ad;-1!=b;b=this.we(b))if(!a.U.Lc(this.Mb(b)))return!0;return!1};b.prototype.Uy=function(a,b){for(var c=
this.Wb(a),l=this.Wb(b),d=this.Xs(a),f=this.Xs(b),g=this.Wb(a);-1!=g;g=this.cc(g))this.Gu(g,b);for(g=this.Wb(b);-1!=g;g=this.cc(g))this.Gu(g,a);this.Kn(a,l);this.Kn(b,c);this.Ln(a,f);this.Ln(b,d);c=this.G(a);l=this.fa(a);d=this.fa(b);this.Pk(a,this.G(b));this.Pk(b,c);this.gm(a,d);this.gm(b,l);c=this.Nc.P(a,2);this.Nc.N(a,2,this.Nc.P(b,2));this.Nc.N(b,2,c)};return b}();a.gd=b})(A||(A={}));(function(a){var b=function(b){function c(e,h,l,d){b.call(this);this.S=new a.i;void 0===e?this.MB():"number"===
typeof e?this.zL(e,h,l,d):e instanceof a.Wa?void 0!==h?this.Js(e,h,l):this.AL(e):e instanceof a.qa?void 0!==h?this.CL(e,h):this.BL(e):e instanceof a.i?this.yL(e):this.MB()}H(c,b);c.prototype.Js=function(b,h,c){this.description=a.Pd.Tf();this.S.Ka();b.u()||this.rv(b,h,c)};c.prototype.yL=function(b){this.description=a.Pd.Tf();this.S.L(b);this.S.normalize()};c.prototype.BL=function(b){if(null==b)throw a.g.O();this.description=b;this.S.Ka()};c.prototype.CL=function(b,h){if(null==b)throw a.g.O();this.description=
b;this.S.L(h);this.S.normalize()};c.prototype.MB=function(){this.description=a.Pd.Tf();this.S.Ka()};c.prototype.AL=function(b){this.description=a.Pd.Tf();this.S.Ka();b.u()||this.rv(b)};c.prototype.zL=function(b,h,c,l){this.description=a.Pd.Tf();this.L(b,h,c,l)};c.prototype.L=function(a,b,c,l){this.rc();if("number"===typeof a)this.S.L(a,b,c,l);else{this.Ka();b=0;for(c=a.length;b<c;b++)this.Eb(a[b])}};c.prototype.Bu=function(b){this.rc();if(!b.cP())throw a.g.O();this.S.L(b)};c.prototype.Ka=function(){this.rc();
this.S.Ka()};c.prototype.u=function(){return this.S.u()};c.prototype.ba=function(){return this.S.ba()};c.prototype.ca=function(){return this.S.ca()};c.prototype.kw=function(){return this.S.kw()};c.prototype.Us=function(){return this.S.Us()};c.prototype.oq=function(){return this.S.Af()};c.prototype.Eb=function(b){if(b instanceof a.b)this.rc(),this.S.Eb(b);else if(b instanceof a.i)this.rc(),this.S.Eb(b);else if(b instanceof a.Wa){if(this.rc(),!b.tc()){var h=b.description;this.description!=h&&this.Ik(h);
if(this.u())this.rv(b);else{this.S.Eb(b.A());for(var n=1,d=h.Ba;n<d;n++)for(var f=h.Gd(n),g=a.qa.Xa(f),k=0;k<g;k++){var m=b.md(f,k),q=this.Ah(f,k);q.Eb(m);setInterval(f,k,q)}}}}else if(b instanceof c&&!b.u()){h=b.description;h!=this.description&&this.Ik(h);this.S.Eb(b.S);n=1;for(d=h.Ba;n<d;n++){f=h.Id(n);g=a.qa.Xa(f);for(k=0;k<g;k++)m=b.Ah(f,k),q=this.Ah(f,k),q.Eb(m),setInterval(f,k,q)}}};c.prototype.rv=function(b,h,c){if(void 0!==h){this.S.L(b.A(),h,c);h=b.description;c=1;for(var l=h.Ba;c<l;c++)for(var d=
h.Gd(c),f=a.qa.Xa(d),g=0;g<f;g++){var k=b.md(d,g);this.setInterval(d,g,k,k)}}else{this.S.L(b.ga[0],b.ga[1]);h=b.description;c=1;for(l=h.Ba;c<l;c++){d=h.Gd(c);f=a.qa.Xa(d);for(g=0;g<f;g++)k=b.md(d,g),this.setInterval(d,g,k,k)}}};c.prototype.setInterval=function(b,h,c,l){var d=null;"number"===typeof c?d=new a.Od(c,l):d=c;this.rc();if(0==b)if(0==h)this.S.w=d.ra,this.S.C=d.wa;else if(1==h)this.S.D=d.ra,this.S.H=d.wa;else throw a.g.Vc();else this.DA(0,b,h,d.ra),this.DA(1,b,h,d.wa)};c.prototype.R=function(a,
b){this.rc();this.S.R(a,b)};c.prototype.Pe=function(b){if(b instanceof a.Bg)this.rc(),b.Zy(this.S);else if(this.rc(),!this.S.u()){var h=new a.fH;this.Dn(h);h.TO()?h.Ka():b.Zy(h)}};c.prototype.copyTo=function(b){if(b.F()!=this.F())throw a.g.O();b.rc();b.description=this.description;b.S.L(this.S);b.ga=null;if(null!=this.ga){b.ms();for(var h=0;h<2*(this.description.me.length-2);h++)b.ga[h]=this.ga[h]}};c.prototype.Qa=function(){return new c(this.description)};c.prototype.Mh=function(){return this.S.qN()};
c.prototype.ac=function(){return this.S.CC()};c.prototype.F=function(){return a.j.Envelope};c.prototype.gb=function(){return 2};c.prototype.Dp=function(a){this.copyTo(a)};c.prototype.s=function(a){a.w=this.S.w;a.D=this.S.D;a.C=this.S.C;a.H=this.S.H};c.prototype.Dn=function(a){a.w=this.S.w;a.D=this.S.D;a.C=this.S.C;a.H=this.S.H;a.L(this.S.w,this.S.D,this.zd(0,1,0),this.S.C,this.S.H,this.zd(1,1,0))};c.prototype.Ah=function(b,h){var c=new a.Od;c.L(this.zd(0,b,h),this.zd(1,b,h));return c};c.prototype.uf=
function(b,h){h.Qf(this.description);var c=this.description.Ba-1;switch(b){case 0:for(var l=0;l<c;l++)for(var d=this.description.Id(l),f=a.qa.Xa(d),g=0;g<f;g++)h.setAttribute(d,g,this.zd(0,d,g));h.jc(this.S.w,this.S.D);break;case 1:for(l=0;l<c;l++){d=this.description.Id(l);f=a.qa.Xa(d);for(g=0;g<f;g++)h.setAttribute(d,g,this.zd(1,d,g))}h.jc(this.S.w,this.S.H);break;case 2:for(l=0;l<c;l++){d=this.description.Id(l);f=a.qa.Xa(d);for(g=0;g<f;g++)h.setAttribute(d,g,this.zd(0,d,g))}h.jc(this.S.C,this.S.H);
break;case 3:for(l=0;l<c;l++){d=this.description.Id(l);f=a.qa.Xa(d);for(g=0;g<f;g++)h.setAttribute(d,g,this.zd(1,d,g))}h.jc(this.S.C,this.S.D);break;default:throw a.g.Vc();}};c.prototype.uu=function(a,b){var c=this.S.uu(a);b.na(c.x,c.y)};c.prototype.yN=function(a,b){return b*(a.sp-2)};c.prototype.mC=function(b,h,c){if(this.S.u())throw a.g.sa("empty geometry");if(0==h)return 0!=b?0!=c?this.S.H:this.S.C:0!=c?this.S.D:this.S.w;if(c>=a.qa.Xa(h))throw a.g.O();var l=this.description.zf(h);this.ms();return 0<=
l?this.ga[this.yN(this.description,b)+this.description.WN(l)-2+c]:a.qa.ue(h)};c.prototype.ms=function(){this.rc();if(null==this.ga&&2<this.description.me.length){this.ga=[];for(var b=c.W(this.description,0),h=c.W(this.description,1),n=0,d=1,f=this.description.Ba;d<f;d++)for(var g=this.description.Id(d),k=a.qa.Xa(g),g=a.qa.ue(g),m=0;m<k;m++)this.ga[b+n]=g,this.ga[h+n]=g,n++}};c.prototype.om=function(b){if(null!=this.ga)if(2<b.me.length){for(var h=a.Pd.hu(b,this.description),n=[],d=c.W(this.description,
0),f=c.W(this.description,1),g=c.W(b,0),k=c.W(b,1),m=0,q=1,r=b.Ba;q<r;q++){var s=b.Id(q),t=a.qa.Xa(s);if(-1==h[q])for(var C=a.qa.ue(s),s=0;s<t;s++)n[g+m]=C,n[k+m]=C,m++;else{C=this.description.fj(h[q])-2;for(s=0;s<t;s++)n[g+m]=this.ga[d+C],n[k+m]=this.ga[f+C],m++,C++}}this.ga=n}else this.ga=null;this.description=b};c.prototype.zd=function(b,h,n){if(this.S.u())throw a.g.sa("This operation was performed on an Empty Geometry.");if(0==h)return 0!=b?0!=n?this.S.H:this.S.C:0!=n?this.S.D:this.S.w;if(n>=
a.qa.Xa(h))throw a.g.Vc();var d=this.description.zf(h);return 0<=d?(this.ms(),this.ga[c.W(this.description,b)+this.description.fj(d)-2+n]):a.qa.ue(h)};c.prototype.DA=function(b,h,n,d){this.rc();if(0==h)0!=b?0!=n?this.S.H=d:this.S.C=d:0!=n?this.S.D=d:this.S.w=d;else{if(n>=a.qa.Xa(h))throw a.g.Vc();if(!this.hasAttribute(h)){if(a.qa.nD(h,d))return;this.Oe(h)}h=this.description.zf(h);this.ms();this.ga[c.W(this.description,b)+this.description.fj(h)-2+n]=d}};c.W=function(a,b){return b*(a.me.length-2)};
c.prototype.Ha=function(b){this.rc();var h=new a.i;b.s(h);return this.S.Ha(h)};c.prototype.kc=function(b){return b instanceof a.i?this.S.kc(b):this.S.kc(b.S)};c.prototype.offset=function(a,b){this.rc();this.S.offset(a,b)};c.prototype.normalize=function(){this.rc();this.S.normalize()};c.prototype.Af=function(b){if(void 0!==b)if(b.Qf(this.description),this.u())b.Ka();else{for(var h=this.description.Ba,c=1;c<h;c++)for(var l=this.description.Id(c),d=a.qa.Xa(l),f=0;f<d;f++){var g=0.5*(this.mC(0,l,f)+this.mC(1,
l,f));b.setAttribute(l,f,g)}b.jc(this.S.Af())}else{b=new a.Wa(this.description);if(this.u())return b;h=this.description.Ba;for(c=1;c<h;c++){l=this.description.Gd(c);d=a.qa.Xa(l);for(f=0;f<d;f++)g=0.5*(this.zd(0,l,f)+this.zd(1,l,f)),b.setAttribute(l,f,g)}b.jc(this.S.kw(),this.S.Us());return b}};c.prototype.xw=function(){return new a.Wa(this.S.xw())};c.prototype.contains=function(b){return b instanceof a.Wa?b.u()?!1:this.S.contains(b.lk(),b.mk()):this.S.contains(b.S)};c.prototype.mc=function(a){if(a==
this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.u())return a.u()?!0:!1;if(!this.S.mc(a.S))return!1;for(var b=0,n=2*(this.description.me.length-2);b<n;b++)if(this.ga[b]!=a.ga[b])return!1;return!0};c.prototype.ic=function(){var b=this.description.ic(),b=a.J.kg(b,this.S.ic());if(!this.u()&&null!=this.ga)for(var h=0,c=2*(this.description.me.length-2);h<c;h++)b=a.J.kg(b,this.ga[h]);return b};c.prototype.Rf=function(){return a.Hh.il(this,null)};c.prototype.toString=
function(){return this.u()?"Envelope: []":"Envelope: ["+this.S.w+", "+this.S.D+", "+this.S.C+", "+this.S.H+"]"};return c}(a.U);a.Wj=b})(A||(A={}));(function(a){var b=function(){function b(a,e,h,c){void 0===a?this.Ka():(this.w=a,this.D=e,this.C=h,this.H=c)}b.Pa=function(a,e,h,c){var d=new b;d.w=a;d.D=e;d.C=h;d.H=c;return d};b.prototype.L=function(c,e,h,n){"number"===typeof c?void 0!==h?(this.w=c,this.D=e,this.C=h,this.H=n,this.normalize()):(this.w=c,this.D=e,this.C=c,this.H=e):c instanceof a.b?void 0!==
e?(this.w=c.x-0.5*e,this.C=this.w+e,this.D=c.y-0.5*h,this.H=this.D+h,this.normalize()):(this.w=c.x,this.D=c.y,this.C=c.x,this.H=c.y):c instanceof b?this.L(c.w,c.D,c.C,c.H):c instanceof a.Od&&(c.u()||e.u()?this.Ka():(this.w=c.ra,this.C=c.wa,this.D=e.ra,this.H=e.wa))};b.prototype.HN=function(a,e){var h=new b;h.L(this.w,this.D,this.C,this.H);h.R(a,e);return h};b.prototype.Dy=function(a,b){if(void 0!==b)if(0==b)this.Ka();else{this.w=a[0].x;this.D=a[0].y;this.C=this.w;this.H=this.D;for(var h=1;h<b;h++){var c=
a[h];c.x<this.w?this.w=c.x:c.x>this.C&&(this.C=c.x);c.y<this.D?this.D=c.y:c.y>this.H&&(this.H=c.y)}}else if(null==a||0==a.length)this.Ka();else{c=a[0];this.L(c.x,c.y);for(h=1;h<a.length;h++)c=a[h],this.Pj(c.x,c.y)}};b.prototype.Ka=function(){this.H=this.C=this.D=this.w=NaN};b.prototype.u=function(){return isNaN(this.w)};b.prototype.Eb=function(c,e){"number"===typeof c?this.u()?(this.w=c,this.D=e,this.C=c,this.H=e):(this.w>c?this.w=c:this.C<c&&(this.C=c),this.D>e?this.D=e:this.H<e&&(this.H=e)):c instanceof
a.b?this.Eb(c.x,c.y):c instanceof a.fe?this.Eb(c.x,c.y):c instanceof b&&!c.u()&&(this.Eb(c.w,c.D),this.Eb(c.C,c.H))};b.prototype.Pj=function(a,b){this.w>a?this.w=a:this.C<a&&(this.C=a);this.D>b?this.D=b:this.H<b&&(this.H=b)};b.prototype.R=function(a,b){this.u()||(this.w-=a,this.C+=a,this.D-=b,this.H+=b,(this.w>this.C||this.D>this.H)&&this.Ka())};b.prototype.scale=function(a){0>a&&this.Ka();this.u()||(this.w*=a,this.C*=a,this.D*=a,this.H*=a)};b.prototype.kc=function(a){return!this.u()&&!a.u()&&(this.w<=
a.w?this.C>=a.w:a.C>=this.w)&&(this.D<=a.D?this.H>=a.D:a.H>=this.D)};b.prototype.rD=function(a){return(this.w<=a.w?this.C>=a.w:a.C>=this.w)&&(this.D<=a.D?this.H>=a.D:a.H>=this.D)};b.prototype.Ha=function(a){if(this.u()||a.u())return!1;a.w>this.w&&(this.w=a.w);a.C<this.C&&(this.C=a.C);a.D>this.D&&(this.D=a.D);a.H<this.H&&(this.H=a.H);(a=this.w<=this.C&&this.D<=this.H)||this.Ka();return a};b.prototype.uu=function(b){switch(b){case 0:return a.b.Pa(this.w,this.D);case 1:return a.b.Pa(this.w,this.H);case 2:return a.b.Pa(this.C,
this.H);case 3:return a.b.Pa(this.C,this.D);default:throw a.g.Vc();}};b.prototype.gy=function(b){if(null==b||4>b.length)throw a.g.O();null!=b[0]?b[0].na(this.w,this.D):b[0]=a.b.Pa(this.w,this.D);null!=b[1]?b[1].na(this.w,this.H):b[1]=a.b.Pa(this.w,this.H);null!=b[2]?b[2].na(this.C,this.H):b[2]=a.b.Pa(this.C,this.H);null!=b[3]?b[3].na(this.C,this.D):b[3]=a.b.Pa(this.C,this.D)};b.prototype.qN=function(){return this.u()?0:this.ba()*this.ca()};b.prototype.CC=function(){return this.u()?0:2*(this.ba()+
this.ca())};b.prototype.kw=function(){return(this.C+this.w)/2};b.prototype.Us=function(){return(this.H+this.D)/2};b.prototype.ba=function(){return this.C-this.w};b.prototype.ca=function(){return this.H-this.D};b.prototype.move=function(a,b){this.u()||(this.w+=a,this.D+=b,this.C+=a,this.H+=b)};b.prototype.offset=function(a,b){this.w+=a;this.C+=a;this.D+=b;this.H+=b};b.prototype.normalize=function(){if(!this.u()){var a=Math.min(this.w,this.C),b=Math.max(this.w,this.C);this.w=a;this.C=b;a=Math.min(this.D,
this.H);b=Math.max(this.D,this.H);this.D=a;this.H=b}};b.prototype.Yl=function(a){a.na(this.w,this.D)};b.prototype.YE=function(a){a.na(this.C,this.D)};b.prototype.aF=function(a){a.na(this.w,this.H)};b.prototype.Zl=function(a){a.na(this.C,this.H)};b.prototype.cP=function(){return this.u()||this.w<=this.C&&this.D<=this.H};b.prototype.Af=function(){return a.b.Pa((this.C+this.w)/2,(this.H+this.D)/2)};b.prototype.xw=function(){return a.b.Pa(this.w,this.D)};b.prototype.contains=function(c,e){if(void 0!==
e)return c>=this.w&&c<=this.C&&e>=this.D&&e<=this.H;if(c instanceof a.Wa)return this.contains(c.lk(),c.mk());if(c instanceof a.b)return this.contains(c.x,c.y);if(c instanceof b)return c.w>=this.w&&c.C<=this.C&&c.D>=this.D&&c.H<=this.H;throw a.g.O();};b.prototype.jl=function(c,e){if(void 0!==e)return c>this.w&&c<this.C&&e>this.D&&e<this.H;if(c instanceof a.b)return this.jl(c.x,c.y);if(c instanceof b)return c.w>this.w&&c.C<this.C&&c.D>this.D&&c.H<this.H;throw a.g.O();};b.prototype.mc=function(a){return a==
this?!0:a instanceof b?this.u()&&a.u()?!0:this.w!=a.w||this.D!=a.D||this.C!=a.C||this.H!=a.H?!1:!0:!1};b.prototype.ic=function(){var b=this.w,b=a.J.truncate(b^b>>>32),e=a.J.kg(b),b=this.C,b=a.J.truncate(b^b>>>32),e=a.J.kg(b,e),b=this.D,b=a.J.truncate(b^b>>>32),e=a.J.kg(b,e),b=this.H,b=a.J.truncate(b^b>>>32);return a.J.kg(b,e)};b.prototype.uv=function(b){var e=new a.b;e.K(b);if(e.ov())return e;if(this.u())return e.FA(),e;e.x<this.w?e.x=this.w:e.x>this.C&&(e.x=this.C);e.y<this.D?e.y=this.D:e.y>this.H&&
(e.y=this.H);if(!e.mc(b))return e;b=this.Af();(e.x<b.x?e.x-this.w:this.C-e.x)<(e.y<b.y?e.y-this.D:this.H-e.y)?e.x=e.x<b.x?this.w:this.C:e.y=e.y<b.y?this.D:this.H;return e};b.prototype.ls=function(a){if(this.u())return NaN;if(a.x==this.w)return a.y-this.D;var b=this.H-this.D,h=this.C-this.w;return a.y==this.H?b+a.x-this.w:a.x==this.C?b+h+this.H-a.y:a.y==this.D?2*b+h+this.C-a.x:this.ls(this.uv(a))};b.prototype.vA=function(a){if(this.u())return-1;a=this.ls(a);var b=this.H-this.D,h=this.C-this.w;return a<
b?0:(a-=b)<h?1:a-h<b?2:3};b.prototype.kv=function(){return this.u()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.w)+Math.abs(this.C)+Math.abs(this.D)+Math.abs(this.H)+1)};b.prototype.Mv=function(a,e){var h=this.ej(a),c=this.ej(e);if(0!=(h&c))return 0;if(0==(h|c))return 4;var d=(0!=h?1:0)|(0!=c?2:0);do{var f=e.x-a.x,g=e.y-a.y;f>g?0!=(h&b.Dc)?(0!=(h&b.pb)?(a.y+=g*(this.w-a.x)/f,a.x=this.w):(a.y+=g*(this.C-a.x)/f,a.x=this.C),h=this.ej(a)):0!=(c&b.Dc)?(0!=(c&b.pb)?(e.y+=g*(this.w-e.x)/f,
e.x=this.w):(e.y+=g*(this.C-e.x)/f,e.x=this.C),c=this.ej(e)):0!=h?(0!=(h&b.bc)?(a.x+=f*(this.D-a.y)/g,a.y=this.D):(a.x+=f*(this.H-a.y)/g,a.y=this.H),h=this.ej(a)):(0!=(c&b.bc)?(e.x+=f*(this.D-e.y)/g,e.y=this.D):(e.x+=f*(this.H-e.y)/g,e.y=this.H),c=this.ej(e)):0!=(h&b.Cd)?(0!=(h&b.bc)?(a.x+=f*(this.D-a.y)/g,a.y=this.D):(a.x+=f*(this.H-a.y)/g,a.y=this.H),h=this.ej(a)):0!=(c&b.Cd)?(0!=(c&b.bc)?(e.x+=f*(this.D-e.y)/g,e.y=this.D):(e.x+=f*(this.H-e.y)/g,e.y=this.H),c=this.ej(e)):0!=h?(0!=(h&b.pb)?(a.y+=
g*(this.w-a.x)/f,a.x=this.w):(a.y+=g*(this.C-a.x)/f,a.x=this.C),h=this.ej(a)):(0!=(c&b.pb)?(e.y+=g*(this.w-e.x)/f,e.x=this.w):(e.y+=g*(this.C-e.x)/f,e.x=this.C),c=this.ej(e));if(0!=(h&c))return 0}while(0!=(h|c));return d};b.prototype.ej=function(a){return(a.x<this.w?1:0)|(a.x>this.C?1:0)<<1|(a.y<this.D?1:0)<<2|(a.y>this.H?1:0)<<3};b.prototype.mg=function(a){return!this.u()&&(this.ba()<=a||this.ca()<=a)};b.prototype.Gb=function(b){return b instanceof a.b?Math.sqrt(this.gG(b)):Math.sqrt(this.Nu(b))};
b.prototype.Nu=function(a){var b=0,h=0,c;c=this.w-a.C;c>b&&(b=c);c=this.D-a.H;c>h&&(h=c);c=a.w-this.C;c>b&&(b=c);c=a.D-this.H;c>h&&(h=c);return b*b+h*h};b.prototype.gG=function(a){var b=0,h=0,c;c=this.w-a.x;c>b&&(b=c);c=this.D-a.y;c>h&&(h=c);c=a.x-this.C;c>b&&(b=c);c=a.y-this.H;c>h&&(h=c);return b*b+h*h};b.prototype.vu=function(a){this.u()?a.Ka():a.L(this.w,this.C)};b.pb=1;b.bc=4;b.Dc=3;b.Cd=12;return b}();a.i=b})(A||(A={}));(function(a){var b;(function(a){a[a.initialize=0]="initialize";a[a.initializeRed=
1]="initializeRed";a[a.initializeBlue=2]="initializeBlue";a[a.initializeRedBlue=3]="initializeRedBlue";a[a.sweep=4]="sweep";a[a.sweepBruteForce=5]="sweepBruteForce";a[a.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";a[a.sweepRedBlue=7]="sweepRedBlue";a[a.sweepRed=8]="sweepRed";a[a.sweepBlue=9]="sweepBlue";a[a.iterate=10]="iterate";a[a.iterateRed=11]="iterateRed";a[a.iterateBlue=12]="iterateBlue";a[a.iterateBruteForce=13]="iterateBruteForce";a[a.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce";
a[a.resetRed=15]="resetRed";a[a.resetBlue=16]="resetBlue"})(b||(b={}));var c=function(){function a(b,h){this.th=b;this.KD=h}a.prototype.Xp=function(a,b,c){this.th.AS(c,a,b,this.KD)};a.prototype.Ko=function(a){return this.th.nq(a,this.KD)};return a}();b=function(){function b(){this.Ut=this.dn=this.We=this.bd=null;this.cp=new a.i;this.Al=this.Mi=this.Ni=this.pd=this.rf=this.vd=this.Mt=this.Xm=this.$c=this.wb=null;this.Ib=-1;this.la=0;this.Sj()}b.prototype.Tp=function(){this.Sj();this.zt=!0;null==this.wb?
(this.Xm=new a.ha(0),this.wb=[]):(this.Xm.df(0),this.wb.length=0)};b.prototype.Xc=function(b,h){if(!this.zt)throw a.g.ya();var c=new a.i;c.L(h);this.Xm.add(b);this.wb.push(c)};b.prototype.vo=function(){if(!this.zt)throw a.g.ya();this.zt=!1;null!=this.wb&&0<this.wb.length&&(this.Ib=0,this.Fc=!1)};b.prototype.jG=function(){this.Sj();this.yt=!0;null==this.wb?(this.Xm=new a.ha(0),this.wb=[]):(this.Xm.df(0),this.wb.length=0)};b.prototype.OA=function(b,h){if(!this.yt)throw a.g.ya();var c=new a.i;c.L(h);
this.Xm.add(b);this.wb.push(c)};b.prototype.$B=function(){if(!this.yt)throw a.g.ya();this.yt=!1;null!=this.wb&&0<this.wb.length&&null!=this.$c&&0<this.$c.length&&(-1==this.Ib?this.Ib=3:2==this.Ib?this.Ib=3:3!=this.Ib&&(this.Ib=1),this.Fc=!1)};b.prototype.iG=function(){this.Sj();this.xt=!0;null==this.$c?(this.Mt=new a.ha(0),this.$c=[]):(this.Mt.df(0),this.$c.length=0)};b.prototype.LA=function(b,h){if(!this.xt)throw a.g.ya();var c=new a.i;c.L(h);this.Mt.add(b);this.$c.push(c)};b.prototype.ZB=function(){if(!this.xt)throw a.g.ya();
this.xt=!1;null!=this.wb&&0<this.wb.length&&null!=this.$c&&0<this.$c.length&&(-1==this.Ib?this.Ib=3:1==this.Ib?this.Ib=3:3!=this.Ib&&(this.Ib=2),this.Fc=!1)};b.prototype.next=function(){if(this.Fc)return!1;for(var b=!0;b;)switch(this.Ib){case 0:b=this.Pw();break;case 1:b=this.xO();break;case 2:b=this.uO();break;case 3:b=this.wO();break;case 4:b=this.KS();break;case 5:b=this.GS();break;case 6:b=this.HS();break;case 7:b=this.IS();break;case 8:b=this.Pu();break;case 9:b=this.Vy();break;case 10:b=this.Zw();
break;case 11:b=this.hP();break;case 12:b=this.eP();break;case 13:b=this.fP();break;case 14:b=this.gP();break;case 15:b=this.hF();break;case 16:b=this.gF();break;default:throw a.g.xa();}return this.Fc?!1:!0};b.prototype.YF=function(a){this.la=a};b.prototype.Ew=function(a){return this.wb[a]};b.prototype.iw=function(a){return this.$c[a]};b.prototype.jk=function(a){return this.Xm.read(a)};b.prototype.fk=function(a){return this.Mt.read(a)};b.Bv=function(a){return 1==(a&1)};b.Yk=function(a){return 0==
(a&1)};b.prototype.Sj=function(){this.zt=this.xt=this.yt=!1;this.pf=this.qf=this.tg=this.be=-1;this.Fc=!0};b.prototype.Pw=function(){this.nf=this.Ff=-1;if(10>this.wb.length)return this.be=this.wb.length,this.Ib=5,!0;null==this.bd&&(this.bd=new a.$p(!0),this.dn=this.bd.Se(),this.vd=new a.ha(0));this.bd.Tp();for(var b=0;b<this.wb.length;b++){var h=this.wb[b];this.bd.eq(h.w,h.C)}this.bd.vo();this.vd.yb(2*this.wb.length);this.vd.resize(0);for(b=0;b<2*this.wb.length;b++)this.vd.add(b);this.Kr(this.vd,
2*this.wb.length,!0);this.be=2*this.wb.length;this.Ib=4;return!0};b.prototype.xO=function(){this.nf=this.Ff=-1;if(10>this.wb.length||10>this.$c.length)return this.be=this.wb.length,this.Ib=6,!0;null==this.bd&&(this.bd=new a.$p(!0),this.dn=this.bd.Se(),this.vd=new a.ha(0));this.bd.Tp();for(var b=0;b<this.wb.length;b++){var h=this.wb[b];this.bd.eq(h.w,h.C)}this.bd.vo();this.vd.yb(2*this.wb.length);this.vd.resize(0);for(b=0;b<2*this.wb.length;b++)this.vd.add(b);this.Kr(this.vd,this.vd.size,!0);this.be=
this.vd.size;-1!=this.qf&&(this.pd.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Ib=7;return this.gF()};b.prototype.uO=function(){this.nf=this.Ff=-1;if(10>this.wb.length||10>this.$c.length)return this.be=this.wb.length,this.Ib=6,!0;null==this.We&&(this.We=new a.$p(!0),this.Ut=this.We.Se(),this.rf=new a.ha(0));this.We.Tp();for(var b=0;b<this.$c.length;b++){var h=this.$c[b];this.We.eq(h.w,h.C)}this.We.vo();this.rf.yb(2*this.$c.length);this.rf.resize(0);for(b=0;b<2*this.$c.length;b++)this.rf.add(b);
this.Kr(this.rf,this.rf.size,!1);this.tg=this.rf.size;-1!=this.pf&&(this.pd.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Ib=7;return this.hF()};b.prototype.wO=function(){this.nf=this.Ff=-1;if(10>this.wb.length||10>this.$c.length)return this.be=this.wb.length,this.Ib=6,!0;null==this.bd&&(this.bd=new a.$p(!0),this.dn=this.bd.Se(),this.vd=new a.ha(0));null==this.We&&(this.We=new a.$p(!0),this.Ut=this.We.Se(),this.rf=new a.ha(0));this.bd.Tp();for(var b=0;b<this.wb.length;b++){var h=this.wb[b];this.bd.eq(h.w,
h.C)}this.bd.vo();this.We.Tp();for(b=0;b<this.$c.length;b++)h=this.$c[b],this.We.eq(h.w,h.C);this.We.vo();this.vd.yb(2*this.wb.length);this.rf.yb(2*this.$c.length);this.vd.resize(0);this.rf.resize(0);for(b=0;b<2*this.wb.length;b++)this.vd.add(b);for(b=0;b<2*this.$c.length;b++)this.rf.add(b);this.Kr(this.vd,this.vd.size,!0);this.Kr(this.rf,this.rf.size,!1);this.be=this.vd.size;this.tg=this.rf.size;-1!=this.qf&&(this.pd.Fg(this.qf),this.Ni.resize(0),this.qf=-1);-1!=this.pf&&(this.pd.Fg(this.pf),this.Mi.resize(0),
this.pf=-1);this.Ib=7;return!0};b.prototype.KS=function(){var a=this.vd.get(--this.be),h=a>>1;if(b.Yk(a))return this.bd.remove(h),0==this.be?(this.nf=this.Ff=-1,this.Fc=!0,!1):!0;this.dn.ty(this.wb[h].w,this.wb[h].C,this.la);this.Ff=h;this.Ib=10;return!0};b.prototype.GS=function(){if(-1==--this.be)return this.nf=this.Ff=-1,this.Fc=!0,!1;this.tg=this.Ff=this.be;this.Ib=13;return!0};b.prototype.HS=function(){if(-1==--this.be)return this.nf=this.Ff=-1,this.Fc=!0,!1;this.Ff=this.be;this.tg=this.$c.length;
this.Ib=14;return!0};b.prototype.IS=function(){var a=this.vd.get(this.be-1),h=this.rf.get(this.tg-1),c=this.nq(a,!0),d=this.nq(h,!1);return c>d?this.Pu():c<d?this.Vy():b.Bv(a)?this.Pu():b.Bv(h)?this.Vy():this.Pu()};b.prototype.Pu=function(){var e=this.vd.get(--this.be),h=e>>1;if(b.Yk(e))return-1!=this.qf&&-1!=this.Ni.get(h)?(this.pd.Kc(this.qf,this.Ni.get(h)),this.Ni.set(h,-1)):this.bd.remove(h),0==this.be?(this.nf=this.Ff=-1,this.Fc=!0,!1):!0;if(-1!=this.pf&&0<this.pd.tq(this.pf))for(e=this.pd.hc(this.pf);-1!=
e;){var c=this.pd.getData(e);this.We.lg(c);this.Mi.set(c,-1);c=this.pd.cb(e);this.pd.Kc(this.pf,e);e=c}0<this.We.size()?(this.Ut.ty(this.wb[h].w,this.wb[h].C,this.la),this.Ff=h,this.Ib=12):(-1==this.qf&&(null==this.pd&&(this.pd=new a.Zn),this.Ni=new a.ha(0),this.Ni.resize(this.wb.length,-1),this.Ni.dh(-1,0,this.wb.length),this.qf=this.pd.jh(1)),this.Ni.set(h,this.pd.addElement(this.qf,h)),this.Ib=7);return!0};b.prototype.Vy=function(){var e=this.rf.get(--this.tg),h=e>>1;if(b.Yk(e))return-1!=this.pf&&
-1!=this.Mi.get(h)?(this.pd.Kc(this.pf,this.Mi.get(h)),this.Mi.set(h,-1)):this.We.remove(h),0==this.tg?(this.nf=this.Ff=-1,this.Fc=!0,!1):!0;if(-1!=this.qf&&0<this.pd.tq(this.qf))for(e=this.pd.hc(this.qf);-1!=e;){var c=this.pd.getData(e);this.bd.lg(c);this.Ni.set(c,-1);c=this.pd.cb(e);this.pd.Kc(this.qf,e);e=c}0<this.bd.size()?(this.dn.ty(this.$c[h].w,this.$c[h].C,this.la),this.nf=h,this.Ib=11):(-1==this.pf&&(null==this.pd&&(this.pd=new a.Zn),this.Mi=new a.ha(0),this.Mi.resize(this.$c.length,-1),
this.Mi.dh(-1,0,this.$c.length),this.pf=this.pd.jh(0)),this.Mi.set(h,this.pd.addElement(this.pf,h)),this.Ib=7);return!0};b.prototype.Zw=function(){this.nf=this.dn.next();if(-1!=this.nf)return!1;var a=this.vd.get(this.be)>>1;this.bd.lg(a);this.Ib=4;return!0};b.prototype.hP=function(){this.Ff=this.dn.next();if(-1!=this.Ff)return!1;this.nf=this.Ff=-1;var a=this.rf.get(this.tg)>>1;this.We.lg(a);this.Ib=7;return!0};b.prototype.eP=function(){this.nf=this.Ut.next();if(-1!=this.nf)return!1;var a=this.vd.get(this.be)>>
1;this.bd.lg(a);this.Ib=7;return!0};b.prototype.fP=function(){if(-1==--this.tg)return this.Ib=5,!0;this.cp.L(this.wb[this.be]);var a=this.wb[this.tg];this.cp.R(this.la,this.la);return this.cp.kc(a)?(this.nf=this.tg,!1):!0};b.prototype.gP=function(){if(-1==--this.tg)return this.Ib=6,!0;this.cp.L(this.wb[this.be]);var a=this.$c[this.tg];this.cp.R(this.la,this.la);return this.cp.kc(a)?(this.nf=this.tg,!1):!0};b.prototype.hF=function(){if(null==this.bd)return this.Fc=!0,!1;this.be=this.vd.size;0<this.bd.size()&&
this.bd.reset();-1!=this.qf&&(this.pd.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Fc=!1;return!0};b.prototype.gF=function(){if(null==this.We)return this.Fc=!0,!1;this.tg=this.rf.size;0<this.We.size()&&this.We.reset();-1!=this.pf&&(this.pd.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Fc=!1;return!0};b.prototype.Kr=function(b,h,n){null==this.Al&&(this.Al=new a.Qr);n=new c(this,n);this.Al.sort(b,0,h,n)};b.prototype.AS=function(a,h,c,d){var f=this;a.yd(h,c,function(a,e){var h=f.nq(a,d),c=f.nq(e,
d);return h<c||h==c&&b.Yk(a)&&b.Bv(e)?-1:1})};b.prototype.nq=function(a,h){var c=0.5*this.la;if(h){var d=this.wb[a>>1];return b.Yk(a)?d.D-c:d.H+c}d=this.$c[a>>1];return b.Yk(a)?d.D-c:d.H+c};return b}();a.rz=b})(A||(A={}));(function(a){var b=function(){function b(){}b.Pa=function(a,e,h,c,d,f){var g=new b;g.w=a;g.D=e;g.Ke=h;g.C=c;g.H=d;g.ig=f;return g};b.prototype.Ka=function(){this.Ke=this.w=NaN};b.prototype.u=function(){return isNaN(this.w)};b.prototype.TO=function(){return isNaN(this.Ke)};b.prototype.L=
function(a,b,h,c,d,f){void 0!==c?"number"===typeof a?(this.w=a,this.D=b,this.Ke=h,this.C=c,this.H=d,this.ig=f):(this.w=a.x-0.5*b,this.C=this.w+b,this.D=a.y-0.5*h,this.H=this.D+h,this.Ke=a.z-0.5*c,this.ig=this.Ke+c):(this.w=a,this.D=b,this.Ke=h,this.C=a,this.H=b,this.ig=h)};b.prototype.move=function(a){this.w+=a.x;this.D+=a.y;this.Ke+=a.z;this.C+=a.x;this.H+=a.y;this.ig+=a.z};b.prototype.copyTo=function(a){a.w=this.w;a.D=this.D;a.C=this.C;a.H=this.H};b.prototype.Pj=function(a,b,h){this.w>a?this.w=
a:this.C<a&&(this.C=a);this.D>b?this.D=b:this.H<b&&(this.H=b);0==isNaN(this.Ke)?this.Ke>h?this.Ke=h:this.ig<h&&(this.ig=h):this.ig=this.Ke=h};b.prototype.Eb=function(c,e,h,n,d,f){if("number"===typeof c)n?(this.Eb(c,e,h),this.Eb(n,d,f)):this.u()?(this.w=c,this.D=e,this.Ke=h,this.C=c,this.H=e,this.ig=h):this.Pj(c,e,h);else if(c instanceof a.fe)this.Eb(c.x,c.y,c.z);else if(c instanceof b)c.u()||(this.Eb(c.w,c.D,c.Ke),this.Eb(c.C,c.H,c.ig));else throw a.g.O();};b.prototype.Pa=function(a,b,h){a.u()||b.u()?
this.Ka():(this.w=a.ra,this.C=a.wa,this.D=b.ra,this.H=b.wa,this.Ke=h.ra,this.ig=h.wa)};b.prototype.gy=function(b){if(null==b||8>b.length)throw a.g.O();b[0]=new a.fe(this.w,this.D,this.Ke);b[1]=new a.fe(this.w,this.H,this.Ke);b[2]=new a.fe(this.C,this.H,this.Ke);b[3]=new a.fe(this.C,this.D,this.Ke);b[4]=new a.fe(this.w,this.D,this.ig);b[5]=new a.fe(this.w,this.H,this.ig);b[6]=new a.fe(this.C,this.H,this.ig);b[7]=new a.fe(this.C,this.D,this.ig)};b.prototype.Dy=function(a){if(null==a||0==a.length)this.Ka();
else{var b=a[0];this.L(b.x,b.y,b.z);for(b=1;b<a.length;b++){var h=a[b];this.Pj(h.x,h.y,h.z)}}};return b}();a.fH=b})(A||(A={}));(function(a){(function(a){a.xa=function(){var a=Error();a.message="Internal Error";return a};a.qe=function(){var a=Error();a.message="Not Implemented";return a};a.cj=function(){var a=Error();a.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return a};a.ya=function(){var a=Error();a.message="Invalid Call";return a};
a.O=function(a){var b=Error();b.message="Illegal Argument Exception";void 0!==a&&(b.message+=": "+a);return b};a.AI=function(){var a=Error();a.message="Runtime Exception.";return a};a.sa=function(a){var b=Error();b.message="Geometry Exception: "+a;return b};a.PG=function(){var a=Error();a.message="Assert Failed Exception";return a};a.Vc=function(){var a=Error();a.message="IndexOutOfBoundsException";return a};a.$T=function(a){a.message="UserCancelException";return a}})(a.g||(a.g={}))})(A||(A={}));
(function(a){var b=function(){function b(){}b.NH=function(a,b){var h=Math.abs(a%b);return isNaN(h)||h==a||h<=Math.abs(b)/2?h:0>a?-1*(h-b):0<a?1*(h-b):0*(h-b)};b.I=function(a){return 0>a?-a:a};b.ob=function(a,e){return 0<=e?b.I(a):-b.I(a)};b.T=function(a,e){return a==e||b.I(a-e)<=b.bF*(1+(b.I(a)+b.I(e))/2)};b.Wc=function(a){return 0==a||b.I(a)<=b.bF};b.as=function(a){a=b.NH(a,b.ev);return b.I(a)<=b.$g?a:0>a?a+b.ev:a-b.ev};b.Yz=function(a,e){a.o=b.as(a.o);e.o=b.as(e.o);b.I(e.o)>b.Ur&&(a.o=b.as(a.o+
b.$g),e.o=b.ob(b.$g,e.o)-e.o)};b.gg=function(a,e){var h=Math.sqrt(1-e),h=(1-h)/(1+h),c=h*h;return a/(1+h)*(1+c*(0.25+c*(0.015625+1/256*c)))*b.Ur};b.oN=function(c,e,h,n,d){var f=0,g=0,k=0,m=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=w=x=0,A=0,B=0,K=0,D=u=0,E=0,G=0,H=E=0,I=0,M=0,f=new a.da,g=new a.da;if(null!=d)if(f.o=c,g.o=e,b.Yz(f,g),c=f.o,e=g.o,f.o=h,g.o=n,b.Yz(f,g),h=f.o,n=g.o,g=b.as(h-c),b.T(e,n)&&(b.Wc(g)||b.T(b.I(e),b.Ur)))null!=d&&(d.o=0);else{if(b.T(e,-n)){if(b.T(b.I(e),b.Ur)){null!=d&&(d.o=2*b.gg(6378137,
0.0066943799901413165));return}if(b.T(b.I(g),b.$g)){null!=d&&(d.o=2*b.gg(6378137,0.0066943799901413165));return}}if(b.Wc(0.0066943799901413165))y=Math.cos(e),A=Math.cos(n),null!=d&&(E=Math.sin((n-e)/2),f=Math.sin(g/2),E=2*Math.asin(Math.sqrt(E*E+y*A*f*f)),d.o=6378137*E);else{G=1-Math.sqrt(0.9933056200098587);f=1-G;k=Math.atan(f*Math.tan(e));m=Math.sin(k);k=Math.cos(k);q=Math.atan(f*Math.tan(n));r=Math.sin(q);q=Math.cos(q);t=s=g;I=0;M=1;H=g;for(e=!0;1==e;)I+=1,1==M&&(u=Math.sin(H),w=Math.cos(H),E=
q*u,x=k*r-m*q*w,x=Math.sqrt(E*E+x*x),w=m*r+k*q*w,E=Math.atan2(x,w),y=1E-15>b.I(x)?k*q*u/b.ob(1E-15,x):k*q*u/x,A=1-y*y,B=1E-15>b.I(A)?w-2*(m*r/b.ob(1E-15,A)):w-2*(m*r/A),K=B*B,u=((-3*A+4)*G+4)*A*G/16),D=(1-u)*G*(E+u*x*(B+w*u*(2*K-1))),1==M?(H=g+D*y,1E-14>b.I(H-t)?e=!1:b.I(H)>b.$g?(M=2,H=b.$g,0>g&&(H=-H),y=0,A=1,s=t=2,E=b.$g-b.I(Math.atan(m/k)+Math.atan(r/q)),x=Math.sin(E),w=Math.cos(E),u=((-3*A+4)*G+4)*A*G/16,1E-14>b.I(y-s)?e=!1:(B=1E-15>b.I(A)?w-2*(m*r/b.ob(1E-15,A)):w-2*(m*r/A),K=B*B)):(0>(H-t)*
(t-s)&&5<I&&(H=(2*H+3*t+s)/6),s=t,t=H)):(y=(H-g)/D,0>(y-t)*(t-s)&&5<I&&(y=(2*y+3*t+s)/6),s=t,t=y,A=1-y*y,u=y*x/(k*q),w=-Math.sqrt(b.I(1-u*u)),H=Math.atan2(u,w),E=q*u,x=k*r-m*q*w,x=Math.sqrt(E*E+x*x),w=m*r+k*q*w,E=Math.atan2(x,w),u=((-3*A+4)*G+4)*A*G/16,1E-14>b.I(y-s)?e=!1:(B=1E-15>b.I(A)?w-2*(m*r/b.ob(1E-15,A)):w-2*(m*r/A),K=B*B));null!=d&&(g=Math.sqrt(1+(1/(f*f)-1)*A),g=(g-1)/(g+1),m=g*(1-0.375*g*g),m=m*x*(B+m/4*(w*(-1+2*K)-m/6*B*(-3+4*x*x)*(-3+4*K))),f=6378137*((1+g*g/4)/(1-g)*f)*(E-m),d.o=f)}}};
b.$g=3.141592653589793;b.Ur=1.5707963267948966;b.ev=6.283185307179586;b.bF=3.552713678800501E-15;return b}();a.nH=b})(A||(A={}));(function(a){var b=function(){function b(a,e){this.Na=a;this.hE=e;this.kE=-1;this.rk=!1}b.prototype.next=function(){if(++this.kE==this.hE.G())return null;var b=this.hE.Ga(this.kE);b.scale(this.Na.Sb);var e=new a.La;this.Na.Hv(b,this.rk,e);return e};b.prototype.za=function(){return 0};return b}(),c=function(){function b(e,c,l){this.Na=e;this.Yt=c;this.Pm=!1;this.Vm=l;this.Lt=
[0];this.Aj=[0];this.Qi=[0];this.Rq=[0];this.rk=!1;this.Yo=new a.La;this.Cj=[]}b.prototype.next=function(){if(this.Pm){this.Pm=!1;this.cd.ja();var b=a.U.Zj(this.Yo);return a.Of.Rj(b,this.Na.hp,!0,!0,this.Na.Zb)}null==this.cd&&(this.cd=this.Yt.Da(),this.cd.lb(),null!=this.Vm&&this.Vm.ko());if(!this.cd.Ma()){if(!this.cd.lb())return null;null!=this.Vm&&this.Vm.ko()}b=null;this.Aj[0]=0;this.Ex=this.Lt[0]=0;this.uh=NaN;this.Pm=!1;for(var e=this.Cj.length=0,c=new a.b,d=new a.b,f=[0];this.cd.Ma()&&8>this.Ex;){var g=
this.cd.ja();c.K(g.Nb());d.K(g.pc());c.scale(this.Na.Sb);d.scale(this.Na.Sb);a.ui.Gs(c,d)?c.x=d.x:a.ui.Es(c,d)&&(d.x=c.x);this.Cj.length=0;a.ui.kC(this.Na.Hb,this.Na.Yb,this.Na.le,c,d,this.Na.Mx,this.Na.gr,f,this.Qi,this.Rq,this.Cj,this.Lt);null!=this.Vm&&(g=this.Cj.slice(0),this.Vm.dD(this.Vm.fa()-1,g,g.length-1));a.ui.Fs(c,d)?(this.Yo.Ka(),this.Na.Hv(c,this.rk,this.Yo),this.Pm=!0):(this.Yo.Ka(),this.Pm=this.Kv(f[0],this.Yo));if(this.Pm){this.cd.oi();if(this.cd.Nw()){this.cd.oi();this.cd.ja();break}this.cd.xR();
break}null==b&&(b=new a.La,b.ko());this.TA(b);e++}this.Lt[0]=0;if(0<e){for(f=this.cd.Kb();0<e;)this.cd.oi(),c.K(this.Yt.Ga(this.cd.Kb())),d.K(this.Yt.Ga(this.cd.Cm())),c.scale(this.Na.Sb),d.scale(this.Na.Sb),this.rk&&(a.ui.Gs(c,d)?c.x=d.x:a.ui.Es(c,d)&&(d.x=c.x)),this.Cj.length=0,a.ui.kC(this.Na.Hb,this.Na.Yb,this.Na.le,d,c,this.Na.Mx,this.Na.gr,null,this.Qi,this.Rq,this.Cj,this.Lt),this.TA(b),e--;c.K(this.Yt.Ga(this.cd.Kb()));c.scale(this.Na.Sb);l.iq(this.Na.Hb,this.Na.Yb,this.Na.Sb,this.Na.ib,c,
this.uh+1.570796326794897,this.uh+4.71238898038469,this.Na.Tm,this.rk,this.Aj,b,NaN,NaN);this.cd.Tb(f);this.cd.ja();e=a.Ja.Cg(null,b,!0);return a.Of.Rj(b,e,!0,!0,this.Na.Zb)}this.Pm=!1;this.cd.ja();b=a.U.Zj(this.Yo);return a.Of.Rj(b,this.Na.hp,!0,!0,this.Na.Zb)};b.prototype.TA=function(b){var e=this.Cj[0],c=NaN,d=this.Qi[0]-1.570796326794897,f=this.Rq[0]+1.570796326794897,g=!1;if(!isNaN(this.uh)){this.uh>=this.Qi[0]?(c=this.uh+1.570796326794897,d=c+3.141592653589793-(this.uh-this.Qi[0])):(c=this.uh+
1.570796326794897,d=c+3.141592653589793-(6.283185307179586-(this.Qi[0]-this.uh)));var g=this.uh>=this.Qi[0]&&3.141592653589793>=this.uh-this.Qi[0]?!1:this.uh<this.Qi[0]&&3.141592653589793<=this.Qi[0]-this.uh?!1:!0,k=!1;if(Math.abs(d-c)<=0.5*this.Na.Tm)if(g){var m=b.Ga(b.G()-2);m.scale(this.Na.Sb);var q=new a.da(0);a.Ab.fw(this.Na.Hb,this.Na.Yb,e.x,e.y,m.x,m.y,q);for(m=q.o;m<=c;)m+=6.283185307179586;for(;m>c;)m-=6.283185307179586;m<d&&(k=!0)}else k=!0;k?(b.eF(0,b.G()-1),this.rk||(e=new a.b,e.K(b.Ga(b.G()-
1)),e.scale(this.Na.Sb),-3.141592653589793>e.x-this.Aj[0]?this.Aj[0]-=6.283185307179586:3.141592653589793<e.x-this.Aj[0]&&(this.Aj[0]+=6.283185307179586)),g||(d=0.5*(d+c))):(g?(c=new a.b,c.K(e),c.scale(1/this.Na.Sb),b.lf(0,-1,c)):l.iq(this.Na.Hb,this.Na.Yb,this.Na.Sb,this.Na.ib,this.Cj[0],c,d,this.Na.Tm,this.rk,this.Aj,b,NaN,NaN),this.Ex+=1)}l.Gv(this.Na.Hb,this.Na.Yb,this.Na.Sb,this.Na.ib,this.Na.le,this.Cj,d,f,this.rk,this.Aj,b);this.uh=this.Rq[0]};b.prototype.Kv=function(a,b){return this.Na.Kv(this.Cj,
a,this.Qi[0],this.Rq[0],this.rk,b)};b.prototype.za=function(){return 0};return b}(),l=function(){function e(){}e.buffer=function(b,c,l,d,f,g){if(null==b)throw a.g.O("Geometry::Geodesic_bufferer::buffer");if(b.u())return new a.La(b.description);var k=new e;k.sg=c;k.xc=a.Za.Fm(c);var m=a.Za.et(k.xc);k.Zb=g;k.Hb=a.Za.Ss(k.xc);k.Yb=m*(2-m);k.Sb=k.xc.Te().Ej;k.la=k.sg.vq();k.hp=k.xc.vq();k.gr=k.hp*k.Sb;k.gp=1.570796326794897/k.Sb;k.qU=3.141592653589793/k.Sb;k.Tq=6.283185307179586/k.Sb;k.rU=k.Tq/6;k.Hx=
0;k.pU=1.5707963267948966*k.Hb/k.Hx;4==l?(k.le=2,k.Ft=!0):(k.le=l,k.Ft=!1);k.Ea=d;k.ib=Math.abs(d);isNaN(f)||0.001>f?k.rS():k.Sm=f;l=b.F();a.U.Mc(l)?(l=new a.Ya(b.description),l.Cc(b,!0),b=l,l=a.j.Polyline):l==a.j.Envelope&&(l=new a.i,b.s(l),l.ba()<=k.la||l.ca()<=k.la?(l=new a.Ya(b.description),l.Xc(b,!1),b=l,l=a.j.Polyline):(l=new a.La(b.description),l.Xc(b,!1),b=l,l=a.j.Polygon));k.sS();a.U.Lm(l)||k.tS();if(k.ib<=0.5*k.Sm)return l!=a.j.Polygon?new a.La(b.description):k.Ft?b:a.ui.mq(b,k.sg,k.le,
k.Mx,-1,g);if(0>k.Ea&&l!=a.j.Polygon)return new a.La(b.description);k.Ft&&a.U.Lc(l)?(c=a.ui.mq(b,c,4,NaN,k.Sm,g),b=a.Za.Wl(c,k.sg,k.xc)):b=a.Za.Wl(b,k.sg,k.xc);b=a.gh.po(b,k.xc);if(b.u())return new a.La(b.description);!k.Ft&&a.U.Lc(l)&&(b=a.ui.IE(k.Sb,b));b=e.OS(b,k.xc);switch(l){case 1736:c=k.xK(b);break;case 1607:c=k.yK(b);break;case 550:c=k.vK(b);break;case 33:c=k.wK(b);break;default:throw a.g.sa("corrupted_geometry");}k=a.Za.Wl(c,k.xc,k.sg);k.Ik(b.description);return k};e.prototype.xK=function(b){var e=
new a.La;b=new c(this,b,e);b=a.wi.local().aa(b,this.xc,this.Zb).next();b=a.Vn.nl(b,this.xc,2);var l=new a.Bg;l.scale(1/this.Sb,1/this.Sb);e.Pe(l);e=a.Vn.nl(e,this.xc,2);return 0<=this.Ea?a.wi.local().aa(e,b,this.xc,this.Zb):a.Yr.local().aa(e,b,this.xc,this.Zb)};e.prototype.yK=function(b){b=new c(this,b,null);b=a.wi.local().aa(b,this.xc,this.Zb).next();return a.Vn.nl(b,this.xc,2)};e.prototype.vK=function(e){e=new b(this,e);e=a.wi.local().aa(e,this.xc,this.Zb).next();return a.Vn.nl(e,this.xc,2)};e.prototype.wK=
function(b){b=b.A();b.scale(this.Sb);var e=new a.La;this.Hv(b,!1,e);return a.Vn.nl(e,this.xc,2)};e.prototype.Kv=function(b,c,l,d,f,g){var k=b[0],m=b[b.length-1],q=k.y>m.y?k.y:m.y,r=a.v.q(this.Hb,this.Yb,k.y<m.y?k.y:m.y),q=a.v.q(this.Hb,this.Yb,q);if(0.001<this.Hx-(r+c+this.ib)&&0.001<this.Hx+(q-c-this.ib))return!1;c=l-1.570796326794897;l=d+1.570796326794897;var r=c-3.141592653589793,q=c+3.141592653589793,s=l+3.141592653589793,t=[NaN],C=[NaN],u=[NaN],w=[NaN];d=!1;e.wG(this.Hb,this.Yb,this.ib,k,c,r,
m,l,t,C);e.wG(this.Hb,this.Yb,this.ib,m,s,l,k,r,u,w);l<t[0]&&t[0]<s?d=!0:l<C[0]&&C[0]<s&&(d=!0);d||(r<u[0]&&u[0]<c?d=!0:r<w[0]&&w[0]<c&&(d=!0));if(!d&&f)return!1;for(var x=[],y=b.length-1;0<=y;y--)x.push(b[y]);g.Ka();g.ko();y=[0];e.Gv(this.Hb,this.Yb,this.Sb,this.ib,this.le,b,c,l,f,y,g);e.iq(this.Hb,this.Yb,this.Sb,this.ib,m,l,s,this.Tm,f,y,g,t[0],C[0]);e.Gv(this.Hb,this.Yb,this.Sb,this.ib,this.le,x,s,q,f,y,g);e.iq(this.Hb,this.Yb,this.Sb,this.ib,k,r,c,this.Tm,f,y,g,u[0],w[0]);b=!1;f||(b=this.zB(this.Sb,
g));return d||b};e.prototype.Hv=function(a,b,c){c.Ka();c.ko();e.iq(this.Hb,this.Yb,this.Sb,this.ib,a,-this.Tm,6.283185307179586,this.Tm,b,[0],c,NaN,NaN);b||this.zB(this.Sb,c)};e.prototype.zB=function(a,b){var e=this.WK(a,b),c=this.XK(a,b);return e||c};e.prototype.WK=function(b,e){var c=e.G(),l=!1,d=new a.i;e.s(d);if(!a.l.T(d.H*b,1.570796326794897)&&!a.l.T(d.D*b,-1.570796326794897))return!1;for(var f=new a.b,c=c-1;0<=c;c--)e.A(c,f),f.y==d.H&&a.l.T(f.y*b,1.570796326794897)?(l=!0,this.RE(f,c,e)):f.y==
d.D&&a.l.T(f.y*b,-1.570796326794897)&&(l=!0,this.RE(f,c,e));return l};e.prototype.XK=function(a,b){var e=b.Ga(0),c=b.Ga(b.G()-1);return 3.141592653589793<Math.abs(e.x-c.x)*a?(this.QQ(b),!0):this.VK(b)};e.prototype.VK=function(a){return 0>a.Mh()?(this.PQ(a),!0):!1};e.prototype.RE=function(b,e,c){var l=c.G(),d=0<e?e-1:l-1,l=c.Ga(e<l-1?e+1:0),d=c.Ga(d);if(!a.l.T(l.y,b.y)&&!a.l.T(l.x,b.x)){var f=new a.b;f.na(l.x,b.y);c.jc(e,f)}a.l.T(d.y,b.y)||a.l.T(d.x,b.x)||(l=new a.b,l.na(d.x,b.y),c.lf(0,e,l))};e.prototype.QQ=
function(b){var e=new a.La,c=new a.La,l=new a.Bg,d=b.Ga(0),f=b.Ga(b.G()-1),g=new a.b;d.x>f.x?(f=this.gp,l.On(-this.Tq,0)):(f=-this.gp,l.On(this.Tq,0));e.add(b,!1);b.Ka();c.add(e,!1);c.Pe(l);d=new a.i;c.s(d);d.R((this.Tq-d.ba())/2,0);d.D=-this.gp;d.H=this.gp;for(var k=0;k<c.G();k++)c.A(k,g),e.lf(0,-1,g);c.Pe(l);for(k=0;k<c.G();k++)c.A(k,g),e.lf(0,-1,g);c=e.Ga(0);l=e.Ga(e.G()-1);g.na(l.x,f);e.lf(0,-1,g);g.na(0.5*(l.x+c.x),f);e.lf(0,-1,g);g.na(c.x,f);e.lf(0,-1,g);e=a.gh.Qw(e,this.xc,2,d.w);e=a.gh.Qw(e,
this.xc,2,d.C);e=a.Fd.clip(e,d,this.hp,NaN);b.add(e,!1)};e.prototype.PQ=function(b){var e=new a.i;b.s(e);e.R((this.Tq-e.ba())/2,0);e.D=-this.gp;e.H=this.gp;b.ko();var c=new a.b;c.na(e.w,e.D);b.lf(1,-1,c);c.na(e.w,e.H);b.lf(1,-1,c);c.na(0.5*(e.w+e.C),e.H);b.lf(1,-1,c);c.na(e.C,e.H);b.lf(1,-1,c);c.na(e.C,e.D);b.lf(1,-1,c);c.na(0.5*(e.w+e.C),e.D);b.lf(1,-1,c)};e.Gv=function(b,c,l,d,f,g,k,m,q,r,s){var t=null;q||(t=new a.b,t.Eh(),0<s.G()&&(t.K(s.Ga(s.G()-1)),t.scale(l)));var C=new a.da(0),u=new a.da(0),
w=new a.da(0),x=new a.b,y=new a.b,A=g[g.length-1];l=1/l;for(var B=0;B<g.length;B++){var K=g[B],D;0==B?D=k:B==g.length-1?D=m:(a.Ab.Sd(b,c,A.x,A.y,K.x,K.y,null,null,C,f),D=C.o-1.570796326794897);a.Ab.Ph(b,c,K.x,K.y,d,D,u,w);q?y.na(u.o,w.o):(x.na(u.o,w.o),e.Gz(K.x,x.x,t.x,r),y.na(r[0]+x.x,x.y),t.K(y));y.scale(l);s.lf(0,-1,y)}};e.iq=function(b,c,l,d,f,g,k,m,q,r,s,t,C){if(!(k-g<m)){var u=new a.da(0),w=new a.da(0),x=new a.b,y=new a.b,A=null;q||(A=new a.b,A.Eh(),0<s.G()&&(A.K(s.Ga(s.G()-1)),A.scale(l)));
var B=a.J.truncate(Math.ceil(g/m)),K=B++*m;K==g&&(K=B++*m);for(l=1/l;K<k+m;){g<t&&t<K?(K=t,B--):g<C&&C<K&&(K=C,B--);if(K>=k)break;a.Ab.Ph(b,c,f.x,f.y,d,K,u,w);q?y.na(u.o,w.o):(x.na(u.o,w.o),e.Gz(f.x,x.x,A.x,r),y.na(r[0]+x.x,x.y),A.K(y));y.scale(l);s.lf(0,-1,y);g=K;K=B++*m}}};e.wG=function(b,e,c,l,d,f,g,k,m,q){var r=new a.b,s=new a.b,t=new a.da(0),C=new a.da(0);a.Ab.Ph(b,e,l.x,l.y,c,d,t,C);r.na(t.o,C.o);a.Ab.Ph(b,e,l.x,l.y,c,f,t,C);s.na(t.o,C.o);c=new a.da(0);a.Ab.fw(b,e,g.x,g.y,r.x,r.y,c);m[0]=c.o;
a.Ab.fw(b,e,g.x,g.y,s.x,s.y,c);for(q[0]=c.o;m[0]<=q[0];)m[0]+=6.283185307179586;for(;m[0]>q[0];)m[0]-=6.283185307179586;for(;m[0]>=k;)m[0]-=6.283185307179586,q[0]-=6.283185307179586;for(;m[0]<k;)m[0]+=6.283185307179586,q[0]+=6.283185307179586};e.Gz=function(a,b,e,c){if(isNaN(e)){for(;3.141592653589793<c[0]+b-a;)c[0]-=6.283185307179586;for(;3.141592653589793<a-(c[0]+b);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+b-e?c[0]-=6.283185307179586:3.141592653589793<e-(c[0]+b)&&(c[0]+=6.283185307179586)};
e.OS=function(b,e){var c=b.F(),l;a.U.Lc(c)?l=b.fa():c==a.j.MultiPoint?l=b.G():l=1;if(1==l)return b;var d=new a.ha(0);d.resize(l);for(var f=[],g=new a.i,k=0;k<l;k++){d.write(k,k);var m;a.U.Lc(c)?(b.Ti(k,g),m=g.Af()):m=b.Ga(k);m=a.qH.PS(e,m);f[k]=m}d.yd(0,d.size,function(a,b){return f[a]<f[b]?-1:f[a]>f[b]?1:0});g=b.Qa();for(k=0;k<l;k++)m=d.read(k),a.U.Lc(c)?g.$j(b,m,!0):g.Qd(b,m,m+1);return g};e.prototype.sS=function(){var b=Math.min(3.141592653589793*this.Hb-this.ib,this.ib),b=Math.min(b,0.39269908169872414*
this.Hb),e=new a.b;e.na(0,10*this.Sb);var c=45*this.Sb,l=new a.da(0),d=new a.da(0),f=new a.da(0),g=new a.da(0),k=new a.da(0),m=new a.da(0),q=new a.da(0),r=new a.da(0),s=new a.b,t=new a.b,C=new a.b,u=new a.b;a.Ab.Ph(this.Hb,this.Yb,e.x,e.y,b,0,l,d);s.na(l.o,d.o);a.Ab.Ph(this.Hb,this.Yb,e.x,e.y,b,c,f,g);t.na(f.o,g.o);for(var l=new a.da(0),d=new a.da(0),w=new a.da(0);;){a.Ab.Ph(this.Hb,this.Yb,e.x,e.y,b,0.5*(0+c),k,m);C.na(k.o,m.o);a.Ab.Sd(this.Hb,this.Yb,s.x,s.y,t.x,t.y,l,d,null,2);a.Ab.ek(this.Hb,
this.Yb,s.x,s.y,0.5*l.o,d.o,q,r,2);u.na(q.o,r.o);a.Ab.Sd(this.Hb,this.Yb,C.x,C.y,u.x,u.y,w,null,null,2);if(w.o<=this.Sm)break;c*=0.9;a.Ab.Ph(this.Hb,this.Yb,e.x,e.y,b,c,f,g);t.na(f.o,g.o)}this.Tm=6.283185307179586/Math.ceil(6.283185307179586/(c-0))};e.prototype.tS=function(){var b=Math.min(3.141592653589793*this.Hb-this.ib,this.ib),b=Math.min(b,0.39269908169872414*this.Hb),e=new a.b,c=new a.b;e.na(0,10*this.Sb);c.na(10*this.Sb,10*this.Sb);var l=new a.da(0),d=new a.da(0),f=new a.da(0);a.Ab.Sd(this.Hb,
this.Yb,e.x,e.y,c.x,c.y,f,l,d,this.le);var g=new a.da(0),k=new a.da(0),m=new a.da(0),q=new a.da(0),r=new a.b,s=new a.da(0),t=new a.da(0),C=new a.da(0),u=new a.da(0),w=new a.da(0),x=new a.da(0),y=new a.da(0),A=new a.da(0),B=new a.da(0),K=new a.b,D=new a.b,E=new a.b,G=new a.b,H=1,l=l.o,d=d.o+1.570796326794897,f=f.o;a.Ab.Ph(this.Hb,this.Yb,e.x,e.y,b,l-1.570796326794897,t,C);K.na(t.o,C.o);a.Ab.Ph(this.Hb,this.Yb,c.x,c.y,b,d,u,w);D.na(u.o,w.o);for(var t=new a.da(0),C=new a.da(0),d=new a.da(0),I=new a.da(0);;){a.Ab.ek(this.Hb,
this.Yb,e.x,e.y,0.5*(0+H)*f,l,g,k,this.le);r.na(g.o,k.o);a.Ab.Sd(this.Hb,this.Yb,e.x,e.y,r.x,r.y,null,null,s,this.le);a.Ab.Ph(this.Hb,this.Yb,r.x,r.y,b,s.o+1.570796326794897,x,y);E.na(x.o,y.o);a.Ab.Sd(this.Hb,this.Yb,K.x,K.y,D.x,D.y,t,C,null,2);a.Ab.ek(this.Hb,this.Yb,K.x,K.y,0.5*t.o,C.o,A,B,2);G.na(A.o,B.o);a.Ab.Sd(this.Hb,this.Yb,E.x,E.y,G.x,G.y,d,null,null,2);if(d.o<=this.Sm)break;H*=0.9;a.Ab.ek(this.Hb,this.Yb,e.x,e.y,H*f,l,m,q,this.le);c.na(m.o,q.o);a.Ab.Sd(this.Hb,this.Yb,e.x,e.y,c.x,c.y,null,
null,I,this.le);a.Ab.Ph(this.Hb,this.Yb,c.x,c.y,b,I.o+1.570796326794897,u,w);D.na(u.o,w.o)}b=H*f;1E5<b&&(b=1E5);this.Mx=b};e.prototype.rS=function(){var a;a=5E4<this.ib?100:1E4<this.ib?10:1;500>this.ib/a&&(a=this.ib/500);0.01>a&&(a=0.01);this.Sm=a};return e}();a.pH=l})(A||(A={}));(function(a){var b=function(){function b(){}b.bc=function(b,e){var h=new a.b;h.K(e);b.push(h)};b.$i=function(a,b){a.add(b.x);a.add(b.y)};b.bx=function(a){a.df(a.size-2)};b.by=function(a,b){b.na(a.get(a.size-2),a.get(a.size-
1))};b.mq=function(c,e,h,n,d,f){if(null==c)throw a.g.O();var g=c.F();if(c.u()||a.U.Lm(g))return c;var k=new b;k.sg=e;k.xc=a.Za.Fm(e);var m=a.Za.et(k.xc);k.Zb=f;k.Hb=a.Za.Ss(k.xc);k.Yb=m*(2-m);k.Sb=k.xc.Te().Ej;k.hp=k.xc.vq();k.gr=k.hp*k.Sb;k.Ax=n;k.zx=d;k.le=h;g==a.j.Envelope?(h=new a.La(c.description),h.Xc(c,!1)):a.U.Mc(g)?(h=new a.Ya(c.description),h.Cc(c,!0)):h=c;if(4!=k.le){e=0==k.sg.mc(k.xc)?a.Za.Wl(h,k.sg,k.xc):a.gh.po(h,k.xc);if(e.u())return e;e=b.IE(k.Sb,e);e=k.gw(e);e=a.Vn.nl(e,k.xc,k.le);
k=a.Za.Wl(e,k.xc,k.sg)}else{2==a.Nf.Bm(e)?(c=a.Za.SN(),e=a.Zr.local().aa(h,c,e,f),e==c&&(e=new a.La,c.copyTo(e))):e=a.gh.po(h,k.xc);if(e.u())return e;k=k.vS(e)}return k};b.IE=function(c,e){var h=new a.i;e.ed(h);if(3.141592653589793>h.ba()*c)return e;for(var n=!1,h=e.Da(),d=new a.b,f=new a.b;h.lb();)for(;h.Ma();){var g=h.ja();d.K(g.Nb());f.K(g.pc());d.scale(c);f.scale(c);if(3.141592653589793<Math.abs(d.x-f.x)){if(!b.Fs(d,f)){n=!0;break}if(6.283185307179586<Math.abs(d.x-f.x)){n=!0;break}}}if(!n)return e;
var n=e.Qa(),k=1<e.description.Ba,m=new a.b,q=new a.b,r=new a.b,s=new a.b,t=new a.Wa;for(h.Lk();h.lb();)for(var u=NaN,w=[0];h.Ma();){g=h.ja();d.K(g.Nb());f.K(g.pc());d.scale(c);f.scale(c);isNaN(u)?(b.Cd(d.x,NaN,w),q.K(d)):q.K(r);u=q.x;if(b.Fs(d,f)){if(6.283185307179586<f.x-d.x)for(;6.283185307179586<f.x-d.x;)f.x-=6.283185307179586;if(-6.283185307179586>f.x-d.x)for(;-6.283185307179586>f.x-d.x;)f.x+=6.283185307179586;b.Cd(f.x,NaN,w);r.K(f)}else m.K(f),b.dK(m),b.Cd(m.x,u,w),r.na(w[0]+m.x,m.y);0.5>Math.abs(r.x-
f.x)&&r.K(f);k?(g.tu(0,t),s.K(q),s.scale(1/c),t.jc(s),h.wl()?n.ef(t):n.lineTo(t),h.Km()&&!e.wc(h.Ra)&&(g.tu(1,t),s.K(r),s.scale(1/c),t.jc(s),n.lineTo(t))):(h.wl()&&n.Rw(),g=n.fa()-1,s.K(q),s.scale(1/c),n.lf(g,-1,s),h.Km()&&!e.wc(h.Ra)&&(s.K(r),s.scale(1/c),n.lf(g,-1,s)))}return n};b.kC=function(c,e,h,n,d,f,g,k,m,q,r,s){var t=new a.b,u=new a.b,w=0<n.compare(d);b.Ez(w,n,d,t,u);b.Jz(c,e,h,t,u,f,NaN,g,k,m,q,null,r,s);w&&b.fy(m,q,null,r)};b.prototype.gw=function(c){var e=c.Qa(),h=c.Da(),n=[],d=null,f=
null,g=1<c.description.Ba;g&&(d=new a.rd(0),f=new a.Ag);for(var k=[0],m=new a.b,q=new a.b,r=new a.b,s=new a.b;h.lb();)for(k[0]=0;h.Ma();){var t=h.ja();m.K(t.Nb());q.K(t.pc());m.scale(this.Sb);q.scale(this.Sb);var u=0<m.compare(q);b.Ez(u,m,q,r,s);n.length=0;null!=d&&d.df(0);0<this.Ax?b.Jz(this.Hb,this.Yb,this.le,r,s,this.Ax,this.zx,this.gr,null,null,null,g?d:null,n,k):b.dH(this.Hb,this.Yb,this.le,r,s,this.zx,this.gr,g?d:null,n,k);u&&b.fy(null,null,g?d:null,n);n[0].K(t.Nb());n[n.length-1].K(t.pc());
for(var w=1;w<n.length-1;w++)n[w].scale(1/this.Sb);g?(u=b.Cz(u,t,f),b.nz(h.wl(),h.Km()&&!c.wc(h.Ra),t,u,d,n,e)):b.lz(h.wl(),h.Km()&&!c.wc(h.Ra),n,e)}return e};b.prototype.vS=function(c){var e=c.Qa(),h=c.Da(),n=[],d=null,f=new a.Ag,g=1<c.description.Ba;for(g&&(d=new a.rd(0));h.lb();)for(;h.Ma();){var k=h.ja(),m=k.Nb(),q=k.pc(),m=0<m.compare(q),q=b.Cz(m,k,f);n.length=0;null!=d&&d.df(0);b.ER(this.Hb,this.Yb,this.Sb,q,this.sg,this.Ax,this.zx,g?d:null,n);m&&b.fy(null,null,g?d:null,n);g?b.nz(h.wl(),h.Km()&&
!c.wc(h.Ra),k,q,d,n,e):b.lz(h.wl(),h.Km()&&!c.wc(h.Ra),n,e)}return e};b.lz=function(a,b,h,c){a&&c.Rw();a=c.fa()-1;var d=h.slice(0);c.dD(a,d,d.length-1);b&&c.lf(a,-1,h[h.length-1])};b.nz=function(b,e,h,c,d,f,g){var k=new a.Wa;h.Fn(k);b?g.ef(k):g.lineTo(k);if(2<f.length){b=c.ac();for(var m=1;m<f.length-1;m++){var q=c.AD(d.get(m)*b);c.tu(q,k);k.jc(f[m]);g.lineTo(k)}}e&&(h.Cn(k),g.lineTo(k))};b.Jz=function(c,e,h,n,d,f,g,k,m,q,r,s,t,u){var w=new a.da(0),x=new a.da(0),y=new a.da(0);a.Ab.Sd(c,e,n.x,n.y,
d.x,d.y,y,w,x,h);var y=y.o,A=w=w.o,x=x.o;0>A&&(A+=6.283185307179586);0>x&&(x+=6.283185307179586);null!=m&&(m[0]=y);null!=q&&(q[0]=A);null!=r&&(r[0]=x);q=m=NaN;null!=s&&(q=a.v.gg(c,e),r=a.v.q(c,e,n.y),m=(q-r)/y,q=(q+r)/y);r=b.Gs(n,d);var x=b.Es(n,d),A=r||x,B=b.vz(n,d,k),K=new a.da(0),D=new a.da(0),E=new a.b,G=new a.b,H=new a.b;b.Cd(n.x,NaN,u);var I=[u[0]];if(y<=f)b.bc(t,n),b.Cd(d.x,NaN,u),null!=s&&s.add(0),A?(r&&b.ay(n,d,s,t),x&&b.Ux(n,d,s,t)):B?b.Wx(n,d,w,m,q,s,t):0<g&&(G.na(n.x-I[0],n.y),E.na(d.x-
u[0],d.y),b.xv(c,e,h,n,y,w,G,E,0,1,g,s,t,I)),b.bc(t,d);else{f=1+a.J.truncate(Math.ceil(y/f));var M=y/(f-1),J=new a.b,L=0;b.bc(t,n);J.K(n);G.na(n.x-u[0],n.y);null!=s&&s.add(0);for(var O=1;O<f;O++){var Q;O<f-1?(a.Ab.ek(c,e,n.x,n.y,O*M,w,K,D,h),E.na(K.o,D.o),b.Cd(E.x,J.x,u),H.na(u[0]+E.x,E.y),Q=O/(f-1)):(b.Cd(d.x,NaN,u),E.na(d.x-u[0],d.y),H.K(d),Q=1);A?(1==O&&r&&b.ay(n,H,s,t),O==f-1&&x&&b.Ux(J,d,s,t)):B?b.sz(J,H,k)&&(n.x<d.x?J.x>H.x&&(u[0]+=6.283185307179586,H.na(u[0]+E.x,E.y)):J.x<H.x&&(u[0]-=6.283185307179586,
H.na(u[0]+E.x,E.y)),b.Wx(J,H,w,m,q,s,t)):0<g&&b.xv(c,e,h,n,y,w,G,E,L,Q,g,s,t,I);b.bc(t,H);null!=s&&s.add(Q);J.K(H);G.K(E);I[0]=u[0];L=Q}}};b.dH=function(c,e,h,n,d,f,g,k,m,q){var r=new a.da(0),s=new a.da(0),t=new a.da(0);a.Ab.Sd(c,e,n.x,n.y,d.x,d.y,t,r,s,h);var s=t.o,r=r.o,u=t=NaN;if(null!=k)var u=a.v.gg(c,e),w=a.v.q(c,e,n.y),t=(u-w)/s,u=(u+w)/s;var w=b.Gs(n,d),x=b.Es(n,d),y=w||x;g=b.vz(n,d,g);var A=b.Fs(n,d),A=y||g||A;b.Cd(n.x,NaN,q);var B=new a.b;b.bc(m,n);B.K(n);null!=k&&k.add(0);A?(y?(w&&b.ay(n,
d,k,m),x&&b.Ux(n,d,k,m)):g&&b.Wx(n,d,r,t,u,k,m),b.Cd(d.x,NaN,q),b.bc(m,d)):s<=f?(b.Cd(d.x,NaN,q),b.bc(m,d)):(t=new a.b,g=new a.b,t.K(n),g.K(d),t.x-=q[0],g.x-=q[0],-3.141592653589793>g.x?g.x+=6.283185307179586:3.141592653589793<g.x&&(g.x-=6.283185307179586),b.xv(c,e,h,n,s,r,t,g,0,1,f,k,m,q),b.bc(m,d),b.Cd(d.x,NaN,q));null!=k&&k.add(1)};b.xv=function(c,e,h,n,d,f,g,k,m,q,r,s,t,u){var w=new a.b,x=new a.b;w.na(g.x+u[0],g.y);new a.da(0);new a.da(0);new a.da(0);new a.da(0);var y=new a.da(0),A=new a.da(0),
B=new a.da(0),K=new a.b,D=new a.b,E=new a.b,G=new a.b;K.K(g);D.K(k);g=new a.rd(0);k=new a.rd(0);b.$i(g,D);k.add(q);var H=new a.b,I=new a.zb,J=[];for(b.Kz(4,J);0<g.size;){for(var M=!1,L=NaN,O=NaN,Q=0;3>Q;Q++)if(L=J[Q]*q+(1-J[Q])*m,a.Ab.ek(c,e,n.x,n.y,L*d,f,y,A,h),E.na(y.o,A.o),0==Q&&(O=L,G.K(E)),b.lR(K,E,D,I),I.Lb(I.Hd(E,!0),H),a.Ab.Sd(c,e,E.x,E.y,H.x,H.y,B,null,null,2),B.o>r){M=!0;break}M?(D.K(G),q=O,b.$i(g,D),k.add(q)):(b.bx(g),k.oj(k.size-1,1,k.size-1),0<g.size&&(b.Cd(D.x,w.x,u),x.na(u[0]+D.x,D.y),
b.bc(t,x),w.K(x),null!=s&&s.add(q),K.K(D),m=q,b.by(g,D),q=k.get(k.size-1)))}};b.ER=function(c,e,h,n,d,f,g,k,m){var q=new a.b,r=new a.b,s=new a.b,t=new a.b,u=new a.b,w=new a.b,x=new a.b,y=new a.b,A=new a.b,B=new a.b,K=new a.da(0),D=new a.da(0),E=new a.b,G=[[],[]],H=1==a.Nf.Bm(d);d=d.wq();var I=n.Nb(),J=n.pc();H?(w.na(I.x*h,I.y*h),x.na(J.x*h,J.y*h)):(G[0][0]=I.x,G[0][1]=I.y,G[1][0]=J.x,G[1][1]=J.y,a.Za.su(),w.x=G[0][0]*h,w.y=G[0][1]*h,x.x=G[1][0]*h,x.y=G[1][1]*h);var M=0,L=0,O=1,Q=n.mD();q.K(I);r.K(J);
var J=new a.rd(0),S=new a.rd(0),R=new a.rd(0);b.$i(J,r);b.$i(S,x);R.add(O);b.bc(m,q);null!=k&&k.add(L);var U=[],V;V=0<g?Q?5:3:Q?5:1;b.Kz(V,U);for(var X=new a.da(0),ua=new a.da(0),va=new a.da(0),ca=new a.da(0),xa=new a.da(0),Fa=new a.da(0),ia=new a.da(0);0<S.size;){var ga=!1,Y=NaN,ba=NaN;a.Ab.Sd(c,e,w.x,w.y,x.x,x.y,X,ua,null,2);for(I=0;I<V;I++){if(0==I){if(!Q&&0>=g&&X.o<=f&&3.141592653589793>Math.abs(w.x-x.x))break;if(n.rA(L,O)<=d)break}Y=U[I]*O+(1-U[I])*L;n.Lb(Y,s);H?y.na(s.x*h,s.y*h):(G[0][0]=s.x,
G[0][1]=s.y,a.Za.su(),y.x=G[0][0]*h,y.y=G[0][1]*h);if(0==I&&(ba=Y,u.K(s),B.K(y),0<f&&(X.o>f||3.141592653589793<=Math.abs(w.x-x.x)))){ga=!0;break}if(Q&&0<f){if(a.Ab.Sd(c,e,w.x,w.y,y.x,y.y,va,null,null,2),va.o>f||3.141592653589793<=Math.abs(w.x-y.x)){ga=!0;break}}else if(0<g)if(Q?(t.NO(q,r,U[I]),H?A.na(t.x*h,t.y*h):(G[0][0]=t.x,G[0][1]=t.y,a.Za.su(),A.x=G[0][0]*h,A.y=G[0][1]*h)):(t.K(s),A.K(y)),a.Ab.Sd(c,e,w.x,w.y,A.x,A.y,ca,null,null,2),ca.o<=X.o){a.Ab.ek(c,e,w.x,w.y,ca.o,ua.o,K,D,2);E.na(K.o,D.o);
a.Ab.Sd(c,e,E.x,E.y,y.x,y.y,xa,null,null,2);if(xa.o>g){ga=!0;break}if(Q){a.Ab.Sd(c,e,E.x,E.y,A.x,A.y,Fa,null,null,2);if(Fa.o>g){ga=!0;break}a.Ab.Sd(c,e,A.x,A.y,y.x,y.y,ia,null,null,2);if(ia.o>g){ga=!0;break}}}else{ga=!0;break}}ga?(r.K(u),x.K(B),O=ba,b.$i(J,r),b.$i(S,x),R.add(O)):(b.bx(J),b.bx(S),R.oj(R.size-1,1,R.size-1),b.bc(m,r),M+=X.o,null!=k&&k.add(M),0<S.size&&(q.K(r),w.K(x),L=O,b.by(J,r),b.by(S,x),O=R.get(R.size-1)))}if(null!=k){c=1/M;for(I=0;I<k.size;I++)k.write(I,k.read(I)*c)}};b.fy=function(a,
b,c,n){n.reverse();null!=c&&c.Hp(0,c.size,1);c=null!=a?a[0]:NaN;n=null!=b?b[0]:NaN;null!=a&&(a[0]=n);null!=b&&(b[0]=c)};b.Ez=function(a,b,c,n,d){a?(n.K(c),d.K(b)):(n.K(b),d.K(c))};b.Cz=function(a,b,c){if(!a)return b;c.create(b.F());b.copyTo(c.get());c.get().reverse();return c.get()};b.Cd=function(a,b,c){if(isNaN(b)){for(;3.141592653589793<c[0]-a;)c[0]-=6.283185307179586;for(;3.141592653589793<a-c[0];)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+a-b?c[0]-=6.283185307179586:3.141592653589793<
b-(c[0]+a)&&(c[0]+=6.283185307179586)};b.lR=function(a,b,c,n){3.141592653589793>Math.abs(b.x-a.x)?(n.fd(a),3.141592653589793<=c.x-a.x?n.Ok(c.x-6.283185307179586,c.y):3.141592653589793<=a.x-c.x?n.Ok(c.x+6.283185307179586,c.y):n.Ok(c.x,c.y)):(n.fd(c),3.141592653589793<=a.x-c.x?n.Ok(a.x-6.283185307179586,a.y):3.141592653589793<=c.x-a.x?n.Ok(a.x+6.283185307179586,a.y):n.Ok(a.x,a.y))};b.Kz=function(a,b){for(var c=0;c<a;c++){var n=Math.ceil(c/2)/(a+1);0!=c%2&&(n=-n);b[c]=0.5+n}};b.Gs=function(b,e){return a.l.T(b.y,
1.570796326794897)&&!a.l.T(e.y,1.570796326794897)||a.l.T(b.y,-1.570796326794897)&&!a.l.T(e.y,-1.570796326794897)?!0:!1};b.Es=function(b,e){return a.l.T(e.y,1.570796326794897)&&!a.l.T(b.y,1.570796326794897)||a.l.T(e.y,-1.570796326794897)&&!a.l.T(b.y,-1.570796326794897)?!0:!1};b.vz=function(c,e,h){return!b.sz(c,e,h)||a.l.T(c.y,1.570796326794897)||a.l.T(c.y,-1.570796326794897)||a.l.T(e.y,1.570796326794897)||a.l.T(e.y,-1.570796326794897)?!1:!0};b.sz=function(a,b,c){return Math.abs(Math.abs(a.x-b.x)-3.141592653589793)<=
c?!0:!1};b.Fs=function(b,e){return a.l.T(b.y,1.570796326794897)&&a.l.T(e.y,1.570796326794897)||a.l.T(b.y,-1.570796326794897)&&a.l.T(e.y,-1.570796326794897)?!0:!1};b.ay=function(c,e,h,n){if(0<c.y){var d=new a.b;d.na(e.x,1.570796326794897)}else d=new a.b,d.na(e.x,-1.570796326794897);a.l.T(c.x,d.x)||a.l.T(e.y,d.y)||(b.bc(n,d),null!=h&&h.add(0))};b.Ux=function(c,e,h,n){if(0<e.y){var d=new a.b;d.na(c.x,1.570796326794897)}else d=new a.b,d.na(c.x,-1.570796326794897);a.l.T(e.x,d.x)||a.l.T(c.y,d.y)||(b.bc(n,
d),null!=h&&h.add(1))};b.Wx=function(c,e,h,n,d,f,g){a.l.Wc(h)?(0<1.570796326794897-c.y&&(h=new a.b,h.na(c.x,1.570796326794897),b.bc(g,h),null!=f&&f.add(n)),0<1.570796326794897-e.y&&(h=new a.b,h.na(e.x,1.570796326794897),b.bc(g,h),null!=f&&f.add(n))):(0<1.570796326794897+c.y&&(h=new a.b,h.na(c.x,-1.570796326794897),b.bc(g,h),null!=f&&f.add(d)),0<1.570796326794897+e.y&&(h=new a.b,h.na(e.x,-1.570796326794897),b.bc(g,h),null!=f&&f.add(d)))};b.dK=function(a){if(-3.141592653589793>a.x)for(;-3.141592653589793>
a.x;)a.x+=6.283185307179586;if(3.141592653589793<a.x)for(;3.141592653589793<a.x;)a.x-=6.283185307179586};return b}();a.ui=b})(A||(A={}));(function(a){var b=function(){function b(){}b.nl=function(c,e,h){if(null==c||null==e||!a.Za.Oo(e))throw a.g.O();if(c.u())return c;var n=c,d=n.F();if(a.U.Lc(d)){n=a.gh.po(c,e);c=new a.i;n.s(c);for(var d=a.Ja.Ad(e,c,!1),f=a.Za.Gm(e),g=Math.floor((c.w-f.w)/f.ba())*f.ba()+f.w;g<c.C;)g>c.w+d&&g<c.C-d&&(n=a.gh.Qw(n,e,h,g)),g+=f.ba()}else{if(d==a.j.Envelope)return c=new a.La(n.description),
c.Xc(n,!1),b.nl(c,e,h);if(a.U.Mc(d))return c=new a.Ya(n.description),c.Cc(n,!0),b.nl(c,e,h)}return b.VG(n,e)};b.VG=function(c,e){if(null==c||null==e||!a.Za.Oo(e))throw a.g.O();if(c.u())return c;var h=null,h=c.F();h==a.j.Envelope?(h=new a.La(c.description),h.Xc(c,!1)):a.U.Mc(h)?(h=new a.Ya(c.description),h.Cc(c,!0)):h=c;h=a.gh.po(h,e);return h.u()?h:1==a.Nf.Bm(e)?a.gh.$M(h,e,h!=c):b.SG(h,e,h!=c)};b.SG=function(b,e,c){if(!a.Za.Oo(e))throw a.g.O();if(b.u())return b;var n=a.Za.IC(e),d=360*n,n=0-180*n,
f=n+d;2==a.Nf.Bm(e)&&(d=a.Za.Gm(e),f=d.C,n=d.w,d=f-n);return a.gh.gC(b,n,d,e,c)};return b}();a.Vn=b})(A||(A={}));(function(a){var b=function(){function b(){}b.prototype.tv=function(a){this.hi=a};b.prototype.GA=function(a){this.Bb=a};b.prototype.HA=function(a){this.on=a};b.vB=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon?!1:!0};b.tB=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon||20>b.G()?!1:!0};b.uB=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon||
20>b.G()?!1:!0};return b}();a.Xj=b})(A||(A={}));(function(a){var b=function(){function b(){}b.EH=function(b){var e=new a.La;e.Ty(b.S.w,b.S.D);e.xj(b.S.w,b.S.H);e.xj(b.S.C,b.S.H);e.xj(b.S.C,b.S.D);return e};b.$S=function(b,e){var c=a.wi.local(),n=new a.Qc(b);return c.aa(n,e,null).next()};b.ll=function(b,e,c){return a.Yr.local().aa(b,e,c,null)};b.Pn=function(b,e,c){return a.cv.local().aa(b,e,c,null)};b.LS=function(b,e,c){var n=a.cv.local();b=new a.Qc(b);e=new a.Qc(e);c=n.aa(b,e,c,null);for(n=[];null!=
(e=c.next());)n.push(e);return n};b.mc=function(b,e,c){return a.bl.local().aa(3,b,e,c,null)};b.mM=function(b,e,c){return a.bl.local().aa(4,b,e,c,null)};b.PO=function(b,e,c){var n=a.Zr.local();b=new a.Qc(b);e=new a.Qc(e);c=n.aa(b,e,c,null);for(n=[];null!=(e=c.next());)n.push(e);return n};b.jM=function(b,e,c){var n=a.Yr.local();b=new a.Qc(b);e=new a.Qc(e);c=n.aa(b,e,c,null);for(n=[];null!=(e=c.next());)n.push(e);return n};b.Ha=function(b,e,c){return a.Zr.local().aa(b,e,c,null)};b.iT=function(b,e,c){return a.bl.local().aa(2,
b,e,c,null)};b.contains=function(b,e,c){return a.bl.local().aa(1,b,e,c,null)};b.UL=function(b,e,c){return a.bl.local().aa(16,b,e,c,null)};b.touches=function(b,e,c){return a.bl.local().aa(8,b,e,c,null)};b.sQ=function(b,e,c){return a.bl.local().aa(32,b,e,c,null)};b.QO=function(b,e,c){return a.bl.local().aa(1073741824,b,e,c,null)};b.oy=function(b,e,c,n){return a.eI.local().aa(b,e,c,n,null)};b.Gb=function(b,e,c,n){var d=null;if(null!=c){if(d=c.Te(),null!=n&&d.Rc()!=n.Rc()&&d.Oc!=n.Oc)throw a.g.cj();}else if(null!=
n)throw a.g.O();b=a.YH.local().aa(b,e,null);null!==d&&null!==n&&(b=a.Ub.ih(b,d,n));return b};b.clip=function(b,e,c){return a.RH.local().aa(b,a.i.Pa(e.S.w,e.S.D,e.S.C,e.S.H),c,null)};b.ym=function(b,e,c){if(null==b||null==e)return null;b=a.TH.local().aa(!0,b,e,c,null);for(e=[];null!=(c=b.next());)c.u()||e.push(c);return e.slice(0)};b.qK=function(c,e,h,n,d,f,g,k){if(!0===d)return b.UP(c,e,h,n,f,g,k);d=h;if(null!=e){if(g=e.Te(),null!=n&&g.Rc()!=n.Rc()){if(g.Oc!=n.Oc)throw a.g.cj();d=[];a.Ub.OB(h,h.length,
n,g,d)}}else if(null!=n)throw a.g.O();h=a.Oz.local();if(f){c=new a.Qc(c);e=h.aa(c,e,d,f,null);for(c=[];null!=(f=e.next());)c.push(f);f=c.slice(0)}else{f=[];for(n=0;n<c.length;n++)f[n]=h.aa(c[n],e,d[n],null)}return f};b.UP=function(b,e,c,n,d,f,g){if(null===e)throw a.g.O();if(null===n||void 0===n)n=4326!==e.Rc()?e.Te():a.Ub.Rd(9001);if(0!==n.Oc)throw a.g.O();a.Ub.OB(c,c.length,n,a.Ub.Rd(9001),c);n=a.Tz.local();if(d){b=new a.Qc(b);e=n.aa(b,e,f,c,g,!1,d,null);for(c=[];null!=(f=e.next());)c.push(f);d=
c.slice(0)}else{d=[];for(var k=0;k<b.length;k++)d[k]=n.aa(b[k],e,f,c[k],g,!1,null)}return d};b.buffer=function(b,e,c,n,d,f,g){var k=c;if(!1===d){if(null!=e){if(d=e.Te(),null!=n&&d.Rc()!=n.Rc()){if(d.Oc!=n.Oc)throw a.g.cj();k=a.Ub.ih(c,n,d)}}else if(null!=n)throw a.g.O();b=a.Oz.local().aa(b,e,k,null)}else{if(null===e)throw a.g.O();if(null===n||void 0===n)n=4326!==e.Rc()?e.Te():a.Ub.Rd(9001);if(0!==n.Oc)throw a.g.O();k=a.Ub.ih(c,n,a.Ub.Rd(9001));b=a.Tz.local().aa(b,e,f,k,g,!1,null)}return b};b.rQ=function(b,
e,c,n,d,f,g){if(null!=e){var k=e.Te();if(null!=g&&k.Rc()!=g.Rc()){if(k.Oc!=g.Oc)throw a.g.cj();c=a.Ub.ih(c,g,k)}}else if(null!=g)throw a.g.O();b=new a.Qc(b);e=a.Wz.local().aa(b,e,c,n,d,f,null);for(c=[];null!=(n=e.next());)c.push(n);return c.slice(0)};b.offset=function(b,e,c,n,d,f,g){if(null!=e){var k=e.Te();if(null!=g&&k.Rc()!=g.Rc()){if(k.Oc!=g.Oc)throw a.g.cj();c=a.Ub.ih(c,g,k)}}else if(null!=g)throw a.g.O();return a.Wz.local().aa(b,e,c,n,d,f,null)};b.IL=function(b){return a.Qz.local().aa(b,null)};
b.JL=function(b,e){for(var c=a.Qz.local(),n=new a.Qc(b),c=c.aa(n,e,null),n=[],d;null!=(d=c.next());)n.push(d);return n};b.yw=function(b,e,c){return a.av.local().yw(b,e,c)};b.zw=function(b,e){return a.av.local().zw(b,e)};b.Aw=function(b,e,c,n){return a.av.local().Aw(b,e,c,n)};b.Py=function(b,e){return a.$r.local().aa(b,e,!1,null)};b.bP=function(b,e){return a.$r.local().Po(b,e,null)};b.eN=function(b,e,c,n,d){var f=a.Sz.local();if(null!=e){if(e=e.Te(),null!=d&&e.Rc()!=d.Rc()){if(e.Oc!=d.Oc)throw a.g.cj();
c=a.Ub.ih(c,d,e)}}else if(null!=d)throw a.g.O();return f.aa(b,c,n,null)};b.mq=function(b,e,c,n){var d=a.VH.local();if(null!=e){if(e=e.Te(),null!=n&&e.Rc()!=n.Rc()){if(e.Oc!=n.Oc)throw a.g.cj();c=a.Ub.ih(c,n,e)}}else if(null!=n)throw a.g.O();return d.aa(b,c,null)};b.ew=function(b,e,c,n,d){void 0===d&&(d=0);var f=a.$H.local();if(4==d)throw a.g.qe();if(0!==d)throw a.g.qe();if(null!=e){var g=e.Te();if(null!=n&&g.Rc()!=n.Rc()){if(g.Oc!=n.Oc)throw a.g.cj();c=a.Ub.ih(c,n,g)}}else if(null!=n)throw a.g.O();
return f.aa(b,c,e,d,null)};b.iN=function(c,e,h,n){if(null===c)return 0;if(4==n)throw a.g.qe();if(0!==n)throw a.g.qe();if(c.F()==a.j.Envelope)c=b.EH(c);else if(c.F()!=a.j.Polygon)return 0;n=a.Za.Fm(e);c=a.Za.Wl(c,e,n);n=a.oH.jN([c])[0];if(null!==h){if(2!==h.Oc)throw a.g.O("Unit must be a area unit type");n=a.Ub.ih(n,a.Ub.Rd(109404),h)}return n};b.mN=function(b,e,c,n){b=a.bI.local().aa(b,e,n,null);if(null!==c){if(0!==c.Oc)throw a.g.O("Unit must be a linear unit type");b=a.Ub.ih(b,a.Ub.Rd(9001),c)}return b};
b.AQ=function(b,e,c){if(null===b)return 0;var n=null;if(null!=e){n=e.Te();if(0==n.Oc&&(n=a.Ub.PC(n),null==n&&null!==c))throw a.g.O();if(null!=c&&n.Rc()!=c.Rc()&&n.Oc!=c.Oc)throw a.g.cj();}else if(null!=c)throw a.g.O();e=0;return b.F()==a.j.Polygon||b.F()==a.j.Envelope?(e=b.Mh(),null!==c?a.Ub.ih(e,n,c):e):0};b.BQ=function(b,e,c){if(null===b||b.u()||1>b.gb())return 0;var n=null;if(null!=e){if(n=e.Te(),null!=c&&n.Rc()!=c.Rc()&&n.Oc!=c.Oc)throw a.g.cj();}else if(null!=c)throw a.g.O();e=null;b.F()==a.j.Polygon||
b.F()==a.j.Envelope?e=b.Rf():a.U.Mc(b.F())?(e=new a.Ya(b.description),e.Cc(b,!0)):e=b;b=0;e=e.Da();for(var d=new a.b,f=new a.b;e.lb();)for(;e.Ma();){var g=e.ja();g.gt(d);g.tw(f);b+=a.b.Gb(d,f)}null!==n&&null!==c&&(b=a.Ub.ih(b,n,c));return b};b.XT=function(b,e){return a.Nf.lN(b,e)};b.HL=function(a){return void 0!==a.points?b.kH(a,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM):void 0!==a.rings?b.Nz(a.rings,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM,"P"):void 0!==a.paths?b.Nz(a.paths,
void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM,"L"):void 0!==a.x?b.uH(a):void 0!==a.xmin?b.hH(a):null};b.uH=function(b){if(null==b.x||"NaN"==b.x)return new a.Wa;var e=new a.Wa(b.x,b.y);void 0!==b.z&&null!==b.z&&e.qS(b.z);void 0!==b.m&&null!==b.m&&e.aS(b.m);return e};b.hH=function(b){if(null==b.xmin||"NaN"==b.xmin)return new a.Wj;var e=new a.Wj(b.xmin,b.ymin,b.xmax,b.ymax);void 0!==b.zmin&&null!==b.zmin&&e.setInterval(1,0,b.zmin,b.zmax);void 0!==b.mmin&&null!==b.mmin&&e.setInterval(2,0,b.mmin,
b.mmax);return e};b.kH=function(b,e,c){var n=0,d=new a.pe,f=3*b.points.length;0!=f%2&&f++;2>f&&(f=2);var g=a.J.truncate(3*b.points.length/2);4>g?g=4:16>g&&(g=16);for(var f=a.Bc.kl(f,0),k=a.Bc.kl(g),g=a.Bc.kl(g),m=0;m<b.points.length;m++)f.write(2*m,b.points[m][0]),f.write(2*m+1,b.points[m][1]),k.write(m,e||c?b.points[m][2]:NaN),g.write(m,c&&e?b.points[m][3]:NaN),n++;0!=n&&(d.resize(n),d.bm(0,f));e&&(d.Oe(1),d.bm(1,k));c&&(d.Oe(2),d.bm(2,0==e?k:g));d.de(16777215);return d};b.Nz=function(b,e,c,n){var d,
f=0,g=2;"P"==n?(d=new a.La,f=1,g=3):d=new a.Ya;for(var k=a.Bc.Dg(0),m=a.Bc.so(0),q=0,r=0,s=[],t=[],u=0;u<b.length;u++){var C=b[u].length;s[u]=!1;if("P"===n&&b[u][0][0]===b[u][b[u].length-1][0]&&b[u][0][1]===b[u][b[u].length-1][1]){var w=0==c?!0:b[u][0][3]===b[u][b[u].length-1][3]||void 0===b[u][0][3]&&void 0===b[u][b[u].length-1][3];(0==e||b[u][0][2]===b[u][b[u].length-1][2]||void 0===b[u][0][2]&&void 0===b[u][b[u].length-1][2])&&w&&(s[u]=!0,--C)}C>=g?(t[u]=!1,r+=1,k.add(q),m.add(f),q+=C):t[u]=!0}n=
3*q;0!=n%2&&n++;2>n&&(n=2);u=a.J.truncate(3*q/2);4>u?u=4:16>u&&(u=16);n=a.Bc.kl(n,0);f=a.Bc.kl(u);g=a.Bc.kl(u);for(u=C=0;u<b.length;u++)if(!1===t[u])for(w=0;w<b[u].length;w++){var x=!1;w===b[u].length-1&&!0===s[u]&&(x=!0);x||(n.write(2*C,b[u][w][0]),n.write(2*C+1,b[u][w][1]),f.write(C,e||c?b[u][w][2]:NaN),g.write(C,c&&e?b[u][w][3]:NaN),C++)}0!=q&&(b=d,k.resize(r),m.resize(r),0<q&&(k.add(q),m.add(0)),b.bm(0,n),b.NF(m),b.OF(k));e&&(d.Oe(1),d.bm(1,f));c&&(d.Oe(2),d.bm(2,0==e?f:g));d.de(16777215);return d};
return b}();a.Qb=b})(A||(A={}));(function(a){var b=function(){function a(){}a.Zk=function(a){var b=0,c=0,n=a.length,d=a[c],f;for(c;c<n-1;c++)f=a[c+1],b+=(f[0]-d[0])*(f[1]+d[1]),d=f;return 0<=b};a.rotate=function(b,e,c){var n=null;e=e*Math.PI/180;var d=Math.cos(e);e=Math.sin(e);if(void 0!==b.paths){for(var n={paths:[]},f=0;f<b.paths.length;f++){for(var g=b.paths[f],k=[],v=0;v<g.length;v++){var m=g[v].slice(0);k.push(m);var q=d*(g[v][0]-c.x)-e*(g[v][1]-c.y)+c.x,r=e*(g[v][0]-c.x)+d*(g[v][1]-c.y)+c.y;
m[0]=q;m[1]=r}n.paths.push(k)}return n}if(void 0!==b.rings){n={rings:[]};for(f=0;f<b.rings.length;f++){for(var g=b.rings[f],k=[],s=a.Zk(g),v=0;v<g.length;v++)m=g[v].slice(0),k.push(m),q=d*(g[v][0]-c.x)-e*(g[v][1]-c.y)+c.x,r=e*(g[v][0]-c.x)+d*(g[v][1]-c.y)+c.y,m[0]=q,m[1]=r;a.Zk(k)!==s&&k.reverse();n.rings.push(k)}return n}if(void 0!==b.x)return n={x:d*(b.x-c.x)-e*(b.y-c.y)+c.x,y:e*(b.x-c.x)+d*(b.y-c.y)+c.y},void 0!==b.z&&(n.z=b.z),void 0!==b.m&&(n.m=b.m),n;if(void 0!==b.points){n={points:[]};b=b.points;
for(v=0;v<b.length;v++)f=b[v].slice(0),f[0]=d*(b[v][0]-c.x)-e*(b[v][1]-c.y)+c.x,f[1]=e*(b[v][0]-c.x)+d*(b[v][1]-c.y)+c.y,n.points.push(f);return n}return null};a.eC=function(b,e){var c,n;if(void 0!==b.paths){c={paths:[]};for(var d=0;d<b.paths.length;d++){for(var f=b.paths[d],g=[],k=0;k<f.length;k++){var v=f[k].slice(0);g.push(v);n=e.x-f[k][0];v[0]=f[k][0]+2*n}c.paths.push(g)}return c}if(void 0!==b.rings){c={rings:[]};for(d=0;d<b.rings.length;d++){for(var f=b.rings[d],m=a.Zk(f),g=[],k=0;k<f.length;k++)v=
f[k].slice(0),g.push(v),n=e.x-f[k][0],v[0]=f[k][0]+2*n;a.Zk(g)!==m&&g.reverse();c.rings.push(g)}return c}if(void 0!==b.x)return n=e.x-b.x,c={x:b.x+2*n,y:b.y},void 0!==b.z&&(c.z=b.z),void 0!==b.m&&(c.m=b.m),c;if(void 0!==b.points){c={points:[]};d=b.points;for(k=0;k<d.length;k++)f=d[k].slice(0),n=e.x-f[0],f[0]+=2*n,c.points.push(f);return c}return void 0!==b.xmin?(c={w:b.xmin,D:b.ymin,C:b.xmax,H:b.ymax},void 0!==b.zmin&&(c.zmin=b.zmin,c.zmax=b.zmax),void 0!==b.mmin&&(c.mmin=b.mmin,c.mmax=b.mmax),n=
e.x-b.xmin,c.xmax=b.xmin+2*n,n=e.x-b.xmax,c.xmin=b.xmax+2*n,c):null};a.fC=function(b,e){var c,n;if(void 0!==b.paths){c={paths:[]};for(var d=0;d<b.paths.length;d++){for(var f=b.paths[d],g=[],k=0;k<f.length;k++){var v=f[k].slice(0);g.push(v);n=e.y-f[k][1];v[1]=f[k][1]+2*n}c.paths.push(g)}return c}if(void 0!==b.rings){c={rings:[]};for(d=0;d<b.rings.length;d++){for(var f=b.rings[d],m=a.Zk(f),g=[],k=0;k<f.length;k++)v=f[k].slice(0),g.push(v),n=e.y-f[k][1],v[1]=f[k][1]+2*n;a.Zk(g)!==m&&g.reverse();c.rings.push(g)}return c}if(void 0!==
b.x)return n=e.y-b.y,c={y:b.y+2*n,x:b.x},void 0!==b.z&&(c.z=b.z),void 0!==b.m&&(c.m=b.m),c;if(void 0!==b.points){c={points:[]};d=b.points;for(k=0;k<d.length;k++)f=d[k].slice(0),n=e.y-f[1],f[1]+=2*n,c.points.push(f);return c}return void 0!==b.xmin?(c={w:b.xmin,D:b.ymin,C:b.xmax,H:b.ymax},void 0!==b.zmin&&(c.zmin=b.zmin,c.zmax=b.zmax),void 0!==b.mmin&&(c.mmin=b.mmin,c.mmax=b.mmax),n=e.y-b.ymin,c.ymax=b.ymin+2*n,n=e.y-b.ymax,c.ymin=b.ymax+2*n,c):null};return a}();a.Wn=b})(A||(A={}));(function(a){var b=
function(){function b(){}b.jg=function(b,e){var c=e;null==c&&(c=a.Pd.Tf());switch(b){case a.j.Point:return new a.Wa(c);case a.j.Line:return new a.zb(c);case a.j.Envelope:return new a.Wj(c);case a.j.MultiPoint:return new a.pe(c);case a.j.Polyline:return new a.Ya(c);case a.j.Polygon:return new a.La(c);default:throw a.g.sa("invalid argument.");}};return b}();a.sH=b})(A||(A={}));(function(a){var b=function(){function b(c,e){this.De=a.ha.Zc(c,-1);this.pa=new a.Tr;this.tk=e}b.prototype.vR=function(a){this.pa.Cr(Math.min(this.De.size,
a));this.pa.$l(a)};b.prototype.addElement=function(b,e){if(void 0===e)return this.IJ(b);var c=a.J.truncate(e%this.De.size),n=this.De.get(c);-1==n&&(n=this.pa.jh(),this.De.set(c,n));return this.pa.addElement(n,b)};b.prototype.IJ=function(b){var e=this.tk.uw(b),e=a.J.truncate(e%this.De.size),c=this.De.get(e);-1==c&&(c=this.pa.jh(),this.De.set(e,c));return this.pa.addElement(c,b)};b.prototype.Kc=function(b,e){if(void 0===e)this.cM(b);else{var c=a.J.truncate(e%this.De.size),n=this.De.get(c);if(-1==n)throw a.g.O();
for(var d=this.pa.hc(n),f=-1;-1!=d;){var g=this.pa.cb(d);this.pa.ea(d)==b?(this.pa.Kc(n,f,d),-1==this.pa.hc(n)&&(this.pa.Fg(n),this.De.set(c,-1))):f=d;d=g}}};b.prototype.cM=function(b){var e=this.tk.uw(b),e=a.J.truncate(e%this.De.size),c=this.De.get(e);if(-1==c)throw a.g.O();for(var n=this.pa.hc(c),d=-1;-1!=n;){var f=this.pa.cb(n);this.pa.ea(n)==b?(this.pa.Kc(c,d,n),-1==this.pa.hc(c)&&(this.pa.Fg(c),this.De.set(e,-1))):d=n;n=f}};b.prototype.CN=function(b){b=a.J.truncate(b%this.De.size);b=this.De.get(b);
return-1==b?-1:this.pa.hc(b)};b.prototype.RN=function(a){return this.pa.cb(a)};b.prototype.ld=function(b){var e=this.tk.uw(this.ea(b)),e=a.J.truncate(e%this.De.size),c=this.De.get(e);if(-1==c)throw a.g.O();for(var n=this.pa.hc(c),d=-1;-1!=n;){if(n==b){this.pa.Kc(c,d,n);-1==this.pa.hc(c)&&(this.pa.Fg(c),this.De.set(e,-1));return}d=n;n=this.pa.cb(n)}throw a.g.O();};b.prototype.ea=function(a){return this.pa.ea(a)};b.prototype.clear=function(){this.De=a.ha.Zc(this.De.size,-1);this.pa.clear()};b.prototype.size=
function(){return this.pa.HC()};return b}();a.zH=b})(A||(A={}));(function(a){var b=function(){function b(){this.ci=new a.Gc(3);this.pa=new a.Gc(6);this.zP=!1;this.Xd=-1}b.prototype.ck=function(a){this.ci.Kc(a)};b.prototype.nu=function(){return this.ci.ce()};b.prototype.Qs=function(a){this.pa.Kc(a)};b.prototype.Xx=function(){return this.pa.ce()};b.prototype.Iy=function(a,b){this.ci.N(a,1,b)};b.prototype.Fu=function(a,b){this.ci.N(a,2,b)};b.prototype.$R=function(a,b){this.ci.N(a,3,b)};b.prototype.Gy=
function(a,b){this.pa.N(a,4,b)};b.prototype.cS=function(a,b){this.pa.N(a,3,b)};b.prototype.RF=function(a,b){this.pa.N(a,2,b)};b.prototype.jh=function(a){var b=this.Xx();this.pa.N(b,3,this.Xd);this.pa.N(b,4,0);this.pa.N(b,5,a);-1!=this.Xd&&this.RF(this.Xd,b);return this.Xd=b};b.prototype.Fg=function(a){this.CB(a);var b=this.pa.P(a,2),c=this.pa.P(a,3);-1!=b?this.cS(b,c):this.Xd=c;-1!=c&&this.RF(c,b);this.Qs(a);return c};b.prototype.Cr=function(a){this.pa.ee(a)};b.prototype.DC=function(a){return this.pa.P(a,
5)};b.prototype.ZR=function(a,b){this.pa.N(a,5,b)};b.prototype.addElement=function(a,b){return this.zO(a,b)};b.prototype.zO=function(a,b){var c=this.nu();this.Fu(c,-1);-1==this.pa.P(a,0)&&this.pa.N(a,0,c);var n=this.pa.P(a,1);this.Iy(c,n);-1!=n&&this.Fu(n,c);this.pa.N(a,1,c);this.setData(c,b);this.Gy(a,this.tq(a)+1);this.zP&&this.$R(c,a);return c};b.prototype.Kc=function(a,b){var c=this.he(b),n=this.cb(b);-1!=c?this.Fu(c,n):this.pa.N(a,0,n);-1!=n?this.Iy(n,c):this.pa.N(a,1,c);this.ck(b);this.Gy(a,
this.tq(a)-1);return n};b.prototype.$l=function(a){this.ci.ee(a)};b.prototype.getData=function(a){return this.ci.P(a,0)};b.prototype.setData=function(a,b){this.ci.N(a,0,b)};b.prototype.cb=function(a){return this.ci.P(a,2)};b.prototype.he=function(a){return this.ci.P(a,1)};b.prototype.hc=function(a){return this.pa.P(a,0)};b.prototype.uc=function(a){return this.pa.P(a,1)};b.prototype.clear=function(){for(var a=this.Xd;-1!=a;)a=this.Fg(a)};b.prototype.CB=function(a){for(var b=this.uc(a);-1!=b;){var c=
b,b=this.he(c);this.ck(c)}this.pa.N(a,0,-1);this.pa.N(a,1,-1);this.Gy(a,0)};b.prototype.u=function(){return 0==this.ci.size};b.prototype.HC=function(){return this.ci.size};b.prototype.tq=function(a){return this.pa.P(a,4)};b.prototype.Bw=function(a){return this.pa.P(a,3)};return b}();a.Zn=b})(A||(A={}));(function(a){var b=function(){function b(c){void 0===c?(this.bg=new a.Gc(2),this.pa=new a.Gc(4),this.Xd=-1,this.At=!0):(this.bg=new a.Gc(2),this.pa=new a.Gc(c?4:2),this.Xd=-1,this.At=c)}b.prototype.ck=
function(a){this.bg.Kc(a)};b.prototype.nu=function(){return this.bg.ce()};b.prototype.Qs=function(a){this.pa.Kc(a)};b.prototype.Xx=function(){return this.pa.ce()};b.prototype.jh=function(){var a=this.Xx();this.At&&(this.pa.N(a,3,this.Xd),-1!=this.Xd&&this.pa.N(this.Xd,2,a),this.Xd=a);return a};b.prototype.Fg=function(a){for(var b=this.hc(a);-1!=b;){var c=b,b=this.cb(b);this.ck(c)}this.At&&(b=this.pa.P(a,2),c=this.pa.P(a,3),-1!=b?this.pa.N(b,3,c):this.Xd=c,-1!=c&&this.pa.N(c,2,b));this.Qs(a)};b.prototype.Cr=
function(a){this.pa.ee(a)};b.prototype.addElement=function(a,b){var c=this.pa.P(a,1),n=this.nu();-1!=c?this.bg.N(c,1,n):this.pa.N(a,0,n);this.pa.N(a,1,n);this.bg.N(n,0,b);return n};b.prototype.$l=function(a){this.bg.ee(a)};b.prototype.Kc=function(a,b,c){-1!=b?(this.bg.N(b,1,this.bg.P(c,1)),this.pa.P(a,1)==c&&this.pa.N(a,1,b)):(this.pa.N(a,0,this.bg.P(c,1)),this.pa.P(a,1)==c&&this.pa.N(a,1,-1));this.ck(c)};b.prototype.Pv=function(a,b){var c=this.pa.P(a,1),n=this.pa.P(b,0);-1!=n&&(-1!=c?this.bg.N(c,
1,n):this.pa.N(a,0,n),this.pa.N(a,1,this.pa.P(b,1)));this.At&&(c=this.pa.P(b,2),n=this.pa.P(b,3),-1!=c?this.pa.N(c,3,n):this.Xd=n,-1!=n&&this.pa.N(n,2,c));this.Qs(b)};b.prototype.ea=function(a){return this.bg.P(a,0)};b.prototype.Vi=function(a,b){this.bg.N(a,0,b)};b.prototype.cb=function(a){return this.bg.P(a,1)};b.prototype.hc=function(a){return this.pa.P(a,0)};b.prototype.Em=function(a){return this.ea(this.hc(a))};b.prototype.clear=function(){this.bg.Nh(!0);this.pa.Nh(!0);this.Xd=-1};b.prototype.u=
function(a){return void 0===a?0==this.bg.size:-1==this.pa.P(a,0)};b.prototype.HC=function(){return this.bg.size};b.prototype.Bw=function(a){return this.pa.P(a,3)};return b}();a.Tr=b})(A||(A={}));(function(a){var b=function(){function b(){}b.jz=function(c,e,h,n,d,f,g){var k=new a.b;k.K(c);c=new a.b;c.K(e);d.uv(k);d.uv(c);e=d.ls(k);var m=d.ls(c);0==m&&(m=d.CC());if(k.x!=c.x&&(k.y!=c.y||k.y!=d.D&&k.y!=d.H)||m>e!=f){e=d.vA(k);var m=d.vA(c),q,r=f?1:3;do e=e+r&3,q=d.uu(e),0!=g&&(n=b.jz(k,q,h,n,d,f,g)),
h[n++].na(q.x,q.y),k=q;while((e&3)!=m);0!=g&&(n=b.jz(k,c,h,n,d,f,g))}else if(d=new a.b,d.na(c.x-k.x,c.y-k.y),0!=g&&(g=a.J.truncate(d.xJ()/g),0<g)){d.scale(1/(g+1));for(f=0;f<g;f++)k.add(d),h[n++].na(k.x,k.y)}return n};b.Ad=function(a,b,c){b=b.kv();a=null!=a?a.wq():0;c&&(b*=4,a*=1.1);return Math.max(a,b)};b.zs=function(a){return 2*Math.sqrt(2)*a};b.TJ=function(a){return Math.sqrt(2)*a};b.Cg=function(c,e,h){var n=new a.i;e.s(n);return b.Ad(c,n,h)};b.rB=function(a,b,c){b=b.Ah(1,0).kv();a=null!=a?a.wq():
0;c&&(b*=4,a*=1.1);return Math.max(a,b)};b.ZT=function(b,e){var c=new a.i;b.ed(c);c.Eb(e);return c};b.Zs=function(b,e){var c=new a.i;b.ed(c);var n=new a.i;e.ed(n);c.Eb(n);return c};b.eU=function(b,e){var c=b.GN(e),n=b.Fa(e),d=b.Ec(e),f=b.Ga(c);c==n?(d=b.Ga(d-1),c=b.Ga(n+1)):c==d-1?(d=b.Ga(c-1),c=b.Ga(n)):(d=b.Ga(c-1),c=b.Ga(c+1));f=a.b.zn(d,f,c);return 0==f?0<b.no(e):-1==f};b.BK=function(b){var e=new a.i;b.ed(e);if(e.u())return null;var c=new a.bo(e,8),n=-1,d=new a.i,f=!1;do for(var g=0,k=b.fa();g<
k;g++)if(b.Ti(g,d),n=c.jt(g,d,n),-1==n){if(f)throw a.g.sa("internal error");b.um(e,!1);f=!0;c.reset(e,8);break}else f=!1;while(f);return c};b.nB=function(b){var e=new a.i;b.ed(e);for(var c=new a.bo(e,8),n=-1,d=b.Da(),f=new a.i,g=!1;d.lb();)for(;d.Ma();){var k=d.ja(),m=d.Kb();k.s(f);n=c.jt(m,f,n);if(-1==n){if(g)throw a.g.xa();b.um(e,!1);g=!0;c.reset(e,8);d.Lk();break}}return c};b.ij=function(b,e){var c=new a.i;b.ed(c);for(var n=new a.bo(c,8),d=-1,f=new a.i,g=b.Da(),k=!1;g.lb();)for(;g.Ma();){var m=
g.ja(),q=g.Kb();m.s(f);if(f.kc(e)&&(d=n.jt(q,f,d),-1==d)){if(k)throw a.g.sa("internal error.");b.um(c,!1);k=!0;n.reset(c,8);g.Lk();break}}return n};b.CT=function(b){var e=new a.i;b.ed(e);for(var c=new a.bo(e,8),n=new a.b,d=new a.i,f=!1,g=0;g<b.G();g++)if(b.A(g,n),d.L(n),-1==c.lg(g,d)){if(f)throw a.g.xa();b.um(e,!1);f=!0;c.reset(e,8);g=-1}return c};b.oB=function(b,e){for(var c=new a.bo(e,8),n=new a.b,d=!1,f=new a.i,g=0;g<b.G();g++)if(b.A(g,n),e.contains(n)&&(f.L(n),-1==c.lg(g,f))){if(d)throw a.g.xa();
d=!0;g=new a.i;b.um(g,!1);c.reset(g,8);g=-1}return c};b.zN=function(b,e,c){var n=new a.i,d=new a.i;b.ed(n);e.ed(d);n.R(c,c);d.R(c,c);var f=new a.i;f.L(n);f.Ha(d);b=b.Da();e=e.Da();var g=new a.rz;g.YF(c);var k=!1;for(g.jG();b.lb();)for(;b.Ma();)b.ja().s(n),n.kc(f)&&(k=!0,c=new a.i,c.L(n),g.OA(b.Kb(),c));g.$B();if(!k)return null;n=!1;for(g.iG();e.lb();)for(;e.Ma();)e.ja().s(d),d.kc(f)&&(n=!0,c=new a.i,c.L(d),g.LA(e.Kb(),c));g.ZB();return n?g:null};b.AN=function(b,e,c,n,d){var f=b.F(),g=e.F(),k=new a.i,
m=new a.i;b.ed(k);e.ed(m);k.R(c,c);m.R(c,c);var q=new a.i;q.L(k);q.Ha(m);var r=new a.rz;r.YF(c);var s=!1;r.jG();var t=0;for(c=b.fa();t<c;t++)if(!n||f!=a.j.Polygon||b.pt(t))b.Ti(t,k),k.kc(q)&&(s=!0,r.OA(t,k));r.$B();if(!s)return null;b=!1;r.iG();n=0;for(c=e.fa();n<c;n++)if(!d||g!=a.j.Polygon||e.pt(n))e.Ti(n,m),m.kc(q)&&(b=!0,r.LA(n,m));r.ZB();return b?r:null};b.gU=function(a,b){return 0<a.sj(b)};b.yT=function(b,e){var c=new a.i;b.gR(e,c);var c=new a.bo(c,8),n=-1,d=new a.i,f=b.Da();f.uy(e);if(f.lb())for(;f.Ma();){var g=
f.ja(),k=f.Kb();g.ed(d);n=c.jt(k,d,n);if(-1==n)throw a.g.sa("internal error");}return c};return b}();a.Ja=b})(A||(A={}));(function(a){var b=function(){function a(b){this.Oa=b}a.prototype.compare=function(a,b,e){a=a.ea(e);e=this.Oa.vj(b);var c=this.Oa.vj(a);return e<c?-1:e==c?h.No(b)&&h.rt(a)?-1:h.No(a)&&h.rt(b)?1:0:1};return a}(),c=function(){function a(b){this.Oa=b}a.prototype.Xp=function(a,b,e){this.Oa.xS(e,a,b)};a.prototype.Ko=function(a){return this.Oa.vj(a)};return a}(),d;(function(a){a[a.initialize=
0]="initialize";a[a.pIn=1]="pIn";a[a.pL=2]="pL";a[a.pR=3]="pR";a[a.pT=4]="pT";a[a.right=5]="right";a[a.left=6]="left";a[a.all=7]="all"})(d||(d={}));var e=function(){function b(){this.Oa=null;this.gi=new a.Od;this.ug=new a.ha(0);this.$f=[0,0]}b.prototype.Ch=function(a,b){this.gi.ra=a.ra-b;this.gi.wa=a.wa+b;this.ug.resize(0);this.Vd=0;this.$f[0]=0};b.prototype.ty=function(b,e,c){if(b>e)throw a.g.O();this.gi.ra=b-c;this.gi.wa=e+c;this.ug.resize(0);this.Vd=0;this.$f[0]=0};b.prototype.Gn=function(a,b){this.gi.ra=
a-b;this.gi.wa=a+b;this.ug.resize(0);this.Vd=0;this.$f[0]=0};b.prototype.next=function(){if(!this.Oa.To)throw a.g.ya();if(0>this.Vd)return-1;for(var b=!0;b;)switch(this.$f[this.Vd]){case 1:b=this.tQ();break;case 2:b=this.uQ();break;case 3:b=this.vQ();break;case 4:b=this.wQ();break;case 5:b=this.AR();break;case 6:b=this.rP();break;case 7:b=this.WJ();break;case 0:b=this.Pw();break;default:throw a.g.xa();}return-1!=this.pg?this.Ao()>>1:-1};b.IT=function(a,e,c){var h=new b;h.Oa=a;h.ug.yb(20);h.Ch(e,c);
return h};b.JT=function(a,e,c){var h=new b;h.Oa=a;h.ug.yb(20);h.Gn(e,c);return h};b.Pa=function(a){var e=new b;e.Oa=a;e.ug.yb(20);e.Vd=-1;return e};b.prototype.Pw=function(){this.pg=this.YD=this.di=this.zc=-1;if(null!=this.Oa.Zd&&0<this.Oa.Zd.size)return this.$f[0]=1,this.di=this.Oa.$e,!0;this.Vd=-1;return!1};b.prototype.tQ=function(){this.zc=this.di;if(-1==this.zc)return this.pg=this.Vd=-1,!1;var a=this.Oa.Bo(this.zc);if(this.gi.wa<a)return a=this.Oa.uj(this.zc),this.di=this.Oa.Di(this.zc),-1!=a&&
(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=6),!0;if(a<this.gi.ra)return a=this.Oa.uj(this.zc),this.di=this.Oa.tj(this.zc),-1!=a&&(this.vh=this.Oa.sq(a),this.$f[++this.Vd]=5),!0;this.$f[this.Vd]=2;this.YD=this.zc;a=this.Oa.uj(this.zc);this.di=this.Oa.Di(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);return!0};b.prototype.uQ=function(){this.zc=this.di;if(-1==this.zc)return this.$f[this.Vd]=3,this.di=this.Oa.tj(this.YD),!0;if(this.Oa.Bo(this.zc)<this.gi.ra){var a=this.Oa.uj(this.zc);this.di=
this.Oa.tj(this.zc);-1!=a&&(this.vh=this.Oa.sq(a),this.$f[++this.Vd]=5);return!0}a=this.Oa.uj(this.zc);this.di=this.Oa.Di(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);a=this.Oa.tj(this.zc);-1!=a&&this.ug.add(a);return!0};b.prototype.vQ=function(){this.zc=this.di;if(-1==this.zc)return this.$f[this.Vd]=4,!0;if(this.gi.wa<this.Oa.Bo(this.zc)){var a=this.Oa.uj(this.zc);this.di=this.Oa.Di(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=6);return!0}a=this.Oa.uj(this.zc);this.di=
this.Oa.tj(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);a=this.Oa.Di(this.zc);-1!=a&&this.ug.add(a);return!0};b.prototype.wQ=function(){if(0==this.ug.size)return this.pg=this.Vd=-1,!1;this.zc=this.ug.get(this.ug.size-1);this.ug.resize(this.ug.size-1);var a=this.Oa.uj(this.zc);-1!=a&&(this.vh=this.Oa.gk(a),this.$f[++this.Vd]=7);-1!=this.Oa.Di(this.zc)&&this.ug.add(this.Oa.Di(this.zc));-1!=this.Oa.tj(this.zc)&&this.ug.add(this.Oa.tj(this.zc));return!0};b.prototype.rP=function(){this.pg=
this.vh;if(-1!=this.pg&&h.No(this.Ao())&&this.Oa.vj(this.Ao())<=this.gi.wa)return this.vh=this.GC(),!1;this.Vd--;return!0};b.prototype.AR=function(){this.pg=this.vh;if(-1!=this.pg&&h.rt(this.Ao())&&this.Oa.vj(this.Ao())>=this.gi.ra)return this.vh=this.aO(),!1;this.Vd--;return!0};b.prototype.WJ=function(){this.pg=this.vh;if(-1!=this.pg&&h.No(this.Ao()))return this.vh=this.GC(),!1;this.Vd--;return!0};b.prototype.GC=function(){return this.Oa.Df?this.Oa.If.cb(this.pg):this.Oa.ki.cb(this.pg)};b.prototype.aO=
function(){return this.Oa.Df?this.Oa.If.he(this.pg):this.Oa.ki.he(this.pg)};b.prototype.Ao=function(){return this.Oa.Df?this.Oa.If.ea(this.pg):this.Oa.ki.getData(this.pg)};return b}();a.HT=e;var h=function(){function h(a){this.Al=this.rh=this.If=this.ki=this.Hl=this.Ki=this.Zd=this.Li=null;this.Df=a;this.To=this.Ct=!1}h.prototype.Tp=function(){this.Sj(!0)};h.prototype.eq=function(b,e){if(!this.Ct)throw a.g.ya();this.Li.push(new a.Od(b,e))};h.prototype.vo=function(){if(!this.Ct)throw a.g.sa("invalid call");
this.Ct=!1;this.To=!0;this.Df||(this.AO(),this.It=this.Li.length)};h.prototype.lg=function(b){if(!this.Df||!this.To)throw a.g.O("invalid call");if(-1==this.$e){var e=this.Li.length;if(this.mx){var c=new a.ha(0);c.yb(2*e);this.$E(c);this.rh.yb(2*e);this.rh.resize(0);this.ZE(c);this.Hl.resize(e,-1);this.Hl.dh(-1,0,e);this.mx=!1}else this.Hl.dh(-1,0,e);this.$e=this.Ls()}e=this.cD(b<<1,this.$e);c=this.If.addElement((b<<1)+1,this.Gw(e));this.TF(e,c);this.Hl.set(b,e);this.It++};h.prototype.remove=function(b){if(!this.Df||
!this.To)throw a.g.sa("invalid call");var e=this.Hl.get(b);if(-1==e)throw a.g.O("the interval does not exist in the interval tree");this.Hl.set(b,-1);this.It--;var c=this.Gw(e),h;h=this.If.gO(c);this.If.ld(this.KN(e),c);this.If.ld(this.dO(e),c);b=this.If.size(c);0==b&&(this.If.eM(c),this.WF(h,-1));this.Ki.Kc(e);for(var c=this.JC(h),d=this.Di(h),n=this.tj(h),e=0;!(0<b||h==this.$e||-1!=d&&-1!=n);)h==this.Di(c)?-1!=d?(this.Tj(c,d),this.Xi(d,c),this.Tj(h,-1)):-1!=n?(this.Tj(c,n),this.Xi(n,c),this.Vj(h,
-1)):this.Tj(c,-1):-1!=d?(this.Vj(c,d),this.Xi(d,c),this.Tj(h,-1)):-1!=n?(this.Vj(c,n),this.Xi(n,c),this.Vj(h,-1)):this.Vj(c,-1),this.Xi(h,-1),e++,h=c,c=this.uj(h),b=-1!=c?this.If.size(c):0,d=this.Di(h),n=this.tj(h),c=this.JC(h)};h.prototype.reset=function(){if(!this.Df||!this.To)throw a.g.O("invalid call");this.Sj(!1)};h.prototype.size=function(){return this.It};h.prototype.Se=function(){return e.Pa(this)};h.prototype.$E=function(a){for(var b=this.Li.length,e=0;e<2*b;e++)a.add(e);this.yS(a,2*b)};
h.prototype.ZE=function(a){for(var b=NaN,e=0;e<a.size;e++){var c=a.get(e),h=this.vj(c);h!=b&&(this.rh.add(c),b=h)}};h.prototype.AO=function(){var b=this.Li.length,e=new a.ha(0);e.yb(2*b);this.$E(e);this.rh.yb(2*b);this.rh.resize(0);this.ZE(e);this.Ki.ee(b);this.ki.$l(2*b);var c=a.Bc.Dg(b);c.dh(-1,0,b);this.$e=this.Ls();for(b=0;b<e.size;b++){var h=e.get(b),d=c.get(h>>1);-1!=d?this.TF(d,this.ki.addElement(this.Gw(d),h)):(d=this.cD(h,this.$e),c.set(h>>1,d))}};h.prototype.cD=function(b,e){var c=e,h=e,
d=e,n,l=-1,f=0,g=this.rh.size-1,k=0,m=b>>1,q=NaN,r=NaN;n=!0;for(var s=this.QN(m),m=this.NN(m);n;){f<g?(k=f+a.J.truncate((g-f)/2),-1==this.qw(c)&&this.CF(c,this.rh.get(k),this.rh.get(k+1))):-1==this.qw(c)&&this.CF(c,this.rh.get(f),this.rh.get(f));var t=this.Bo(c);if(m<t)-1!=d&&(d==c?(h=c,q=t,d=this.Di(c),-1!=d?r=this.Bo(d):r=NaN):r>t&&(t<q?this.Tj(h,c):this.Vj(h,c),this.Vj(c,d),this.Df&&(this.Xi(c,h),this.Xi(d,c)),h=c,q=t,d=-1,r=NaN)),g=this.LN(c),-1==g&&(g=this.Ls(),this.XR(c,g)),c=g,g=k;else if(s>
t)-1!=d&&(d==c?(h=c,q=t,d=this.tj(c),-1!=d?r=this.Bo(d):r=NaN):r<t&&(t<q?this.Tj(h,c):this.Vj(h,c),this.Tj(c,d),this.Df&&(this.Xi(c,h),this.Xi(d,c)),h=c,q=t,d=-1,r=NaN)),f=this.eO(c),-1==f&&(f=this.Ls(),this.hS(c,f)),c=f,f=k+1;else{n=this.uj(c);-1==n&&(n=this.SL(c),this.WF(c,n));var u=this.JJ(n,b),l=this.RL();this.kS(l,n);this.WR(l,u);c!=d&&(t<q?this.Tj(h,c):this.Vj(h,c),this.Df&&this.Xi(c,h),-1!=d&&(r<t?this.Tj(c,d):this.Vj(c,d),this.Df&&this.Xi(d,c)));n=!1}}return l};h.prototype.Ls=function(){return this.Zd.ce()};
h.prototype.SL=function(a){return this.Df?this.If.lq(a):this.ki.jh(a)};h.prototype.RL=function(){return this.Ki.ce()};h.prototype.Sj=function(e){e?(this.Ct=this.mx=!0,this.To=!1,null==this.rh?this.rh=a.Bc.Dg(0):this.rh.resize(0),null==this.Li?this.Li=[]:this.Li.length=0):this.mx=!1;this.Df?null==this.Hl?(this.Hl=a.Bc.Dg(0),this.If=new a.bj,this.If.In(new b(this))):this.If.clear():null==this.ki?this.ki=new a.Zn:this.ki.clear();null==this.Zd?(this.Ki=new a.Gc(3),this.Zd=new a.Gc(this.Df?8:7)):(this.Ki.Nh(!1),
this.Zd.Nh(!1));this.$e=-1;this.It=0};h.prototype.CF=function(a,b,e){this.RR(a,b);this.SR(a,e)};h.prototype.Bo=function(a){var b=this.qw(a);if(-1==b)return NaN;b=this.vj(b);a=this.vj(this.vN(a));return b==a?b:0.5*(b+a)};h.prototype.RR=function(a,b){this.Zd.N(a,0,b)};h.prototype.SR=function(a,b){this.Zd.N(a,1,b)};h.prototype.XR=function(a,b){this.Zd.N(a,3,b)};h.prototype.hS=function(a,b){this.Zd.N(a,4,b)};h.prototype.WF=function(a,b){this.Zd.N(a,2,b)};h.prototype.Tj=function(a,b){this.Zd.N(a,5,b)};
h.prototype.Vj=function(a,b){this.Zd.N(a,6,b)};h.prototype.Xi=function(a,b){this.Zd.N(a,7,b)};h.prototype.kS=function(a,b){this.Ki.N(a,0,b)};h.prototype.JJ=function(a,b){return this.Df?this.If.addElement(b,a):this.ki.addElement(a,b)};h.prototype.WR=function(a,b){this.Ki.N(a,1,b)};h.prototype.TF=function(a,b){this.Ki.N(a,2,b)};h.prototype.gk=function(a){return this.Df?this.If.hc(a):this.ki.hc(a)};h.prototype.sq=function(a){return this.Df?this.If.uc(a):this.ki.uc(a)};h.No=function(a){return 0==(a&1)};
h.rt=function(a){return 1==(a&1)};h.prototype.qw=function(a){return this.Zd.P(a,0)};h.prototype.vN=function(a){return this.Zd.P(a,1)};h.prototype.uj=function(a){return this.Zd.P(a,2)};h.prototype.LN=function(a){return this.Zd.P(a,3)};h.prototype.eO=function(a){return this.Zd.P(a,4)};h.prototype.Di=function(a){return this.Zd.P(a,5)};h.prototype.tj=function(a){return this.Zd.P(a,6)};h.prototype.JC=function(a){return this.Zd.P(a,7)};h.prototype.Gw=function(a){return this.Ki.P(a,0)};h.prototype.KN=function(a){return this.Ki.P(a,
1)};h.prototype.dO=function(a){return this.Ki.P(a,2)};h.prototype.QN=function(a){return this.Li[a].ra};h.prototype.NN=function(a){return this.Li[a].wa};h.prototype.yS=function(b,e){null==this.Al&&(this.Al=new a.Qr);var h=new c(this);this.Al.sort(b,0,e,h)};h.prototype.xS=function(a,b,e){var c=this;a.yd(b,e,function(a,b){var e=c.vj(a),d=c.vj(b);return e<d||e==d&&h.No(a)&&h.rt(b)?-1:1})};h.prototype.vj=function(a){var b=this.Li[a>>1];return h.No(a)?b.ra:b.wa};return h}();a.$p=h})(A||(A={}));(function(a){var b=
function(b){function c(e,h,d,l){b.call(this);void 0===e?this.description=a.Pd.Tf():void 0===d?this.description=e:(this.description=a.Pd.Tf(),this.My(e,h),this.Ok(d,l))}H(c,b);c.prototype.F=function(){return a.j.Line};c.prototype.ac=function(){var a=this.oa-this.ma,b=this.ka-this.ia;return Math.sqrt(a*a+b*b)};c.prototype.mg=function(a){var b=this.oa-this.ma,c=this.ka-this.ia;return Math.sqrt(b*b+c*c)<=a};c.prototype.mD=function(){return!1};c.prototype.Pf=function(){var b=new a.b;b.qc(this.pc(),this.Nb());
return b};c.prototype.Dp=function(b){b.Ka();b.Qf(this.description);var c=new a.i;this.s(c);b.Bu(c);for(var c=1,d=this.description.Ba;c<d;c++)for(var l=this.description.Id(c),f=a.qa.Xa(l);c<f;c++){var g=this.Ah(l,0);b.setInterval(l,0,g)}};c.prototype.s=function(a){a.L(this.oa,this.ka,this.ma,this.ia);a.normalize()};c.prototype.Dn=function(a){a.Ka();a.Eb(this.oa,this.ka,this.zd(0,1,0));a.Eb(this.ma,this.ia,this.zd(1,1,0))};c.prototype.Pe=function(b){if(b instanceof a.Bg){this.rc();var c=new a.b;c.x=
this.oa;c.y=this.ka;b.Zi(c,c);this.oa=c.x;this.ka=c.y;c.x=this.ma;c.y=this.ia;b.Zi(c,c);this.ma=c.x;this.ia=c.y}else this.rc(),c=new a.fe,c.x=this.oa,c.y=this.ka,c.z=this.zd(0,1,0),c=b.Rn(c),this.oa=c.x,this.ka=c.y,this.pm(0,1,0,c.z),c.x=this.ma,c.y=this.ia,c.z=this.zd(1,1,0),c=b.Rn(c),this.ma=c.x,this.ia=c.y,this.pm(1,1,0,c.z)};c.prototype.Qa=function(){return new c(this.description)};c.prototype.jv=function(a,b){return 0.5*(this.ma-a-(this.oa-a))*(this.ia-b+(this.ka-b))};c.prototype.Qu=function(a){return a*
this.ac()};c.prototype.AD=function(a){return a/this.ac()};c.prototype.sC=function(b){return a.vi.tt(this.oa,this.ma,b)};c.prototype.uN=function(b){return a.vi.tt(this.ka,this.ia,b)};c.prototype.ym=function(b,c){var d=new a.Ag;this.Bi(b,c,d);return d.get()};c.prototype.Bi=function(b,c,d){if(null==d)throw a.g.O();d.kq();d=d.get();d.Qf(this.description);var l=new a.b;this.Lb(b,l);d.My(l.x,l.y);this.Lb(c,l);d.Ok(l.x,l.y);for(var l=1,f=this.description.Ba;l<f;l++)for(var g=this.description.Gd(l),k=a.qa.Xa(g),
m=0;m<k;m++){var q=this.md(b,g,m);d.Ly(g,m,q);q=this.md(c,g,m);d.By(g,m,q)}};c.prototype.md=function(b,c,d){if(0==c)return 0==d?this.Lb(b).x:this.Lb(b).y;switch(a.qa.IN(c)){case 0:return 0.5>b?this.ft(c,d):this.Vs(c,d);case 1:var l=this.ft(c,d);c=this.Vs(c,d);return a.vi.tt(l,c,b);case 2:throw a.g.sa("not implemented");}throw a.g.xa();};c.prototype.Hd=function(a,b){var c=this.ma-this.oa,d=this.ia-this.ka,l=c*c+d*d;if(0==l)return 0.5;c=((a.x-this.oa)*c+(a.y-this.ka)*d)/l;b||(0>c?c=0:1<c&&(c=1));return c};
c.prototype.mt=function(a,b,c,d){if(a){a=this.ia-this.ka;if(0==a)return b==this.ia?-1:0;b=(b-this.ka)/a;if(0>b||1<b)return 0;null!=c&&(c[0]=this.sC(b))}else{a=this.ma-this.oa;if(0==a)return b==this.ma?-1:0;b=(b-this.oa)/a;if(0>b||1<b)return 0;null!=c&&(c[0]=this.uN(b))}null!=d&&(d[0]=b);return 1};c.prototype.xe=function(a,b){var c=this.ia-this.ka;if(0==c)return a==this.ia?b:NaN;var c=(a-this.ka)/c,d=this.sC(c);1==c&&(d=this.ma);return d};c.prototype.ps=function(a,b,c){return 0<=this.fo(a.x,a.y,b,
c)};c.prototype.Kh=function(a,b,c){return 0<=this.fo(a,b,c,!0)};c.prototype.Dq=function(a,b){return this.ps(a,b,!1)};c.prototype.KE=function(){if(this.ia<this.ka||this.ia==this.ka&&this.ma<this.oa){var a=this.oa;this.oa=this.ma;this.ma=a;a=this.ka;this.ka=this.ia;this.ia=a;for(var a=0,b=this.description.sp-2;a<b;a++){var c=this.ga[a];this.ga[a]=this.ga[a+b];this.ga[a+b]=c}}};c.prototype.qs=function(b,c){var d=a.b.Pa(b,c);d.sub(this.Nb());var l=new a.b;l.qc(this.pc(),this.Nb());var f=l.Ai(d),d=8.881784197001252E-16*
(Math.abs(l.x*d.y)+Math.abs(l.y*d.x));return f>d?-1:f<-d?1:0};c.prototype.fo=function(b,c,d,l){var f=this.oa,g=this.ka,k=b-f,m=c-g,q=Math.sqrt(k*k+m*m);if(q<=Math.max(d,6.661338147750939E-16*q))return l&&0==q?NaN:0;k=b-this.ma;m=c-this.ia;q=Math.sqrt(k*k+m*m);if(q<=Math.max(d,6.661338147750939E-16*q))return l&&0==q?NaN:1;var k=this.ma-this.oa,m=this.ia-this.ka,r=Math.sqrt(k*k+m*m);if(0<r){l=1/r;var k=k*l,m=m*l,s=b-f,t=c-g,q=s*k+t*m,u=1.7763568394002505E-15*(Math.abs(s*k)+Math.abs(t*m)),C=k,k=-m,m=
C,C=s*k+t*m,k=1.7763568394002505E-15*(Math.abs(s*k)+Math.abs(t*m)),m=Math.max(d,u);if(q<-m||q>r+m)return NaN;r=Math.max(d,k);if(Math.abs(C)<=r&&(l=a.J.Jr(q*l,0,1),0.5>=l?(q=this.oa+(this.ma-this.oa)*l,r=this.ka+(this.ia-this.ka)*l):(q=this.ma-(this.ma-this.oa)*(1-l),r=this.ia-(this.ia-this.ka)*(1-l)),a.b.Xv(q,r,b,c)<=d)){if(0.5>l){if(a.b.Xv(q,r,f,g)<=d)return 0}else if(a.b.Xv(q,r,this.ma,this.ia)<=d)return 1;return l}}return NaN};c.prototype.mc=function(a){return null==a?!1:a==this?!0:a.constructor!==
this.constructor?!1:this.rJ(a)};c.prototype.AA=function(b,c,d){var l=d?this.oa:this.ma,f=d?this.ka:this.ia;d=new a.b;d.x=b.ma-l;d.y=b.ia-f;var g=c.ml(d),k=6.661338147750939E-16*c.uA(d);return g>k?(d.x=b.oa-l,d.y=b.ka-f,b=c.ml(d),c=6.661338147750939E-16*c.uA(d),b<=c):!0};c.prototype.zA=function(b){var c=new a.b;c.x=this.ma-this.oa;c.y=this.ia-this.ka;if(!this.AA(b,c,!1))return!1;c.zp();return this.AA(b,c,!0)?!0:!1};c.ye=function(a,b){var c=a.qs(b.oa,b.ka),d=a.qs(b.ma,b.ia);if(0>c&&0>d||0<c&&0<d)return!1;
c=b.qs(a.oa,a.ka);d=b.qs(a.ma,a.ia);if(0>c&&0>d||0<c&&0<d)return!1;c=a.ac();d=b.ac();return c>d?a.zA(b):b.zA(a)};c.Jd=function(b,c,d){var l=a.b.Pa(NaN,NaN),f=b.ma-b.oa,g=b.ia-b.ka,k=c.ma-c.oa,m=c.ia-c.ka,q=k*g-f*m;if(0==q)return l;var r=8.881784197001252E-16*(Math.abs(k*g)+Math.abs(f*m)),s=c.oa-b.oa,t=c.ka-b.ka,u=k*t-s*m,C=8.881784197001252E-16*(Math.abs(k*t)+Math.abs(s*m)),k=u/q,m=Math.abs(q),u=(C*m+r*Math.abs(u))/(q*q)+2.220446049250313E-16*Math.abs(k);if(k<-u||k>1+u)return l;u=f*t-s*g;g=8.881784197001252E-16*
(Math.abs(f*t)+Math.abs(s*g));f=u/q;q=(g*m+r*Math.abs(u))/(q*q)+2.220446049250313E-16*Math.abs(f);if(f<-q||f>1+q)return l;q=a.J.Jr(k,0,1);r=a.J.Jr(f,0,1);k=b.Lb(q);f=c.Lb(r);g=new a.b;g.qc(k,f);if(g.length()>d&&(g.add(k,f),g.scale(0.5),q=b.Hd(g,!1),r=c.Hd(g,!1),b=b.Lb(q),c=c.Lb(r),b.sub(c),b.length()>d))return l;l.na(q,r);return l};c.wJ=function(a,b,d,f){var g=0;if(a.oa==b.oa&&a.ka==b.ka||a.oa==b.ma&&a.ka==b.ia)if(g++,!f)return 1;if(a.ma==b.oa&&a.ia==b.ka||a.ma==b.ma&&a.ia==b.ia){g++;if(2==g)return 2;
if(!f)return 1}return b.Kh(a.oa,a.ka,d)||b.Kh(a.ma,a.ia,d)||a.Kh(b.oa,b.ka,d)||a.Kh(b.ma,b.ia,d)?1:f&&0!=g?0:0==c.ye(a,b)?0:1};c.nv=function(b,h,d,f,g,k){var m=0,q=b.fo(h.oa,h.ka,k,!1),r=b.fo(h.ma,h.ia,k,!1),s=h.fo(b.oa,b.ka,k,!1),t=h.fo(b.ma,b.ia,k,!1);isNaN(q)||(null!=f&&(f[m]=q),null!=g&&(g[m]=0),null!=d&&(d[m]=a.b.Pa(h.oa,h.ka)),m++);isNaN(r)||(null!=f&&(f[m]=r),null!=g&&(g[m]=1),null!=d&&(d[m]=a.b.Pa(h.ma,h.ia)),m++);2==m||isNaN(s)||0==q&&0==s||0==r&&1==s||(null!=f&&(f[m]=0),null!=g&&(g[m]=s),
null!=d&&(d[m]=a.b.Pa(b.oa,b.ka)),m++);2==m||isNaN(t)||1==q&&0==t||1==r&&1==t||(null!=f&&(f[m]=1),null!=g&&(g[m]=t),null!=d&&(d[m]=a.b.Pa(h.ma,h.ia)),m++);if(0<m)return 2==m&&null!=f&&f[0]>f[1]&&(b=f[0],f[0]=f[1],f[1]=b,null!=g&&(f=g[0],g[0]=g[1],g[1]=f),null!=d&&(g=a.b.Pa(d[0].x,d[0].y),d[0]=d[1],d[1]=g)),m;m=c.Jd(b,h,k);if(isNaN(m.x))return 0;null!=d&&(d[0]=b.Lb(m.x));null!=f&&(f[0]=m.x);null!=g&&(g[0]=m.y);return 1};c.prototype.TC=function(){return 0};c.prototype.co=function(){};c.prototype.toString=
function(){return"Line: ["+this.oa.toString()+", "+this.ka.toString()+", "+this.ma.toString()+", "+this.ia.toString()+"]"};return c}(a.fA);a.zb=b})(A||(A={}));(function(a){var b=function(){function a(){this.Gl=[];this.va=-1}a.prototype.za=function(){return this.va};a.prototype.next=function(){if(null!=this.Gl&&0!=this.Gl.length){this.va++;var a=this.Gl[0];1>=this.Gl.length?this.Gl=[]:this.Gl=this.Gl.slice(1);return a}return this.Gl=null};return a}();a.LT=b})(A||(A={}));(function(a){(function(a){a[a.enumFillRuleOddEven=
0]="enumFillRuleOddEven";a[a.enumFillRuleWinding=1]="enumFillRuleWinding"})(a.pI||(a.pI={}));var b=function(b){function c(e,h){b.call(this);this.Yf=!1;this.lp=null;this.Zo=this.$o=0;this.Uh=null;this.ng=!1;this.ud=this.li=this.Ge=this.rb=this.kb=null;this.ep=this.Ra=this.ap=0;if(void 0===h)this.Yf=e,this.ng=!1,this.ua=this.Zo=this.$o=this.ap=0,this.description=a.Pd.Tf();else{if(null==h)throw a.g.O();this.Yf=e;this.ng=!1;this.ua=this.Zo=this.$o=this.ap=0;this.description=h}this.Uh=null;this.Ra=0}H(c,
b);c.prototype.Im=function(){return 0<this.ap};c.prototype.mv=function(){this.rc();null==this.lp?this.lp=new a.Wa(this.description):this.lp.Qf(this.description)};c.prototype.Ty=function(b,c){var d=new a.b;d.x=b;d.y=c;this.Mr(d)};c.prototype.Mr=function(a){this.mv();this.lp.jc(a);this.ng=!0};c.prototype.ef=function(b){if(b.u())throw a.g.O();this.Ik(b.description);this.mv();b.copyTo(this.lp);this.ng=!0};c.prototype.hv=function(){var b=1;this.ng&&(this.mv(),null==this.kb?(this.kb=a.Bc.Dg(2),this.kb.write(0,
0),this.rb=a.Bc.so(2,0)):(this.kb.resize(this.kb.size+1,0),this.rb.resize(this.rb.size+1,0)),this.Yf&&this.rb.write(this.rb.size-2,1),b++);var c=this.ua;this.kb.write(this.kb.size-1,this.ua+b);this.io(c+b);this.rb.write(this.kb.size-1,0);this.ng&&(this.Hu(c,this.lp),this.ng=!1)};c.prototype.xj=function(a,b){this.hv();this.jc(this.ua-1,a,b)};c.prototype.Mm=function(a){this.hv();this.jc(this.ua-1,a)};c.prototype.lineTo=function(a){this.hv();this.Hu(this.ua-1,a)};c.prototype.qo=function(){var a;this.Ru();
void 0===a&&(this.ng=!1,a=this.fa()-1);var b=this.rb.read(a);this.rb.write(a,b|1);null!=this.Ge&&(a=this.Ec(a)-1,this.Ge.write(a,1),this.li.write(a,-1))};c.$i=function(a){return c.Jd[a]};c.prototype.wc=function(a){return 0!=(this.rb.read(a)&1)};c.prototype.Mo=function(a){if(this.wc(a))return!0;var b=this.Fa(a);a=this.Ec(a)-1;if(b>a)return!1;b=this.Ga(b);a=this.Ga(a);return b.vb(a)};c.prototype.xq=function(a){return 0!=(this.rb.read(a)&2)};c.prototype.Cc=function(b,c){this.Ik(b.description);if(b.F()==
a.j.Line){var d=new a.Wa;if(c||this.u())b.Fn(d),this.ef(d);b.Cn(d);this.lineTo(d)}else throw a.g.xa();};c.prototype.vs=function(a){var b=0==this.ua;this.Ty(a.w,a.D);this.xj(a.w,a.H);this.xj(a.C,a.H);this.xj(a.C,a.D);this.qo();this.ng=!1;b&&this.yf(256,!1)};c.prototype.Xc=function(b,c){if(!b.u()){for(var d=0==this.ua,l=new a.Wa(this.description),f=0;4>f;f++)b.uf(c?4-f-1:f,l),0==f?this.ef(l):this.lineTo(l);this.qo();this.ng=!1;d&&!c&&this.yf(256,!1)}};c.prototype.add=function(a,b){for(var c=0;c<a.fa();c++)this.$j(a,
c,!b)};c.prototype.$j=function(a,b,c){this.Cf(-1,a,b,c)};c.prototype.ko=function(){this.Rw()};c.prototype.xs=function(b,c,d,l,f){f||0!=this.fa()||(f=!0);0>c&&(c=b.fa()-1);if(c>=b.fa()||0>d||0>l||l>b.bt(c))throw a.g.sa("index out of bounds");if(0!=l){var g=b.wc(c)&&d+l==b.bt(c);if(!g||1!=l){this.ng=!1;this.Ik(b.description);d=b.Fa(c)+d+1;f&&(l++,d--);g&&l--;g=this.ua;this.io(this.ua+l);this.lc();if(f){if(0==l)return;this.kb.add(this.ua);f=b.rb.read(c);f&=-5;this.Yf&&(f|=1);this.rb.write(this.rb.size-
1,f);this.rb.add(0)}else this.kb.write(this.rb.size-1,this.ua);f=0;for(var k=this.description.Ba;f<k;f++){var m=this.description.Id(f),q=a.qa.Xa(m),r=b.description.zf(m);0>r||null==b.Ca[r]?this.Ca[f].ul(q*g,a.qa.ue(m),l*q,q*g):this.Ca[f].nk(q*g,b.Ca[r],q*d,l*q,!0,q,q*g)}if(this.Im())throw a.g.xa();if(b.xq(c))throw a.g.xa();this.de(1993)}}};c.prototype.Br=function(b){this.lc();var c=this.fa();0>b&&(b=c-1);if(b>=c)throw a.g.O();for(var d=this.Fa(b),l=this.Ia(b),f=0,g=this.description.Ba;f<g;f++)if(null!=
this.Ca[f]){var k=a.qa.Xa(this.description.Gd(f));this.Ca[f].oj(k*d,k*l,k*this.ua)}for(d=b+1;d<=c;d++)f=this.kb.read(d),this.kb.write(d-1,f-l);if(null==this.rb)for(d=b+1;d<=c;d++)b=this.rb.read(d),this.rb.write(d-1,b);this.kb.resize(c);this.rb.resize(c);this.ua-=l;this.rg-=l;this.de(1993)};c.prototype.Cf=function(b,c,d,l){if(c==this)throw a.g.O();if(d>=c.fa())throw a.g.O();var f=this.fa();if(b>f)throw a.g.O();0>b&&(b=f);0>d&&(d=c.fa()-1);this.ng=!1;this.Ik(c.description);c.lc();var g=c.Fa(d),k=c.Ia(d),
m=this.ua,q=c.wc(d)&&!l?1:0;this.io(this.ua+k);this.lc();for(var r=b<f?this.Fa(b):m,s=0,t=this.description.Ba;s<t;s++){var u=this.description.Gd(s),C=c.description.zf(u),w=a.qa.Xa(u);0<=C&&null!=c.Ca[C]?(0!=q&&this.Ca[s].nk(r*w,c.Ca[C],w*g,w,!0,w,w*m),this.Ca[s].nk((r+q)*w,c.Ca[C],w*(g+q),w*(k-q),l,w,w*(m+q))):this.Ca[s].ul(r*w,a.qa.ue(u),w*k,w*m)}this.kb.add(m+k);for(l=f;l>=b+1;l--)g=this.kb.read(l-1),this.kb.write(l,g+k);c.xq(d);this.rb.add(0);for(l=f-1;l>=b+1;l--)f=this.rb.read(l),f&=-5,this.rb.write(l+
1,f);f=c.UN().read(d);f&=-5;this.Yf&&(f|=1);this.rb.write(b,f)};c.prototype.Rw=function(){var b=-1,c=this.fa();if(b>c)throw a.g.O();0>b&&(b=c);this.ng=!1;this.lc();this.kb.add(this.ua);for(var d=c;d>=b+1;d--){var l=this.kb.read(d-1);this.kb.write(d,l+0)}this.rb.add(0);for(d=c-1;d>=b+1;d--)c=this.rb.read(d),c&=-5,this.rb.write(d+1,c);this.Yf&&this.rb.write(b,1)};c.prototype.dD=function(b,c,d){var l=-1;0>b&&(b=this.fa());if(b>this.fa()||l>this.Ia(b)||d>c.length)throw a.g.sa("index out of bounds");if(0!=
d){b==this.fa()&&(this.kb.add(this.ua),this.Yf?this.rb.add(1):this.rb.add(0));0>l&&(l=this.Ia(b));this.lc();var f=this.ua;this.io(this.ua+d);this.lc();for(var g=0,k=this.description.Ba;g<k;g++){var m=this.description.Gd(g),q=a.qa.Xa(m);this.Ca[g].km(q*(this.Fa(b)+l+d),(f-this.Fa(b)-l)*q,this.Ca[g],q*(this.Fa(b)+l),!0,q);0==g?this.Ca[g].Yp(q*(this.Fa(b)+l),d,c,0,!0):this.Ca[g].dh(a.qa.ue(m),(this.Fa(b)+l)*q,d*q)}this.Im()&&(this.Ge.km(this.Fa(b)+l+d,f-this.Fa(b)-l,this.Ge,this.Fa(b)+l,!0,1),this.li.km(this.Fa(b)+
l+d,f-this.Fa(b)-l,this.li,this.Fa(b)+l,!0,1),this.Ge.dh(1,this.Fa(b)+l,d),this.li.dh(-1,this.Fa(b)+l,d));b+=1;for(c=this.fa();b<=c;b++)this.kb.write(b,this.kb.read(b)+d)}};c.prototype.lf=function(b,c,d){var l=this.fa();0>b&&(b=this.fa());if(b>=l||c>this.Ia(b))throw a.g.sa("index out of bounds");b==this.fa()&&(this.kb.add(this.ua),this.Yf?this.rb.add(1):this.rb.add(0));0>c&&(c=this.Ia(b));var f=this.ua;this.io(this.ua+1);this.lc();var g=this.Fa(b);this.Ca[0].lg(2*(g+c),d,2*f);d=1;for(var k=this.description.Ba;d<
k;d++){var m=this.description.Gd(d),q=a.qa.Xa(m);this.Ca[d].ul(q*(g+c),a.qa.ue(m),q,q*f)}for(b+=1;b<=l;b++)this.kb.write(b,this.kb.read(b)+1)};c.prototype.eF=function(b,c){var d=this.fa();0>b&&(b=d-1);if(b>=d||c>=this.Ia(b))throw a.g.sa("index out of bounds");this.lc();var l=this.Fa(b);0>c&&(c=this.Ia(b)-1);for(var l=l+c,f=0,g=this.description.Ba;f<g;f++)if(null!=this.Ca[f]){var k=a.qa.Xa(this.description.Gd(f));this.Ca[f].oj(k*l,k,k*this.ua)}for(;d>=b+1;d--)l=this.kb.read(d),this.kb.write(d,l-1);
this.ua--;this.rg--;this.de(1993)};c.prototype.Rf=function(){return a.Hh.il(this,null)};c.prototype.Ka=function(){this.ap=0;this.ng=!1;this.ud=this.Ge=this.li=this.rb=this.kb=null;this.EA()};c.prototype.Pe=function(b){b instanceof a.Bg?this.ZA(b,-1):this.ZJ(b)};c.prototype.ZA=function(b,c){if(!this.u()&&!b.WO()){this.lc();var d=this.Ca[0],l=new a.b,f=new a.b,g,k,m;for(0>c?(g=this.Im(),k=0,m=this.ua):(g=this.xq(c),k=this.Fa(c),m=this.Ec(c));k<m;k++){l.x=d.read(2*k);l.y=d.read(2*k+1);if(g){var q=this.li.read(k);
if(0<=q)switch(this.Ge.read(k)&7){case 2:f.x=this.ud.read(q);f.y=this.ud.read(q+1);b.Zi(f,f);this.ud.write(q,f.x);this.ud.write(q+1,f.y);f.x=this.ud.read(q+3);f.y=this.ud.read(q+4);b.Zi(f,f);this.ud.write(q+3,f.x);this.ud.write(q+4,f.y);break;case 4:throw a.g.xa();}}b.Zi(l,l);d.write(2*k,l.x);d.write(2*k+1,l.y)}this.de(1993)}};c.prototype.ZJ=function(b){if(!this.u()){this.Oe(1);this.lc();for(var c=this.Ca[0],d=this.Ca[1],l=new a.fe,f=new a.fe,g=this.Im(),k=0;k<this.ua;k++){l.x=c.read(2*k);l.y=c.read(2*
k+1);l.z=d.read(k);if(g){var m=this.li.read(k);if(0<=m)switch(this.Ge.read(k)&7){case 2:f.x=this.ud.read(m);f.y=this.ud.read(m+1);f.z=this.ud.read(m+2);f=b.Rn(f);this.ud.write(m,f.x);this.ud.write(m+1,f.y);this.ud.write(m+1,f.z);f.x=this.ud.read(m+3);f.y=this.ud.read(m+4);f.z=this.ud.read(m+5);f=b.Rn(f);this.ud.write(m+3,f.x);this.ud.write(m+4,f.y);this.ud.write(m+5,f.z);break;case 4:throw a.g.xa();}}l=b.Rn(l);c.write(2*k,l.x);c.write(2*k+1,l.y);d.write(k,l.z)}this.de(1993)}};c.prototype.wv=function(){null==
this.kb&&(this.kb=a.Bc.Dg(1,0),this.rb=a.Bc.so(1,0));null!=this.Ge&&(this.Ge.resize(this.rg,1),this.li.resize(this.rg,-1))};c.prototype.co=function(b){b.ng=!1;b.ap=this.ap;b.ep=this.ep;null!=this.kb?b.kb=a.ha.lj(this.kb):b.kb=null;null!=this.rb?b.rb=a.Wk.lj(this.rb):b.rb=null;null!=this.li?b.li=a.ha.lj(this.li):b.li=null;null!=this.Ge?b.Ge=a.Wk.lj(this.Ge):b.Ge=null;null!=this.ud?b.ud=a.rd.lj(this.ud):b.ud=null;b.$o=this.$o;b.Zo=this.Zo;this.gj(1024)?b.Uh=null:b.Uh=this.Uh};c.prototype.ac=function(){if(!this.gj(512))return this.$o;
for(var b=this.Da(),c=new a.$u(0);b.lb();)for(;b.Ma();)c.add(b.ja().ac());this.$o=c.rl();this.yf(512,!1);return c.rl()};c.prototype.mc=function(a){if(a==this)return!0;if(!(a instanceof c&&b.prototype.mc.call(this,a)))return!1;var h=this.fa();return h!=a.fa()||null!=this.kb&&!this.kb.mc(a.kb,0,h+1)||this.ep!=a.ep||null!=this.rb&&!this.rb.mc(a.rb,0,h)?!1:b.prototype.mc.call(this,a)};c.prototype.Da=function(){return new a.FI(this)};c.prototype.vv=function(a){b.prototype.vv.call(this,a);if(this.Im())for(a=
this.Da();a.lb();)for(;a.Ma();)break};c.prototype.um=function(a,c){b.prototype.um.call(this,a,c);if(this.Im())for(var d=this.Da();d.lb();)for(;d.Ma();)break};c.prototype.pv=function(){null==this.kb||0==this.kb.size?this.ua=0:this.ua=this.kb.read(this.kb.size-1)};c.prototype.Mh=function(){if(!this.Yf)return 0;this.ss();return this.Zo};c.prototype.pt=function(a){if(!this.Yf)return!1;if(!this.gj(8))return 0!=(this.rb.read(a)&4);this.ss();return 0<this.Uh.read(a)};c.prototype.no=function(a){if(!this.Yf)return 0;
this.ss();return this.Uh.read(a)};c.prototype.ss=function(){if(this.gj(1024)){var b=this.fa();null==this.Uh?this.Uh=new a.rd(b):this.Uh.size!=b&&this.Uh.resize(b);for(var b=new a.$u(0),c=new a.$u(0),d=new a.b,l=0,f=this.Da();f.lb();){c.reset();for(this.A(this.Fa(f.Ra),d);f.Ma();)c.add(f.ja().jv(d.x,d.y));b.add(c.rl());var g=l++;this.Uh.write(g,c.rl())}this.Zo=b.rl();this.yf(1024,!1)}};c.prototype.hl=function(){if(this.gj(8)){this.ss();var b=this.fa();if(null==this.rb||this.rb.size<b)this.rb=a.Bc.so(b+
1);for(var c=1,d=0;d<b;d++){var l=this.Uh.read(d);0==d&&(c=0<l?1:-1);0<l*c?this.rb.wy(d,4):this.rb.BB(d,4)}this.yf(8,!1)}};c.prototype.Dw=function(b){var c=this.Ra,d=this.fa();if(0<=c&&c<d){if(b<this.Ec(c)){if(b>=this.Fa(c))return c;c--}else c++;if(0<=c&&c<d&&b>=this.Fa(c)&&b<this.Ec(c))return this.Ra=c}if(5>d){for(c=0;c<d;c++)if(b<this.Ec(c))return this.Ra=c;throw a.g.sa("corrupted geometry");}c=0;for(d-=1;d>c;){var l=c+(d-c>>1),f=this.Fa(l);if(b<f)d=l-1;else if(c=this.Ec(l),b>=c)c=l+1;else return this.Ra=
l}return this.Ra=c};c.prototype.GN=function(b){var c=this.oc(0);this.VN();var d=this.Ec(b),l=this.Fa(b);b=-1;var f=new a.b,g=new a.b;f.y=-Infinity;f.x=-Infinity;for(l+=0;l<d;l++)c.fc(2*l,g),-1==f.compare(g)&&(b=l,f.K(g));return b};c.prototype.Hw=function(){var a=this.G();if(!this.Yf)for(var a=a-this.fa(),b=0,c=this.fa();b<c;b++)this.wc(b)&&a++;return a};c.prototype.bt=function(a){var b=this.Ia(a);this.wc(a)||b--;return b};c.prototype.Qa=function(){return new c(this.Yf,this.description)};c.prototype.gb=
function(){return this.Yf?2:1};c.prototype.F=function(){return this.Yf?a.j.Polygon:a.j.Polyline};c.prototype.VN=function(){this.Ru()};c.prototype.OF=function(a){this.kb=a;this.de(16777215)};c.prototype.UN=function(){this.Ru();return this.rb};c.prototype.NF=function(a){this.rb=a;this.de(16777215)};c.prototype.fa=function(){return null!=this.kb?this.kb.size-1:0};c.prototype.Ec=function(a){return this.kb.read(a+1)};c.prototype.Ia=function(a){return this.kb.read(a+1)-this.kb.read(a)};c.prototype.Fa=function(a){return this.kb.read(a)};
c.prototype.iv=function(b,c){null==this.qb&&(this.qb=new a.Xj);var d=a.dA.iR(c),l=this.qb.hi;if(null!=l)if(l.Rx<b||d>l.bO())this.qb.tv(null);else return!0;l=a.dA.create(this,b,d);this.qb.tv(l);return!0};c.prototype.ic=function(){var a=b.prototype.ic.call(this);if(!this.tc()){var c=this.fa();null!=this.kb&&this.kb.jj(a,0,c+1);null!=this.rb&&this.rb.jj(a,0,c)}return a};c.prototype.NC=function(a){return null!=this.Ge?this.Ge.read(a):1};c.prototype.dc=function(b,c,d){var l=this.Dw(b);if(b==this.Ec(l)-
1&&!this.wc(l))throw a.g.sa("index out of bounds");this.lc();var f=this.Ge,g=1;null!=f&&(g=f.read(b)&7);switch(g){case 1:c.kq();break;case 2:throw a.g.xa();case 4:throw a.g.xa();default:throw a.g.xa();}c=c.get();d?c.Qf(a.Pd.Tf()):c.Qf(this.description);l=b==this.Ec(l)-1&&this.wc(l)?this.Fa(l):b+1;f=new a.b;this.A(b,f);c.fd(f);this.A(l,f);c.wd(f);if(!d){d=1;for(f=this.description.Ba;d<f;d++)for(var g=this.description.Gd(d),k=a.qa.Xa(g),m=0;m<k;m++){var q=this.md(g,b,m);c.Ly(g,m,q);q=this.md(g,l,m);
c.By(g,m,q)}}};c.prototype.Ti=function(b,c){if(b>=this.fa())throw a.g.O();if(this.u())c.Ka();else{if(this.xq(b))throw a.g.sa("not implemented");var d=this.oc(0),l=new a.b,f=new a.i;f.Ka();for(var g=this.Fa(b),k=this.Ec(b);g<k;g++)d.fc(2*g,l),f.Eb(l);c.L(f)}};c.prototype.gR=function(b,c){if(b>=this.fa())throw a.g.O();if(this.u())c.Ka();else{if(this.xq(b))throw a.g.sa("not implemented");var d=this.oc(0),l=new a.b,f=new a.i;f.Ka();for(var g=this.Fa(b),k=this.Ec(b);g<k;g++)d.fc(2*g,l),f.Eb(l);c.L(f)}};
c.prototype.dj=function(b){null==this.qb&&(this.qb=new a.Xj);if(0==b||16>this.G())return!1;b=a.Ja.nB(this);this.qb.GA(b);return!0};c.prototype.iJ=function(){null==this.qb&&(this.qb=new a.Xj);if(null!=this.qb.on)return!0;this.qb.HA(null);var b=a.Ja.BK(this);this.qb.HA(b);return!0};c.prototype.Np=function(a){this.ep=a};c.prototype.Dm=function(){return this.ep};c.Jd=[0,0,6,0,8,0];return c}(a.Vr);a.al=b})(A||(A={}));(function(a){var b=function(b){function c(e){b.call(this);if(void 0!==e){if(null==e)throw a.g.O();
this.description=e}else this.description=a.Pd.Tf();this.ua=0}H(c,b);c.prototype.Qa=function(){return new c(this.description)};c.prototype.add=function(a){this.resize(this.ua+1);this.bh(this.ua-1,a)};c.prototype.ys=function(b,c){this.resize(this.ua+1);var d=new a.b;d.na(b,c);this.jc(this.ua-1,d)};c.prototype.Qd=function(b,c,d){d=0>d?b.G():d;if(0>c||c>b.G()||d<c)throw a.g.O();if(c!=d){this.Ik(b.description);d-=c;var l=this.ua;this.resize(this.ua+d);this.lc();for(var f=0,g=b.description.Ba;f<g;f++){var k=
b.description.Gd(f),m=a.qa.Xa(k),q=this.oc(k),k=b.oc(k);q.nk(l*m,k,c*m,d*m,!0,1,l*m)}}};c.prototype.eF=function(b){if(0>b||b>=this.G())throw a.g.sa("index out of bounds");this.lc();for(var c=0,d=this.description.Ba;c<d;c++)if(null!=this.Ca[c]){var l=a.qa.Xa(this.description.Gd(c));this.Ca[c].oj(l*b,l,l*this.ua)}this.ua--;this.rg--;this.de(1993)};c.prototype.resize=function(a){this.io(a)};c.prototype.co=function(){};c.prototype.Ka=function(){b.prototype.EA.call(this)};c.prototype.Pe=function(b){if(b instanceof
a.Bg){if(!this.u()){this.lc();for(var c=this.Ca[0],d=new a.b,l=0;l<this.ua;l++)d.x=c.read(2*l),d.y=c.read(2*l+1),b.Zi(d,d),c.write(2*l,d.x),c.write(2*l+1,d.y);this.de(1993)}}else if(!this.u()){this.lc();this.Oe(1);this.lc();for(var c=this.Ca[0],d=this.Ca[1],f=new a.fe,l=0;l<this.ua;l++){f.x=c.read(2*l);f.y=c.read(2*l+1);f.z=d.read(l);var g=b.Rn(f);c.write(2*l,g.x);c.write(2*l+1,g.y);d.write(l,g.z)}this.de(1993)}};c.prototype.gb=function(){return 0};c.prototype.F=function(){return a.j.MultiPoint};
c.prototype.Mh=function(){return 0};c.prototype.ac=function(){return 0};c.prototype.mc=function(a){return a==this?!0:a instanceof c?b.prototype.mc.call(this,a):!1};c.prototype.eR=function(b,c){var d=this.ua,d=Math.min(d,c+1E3);if(0>c||c>=this.ua||d<c||1E3!=b.length)throw a.g.O();var l=this.oc(0),f=d-c,g=[];l.Fp(2*c,2*f,g,0,!0);for(l=0;l<f;l++)b[l]=a.b.Pa(g[2*l],g[2*l+1]);return d};c.prototype.pv=function(){};c.prototype.wv=function(){};c.prototype.iv=function(){return!1};c.prototype.dj=function(){return!1};
c.prototype.Rf=function(){return null};return c}(a.Vr);a.pe=b})(A||(A={}));(function(a){(function(a){a[a.NotDetermined=0]="NotDetermined";a[a.Structure=1]="Structure";a[a.DegenerateSegments=2]="DegenerateSegments";a[a.Clustering=3]="Clustering";a[a.Cracking=4]="Cracking";a[a.CrossOver=5]="CrossOver";a[a.RingOrientation=6]="RingOrientation";a[a.RingOrder=7]="RingOrder";a[a.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency";a[a.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";a[a.OGCDisconnectedInterior=
10]="OGCDisconnectedInterior"})(a.MH||(a.MH={}));var b=function(){function a(b,e,c){void 0===b?(this.yh=0,this.Gk=this.Fk=-1):(this.yh=b,this.Fk=e,this.Gk=c)}a.prototype.Zp=function(a){this.yh=a.yh;this.Fk=a.Fk;this.Gk=a.Gk};return a}();a.xd=b})(A||(A={}));(function(a){var b=function(){function b(){}b.VT=function(b){if(!1===b)throw a.g.PG();};b.bG=function(a){return isNaN(a)?NaN:0===a?a:0<a?1:-1};b.Lh=function(a,b){void 0===b&&(b=0);for(var c=[],d=0;d<a;d++)c[d]=b;return c};b.Os=function(a,b){var c,
d;void 0===c&&(c=0);for(void 0===d&&(d=a.length-1);c<=d;c++)a[c]=b};b.Jr=function(a,b,c){return a<b?b:a>c?c:a};b.lU=function(){return 4};b.kg=function(a,b){var c=5381;void 0!==b?c=(b<<5)+b+(a&255):c=(c<<5)+c+(a&255);c=(c<<5)+c+(a>>8&255);c=(c<<5)+c+(a>>16&255);return(c<<5)+c+(a>>24&255)&2147483647};b.Rh=function(){throw Error("Not Implemented");};b.hU=function(){return-Infinity};b.jU=function(){return Infinity};b.aU=function(){return 2147483647};b.PT=function(){return 2.220446049250313E-16};b.RT=
function(){return 1.7976931348623157E308};b.Zx=function(a){return b.IH(a)+12345&2147483647};b.FD=function(a){var e,c=a%b.fv|0,d=a/b.fv|0;if(0===(e=32))return a;32>e?(a=c>>>e|d<<32-e,e=d>>e):(a=d>>e-32,e=0<=d?0:-1);return e*b.fv+(a>>>0)};b.IH=function(a){a|=0;return(1103495168*a|0)+(20077*a|0)|0};b.truncate=function(a){return 0>a?-1*Math.floor(Math.abs(a)):Math.floor(a)};b.aH=Math.pow(2,53)-1;b.TT=-b.aH;b.pF=65536;b.yU=16777216;b.fv=b.pF*b.pF;return b}();a.J=b})(A||(A={}));(function(a){(function(a){a[a.Project=
0]="Project";a[a.Union=1]="Union";a[a.Difference=2]="Difference";a[a.Proximity2D=3]="Proximity2D";a[a.Relate=4]="Relate";a[a.Equals=5]="Equals";a[a.Disjoint=6]="Disjoint";a[a.Intersects=7]="Intersects";a[a.Within=8]="Within";a[a.Contains=9]="Contains";a[a.Crosses=10]="Crosses";a[a.Touches=11]="Touches";a[a.Overlaps=12]="Overlaps";a[a.Buffer=13]="Buffer";a[a.Distance=14]="Distance";a[a.Intersection=15]="Intersection";a[a.Clip=16]="Clip";a[a.Cut=17]="Cut";a[a.DensifyByLength=18]="DensifyByLength";a[a.DensifyByAngle=
19]="DensifyByAngle";a[a.LabelPoint=20]="LabelPoint";a[a.GeodesicBuffer=21]="GeodesicBuffer";a[a.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";a[a.ShapePreservingDensify=23]="ShapePreservingDensify";a[a.GeodeticLength=24]="GeodeticLength";a[a.GeodeticArea=25]="GeodeticArea";a[a.Simplify=26]="Simplify";a[a.SimplifyOGC=27]="SimplifyOGC";a[a.Offset=28]="Offset";a[a.Generalize=29]="Generalize";a[a.SymmetricDifference=30]="SymmetricDifference";a[a.ConvexHull=31]="ConvexHull";a[a.Boundary=32]="Boundary";
a[a.SimpleRelation=33]="SimpleRelation"})(a.hI||(a.hI={}));var b=function(){function b(){}b.prototype.F=function(){return null};b.MT=function(b){a.U.Th(b.F())&&(b=b.qb,null!=b&&(b.tv(null),b.GA(null)))};return b}();a.Ne=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 13};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,l,f){return b instanceof a.U?(f=new a.Qc(b),this.aa(f,c,[d],!1,l).next()):
!0===l?(d=new a.Pz(b,c,d,!1,f),a.wi.local().aa(d,c,f)):new a.Pz(b,c,d,!1,f)};c.W=null;return c}(a.Ne);a.Oz=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h,d,f){this.va=-1;this.oe=c;this.ex=e;this.Nq=h;this.AP=new a.i;this.AP.Ka();this.Wm=-1;this.Zb=f}b.prototype.next=function(){for(var a;null!=(a=this.oe.next());)return this.va=this.oe.za(),this.Wm+1<this.Nq.length&&this.Wm++,this.buffer(a,this.Nq[this.Wm]);return null};b.prototype.za=function(){return this.va};b.prototype.buffer=function(b,
e){return a.UG.buffer(b,e,this.ex,NaN,96,this.Zb)};return b}();a.Pz=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 16};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,l){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,d,l).next()):new a.SH(b,c,d,l)};c.W=null;return c}(a.Ne);a.RH=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h){this.va=-1;if(null==c)throw a.g.O();this.S=
e;this.wk=c;this.la=a.Ja.Ad(h,e,!1)}b.prototype.next=function(){var b;return null!=(b=this.wk.next())?(this.va=this.wk.za(),a.Fd.clip(b,this.S,this.la,0)):null};b.prototype.za=function(){return this.va};return b}();a.SH=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 31};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d){return b instanceof a.U?a.Rz.qB(b):new a.Rz(c,b,d)};c.W=null;return c}(a.Ne);
a.Qz=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h){this.cE=new a.Sr;this.va=-1;if(null==e)throw a.g.O();this.yP=c;this.Fc=!1;this.wk=e;this.Zb=h}b.prototype.next=function(){if(this.yP){if(!this.Fc){var a=this.FK(this.wk);this.Fc=!0;return a}return null}if(!this.Fc){a=this.wk.next();if(null!=a)return this.va=this.wk.za(),b.qB(a);this.Fc=!0}return null};b.prototype.za=function(){return this.va};b.prototype.FK=function(a){for(var b;null!=(b=a.next());)this.cE.Fb(b);return this.cE.rN()};
b.qB=function(c){if(b.Gh(c))return c;var e=c.F();if(a.al.Mc(e))return e=new a.Ya(c.description),e.Cc(c,!0),e;if(e==a.j.MultiPoint&&2==c.G()){var h=new a.Wa,e=new a.Ya(c.description);c.Td(0,h);e.ef(h);c.Td(1,h);e.lineTo(h);return e}return a.Sr.vL(c)};b.Gh=function(b){if(b.u())return!0;var e=b.F();return e==a.j.Point||e==a.j.Envelope?!0:a.al.Mc(e)?!1:e==a.j.MultiPoint?1==b.G()?!0:!1:e==a.j.Polyline?1==b.fa()&&2>=b.G()?!0:!1:1!=b.fa()?!1:2>=b.G()?!0:a.Sr.sD(b,0)};return b}();a.Rz=b})(A||(A={}));(function(a){var b=
function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 17};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,l,f){return new a.UH(b,c,d,l,f)};c.W=null;return c}(a.Ne);a.TH=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h,d,f){this.Ef=null;if(null==e||null==h)throw a.g.sa("invalid argument");this.wP=c;this.qx=e;this.RD=h;c=a.Ja.Zs(e,h);this.la=a.Ja.Ad(d,c,!0);this.QD=-1;this.Ee=f}b.prototype.za=function(){return 0};b.prototype.next=
function(){this.fN();return++this.QD<this.Ef.length?this.Ef[this.QD]:null};b.prototype.fN=function(){if(null==this.Ef)switch(this.Ef=[],this.qx.F()){case a.j.Polyline:this.hN();break;case a.j.Polygon:this.gN()}};b.prototype.hN=function(){var b=new a.Ya,e=new a.Ya,c=new a.Ya;this.Ef.push(b);this.Ef.push(e);var d=[];a.$G.YG(this.wP,this.qx,this.RD,this.la,d,this.Ee);for(var f=0;f<d.length;f++){var g=d[f];0==g.bu?b.add(g.V,!1):1==g.bu||2==g.bu?e.add(g.V,!1):3==g.bu?this.Ef.push(g.V):c.add(g.V,!1)}c.u()||
b.u()&&e.u()&&!(3<=this.Ef.length)||this.Ef.push(c);b.u()&&e.u()&&3>this.Ef.length&&(this.Ef.length=0)};b.prototype.gN=function(){var b=new a.ha(0),e=new a.gd,c=e.RB(),d=e.Fb(this.qx),f=e.Fb(this.RD),g=new a.Of;try{g.Lp(e,this.la,this.Ee);g.ym(c,d,f,b);var k=e.jf(d),m=new a.La,q=new a.La;this.Ef.length=0;this.Ef.push(m);this.Ef.push(q);for(d=0;d<b.size;d++){var r,s=new a.gd,t=s.Fb(k),u=s.Fb(e.jf(b.get(d)));g.Kp(s,this.Ee);var C=g.lt(t,u);r=s.jf(C);if(!r.u()){var w=e.yC(b.get(d),c);2==w?m.add(r,!1):
1==w?q.add(r,!1):this.Ef.push(r);var x=new a.gd,t=x.Fb(k),u=x.Fb(e.jf(b.get(d)));g.Kp(x,this.Ee);k=x.jf(g.ll(t,u))}}!k.u()&&0<b.size&&this.Ef.push(k);m.u()&&q.u()&&(this.Ef.length=0)}finally{g.xg()}};return b}();a.UH=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 18};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d){if(b instanceof a.U)return b=new a.Qc(b),this.aa(b,c,d).next();if(0>=c)throw a.g.O();
return new a.WH(b,c,d)};c.W=null;return c}(a.Ne);a.VH=b})(A||(A={}));(function(a){var b=function(){function b(a,e){this.va=-1;this.oe=a;this.Zq=e}b.prototype.za=function(){return this.va};b.prototype.next=function(){var a;return null!=(a=this.oe.next())?(this.va=this.oe.za(),this.gM(a)):null};b.prototype.gM=function(b){if(b.u()||1>b.gb())return b;var e=b.F();if(e==a.j.Polygon||a.j.Polyline==e)return this.Wv(b);if(a.U.Mc(e))return this.iM(b);if(e==a.j.Envelope)return this.hM(b);throw a.g.xa();};b.prototype.iM=
function(b){if(b.ac()<=this.Zq)return b;var e=new a.Ya(b.description);e.Cc(b,!0);return this.Wv(e)};b.prototype.hM=function(b){var e=new a.La(b.description);e.Xc(b,!1);var c=new a.i;b.s(c);b=c.ca();return c.ba()<=this.Zq&&b<=this.Zq?e:this.Wv(e)};b.prototype.Wv=function(b){for(var e=b.Qa(),c=b.Da();c.lb();)for(var d=!0;c.Ma();){var f=c.ja();if(f.F()!=a.j.Line)throw a.g.sa("not implemented");var g=c.lD(),k=f.ac();if(k>this.Zq){var m=Math.ceil(k/this.Zq),k=new a.Wa(b.description);d&&(f.Fn(k),e.ef(k));
for(var q=d=1/m,r=0,m=m-1;r<m;r++)f.tu(q,k),e.lineTo(k),q+=d;g?e.qo():(f.Cn(k),e.lineTo(k))}else g?e.qo():e.Cc(f,d);d=!1}return e};return b}();a.WH=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.F=function(){return 2};c.prototype.aa=function(b,c,d,f){return b instanceof a.U?(b=new a.Qc(b),c=new a.Qc(c),this.aa(b,c,d,f).next()):new a.XH(b,c,d,f)};c.ll=function(b,h,d,f){if(b.u()||h.u())return b;
var g=b.gb(),k=h.gb();if(g>k)return b;var m=b.F(),q=h.F(),r=new a.i,s=new a.i,t=new a.i;b.s(r);h.s(s);t.L(r);t.Eb(s);var t=a.Ja.Ad(d,t,!1),u=1.00001*t*Math.sqrt(2),C=new a.i;C.L(r);C.R(u,u);if(!C.kc(s))return b;if(1==g&&2==k)return c.TI(b,h,q,d,f);if(m==a.j.Point)switch(a.al.Mc(q)?(d=new a.Ya(h.description),d.Cc(h,!0)):d=h,q){case a.j.Polygon:return c.jP(b,d,t);case a.j.Polyline:return c.mP(b,d,t);case a.j.MultiPoint:return c.cN(b,d,t);case a.j.Envelope:return c.EM(b,d,t);case a.j.Point:return c.qO(b,
d,t);default:throw a.g.O();}else if(m==a.j.MultiPoint)switch(q){case a.j.Polygon:return c.YI(b,h,t);case a.j.Envelope:return c.SI(b,h,t);case a.j.Point:return c.VI(b,h,t)}return a.Of.ll(b,h,d,f)};c.jP=function(b,c,d){return 0==a.hd.uD(c,b,d)?b:b.Qa()};c.mP=function(b,c,d){var f=b.A();c=c.Da();for(var l=1.00001*d*Math.sqrt(2),g=l*l,k=new a.i;c.lb();)for(;c.Ma();){var m=c.ja();m.s(k);k.R(l,l);if(k.contains(f)){if(m.Dq(f,d))return b.Qa();var q=m.Nb();if(a.b.$b(f,q)<=g)return b.Qa();q=m.pc();if(a.b.$b(f,
q)<=g)return b.Qa()}}return b};c.cN=function(b,c,d){var f=c.oc(0);c=c.G();var l=b.A(),g=new a.b;d=1.00001*d*Math.sqrt(2);d*=d;for(var k=0;k<c;k++)if(f.fc(2*k,g),a.b.$b(g,l)<=d)return b.Qa();return b};c.EM=function(b,c,d){var f=new a.i;c.s(f);f.R(d,d);c=b.A();return f.contains(c)?b.Qa():b};c.qO=function(b,c,d){d=1.00001*d*Math.sqrt(2);d*=d;var f=b.A();c=c.A();return a.b.$b(f,c)<=d?b.Qa():b};c.YI=function(b,c,d){var f=new a.i;c.s(f);f.R(d,d);for(var l=b.G(),g=!1,k=[],m=0;m<l;m++)k[m]=!1;for(var q=new a.b,
m=0;m<l;m++)b.A(m,q),f.contains(q)&&0!=a.hd.ie(c,q,d)&&(g=!0,k[m]=!0);if(!g)return b;c=b.Qa();for(m=0;m<l;m++)k[m]||c.Qd(b,m,m+1);return c};c.SI=function(b,c,d){var f=new a.i;c.s(f);f.R(d,d);c=b.G();var l=!1;d=[];for(var g=0;g<c;g++)d[g]=!1;for(var k=new a.b,g=0;g<c;g++)b.A(g,k),f.contains(k)&&(l=!0,d[g]=!0);if(!l)return b;f=b.Qa();for(g=0;g<c;g++)d[g]||f.Qd(b,g,g+1);return f};c.VI=function(b,c,d){var f=b.oc(0),l=b.G(),g=c.A(),k=new a.b,m=!1;c=[];for(var q=0;q<l;q++)c[q]=!1;q=1.00001*d*Math.sqrt(2);
d=q*q;for(q=0;q<l;q++)f.fc(2*q,k),a.b.$b(k,g)<=d&&(m=!0,c[q]=!0);if(!m)return b;f=b.Qa();for(q=0;q<l;q++)c[q]||f.Qd(b,q,q+1);return f};c.TI=function(b,c,d,f,l){var g=new a.Wj;b.Dp(g);var k=new a.i;c.s(k);g.Eb(k);g.R(0.1*g.ba(),0.1*g.ca());k=new a.La;k.Xc(g,!1);d==a.j.Polygon?k.add(c,!0):k.Xc(c,!0);return a.Zr.local().aa(b,k,f,l)};c.W=null;return c}(a.Ne);a.Yr=b})(A||(A={}));(function(a){var b=function(){function b(a,e,c,d){this.Eq=null==e;this.va=-1;this.oe=a;this.ex=c;this.DP=e.next();this.Zb=d}
b.prototype.next=function(){if(this.Eq)return null;var b;return null!=(b=this.oe.next())?(this.va=this.oe.za(),a.Yr.ll(b,this.DP,this.ex,this.Zb)):null};b.prototype.za=function(){return this.va};return b}();a.XH=b})(A||(A={}));(function(a){var b=function(){function b(e){this.Ee=e;this.Ii=new a.i;this.Ii.Ka();this.Ng=new a.i;this.Ng.Ka()}b.prototype.Or=function(){var a;a=this.Ii.w;this.Ii.w=this.Ng.w;this.Ng.w=a;a=this.Ii.C;this.Ii.C=this.Ng.C;this.Ng.C=a;a=this.Ii.D;this.Ii.D=this.Ng.D;this.Ng.D=
a;a=this.Ii.H;this.Ii.H=this.Ng.H;this.Ng.H=a};b.prototype.vM=function(b,c){var d=!this.Ii.kc(this.Ng);if(a.U.Lc(b.F())&&a.U.Lc(c.F())){if(b.G()>c.G())return this.gB(b,c,d);this.Or();d=this.gB(c,b,d);this.Or();return d}if(b.F()==a.j.MultiPoint&&a.U.Lc(c.F()))return d=this.hB(c,b,d),this.Or(),d;if(c.F()==a.j.MultiPoint&&a.U.Lc(b.F()))return this.hB(b,c,d);if(b.F()==a.j.MultiPoint&&c.F()==a.j.MultiPoint){if(b.G()>c.G())return this.iB(b,c);this.Or();d=this.iB(c,b);this.Or();return d}return 0};b.prototype.gB=
function(b,c,d){var f=b.Da(),l=c.Da(),g=new a.i,k=new a.i,m=1.7976931348623157E308;if(!d&&this.hT(b,c,f,l))return 0;for(;f.lb();)for(;f.Ma();)if(b=f.ja(),b.s(g),!(g.Nu(this.Ng)>m)){for(;l.lb();)for(;l.Ma();)if(c=l.ja(),c.s(k),g.Nu(k)<m&&(c=b.Gb(c,d),c*=c,c<m)){if(0==c)return 0;m=c}l.Lk()}return Math.sqrt(m)};b.prototype.hB=function(b,c,d){var f=b.Da(),l=new a.i,g=1.7976931348623157E308,k=new a.b,m=-1,q=c.G();for(d=!d&&b.F()==a.j.Polygon;f.lb();)for(;f.Ma();){var r=f.ja();r.s(l);if(!(1<q&&l.Nu(this.Ng)>
g)){for(var s=0;s<q;s++){c.A(s,k);if(d&&0!=a.hd.ie(b,k,0))return 0;m=r.Hd(k,!1);k.sub(r.Lb(m));m=k.Sp();if(m<g){if(0==m)return 0;g=m}}d=!1}}return Math.sqrt(g)};b.prototype.iB=function(b,c){for(var d=1.7976931348623157E308,f=new a.b,l=new a.b,g=d,k=b.G(),m=c.G(),q=0;q<k;q++)if(b.A(q,f),!(1<m&&this.Ng.gG(f)>d))for(var r=0;r<m;r++)if(c.A(r,l),g=a.b.$b(f,l),g<d){if(0==g)return 0;d=g}return Math.sqrt(d)};b.prototype.hT=function(b,c,d,f){if(b.F()==a.j.Polygon){for(;f.lb();)if(f.Ma()){var l=f.ja();if(0!=
a.hd.ie(b,l.pc(),0))return!0}f.Lk()}if(c.F()==a.j.Polygon){for(;d.lb();)if(d.Ma()&&(b=d.ja(),0!=a.hd.ie(c,b.pc(),0)))return!0;d.Lk()}return!1};b.prototype.il=function(a,b){if(a.u()||b.u())return NaN;a.s(this.Ii);b.s(this.Ng);return this.vM(a,b)};return b}(),c=function(c){function e(){c.apply(this,arguments)}H(e,c);e.prototype.aa=function(e,c,d){if(null==e||null==c)throw a.g.O();if(e.u()||c.u())return NaN;var f,l;f=e.F();l=c.F();if(f==a.j.Point){if(l==a.j.Point)return a.b.Gb(e.A(),c.A());if(l==a.j.Envelope)return d=
new a.i,c.s(d),d.Gb(e.A());f=new a.pe;f.add(e);e=f}else if(f==a.j.Envelope){if(l==a.j.Envelope)return l=new a.i,e.s(l),d=new a.i,c.s(d),d.Gb(l);f=new a.La;f.Xc(e,!1);e=f}l==a.j.Point?(l=new a.pe,l.add(c),c=l):l==a.j.Envelope&&(l=new a.La,l.Xc(c,!1),c=l);return(new b(d)).il(e,c)};e.local=function(){null===e.W&&(e.W=new e);return e.W};e.prototype.F=function(){return 14};e.W=null;return e}(a.Ne);a.YH=c})(A||(A={}));(function(a){var b=function(){function b(a,e,c,d){this.aE=a;this.fE=e;this.Ee=d;this.HD=
c}b.prototype.next=function(){var a=this.aE.next();return null==a?null:this.xz(a)};b.prototype.za=function(){return this.aE.za()};b.prototype.xz=function(b){var e=b.F();if(a.U.Lm(e))return b;if(e==a.j.Envelope)return e=new a.La(b.description),e.Xc(b,!1),this.xz(e);if(b.u())return b;if(null==b)throw a.g.xa();for(var e=b.Qa(),c=new a.zb,d=0,f=b.fa();d<f;d++)this.mH(b,d,e,c);return e};b.prototype.mH=function(b,e,c,d){if(!(2>b.Ia(e))){var f=b.Fa(e),g=b.Ec(e)-1,k=b.oc(0),m=b.wc(e),q=new a.ha(0);q.yb(b.Ia(e)+
1);var r=new a.ha(0);r.yb(b.Ia(e)+1);q.add(m?f:g);q.add(f);for(f=new a.b;1<q.size;){var s=q.uc();q.bf();var t=q.uc();b.A(s,f);d.fd(f);b.A(t,f);d.wd(f);t=this.jH(d,f,k,s,t,g);0<=t?(q.add(t),q.add(s)):r.add(s)}m||r.add(q.get(0));if(r.size==q.size)c.$j(b,e,!0);else if(2<=r.size&&(!this.HD||2!=r.size||!(m||a.b.Gb(b.Ga(r.get(0)),b.Ga(r.get(1)))<=this.fE))){e=new a.Wa;d=0;for(g=r.size;d<g;d++)b.Td(r.get(d),e),0==d?c.ef(e):c.lineTo(e);m&&(this.HD||2!=r.size||c.lineTo(e),c.qo())}}};b.prototype.jH=function(a,
b,c,d,f,g){var k=f-1;f<=d&&(k=g);g=f=-1;for(d+=1;d<=k;d++){c.fc(2*d,b);var m=b.x,v=b.y;a.Lb(a.Hd(b,!1),b);b.x-=m;b.y-=v;m=b.length();m>this.fE&&m>g&&(f=d,g=m)}return f};return b}();a.ZH=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 29};c.prototype.aa=function(b,c,d,f){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,d,f).next()):new a.ZH(b,c,d,f)};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);
a.Sz=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 21};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,f,l,g,k,m){return b instanceof a.U?(m=new a.Qc(b),this.aa(m,c,d,[f],l,g,!1,k).next()):!0===k?(d=new a.Uz(b,c,d,f,l,!1,!1,m),a.wi.local().aa(d,c,m)):new a.Uz(b,c,d,f,l,!1,!1,m)};c.W=null;return c}(a.Ne);a.Tz=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h,d,f,g,k,m){if(g)throw a.g.qe();
if(null==e)throw a.g.O();this.va=-1;this.Wq=c;this.cg=e;this.le=h;this.Nq=d;this.Sm=f;this.Wm=-1;this.Zb=m;this.BP=new a.i;this.BP.Ka()}b.prototype.next=function(){for(var a;null!=(a=this.Wq.next());)return this.va=this.Wq.za(),this.Wm+1<this.Nq.length&&this.Wm++,this.nN(a,this.Nq[this.Wm]);return null};b.prototype.za=function(){return this.va};b.prototype.nN=function(b,e){return a.pH.buffer(b,this.cg,this.le,e,this.Sm,this.Zb)};return b}();a.Uz=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,
arguments)}H(c,b);c.prototype.F=function(){return 24};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d){if(null==c)throw a.g.O();if(b.u()||1>b.gb())return 0;if(4==d)throw a.g.qe();var f=a.Za.Fm(c),l=a.Za.et(f),g=a.Za.Ss(f),l=l*(2-l),k=f.Te().Ej,m=b.F(),q;m==a.j.Polygon||m==a.j.Envelope?q=b.Rf():a.U.Mc(m)?(q=new a.Ya(b.description),q.Cc(b,!0)):q=b;if(0==f.mc(c)){if(a.Za.Oo(c)){q=a.gh.po(q,c);m==a.j.Polyline&&q==b&&(q=a.U.Zj(b));b=new a.Od;a.Za.Gm(c).vu(b);for(var m=
0,r=q.G();m<r;m++){var s=q.Ga(m);s.x=a.gh.ou(s.x,b);q.jc(m,s)}}b=q.Qa();q=a.gh.YQ(c,f,q,b)?b:a.Za.Wl(q,c,f)}return this.xM(q,d,g,l,k)};c.prototype.xM=function(b,c,d,f,l){var g=new a.da(0),k=0;for(b=b.Da();b.lb();)for(;b.Ma();){var m=b.ja(),q=m.Nb(),m=m.pc();q.scale(l);m.scale(l);a.Ab.Sd(d,f,q.x,q.y,m.x,m.y,g,null,null,c);k+=g.o}return k};c.W=null;return c}(a.Ne);a.bI=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 18};c.local=
function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,f,l){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,d,f,l).next()):new a.aI(b,d,f,c,-1,-1,l)};c.W=null;return c}(a.Ne);a.$H=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h,d,f,g){if(0<g)throw a.g.qe();if(4!=h&&0<f)throw a.g.qe();if(null==e)throw a.g.O();this.va=-1;this.Wq=c;this.cg=e;this.le=h;this.HP=d;this.GP=f}b.prototype.next=function(){for(var a;null!=(a=this.Wq.next());)return this.va=this.Wq.za(),
this.gw(a);return null};b.prototype.za=function(){return this.va};b.prototype.gw=function(b){return a.ui.mq(b,this.cg,this.le,this.HP,this.GP,this.Zb)};return b}();a.aI=b})(A||(A={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Contains=1]="Contains";a[a.Within=2]="Within";a[a.Equals=3]="Equals";a[a.Disjoint=4]="Disjoint";a[a.Touches=8]="Touches";a[a.Crosses=16]="Crosses";a[a.Overlaps=32]="Overlaps";a[a.NoThisRelation=64]="NoThisRelation";a[a.Intersects=1073741824]="Intersects";a[a.IntersectsOrDisjoint=
1073741828]="IntersectsOrDisjoint"})(a.Az||(a.Az={}));var b=a.Az,c=function(){function c(){}c.kU=function(b,h,d,f){if(h.u()||b.u())return 4;var g=b.F(),k=h.F(),m;a.U.Mc(g)&&(b=m=new a.Ya(b.description),m.Cc(b,!0));a.U.Mc(k)&&(h=m=new a.Ya(h.description),m.Cc(h,!0));switch(g){case a.j.Point:switch(k){case a.j.Point:return c.rO(b,h,d);case a.j.Envelope:return c.Jd(c.BG(h,b,d));case a.j.MultiPoint:return c.Jd(c.HG(h,b,d));case a.j.Polyline:return c.Jd(c.zz(h,b,d,f));case a.j.Polygon:return c.Jd(c.oz(h,
b,d))}throw a.g.xa();case a.j.Envelope:switch(k){case a.j.Point:return c.BG(b,h,d);case a.j.Envelope:return c.eK(b,h,d);case a.j.MultiPoint:return c.Jd(c.DG(h,b,d,f));case a.j.Polyline:return c.Jd(c.uz(h,b));case a.j.Polygon:return c.Jd(c.kz(h,b))}throw a.g.xa();case a.j.MultiPoint:switch(k){case a.j.Point:return c.HG(b,h,d);case a.j.Envelope:return c.DG(b,h,d,f);case a.j.MultiPoint:return c.FG(b,h,d,f);case a.j.Polyline:return c.Jd(c.wz(h,b));case a.j.Polygon:return c.Jd(c.mz(h,b))}throw a.g.xa();
case a.j.Polyline:switch(k){case a.j.Point:return c.zz(b,h,d,f);case a.j.Envelope:return c.uz(b,h);case a.j.MultiPoint:return c.wz(b,h);case a.j.Polyline:return c.hQ(b,h);case a.j.Polygon:return c.Jd(c.qz(h,b))}throw a.g.xa();case a.j.Polygon:switch(k){case a.j.Point:return c.oz(b,h,d);case a.j.Envelope:return c.kz(b,h);case a.j.MultiPoint:return c.mz(b,h);case a.j.Polyline:return c.qz(b,h);case a.j.Polygon:return c.nP(b,h)}throw a.g.xa();default:throw a.g.xa();}};c.rO=function(a,b,d){a=a.A();b=b.A();
return c.iz(a,b,d)};c.iz=function(a,b,c){a.sub(b);return a.Sp()<=c*c?3:4};c.BG=function(b,h,d){var f=new a.i;b.s(f);b=h.A();return c.YL(f,b,d)};c.YL=function(a,b,c){a.R(-c,-c);if(a.contains(b))return 1;a.R(c,c);return a.contains(b)?8:4};c.tM=function(a,b,c){return b.contains(c)?1:a.contains(c)?8:4};c.eK=function(b,h,d){var f=new a.i;b.s(f);b=new a.i;h.s(b);return c.LK(f,b,d)};c.LK=function(a,b,c){var d=0;a.contains(b)&&(d|=1);b.contains(a)&&(d|=2);if(0!=d)return d;a.R(-c,-c);b.R(-c,-c);if(a.kc(b))return d=
a,d.R(c,c),d=d.contains(b)?1:0,b.R(c,c),d|=b.contains(a)?2:0,0!=d?d:32;d=a;d.R(c,c);b.R(c,c);return d.kc(b)?8:4};c.HG=function(a,b,d){b=b.A();return c.JG(a,b,d)};c.JG=function(a,b,d){for(var f=0,g=a.G();f<g;f++){var k;k=a.Ga(f);k=c.iz(k,b,d);if(4!=k)return 0!=(k&2)&&1!=g?1:k}return 4};c.DG=function(b,h,d,f){var g=new a.i;h.s(g);return c.dN(b,g,d,f)};c.dN=function(a,b,d,f){b.R(-d,-d);b.R(d,d);for(var g=d=0,k=a.G();g<k;g++){var m;m=a.Ga(g);m=c.Jd(c.tM(b,b,m));if(4!=m&&(d|=m,4==f))return 1073741824}return 0==
d?4:2==d?d:32};c.FG=function(a,b,d,f){for(var g=0,k=0,m=b.G();k<m;k++){var v;v=b.Ga(k);v=c.JG(a,v,d);if(4!=v&&(g++,4==f))return 1073741824}return 0<g?g==b.G()?3==f?(v=c.FG(b,a,d,1),1==v?3:0):1:32:0};c.zz=function(a,b,d,f){b=b.A();return c.WP(a,b,d,f)};c.FM=function(a,b){var c=null,d=a.qb;null!=d&&(c=d.hi);if(null!=c){c=c.Kk(b.x,b.y);if(0==c)return 4;if(1==c)return 1}else return-1;return 0};c.WP=function(e,h,d,f){if(0==(f&1073741839))return 64;var g=c.FM(e,h);if(0<g)return g;d*=d;for(g=e.Da();g.lb();){var k=
g.Ra;if(!e.wc(k)){var m=e.Ia(k),k=e.Fa(k);if(0==m)continue;if(a.b.$b(e.Ga(k),h)<=d||1<m&&a.b.$b(e.Ga(k+m-1),h)<=d)return 8}if(8!=f)for(;g.Ma();)if(m=g.ja(),m=m.Lb(m.Hd(h,!1)),a.b.$b(m,h)<=d)return 0!=(f&b.IntersectsOrDisjoint)?1073741824:1}return 0!=(f&b.IntersectsOrDisjoint)?4:64};c.uz=function(b,h){var d=new a.i;h.s(d);return c.qP(b,d)};c.qP=function(a,b){var d=c.$n(a,b);return 0<d?d:0};c.$n=function(a,b){var c;c=a.qb;if(null!=c)c=c.hi;else return-1;if(null!=c){c=c.En(b);if(0==c)return 4;if(1==
c)return 1}else return-1;return 0};c.wz=function(b,h){var d=new a.i;h.s(d);d=c.$n(b,d);return 0<d?d:0};c.es=function(b,h){var d=new a.i;h.s(d);d=c.$n(b,d);return 0<d?d:-1==d&&(d=new a.i,b.s(d),d=c.$n(h,d),0<d)?c.Jd(d):0};c.hQ=function(a,b){var d=c.es(a,b);return 0<d?d:0};c.oz=function(a,b,d){b=b.A();return c.kP(a,b,d)};c.kP=function(b,c,d){b=a.hd.ie(b,c,d);if(0==b)return 4;if(1==b)return 1;if(2==b)return 8;throw a.g.xa();};c.kz=function(b,h){var d=new a.i;h.s(d);return c.tO(b,d)};c.tO=function(a,
b){var d=c.$n(a,b);return 0<d?d:0};c.mz=function(a,b){var d=c.es(a,b);return 0<d?d:0};c.qz=function(a,b){var d=c.es(a,b);return 0<d?d:0};c.nP=function(a,b){var d=c.es(a,b);return 0<d?d:0};c.hR=function(b,c){var d=b.F(),f=c.F(),l;if(a.U.Th(d)&&(l=b.qb,null!=l&&(l=l.hi,null!=l))){if(f==a.j.Point){var g=c.A();l=l.Kk(g.x,g.y)}else g=new a.i,c.s(g),l=l.En(g);if(1==l)return 1;if(0==l)return 4}if(a.U.Th(f)&&(l=c.qb,null!=l&&(l=l.hi,null!=l))){d==a.j.Point?(d=b.A(),l=l.Kk(d.x,d.y)):(d=new a.i,b.s(d),l=l.En(d));
if(1==l)return 2;if(0==l)return 4}return 0};c.Jd=function(a){0!=(a&1)&&(a=a&-2|2);0!=(a&2)&&(a&=-3,a|=1);return a};return c}();a.cI=c})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.F=function(){return 15};c.prototype.aa=function(b,c,d,f,l){return b instanceof a.U?(b=new a.Qc(b),c=new a.Qc(c),this.aa(b,c,d,f,l).next()):void 0===l?new a.Vz(b,c,d,f,-1):new a.Vz(b,c,d,f,l)};c.W=null;return c}(a.Ne);
a.Zr=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h,d,f){this.Eq=null==e;this.va=-1;this.oe=c;this.cg=h;this.Ce=e.next();this.Ji=this.Ce.F();this.Zb=d;this.Xh=f;if(-1!=this.Xh&&(0>=this.Xh||7<this.Xh))throw a.g.O("bad dimension mask");}b.prototype.next=function(){if(this.Eq)return null;var a;if(null!=this.cu){a=this.cu.next();if(null!=a)return a;this.cu=null}for(;null!=(a=this.oe.next());){this.va=this.oe.za();if(-1==this.Xh)return this.Ha(a);this.cu=this.OO(a);return this.cu.next()}return null};
b.prototype.za=function(){return this.va};b.prototype.Ha=function(b){var e=this.uG(b);if(null!=e)return e;var e=a.Ja.Zs(this.Ce,b),c=a.Ja.Ad(this.cg,e,!0),e=new a.i;this.Ce.s(e);var d=new a.i;b.s(d);e.R(2*c,2*c);e.Ha(d);e.R(100*c,100*c);c=a.Fd.clip(this.Ce,e,0,0);b=a.Fd.clip(b,e,0,0);return a.Of.lt(b,c,this.cg,this.Zb)};b.prototype.SE=function(b,e,c){var d=0;if(0!=(e&1))null==c[0]&&(c[0]=new a.pe(b)),d++;else for(var f=0;f<c.length-1;f++)c[f]=c[f+1];if(0!=(e&2))null==c[d]&&(c[d]=new a.Ya(b)),d++;
else for(f=d;f<c.length-1;f++)c[f]=c[f+1];if(0!=(e&4))null==c[d]&&(c[d]=new a.La(b)),d++;else for(f=d;f<c.length-1;f++)c[f]=c[f+1];if(3!=d){b=[];for(f=0;f<d;f++)b[f]=c[f];return new a.Qc(b)}return new a.Qc(c)};b.prototype.OO=function(b){var e=this.uG(b);if(null!=e){var c=[null,null,null];c[e.gb()]=e;return this.SE(b.description,this.Xh,c)}e=a.Ja.Zs(this.Ce,b);c=a.Ja.Ad(this.cg,e,!0);e=new a.i;this.Ce.s(e);e.R(2*c,2*c);var d=new a.i;b.s(d);e.Ha(d);e.R(100*c,100*c);c=a.Fd.clip(this.Ce,e,0,0);e=a.Fd.clip(b,
e,0,0);c=a.Of.Tw(e,c,this.cg,this.Zb);return this.SE(b.description,this.Xh,c)};b.prototype.uG=function(c){var e=a.Ja.Zs(c,this.Ce),h=a.Ja.Ad(this.cg,e,!1),e=c.F(),d=c.u(),f=this.Ce.u(),f=d||f;if(!f){f=new a.i;c.s(f);var g=new a.i;this.Ce.s(g);g.R(2*h,2*h);f=!f.kc(g)}if(!f)if(g=a.cI.hR(this.Ce,c),4==g)f=!0;else{if(0!=(g&2))return this.Ce;if(0!=(g&1))return c}if(f)return h=a.U.ve(e),f=a.U.ve(this.Ji),h<f?b.W(c,d):h>f?this.kF():0==h?e==a.j.MultiPoint&&this.Ji==a.j.Point?this.kF():b.W(c,d):b.W(c,d);if((-1==
this.Xh||4==this.Xh)&&e==a.j.Envelope&&this.Ji==a.j.Envelope)return h=this.Ce,e=new a.i,c.s(e),d=new a.i,h.s(d),e.Ha(d),h=new a.Wj,c.copyTo(h),h.Bu(e),h;if(e==a.j.Envelope&&0==a.U.ve(this.Ji)||this.Ji==a.j.Envelope&&0==a.U.ve(e))return d=e==a.j.Envelope?c:this.Ce,c=e==a.j.Envelope?this.Ce:c,e=new a.i,d.s(e),a.Fd.clip(c,e,h,0);if(0==a.U.ve(e)&&0<a.U.ve(this.Ji)||0<a.U.ve(e)&&0==a.U.ve(this.Ji)){h=a.Ja.Cg(this.cg,c,!1);if(e==a.j.MultiPoint||e==a.j.Point)return a.Of.jD(c,this.Ce,h);if(this.Ji==a.j.MultiPoint||
this.Ji==a.j.Point)return a.Of.jD(this.Ce,c,h);throw a.g.xa();}return-1!=this.Xh&&2!=this.Xh||e!=a.j.Polyline||this.Ji!=a.j.Polygon?-1!=this.Xh&&2!=this.Xh||e!=a.j.Polygon||this.Ji!=a.j.Polyline?null:this.rG(this.Ce,c):this.rG(c,this.Ce)};b.prototype.rG=function(b,e){var c=b,d=e,f=a.Ja.Cg(this.cg,e,!1),g=new a.i;d.s(g);var k=new a.i;c.s(k);k.R(2*f,2*f);g.Ha(k);g.R(10*f,10*f);var c=b=a.Fd.clip(b,g,0,0),k=new a.ha(0),m=-1,q=d.qb;if(null!=q){var r=q.hi;if(null!=r){m=0;k.yb(c.G()+c.fa());for(var s=new a.i,
t=c.Da();t.lb();)for(;t.Ma();){t.ja().s(s);var u=r.En(s);1==u?k.add(1):0==u?k.add(0):(k.add(-1),m++)}}}5<e.G()&&(d=e=a.Fd.clip(e,g,0,0),q=d.qb);0>m&&(m=c.Hw());g=c.G()+d.G();m*=d.G();g*=Math.log(g);if(m>4*g)return null;g=null;m=d.Da();null!=q&&null!=q.Bb&&(g=q.Bb);null==g&&20<d.G()&&(g=a.Ja.nB(d));for(var d=b.Qa(),q=null,r=c.Da(),s=[0,0,0,0,0,0,0,0,0],t=new a.rd(0),u=new a.Ag,w=-1,C=0,x=0,y=0<k.size,A=-1;r.lb();){for(var A=r.Ra,B=0,w=-1,C=0;r.Ma();){var D=y?a.J.truncate(k.get(x)):-1;x++;var K=r.ja();
if(0>D){if(null!=g){null==q?q=g.JN(K,f):q.Gn(K,f);for(D=q.next();-1!=D;D=q.next()){m.Tb(g.ea(D));for(var D=m.ja(),E=K.Ha(D,null,s,null,f),D=0;D<E;D++)t.add(s[D])}}else for(m.Lk();m.lb();)for(;m.Ma();){D=m.ja();E=K.Ha(D,null,s,null,f);for(D=0;D<E;D++)t.add(s[D])}if(0<t.size){t.yd(0,t.size,function(a,b){return a-b});var G=0;t.add(1);for(var E=-1,D=0,H=t.size;D<H;D++){var I=t.get(D);if(I!=G){var J=!1;0!=G||1!=I?(K.Bi(G,I,u),G=u.get()):(G=K,J=!0);if(2<=B){d.xs(c,A,w,C,3==B);if(1!=this.UA(e,G.Nb(),f)&&
1!=this.VA(e,G,f))return null;d.Cc(G,!1);B=1;C=0}else switch(E=this.VA(e,G,f),E){case 1:J?2>B?(w=r.Kb()-c.Fa(A),C=1,B=0==B?3:2):C++:(d.Cc(G,0==B),B=1);break;case 0:B=0;w=-1;C=0;break;default:return null}G=I}}}else{D=this.UA(e,K.Nb(),f);if(0>D)return null;1==D?(2>B&&(w=r.Kb()-c.Fa(A),B=0==B?3:2),C++):(w=-1,C=0)}t.clear(!1)}else 0!=D&&1==D&&(0==B?(B=3,w=r.Kb()-c.Fa(A)):1==B?(B=2,w=r.Kb()-c.Fa(A)):C++)}2<=B&&(d.xs(c,A,w,C,3==B),w=-1)}return d};b.prototype.UA=function(b,e,c){return a.gf.xl(b,e,c)};b.prototype.VA=
function(b,e,c){var d=e.Nb();e=e.pc();var f=a.gf.xl(b,d,c),g=a.gf.xl(b,e,c);if(1==f&&0==g||0==f&&1==g)return-1;if(0==f||0==g)return 0;if(1==f||1==g)return 1;f=new a.b;f.add(d,e);f.scale(0.5);b=a.gf.xl(b,f,c);return 0==b?0:1==b?1:-1};b.W=function(a,b){return b?a:a.Qa()};b.prototype.kF=function(){null==this.$D&&(this.$D=this.Ce.Qa());return this.$D};return b}();a.Vz=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 28};c.local=
function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,f,l,g,k){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,d,f,l,g,k).next()):new a.dI(b,c,d,f,l,g,k)};c.W=null;return c}(a.Ne);a.Wz=b})(A||(A={}));(function(a){var b=function(){function b(a,e,c,d,f,g,k){this.va=-1;this.oe=a;this.Pi=e;this.Ea=c;this.bi=d;this.Cx=f;this.XD=g;this.Ee=k}b.prototype.next=function(){var a=this.oe.next();return null!=a?(this.va=this.oe.za(),this.QH(a)):null};b.prototype.za=function(){return this.va};
b.prototype.QH=function(b){var e;e=0>=this.XD?a.Ja.Cg(this.Pi,b,!1):this.XD;return a.XG.aa(b,this.Ea,this.bi,this.Cx,e,this.Ee)};return b}();a.dI=b})(A||(A={}));(function(a){var b=function(){function b(){}b.prototype.reset=function(){this.Pg=this.Gj=-1;this.Gq=this.So=!1};b.prototype.PM=function(a,b,c){for(a.Tb(b,c);a.Ma();){var d=a.ja(),d=d.ac();if(0!=d)return a.Kb()}for(a.Tb(b,c);a.Nw();)if(d=a.oi(),d=d.ac(),0!=d)return a.Kb();return-1};b.prototype.QM=function(a,b){for(a.Tb(b,-1);a.Nw();)if(0!=
a.oi().ac())return a.Kb();return-1};b.prototype.OM=function(a,b){a.Tb(b,-1);for(a.ja();a.Ma();)if(0!=a.ja().ac())return a.Kb();return-1};b.prototype.NM=function(b,c,d,f){this.Gj=this.PM(c,d,f);if(-1!=this.Gj){c.Tb(this.Gj,-1);var l=c.ja(),g=l.Lb(l.Hd(b,!1));d=a.b.$b(g,b);f=new a.b;f.K(g);f.sub(l.Nb());g=new a.b;g.K(b);g.sub(l.Nb());this.So=0>f.Ai(g);this.Pg=this.OM(c,this.Gj);if(-1!=this.Pg){c.Tb(this.Pg,-1);var l=c.ja(),k=l.Hd(b,!1),k=l.Lb(k),m=a.b.$b(k,b);m>d?this.Pg=-1:(f.K(k),f.sub(l.Nb()),g.K(b),
g.sub(l.Nb()),this.Gq=0>f.Ai(g))}-1==this.Pg&&(this.Pg=this.QM(c,this.Gj),-1!=this.Pg&&(c.Tb(this.Pg,-1),l=c.ja(),k=l.Hd(b,!1),k=l.Lb(k),m=a.b.$b(k,b),m>d?this.Pg=-1:(f.K(k),f.sub(l.Nb()),g.K(b),g.sub(l.Nb()),this.Gq=0>f.Ai(g),b=this.Gj,this.Gj=this.Pg,this.Pg=b,b=this.So,this.So=this.Gq,this.Gq=b)))}};b.prototype.EK=function(a,b,c,d,f){c=c.Da();this.NM(a,c,d,f);if(-1!=this.Gj&&-1==this.Pg)return this.So;if(-1!=this.Gj&&-1!=this.Pg){if(this.So==this.Gq)return this.So;c.Tb(this.Gj,-1);a=c.ja().Pf(1);
c.Tb(this.Pg,-1);b=c.ja().Pf(0);return 0<=a.Ai(b)?!0:!1}return b};return b}(),c=function(c){function e(){c.apply(this,arguments)}H(e,c);e.local=function(){null===e.W&&(e.W=new e);return e.W};e.prototype.F=function(){return 3};e.prototype.yw=function(b,e,c,d){void 0===d&&(d=!1);if(b.u())return new a.dl;e=e.A();var f=b,l=b.F();l==a.j.Envelope&&(f=new a.La,f.Xc(b,!1),l=a.j.Polygon);switch(l){case a.j.Point:return this.OE(f,e);case a.j.MultiPoint:return this.BE(f,e);case a.j.Polyline:case a.j.Polygon:return this.cQ(f,
e,c,d);default:throw a.g.sa("not implemented");}};e.prototype.zw=function(b,e){if(b.u())return new a.dl;var c=e.A(),d=b,f=b.F();f==a.j.Envelope&&(d=new a.La,d.Xc(b,!1),f=a.j.Polygon);switch(f){case a.j.Point:return this.OE(d,c);case a.j.MultiPoint:case a.j.Polyline:case a.j.Polygon:return this.BE(d,c);default:throw a.g.sa("not implemented");}};e.prototype.Aw=function(b,e,c,d){if(0>d)throw a.g.O();if(b.u())return[];e=e.A();var f=b,l=b.F();l==a.j.Envelope&&(f=new a.La,f.Xc(b,!1),l=a.j.Polygon);switch(l){case a.j.Point:return this.HQ(f,
e,c,d);case a.j.MultiPoint:case a.j.Polyline:case a.j.Polygon:return this.fQ(f,e,c,d);default:throw a.g.sa("not implemented");}};e.prototype.cQ=function(e,c,d,f){if(e.F()==a.j.Polygon&&d&&(d=new a.i,e.s(d),d=a.Ja.Ad(null,d,!1),0!=(f?a.hd.ie(e,c,0):a.hd.ie(e,c,d)))){var l=new a.dl(c,0,0);f&&l.UF(!0);return l}for(var g=e.Da(),l=new a.b,k=d=-1,m=1.7976931348623157E308,q=!1,r=0;g.lb();)for(;g.Ma();){var q=g.ja(),q=q.Lb(q.Hd(c,!1)),s=a.b.$b(q,c);s<m?(r=1,l=q,d=g.Kb(),k=g.Ra,m=s):s==m&&r++}l=new a.dl(l,
d,Math.sqrt(m));f&&(g.Tb(d,k),q=g.ja(),q=0>a.b.zn(c,q.Nb(),q.pc()),1<r&&(f=new b,f.reset(),q=f.EK(c,q,e,d,k)),l.UF(q));return l};e.prototype.OE=function(b,e){var c=b.A(),d=a.b.Gb(c,e);return new a.dl(c,0,d)};e.prototype.BE=function(b,e){for(var c=b.oc(0),d=b.G(),f=0,l=0,g=0,k=1.7976931348623157E308,m=0;m<d;m++){var q=new a.b;c.fc(2*m,q);var r=a.b.$b(q,e);r<k&&(l=q.x,g=q.y,f=m,k=r)}c=new a.dl;c.sv(l,g,f,Math.sqrt(k));return c};e.prototype.HQ=function(b,e,c,d){if(0==d)return[];c*=c;b=b.A();e=a.b.$b(b,
e);e<=c?(c=[],d=new a.dl,d.sv(b.x,b.y,0,Math.sqrt(e)),c[0]=d):c=[];return c};e.prototype.fQ=function(b,e,c,d){if(0==d)return d=[];var f=b.oc(0),l=b.G();b=[];var g=0;c*=c;for(var k=0;k<l;k++){var m=f.read(2*k),q=f.read(2*k+1),r=e.x-m,s=e.y-q,r=r*r+s*s;r<=c&&(s=new a.dl,s.sv(m,q,k,Math.sqrt(r)),g++,b.push(s))}e=b.length;b.sort(function(a,b){return a.Ea<b.Ea?-1:a.Ea==b.Ea?0:1});if(d>=e)return b.slice(0);b.length=d;return b.slice(0)};e.W=null;return e}(a.Ne);a.av=c})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,
arguments)}H(c,b);c.prototype.F=function(){return 4};c.prototype.aa=function(b,c,d,f,l){return a.el.oy(b,c,d,f,l)};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);a.eI=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 33};c.prototype.aa=function(b,c,d,f,l){return 1073741824===b?!a.jd.py(c,d,f,4,l):a.jd.py(c,d,f,b,l)};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);
a.bl=b})(A||(A={}));(function(a){var b=function(){function b(c,e,h,d){this.Ee=d;this.xP=h;this.va=-1;if(null==c)throw a.g.O();this.wk=c;this.Pi=e}b.prototype.next=function(){var a;return null!=(a=this.wk.next())?(this.va=this.wk.za(),this.Py(a)):null};b.prototype.za=function(){return this.va};b.prototype.Py=function(b){if(null==b)throw a.g.O();return a.bv.cG(b,this.Pi,this.xP,this.Ee)};return b}();a.fI=b})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=
function(){return 26};c.prototype.aa=function(b,c,d,f){return b instanceof a.U?(b=new a.Qc(b),this.aa(b,c,d,f).next()):new a.fI(b,c,d,f)};c.prototype.Po=function(b,c,d,f,l){var g=0,g=void 0!==f?a.bv.Po(b,c,d,f,l):a.bv.Po(b,c,!1,null,d);return 0<g};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);a.$r=b})(A||(A={}));(function(a){var b=function(){function a(){this.fp=0}a.prototype.gS=function(a){this.fp&=-2;this.fp|=a?1:0};a.prototype.sl=function(){return 0!=(this.fp&
1)};a.prototype.LC=function(){return this.sl()?0:1};return a}();a.zT=b;var c=function(){return function(){}}(),d=function(){return function(a,b,e,c){this.x=a;this.y=b;this.Sh=e;this.yl=c}}(),e=function(){function a(b){this.ne=b}a.prototype.compare=function(a,b,e){a=a.ea(e);b=this.ne.af.read(2*b);a=this.ne.af.read(2*a);b-=a;return 0>b?-1:0<b?1:0};return a}(),h=function(){function a(b){this.ne=b}a.prototype.compare=function(a,b,e){b=this.ne.ab[b];a=this.ne.ab[a.ea(e)];var c=b.sl(),d=a.sl();e=b.$d.xe(this.ne.xn,
0);var h=a.$d.xe(this.ne.xn,0);e==h&&(e=Math.min(c?b.$d.ka:b.$d.ia,d?a.$d.ka:a.$d.ia),c=0.5*(e-this.ne.xn)+this.ne.xn,c==this.ne.xn&&(c=e),e=b.$d.xe(c,0),h=a.$d.xe(c,0));return e<h?-1:e>h?1:0};return a}(),f=function(){function b(e,c){this.VE=new a.b;this.parent=e;this.lO=c}b.prototype.Xp=function(a,b,e){var c=this.parent,d=this.lO;e.yd(a,b,function(a,b){return c.kj(a,b,d)})};b.prototype.Ko=function(a){a=this.parent.xh.get(a);this.parent.af.fc(2*(a>>1),this.VE);return this.VE.y+(0!=(a&1)?this.parent.Ri:
-this.parent.Ri)};return b}(),g=function(){function g(b,e,c,d,h){this.SD=b.description;this.V=b;this.sg=e;this.Ri=a.Ja.Cg(this.sg,b,!1);this.qn=a.Ja.Cg(this.sg,b,!0);this.xx=c;this.vP=this.SD.Ba;this.ab=[];this.en=[];this.Lg=new a.Zn;this.$a=new a.bj;this.Ld=new a.xd;this.GD=this.pk=h}g.prototype.Xw=function(){this.GD=!0;return(!a.U.Lc(this.V.F())||this.yB()&&this.xB(!1))&&this.NK()?a.U.Lc(this.V.F())?this.QK()?this.V.F()==a.j.Polyline?this.SK()?2:0:this.TK()?this.UK():0:0:2:0};g.prototype.Xy=function(b,
e){var c=this.af.read(2*b),d=this.af.read(2*b+1),h=this.af.read(2*e),f=this.af.read(2*e+1),n=!a.Rr.Uw(c,d,h,f,this.Ri*this.Ri);return n?n:0==this.V.gb()?!1:c==h&&d==f};g.prototype.yB=function(){for(var b=this.V,e=b.Yf?3:2,c=0,d=b.fa();c<d;c++)if(b.Ia(c)<e)return this.Ld=new a.xd(1,c,0),!1;return!0};g.prototype.xB=function(b){for(var e=this.V,c=e.Da(),d=e.hasAttribute(1),e=d?a.Ja.rB(this.sg,e,!1):0;c.lb();)for(;c.Ma();){var h=c.ja();if(!(h.ac()>this.Ri)){if(b&&d){var f=h.ft(1,0),h=h.ft(1,0);if(Math.abs(h-
f)>e)continue}this.Ld=new a.xd(2,c.Kb(),-1);return!1}}return!0};g.prototype.NK=function(){var b=this.V,c=null;a.U.Lc(this.V.F())&&(c=this.V);var d=(this.GD||this.pk)&&null!=c,h=b.G();this.af=b.oc(0);this.xh=new a.ha(0);this.xh.yb(2*h);this.wh=new a.ha(0);this.wh.yb(2*h);d&&(null==this.Bk&&(this.Bk=new a.ha(0)),this.Bk.yb(h));for(var l=b=0;l<h;l++)if(this.xh.add(2*l),this.xh.add(2*l+1),this.wh.add(2*l),this.wh.add(2*l+1),d){for(;l>=c.Ec(b);)b++;this.Bk.add(b)}(new a.Qr).sort(this.wh,0,2*h,new f(this,
d));this.$a.clear();this.$a.In(new e(this));this.$a.ee(h);c=0;for(h*=2;c<h;c++)if(d=this.wh.get(c),b=this.xh.get(d),d=b>>1,0==(b&1)){b=this.$a.addElement(d,-1);l=this.$a.he(b);if(-1!=l&&!this.Xy(this.$a.ea(l),d))return this.Ld=new a.xd(3,d,this.$a.ea(l)),!1;var g=this.$a.cb(b);if(-1!=g&&!this.Xy(this.$a.ea(g),d))return this.Ld=new a.xd(3,d,this.$a.ea(g)),!1}else if(b=this.$a.search(d,-1),l=this.$a.he(b),g=this.$a.cb(b),this.$a.ld(b,-1),-1!=l&&-1!=g&&!this.Xy(this.$a.ea(l),this.$a.ea(g)))return this.Ld=
new a.xd(3,this.$a.ea(l),this.$a.ea(g)),!1;return!0};g.prototype.QK=function(){return 10>this.V.G()?this.OK():this.PK()};g.prototype.PK=function(){var b=new a.gd;b.Fb(this.V);var e=new a.xd;return a.Yu.DE(!1,b,this.Ri,e,this.Ee)?(e.Fk=b.hb(e.Fk),e.Gk=b.hb(e.Gk),this.Ld.Zp(e),!1):!0};g.prototype.OK=function(){for(var b=this.V,e=b.Da(),b=b.Da();e.lb();)for(;e.Ma();){var c=e.ja();if(!e.Km()||!e.XO()){b.wR(e);do for(;b.Ma();){var d=b.ja(),d=c.cq(d,this.Ri,!0);if(0!=d)return this.Ld=new a.xd(2==d?5:4,
e.Kb(),b.Kb()),!1}while(b.lb())}}return!0};g.prototype.TK=function(){var b=this.V;this.ab.length=0;this.en.length=0;this.Hf=b.Da();this.Hf.MR();var e=new a.ha(0);e.yb(10);for(var c=NaN,d=0,h=0,b=2*b.G();h<b;h++){var f=this.wh.get(h),f=this.xh.get(f);if(0==(f&1)){var f=f>>1,n=this.af.read(2*f),l=this.af.read(2*f+1);if(0!=e.size&&(n!=c||l!=d)){if(!this.TE(e))return!1;null!=e&&e.clear(!1)}e.add(f);c=n;d=l}}return this.TE(e)?!0:!1};g.prototype.SK=function(){for(var b=this.V,e=Array(b.fa()),d=0,h=b.fa();d<
h;d++)e[d]=b.Mo(d);var h=new c,f,n,l,g=new a.b,d=this.wh.get(0),d=this.xh.get(d),k=d>>1;this.af.fc(2*k,g);d=this.Bk.get(k);f=e[d];n=b.Fa(d);l=b.Ec(d)-1;h.bk=k==n||k==l;h.Dv=this.pk?!f&&h.bk:h.bk;h.Sh=d;h.x=g.x;h.y=g.y;h.yl=k;for(var m=new c,q=1,z=this.wh.size;q<z;q++)if(d=this.wh.get(q),d=this.xh.get(d),0==(d&1)){k=d>>1;this.af.fc(2*k,g);d=this.Bk.get(k);d!=h.Sh&&(f=e[d],n=b.Fa(d),l=b.Ec(d)-1);var r,s=k==n||k==l;r=this.pk?!f&&h.bk:h.bk;m.x=g.x;m.y=g.y;m.Sh=d;m.yl=k;m.Dv=r;m.bk=s;if(m.x==h.x&&m.y==
h.y)if(this.pk){if(!m.Dv||!h.Dv)if(m.Sh!=h.Sh||!m.bk&&!h.bk)return this.Ld=new a.xd(8,m.yl,h.yl),!1}else if(!m.bk||!h.bk)return this.Ld=new a.xd(5,m.yl,h.yl),!1;d=h;h=m;m=d}return!0};g.prototype.AB=function(){for(var b=this.V,e=[],c=-1,h=!1,f=0,n=b.fa();f<n;f++)b.pt(f)&&(h=!1,c++,f<n-1&&(b.pt(f+1)||(h=!0))),e[f]=h?c:-1;var h=new a.b,f=this.wh.get(0),f=this.xh.get(f),g=f>>1;this.af.fc(2*g,h);for(var f=this.Bk.get(g),c=new d(h.x,h.y,f,g,e[f]),b=[],k=1,n=this.wh.size;k<n;k++)if(f=this.wh.get(k),f=this.xh.get(f),
0==(f&1)){g=f>>1;this.af.fc(2*g,h);f=this.Bk.get(g);f=new d(h.x,h.y,f,g,e[f]);if(f.x==c.x&&f.y==c.y){if(f.Sh==c.Sh)return this.Ld=new a.xd(9,f.yl,c.yl),!1;0<=e[f.Sh]&&e[f.Sh]==e[c.Sh]&&(0!=b.length&&b[b.length-1]==c||b.push(c),b.push(f))}c=f}if(0==b.length)return!0;f=new a.Zn(!0);a.J.Os(e,-1);h=-1;k=new a.b;k.Eh();c=0;for(n=b.length;c<n;c++){g=b[c];if(g.x!=k.x||g.y!=k.y)h=f.jh(0),k.x=g.x,k.y=g.y;var m=e[g.Sh];-1==m&&(m=f.jh(2),e[g.Sh]=m);f.addElement(m,h);f.addElement(h,m)}n=new a.ha(0);n.yb(10);
for(c=f.Xd;-1!=c;c=f.Bw(c))if(b=f.DC(c),0==(b&1)&&0!=(b&2)){b=-1;n.add(c);for(n.add(-1);0<n.size;){h=n.uc();n.bf();k=n.uc();n.bf();g=f.DC(k);if(0!=(g&1)){b=0==(g&2)?h:k;break}f.ZR(k,g|1);for(g=f.hc(k);-1!=g;g=f.cb(g))m=f.getData(g),m!=h&&(n.add(m),n.add(k))}if(-1!=b){f=-1;c=0;for(n=e.length;c<n;c++)if(e[c]==b){f=c;break}this.Ld=new a.xd(10,f,-1);return!1}}return!0};g.prototype.UK=function(){var b=this.V;if(0>=b.Mh())return this.Ld=new a.xd(6,1==b.fa()?1:-1,-1),0;if(1==b.fa())return this.pk&&!this.AB()?
0:2;this.hn=a.ha.Zc(b.fa(),0);this.Gx=a.ha.Zc(b.fa(),-1);for(var e=-1,c=0,d=0,f=b.fa();d<f;d++){var n=b.no(d);this.hn.write(d,0>n?0:256);if(0<n)e=d,c=n;else{if(0==n)return this.Ld=new a.xd(6,d,-1),0;if(0>e||c<Math.abs(n))if(this.Ld=new a.xd(7,d,-1),this.pk)return 0;this.Gx.write(d,e)}}this.jr=b.fa();this.Ll=new a.ha(0);this.Ll.yb(10);f=b.G();this.xn=NaN;b=new a.ha(0);b.yb(10);this.wp=a.ha.Zc(f,-1);this.gu=a.ha.Zc(f,-1);null!=this.Hi?this.Hi.clear(!1):this.Hi=new a.ha(0);this.Hi.yb(10);this.$a.clear();
this.$a.In(new h(this));e=0;for(f*=2;0<this.jr&&e<f;e++)if(c=this.wh.get(e),c=this.xh.get(c),0==(c&1)){c>>=1;d=this.af.read(2*c+1);if(d!=this.xn&&0!=b.size){if(!this.xr(b))return 0;null!=b&&b.clear(!1)}b.add(c);this.xn=d}return 0<this.jr&&!this.xr(b)?0:this.pk?0==this.Ld.yh&&this.AB()?2:0:0==this.Ld.yh?2:1};g.prototype.TE=function(b){if(1==b.size)return!0;for(var e=0,c=b.size;e<c;e++){var d=b.get(e);this.Hf.Tb(d);var h=this.Hf.oi();this.ab.push(this.Ks(h,d,this.Hf.Ra,!0));this.Hf.ja();h=this.Hf.ja();
this.ab.push(this.Ks(h,d,this.Hf.Ra,!1))}var f=this;this.ab.sort(function(a,b){return f.rM(a,b)});d=this.Lg.Xd;-1==d&&(d=this.Lg.jh(0));this.Lg.$l(this.ab.length);e=0;for(c=this.ab.length;e<c;e++)this.Lg.addElement(d,e);for(var e=!0,n=c=-1;e;){e=!1;h=this.Lg.hc(d);if(-1==h)break;for(var l=this.Lg.cb(h);-1!=l;){c=this.Lg.getData(h);n=this.Lg.getData(l);c=this.ab[c].un;n=this.ab[n].un;if(c==n)if(e=!0,this.Lg.Kc(d,h),h=this.Lg.he(l),l=this.Lg.Kc(d,l),-1==l||-1==h)break;else continue;h=l;l=this.Lg.cb(h)}}e=
this.Lg.tq(d);this.Lg.CB(d);if(0<e)return this.Ld=new a.xd(5,c,n),!1;e=0;for(c=b.size;e<c;e++)this.ly(this.ab[e]);this.ab.length=0;return!0};g.prototype.xr=function(b){for(var e=0,c=b.size;e<c;e++){var d=b.get(e),h=this.wp.read(d);if(-1!=h){var f=this.$a.ea(h);this.Hi.add(f);this.$a.ld(h,-1);this.ly(this.ab[f]);this.ab[f]=null;this.wp.write(d,-1)}h=this.gu.read(d);-1!=h&&(f=this.$a.ea(h),this.Hi.add(f),this.$a.ld(h,-1),this.ly(this.ab[f]),this.ab[f]=null,this.gu.write(d,-1))}e=0;for(c=b.size;e<c;e++){d=
b.get(e);this.Hf.Tb(d);h=this.Hf.oi();if(h.ka>h.ia){var n=this.Hf.Kb(),l=this.Ks(h,d,this.Hf.Ra,!0);0<this.Hi.size?(f=this.Hi.uc(),this.Hi.bf(),this.ab[f]=l):(f=this.ab.length,this.ab.push(l));h=this.$a.addElement(f,-1);-1==this.wp.read(n)?this.wp.write(n,h):this.gu.write(n,h);0==(this.hn.read(this.Hf.Ra)&3)&&this.Ll.add(h)}this.Hf.ja();h=this.Hf.ja();h.ka<h.ia&&(n=this.Hf.Cm(),l=this.Ks(h,d,this.Hf.Ra,!1),0<this.Hi.size?(f=this.Hi.uc(),this.Hi.bf(),this.ab[f]=l):(f=this.ab.length,this.ab.push(l)),
h=this.$a.addElement(f,-1),-1==this.wp.read(n)?this.wp.write(n,h):this.gu.write(n,h),0==(this.hn.read(this.Hf.Ra)&3)&&this.Ll.add(h))}e=0;for(c=this.Ll.size;e<c&&0<this.jr;e++)if(h=this.Ll.get(e),0==(this.hn.read(this.ab[this.$a.ea(h)].Fx)&3)){b=-1;for(var d=this.$a.he(h),g=h,n=0,l=null,f=-1,k=0;-1!=d;){f=this.$a.ea(d);l=this.ab[f];f=l.Fx;k=this.hn.read(f);if(0!=(k&3))break;g=d;d=this.$a.he(d)}-1==d?(n=1,d=g):(b=1==(k&3)?f:this.Gx.read(f),n=0!=l.LC()?0:1,d=this.$a.cb(d));do{f=this.$a.ea(d);l=this.ab[f];
f=l.Fx;g=this.hn.read(f);if(0==(g&3)){if(n!=l.LC())return this.Ld=new a.xd(6,f,-1),!1;k=0==n||l.sl()?2:1;g=g&252|k;this.hn.write(f,k);if(2==k&&0==this.Ld.yh&&this.Gx.read(f)!=b&&(this.Ld=new a.xd(7,f,-1),this.pk))return!1;this.jr--;if(0==this.jr)return!0}1==(g&3)&&(b=f);g=d;d=this.$a.cb(d);n=0!=n?0:1}while(g!=h)}null!=this.Ll?this.Ll.clear(!1):this.Ll=new a.ha(0);return!0};g.prototype.Ks=function(b,e,c,d){if(b.F()==a.j.Line)b=this.OL(b);else throw a.g.xa();b.un=e;b.Fx=c;b.fp=0;b.gS(d);return b};g.prototype.OL=
function(e){var c=null;0<this.en.length?(c=this.en[this.en.length-1],this.en.length-=1,e.copyTo(c.$d)):(c=new b,c.$d=a.fA.Zj(e));return c};g.prototype.ly=function(b){b.$d.F()==a.j.Line&&this.en.push(b)};g.prototype.dQ=function(){for(var b=this.V.G(),e=new a.ha(0),c=0;c<b;c++)e.add(c);var d=this;e.yd(0,b,function(a,b){return d.Hs(a,b)});for(c=1;c<b;c++)if(0==this.Hs(e.get(c-1),e.get(c)))return this.Ld=new a.xd(3,e.get(c-1),e.get(c)),0;return 2};g.prototype.MQ=function(){return this.yB()?this.xB(!0)?
2:0:0};g.prototype.KQ=function(){return this.Xw()};g.prototype.eQ=function(){for(var b=this.V.G(),e=new a.ha(0),c=0;c<b;c++)e.add(c);var d=this;e.yd(0,b,function(a,b){return d.tL(a,b)});var h=Array(b);a.J.Os(h,!1);h[e.get(0)]=!0;for(c=1;c<b;c++){var f=e.get(c-1),n=e.get(c);0==this.Hs(f,n)?h[n]=!1:h[n]=!0}for(var e=this.V.Qa(),f=this.V,n=0,l=1,c=0;c<b;c++)h[c]?l=c+1:(n<l&&e.Qd(f,n,l),n=c+1);n<l&&e.Qd(f,n,l);e.hg(2,this.qn);return e};g.prototype.NQ=function(){var b=this.V,e=b.Da(),c=b.Da(),d=this.V.Qa(),
h=this.V,f=b.hasAttribute(1),n=f?a.Ja.rB(this.sg,b,!0):0,l=new a.ha(0),g=new a.ha(0);l.yb(a.J.truncate(b.G()/2+1));for(g.yb(a.J.truncate(b.G()/2+1));e.lb();)if(c.lb(),!(2>b.Ia(e.Ra))){c.yR();for(var k=0,m=0,q=!0;e.Ma();){var z=e.ja(),r=c.oi();if(e.Kb()>c.Kb())break;q&&(l.add(e.Kb()),g.add(c.Cm()),q=!1);var m=l.uc(),s=e.Cm();if(1<s-m){var t=new a.b;t.qc(b.Ga(m),b.Ga(s));k=t.length()}else k=z.ac();m=g.uc();s=c.Kb();1<s-m?(t=new a.b,t.qc(b.Ga(m),b.Ga(s)),m=t.length()):m=r.ac();k>this.qn?l.add(e.Cm()):
f&&(k=b.md(1,l.uc(),0),z=z.Vs(1,0),Math.abs(z-k)>n&&l.add(e.Cm()));m>this.qn?g.add(c.Kb()):f&&(k=b.md(1,g.uc(),0),z=r.Vs(1,0),Math.abs(z-k)>n&&g.add(c.Kb()))}l.uc()<g.uc()?l.size>g.size?l.bf():g.bf():(l.uc()!=g.uc()&&g.bf(),g.bf());if(2<=g.size+l.size){q=new a.Wa;r=0;for(z=l.size;r<z;r++)h.Td(l.get(r),q),0==r?d.ef(q):d.lineTo(q);for(r=g.size-1;0<r;r--)h.Td(g.get(r),q),d.lineTo(q);h.wc(e.Ra)?d.qo():0<g.size&&(h.Td(g.get(0),q),d.lineTo(q))}null!=l&&l.clear(!1);null!=g&&g.clear(!1)}d.hg(2,this.qn);return d};
g.prototype.LQ=function(){return this.wS()};g.prototype.wS=function(){if(this.V.F()==a.j.Polygon&&1==this.V.Dm())return a.Of.Rj(this.V,this.qn,!0,!1,this.Ee);this.Zh=new a.gd;this.Zh.Fb(this.V);0!=this.Zh.qd&&(1!=this.xx&&a.aj.aa(this.Zh,this.qn,this.Ee,!0),this.V.F()==a.j.Polygon&&a.nm.aa(this.Zh,this.Zh.ad,this.xx,!1,this.Ee));this.V=this.Zh.jf(this.Zh.ad);this.V.F()==a.j.Polygon&&(this.V.hl(),this.V.Np(0));this.V.hg(2,this.qn);return this.V};g.bc=function(b,e,c){if(b.u())return 1;var d=b.F();if(d==
a.j.Point)return 1;if(d==a.j.Envelope)return c=new a.i,b.s(c),c.mg(a.Ja.Cg(e,b,!1))?0:1;if(a.U.Mc(d))throw a.g.xa();if(!a.U.Th(d))throw a.g.xa();var d=a.Ja.Cg(e,b,!1),h=b.sj(d);c=c?-1:h;if(-1!=c)return c;1==c&&(d=0);c=(new g(b,e,c,0,!1)).Xw();b.hg(c,d);return c};g.Po=function(b,e,c,d,h){null!=d&&(d.yh=0,d.Fk=-1,d.Gk=-1);if(b.u())return 1;var f=b.F();if(f==a.j.Point)return 1;var n=a.Ja.Cg(e,b,!1);if(f==a.j.Envelope)return e=new a.i,b.s(e),e.mg(n)?(null!=d&&(d.yh=2,d.Fk=-1,d.Gk=-1),0):1;if(a.U.Mc(f))return n=
new a.Ya(b.description),n.Cc(b,!0),g.Po(n,e,c,d,h);h=b.sj(n);c=c?-1:h;if(-1!=c)return c;e=new g(b,e,c,0,!1);if(f==a.j.MultiPoint)c=e.dQ();else if(f==a.j.Polyline)c=e.MQ();else if(f==a.j.Polygon)c=e.KQ();else throw a.g.xa();b.hg(c,n);null!=d&&0==c&&d.Zp(e.Ld);return c};g.pb=function(b,e,c,d,h){null!=d&&(d.yh=0,d.Fk=-1,d.Gk=-1);if(b.u())return 1;var f=b.F();if(f==a.j.Point)return 1;var n=a.Ja.Cg(e,b,!1);if(f==a.j.Envelope)return e=new a.i,b.s(e),e.mg(n)?(null!=d&&(d.yh=2,d.Fk=-1,d.Gk=-1),0):1;if(a.U.Mc(f))return f=
new a.Ya(b.description),f.Cc(b,!0),g.Po(f,e,c,d,h);b=new g(b,e,-1,0,!0);if(f==a.j.MultiPoint||f==a.j.Polyline||f==a.j.Polygon)e=b.Xw();else throw a.g.xa();null!=d&&d.Zp(b.Ld);return e};g.cG=function(b,e,c,d){if(b.u())return b;var h=b.F();if(h==a.j.Point)return b;var f=a.Ja.Cg(e,b,!1);if(h==a.j.Envelope)return e=new a.i,b.s(e),e.mg(f)?b.Qa():b;if(a.U.Mc(h))return h=new a.Ya(b.description),h.Cc(b,!0),g.cG(h,e,c,d);d=b.sj(f);c=c?-1:d;if(2==c)return b;b=new g(b,e,c,0,!1);if(h==a.j.MultiPoint)b=b.eQ();
else if(h==a.j.Polyline)b=b.NQ();else if(h==a.j.Polygon)b=b.LQ();else throw a.g.xa();return b};g.Qy=function(b,e,c,d){if(b.u())return b;var h=b.F();if(h==a.j.Point)return b;var f=a.Ja.Cg(e,b,!1);if(h==a.j.Envelope)return e=new a.i,b.s(e),e.mg(f)?b.Qa():b;if(a.U.Mc(h))return f=new a.Ya(b.description),f.Cc(b,!0),g.Qy(f,e,c,d);if(!a.U.Th(h))throw a.g.sa("OGC simplify is not implemented for this geometry type "+h);return a.Of.Qy(b,f,!1,d)};g.prototype.kj=function(b,e,c){if(b==e)return 0;b=this.xh.get(b);
var d=this.xh.get(e);e=b>>1;var h=d>>1,f=new a.b,n=new a.b;this.af.fc(2*e,f);f.y+=0!=(b&1)?this.Ri:-this.Ri;this.af.fc(2*h,n);n.y+=0!=(d&1)?this.Ri:-this.Ri;b=f.compare(n);return 0==b&&c?(c=this.Bk.get(e)-this.Bk.get(h),0>c?-1:0<c?1:0):b};g.prototype.Hs=function(b,e){if(b==e)return 0;var c=this.V,d=c.Ga(b),h=c.Ga(e);if(d.x<h.x)return-1;if(d.x>h.x)return 1;if(d.y<h.y)return-1;if(d.y>h.y)return 1;for(d=1;d<this.vP;d++)for(var h=this.SD.Id(d),f=a.qa.Xa(h),n=0;n<f;n++){var l=c.md(h,b,n),g=c.md(h,e,n);
if(l<g)return-1;if(l>g)return 1}return 0};g.prototype.tL=function(a,b){var e=this.Hs(a,b);return 0==e?a<b?-1:1:e};g.prototype.rM=function(a,b){if(a===b)return 0;var e=a.$d.Pf(a.sl()?1:0);a.sl()&&e.zp();var c=b.$d.Pf(b.sl()?1:0);b.sl()&&c.zp();var d=e.os(),h=c.os();return h==d?(d=e.Ai(c),e=8.881784197001252E-16*(Math.abs(c.x*e.y)+Math.abs(c.y*e.x)),Math.abs(d)<=e&&(d--,d++),0>d?1:0<d?-1:0):d<h?-1:1};return g}();a.bv=g})(A||(A={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}
H(c,b);c.prototype.F=function(){return 30};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.prototype.aa=function(b,c,d,f){return b instanceof a.U?(b=new a.Qc(b),c=new a.Qc(c),this.aa(b,c,d,f).next()):new a.gI(b,c,d,f)};c.Pn=function(b,d,f,g){var k=b.gb(),m=d.gb();if(b.u()&&d.u())return k>m?b:d;if(b.u())return d;if(d.u())return b;var q=new a.i,r=new a.i,s=new a.i;b.s(q);d.s(r);s.L(q);s.Eb(r);q=a.Ja.Ad(f,s,!1);r=b.F();s=d.F();return r==a.j.Point&&s==a.j.Point?c.pP(b,d,q):r!=s?0<k||0<m?k>m?
b:d:r==a.j.MultiPoint?c.pA(b,d,q):c.pA(d,b,q):a.Of.Pn(b,d,f,g)};c.pP=function(b,c,d){d=1.00001*d*Math.sqrt(2);d*=d;var f=b.A(),l=c.A(),g=new a.pe(b.description);a.b.$b(f,l)>d&&(g.add(b),g.add(c));return g};c.pA=function(b,c,d){var f=b.oc(0),l=b.G(),g=c.A(),k=b.Qa();d=1.00001*d*Math.sqrt(2);var m=new a.i;b.s(m);m.R(d,d);if(m.contains(g)){d*=d;for(var m=!1,q=[],r=0;r<l;r++)q[r]=!1;for(r=0;r<l;r++){var s=f.read(2*r),t=f.read(2*r+1),s=s-g.x,t=t-g.y;s*s+t*t<=d&&(m=!0,q[r]=!0)}if(m)for(r=0;r<l;r++)q[r]||
k.Qd(b,r,r+1);else k.Qd(b,0,l),k.add(c)}else k.Qd(b,0,l),k.add(c);return k};c.W=null;return c}(a.Ne);a.cv=b})(A||(A={}));(function(a){var b=function(){function b(a,e,c,d){this.Eq=null==e;this.va=-1;this.oe=a;this.cg=c;this.PP=e.next();this.Zb=d}b.prototype.next=function(){if(this.Eq)return null;var b;return null!=(b=this.oe.next())?(this.va=this.oe.za(),a.cv.Pn(b,this.PP,this.cg,this.Zb)):null};b.prototype.za=function(){return this.va};return b}();a.gI=b})(A||(A={}));(function(a){var b=function(){function a(){}
a.prototype.it=function(){this.hw=null;this.Uu=-1;this.xG=!1};return a}(),c=function(){function a(){this.hq=0;this.Ci=[]}a.prototype.SJ=function(a){this.hq+=a.Uu;this.Ci.push(a)};a.prototype.OQ=function(){this.hq-=this.Ci[this.Ci.length-1].Uu;this.Ci.length-=1};a.prototype.Cv=function(){return this.Ci[this.Ci.length-1]};a.prototype.mc=function(a){return a===this};return a}(),d=function(){function e(a,b,e){this.va=-1;this.Fc=!1;this.bE=[!1,!1,!1,!1];this.bp=[0,0,0,0];this.nx=!1;this.Hj=-1;this.Qo=
0;this.Um=-1;this.sn=[];this.oe=a;this.cg=b;this.Zb=e}e.bc=function(a){var b=[],e;for(e in a)b.push(Number(e));b.sort(function(a,b){return a-b});return b};e.prototype.UC=function(b){var c=this.sn[b],d=e.bc(c)[0],f=c[d],l=f.Cv().hw,f=f.Cv().xG;delete c[d];f&&(l=a.$r.local().aa(l,this.cg,!1,this.Zb),0==b&&l.F()==a.j.Point&&(b=new a.pe(l.description),l.u()||b.add(l),l=b));return l};e.prototype.next=function(){if(this.Fc&&this.Um==this.Hj)return null;for(;!this.ES(););if(-1==this.Hj)return null;if(this.nx){for(this.Um++;;){if(this.Um>
this.Hj||0>this.Um)throw a.g.xa();if(this.bE[this.Um])break}this.va++;return this.UC(this.Um)}this.va=0;this.Um=this.Hj;return this.UC(this.Hj)};e.prototype.za=function(){return this.va};e.prototype.ES=function(){if(this.Fc)return!0;var b=null;null!=this.oe&&(b=this.oe.next(),null==b&&(this.Fc=!0,this.oe=null));if(null!=b){var e=b.gb();this.bE[e]=!0;e>=this.Hj&&!this.nx&&(this.SA(e,!1,b),e>this.Hj&&!this.nx&&this.uR(e))}if(0<this.Qo)for(e=0;e<=this.Hj;e++)for(;1<this.bp[e];)if(b=this.iL(e),0!=b.length)b=
a.Of.nM(b,this.cg,this.Zb),this.SA(e,!0,b);else break;return this.Fc};e.prototype.iL=function(a){for(var b=[],c=[],d=this.sn[a],f=e.bc(d),l=0;l<f.length;l++){var g=f[l],k=d[g];if(this.Fc||1E4<k.hq&&1<k.Ci.length){this.bp[a]-=k.Ci.length;for(this.Qo-=k.Ci.length;0<k.Ci.length;)b.push(k.Cv().hw),k.OQ();c.push(g)}}for(l=0;l<c.length;l++)delete d[c[l]];return b};e.prototype.uR=function(a){for(var b=0;b<a;b++)this.sn[b]=[],this.Qo-=this.bp[b],this.bp[b]=0};e.prototype.SA=function(a,d,f){var l=new b;l.it();
l.hw=f;f=e.$g(f);l.Uu=f;f=e.Wf(f);if(a+1>this.sn.length)for(var g=0,k=Math.max(2,a+1);g<k;g++)this.sn.push([]);g=this.sn[a][f];void 0===g&&(g=new c,this.sn[a][f]=g);l.xG=d;g.SJ(l);this.bp[a]++;this.Qo++;this.Hj=Math.max(this.Hj,a)};e.Wf=function(b){return 0<b?a.J.truncate(Math.log(b)/Math.log(4)+0.5):0};e.$g=function(b){var e=b.F();if(a.U.Th(e))return b.G();if(e==a.j.Point)return 1;if(e==a.j.Envelope)return 4;if(a.U.Mc(e))return 2;throw a.g.xa();};return e}();a.iI=d})(A||(A={}));(function(a){var b=
function(b){function c(){b.apply(this,arguments)}H(c,b);c.prototype.F=function(){return 1};c.prototype.aa=function(b,c,d,f){return void 0===f?new a.iI(b,c,d):this.wM(b,c,d,f)};c.prototype.wM=function(b,c,d,f){b=new a.Qc([b,c]);return this.aa(b,d,f).next()};c.local=function(){null===c.W&&(c.W=new c);return c.W};c.W=null;return c}(a.Ne);a.wi=b})(A||(A={}));(function(a){var b;(function(a){a[a.nextPath=0]="nextPath";a[a.nextSegment=1]="nextSegment";a[a.iterate=2]="iterate"})(b||(b={}));b=function(){function b(c,
e,d,f){this.cr=new a.i;this.KP=c;this.LP=e;this.Uo=f;this.jn=-1;this.qk=!1;var g=c.qb;null!=g&&(g=f?g.on:g.Bb,null!=g&&(this.Fc=!1,this.la=d,this.Bb=g,this.$t=this.Bb.Se(),this.Vo=this.qk=!0,this.Ib=0,f?this.jn=e.fa():this.cd=e.Da()));this.qk||(g=e.qb,null!=g&&(g=f?g.on:g.Bb,null!=g&&(this.Fc=!1,this.la=d,this.Bb=g,this.$t=this.Bb.Se(),this.qk=!0,this.Vo=!1,this.Ib=0,f?this.jn=c.fa():this.cd=c.Da())));this.qk||(this.th=f?a.Ja.AN(c,e,d,1<=c.sj(0),1<=e.sj(0)):a.Ja.zN(c,e,d))}b.prototype.next=function(){if(this.qk){if(this.Fc)return!1;
for(var b=!0;b;)switch(this.Ib){case 0:b=this.mQ();break;case 1:b=this.nQ();break;case 2:b=this.Zw();break;default:throw a.g.sa("internal error");}return this.Fc?!1:!0}return null==this.th?!1:this.th.next()};b.prototype.jk=function(){return this.qk?this.Vo?this.Bb.ea(this.Qq):this.Uo?this.jn:this.cd.Kb():this.th.jk(this.th.Ff)};b.prototype.fk=function(){return this.qk?this.Vo?this.Uo?this.jn:this.cd.Kb():this.Bb.ea(this.Qq):this.th.fk(this.th.nf)};b.prototype.Ew=function(){if(!this.Uo)throw a.g.sa("internal error");
return this.qk?this.Vo?this.Bb.uC(this.Qq):this.cr:this.th.Ew(this.th.Ff)};b.prototype.iw=function(){if(!this.Uo)throw a.g.sa("internal error");return this.qk?this.Vo?this.cr:this.Bb.uC(this.Qq):this.th.iw(this.th.nf)};b.prototype.mQ=function(){if(!this.Uo){if(!this.cd.lb())return this.Fc=!0,!1;this.Ib=1;return!0}if(-1==--this.jn)return this.Fc=!0,!1;this.Vo?this.LP.Ti(this.jn,this.cr):this.KP.Ti(this.jn,this.cr);this.$t.Ch(this.cr,this.la);this.Ib=2;return!0};b.prototype.nQ=function(){if(!this.cd.Ma())return this.Ib=
0,!0;var a=this.cd.ja();this.$t.Gn(a,this.la);this.Ib=2;return!0};b.prototype.Zw=function(){this.Qq=this.$t.next();return-1==this.Qq?(this.Ib=this.Uo?0:1,!0):!1};return b}();a.cl=b})(A||(A={}));(function(a){a=a.jI||(a.jI={});a[a.enumClosed=1]="enumClosed";a[a.enumHasNonlinearSegments=2]="enumHasNonlinearSegments";a[a.enumOGCStartPolygon=4]="enumOGCStartPolygon";a[a.enumCalcMask=4]="enumCalcMask"})(A||(A={}));(function(a){var b=function(){function b(){}b.Gb=function(c,e,d,f,g,k,m,q,r){var s=[0,0,0],
t=[0,0,0],u=[0,0,0],w=[0,0,0,0],x=new a.da(0),y=new a.da(0),A=new a.da(0);if(null!=m||null!=q||null!=r)if(a.l.Ih(e))a.zg.Gb(c,d,f,g,k,m,q,r);else{g=a.v.X(g);d=a.v.X(d);var B=a.v.X(g-d);if(a.l.T(f,k)&&(a.l.T(d,g)||a.l.T(a.l.I(f),1.570796326794897)))null!=m&&(m.o=0),null!=q&&(q.o=0),null!=r&&(r.o=0);else{if(a.l.T(f,-k)){if(a.l.T(a.l.I(f),1.570796326794897)){null!=m&&(m.o=2*a.v.gg(c,e));null!=q&&(q.o=0<f?a.v.X(3.141592653589793-a.v.X(g)):a.v.X(g));null!=r&&(r.o=0<f?a.v.X(g):a.v.X(3.141592653589793-a.v.X(g)));
return}a.l.T(a.l.I(B),3.141592653589793)&&(null!=m&&(m.o=2*a.v.gg(c,e)),null!=q&&(q.o=0),null!=r&&(r.o=0))}else{if(a.l.T(a.l.I(f),1.570796326794897)||a.l.T(a.l.I(k),1.570796326794897)){a.Yj.Gb(c,e,d,f,g,k,m,q,r);return}if(a.l.T(d,g)||a.l.T(a.l.I(B),3.141592653589793)){a.Yj.Gb(c,e,d,f,g,k,m,q,r);return}if(a.l.Wc(f)){a.Yj.Gb(c,e,d,f,g,k,m,q,r);return}}var D=Math.sqrt(1-e);g=a.v.X(g-d);d=0;a.v.xm(e,f,d,x,y,A);s[0]=x.o;s[1]=y.o;s[2]=A.o;a.v.xm(e,k,g,x,y,A);t[0]=x.o;t[1]=y.o;t[2]=A.o;u[0]=0;u[1]=0;u[2]=
-1*e*a.v.n(1,e,f)*Math.sin(f);0>g?a.v.Cp(u,t,s,w,0):a.v.Cp(u,s,t,w,0);var K=w[1],y=[0,0,0],A=[0,0,0],E=[0,0,0],s=[0,0,0],x=[0,0,0],G=Math.acos(w[2]/1),H=w[0]/-K,K=w[3]/-K,K=K/(-1*(H+1/H));a.v.lm(K,-K/H);for(var H=1-e,K=Math.tan(G),I=1+K*K/H,J=2*u[2]*K/H,K=Math.sqrt(J*J-4*I*(u[2]*u[2]/H-1)),I=2*I,H=(-J+K)/I,J=(-J-K)/I,K=Math.tan(G),I=K*H+u[2],G=(H+J)/2,u=(I+(K*J+u[2]))/2,K=a.v.lm(H-G,I-u),H=1.570796326794897*(u/D),J=0;100>J;J++){I=a.v.Tk(e,H);I=I*I/Math.cos(H)*(Math.sin(H)-u*I/(1*(1-e)));if(a.l.Wc(I))break;
H-=I}var u=a.v.n(1,e,H)*Math.cos(H),u=Math.sqrt((u-G)*(u+G)),K=1-K/u,K=K*(2-K),I=a.v.jm(y),G=a.v.jm(A),H=a.v.jm(E),M=a.v.Pr(E,y),J=a.v.Pr(E,A);a.v.Tu(E,y,s);a.v.Tu(E,A,x);y=Math.acos(M/(H*I));A=Math.acos(J/(H*G));A*=a.l.ob(1,a.v.Pr(s,x));if(1.570796326794897<=a.l.I(y)&&1.570796326794897<=a.l.I(A)||3.141592653589793<a.l.I(y-A))y=(3.141592653589793-a.l.I(y))*a.l.ob(1,y),A=(3.141592653589793-a.l.I(A))*a.l.ob(1,A);s=a.v.Si(K,A);x=a.v.q(u,K,a.v.Si(K,y));s=a.v.q(u,K,s);s=a.l.I(s-x)*c;y=new a.da(0);A=new a.da(0);
E=w[1]/1;E*=-a.l.ob(1,B);x=Math.acos(E)*a.l.ob(1,B);b.hf(c,e,d,f,s,x,y,A);a.l.T(g,y.o)&&a.l.T(k,A.o)||(K=a.v.lm(a.v.X(g-y.o),k-A.o),b.hf(c,e,d,f,s,a.v.X(x+3.141592653589793),y,A),I=a.v.lm(a.v.X(g-y.o),k-A.o),I<K&&(x=a.v.X(x+3.141592653589793)));y=[0,0,0,0];A=[0,0,0,0];u=[0,0,0];K=[0,0,0];c=[0,0,0];d=[0,0,0];f=[0,0,0];E=[0,0,0];u[0]=0;u[1]=0;u[2]=D;K[0]=0;K[1]=0;K[2]=0;a.v.Cp(K,u,t,y,0);a.l.Wc(k)?(c[0]=t[0],c[1]=t[1],c[2]=1,d[0]=1*Math.cos(g)-1*Math.sin(g),d[1]=1*Math.sin(g)+1*Math.cos(g)):(K=a.v.n(1,
e,k)*Math.cos(k),c[0]=0,c[1]=0,t[2]+=Math.tan(1.570796326794897-a.l.I(k))*K*a.l.ob(1,k),d[0]=K*Math.cos(g)-K*Math.sin(g),d[1]=K*Math.sin(g)+K*Math.cos(g));d[2]=t[2];a.v.Cp(t,d,c,A,1);a.v.Tu(A,y,f);a.v.Tu(A,w,E);E=a.v.Pr(f,E)/(a.v.jm(f)*a.v.jm(E));E*=a.l.ob(1,B);e=Math.acos(E)*-a.l.ob(1,B);0<x&&0<e?e=a.v.X(e+3.141592653589793):0>x&&0>e&&(e=a.v.X(e+3.141592653589793));null!=m&&(m.o=s);null!=q&&(q.o=x);null!=r&&(r.o=e)}}};b.hf=function(b,e,c,d,f,g,k,m){var q=[0,0,0],r=[0,0,0],s=[0,0,0],t=[0,0,0],u=[0,
0,0],w=[0,0,0],C=[0,0,0],x=[0,0,0,0],y=new a.da(0),A=new a.da(0),B=new a.da(0),D=new a.da(0),K=new a.da(0),E=new a.da(0);if(null!=k&&null!=m)if(a.l.Ih(e))a.zg.hf(b,c,d,f,g,k,m);else if(a.l.Wc(f))null!=k&&(k.o=c),null!=m&&(m.o=d);else if(g=a.v.X(g),0>f&&(f=a.l.I(f),g=a.v.X(g+3.141592653589793)),c=a.v.X(c),d=a.v.X(d),1.570796326794897<a.l.I(d)&&(c=a.v.X(c+3.141592653589793),d=a.l.ob(3.141592653589793,d)-d),a.l.T(a.l.I(d),1.570796326794897)||a.l.Wc(d)||a.l.Wc(g)||a.l.T(a.l.I(g),3.141592653589793))a.Yj.hf(b,
e,c,d,f,g,k,m);else{var G=Math.sqrt(1-e);b=f/b;a.v.xm(e,d,0,D,K,E);q[0]=D.o;q[1]=K.o;q[2]=K.o;C[0]=0;C[1]=0;C[2]=-1*e*a.v.n(1,e,d)*Math.sin(d);D=a.v.n(1,e,d);K=a.v.X(1.570796326794897-g);E=Math.sin(K);f=Math.cos(d);d=Math.sin(d);u[0]=D*f-d*E;u[1]=Math.cos(K);u[2]=(1-e)*D*d+f*E;0>g?a.v.Cp(C,u,q,x,0):a.v.Cp(C,q,u,x,0);q=Math.acos(x[2]/1);x=Math.atan2(-x[1],-x[0]);d=1-e;u=Math.tan(q);K=1+u*u/d;D=2*C[2]*u/d;u=Math.sqrt(D*D-4*K*(C[2]*C[2]/d-1));K*=2;d=(-D+u)/K;D=(-D-u)/K;u=Math.tan(q);K=u*d+C[2];q=(d+
D)/2;C=(K+(u*D+C[2]))/2;u=a.v.lm(d-q,K-C);G=1.570796326794897*(C/G);for(d=0;100>d;d++){D=a.v.Tk(e,G);D=D*D/Math.cos(G)*(Math.sin(G)-C*D/(1*(1-e)));if(a.l.Wc(D))break;G-=D}G=a.v.n(1,e,G)*Math.cos(G);G=Math.sqrt((G-q)*(G+q));C=1-u/G;C*=2-C;Math.cos(-x);Math.sin(-x);q=a.v.Pr(w,r);u=a.v.jm(r);w=a.v.jm(w);w=Math.acos(q/(w*u));w*=a.l.ob(1,r[0]);g=(a.v.q(G,C,a.v.Si(C,w))+b*a.l.ob(1,g))/a.v.gg(G,C);g=a.v.X(1.570796326794897*g);g=a.v.yn(C,g);a.v.n(G,C,g);u=a.v.X(x+c);q=Math.cos(u);u=Math.sin(u);s[0]=t[0]*
q+t[1]*-u;s[1]=t[0]*u+t[1]*q;s[2]=t[2];a.v.IK(e,s[0],s[1],s[2],B,A,y);null!=k&&(k.o=A.o);null!=m&&(m.o=B.o)}};return b}();a.$z=b})(A||(A={}));(function(a){var b=function(){function b(e){this.Oa=null;this.zr=new a.b;this.Ar=new a.b;this.a=e}b.prototype.compare=function(a,b,e){this.a.vc(b,this.zr);this.a.vc(a.ea(e),this.Ar);return this.zr.compare(this.Ar)};return b}(),c=function(){function b(e){this.of=new a.b;this.mn=new a.b;this.a=e}b.prototype.bh=function(a){this.of.K(a)};b.prototype.compare=function(a,
b){this.a.vc(a.ea(b),this.mn);return this.of.compare(this.mn)};return b}(),d=function(a){function b(e){a.call(this,e.a,e.la,!1);this.bb=e}H(b,a);b.prototype.compare=function(a,b,e){if(this.Zf)return-1;var c=this.bb.Dd.Em(this.bb.lh(b));a=a.ea(e);var d=this.bb.Dd.Em(this.bb.lh(a));this.Cl=e;return this.JB(b,c,a,d)};return b}(a.hA),e=function(a){function b(e){a.call(this,e.a,e.la);this.bb=e}H(b,a);b.prototype.compare=function(a,b){if(this.Zf)return-1;var e=this.bb.Dd.Em(this.bb.lh(a.ea(b)));this.Cl=
b;return this.KB(b,e)};return b}(a.II),h=function(){function h(){this.Ac=this.Ve=this.$m=this.Dd=this.Kg=this.od=this.ab=this.a=null;this.og=!1;this.Xg=this.Kl=this.Wd=this.Mj=this.Mg=this.Ij=this.sf=this.Md=null;this.Yg=this.pp=this.Sx=this.la=0;this.Gt=this.Om=!1;this.nn=new a.b;this.Ck=new a.b;this.ab=new a.Gc(8);this.od=new a.Gc(5);this.Kg=new a.Tr;this.Dd=new a.Tr;this.og=!1;this.Xg=new a.b;this.Xg.na(0,0);this.la=0;this.Yg=-1;this.Om=!1;this.a=null;this.Ve=new a.bj;this.Ac=new a.bj;this.Mg=
new a.ha(0);this.Mj=new a.gA;this.sf=new a.ha(0);this.Ij=new a.ha(0);this.$m=new a.Wa}h.prototype.FS=function(b,e){var c=new a.Bg;c.Ny();b.Pe(c);this.Mp(b);this.Om=!1;this.la=e;this.Sx=e*e;var d=this.Wy();b.Pe(c);d||(this.IM(),d||this.Wy());-1!=this.Yg&&(this.a.cf(this.Yg),this.Yg=-1);this.a=null;return this.Om};h.prototype.JS=function(a,b){this.Mp(a);this.Om=!1;this.la=b;this.Sx=b*b;this.og=!1;this.Wy();this.og||(this.og=1==a.wo(b,!0,!1));-1!=this.Yg&&(this.a.cf(this.Yg),this.Yg=-1);this.a=null};
h.prototype.Uf=function(a,b){return this.ab.P(a,0+b)};h.prototype.yy=function(a,b,e){this.ab.N(a,0+b,e)};h.prototype.lh=function(a){return this.ab.P(a,2)};h.prototype.TR=function(a,b){this.ab.N(a,2,b)};h.prototype.FC=function(a,b){return this.ab.P(a,3+b)};h.prototype.Do=function(a){return this.ab.P(a,7)};h.prototype.Nk=function(a,b){this.ab.N(a,7,b)};h.prototype.Fo=function(a,b){return this.ab.P(a,3+this.Co(a,b))};h.prototype.Op=function(a,b,e){this.ab.N(a,3+this.Co(a,b),e)};h.prototype.YN=function(a,
b){return this.ab.P(a,5+this.Co(a,b))};h.prototype.Qp=function(a,b,e){this.ab.N(a,5+this.Co(a,b),e)};h.prototype.pq=function(a){return this.od.P(a,0)};h.prototype.QR=function(a,b){this.od.N(a,0,b)};h.prototype.nw=function(a){return this.od.P(a,4)};h.prototype.Jp=function(a,b){this.od.N(a,4,b)};h.prototype.qj=function(a){return this.od.P(a,1)};h.prototype.dm=function(a,b){this.od.N(a,1,b)};h.prototype.mw=function(a){return this.od.P(a,3)};h.prototype.Gr=function(a,b){this.od.N(a,3,b)};h.prototype.Ul=
function(a){var b=this.od.ce(),e=this.Kg.jh();this.QR(b,e);-1!=a?(this.Kg.addElement(e,a),this.a.mb(a,this.Yg,b),this.Jp(b,this.a.hb(a))):this.Jp(b,-1);return b};h.prototype.$L=function(a){this.od.Kc(a)};h.prototype.QA=function(a,b){this.Kg.addElement(this.pq(a),b);this.a.mb(b,this.Yg,a)};h.prototype.qr=function(a){var b=this.ab.ce(),e=this.Dd.jh();this.TR(b,e);-1!=a&&this.Dd.addElement(e,a);return b};h.prototype.RA=function(a,b){this.Dd.addElement(this.lh(a),b)};h.prototype.Ms=function(a){this.ab.Kc(a);
a=this.Mg.Ps(a);0<=a&&this.Mg.QE(a)};h.prototype.yi=function(b,e){if(-1==this.Uf(b,0))this.yy(b,0,e);else if(-1==this.Uf(b,1))this.yy(b,1,e);else throw a.g.xa();this.zv(b,e)};h.prototype.zv=function(a,b){var e=this.qj(b);if(-1!=e){var c=this.Fo(e,b);this.Qp(c,b,a);this.Op(a,b,c);this.Op(e,b,a);this.Qp(a,b,e)}else this.Qp(a,b,a),this.Op(a,b,a),this.dm(b,a)};h.prototype.Co=function(a,b){return this.Uf(a,0)==b?0:1};h.prototype.Tl=function(a,b){var e=this.mw(b);-1!=e&&(this.Ve.ld(e,-1),this.Gr(b,-1));
var c=this.qj(a),e=this.qj(b);if(-1!=e){var d=c=e,h=!1;do{var h=!1,f=this.Co(c,b),n=this.FC(c,f);if(this.Uf(c,f+1&1)==a){this.Ns(c);this.Dd.Fg(this.lh(c));this.Ms(c);if(c==n){e=-1;break}e==c&&(e=this.qj(b),d=n,h=!0)}c=n}while(c!=d||h);if(-1!=e){do f=this.Co(c,b),n=this.FC(c,f),this.yy(c,f,a),c=n;while(c!=d);c=this.qj(a);-1!=c?(d=this.Fo(c,a),h=this.Fo(e,a),d==c?(this.dm(a,e),this.zv(c,a),this.dm(a,c)):h==e&&this.zv(e,a),this.Op(e,a,d),this.Qp(d,a,e),this.Op(c,a,h),this.Qp(h,a,c)):this.dm(a,e)}}e=
this.pq(a);c=this.pq(b);for(d=this.Kg.hc(c);-1!=d;d=this.Kg.cb(d))this.a.mb(this.Kg.ea(d),this.Yg,a);this.Kg.Pv(e,c);this.$L(b)};h.prototype.XP=function(a,b){var e=this.Uf(a,0),c=this.Uf(a,1),d=this.Uf(b,0),h=this.Uf(b,1);this.Dd.Pv(this.lh(a),this.lh(b));b==this.qj(e)&&this.dm(e,a);b==this.qj(c)&&this.dm(c,a);this.Ns(b);this.Ms(b);e==d&&c==h||c==d&&e==h||(this.Am(e,this.nn),this.Am(d,this.Ck),this.nn.vb(this.Ck)?(e!=d&&this.Tl(e,d),c!=h&&this.Tl(c,h)):(c!=d&&this.Tl(c,d),e!=h&&this.Tl(e,h)))};h.prototype.Ns=
function(a){var b=this.Uf(a,1);this.SB(a,this.Uf(a,0));this.SB(a,b)};h.prototype.SB=function(a,b){var e=this.Fo(a,b),c=this.YN(a,b),d=this.qj(b);e!=a?(this.Op(c,b,e),this.Qp(e,b,c),d==a&&this.dm(b,e)):this.dm(b,-1)};h.prototype.YA=function(a,b,e){var c=this.Dd.hc(a),d=this.Dd.ea(c);a=this.se(d);var h=this.se(this.a.Y(d));this.a.Rp(d,b,e,!0);for(c=this.Dd.cb(c);-1!=c;c=this.Dd.cb(c)){var d=this.Dd.ea(c),f=this.se(d)==a;this.a.Rp(d,b,e,f)}c=b.Ho(e,0).Nb();b=b.Ho(e,b.kk(e)-1).pc();this.yG(a,c);this.yG(h,
b)};h.prototype.PB=function(a,b,e){var c=this.lh(a),d=this.Uf(a,0),h=this.Uf(a,1),f=this.qr(-1);this.Mg.add(f);this.Nk(f,-3);this.sf.add(f);this.yi(f,d);a=1;for(b=b.kk(e);a<b;a++)e=this.Ul(-1),this.Ij.add(e),this.sf.add(e),this.yi(f,e),f=this.qr(-1),this.Mg.add(f),this.Nk(f,-3),this.sf.add(f),this.yi(f,e);this.yi(f,h);for(c=this.Dd.hc(c);-1!=c;c=this.Dd.cb(c))if(h=this.Dd.ea(c),this.se(h)==d){a=0;do 0<a&&(f=this.sf.get(a-1),this.QA(f,h),-1==this.nw(f)&&this.Jp(f,this.a.hb(h))),f=this.sf.get(a),a+=
2,this.RA(f,h),h=this.a.Y(h);while(a<this.sf.size)}else{a=this.sf.size-1;do a<this.sf.size-2&&(f=this.sf.get(a+1),this.QA(f,h),0>this.nw(f)&&this.Jp(f,this.a.hb(h))),f=this.sf.get(a),a-=2,this.RA(f,h),h=this.a.Y(h);while(0<=a)}this.sf.clear(!1)};h.prototype.se=function(a){return this.a.Sa(a,this.Yg)};h.prototype.UE=function(b,e,c){var d=this.Uf(e,0),h=new a.b;this.Am(d,h);var f=new a.b,n=this.Uf(e,1);this.Am(n,f);var l=c.kk(b),g=c.Ho(b,0),k=new a.b;g.gt(k);if(!h.vb(k)){if(!this.og){var m=h.compare(this.Xg),
k=k.compare(this.Xg);0>m*k&&(this.og=!0)}this.lC(d,this.sf);this.Ij.add(d)}!this.og&&1<l&&(m=h.compare(f),g=g.pc(),h.compare(g)!=m||g.compare(f)!=m?this.og=!0:0>g.compare(this.Xg)&&(this.og=!0));g=c.Ho(b,l-1);b=g.pc();f.vb(b)||(this.og||(m=f.compare(this.Xg),k=b.compare(this.Xg),0>m*k&&(this.og=!0)),this.lC(n,this.sf),this.Ij.add(n));this.sf.add(e);f=0;for(n=this.sf.size;f<n;f++)b=this.sf.get(f),c=this.Do(b),a.Gc.Yw(c)&&(this.Ac.ld(c,-1),this.Nk(b,-1)),b!=e&&-3!=this.Do(b)&&(this.Mg.add(b),this.Nk(b,
-3));this.sf.clear(!1)};h.prototype.MK=function(a,b){this.Md.compare(this.Ac,this.Ac.ea(a),b);this.Md.Zf&&(this.Md.jq(),this.dC(a,b))};h.prototype.dC=function(b,e){this.Om=!0;var c=this.Ac.ea(b),d=this.Ac.ea(e),h,f;f=this.Dd.Em(this.lh(c));var n=this.Dd.Em(this.lh(d));h=this.a.dc(f);null==h&&(null==this.Wd&&(this.Wd=new a.zb),this.a.Pc(f,this.Wd),h=this.Wd);f=this.a.dc(n);null==f&&(null==this.Kl&&(this.Kl=new a.zb),this.a.Pc(n,this.Kl),f=this.Kl);this.Mj.An(h);this.Mj.An(f);this.Mj.Ha(this.la,!0)&&
(this.og=!0);this.fG(c,d,-1,this.Mj);this.Mj.clear()};h.prototype.UM=function(b,e){this.Om=!0;var c=this.Ac.ea(e),d,h=this.Dd.Em(this.lh(c));d=this.a.dc(h);null==d&&(null==this.Wd&&(this.Wd=new a.zb),this.a.Pc(h,this.Wd),d=this.Wd);h=this.qC(b);this.Mj.An(d);this.a.Jk(h,this.$m);this.Mj.Sw(this.la,this.$m,!0);this.fG(c,-1,b,this.Mj);this.Mj.clear()};h.prototype.CO=function(){if(0!=this.Mg.size)for(;0!=this.Mg.size;){if(this.Mg.size>Math.max(100,this.a.qd)){this.Mg.clear(!1);this.og=!0;break}var a=
this.Mg.uc();this.Mg.bf();this.Nk(a,-1);-1!=this.SO(a)&&this.BO(a);this.Nm=!1}};h.prototype.BO=function(a){var b;this.Nm?(b=this.Ac.us(this.lE,this.iE,a,!0),this.Nm=!1):b=this.Ac.PA(a);-1==b?this.XP(this.Ac.ea(this.Ac.tC()),a):(this.Nk(a,b),this.Md.Zf&&(this.Md.jq(),this.dC(this.Md.Cl,b)))};h.prototype.SO=function(b){var e=this.Uf(b,0);b=this.Uf(b,1);this.Am(e,this.nn);this.Am(b,this.Ck);if(a.b.$b(this.nn,this.Ck)<=this.Sx)return this.og=!0,-1;var c=this.nn.compare(this.Xg),d=this.Ck.compare(this.Xg);
return 0>=c&&0<d?b:0>=d&&0<c?e:-1};h.prototype.GM=function(){var b=new a.ha(0);b.yb(this.a.qd);for(var e=this.a.Ep(),c=e.next();-1!=c;c=e.next())-1!=this.a.Sa(c,this.Yg)&&b.add(c);this.a.Lu(b,b.size);this.HM(b)};h.prototype.HM=function(e){this.Ve.clear();this.Ve.ee(e.size);this.Ve.In(new b(this.a));var c=new a.b;c.Eh();for(var d=-1,h=new a.b,f=0,n=e.size;f<n;f++){var l=e.get(f);this.a.vc(l,h);h.vb(c)?(l=this.a.Sa(l,this.Yg),this.Tl(d,l)):(d=this.se(l),this.a.vc(l,c),l=this.Ve.rm(l),this.Gr(d,l))}};
h.prototype.IM=function(){var b=new a.ha(0);b.yb(this.a.qd);for(var e=this.Ve.hc(-1);-1!=e;e=this.Ve.cb(e))b.add(this.Ve.ea(e));this.Ve.clear();this.a.Lu(b,b.size);for(var e=0,c=b.size;e<c;e++){var d=b.get(e),h=this.se(d),d=this.Ve.rm(d);this.Gr(h,d)}};h.prototype.lC=function(b,e){var c=this.qj(b);if(-1!=c){var d=c;do a.Gc.Yw(this.Do(d))&&e.add(d),d=this.Fo(d,b);while(d!=c)}};h.prototype.yG=function(a,b){for(var e=this.Kg.hc(this.pq(a));-1!=e;e=this.Kg.cb(e))this.a.Yi(this.Kg.ea(e),b)};h.prototype.fG=
function(a,b,e,c){this.Ns(a);-1!=b&&this.Ns(b);this.UE(0,a,c);-1!=b&&this.UE(1,b,c);-1!=e&&(c.of.A(this.nn),this.Am(e,this.Ck),this.Ck.vb(this.nn)||this.Ij.add(e));e=0;for(var d=this.Ij.size;e<d;e++){var h=this.Ij.get(e),f=this.mw(h);-1!=f&&(this.Ve.ld(f,-1),this.Gr(h,-1))}e=this.lh(a);d=-1!=b?this.lh(b):-1;this.YA(e,c,0);-1!=b&&this.YA(d,c,1);this.PB(a,c,0);-1!=b&&this.PB(b,c,1);this.Dd.Fg(e);this.Ms(a);-1!=b&&(this.Dd.Fg(d),this.Ms(b));e=0;for(d=this.Ij.size;e<d;e++)h=this.Ij.get(e),h==this.pp&&
(this.Gt=!0),f=this.mw(h),-1==f&&(f=this.Ve.PA(this.qC(h)),-1==f?(a=this.se(this.Ve.ea(this.Ve.tC())),this.Tl(a,h)):this.Gr(h,f));this.Ij.clear(!1)};h.prototype.Am=function(a,b){this.a.SC(this.nw(a),b)};h.prototype.qC=function(a){return this.Kg.Em(this.pq(a))};h.prototype.Wy=function(){this.Gt=!1;this.pp=-1;null==this.Md&&(this.Ac.Bt=!1,this.Md=new d(this),this.Ac.Rm=this.Md);var b=new a.ha(0),h=null,f=null,n=0;this.iE=this.lE=-1;this.Nm=!1;for(var g=this.Ve.hc(-1);-1!=g;){n++;this.Nm=!1;var k=this.Ve.ea(g);
this.pp=this.se(k);this.a.vc(k,this.Xg);this.Md.XF(this.Xg.y,this.Xg.x);var m=!1,q=this.qj(this.pp),m=-1==q;if(!m){k=q;do{var r=this.Do(k);-1==r?(this.Mg.add(k),this.Nk(k,-3)):-3!=r&&b.add(r);k=this.Fo(k,this.pp)}while(k!=q)}if(0<b.size){this.Nm=1==b.size&&1==this.Mg.size;m=0;for(q=b.size;m<q;m++)k=this.Ac.ea(b.get(m)),this.Nk(k,-2);for(var s=-2,t=-2,m=0,q=b.size;m<q;m++){r=b.get(m);if(-2==s){var u=this.Ac.he(r);-1!=u?(k=this.Ac.ea(u),k=this.Do(k),-2!=k&&(s=u)):s=-1}-2==t&&(r=this.Ac.cb(r),-1!=r?
(k=this.Ac.ea(r),k=this.Do(k),-2!=k&&(t=r)):t=-1);if(-2!=s&&-2!=t)break}m=0;for(q=b.size;m<q;m++)r=b.get(m),k=this.Ac.ea(r),this.Ac.ld(r,-1),this.Nk(k,-1);b.clear(!1);this.lE=-1!=s?s:-1;this.iE=-1!=t?t:-1;-1!=s&&-1!=t?this.Nm||this.MK(s,t):-1==s&&-1==t&&(this.Nm=!1)}else m&&(null==h&&(h=new e(this)),h.bh(this.Xg),this.Ac.sF(h),h.Zf&&(h.jq(),this.UM(this.pp,h.Cl)));this.CO();this.Gt?(this.Gt=!1,null==f&&(f=new c(this.a)),f.bh(this.Xg),g=this.Ve.sF(f)):g=this.Ve.cb(g)}return this.Om};h.prototype.Mp=
function(b){this.a=b;this.Yg=this.a.re();this.ab.ee(b.qd+32);this.od.ee(b.qd);this.Kg.Cr(b.qd);this.Kg.$l(b.qd);this.Dd.Cr(b.qd+32);this.Dd.$l(b.qd+32);for(b=this.a.ad;-1!=b;b=this.a.we(b))if(a.U.Lc(this.a.Mb(b)))for(l=this.a.Wb(b);-1!=l;l=this.a.cc(l)){var e=this.a.Ia(l),c=this.a.Db(l),d=this.Ul(c),h=this.qr(c);this.yi(h,d);g=this.a.Y(c);c=0;for(e-=2;c<e;c++){var f=this.a.Y(g),n=this.Ul(g);this.yi(h,n);h=this.qr(g);this.yi(h,n);g=f}this.a.wc(l)?(n=this.Ul(g),this.yi(h,n),h=this.qr(g),this.yi(h,n),
this.yi(h,d)):(n=this.Ul(g),this.yi(h,n))}else for(var l=this.a.Wb(b);-1!=l;l=this.a.cc(l))for(var g=this.a.Db(l),d=0,e=this.a.Ia(l);d<e;d++)this.Ul(g),g=this.a.Y(g);this.GM()};return h}();a.aA=h})(A||(A={}));(function(a){var b=function(b){function c(e,d,f){b.call(this);if(void 0!==e)if(void 0!==f){this.description=a.Pd.Tf();var l=new a.fe;l.L(e,d,f);this.Oy(l)}else if(void 0!==d)this.description=a.Pd.Tf(),this.jc(e,d);else if(e instanceof a.qa)this.description=e;else if(e instanceof a.b)this.description=
a.Pd.Tf(),this.jc(e);else throw a.g.O();else this.description=a.Pd.Tf()}H(c,b);c.prototype.A=function(b){if(void 0!==b){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");b.na(this.ga[0],this.ga[1])}else{if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");b=new a.b;b.na(this.ga[0],this.ga[1]);return b}};c.prototype.jc=function(a,b){"number"===typeof a?(this.rc(),null==this.ga&&this.jo(),this.ga[0]=a,this.ga[1]=b):(this.rc(),
this.jc(a.x,a.y))};c.prototype.Kw=function(){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");var b=new a.fe;b.x=this.ga[0];b.y=this.ga[1];this.description.WC()?b.z=this.ga[2]:b.z=a.qa.ue(1);return b};c.prototype.Oy=function(b){this.rc();var c=this.hasAttribute(1);c||a.qa.nD(1,b.z)||(this.Oe(1),c=!0);null==this.ga&&this.jo();this.ga[0]=b.x;this.ga[1]=b.y;c&&(this.ga[2]=b.z)};c.prototype.lk=function(){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");
return this.ga[0]};c.prototype.pS=function(a){this.setAttribute(0,0,a)};c.prototype.mk=function(){if(this.tc())throw a.g.sa("This operation should not be performed on an empty geometry.");return this.ga[1]};c.prototype.$F=function(a){this.setAttribute(0,1,a)};c.prototype.kO=function(){return this.md(1,0)};c.prototype.qS=function(a){this.setAttribute(1,0,a)};c.prototype.MN=function(){return this.md(2,0)};c.prototype.aS=function(a){this.setAttribute(2,0,a)};c.prototype.Rc=function(){return this.nC(3,
0)};c.prototype.md=function(b,c){var d=this.description.zf(b);return 0<=d?this.ga[this.description.fj(d)+c]:a.qa.ue(b)};c.prototype.nC=function(b,c){var d=this.description.zf(b);return 0<=d?this.ga[this.description.fj(d)+c]:a.qa.ue(b)};c.prototype.setAttribute=function(a,b,c){this.rc();var d=this.description.zf(a);0>d&&(this.Oe(a),d=this.description.zf(a));null==this.ga&&this.jo();this.ga[this.description.fj(d)+b]=c};c.prototype.F=function(){return a.j.Point};c.prototype.gb=function(){return 0};c.prototype.Ka=
function(){this.rc();null!=this.ga&&(this.ga[0]=NaN,this.ga[1]=NaN)};c.prototype.om=function(b){if(null!=this.ga){for(var c=a.Pd.hu(b,this.description),d=[],f=0,l=0,g=b.Ba;l<g;l++){var k=b.Id(l),m=a.qa.Xa(k);if(-1==c[l])for(var q=a.qa.ue(k),k=0;k<m;k++)d[f]=q,f++;else{q=this.description.fj(c[l]);for(k=0;k<m;k++)d[f]=this.ga[q],f++,q++}}this.ga=d}this.description=b};c.prototype.jo=function(){this.iF(this.description.me.length);c.pb(this.description.me,this.ga,this.description.me.length);this.ga[0]=
NaN;this.ga[1]=NaN};c.prototype.Pe=function(b){if(b instanceof a.Bg){if(!this.tc()){var c=this.A();b.Zi(c,c);this.jc(c)}}else this.tc()||(this.Oe(1),c=this.Kw(),this.Oy(b.Rn(c)))};c.prototype.copyTo=function(b){if(b.F()!=a.j.Point)throw a.g.O();b.rc();null==this.ga?(b.Ka(),b.ga=null,b.Qf(this.description)):(b.Qf(this.description),b.iF(this.description.me.length),c.pb(this.ga,b.ga,this.description.me.length))};c.prototype.Qa=function(){return new c(this.description)};c.prototype.u=function(){return this.tc()};
c.prototype.tc=function(){return null==this.ga||isNaN(this.ga[0])||isNaN(this.ga[1])};c.prototype.Dp=function(a){a.Ka();this.description!=a.description&&a.Qf(this.description);a.Eb(this)};c.prototype.s=function(a){this.tc()?a.Ka():(a.w=this.ga[0],a.D=this.ga[1],a.C=this.ga[0],a.H=this.ga[1])};c.prototype.Dn=function(a){if(this.tc())a.Ka();else{var b=this.Kw();a.w=b.x;a.D=b.y;a.Ke=b.z;a.C=b.x;a.H=b.y;a.ig=b.z}};c.prototype.Ah=function(b,c){var d=new a.Od;if(this.tc())return d.Ka(),d;var f=this.md(b,
c);d.ra=f;d.wa=f;return d};c.prototype.iF=function(b){if(null==this.ga)this.ga=a.J.Lh(b);else if(this.ga.length<b){for(var c=this.ga.slice(0),d=this.ga.length;d<b;d++)c[d]=0;this.ga=c}};c.pb=function(a,b,c){if(0<c)for(c=0;c<a.length;c++)b[c]=a[c]};c.prototype.mc=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.tc())return a.tc()?!0:!1;for(var b=0,d=this.description.me.length;b<d;b++)if(this.ga[b]!=a.ga[b])return!1;return!0};c.prototype.ic=function(){var b=
this.description.ic();if(!this.tc())for(var c=0,d=this.description.me.length;c<d;c++)var f=this.ga[c],f=a.J.truncate(f^f>>>32),b=a.J.kg(f,b);return b};c.prototype.Rf=function(){return null};return c}(a.U);a.Wa=b})(A||(A={}));(function(a){var b=function(){function a(b,c,d){void 0!==b&&(this.x=b,this.y=c,this.z=d)}a.Pa=function(b,c,d){var f=new a;f.x=b;f.y=c;f.z=d;return f};a.prototype.L=function(a,b,c){this.x=a;this.y=b;this.z=c};a.prototype.Ku=function(){this.z=this.y=this.x=0};a.prototype.normalize=
function(){var a=this.length();0==a&&(this.x/=a,this.y/=a,this.z/=a)};a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};a.prototype.sub=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)};a.prototype.yp=function(b){return new a(this.x*b,this.y*b,this.z*b)};a.prototype.FA=function(){this.x=NaN};a.prototype.ov=function(){return isNaN(this.x)};return a}();a.fe=b})(A||(A={}));(function(a){var b=function(){function b(a,c,d){this.fu=this.Xt=null;this.Gf=
c;this.JP=c.y-d;this.IP=c.y+d;this.vp=0;this.hx=a;this.la=d;this.TP=d*d;this.ix=0!=d;this.wt=!1}b.prototype.result=function(){return 0!=this.vp?1:0};b.prototype.CJ=function(b){b=b.Lb(b.Hd(this.Gf,!1));return a.b.$b(b,this.Gf)<=this.TP?!0:!1};b.prototype.WB=function(a){if(!this.ix&&(this.hx&&this.Gf.vb(a.Nb())||this.Gf.vb(a.pc())))this.wt=!0;else if(a.ka==this.Gf.y&&a.ka==a.ia){if(this.hx&&!this.ix){var b=Math.min(a.oa,a.ma),c=Math.max(a.oa,a.ma);this.Gf.x>b&&this.Gf.x<c&&(this.wt=!0)}}else if(b=!1,
c=Math.max(a.oa,a.ma),this.Gf.x>c?b=!0:this.Gf.x>=Math.min(a.oa,a.ma)&&(b=0<a.mt(!0,this.Gf.y,this.fu,null)&&this.fu[0]<=this.Gf.x),b){if(this.Gf.y==a.Nb().y){if(this.Gf.y<a.pc().y)return}else if(this.Gf.y==a.pc().y&&this.Gf.y<a.Nb().y)return;this.vp=this.hx?this.vp^1:this.vp+(a.Nb().y>a.pc().y?1:-1)}};b.prototype.yr=function(a){var b=a.Ah(0,1);if(b.ra>this.IP||b.wa<this.JP)return!1;if(this.ix&&this.CJ(a))return!0;if(b.ra>this.Gf.y||b.wa<this.Gf.y)return!1;null==this.Xt&&(this.Xt=[null,null,null,
null,null]);null==this.fu&&(this.fu=[0,0,0]);b=a.TC(this.Xt);if(0<b)for(a=0;a<b;a++){var c=this.Xt[a].get();this.WB(c);if(this.wt)return!0}else if(this.WB(a),this.wt)return!0;return!1};b.W=function(a,c,d){c=new b(0==a.Dm(),c,d);for(a=a.Da();a.lb();)for(;a.Ma();)if(d=a.ja(),c.yr(d))return-1;return c.result()};b.Cd=function(c,e,d,f){var g=new a.i;c.ed(g);g.R(f,f);var k=new b(0==c.Dm(),d,f);c=c.Da();var m=new a.i;m.L(g);m.C=d.x+f;m.D=d.y-f;m.H=d.y+f;d=e.ww(m,f);for(f=d.next();-1!=f;f=d.next())if(c.Tb(e.ea(f)),
c.Ma()&&(f=c.ja(),k.yr(f)))return-1;return k.result()};b.xl=function(c,e,d){if(c.u())return 0;var f=new a.i;c.ed(f);f.R(d,d);if(!f.contains(e))return 0;f=c.qb;if(null!=f){var g=f.hi;if(null!=g){g=g.Kk(e.x,e.y);if(1==g)return 1;if(0==g)return 0}f=f.Bb;if(null!=f)return b.Cd(c,f,e,d)}return b.W(c,e,d)};b.$O=function(c,e,d,f){if(c.u())return 0;var g=new a.i;c.ed(g);g.R(f,f);if(!g.contains(e,d))return 0;g=c.qb;if(null!=g&&(g=g.hi,null!=g)){g=g.Kk(e,d);if(1==g)return 1;if(0==g)return 0}return b.W(c,a.b.Pa(e,
d),f)};b.ZO=function(a,c,d){return c.u()?0:b.xl(a,c.A(),d)};b.vD=function(c,e,d,f,g){var k=new a.i;c.ed(k);k.R(f,f);if(!k.contains(d))return 0;var m=new b(!0,d,f);if(null!=g){var q=new a.i;q.L(k);q.C=d.x+f;q.D=d.y-f;q.H=d.y+f;c=c.Da();f=g.ww(q,f);for(q=f.next();-1!=q;q=f.next())if(c.Tb(g.ea(q),e),c.Ma()&&c.Ra==e&&(q=c.ja(),m.yr(q)))return-1}else if(c=c.Da(),c.uy(e),c.lb())for(;c.Ma();)if(q=c.ja(),m.yr(q))return-1;return m.result()};b.tD=function(c,e,d){var f=new a.i;c.ed(f);f.R(d,d);if(!f.contains(e))return 0;
e=new b(!1,e,d);for(d=c.Da();d.lb();)if(!(0>c.no(d.Ra))){for(e.vp=0;d.Ma();)if(f=d.ja(),e.yr(f))return-1;if(0!=e.vp)return 1}return e.result()};b.$i=function(c,e,d,f,g){var k=c.Da();k.uy(e);if(!k.lb()||!k.Ma())throw a.g.sa("corrupted geometry");for(e=2;2==e&&k.Ma();)e=k.ja().Lb(0.5),e=b.vD(c,d,e,f,g);if(2==e)throw a.g.sa("internal error");return 1==e?!0:!1};b.Bn=function(a,b){var c=a.G();return 16>c?!1:2*c+1*(Math.log(c)/Math.log(2))*b<1*c*b};return b}();a.gf=b})(A||(A={}));(function(a){var b=function(b){function c(a){b.call(this,
!0,a)}H(c,b);c.prototype.Qa=function(){return new c(this.description)};c.prototype.gb=function(){return 2};c.prototype.F=function(){return a.j.Polygon};return c}(a.al);a.La=b})(A||(A={}));(function(a){(function(a){a[a.PiPOutside=0]="PiPOutside";a[a.PiPInside=1]="PiPInside";a[a.PiPBoundary=2]="PiPBoundary"})(a.oI||(a.oI={}));var b=function(){function b(){}b.uD=function(b,c,d){b=a.gf.ZO(b,c,d);return 0==b?0:1==b?1:2};b.ie=function(b,c,d){b=a.gf.xl(b,c,d);return 0==b?0:1==b?1:2};b.BH=function(b,c,d,
f){b=a.gf.$O(b,c,d,f);return 0==b?0:1==b?1:2};b.fU=function(b,c,d,f){return 0==a.gf.vD(b,c,d,f,null)?0:1};b.tD=function(b,c,d){return 0==a.gf.tD(b,c,d)?0:1};b.YS=function(c,e,d,f,g){if(e.length<d||g.length<d)throw a.g.O();for(var k=0;k<d;k++)g[k]=b.ie(c,e[k],f)};b.dT=function(c,e,d,f,g){if(e.length/2<d||g.length<d)throw a.g.O();for(var k=0;k<d;k++)g[k]=b.BH(c,e[2*k],e[2*k+1],f)};b.nG=function(c,e,d,f,g){if(c.F()==a.j.Polygon)b.YS(c,e,d,f,g);else if(c.F()==a.j.Envelope){var k=new a.i;c.s(k);b.iP(k,
e,d,f,g)}else throw a.g.sa("invalid_call");};b.mU=function(c,e,d,f,g){if(c.F()==a.j.Polygon)b.dT(c,e,d,f,g);else if(c.F()==a.j.Envelope){var k=new a.i;c.s(k);b.lP(k,e,d,f,g)}else throw a.g.ya();};b.iP=function(b,c,d,f,g){if(c.length<d||g.length<d)throw a.g.O();if(b.u())for(f=0;f<d;f++)g[f]=0;else{b.R(0.5*-f,0.5*-f);b.R(0.5*f,0.5*f);for(f=0;f<d;f++)b.contains(c[f])?g[f]=1:b.contains(c[f])?g[f]=2:g[f]=0}};b.lP=function(b,c,d,f,g){if(c.length/2<d||g.length<d)throw a.g.O();if(b.u())for(f=0;f<d;f++)g[f]=
0;else{b.R(0.5*-f,0.5*-f);b.R(0.5*f,0.5*f);for(f=0;f<d;f++)b.contains(c[2*f],c[2*f+1])?g[f]=1:b.contains(c[2*f],c[2*f+1])?g[f]=2:g[f]=0}};b.kT=function(a,b,c,d,f){for(var g=0;g<c;g++)a.Dq(b[g],d)?f[g]=2:f[g]=0};b.gT=function(a,b,c,d,f){var g=a.qb,k=null;null!=g&&(k=g.hi);for(var g=c,m=0;m<c;m++)if(f[m]=1,null!=k){var q=b[m];0==k.Kk(q.x,q.y)&&(f[m]=0,g--)}if(0!=g)for(a=a.Da();a.lb()&&0!=g;)for(;a.Ma()&&0!=g;){k=a.ja();for(m=0;m<c&&0!=g;m++)1==f[m]&&k.Dq(b[m],d)&&(f[m]=2,g--)}for(m=0;m<c;m++)1==f[m]&&
(f[m]=0)};b.oG=function(c,e,d,f,g){var k=c.F();if(k==a.j.Polyline)b.gT(c,e,d,f,g);else if(a.U.Mc(k))b.kT(c,e,d,f,g);else throw a.g.sa("Invalid call.");};return b}();a.hd=b})(A||(A={}));(function(a){var b=function(b){function c(a,d){2==arguments.length?(b.call(this,!1,a.description),this.ef(a),this.lineTo(d)):b.call(this,!1,a)}H(c,b);c.prototype.Qa=function(){return new c(this.description)};c.prototype.gb=function(){return 1};c.prototype.F=function(){return a.j.Polyline};return c}(a.al);a.Ya=b})(A||
(A={}));(function(a){var b=function(){function a(){}a.FT=function(){};return a}();a.QT=b})(A||(A={}));(function(a){var b=function(){function b(){}b.Qv=function(a){return a*b.qQ};b.aG=function(a,c){return b.bR(c-a)};b.jR=function(b){if(-360<=b&&720>b)return 0>b?b+=360:360<=b&&(b-=360),b;b=a.vi.gH(b);0>b&&(b+=360);return b};b.bR=function(a){a=b.jR(a);180<a&&(a-=360);return a};b.NT=0.0174532925199433;b.qQ=57.29577951308232;return b}(),c=function(){function c(){}c.po=function(b,c){var d=new a.i;b.s(d);
var f=a.Za.Gm(c),l=new a.i;l.L(f);l.w=d.w;l.C=d.C;l.R(0.01*l.ca(),0);f=a.Ja.Ad(c,d,!1);return l.contains(d)?b:a.Fd.clip(b,l,f,0)};c.Qw=function(b,d,f,g){if(!a.Za.Oo(d))throw a.g.O();var k=a.Ja.Cg(d,b,!1),m=a.Za.Gm(d),q=a.Za.Fm(d),r=q.Te().Ej,s=a.Za.et(q),q=a.Za.Ss(q),s=s*(2-s),t=0,u=new a.Od;m.vu(u);var w=[[0,0],[0,0]];2==a.Nf.Bm(d)?(w[0][0]=c.ou(g,u),w[0][1]=m.Us(),a.Za.su(),t=w[0][0]*r):t=g*r;var m=new a.da,C=new a.gd;b=C.Fb(b);for(var x=[0],y=new a.b,A=new a.b,B=new a.b,D=new a.b,K=new a.b,E=new a.b,
G=C.Wb(b);-1!=G;G=C.cc(G)){var H=C.Db(G);C.A(H,B);for(var I=!1,J=H=C.Y(H);-1!=J;J=C.Y(J)){if(J==H){if(I)break;I=!0}C.A(J,D);if((k<g-B.x&&D.x-g>k||k<g-D.x&&B.x-g>k||k<-D.y&&B.y>k)&&!(Math.abs(B.x-D.x)>=0.5*u.ba())&&(2==a.Nf.Bm(d)?(w[0][0]=c.ou(B.x,u),w[0][1]=B.y,w[1][0]=c.ou(D.x,u),w[1][1]=D.y,a.Za.XQ(),K.x=w[0][0]*r,K.y=w[0][1]*r,E.x=w[1][0]*r,E.y=w[1][1]*r):(K.x=B.x*r,K.y=B.y*r,E.x=D.x*r,E.y=D.y*r),E.x=6.283185307179586*(D.x-B.x)/u.ba()+K.x,A.x=t,A.y=c.xH(q,s,K,E,t,f),!isNaN(A.y))){a.Ab.Sd(q,s,K.x,
K.y,E.x,E.y,m,null,null,f);var M=m.o;a.Ab.Sd(q,s,K.x,K.y,A.x,A.y,m,null,null,f);var L=m.o;2==a.Nf.Bm(d)?(w[0][0]=A.x/r,w[0][1]=A.y/r,a.Za.pN(),y.y=w[0][1],y.x=g):(y.x=g,y.y=A.y/r);x[0]=0<M?a.J.Jr(L/M,0,1):0.5;0!=x[0]&&1!=x[0]&&(M=C.Va(J),C.Lr(M,x,1),C.jc(C.Y(M),y.x,y.y))}B.K(D)}}return C.jf(b)};c.$M=function(b,d,f){if(b.u())return b;var g=a.Za.IC(d);return c.gC(b,0-180*g,360*g,d,f)};c.xH=function(b,d,f,g,k,m){if(3.141592653589793<=Math.abs(f.x-g.x)||!c.Iv(f.x,g.x,k))return NaN;var q;f.x>g.x?q=g:(q=
f,f=g);g=new a.da(0);var r=new a.da(0),s=new a.da(0);a.Ab.Sd(b,d,q.x,q.y,f.x,f.y,r,g,null,m);var t=r.o,u=0,w=1,C=new a.b;for(C.K(q);t*(w-u)>1E-12*b;){var x=0.5*(u+w);a.Ab.ek(b,d,q.x,q.y,t*x,g.o,r,s,m);C.x=r.o;C.y=s.o;if(C.x==k)break;if(c.Iv(q.x,C.x,k))w=x;else if(c.Iv(f.x,C.x,k))u=x;else return NaN}return C.y};c.Iv=function(a,c,d){a=b.Qv(a);c=b.aG(a,b.Qv(c));d=b.aG(a,b.Qv(d));return 0==d||0<c&&0<d&&d<=c||0>c&&0>d&&d>=c?!0:!1};c.ou=function(a,b){var c=b.wa-b.ra;return b.Ry(a-Math.floor((a-b.ra)/c)*
c)};c.dU=function(b,c,d,f){var l=new a.Od;l.L(c,d);d=f.ba();b=Math.floor((b-c)/d)*d+b;for(l=l.Af();Math.abs(b-l)>Math.abs(b+d-l);)b+=d;return b};c.bU=function(b,c,d,f,l){var g;d.y>f.y?g=f:(g=d,d=f);f=new a.Od;f.L(g.y,d.y);if(!f.contains(0)||3.141592653589793<=Math.abs(g.x-d.x))return NaN;if(g.x==d.x)return g.x;var k=new a.da(0),m=new a.da(0),q=new a.da(0);a.Ab.Sd(b,c,g.x,g.y,d.x,d.y,m,k,null,l);var r=m.o,s=0,t=1,u=new a.b;for(u.K(g);r*(t-s)>1E-12*b;){var w=0.5*(s+t);a.Ab.ek(b,c,g.x,g.y,r*w,k.o,m,
q,l);u.x=m.o;u.y=q.o;f.L(g.y,u.y);if(0==u.y)break;if(f.contains(0))t=w;else if(f.L(d.y,u.y),f.contains(0))s=w;else return NaN}return u.x};c.gC=function(b,c,d,f,l){var g=new a.i;b.s(g);if(g.u())return b;var k=new a.Od;g.vu(k);var m=new a.Od;m.L(c,c+d);if(m.contains(k)&&m.wa!=k.wa)return b;var q=new a.i;q.L(g);var r=b.F();if(r==a.j.Point){q=l?b:b.wm();g=q.lk();if(g<m.ra||g>=m.wa||g==m.wa)g+=Math.ceil((m.ra-g)/d)*d,g=m.Ry(g),q.pS(g);return q}if(r==a.j.MultiPoint){q=l?b:b.wm();f=q.oc(0);r=2*q.G();b=!1;
for(l=0;l<r;l+=2)if(g=f.read(l),g<m.ra||g>=m.wa||g==m.wa)b=!0,g+=Math.ceil((m.ra-g)/d)*d,g=m.Ry(g),f.write(l,g);b&&q.de(1993);return q}if(m.contains(k))return b;if(r==a.j.Envelope)return d=l?b:b.wm(),g.Ha(q),d.Bu(g),d;var s=0.1*Math.max(g.ca(),g.ba());q.R(0,s);m=b;b=f.wq();l=a.wi.local();for(var t=new a.Bg,u=0;;){var w=Math.floor((k.ra-c)/d),C=Math.ceil((k.wa-c)/d);if(3<C-w){w=Math.floor(0.5*(C+w));q.w=g.w-s;q.C=c+d*w;var x=a.Fd.clip(m,q,b,0);q.w=q.C;q.C=g.C+s;var y=a.Fd.clip(m,q,b,0);t.On((w-C)*
d,0);y.Pe(t);r==a.j.Polygon?m=l.aa(x,y,f,null):(m=x,m.add(y,!1));m.s(g);g.vu(k);u++}else break}q.w=c;q.C=c+d;c=new a.i;c.L(q);c.R(b,0);c=Math.floor((g.w-q.w)/d)*d;0!=c?(q.move(c,0),t.On(-c,0)):t.IF();c=r==a.j.Polyline?new a.Ya(m.description):new a.La(m.description);k=new a.i;for(s=new a.i;g.C>q.w;){u=a.Fd.clip(m,q,b,0);u.s(s);if(r==a.j.Polyline?!u.u()&&(s.ba()>b||s.ca()>b):!u.u()&&(r!=a.j.Polygon||s.ba()>b))u.Pe(t),u.s(s),c.s(k),k.R(b,b),k.kc(s)&&r==a.j.Polygon?c=l.aa(c,u,f,null):c.add(u,!1);q.move(d,
0);t.shift(-d,0)}return c};c.YQ=function(b,c,d,f){var l=new a.pe(d.description);l.Qd(d,0,-1);var l=a.Za.Wl(l,b,c),g=d.G();f.Ka();if(!a.Za.Oo(b)||g!=l.G())return!1;var k=new a.i;d.s(k);var m=new a.i;l.s(m);k=k.ba();m=m.ba();if(0!=k&&0!=m){if(m/=k,b=a.Za.Gm(c).ba()/a.Za.Gm(b).ba(),1E-10<Math.abs(m/b-1))return!1}else if(0!=k||0!=m)return!1;f.add(d,!1);for(d=0;d<g;d++)b=l.Ga(d),f.jc(d,b);return!0};c.cU=function(){throw a.g.qe();};return c}();a.gh=c})(A||(A={}));(function(a){(function(a){a[a.rightSide=
1]="rightSide"})(a.rI||(a.rI={}));var b=function(){function b(c,e,d){this.Mq=new a.b;void 0===c?this.un=-1:(this.Mq.K(c),this.un=e,this.Ea=d,this.Tt=0)}b.prototype.UF=function(a){this.Tt=a?this.Tt|1:this.Tt&-2};b.prototype.u=function(){return 0>this.un};b.prototype.ow=function(){if(this.u())throw a.g.sa("invalid call");return new a.Wa(this.Mq.x,this.Mq.y)};b.prototype.hb=function(){if(this.u())throw a.g.sa("invalid call");return this.un};b.prototype.rw=function(){if(this.u())throw a.g.sa("invalid call");
return this.Ea};b.prototype.Ww=function(){return 0!=(this.Tt&1)};b.prototype.sv=function(a,b,c,d){this.Mq.x=a;this.Mq.y=b;this.un=c;this.Ea=d};return b}();a.dl=b})(A||(A={}));(function(a){var b=function(){function b(){}b.prototype.Gn=function(b,c){this.Vg.resize(0);this.ai.length=0;this.Bj=-1;b.ed(this.Lj);this.Lj.R(c,c);this.Lj.kc(this.Bb.Rb)?((this.Hq=a.U.Mc(b.F()))?(this.rE=b.Nb(),this.qE=b.pc(),this.la=c):this.la=NaN,this.Vg.add(this.Bb.$e),this.ai.push(this.Bb.Rb),this.$q=this.Bb.qq(this.Bb.$e)):
this.$q=-1};b.prototype.Ch=function(a,b){this.Vg.resize(0);this.ai.length=0;this.Bj=-1;this.Lj.L(a);this.Lj.R(b,b);this.la=NaN;this.Lj.kc(this.Bb.Rb)?(this.Vg.add(this.Bb.$e),this.ai.push(this.Bb.Rb),this.$q=this.Bb.qq(this.Bb.$e),this.Hq=!1):this.$q=-1};b.prototype.next=function(){if(0==this.Vg.size)return-1;this.Bj=this.$q;var b=null,d=null,f,l=null,g=null;this.Hq&&(b=new a.b,d=new a.b,l=new a.i);for(var k=!1;!k;){for(;-1!=this.Bj;){f=this.Bb.jw(this.Bb.Ts(this.Bj));if(f.kc(this.Lj))if(this.Hq){if(b.K(this.rE),
d.K(this.qE),l.L(f),l.R(this.la,this.la),0<l.Mv(b,d)){k=!0;break}}else{k=!0;break}this.Bj=this.Bb.$s(this.Bj)}if(-1==this.Bj){f=this.Vg.uc();var m=this.ai[this.ai.length-1];null==g&&(g=[],g[0]=new a.i,g[1]=new a.i,g[2]=new a.i,g[3]=new a.i);c.BF(m,g);this.Vg.bf();this.ai.length-=1;for(m=0;4>m;m++){var q=this.Bb.yo(f,m);if(-1!=q&&0<this.Bb.fO(q)&&g[m].kc(this.Lj))if(this.Hq){if(b.K(this.rE),d.K(this.qE),l.L(g[m]),l.R(this.la,this.la),0<l.Mv(b,d)){var r=new a.i;r.L(g[m]);this.Vg.add(q);this.ai.push(r)}}else r=
new a.i,r.L(g[m]),this.Vg.add(q),this.ai.push(r)}if(0==this.Vg.size)return-1;this.Bj=this.Bb.qq(this.Vg.get(this.Vg.size-1))}}this.$q=this.Bb.$s(this.Bj);return this.Bj};b.GL=function(c,d,f){var g=new b;g.Bb=c;g.Lj=new a.i;g.Vg=new a.ha(0);g.ai=[];g.Gn(d,f);return g};b.FL=function(c,d,f){var g=new b;g.Bb=c;g.Lj=new a.i;g.Vg=new a.ha(0);g.ai=[];g.Ch(d,f);return g};b.EL=function(c){var d=new b;d.Bb=c;d.Lj=new a.i;d.Vg=new a.ha(0);d.ai=[];return d};return b}();a.ST=b;var c=function(){function c(b,d){this.Ze=
new a.Gc(11);this.qh=new a.Gc(5);this.Iq=[];this.Qt=new a.ha(0);this.Rb=new a.i;this.Sj(b,d)}c.prototype.reset=function(a,b){this.Ze.Nh(!1);this.qh.Nh(!1);this.Iq.length=0;this.Qt.clear(!1);this.Sj(a,b)};c.prototype.lg=function(a,b){return this.kt(a,b,0,this.Rb,this.$e,!1,-1)};c.prototype.jt=function(a,b,c){c=-1==c?this.$e:this.KC(c);var d=this.ca(c),f=this.BN(c);return this.kt(a,b,d,f,c,!1,-1)};c.prototype.ea=function(a){return this.xN(a)};c.prototype.uC=function(a){return this.jw(this.Ts(a))};c.prototype.ca=
function(a){return this.Ws(a)};c.prototype.BN=function(b){var c=new a.i;c.L(this.Rb);var d=this.Ws(b);b=this.EC(b);for(var f=0;f<2*d;f+=2){var l=a.J.truncate(3&b>>f);0==l?(c.w=0.5*(c.w+c.C),c.D=0.5*(c.D+c.H)):1==l?(c.C=0.5*(c.w+c.C),c.D=0.5*(c.D+c.H)):(2==l?c.C=0.5*(c.w+c.C):c.w=0.5*(c.w+c.C),c.H=0.5*(c.D+c.H))}return c};c.prototype.fO=function(a){return this.Jw(a)};c.prototype.JN=function(a,c){return b.GL(this,a,c)};c.prototype.ww=function(a,c){return b.FL(this,a,c)};c.prototype.Se=function(){return b.EL(this)};
c.prototype.Sj=function(b,c){if(0>c||32<2*c)throw a.g.O("invalid height");this.FP=c;this.Rb.L(b);this.$e=this.Ze.ce();this.Ju(this.$e,0);this.Du(this.$e,0);this.LF(this.$e,0);this.HF(this.$e,0)};c.prototype.kt=function(b,d,f,g,k,m,q){if(!g.contains(d))return 0==f?-1:this.kt(b,d,0,this.Rb,this.$e,m,q);if(!m)for(var r=k;-1!=r;r=this.TN(r))this.Ju(r,this.Jw(r)+1);r=new a.i;r.L(g);g=k;var s=[];s[0]=new a.i;s[1]=new a.i;s[2]=new a.i;for(s[3]=new a.i;f<this.FP&&this.HK(g);f++){c.BF(r,s);for(var t=!1,u=
0;4>u;u++)if(s[u].contains(d)){var t=!0,w=this.yo(g,u);-1==w&&(w=this.NL(g,u));this.Ju(w,this.Jw(w)+1);g=w;r.L(s[u]);break}if(!t)break}return this.yO(b,d,f,r,g,m,k,q)};c.prototype.yO=function(a,b,c,d,f,l,g,k){var m=this.AC(f),q=-1;if(l){if(f==g)return k;this.lM(k);q=k}else q=this.PL(),this.Ay(q,a),this.HR(this.Ts(q),b);this.fS(q,f);-1!=m?(this.Iu(q,m),this.Eu(m,q)):this.DF(f,q);this.Ey(f,q);this.Du(f,this.Ys(f)+1);this.GK(f)&&this.ZM(c,d,f);return q};c.prototype.lM=function(a){var b=this.KC(a),c=
this.AC(b),d=this.ZN(a),f=this.$s(a);this.qq(b)==a?(-1!=f?this.Iu(f,-1):this.Ey(b,-1),this.DF(b,f)):c==a?(this.Eu(d,-1),this.Ey(b,d)):(this.Iu(f,d),this.Eu(d,f));this.Iu(a,-1);this.Eu(a,-1);this.Du(b,this.Ys(b)-1)};c.BF=function(a,b){var c=0.5*(a.w+a.C),d=0.5*(a.D+a.H);b[0].L(c,d,a.C,a.H);b[1].L(a.w,d,c,a.H);b[2].L(a.w,a.D,c,d);b[3].L(c,a.D,a.C,d)};c.prototype.GK=function(a){return 8==this.Ys(a)&&!this.VC(a)};c.prototype.ZM=function(a,b,c){var d,f,l=this.qq(c);do f=this.Ts(l),d=this.qh.P(l,0),f=this.jw(f),
this.kt(d,f,a,b,c,!0,l),l=this.$s(l);while(-1!=l)};c.prototype.HK=function(a){return 8<=this.Ys(a)||this.VC(a)};c.prototype.VC=function(a){return-1!=this.yo(a,0)||-1!=this.yo(a,1)||-1!=this.yo(a,2)||-1!=this.yo(a,3)};c.prototype.NL=function(a,b){var c=this.Ze.ce();this.LR(a,b,c);this.Ju(c,0);this.Du(c,0);this.Uj(c,a);this.HF(c,this.Ws(a)+1);this.LF(c,b<<2*this.Ws(a)|this.EC(a));return c};c.prototype.PL=function(){var b=this.qh.ce(),c;0<this.Qt.size?(c=this.Qt.uc(),this.Qt.bf()):(c=this.Iq.length,
this.Iq.push(new a.i));this.IR(b,c);return b};c.prototype.yo=function(a,b){return this.Ze.P(a,b)};c.prototype.LR=function(a,b,c){this.Ze.N(a,b,c)};c.prototype.qq=function(a){return this.Ze.P(a,4)};c.prototype.DF=function(a,b){this.Ze.N(a,4,b)};c.prototype.AC=function(a){return this.Ze.P(a,5)};c.prototype.Ey=function(a,b){this.Ze.N(a,5,b)};c.prototype.EC=function(a){return this.Ze.P(a,6)};c.prototype.LF=function(a,b){this.Ze.N(a,6,b)};c.prototype.Ys=function(a){return this.Ze.P(a,7)};c.prototype.Jw=
function(a){return this.Ze.P(a,8)};c.prototype.Du=function(a,b){this.Ze.N(a,7,b)};c.prototype.Ju=function(a,b){this.Ze.N(a,8,b)};c.prototype.TN=function(a){return this.Ze.P(a,9)};c.prototype.Uj=function(a,b){this.Ze.N(a,9,b)};c.prototype.Ws=function(a){return this.Ze.P(a,10)};c.prototype.HF=function(a,b){this.Ze.N(a,10,b)};c.prototype.xN=function(a){return this.qh.P(a,0)};c.prototype.Ay=function(a,b){this.qh.N(a,0,b)};c.prototype.ZN=function(a){return this.qh.P(a,1)};c.prototype.$s=function(a){return this.qh.P(a,
2)};c.prototype.Iu=function(a,b){this.qh.N(a,1,b)};c.prototype.Eu=function(a,b){this.qh.N(a,2,b)};c.prototype.KC=function(a){return this.qh.P(a,3)};c.prototype.fS=function(a,b){this.qh.N(a,3,b)};c.prototype.Ts=function(a){return this.qh.P(a,4)};c.prototype.IR=function(a,b){this.qh.N(a,4,b)};c.prototype.jw=function(a){return this.Iq[a]};c.prototype.HR=function(a,b){this.Iq[a].L(b)};return c}();a.bo=c})(A||(A={}));(function(a){(function(a){a[a.Outside=0]="Outside";a[a.Inside=1]="Inside";a[a.Border=
2]="Border"})(a.wH||(a.wH={}));var b=function(){function a(b,c){this.Hg=null;this.RP=c;this.Hg=b}a.prototype.Au=function(a,b){this.PD!=b&&a.flush();this.PD=b};a.prototype.XB=function(a,b){for(var c=0;c<b;)for(var d=a[c++],f=a[c++],l=a[c++]*this.RP;d<f;d++)this.Hg[l+(d>>4)]|=this.PD<<2*(d&15)};return a}();a.UT=b;var c=function(){function c(a,b,d){this.Hg=null;this.Px=this.Rx=this.zE=this.xE=this.Pq=this.VD=this.tf=this.Pl=0;this.ii=this.Oj=this.sk=null;this.it(a,b,d)}c.create=function(b,d,f){if(!c.Dc(b))throw a.g.O();
return c.Jd(b,d,f)};c.ti=function(b,d,f){if(!c.Dc(b))throw a.g.O();return c.ye(b,d,f)};c.iR=function(b){var c=0;switch(b){case 0:c=1024;break;case 1:c=16384;break;case 2:c=262144;break;default:throw a.g.sa("Internal Error");}return c};c.Dc=function(b){return b.u()||b.F()!=a.j.Polyline&&b.F()!=a.j.Polygon?!1:!0};c.prototype.JM=function(b,c){for(var d=c.Da(),f=new a.b,l=new a.b;d.lb();)for(;d.Ma();){var g=d.ja();if(g.F()!=a.j.Line)throw a.g.sa("Internal Error");b.Zi(g.Nb(),f);b.Zi(g.pc(),l);this.ii.yv(f.x,
f.y,l.x,l.y)}this.ii.fF(a.dv.Zu)};c.prototype.KM=function(){throw a.g.sa("Internal Error");};c.prototype.bw=function(b,c){for(var d=1;4>d;d++)b.yv(c[d-1].x,c[d-1].y,c[d].x,c[d].y);b.yv(c[3].x,c[3].y,c[0].x,c[0].y);this.ii.fF(a.dv.Zu)};c.prototype.kG=function(b,c,d){for(var f=[null,null,null,null],l=0;l<f.length;l++)f[l]=new a.b;c=c.Da();d=this.Oj.SS(d)+1.5;for(var l=new a.b,g=new a.b,k=new a.b,m=new a.b,q=new a.b,r=new a.i,s=new a.b;c.lb();){var t=!1,u=!0;for(s.na(0,0);c.Ma();){var w=c.ja();m.x=w.oa;
m.y=w.ka;q.x=w.ma;q.y=w.ia;r.Ka();r.Eb(m.x,m.y);r.Pj(q.x,q.y);if(this.sk.rD(r)){this.Oj.Zi(q,q);u?(this.Oj.Zi(m,m),s.K(m),u=!1):m.K(s);l.qc(q,m);var w=l.length(),C=0.5>w;0==w?l.na(1,0):(C||s.K(q),l.scale(d/w),g.na(-l.y,l.x),k.na(l.y,-l.x),m.sub(l),q.add(l),f[0].add(m,g),f[1].add(m,k),f[2].add(q,k),f[3].add(q,g),C?t=!0:this.bw(b,f))}else t&&(this.bw(b,f),t=!1),u=!0}t&&this.bw(b,f)}};c.prototype.ez=function(b){return a.J.truncate(b*this.VD+this.xE)};c.prototype.fz=function(b){return a.J.truncate(b*
this.Pq+this.zE)};c.Jd=function(a,b,d){return new c(a,b,d)};c.ye=function(a,b,d){return new c(a,b,d)};c.prototype.it=function(c,d,f){this.tf=Math.max(a.J.truncate(2*Math.sqrt(f)+0.5),64);this.Pl=a.J.truncate((2*this.tf+31)/32);this.sk=new a.i;this.Rx=d;f=0;for(var l=this.tf,g=this.Pl;8<=l;)f+=l*g,l=a.J.truncate(l/2),g=a.J.truncate((2*l+31)/32);this.Hg=a.J.Lh(f,0);this.ii=new a.dv;f=new b(this.Hg,this.Pl,this);this.ii.uS(this.tf,this.tf,f);c.s(this.sk);this.sk.R(d,d);var l=new a.i,g=a.i.Pa(1,1,this.tf-
2,this.tf-2),k=d*g.ba();d*=g.ca();l.L(this.sk.Af(),Math.max(k,this.sk.ba()),Math.max(d,this.sk.ca()));this.Px=this.Rx;this.Oj=new a.Bg;this.Oj.vO(l,g);new a.Bg;switch(c.F()){case a.j.MultiPoint:f.Au(this.ii,2);this.KM();break;case a.j.Polyline:f.Au(this.ii,2);this.kG(this.ii,c,this.Px);break;case a.j.Polygon:f.Au(this.ii,1),this.JM(this.Oj,c),f.Au(this.ii,2),this.kG(this.ii,c,this.Px)}this.VD=this.Oj.nb;this.Pq=this.Oj.fb;this.xE=this.Oj.Ob;this.zE=this.Oj.Pb;this.AK()};c.prototype.AK=function(){this.ii.flush();
for(var b=0,c=this.tf*this.Pl,d=this.tf,f=a.J.truncate(this.tf/2),l=this.Pl,g=a.J.truncate((2*f+31)/32);8<d;){for(d=0;d<f;d++)for(var k=2*d,m=2*d+1,q=0;q<f;q++){var r=2*q,s=2*q+1,t=r>>4,r=2*(r&15),u=s>>4,s=2*(s&15),w=this.Hg[b+l*k+t]>>r&3,w=w|this.Hg[b+l*k+u]>>s&3,w=w|this.Hg[b+l*m+t]>>r&3,w=w|this.Hg[b+l*m+u]>>s&3;this.Hg[c+g*d+(q>>4)]|=w<<2*(q&15)}d=f;l=g;b=c;f=a.J.truncate(d/2);g=a.J.truncate((2*f+31)/32);c=b+l*d}};c.prototype.Kk=function(a,b){if(!this.sk.contains(a,b))return 0;var c=this.ez(a),
d=this.fz(b);if(0>c||c>=this.tf||0>d||d>=this.tf)return 0;c=this.Hg[this.Pl*d+(c>>4)]>>2*(c&15)&3;return 0==c?0:1==c?1:2};c.prototype.En=function(b){if(!b.Ha(this.sk))return 0;var c=this.ez(b.w),d=this.ez(b.C),f=this.fz(b.D);b=this.fz(b.H);0>c&&(c=0);0>f&&(f=0);d>=this.tf&&(d=this.tf-1);b>=this.tf&&(b=this.tf-1);if(c>d||f>b)return 0;for(var l=Math.max(d-c,1)*Math.max(b-f,1),g=0,k=this.Pl,m=this.tf,q=0;;){if(32>l||16>m){for(l=f;l<=b;l++)for(var r=c;r<=d;r++)if(q=this.Hg[g+k*l+(r>>4)]>>2*(r&15)&3,1<
q)return 2;if(0==q)return 0;if(1==q)return 1}g+=k*m;m=a.J.truncate(m/2);k=a.J.truncate((2*m+31)/32);c=a.J.truncate(c/2);f=a.J.truncate(f/2);d=a.J.truncate(d/2);b=a.J.truncate(b/2);l=Math.max(d-c,1)*Math.max(b-f,1)}};c.prototype.bO=function(){return this.tf*this.Pl};return c}();a.dA=c})(A||(A={}));(function(a){(function(a){a[a.contains=1]="contains";a[a.within=2]="within";a[a.equals=3]="equals";a[a.disjoint=4]="disjoint";a[a.touches=8]="touches";a[a.crosses=16]="crosses";a[a.overlaps=32]="overlaps";
a[a.unknown=0]="unknown";a[a.intersects=1073741824]="intersects"})(a.yI||(a.yI={}));var b=function(){function a(){}a.Pa=function(b,c,d,f,g,k,m,q){var r=new a;r.Vt=b;r.Jl=c;r.Oi=d;r.ji=f;r.dE=g;r.sU=k;r.tU=m;r.uU=q;return r};return a}(),c=function(){function b(){}b.uT=function(c,d,f){if(!b.oQ(c))return!1;var g=a.Ja.Cg(d,c,!1);d=!1;a.Xj.vB(c)&&(d=d||c.iv(g,f));g=c.F();g!=a.j.Polygon&&g!=a.j.Polyline||!a.Xj.tB(c)||0==f||(d=d||c.dj(f));g!=a.j.Polygon&&g!=a.j.Polyline||!a.Xj.uB(c)||0==f||(d=d||c.iJ());
return d};b.oQ=function(b){return a.Xj.vB(b)||a.Xj.tB(b)||a.Xj.uB(b)};return b}();a.qT=c;c=function(){function c(){this.Tg=[]}c.py=function(b,d,f,g,k){var m=b.F(),q=d.F();if(m==a.j.Envelope){if(q==a.j.Envelope)return c.zQ(b,d,f,g);if(q==a.j.Point)return 2==g?g=1:1==g&&(g=2),c.Iz(d,b,f,g)}else if(m==a.j.Point){if(q==a.j.Envelope)return c.Iz(b,d,f,g);if(q==a.j.Point)return c.dR(b,d,f,g)}if(b.u()||d.u())return 4==g?!0:!1;var r=new a.i;b.s(r);var s=new a.i;d.s(s);var t=new a.i;t.L(r);t.Eb(s);f=a.Ja.Ad(f,
t,!1);if(c.nj(r,s,f))return 4==g?!0:!1;r=!1;a.al.Mc(m)&&(m=new a.Ya(b.description),m.Cc(b,!0),b=m,m=a.j.Polyline);a.al.Mc(q)&&(q=new a.Ya(d.description),q.Cc(d,!0),d=q,q=a.j.Polyline);if(m!=a.j.Envelope&&q!=a.j.Envelope){if(b.gb()<d.gb()||m==a.j.Point&&q==a.j.MultiPoint)2==g?g=1:1==g&&(g=2)}else m!=a.j.Polygon&&q!=a.j.Envelope&&(2==g?g=1:1==g&&(g=2));switch(m){case a.j.Polygon:switch(q){case a.j.Polygon:r=c.ur(b,d,f,g,k);break;case a.j.Polyline:r=c.Vl(b,d,f,g,k);break;case a.j.Point:r=c.tr(b,d,f,
g,k);break;case a.j.MultiPoint:r=c.sr(b,d,f,g,k);break;case a.j.Envelope:r=c.xD(b,d,f,g,k)}break;case a.j.Polyline:switch(q){case a.j.Polygon:r=c.Vl(d,b,f,g,k);break;case a.j.Polyline:r=c.dy(b,d,f,g,k);break;case a.j.Point:r=c.wr(b,d,f,g,k);break;case a.j.MultiPoint:r=c.vr(b,d,f,g,k);break;case a.j.Envelope:r=c.WE(b,d,f,g)}break;case a.j.Point:switch(q){case a.j.Polygon:r=c.tr(d,b,f,g,k);break;case a.j.Polyline:r=c.wr(d,b,f,g,k);break;case a.j.MultiPoint:r=c.or(d,b,f,g,k)}break;case a.j.MultiPoint:switch(q){case a.j.Polygon:r=
c.sr(d,b,f,g,k);break;case a.j.Polyline:r=c.vr(d,b,f,g,k);break;case a.j.MultiPoint:r=c.Vx(b,d,f,g,k);break;case a.j.Point:r=c.or(b,d,f,g,k);break;case a.j.Envelope:r=c.oA(b,d,f,g)}break;case a.j.Envelope:switch(q){case a.j.Polygon:r=c.xD(d,b,f,g,k);break;case a.j.Polyline:r=c.WE(d,b,f,g);break;case a.j.MultiPoint:r=c.oA(d,b,f,g)}}return r};c.zQ=function(b,d,f,g){if(b.u()||d.u())return 4==g?!0:!1;var k=new a.i,m=new a.i,q=new a.i;b.s(k);d.s(m);q.L(k);q.Eb(m);b=a.Ja.Ad(f,q,!1);switch(g){case 4:return c.nj(k,
m,b);case 2:return c.Bz(m,k,b);case 1:return c.Bz(k,m,b);case 3:return c.ye(k,m,b);case 8:return c.jT(k,m,b);case 32:return c.eT(k,m,b);case 16:return c.bT(k,m,b)}return!1};c.Iz=function(b,d,f,g){if(b.u()||d.u())return 4==g?!0:!1;b=b.A();var k=new a.i,m=new a.i;d.s(k);m.L(b);m.Eb(k);d=a.Ja.Ad(f,m,!1);switch(g){case 4:return c.qu(b,k,d);case 2:return c.ax(b,k,d);case 1:return c.XL(b,k,d);case 3:return c.KA(b,k,d);case 8:return c.$w(b,k,d)}return!1};c.dR=function(b,d,f,g){if(b.u()||d.u())return 4==
g?!0:!1;b=b.A();d=d.A();var k=new a.i;k.L(b);k.Eb(d);f=a.Ja.Ad(f,k,!1);switch(g){case 4:return c.qM(b,d,f);case 2:return c.gz(d,b,f);case 1:return c.gz(b,d,f);case 3:return c.dB(b,d,f)}return!1};c.ur=function(a,b,d,f,g){switch(f){case 4:return c.cT(a,b,d);case 2:return c.ru(b,a,d,g);case 1:return c.ru(a,b,d,g);case 3:return c.TG(a,b,d);case 8:return c.vH(a,b,d);case 32:return c.bH(a,b,d,g)}return!1};c.Vl=function(a,b,d,f,g){switch(f){case 4:return c.fT(a,b,d);case 1:return c.cy(a,b,d,g);case 8:return c.yH(a,
b,d,g);case 16:return c.kR(a,b,d)}return!1};c.tr=function(a,b,d,f){switch(f){case 4:return c.XS(a,b,d);case 1:return c.pQ(a,b,d);case 8:return c.lH(a,b,d)}return!1};c.sr=function(a,b,d,f){switch(f){case 4:return c.NS(a,b,d);case 1:return c.gQ(a,b,d);case 8:return c.iH(a,b,d);case 16:return c.cR(a,b,d)}return!1};c.xD=function(a,b,d,f,g){if(c.DR(a,b,d))return 4==f?!0:!1;if(4==f)return!1;switch(f){case 2:return c.CH(a,b,d);case 1:return c.VP(a,b,d);case 3:return c.OG(a,b,d);case 8:return c.eH(a,b,d,
g);case 32:return c.WG(a,b,d,g);case 16:return c.yQ(a,b,d,g)}return!1};c.dy=function(a,b,d,f){switch(f){case 4:return c.DI(a,b,d);case 2:return c.JE(b,a,d);case 1:return c.JE(a,b,d);case 3:return c.OI(a,b,d);case 8:return c.cF(a,b,d);case 32:return c.ZI(a,b,d);case 16:return c.LE(a,b,d)}return!1};c.wr=function(a,b,d,f){switch(f){case 4:return c.xI(a,b,d);case 1:return c.JH(a,b,d);case 8:return c.MG(a,b,d)}return!1};c.vr=function(a,b,d,f){switch(f){case 4:return c.uI(a,b,d);case 1:return c.HH(a,b,
d);case 8:return c.eJ(a,b,d);case 16:return c.PH(a,b,d)}return!1};c.WE=function(a,b,d,f){if(c.mI(a,b,d))return 4==f?!0:!1;if(4==f)return!1;switch(f){case 2:return c.VJ(a,b,d);case 1:return c.FH(a,b,d);case 3:return c.LI(a,b,d);case 8:return c.bJ(a,b,d);case 32:return c.WI(a,b,d);case 16:return c.LH(a,b,d)}return!1};c.Vx=function(a,b,d,f){switch(f){case 4:return c.wI(a,b,d);case 2:return c.kA(b,a,d);case 1:return c.kA(a,b,d);case 3:return c.KI(a,b,d);case 32:return c.aJ(a,b,d)}return!1};c.or=function(a,
b,d,f){switch(f){case 4:return c.lA(a,b,d);case 2:return c.GJ(a,b,d);case 1:return c.OH(a,b,d);case 3:return c.lu(a,b,d)}return!1};c.oA=function(a,b,d,f){switch(f){case 4:return c.tI(a,b,d);case 2:return c.LG(a,b,d);case 1:return c.KH(a,b,d);case 3:return c.CI(a,b,d);case 8:return c.dJ(a,b,d);case 16:return c.lI(a,b,d)}return!1};c.TG=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(!c.ye(g,k,f))return!1;g=c.gc(b,d,!1);if(4==g||1==g||2==g)return!1;if(c.jA(b,d,f))return!0;var g=b.ac(),k=d.ac(),
m=Math.max(b.G(),d.G());return Math.abs(g-k)>4*m*f?!1:c.Uv(b,d,f,!0)};c.cT=function(a,b,d){var f=c.gc(a,b,!0);return 4==f?!0:1==f||2==f||1073741824==f?!1:c.ZC(a,b,d)};c.vH=function(a,b,d){var f=c.gc(a,b,!1);return 4==f||1==f||2==f?!1:c.AE(a,b,d,null)};c.bH=function(a,b,d,f){var g=c.gc(a,b,!1);return 4==g||1==g||2==g?!1:c.wD(a,b,d,f)};c.ru=function(b,d,f,g){var k=new a.i,m=new a.i;b.s(k);d.s(m);if(!c.sc(k,m,f))return!1;k=c.gc(b,d,!1);return 4==k||2==k?!1:1==k?!0:c.bC(b,d,f,g)};c.fT=function(a,b,d){var f=
c.gc(a,b,!0);return 4==f?!0:1==f||1073741824==f?!1:c.ZC(a,b,d)};c.yH=function(a,b,d,f){var g=c.gc(a,b,!1);return 4==g||1==g?!1:c.CE(a,b,d,f)};c.kR=function(a,b,d){var f=c.gc(a,b,!1);return 4==f||1==f?!1:c.YC(a,b,d,null)};c.cy=function(b,d,f,g){var k=new a.i,m=new a.i;b.s(k);d.s(m);if(!c.sc(k,m,f))return!1;k=c.gc(b,d,!1);return 4==k?!1:1==k?!0:c.jC(b,d,f,g)};c.XS=function(b,c,d){return 0==a.hd.uD(b,c,d)?!0:!1};c.lH=function(a,b,d){b=b.A();return c.yD(a,b,d)};c.pQ=function(a,b,d){b=b.A();return c.YB(a,
b,d)};c.NS=function(b,d,f){var g=c.gc(b,d,!1);if(4==g)return!0;if(1==g)return!1;g=new a.i;b.s(g);g.R(f,f);for(var k=new a.b,m=0;m<d.G();m++)if(d.A(m,k),g.contains(k)){var q=a.hd.ie(b,k,f);if(1==q||2==q)return!1}return!0};c.iH=function(b,c,d){var f=this.gc(b,c,!1);if(4==f||1==f)return!1;f=new a.i;b.s(f);f.R(d,d);for(var g,l=!1,k=null,k=b,m=!1,q=0;q<c.G();q++){g=c.Ga(q);if(f.contains(g))if(g=a.hd.ie(k,g,d),2==g)l=!0;else if(1==g)return!1;m||(!a.gf.Bn(b,c.G()-1)||null!=b.qb&&null!=b.qb.Bb?k=b:(k=new a.La,
b.copyTo(k),k.dj(1)),m=!0)}return l?!0:!1};c.cR=function(b,c,d){var f=this.gc(b,c,!1);if(4==f||1==f)return!1;var g=new a.i,f=new a.i,l=new a.i;b.s(g);c.s(l);f.L(g);f.R(d,d);for(var l=g=!1,k,m=null,m=b,q=!1,r=0;r<c.G();r++){k=c.Ga(r);f.contains(k)?(k=a.hd.ie(m,k,d),0==k?l=!0:1==k&&(g=!0)):l=!0;if(g&&l)return!0;q||(!a.gf.Bn(b,c.G()-1)||null!=b.qb&&null!=b.qb.Bb?m=b:(m=new a.La,b.copyTo(m),m.dj(1)),q=!0)}return!1};c.gQ=function(b,c,d){var f=new a.i,g=new a.i;b.s(f);c.s(g);if(!this.sc(f,g,d))return!1;
g=this.gc(b,c,!1);if(4==g)return!1;if(1==g)return!0;for(var g=!1,l,k=null,k=b,m=!1,q=0;q<c.G();q++){l=c.Ga(q);if(!f.contains(l))return!1;l=a.hd.ie(k,l,d);if(1==l)g=!0;else if(0==l)return!1;m||(!a.gf.Bn(b,c.G()-1)||null!=b.qb&&null!=b.qb.Bb?k=b:(k=new a.La,b.copyTo(k),k.dj(1)),m=!0)}return g};c.OG=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(!c.ye(g,k,f))return!1;g=new a.La;g.Xc(d,!1);return c.Uv(b,g,f,!0)};c.DR=function(b,d,f){var g=c.gc(b,d,!1);if(4==g)return!0;if(1==g||2==g)return!1;
var k=new a.i,g=new a.i;b.s(k);d.s(g);if(c.sc(g,k,f))return!1;k=new a.b;g.Yl(k);d=a.hd.ie(b,k,f);if(0!=d)return!1;g.YE(k);d=a.hd.ie(b,k,f);if(0!=d)return!1;g.Zl(k);d=a.hd.ie(b,k,f);if(0!=d)return!1;g.aF(k);d=a.hd.ie(b,k,f);if(0!=d)return!1;d=b.oc(0);k=new a.i;k.L(g);k.R(f,f);for(var m=0,q=b.G();m<q;m++){var r=d.read(2*m),s=d.read(2*m+1);if(k.contains(r,s))return!1}return!c.cA(b,g,f)};c.eH=function(b,d,f,g){var k=c.gc(b,d,!1);if(4==k||1==k||2==k)return!1;var k=new a.i,m=new a.i;b.s(k);d.s(m);if(c.sc(m,
k,f))return!1;if(m.ba()<=f&&m.ca()<=f)return d=d.oq(),c.yD(b,d,f);if(m.ba()<=f||m.ca()<=f)return k=new a.Ya,m=new a.Wa,d.uf(0,m),k.ef(m),d.uf(2,m),k.lineTo(m),c.CE(b,k,f,g);k=new a.La;k.Xc(d,!1);return c.AE(b,k,f,g)};c.WG=function(b,d,f,g){var k=c.gc(b,d,!1);if(4==k||1==k||2==k)return!1;var k=new a.i,m=new a.i;b.s(k);d.s(m);if(c.sc(m,k,f)||m.ba()<=f||m.ca()<=f)return!1;k=new a.La;k.Xc(d,!1);return c.wD(b,k,f,g)};c.CH=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return c.sc(k,g,f)};c.VP=function(b,
d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(!c.sc(g,k,f))return!1;g=c.gc(b,d,!1);if(4==g||2==g)return!1;if(1==g)return!0;if(k.ba()<=f&&k.ca()<=f)return d=d.oq(),c.YB(b,d,f);if(k.ba()<=f||k.ca()<=f)return k=new a.Ya,g=new a.Wa,d.uf(0,g),k.ef(g),d.uf(2,g),k.lineTo(g),c.jC(b,k,f,null);k=new a.La;k.Xc(d,!1);return c.bC(b,k,f,null)};c.yQ=function(b,d,f,g){var k=new a.i,m=new a.i;b.s(k);d.s(m);if(c.sc(m,k,f)||m.ca()>f&&m.ba()>f||m.ca()<=f&&m.ba()<=f)return!1;k=new a.Ya;m=new a.Wa;d.uf(0,m);k.ef(m);d.uf(2,
m);k.lineTo(m);return c.YC(b,k,f,g)};c.OI=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return c.ye(g,k,f)&&4!=c.gc(b,d,!1)?c.jA(b,d,f)?!0:c.Uv(b,d,f,!1):!1};c.DI=function(b,c,d){return 4==this.gc(b,c,!1)?!0:(new a.cl(b,c,d,!0)).next()?!this.ED(b,c,d):!1};c.cF=function(b,d,f){if(4==c.gc(b,d,!1))return!1;var g=new a.rd(0);if(0!=c.Yv(b,d,f,g))return!1;for(var k=new a.pe,m=0;m<g.size;m+=2){var q=g.read(m),r=g.read(m+1);k.ys(q,r)}b=b.Rf();d=d.Rf();b.Qd(d,0,d.G());return c.ku(b,k,f)};c.LE=function(b,
d,f){if(4==c.gc(b,d,!1))return!1;var g=new a.rd(0);if(0!=c.Yv(b,d,f,g))return!1;for(var k=new a.pe,m=0;m<g.size;m+=2){var q=g.read(m),r=g.read(m+1);k.ys(q,r)}b=b.Rf();d=d.Rf();b.Qd(d,0,d.G());return!c.ku(b,k,f)};c.ZI=function(a,b,d){return 4==c.gc(a,b,!1)?!1:c.iA(a,b,d)};c.JE=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return c.sc(g,k,f)&&4!=c.gc(b,d,!1)?c.Wf(d,b,f,!1):!1};c.xI=function(a,b,d){if(4==c.gc(a,b,!1))return!0;b=b.A();return!c.dx(a,b,d)};c.MG=function(a,b,d){if(4==c.gc(a,b,!1))return!1;
b=b.A();return c.aw(a,b,d)};c.JH=function(a,b,d){if(4==c.gc(a,b,!1))return!1;b=b.A();return c.bA(a,b,d)};c.uI=function(a,b,d){return 4==c.gc(a,b,!1)?!0:!c.eA(a,b,d,!1)};c.eJ=function(b,c,d){if(4==this.gc(b,c,!1))return!1;var f=b.Da(),g=new a.i,l=new a.i,k=new a.i;b.s(g);c.s(l);g.R(d,d);l.R(d,d);k.L(g);k.Ha(l);var m=null,q=null,g=null,m=b.qb;null!=m?(q=m.Bb,g=m.on,null==q&&(q=a.Ja.ij(b,k))):q=a.Ja.ij(b,k);var r=q.Se(),s=null;null!=g&&(s=g.Se());for(var t=new a.b,u=new a.b,w=!1,C=d*d,g=new a.Wk(c.G()),
m=0;m<c.G();m++)g.write(m,0);for(m=0;m<c.G();m++)if(c.A(m,t),k.contains(t))if(l.L(t.x,t.y,t.x,t.y),!(null!=s&&(s.Ch(l,d),-1==s.next()))){r.Ch(l,d);for(var x=r.next();-1!=x;x=r.next())if(f.Tb(q.ea(x)),x=f.ja(),x.Lb(x.Hd(t,!1),u),a.b.$b(t,u)<=C){g.write(m,1);w=!0;break}}if(!w)return!1;b=b.Rf();f=new a.pe;l=new a.b;for(m=0;m<c.G();m++)0!=g.read(m)&&(c.A(m,l),f.ys(l.x,l.y));return this.ku(b,f,d)};c.PH=function(b,c,d){if(4==this.gc(b,c,!1))return!1;var f=b.Da(),g=new a.i,l=new a.i,k=new a.i;b.s(g);c.s(l);
g.R(d,d);l.R(d,d);k.L(g);k.Ha(l);var m=null,q=null,g=null,m=b.qb;null!=m?(q=m.Bb,g=m.on,null==q&&(q=a.Ja.ij(b,k))):q=a.Ja.ij(b,k);var r=q.Se(),s=null;null!=g&&(s=g.Se());for(var t=new a.b,u=new a.b,w=!1,x=!1,C=d*d,g=new a.Wk(c.G()),m=0;m<c.G();m++)g.write(m,0);for(m=0;m<c.G();m++)if(c.A(m,t),k.contains(t))if(l.L(t.x,t.y,t.x,t.y),null!=s&&(s.Ch(l,d),-1==s.next()))x=!0;else{r.Ch(l,d);for(var y=!1,A=r.next();-1!=A;A=r.next())if(f.Tb(q.ea(A)),A=f.ja(),A.Lb(A.Hd(t,!1),u),a.b.$b(t,u)<=C){g.write(m,1);y=
w=!0;break}y||(x=!0)}else x=!0;if(!w||!x)return!1;b=b.Rf();f=new a.pe;l=new a.b;for(m=0;m<c.G();m++)0!=g.read(m)&&(c.A(m,l),f.ys(l.x,l.y));return!this.ku(b,f,d)};c.HH=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(!c.sc(g,k,f)||4==c.gc(b,d,!1)||!c.eA(b,d,f,!0))return!1;b=b.Rf();return!c.nA(b,d,f)};c.LI=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return k.ca()>f&&k.ba()>f?!1:c.ye(g,k,f)};c.mI=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return c.sc(k,g,f)?!1:!c.cA(b,k,
f)};c.bJ=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(k.ca()<=f&&k.ba()<=f)return k=d.oq(),c.aw(b,k,f);if(k.ca()<=f||k.ba()<=f)return k=new a.Ya,g=new a.Wa,d.uf(0,g),k.ef(g),d.uf(2,g),k.lineTo(g),c.cF(b,k,f);b=b.Da();d=new a.i;g=new a.i;d.L(k);g.L(k);d.R(-f,-f);g.R(f,f);for(var k=!1,m=new a.i,q=new a.i;b.lb();)for(;b.Ma();){b.ja().s(m);q.L(d);q.Ha(m);if(!q.u()&&(q.ca()>f||q.ba()>f))return!1;q.L(g);q.Ha(m);q.u()||(k=!0)}return k};c.WI=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);
if(c.sc(g,k,f)||c.sc(k,g,f)||c.sc(k,g,f)||k.ca()>f&&k.ba()>f||k.ca()<=f&&k.ba()<=f)return!1;g=new a.Ya;k=new a.Wa;d.uf(0,k);g.ef(k);d.uf(2,k);g.lineTo(k);return c.iA(b,g,f)};c.VJ=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(!c.sc(k,g,f)||k.ca()<=f&&k.ba()<=f)return!1;if(k.ca()<=f||k.ba()<=f)return c.sc(k,g,f);b=b.Da();d=new a.i;d.L(k);d.R(-f,-f);for(var k=!1,g=new a.i,m=new a.i;b.lb();)for(;b.Ma();)b.ja().s(g),d.jl(g)?k=!0:(m.L(d),m.Ha(g),!m.u()&&(m.ca()>f||m.ba()>f)&&(k=!0));return k};
c.FH=function(b,d,f){var g=new a.i,k=new a.i;d.s(k);b.s(g);if(!c.sc(g,k,f)||k.ca()>f&&k.ba()>f)return!1;if(k.ca()<=f&&k.ba()<=f)return d=d.oq(),c.bA(b,d,f);g=new a.Ya;k=new a.Wa;d.uf(0,k);g.ef(k);d.uf(2,k);g.lineTo(k);return c.Wf(g,b,f,!1)};c.LH=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(c.sc(k,g,f)||k.ca()<=f&&k.ba()<=f)return!1;if(k.ca()<=f||k.ba()<=f)return g=new a.Ya,k=new a.Wa,d.uf(0,k),g.ef(k),d.uf(2,k),g.lineTo(k),c.LE(b,g,f);b=b.Da();d=new a.i;g=new a.i;g.L(k);d.L(k);g.R(-f,
-f);d.R(f,f);for(var m=k=!1,q=new a.i,r=new a.i;b.lb();)for(;b.Ma();)if(b.ja().s(q),m||d.contains(q)||(m=!0),k||(r.L(g),r.Ha(q),!r.u()&&(r.ca()>f||r.ba()>f)&&(k=!0)),k&&m)return!0;return!1};c.KI=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return c.ye(g,k,f)?c.NI(b,d,f)?!0:c.Ow(b,d,f,!1,!0,!1):!1};c.wI=function(a,b,d){return!c.nA(a,b,d)};c.aJ=function(a,b,d){return c.Ow(a,b,d,!1,!1,!0)};c.kA=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return c.sc(g,k,f)?c.Ow(d,b,f,!0,!1,!1):!1};
c.ku=function(b,c,d){d*=d;for(var f=new a.b,g=new a.b,l=0;l<c.G();l++){c.A(l,g);for(var k=!1,m=0;m<b.G();m++)if(b.A(m,f),a.b.$b(f,g)<=d){k=!0;break}if(!k)return!1}return!0};c.lu=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return c.ye(g,k,f)};c.lA=function(a,b,d){b=b.A();return c.nr(a,b,d)};c.GJ=function(a,b,d){return c.lu(a,b,d)};c.OH=function(a,b,d){return!c.lA(a,b,d)};c.CI=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);return k.ca()>f||k.ba()>f?!1:c.ye(g,k,f)};c.tI=function(b,d,
f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(c.sc(k,g,f))return!1;d=new a.i;d.L(k);d.R(f,f);f=new a.b;for(k=0;k<b.G();k++)if(b.A(k,f),d.contains(f))return!1;return!0};c.dJ=function(b,c,d){var f=new a.i,g=new a.i,l=new a.i;c.s(f);if(f.ca()<=d&&f.ba()<=d)return!1;if(f.ca()<=d||f.ba()<=d){c=new a.b;var k=!1;g.L(f);l.L(f);g.R(d,d);f.ca()>d?l.R(0,-d):l.R(-d,0);for(var m=0;m<b.G();m++)if(b.A(m,c),g.contains(c)){if(f.ca()>d){if(c.y>l.D&&c.y<l.H)return!1}else if(c.x>l.w&&c.x<l.C)return!1;k=!0}return k}g.L(f);
l.L(f);g.R(d,d);l.R(-d,-d);c=new a.b;k=!1;for(m=0;m<b.G();m++)if(b.A(m,c),g.contains(c)){if(l.jl(c))return!1;k=!0}return k};c.LG=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(!c.sc(k,g,f))return!1;if(k.ca()<=f&&k.ba()<=f)return c.ye(g,k,f);if(k.ca()<=f||k.ba()<=f){d=!1;var g=new a.i,m=new a.i;g.L(k);m.L(k);k.ca()>f?g.R(0,-f):g.R(-f,0);m.R(f,f);for(var q=new a.b,r=0;r<b.G();r++){b.A(r,q);if(!m.contains(q))return!1;k.ca()>f?q.y>g.D&&q.y<g.H&&(d=!0):q.x>g.w&&q.x<g.C&&(d=!0)}return d}d=!1;
g=new a.i;m=new a.i;g.L(k);m.L(k);g.R(-f,-f);m.R(f,f);q=new a.b;for(r=0;r<b.G();r++){b.A(r,q);if(!m.contains(q))return!1;g.jl(q)&&(d=!0)}return d};c.KH=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(!c.sc(g,k,f)||k.ca()>f||k.ba()>f)return!1;d=d.oq();return!c.nr(b,d,f)};c.lI=function(b,d,f){var g=new a.i,k=new a.i;b.s(g);d.s(k);if(c.sc(k,g,f)||k.ca()<=f&&k.ba()<=f)return!1;if(k.ca()<=f||k.ba()<=f){d=new a.i;g=new a.i;d.L(k);k.ca()>f?d.R(0,-f):d.R(-f,0);g.L(k);g.R(f,f);for(var m=new a.b,q=
!1,r=!1,s=0;s<b.G();s++)if(b.A(s,m),q||(k.ca()>f?m.y>d.D&&m.y<d.H&&(q=!0):m.x>d.w&&m.x<d.C&&(q=!0)),r||g.contains(m)||(r=!0),q&&r)return!0;return!1}d=new a.i;g=new a.i;d.L(k);d.R(-f,-f);g.L(k);g.R(f,f);m=new a.b;r=q=!1;for(s=0;s<b.G();s++)if(b.A(s,m),!q&&d.jl(m)&&(q=!0),r||g.contains(m)||(r=!0),q&&r)return!0;return!1};c.dB=function(b,c,d){return a.b.$b(b,c)<=d*d?!0:!1};c.qM=function(b,c,d){return a.b.$b(b,c)>d*d?!0:!1};c.gz=function(a,b,d){return c.dB(a,b,d)};c.KA=function(b,d,f){var g=new a.i;g.L(b);
return c.ye(g,d,f)};c.qu=function(b,c,d){var f=new a.i;f.L(c);f.R(d,d);return!f.contains(b)};c.$w=function(b,c,d){if(c.ca()<=d&&c.ba()<=d)return!1;var f=new a.i,g=new a.i;f.L(c);f.R(d,d);if(!f.contains(b))return!1;if(c.ca()<=d||c.ba()<=d){g.L(c);c.ca()>d?g.R(0,-d):g.R(-d,0);if(c.ca()>d){if(b.y>g.D&&b.y<g.H)return!1}else if(b.x>g.w&&b.x<g.C)return!1;return!0}g.L(c);g.R(-d,-d);return g.jl(b)?!1:!0};c.ax=function(b,c,d){if(c.ca()<=d&&c.ba()<=d)return!0;if(c.ca()<=d||c.ba()<=d){var f=new a.i;f.L(c);c.ca()>
d?f.R(0,-d):f.R(-d,0);var g=!1;c.ca()>d?b.y>f.D&&b.y<f.H&&(g=!0):b.x>f.w&&b.x<f.C&&(g=!0);return g}f=new a.i;f.L(c);f.R(-d,-d);return f.jl(b)};c.XL=function(a,b,d){return c.KA(a,b,d)};c.ye=function(a,b,d){return c.sc(a,b,d)&&c.sc(b,a,d)};c.nj=function(b,c,d){var f=new a.i;f.L(c);f.R(d,d);return!b.kc(f)};c.jT=function(b,d,f){if(b.ca()<=f&&b.ba()<=f){var g=b.Af();return c.$w(g,d,f)}if(d.ca()<=f&&d.ba()<=f)return g=d.Af(),c.$w(g,b,f);b.ca()>f&&b.ba()>f&&(d.ca()<=f||d.ba()<=f)?g=d:(g=b,b=d);if(g.ca()<=
f||g.ba()<=f){if(b.ca()<=f||b.ba()<=f){d=new a.zb;var k=new a.zb,m=[0,0],q=[0,0],r=new a.b;g.Yl(r);d.fd(r);g.Zl(r);d.wd(r);b.Yl(r);k.fd(r);b.Zl(r);k.wd(r);d.Ha(k,null,m,q,f);return 1!=d.Ha(k,null,null,null,f)?!1:0==m[0]||1==m[1]||0==q[0]||1==q[1]}d=new a.i;k=new a.i;d.L(b);d.R(-f,-f);k.L(d);k.Ha(g);return!k.u()&&(k.ca()>f||k.ba()>f)?!1:!0}b.R(f,f);k=new a.i;k.L(g);k.Ha(b);return k.u()||!k.u()&&k.ca()>f&&k.ba()>f?!1:!0};c.eT=function(b,d,f){if(c.sc(b,d,f)||c.sc(d,b,f)||b.ca()<=f&&b.ba()<=f||d.ca()<=
f&&d.ba()<=f)return!1;if(b.ca()<=f||b.ba()<=f){if(d.ca()>f&&d.ba()>f)return!1;var g=new a.zb,k=new a.zb,m=[0,0],q=[0,0],r=new a.b;b.Yl(r);g.fd(r);b.Zl(r);g.wd(r);d.Yl(r);k.fd(r);d.Zl(r);k.wd(r);g.Ha(k,null,m,q,f);return 2!=g.Ha(k,null,null,null,f)?!1:(0<m[0]||1>m[1])&&(0<q[0]||1>q[1])}if(d.ca()<=f||d.ba()<=f)return!1;g=new a.i;g.L(b);g.Ha(d);return g.u()||g.ca()<=f||g.ba()<=f?!1:!0};c.Bz=function(b,d,f){if(!c.sc(b,d,f))return!1;if(b.ca()<=f&&b.ba()<=f)return b=b.Af(),c.ax(b,d,f);if(d.ca()<=f&&d.ba()<=
f)return d=d.Af(),c.ax(d,b,f);if(b.ca()<=f||b.ba()<=f)return c.sc(b,d,f);if(d.ca()<=f||d.ba()<=f){var g=new a.i;g.L(b);g.R(-f,-f);if(g.jl(d))return!0;b=new a.i;b.L(g);b.Ha(d);return b.u()||b.ca()<=f&&b.ba()<=f?!1:!0}return c.sc(b,d,f)};c.bT=function(b,d,f){if(c.sc(b,d,f)||c.sc(d,b,f)||b.ca()<=f&&b.ba()<=f||d.ca()<=f&&d.ba()<=f||d.ca()>f&&d.ba()>f&&b.ca()>f&&b.ba()>f)return!1;var g;b.ca()>f&&b.ba()>f?g=d:(g=b,b=d);if(b.ca()>f&&b.ba()>f){d=new a.i;var k=new a.i;k.L(b);k.R(-f,-f);d.L(k);d.Ha(g);return d.u()||
d.ca()<=f&&d.ba()<=f?!1:!0}d=new a.zb;var k=new a.zb,m=[0,0],q=[0,0],r=new a.b;g.Yl(r);d.fd(r);g.Zl(r);d.wd(r);b.Yl(r);k.fd(r);b.Zl(r);k.wd(r);d.Ha(k,null,m,q,f);return 1!=d.Ha(k,null,null,null,f)?!1:0<m[0]&&1>m[1]&&0<q[0]&&1>q[1]};c.ZC=function(b,c,d){var f,g,l=new a.i,k=new a.i,m=new a.cl(b,c,d,!0);if(!m.next())return!0;if(this.ED(b,c,d))return!1;var q=null,q=b,r=null,r=null;c.F()==a.j.Polygon&&(r=c);var s=!1,t=!1;do{f=m.jk();g=m.fk();g=c.Ga(c.Fa(g));l.L(m.Ew());l.R(d,d);if(l.contains(g)&&(g=a.hd.ie(q,
g,0),0!=g)||c.F()==a.j.Polygon&&(f=b.Ga(b.Fa(f)),k.L(m.iw()),k.R(d,d),k.contains(f)&&(g=a.hd.ie(r,f,0),0!=g)))return!1;s||(!a.gf.Bn(b,c.fa()-1)||null!=b.qb&&null!=b.qb.Bb?q=b:(q=new a.La,b.copyTo(q),q.dj(1)),s=!0);c.F()!=a.j.Polygon||t||(t=c,!a.gf.Bn(t,b.fa()-1)||null!=c.qb&&null!=c.qb.Bb?r=c:(r=new a.La,t.copyTo(r),r.dj(1)),t=!0)}while(m.next());return!0};c.sc=function(b,c,d){var f=new a.i;f.L(b);f.R(d,d);return f.contains(c)};c.mm=function(b,c,d){var f=new a.i;f.L(c);f.R(d,d);c=new a.b;b.Yl(c);
if(!f.contains(c))return!0;b.YE(c);if(!f.contains(c))return!0;b.aF(c);if(!f.contains(c))return!0;b.Zl(c);return f.contains(c)?!1:!0};c.jA=function(b,c,d){if(b.fa()!=c.fa()||b.G()!=c.G())return!1;var f=new a.b,g=new a.b,l=!0;d*=d;for(var k=0;k<b.fa();k++){if(b.Ec(k)!=c.Ec(k)){l=!1;break}for(var m=b.Fa(k);m<c.Ec(k);m++)if(b.A(m,f),c.A(m,g),a.b.$b(f,g)>d){l=!1;break}if(!l)break}return l?!0:!1};c.NI=function(b,c,d){if(b.G()!=c.G())return!1;var f=new a.b,g=new a.b,l=!0;d*=d;for(var k=0;k<b.G();k++)if(b.A(k,
f),c.A(k,g),a.b.$b(f,g)>d){l=!1;break}return l?!0:!1};c.Ow=function(b,c,d,f,g,l){var k=!1,m;b.G()>c.G()?(f&&(f=!1,k=!0),m=c):(m=b,b=c);c=null;if(g||l||k){c=new a.Wk(b.G());for(var q=0;q<b.G();q++)c.write(q,0)}var q=new a.i,r=new a.i,s=new a.i;m.s(q);b.s(r);q.R(d,d);r.R(d,d);s.L(q);s.Ha(r);for(var r=new a.b,t=new a.b,u=!0,w=a.Ja.oB(b,s),x=w.Se(),C=d*d,y=0;y<m.G();y++)if(m.A(y,r),s.contains(r)){var A=!1;q.L(r.x,r.y,r.x,r.y);x.Ch(q,d);for(var B=x.next();-1!=B&&!(B=w.ea(B),b.A(B,t),a.b.$b(r,t)<=C&&((g||
l||k)&&c.write(B,1),A=!0,f));B=x.next());if(!A&&(u=!1,g||f))return!1}else{if(g||f)return!1;u=!1}if(l&&u)return!1;if(f)return!0;for(q=0;q<b.G();q++)if(1==c.read(q)){if(l)return!0}else if(g||k)return!1;return l?!1:!0};c.nA=function(b,c,d){var f;b.G()>c.G()?f=c:(f=b,b=c);c=new a.i;var g=new a.i,l=new a.i;f.s(c);b.s(g);c.R(d,d);g.R(d,d);l.L(c);l.Ha(g);for(var g=new a.b,k=new a.b,m=d*d,q=a.Ja.oB(b,l),r=q.Se(),s=0;s<f.G();s++)if(f.A(s,g),l.contains(g)){c.L(g.x,g.y,g.x,g.y);r.Ch(c,d);for(var t=r.next();-1!=
t;t=r.next())if(b.A(q.ea(t),k),a.b.$b(g,k)<=m)return!0}return!1};c.Uv=function(a,b,d,f){return c.Wf(a,b,d,f)&&c.Wf(b,a,d,f)};c.Wf=function(e,d,f,g){function k(a,b){return u.IB(a,b)}var m=!0,q=[0,0],r=[0,0],s=0,t=new a.ha(0),u=new c,w,x=new a.i,C=new a.i,y=new a.i;e.s(x);d.s(C);x.R(f,f);C.R(f,f);y.L(x);y.Ha(C);e=e.Da();var C=d.Da(),A=null,B=A=null,D=d.qb;null!=D?(A=D.Bb,B=D.on,null==A&&(A=a.Ja.ij(d,y))):A=a.Ja.ij(d,y);d=A.Se();D=null;for(null!=B&&(D=B.Se());e.lb();)for(;e.Ma();){var E=!1,G=e.ja();
G.s(x);if(!x.kc(y))return!1;if(null!=D&&(D.Ch(x,f),-1==D.next()))return m=!1;B=G.ac();d.Gn(G,f);for(w=d.next();-1!=w;w=d.next()){C.Tb(A.ea(w));w=C.ja();var H=G.Ha(w,null,q,r,f);if(2==H&&(!g||r[0]<=r[1])){var H=q[0],I=q[1],J=r[0],M=r[1];if(H*B<=f&&(1-I)*B<=f){E=!0;s=0;t.resize(0);u.Tg.length=0;for(var L=e.Kb(),J=!0;J;){if(e.Ma()){G=e.ja();B=G.ac();H=G.Ha(w,null,q,r,f);if(2==H&&(!g||r[0]<=r[1])&&(H=q[0],I=q[1],H*B<=f&&(1-I)*B<=f)){L=e.Kb();continue}if(C.Ma()&&(w=C.ja(),H=G.Ha(w,null,q,r,f),2==H&&(!g||
r[0]<=r[1])&&(H=q[0],I=q[1],H*B<=f&&(1-I)*B<=f))){L=e.Kb();continue}}J=!1}L!=e.Kb()&&(e.Tb(L),e.ja());break}else L=e.Kb(),w=b.Pa(L,e.Ra,H,I,C.Kb(),C.Ra,J,M),u.Tg.push(w),t.add(t.size)}}if(!E){if(s==u.Tg.length)return!1;1<t.size-s&&t.yd(s,t.size,k);for(E=0;s<u.Tg.length;s++)if(w=u.Tg[t.get(s)],!(w.Oi<E&&w.ji<E)){if(B*(w.Oi-E)>f)return!1;E=w.ji;if(B*(1-E)<=f||1==E)break}if(B*(1-E)>f)return!1;s=0;t.resize(0);u.Tg.length=0}}return m};c.iA=function(b,d,f){if(1>c.Yv(b,d,f,null))return!1;var g=new a.i,k=
new a.i;b.s(g);d.s(k);var m=c.mm(g,k,f),g=c.mm(k,g,f);return m&&g?!0:m&&!g?!c.Wf(d,b,f,!1):g&&!m?!c.Wf(b,d,f,!1):!c.Wf(b,d,f,!1)&&!c.Wf(d,b,f,!1)};c.Yv=function(e,d,f,g){function k(a,b){return C.IB(a,b)}var m,q;e.Hw()>d.Hw()?(m=d,q=e):(m=e,q=d);e=m.Da();d=q.Da();var r=[0,0],s=[0,0],t=-1,u=0,w,x=new a.ha(0),C=new c,y,A=new a.i,B=new a.i,D=new a.i;m.s(A);q.s(B);A.R(f,f);B.R(f,f);D.L(A);D.Ha(B);m=null;null!=g&&(m=new a.b);w=B=B=null;var E=q.qb;null!=E?(B=E.Bb,w=E.on,null==B&&(B=a.Ja.ij(q,D))):B=a.Ja.ij(q,
D);q=B.Se();E=null;for(null!=w&&(E=w.Se());e.lb();)for(w=0;e.Ma();){var G=e.ja();G.s(A);if(A.kc(D)&&!(null!=E&&(E.Ch(A,f),-1==E.next()))){var H=G.ac();q.Gn(G,f);for(var I=q.next();-1!=I;I=q.next()){var J=B.ea(I);d.Tb(J);y=d.ja();var M=y.ac(),L=G.Ha(y,null,r,s,f);if(0<L){var I=r[0],t=s[0],O=2==L?r[1]:NaN,Q=2==L?s[1]:NaN;if(2==L){if(H*(O-I)>f)return t=1;var S=H*(O-I);if(d.Ma()){y=d.ja();L=G.Ha(y,null,r,null,f);if(2==L){var L=r[0],R=r[1],L=H*(R-L);if(S+L>f)return t=1}d.Tb(J);d.ja()}if(!d.wl()){d.oi();
y=d.oi();L=G.Ha(y,null,r,null,f);if(2==L&&(L=r[0],R=r[1],L=H*(R-L),S+L>f))return t=1;d.Tb(J);d.ja()}if(e.Ma()){J=e.Kb();G=e.ja();L=G.Ha(y,null,r,null,f);if(2==L&&(L=r[0],R=r[1],L=H*(R-L),S+L>f))return t=1;e.Tb(J);e.ja()}if(!e.wl()){J=e.Kb();e.oi();G=e.oi();L=G.Ha(y,null,r,null,f);if(2==L&&(L=r[0],R=r[1],L=M*(R-L),S+L>f))return t=1;e.Tb(J);e.ja()}y=b.Pa(e.Kb(),e.Ra,I,O,d.Kb(),d.Ra,t,Q);C.Tg.push(y);x.add(x.size)}t=0;null!=g&&(G.Lb(I,m),g.add(m.x),g.add(m.y))}}if(u<C.Tg.length){x.yd(u,x.size,k);G=0;
for(I=C.Tg[x.get(u)].Jl;u<C.Tg.length;u++)if(y=C.Tg[x.get(u)],!(y.Oi<G&&y.ji<G))if(H*(y.Oi-G)>f)w=H*(y.ji-y.Oi),G=y.ji,I=y.Jl;else{y.Jl!=I?(w=H*(y.ji-y.Oi),I=y.Jl):w+=H*(y.ji-y.Oi);if(w>f)return t=1;G=y.ji;if(1==G)break}H*(1-G)>f&&(w=0);u=0;x.resize(0);C.Tg.length=0}}}return t};c.ED=function(b,c,d){var f=b.Da(),g=c.Da();for(b=new a.cl(b,c,d,!1);b.next();){c=b.jk();var l=b.fk();f.Tb(c);g.Tb(l);c=f.ja();if(0<g.ja().Ha(c,null,null,null,d))return!0}return!1};c.eA=function(b,c,d,f){var g=b.Da(),l=new a.i,
k=new a.i,m=new a.i;b.s(l);c.s(k);l.R(d,d);l.contains(k);k.R(d,d);m.L(l);m.Ha(k);l=b.qb;null!=l?(l=l.Bb,null==l&&(l=a.Ja.ij(b,m))):l=a.Ja.ij(b,m);b=l.Se();for(var q=new a.b,r=new a.b,s=d*d,t=0;t<c.G();t++)if(c.A(t,q),m.contains(q)){k.L(q.x,q.y,q.x,q.y);b.Ch(k,d);for(var u=!1,w=b.next();-1!=w;w=b.next())if(g.Tb(l.ea(w)),w=g.ja(),w.Lb(w.Hd(q,!1),r),a.b.$b(r,q)<=s){u=!0;break}if(f){if(!u)return!1}else if(u)return!0}return f?!0:!1};c.dx=function(b,c,d){var f=new a.b,g=d*d,l=b.Da();b=b.qb;if(null!=b&&
(b=b.Bb,null!=b)){var k=new a.i;k.L(c);d=b.ww(k,d);for(k=d.next();-1!=k;k=d.next())if(l.Tb(b.ea(k)),l.Ma()){var k=l.ja(),m=k.Hd(c,!1);k.Lb(m,f);if(a.b.$b(c,f)<=g)return!0}return!1}for(b=new a.i;l.lb();)for(;l.Ma();)if(k=l.ja(),k.s(b),b.R(d,d),b.contains(c)&&(m=k.Hd(c,!1),k.Lb(m,f),a.b.$b(c,f)<=g))return!0;return!1};c.bA=function(a,b,d){return c.dx(a,b,d)&&!c.aw(a,b,d)};c.aw=function(a,b,d){a=a.Rf();return!c.nr(a,b,d)};c.cA=function(b,c,d){if(b.Im()){var f=new a.zb(c.w,c.D,c.w,c.H),g=new a.zb(c.w,
c.H,c.C,c.H),l=new a.zb(c.C,c.H,c.C,c.D);c=new a.zb(c.C,c.D,c.w,c.D);for(b=b.Da();b.lb();)for(;b.Ma();){var k=b.ja();if(k.kc(f,d)||k.kc(g,d)||k.kc(l,d)||k.kc(c,d))return!0}}else{f=new a.i;f.L(c);f.R(d,d);d=b.oc(0);g=new a.b;l=new a.b;c=new a.b;for(var k=new a.b,m=0,q=b.fa();m<q;m++)for(var r=!0,s=b.Fa(m),t=b.Ec(m);s<t;s++)if(r)d.fc(2*s,l),r=!1;else{d.fc(2*s,g);c.K(l);k.K(g);if(0!=f.Mv(c,k))return!0;l.K(g)}}return!1};c.gc=function(b,d,f){var g=b.F(),k=d.F();if(a.U.Th(g)){var m=b.qb;if(null!=m&&(m=
m.hi,null!=m))if(k==a.j.Point){var q=d.A(),q=m.Kk(q.x,q.y);if(1==q)return 1;if(0==q)return 4}else{q=new a.i;d.s(q);q=m.En(q);if(1==q)return 1;if(0==q)return 4;if(f&&a.U.Th(k)&&c.yz(d,m))return 1073741824}}if(a.U.Th(k)&&(m=d.qb,null!=m&&(m=m.hi,null!=m)))if(g==a.j.Point){b=b.A();q=m.Kk(b.x,b.y);if(1==q)return 2;if(0==q)return 4}else{d=new a.i;b.s(d);q=m.En(d);if(1==q)return 2;if(0==q)return 4;if(f&&a.U.Th(g)&&c.yz(b,m))return 1073741824}return 0};c.yz=function(b,c){for(var d=b.G(),f=new a.b,g=0;g<
d;g++)if(b.A(g,f),1==c.Kk(f.x,f.y))return!0;return!1};c.AE=function(b,c,d,f){for(var g=1<=b.sj(0)&&1<=c.sj(0),l=b.Da(),k=c.Da(),m=[0,0],q=[0,0],r=new a.cl(b,c,d,!1),s=!1;r.next();){var t=r.jk(),u=r.fk();l.Tb(t);k.Tb(u);t=l.ja();u=k.ja().Ha(t,null,q,m,d);if(2==u){s=m[0];u=m[1];t=t.ac();if(g&&(u-s)*t>d)return!1;s=!0}else if(0!=u){s=m[0];t=q[0];if(0<s&&1>s&&0<t&&1>t)return!1;s=!0}}if(!s)return!1;l=new a.i;k=new a.i;g=new a.i;b.s(l);c.s(k);l.R(1E3*d,1E3*d);k.R(1E3*d,1E3*d);g.L(l);g.Ha(k);return 10<b.G()&&
(b=a.Fd.clip(b,g,d,0),b.u())||10<c.G()&&(c=a.Fd.clip(c,g,d,0),c.u())?!1:a.el.ur(b,c,d,"F********",f)};c.wD=function(b,d,f,g){var k=1<=b.sj(0)&&1<=d.sj(0),m=new a.i,q=new a.i,r=new a.i;b.s(m);d.s(q);for(var s=!1,t=c.mm(m,q,f),u=c.mm(q,m,f),w=b.Da(),x=d.Da(),C=[0,0],y=[0,0],A=new a.cl(b,d,f,!1);A.next();){var B=A.jk(),D=A.fk();w.Tb(B);x.Tb(D);D=w.ja();B=x.ja().Ha(D,null,y,C,f);if(2==B){var B=C[0],K=C[1],D=D.ac();if(k&&(K-B)*D>f&&(s=!0,t&&u))return!0}else if(0!=B&&(B=C[0],D=y[0],0<B&&1>B&&0<D&&1>D))return!0}k=
new a.i;w=new a.i;k.L(m);k.R(1E3*f,1E3*f);w.L(q);w.R(1E3*f,1E3*f);r.L(k);r.Ha(w);m="";m=s?m+"**":m+"T*";if(t){if(10<d.G()&&(d=a.Fd.clip(d,r,f,0),d.u()))return!1;m+="****"}else m+="T***";if(u){if(10<b.G()&&(b=a.Fd.clip(b,r,f,0),b.u()))return!1;m+="***"}else m+="T**";return a.el.ur(b,d,f,m.toString(),g)};c.bC=function(b,d,f,g){var k=[!1],m=c.wB(b,d,f,k);if(k[0])return m;k=new a.i;d.s(k);k.R(1E3*f,1E3*f);m=null;if(10<b.G()){if(m=a.Fd.clip(b,k,f,0),m.u())return!1}else m=b;return a.el.ru(m,d,f,g)};c.wB=
function(b,c,d,f){f[0]=!1;for(var g=b.Da(),l=c.Da(),k=[0,0],m=[0,0],q=new a.cl(b,c,d,!1),r=!1;q.next();){var s=q.jk(),t=q.fk();g.Tb(s,-1);l.Tb(t,-1);s=g.ja();s=l.ja().Ha(s,null,m,k,d);if(0!=s&&(r=!0,1==s&&(s=k[0],t=m[0],0<s&&1>s&&0<t&&1>t)))return f[0]=!0,!1}if(!r){f[0]=!0;k=new a.i;b.s(k);k.R(d,d);l=null;q=b;r=!1;m=new a.i;f=0;for(g=c.fa();f<g;f++)if(0<c.Ia(f)){c.Ti(f,m);if(k.kc(m)){if(l=c.Ga(c.Fa(f)),l=a.gf.xl(q,l,0),0==l)return!1}else return!1;r||(!a.gf.Bn(b,c.fa()-1)||null!=b.qb&&null!=b.qb.Bb?
q=b:(l=new a.La,b.copyTo(l),l.dj(1),q=l),r=!0)}if(1==b.fa()||c.F()==a.j.Polyline)return!0;k=new a.i;c.s(k);k.R(d,d);l=null;m=c;q=!1;d=new a.i;f=0;for(g=b.fa();f<g;f++)if(0<b.Ia(f)){b.Ti(f,d);if(k.kc(d)&&(l=b.Ga(b.Fa(f)),l=a.gf.xl(m,l,0),1==l))return!1;q||(!a.gf.Bn(c,b.fa()-1)||null!=c.qb&&null!=c.qb.Bb?m=c:(l=new a.La,c.copyTo(l),l.dj(1),m=l),q=!0)}return!0}return!1};c.CE=function(b,c,d,f){for(var g=b.Da(),l=c.Da(),k=[0,0],m=[0,0],q=new a.cl(b,c,d,!1),r=!1;q.next();){var s=q.jk(),t=q.fk();g.Tb(s);
l.Tb(t);s=g.ja();s=l.ja().Ha(s,null,m,k,d);if(2==s)r=!0;else if(0!=s){r=k[0];s=m[0];if(0<r&&1>r&&0<s&&1>s)return!1;r=!0}}if(!r)return!1;l=new a.i;k=new a.i;g=new a.i;b.s(l);c.s(k);l.R(1E3*d,1E3*d);k.R(1E3*d,1E3*d);g.L(l);g.Ha(k);return 10<b.G()&&(b=a.Fd.clip(b,g,d,0),b.u())||10<c.G()&&(c=a.Fd.clip(c,g,d,0),c.u())?!1:a.el.Vl(b,c,d,"F********",f)};c.YC=function(b,d,f,g){for(var k=b.Da(),m=d.Da(),q=[0,0],r=[0,0],s=new a.cl(b,d,f,!1),t=!1;s.next();){var u=s.jk(),w=s.fk();k.Tb(u);m.Tb(w);u=k.ja();u=m.ja().Ha(u,
null,r,q,f);if(2==u)t=!0;else if(0!=u){t=q[0];u=r[0];if(0<t&&1>t&&0<u&&1>u)return!0;t=!0}}if(!t)return!1;m=new a.i;q=new a.i;r=new a.i;s=new a.i;k=new a.i;b.s(m);d.s(q);return c.mm(q,m,f)?(r.L(m),r.R(1E3*f,1E3*f),s.L(q),s.R(1E3*f,1E3*f),k.L(r),k.Ha(s),10<b.G()&&(b=a.Fd.clip(b,k,f,0),b.u())||10<d.G()&&(d=a.Fd.clip(d,k,f,0),d.u())?!1:a.el.Vl(b,d,f,"T********",g)):a.el.Vl(b,d,f,"T*****T**",g)};c.jC=function(b,d,f,g){var k=[!1],m=c.wB(b,d,f,k);if(k[0])return m;k=new a.i;d.s(k);k.R(1E3*f,1E3*f);m=null;
if(10<b.G()){if(m=a.Fd.clip(b,k,f,0),m.u())return!1}else m=b;return a.el.cy(m,d,f,g)};c.YB=function(b,c,d){return 1==a.hd.ie(b,c,d)?!0:!1};c.yD=function(b,c,d){return 2==a.hd.ie(b,c,d)?!0:!1};c.nr=function(b,c,d){var f=new a.b;d*=d;for(var g=0;g<b.G();g++)if(b.A(g,f),a.b.$b(f,c)<=d)return!1;return!0};c.prototype.IB=function(a,b){var c=this.Tg[a],d=this.Tg[b];return c.Jl<d.Jl||c.Jl==d.Jl&&(c.Vt<d.Vt||c.Vt==d.Vt&&(c.Oi<d.Oi||c.Oi==d.Oi&&(c.ji<d.ji||c.ji==d.ji&&c.dE<d.dE)))?-1:1};return c}();a.jd=c})(A||
(A={}));(function(a){var b;(function(a){a[a.InteriorInterior=0]="InteriorInterior";a[a.InteriorBoundary=1]="InteriorBoundary";a[a.InteriorExterior=2]="InteriorExterior";a[a.BoundaryInterior=3]="BoundaryInterior";a[a.BoundaryBoundary=4]="BoundaryBoundary";a[a.BoundaryExterior=5]="BoundaryExterior";a[a.ExteriorInterior=6]="ExteriorInterior";a[a.ExteriorBoundary=7]="ExteriorBoundary";a[a.ExteriorExterior=8]="ExteriorExterior"})(b||(b={}));var c;(function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates";
a[a.AreaLinePredicates=1]="AreaLinePredicates";a[a.LineLinePredicates=2]="LineLinePredicates";a[a.AreaPointPredicates=3]="AreaPointPredicates";a[a.LinePointPredicates=4]="LinePointPredicates";a[a.PointPointPredicates=5]="PointPointPredicates"})(c||(c={}));b=function(){function b(){this.Yd=0;this.h=new a.fs;this.B=[0,0,0,0,0,0,0,0,0];this.Ua=[0,0,0,0,0,0,0,0,0];this.$=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Nl=this.Zt=-1}b.oy=function(b,c,d,f,g){if(9!=f.length)throw a.g.sa("relation string length has to be 9 characters");
for(var l=0;9>l;l++){var k=f.charAt(l);if("*"!=k&&"T"!=k&&"F"!=k&&"0"!=k&&"1"!=k&&"2"!=k)throw a.g.sa("relation string");}l=this.XN(f,b.gb(),c.gb());if(0!=l)return a.jd.py(b,c,d,l,g);l=new a.i;b.s(l);k=new a.i;c.s(k);var m=new a.i;m.L(l);m.Eb(k);d=a.Ja.Ad(d,m,!1);b=this.NB(b,d);c=this.NB(c,d);if(b.u()||c.u())return this.qR(b,c,f);l=c.F();k=!1;switch(b.F()){case a.j.Polygon:switch(l){case a.j.Polygon:k=this.ur(b,c,d,f,g);break;case a.j.Polyline:k=this.Vl(b,c,d,f,g);break;case a.j.Point:k=this.tr(b,
c,d,f,g);break;case a.j.MultiPoint:k=this.sr(b,c,d,f,g)}break;case a.j.Polyline:switch(l){case a.j.Polygon:k=this.Vl(c,b,d,this.Jo(f),g);break;case a.j.Polyline:k=this.dy(b,c,d,f,g);break;case a.j.Point:k=this.wr(b,c,d,f,g);break;case a.j.MultiPoint:k=this.vr(b,c,d,f,g)}break;case a.j.Point:switch(l){case a.j.Polygon:k=this.tr(c,b,d,this.Jo(f),g);break;case a.j.Polyline:k=this.wr(c,b,d,this.Jo(f),g);break;case a.j.Point:k=this.JQ(b,c,d,f);break;case a.j.MultiPoint:k=this.or(c,b,d,this.Jo(f),g)}break;
case a.j.MultiPoint:switch(l){case a.j.Polygon:k=this.sr(c,b,d,this.Jo(f),g);break;case a.j.Polyline:k=this.vr(c,b,d,this.Jo(f),g);break;case a.j.MultiPoint:k=this.Vx(b,c,d,f,g);break;case a.j.Point:k=this.or(b,c,d,f,g)}break;default:k=!1}return k};b.ur=function(c,d,f,g,k){var m=new b;m.pi();m.si(g);m.vF();var q=new a.i,r=new a.i;c.s(q);d.s(r);g=!1;a.jd.nj(q,r,f)&&(m.As(c,d),g=!0);g||(q=a.jd.gc(c,d,!1),4==q?(m.As(c,d),g=!0):1==q?(m.Av(d),g=!0):2==q&&(m.$A(c),g=!0));g||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),
m.Jn(g,f,k),m.ro(c,d),m.h.xg());return b.Mf(m.B,m.Ic)};b.ru=function(c,d,f,g){var k=new b;k.pi();k.si("T*****F**");k.vF();var m=new a.i,q=new a.i;c.s(m);d.s(q);var r=!1;a.jd.nj(m,q,f)&&(k.As(c,d),r=!0);r||(m=a.jd.gc(c,d,!1),4==m?(k.As(c,d),r=!0):1==m?(k.Av(d),r=!0):2==m&&(k.$A(c),r=!0));if(r)return this.Mf(k.B,k.Ic);r=new a.gd;c=r.Fb(c);m=r.Fb(d);a.aj.aa(r,f,g,!1);f=r.jf(m).Rf();r.wo(0,!0,!0);a.nm.aa(r,c,-1,!1,g);if(0==r.G(c))return!1;a.nm.aa(r,m,-1,!1,g);k.Mp(r,g);d=0==r.G(m);if(!d&&(k.ro(c,m),k.h.xg(),
m=this.Mf(k.B,k.Ic),!m))return m;c=r.jf(c);r=new a.gd;c=r.Fb(c);m=r.Fb(f);k.Mp(r,g);k.Yd=0;k.pi();k.si(d?"T*****F**":"******F**");k.vy();k.ro(c,m);k.h.xg();return this.Mf(k.B,k.Ic)};b.Vl=function(c,d,f,g,k){var m=new b;m.pi();m.si(g);m.vy();var q=new a.i,r=new a.i;c.s(q);d.s(r);g=!1;a.jd.nj(q,r,f)&&(m.Bs(c,d),g=!0);g||(q=a.jd.gc(c,d,!1),4==q?(m.Bs(c,d),g=!0):1==q&&(m.aB(d),g=!0));g||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,f,k),m.Jg=m.h.to(),b.ds(d,m.h,m.Jg),m.ro(c,d),m.h.uo(m.Jg),m.h.xg());return b.Mf(m.B,
m.Ic)};b.cy=function(c,d,f,g){var k=new b;k.pi();k.si("T*****F**");k.vy();var m=new a.i,q=new a.i;c.s(m);d.s(q);var r=!1;a.jd.nj(m,q,f)&&(k.Bs(c,d),r=!0);r||(m=a.jd.gc(c,d,!1),4==m?(k.Bs(c,d),r=!0):1==m&&(k.aB(d),r=!0));if(r)return this.Mf(k.B,k.Ic);r=new a.gd;c=r.Fb(c);d=r.Fb(d);k.Jn(r,f,g);if(0==r.G(c))return!1;k.ro(c,d);k.h.xg();return this.Mf(k.B,k.Ic)};b.sr=function(c,d,f,g,k){var m=new b;m.pi();m.si(g);m.wF();var q=new a.i,r=new a.i;c.s(q);d.s(r);g=!1;a.jd.nj(q,r,f)&&(m.Cs(c),g=!0);g||(q=a.jd.gc(c,
d,!1),4==q?(m.Cs(c),g=!0):1==q&&(m.bK(),g=!0));g||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,f,k),m.Ov(c,d),m.h.xg());return b.Mf(m.B,m.Ic)};b.dy=function(c,d,f,g,k){var m=new b;m.pi();m.si(g);m.YR();g=new a.i;var q=new a.i;c.s(g);d.s(q);var r=!1;a.jd.nj(g,q,f)&&(m.CD(c,d),r=!0);r||4!=a.jd.gc(c,d,!1)||(m.CD(c,d),r=!0);r||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,f,k),m.ph=m.h.to(),m.Jg=m.h.to(),b.ds(c,m.h,m.ph),b.ds(d,m.h,m.Jg),m.ro(c,d),m.h.uo(m.ph),m.h.uo(m.Jg),m.h.xg());return b.Mf(m.B,m.Ic)};b.vr=function(c,
d,f,g,k){var m=new b;m.pi();m.si(g);m.KF();g=new a.i;var q=new a.i;c.s(g);d.s(q);var r=!1;a.jd.nj(g,q,f)&&(m.cx(c),r=!0);r||4!=a.jd.gc(c,d,!1)||(m.cx(c),r=!0);r||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,f,k),m.ph=m.h.to(),b.ds(c,m.h,m.ph),m.Ov(c,d),m.h.uo(m.ph),m.h.xg());return b.Mf(m.B,m.Ic)};b.Vx=function(c,d,f,g,k){var m=new b;m.pi();m.si(g);m.PF();g=new a.i;var q=new a.i;c.s(g);d.s(q);var r=!1;a.jd.nj(g,q,f)&&(m.PE(),r=!0);r||(g=new a.gd,c=g.Fb(c),d=g.Fb(d),m.Jn(g,f,k),m.Ov(c,d),m.h.xg());return b.Mf(m.B,
m.Ic)};b.tr=function(c,d,f,g){var k=new b;k.pi();k.si(g);k.wF();var m=new a.i;c.s(m);d=d.A();var q=!1;a.jd.qu(d,m,f)&&(k.Cs(c),q=!0);q||(f=a.hd.ie(c,d,f),1==f?(k.B[0]=0,k.B[2]=2,k.B[3]=-1,k.B[5]=1,k.B[6]=-1):2==f?(k.B[6]=-1,0!=c.Mh()?(k.B[0]=-1,k.B[3]=0,k.B[2]=2,k.B[5]=1):(k.B[0]=0,k.B[3]=-1,k.B[5]=-1,f=new a.i,c.s(f),k.B[2]=0==f.ca()&&0==f.ba()?-1:1)):k.Cs(c));return this.Mf(k.B,g)};b.wr=function(c,d,f,g,k){var m=new b;m.pi();m.si(g);m.KF();var q=new a.i;c.s(q);g=d.A();var r=!1;a.jd.qu(g,q,f)&&(m.cx(c),
r=!0);if(!r){var q=null,s=r=!1;if(m.$[0]||m.$[6])a.jd.dx(c,g,f)?(m.$[0]&&(q=a.Hh.il(c,k),s=!a.jd.nr(q,g,f),r=!0,m.B[0]=s?-1:0),m.B[6]=-1):(m.B[0]=-1,m.B[6]=0);m.$[3]&&(null!=q&&q.u()?m.B[3]=-1:(r||(null==q&&(q=a.Hh.il(c,k)),s=!a.jd.nr(q,g,f),r=!0),m.B[3]=s?0:-1));m.$[5]&&(null!=q&&q.u()?m.B[5]=-1:r&&!s?m.B[5]=0:(null==q&&(q=a.Hh.il(c,k)),k=a.jd.lu(q,d,f),m.B[5]=k?-1:0));m.$[2]&&(0!=c.ac()?m.B[2]=1:(k=new a.pe(c.description),k.Qd(c,0,c.G()),c=a.jd.lu(k,d,f),m.B[2]=c?-1:0))}return this.Mf(m.B,m.Ic)};
b.or=function(c,d,f,g){var k=new b;k.pi();k.si(g);k.PF();var m=new a.i;c.s(m);d=d.A();var q=!1;a.jd.qu(d,m,f)&&(k.PE(),q=!0);if(!q){m=!1;q=!0;f*=f;for(var r=0;r<c.G();r++){var s=c.Ga(r);a.b.$b(s,d)<=f?m=!0:q=!1;if(m&&!q)break}m?(k.B[0]=0,k.B[2]=q?-1:0,k.B[6]=-1):(k.B[0]=-1,k.B[2]=0,k.B[6]=0)}return b.Mf(k.B,g)};b.JQ=function(c,d,f,g){c=c.A();d=d.A();for(var k=[],m=0;9>m;m++)k[m]=-1;a.b.$b(c,d)<=f*f?k[0]=0:(k[2]=0,k[6]=0);k[8]=2;return b.Mf(k,g)};b.Mf=function(a,b){for(var c=0;9>c;c++)switch(b.charAt(c)){case "T":if(-1==
a[c])return!1;break;case "F":if(-1!=a[c])return!1;break;case "0":if(0!=a[c])return!1;break;case "1":if(1!=a[c])return!1;break;case "2":if(2!=a[c])return!1}return!0};b.qR=function(b,c,d){var f=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(b.u()&&c.u()){for(var g=0;9>g;g++)f[g]=-1;return this.Mf(f,d)}g=!1;b.u()&&(b=c,g=!0);f[0]=-1;f[1]=-1;f[3]=-1;f[4]=-1;f[6]=-1;f[7]=-1;f[8]=2;c=b.F();a.U.Lc(c)?c==a.j.Polygon?0!=b.Mh()?(f[2]=2,f[5]=1):(f[5]=-1,c=new a.i,b.s(c),f[2]=0==c.ca()&&0==c.ba()?0:1):(c=0!=b.ac(),f[2]=c?1:
0,f[5]=a.Hh.Lo(b)?0:-1):(f[2]=0,f[5]=-1);g&&this.qG(f);return this.Mf(f,d)};b.XN=function(a,c,d){return b.lT(a)?3:b.MS(a)?4:b.mT(a,c,d)?8:b.BR(a,c,d)?16:b.xQ(a)?1:b.KK(a,c,d)?32:0};b.lT=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"F"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"F"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.MS=function(a){return"F"==a.charAt(0)&&"F"==a.charAt(1)&&"*"==a.charAt(2)&&"F"==a.charAt(3)&&"F"==a.charAt(4)&&"*"==a.charAt(5)&&
"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.mT=function(a,b,c){if(0==b&&0==c)return!1;if(2!=b||2!=c)if("F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"T"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)||1==b&&1==c&&"F"==a.charAt(0)&&"T"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0;return 0!=c&&"F"==a.charAt(0)&&"*"==
a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"T"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.BR=function(a,b,c){return b>c?"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1:1==b&&1==c&&"0"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==
a.charAt(8)?!0:!1};b.xQ=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.KK=function(a,b,c){if(b==c){if(1!=b)return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1;if("1"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==
a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0}return!1};b.ds=function(a,b,c){a=b.za(a);for(var d=b.Be;-1!=d;d=b.Bf(d))if(0!=(b.nd(d)&a)){var f=b.te(d);if(-1==f)b.fm(d,c,0);else{var g=f,l=0;do 0!=(b.Gg(g)&a)&&l++,g=b.Xb(b.ta(g));while(g!=f);b.fm(d,c,l)}}};b.Jo=function(a){var b;b=""+a.charAt(0);b+=a.charAt(3);b+=a.charAt(6);b+=a.charAt(1);b+=a.charAt(4);b+=a.charAt(7);b+=a.charAt(2);b+=a.charAt(5);return b+a.charAt(8)};b.prototype.pi=function(){for(var a=
0;9>a;a++)this.B[a]=-2,this.Ua[a]=-2};b.qG=function(a){var b=a[1],c=a[2],d=a[5];a[1]=a[3];a[2]=a[6];a[5]=a[7];a[3]=b;a[6]=c;a[7]=d};b.prototype.si=function(a){this.Ic=a;for(a=0;9>a;a++)"*"!=this.Ic.charAt(a)?(this.$[a]=!0,this.Yd++):this.$[a]=!1};b.prototype.SF=function(){for(var a=0;9>a;a++)this.$[a]&&-2==this.B[a]&&(this.B[a]=-1,this.$[a]=!1)};b.prototype.ec=function(a){if(-2==this.B[a])return!1;if(-1==this.B[a])return this.$[a]=!1,this.Yd--,!0;if("T"!=this.Ic.charAt(a)&&"F"!=this.Ic.charAt(a)){if(this.B[a]<
this.Ua[a])return!1;this.$[a]=!1;this.Yd--;return!0}this.$[a]=!1;this.Yd--;return!0};b.prototype.vF=function(){this.Zt=0;this.Ua[0]=2;this.Ua[1]=1;this.Ua[2]=2;this.Ua[3]=1;this.Ua[4]=1;this.Ua[5]=1;this.Ua[6]=2;this.Ua[7]=1;this.Ua[8]=2;this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.vy=function(){this.Zt=1;this.Nl=3;this.Ua[0]=1;this.Ua[1]=0;this.Ua[2]=2;this.Ua[3]=1;this.Ua[4]=0;this.Ua[5]=1;this.Ua[6]=1;this.Ua[7]=0;this.Ua[8]=2;this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.YR=
function(){this.Zt=2;this.Nl=4;this.Ua[0]=1;this.Ua[1]=0;this.Ua[2]=1;this.Ua[3]=0;this.Ua[4]=0;this.Ua[5]=0;this.Ua[6]=1;this.Ua[7]=0;this.Ua[8]=2;this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.wF=function(){this.Nl=3;this.Ua[0]=0;this.Ua[1]=-1;this.Ua[2]=2;this.Ua[3]=0;this.Ua[4]=-1;this.Ua[5]=1;this.Ua[6]=0;this.Ua[7]=-1;this.Ua[8]=2;this.$[1]&&(this.B[1]=-1,this.$[1]=!1,this.Yd--);this.$[4]&&(this.B[4]=-1,this.$[4]=!1,this.Yd--);this.$[7]&&(this.B[7]=-1,this.$[7]=!1,this.Yd--);this.$[8]&&
(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.KF=function(){this.Nl=4;this.Ua[0]=0;this.Ua[1]=-1;this.Ua[2]=1;this.Ua[3]=0;this.Ua[4]=-1;this.Ua[5]=0;this.Ua[6]=0;this.Ua[7]=-1;this.Ua[8]=2;this.$[1]&&(this.B[1]=-1,this.$[1]=!1,this.Yd--);this.$[4]&&(this.B[4]=-1,this.$[4]=!1,this.Yd--);this.$[7]&&(this.B[7]=-1,this.$[7]=!1,this.Yd--);this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.PF=function(){this.Nl=5;this.Ua[0]=0;this.Ua[1]=-1;this.Ua[2]=0;this.Ua[3]=-1;this.Ua[4]=-1;this.Ua[5]=
-1;this.Ua[6]=0;this.Ua[7]=-1;this.Ua[8]=2;this.$[1]&&(this.B[1]=-1,this.$[1]=!1,this.Yd--);this.$[3]&&(this.B[3]=-1,this.$[3]=!1,this.Yd--);this.$[4]&&(this.B[4]=-1,this.$[4]=!1,this.Yd--);this.$[5]&&(this.B[5]=-1,this.$[5]=!1,this.Yd--);this.$[7]&&(this.B[7]=-1,this.$[7]=!1,this.Yd--);this.$[8]&&(this.B[8]=2,this.$[8]=!1,this.Yd--)};b.prototype.$J=function(a,b,c){var d=!0;this.$[0]&&(this.GO(a,b,c),d=d&&this.ec(0));this.$[1]&&(this.eD(a,b,1),d=d&&this.ec(1));this.$[2]&&(this.fD(a,b,c,2),d=d&&this.ec(2));
this.$[3]&&(this.eD(a,c,3),d=d&&this.ec(3));this.$[4]&&(this.fK(a,b,c),d=d&&this.ec(4));this.$[5]&&(this.eB(a,c,5),d=d&&this.ec(5));this.$[6]&&(this.fD(a,c,b,6),d=d&&this.ec(6));this.$[7]&&(this.eB(a,b,7),d=d&&this.ec(7));return d};b.prototype.As=function(a,b){this.B[0]=-1;this.B[1]=-1;this.B[3]=-1;this.B[4]=-1;this.gq(a,this.$[2]?2:-1,this.Ic.charAt(2),this.$[5]?5:-1,this.Ic.charAt(5));this.gq(b,this.$[6]?6:-1,this.Ic.charAt(6),this.$[7]?7:-1,this.Ic.charAt(7))};b.prototype.gq=function(b,c,d,f,g){if(-1!=
c||-1!=f)("T"!=d&&"F"!=d&&-1!=c||"T"!=g&&"F"!=g&&-1!=f?0!=b.Mh():1)?(-1!=c&&(this.B[c]=2),-1!=f&&(this.B[f]=1)):(-1!=f&&(this.B[f]=-1),-1!=c&&(d=new a.i,b.s(d),this.B[c]=0==d.ca()&&0==d.ba()?0:1))};b.prototype.Av=function(a){this.B[2]=2;this.B[3]=-1;this.B[4]=-1;this.B[5]=1;this.B[6]=-1;this.B[7]=-1;this.gq(a,this.$[0]?0:-1,this.Ic.charAt(0),this.$[1]?1:-1,this.Ic.charAt(1))};b.prototype.$A=function(a){this.Av(a);b.qG(this.B)};b.prototype.Bs=function(b,c){this.B[0]=-1;this.B[1]=-1;this.B[3]=-1;this.B[4]=
-1;if(this.$[6]){var d=this.Ic.charAt(6),d="T"!=d&&"F"!=d?0!=c.ac():!0;this.B[6]=d?1:0}this.$[7]&&(d=a.Hh.Lo(c),this.B[7]=d?0:-1);this.gq(b,this.$[2]?2:-1,this.Ic.charAt(2),this.$[5]?5:-1,this.Ic.charAt(5))};b.prototype.aB=function(b){if(this.$[0]){var c=this.Ic.charAt(0),c="T"!=c&&"F"!=c?0!=b.ac():!0;this.B[0]=c?1:0}this.$[1]&&(b=a.Hh.Lo(b),this.B[1]=b?0:-1);this.B[2]=2;this.B[3]=-1;this.B[4]=-1;this.B[5]=1;this.B[6]=-1;this.B[7]=-1};b.prototype.Cs=function(a){this.B[0]=-1;this.B[3]=-1;this.B[6]=
0;this.gq(a,this.$[2]?2:-1,this.Ic.charAt(2),this.$[5]?5:-1,this.Ic.charAt(5))};b.prototype.bK=function(){this.B[0]=0;this.B[2]=2;this.B[3]=-1;this.B[5]=1;this.B[6]=-1};b.prototype.CD=function(b,c){this.B[0]=-1;this.B[1]=-1;this.B[3]=-1;this.B[4]=-1;if(this.$[2]){var d=this.Ic.charAt(2),d="T"!=d&&"F"!=d?0!=b.ac():!0;this.B[2]=d?1:0}this.$[5]&&(d=a.Hh.Lo(b),this.B[5]=d?0:-1);this.$[6]&&(d=this.Ic.charAt(6),d="T"!=d&&"F"!=d?0!=c.ac():!0,this.B[6]=d?1:0);this.$[7]&&(d=a.Hh.Lo(c),this.B[7]=d?0:-1)};b.prototype.cx=
function(b){this.B[0]=-1;this.B[3]=-1;if(this.$[2]){var c=this.Ic.charAt(2),c="T"!=c&&"F"!=c?0!=b.ac():!0;this.B[2]=c?1:0}this.$[5]&&(b=a.Hh.Lo(b),this.B[5]=b?0:-1);this.B[6]=0};b.prototype.PE=function(){this.B[0]=-1;this.B[2]=0;this.B[6]=0};b.prototype.aK=function(a,b,c){var d=!0;this.$[0]&&(this.HO(a,b),d=d&&this.ec(0));this.$[1]&&(this.DO(a,b,c,this.Jg),d=d&&this.ec(1));this.$[2]&&(this.EO(a,b),d=d&&this.ec(2));this.$[3]&&(this.jK(a,b,c,this.Jg),d=d&&this.ec(3));this.$[4]&&(this.gK(a,b,c,this.Jg),
d=d&&this.ec(4));this.$[5]&&(this.hK(a,b,c),d=d&&this.ec(5));this.$[6]&&(this.AM(a,b),d=d&&this.ec(6));this.$[7]&&(this.zM(a,b,c,this.Jg),d=d&&this.ec(7));return d};b.prototype.tP=function(a,b,c){var d=!0;this.$[0]&&(this.KO(a,b,c,this.ph,this.Jg),d=d&&this.ec(0));this.$[1]&&(this.gD(a,b,c,this.ph,this.Jg,1),d=d&&this.ec(1));this.$[2]&&(this.hD(a,b,c,2),d=d&&this.ec(2));this.$[3]&&(this.gD(a,c,b,this.Jg,this.ph,3),d=d&&this.ec(3));this.$[4]&&(this.lK(a,b,c,this.ph,this.Jg),d=d&&this.ec(4));this.$[5]&&
(this.fB(a,c,this.ph,5),d=d&&this.ec(5));this.$[6]&&(this.hD(a,c,b,6),d=d&&this.ec(6));this.$[7]&&(this.fB(a,b,this.Jg,7),d=d&&this.ec(7));return d};b.prototype.bB=function(a,b,c){var d=!0;this.$[0]&&(this.IO(a,b),d=d&&this.ec(0));this.$[2]&&(this.FO(a,b),d=d&&this.ec(2));this.$[3]&&(this.kK(a,b,c),d=d&&this.ec(3));this.$[5]&&(this.iK(a,b),d=d&&this.ec(5));this.$[6]&&(this.BM(a,b),d=d&&this.ec(6));return d};b.prototype.DD=function(a,b,c){var d=!0;this.$[0]&&(this.LO(a,b,c,this.ph),d=d&&this.ec(0));
this.$[2]&&(this.JO(a,c),d=d&&this.ec(2));this.$[3]&&(this.nK(a,b,c,this.ph),d=d&&this.ec(3));this.$[5]&&(this.mK(a,b,c,this.ph),d=d&&this.ec(5));this.$[6]&&(this.CM(a,b,c),d=d&&this.ec(6));return d};b.prototype.IQ=function(a,b,c){var d=!0;this.$[0]&&(this.MO(a,b,c),d=d&&this.ec(0));this.$[2]&&(this.iD(a,b,c,2),d=d&&this.ec(2));this.$[6]&&(this.iD(a,c,b,6),d=d&&this.ec(6));return d};b.prototype.GO=function(a,b,c){2!=this.B[0]&&(a=this.h.Re(a),0!=(a&b)&&0!=(a&c)&&(this.B[0]=2))};b.prototype.eD=function(a,
b,c){if(1!=this.B[c]){var d=this.h.Re(this.h.ta(a));0!=(this.h.Re(a)&b)&&0!=(d&b)&&(this.B[c]=1)}};b.prototype.fD=function(a,b,c,d){2!=this.B[d]&&(a=this.h.Re(a),0!=(a&b)&&0==(a&c)&&(this.B[d]=2))};b.prototype.fK=function(a,b,c){if(1!=this.B[4]){var d=this.h.Gg(a);0!=(d&b)&&0!=(d&c)?this.B[4]=1:0!=this.B[4]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(a=this.h.nd(this.h.kf(a)),0!=(a&b)&&0!=(a&c)&&(this.B[4]=0))}};b.prototype.eB=function(a,b,c){if(1!=this.B[c]){var d=this.h.Re(this.h.ta(a));0==
(this.h.Re(a)&b)&&0==(d&b)&&(this.B[c]=1)}};b.prototype.HO=function(a,b){if(1!=this.B[0]){var c=this.h.Re(this.h.ta(a));0!=(this.h.Re(a)&b)&&0!=(c&b)&&(this.B[0]=1)}};b.prototype.DO=function(a,b,c,d){if(0!=this.B[1]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){var f=this.h.kf(a),g=this.h.nd(f);0==(g&b)&&0!=(this.h.Re(a)&b)&&(a=this.h.Sf(f,d),0!=(g&c)&&0!=a%2&&(this.B[1]=0))}};b.prototype.EO=function(a,b){2!=this.B[2]&&0!=(this.h.Gg(a)&b)&&(this.B[2]=2)};b.prototype.jK=function(a,b,c,d){if(1!=this.B[3]){var f=
this.h.Gg(a);0!=(f&b)&&0!=(f&c)?this.B[3]=1:0!=this.B[3]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(f=this.h.kf(a),a=this.h.nd(f),0!=(a&b)&&(b=this.h.Sf(f,d),0!=(a&c)&&0==b%2&&(this.B[3]=0)))}};b.prototype.gK=function(a,b,c,d){if(0!=this.B[4]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){var f=this.h.kf(a);a=this.h.nd(f);0!=(a&b)&&(b=this.h.Sf(f,d),0!=(a&c)&&0!=b%2&&(this.B[4]=0))}};b.prototype.hK=function(a,b,c){1!=this.B[5]&&(a=this.h.Gg(a),0!=(a&b)&&0==(a&c)&&(this.B[5]=1))};b.prototype.AM=
function(a,b){if(1!=this.B[6]){var c=this.h.Re(this.h.ta(a));0==(this.h.Re(a)&b)&&0==(c&b)&&(this.B[6]=1)}};b.prototype.zM=function(a,b,c,d){if(0!=this.B[7]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){var f=this.h.kf(a),g=this.h.nd(f);0==(g&b)&&0==(this.h.Re(a)&b)&&(a=this.h.Sf(f,d),0!=(g&c)&&0!=a%2&&(this.B[7]=0))}};b.prototype.KO=function(a,b,c,d,f){if(1!=this.B[0]){var g=this.h.Gg(a);0!=(g&b)&&0!=(g&c)?this.B[0]=1:0!=this.B[0]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(a=this.h.kf(a),
g=this.h.nd(a),0!=(g&b)&&0!=(g&c)&&(b=this.h.Sf(a,d),f=this.h.Sf(a,f),0==b%2&&0==f%2&&(this.B[0]=0)))}};b.prototype.gD=function(a,b,c,d,f,g){if(0!=this.B[g]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)){a=this.h.kf(a);var l=this.h.nd(a);0!=(l&b)&&0!=(l&c)&&(b=this.h.Sf(a,d),f=this.h.Sf(a,f),0==b%2&&0!=f%2&&(this.B[g]=0))}};b.prototype.hD=function(a,b,c,d){1!=this.B[d]&&(a=this.h.Gg(a),0!=(a&b)&&0==(a&c)&&(this.B[d]=1))};b.prototype.lK=function(a,b,c,d,f){if(0!=this.B[4]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),
this.ni)){a=this.h.kf(a);var g=this.h.nd(a);0!=(g&b)&&0!=(g&c)&&(b=this.h.Sf(a,d),f=this.h.Sf(a,f),0!=b%2&&0!=f%2&&(this.B[4]=0))}};b.prototype.fB=function(a,b,c,d){0!=this.B[d]&&1!=this.h.ub(this.h.ge(this.h.ta(a)),this.ni)&&(a=this.h.kf(a),0==(this.h.nd(a)&b)&&0!=this.h.Sf(a,c)%2&&(this.B[d]=0))};b.prototype.IO=function(a,b){0!=this.B[0]&&0==(this.h.nd(a)&b)&&0!=(this.h.pj(this.h.lw(a))&b)&&(this.B[0]=0)};b.prototype.FO=function(a,b){2!=this.B[2]&&0!=(this.h.nd(a)&b)&&(this.B[2]=2)};b.prototype.kK=
function(a,b,c){0!=this.B[3]&&(a=this.h.nd(a),0!=(a&b)&&0!=(a&c)&&(this.B[3]=0))};b.prototype.iK=function(a,b){1!=this.B[5]&&0!=(this.h.nd(a)&b)&&(this.B[5]=1)};b.prototype.BM=function(a,b){0!=this.B[6]&&0==(this.h.nd(a)&b)&&0==(this.h.pj(this.h.lw(a))&b)&&(this.B[6]=0)};b.prototype.LO=function(a,b,c,d){if(0!=this.B[0]){var f=this.h.nd(a);0!=(f&b)&&0!=(f&c)&&0==this.h.Sf(a,d)%2&&(this.B[0]=0)}};b.prototype.JO=function(a,b){1!=this.B[2]&&(-1!=this.h.te(a)?this.B[2]=1:0!=this.B[2]&&0==(this.h.nd(a)&
b)&&(this.B[2]=0))};b.prototype.nK=function(a,b,c,d){if(0!=this.B[3]){var f=this.h.nd(a);0!=(f&b)&&0!=(f&c)&&0!=this.h.Sf(a,d)%2&&(this.B[3]=0)}};b.prototype.mK=function(a,b,c,d){if(0!=this.B[5]){var f=this.h.nd(a);0!=(f&b)&&0==(f&c)&&0!=this.h.Sf(a,d)%2&&(this.B[5]=0)}};b.prototype.CM=function(a,b,c){0!=this.B[6]&&(a=this.h.nd(a),0==(a&b)&&0!=(a&c)&&(this.B[6]=0))};b.prototype.MO=function(a,b,c){0!=this.B[0]&&(a=this.h.nd(a),0!=(a&b)&&0!=(a&c)&&(this.B[0]=0))};b.prototype.iD=function(a,b,c,d){0!=
this.B[d]&&(a=this.h.nd(a),0!=(a&b)&&0==(a&c)&&(this.B[d]=0))};b.prototype.ro=function(b,c){var d=!1,f=this.h.za(b),g=this.h.za(c);this.ni=this.h.Eg();for(var l=this.h.Be;-1!=l;l=this.h.Bf(l)){var k=this.h.te(l);if(-1==k){if(-1!=this.Nl)switch(this.Nl){case 3:d=this.bB(l,f,g);break;case 4:d=this.DD(l,f,g);break;default:throw a.g.sa("internal error");}}else{var m=k;do{var q=m;if(1!=this.h.ub(q,this.ni)){do{switch(this.Zt){case 0:d=this.$J(q,f,g);break;case 1:d=this.aK(q,f,g);break;case 2:d=this.tP(q,
f,g);break;default:throw a.g.sa("internal error");}if(d)break;this.h.Cb(q,this.ni,1);q=this.h.Xb(q)}while(q!=m&&!d)}if(d)break;m=this.h.Xb(this.h.ta(q))}while(m!=k);if(d)break}}d||this.SF();this.h.kh(this.ni)};b.prototype.Ov=function(b,c){for(var d=!1,f=this.h.za(b),g=this.h.za(c),l=this.h.Be;-1!=l;l=this.h.Bf(l)){switch(this.Nl){case 3:d=this.bB(l,f,g);break;case 4:d=this.DD(l,f,g);break;case 5:d=this.IQ(l,f,g);break;default:throw a.g.xa();}if(d)break}d||this.SF()};b.prototype.Mp=function(a,b){this.h.Kp(a,
b)};b.prototype.Jn=function(a,b,c){this.sM(a,b,c);this.Mp(a,c)};b.prototype.sM=function(b,c,d){a.aj.aa(b,c,d,!1);b.wo(0,!0,!0);for(c=b.ad;-1!=c;c=b.we(c))b.Mb(c)==a.j.Polygon&&a.nm.aa(b,c,-1,!1,d)};b.NB=function(b,c){var d=b.F();if(a.U.Mc(d))return d=new a.Ya(b.description),d.Cc(b,!0),d;if(d==a.j.Envelope){d=new a.i;b.s(d);if(d.ca()<=c&&d.ba()<=c)return d=new a.Wa(b.description),b.Af(d),d;if(d.ca()<=c||d.ba()<=c){var d=new a.Ya(b.description),f=new a.Wa;b.uf(0,f);d.ef(f);b.uf(2,f);d.lineTo(f);return d}d=
new a.La(b.description);d.Xc(b,!1);return d}return b};return b}();a.el=b})(A||(A={}));(function(a){var b=function(){function b(c){this.Dl=new a.ha(0);this.Nt=new a.ha(0);this.zr=new a.b;this.Ar=new a.b;this.a=c;this.Sq=-1}b.prototype.dc=function(a){return this.a.dc(this.Iw(a))};b.prototype.nt=function(a){var b=this.sw(a);a=this.vC(a);if(this.a.Va(b)==a){var c=b,b=a;a=c}this.a.vc(b,this.zr);this.a.vc(a,this.Ar);return this.zr.y<this.Ar.y};b.prototype.Iw=function(a){var b=this.sw(a);a=this.vC(a);return this.a.Y(b)==
a?b:a};b.prototype.sw=function(a){return this.Dl.get(a)};b.prototype.vC=function(a){return this.Nt.get(a)};b.prototype.hC=function(a){this.Dl.set(a,this.Sq);this.Sq=a};b.prototype.GE=function(b){if(-1!=this.Sq){var c=this.Sq;this.Sq=this.Dl.get(c);this.Dl.set(c,b);this.Nt.set(c,this.a.Y(b));return c}null==this.Dl&&(this.Dl=new a.ha(0),this.Nt=new a.ha(0));c=this.Dl.size;this.Dl.add(b);this.Nt.add(this.a.Y(b));return c};b.prototype.Cw=function(a){return this.a.sd(this.sw(a))};return b}();a.AT=b;var c=
function(){function b(c){this.ne=c;this.Wd=new a.zb;this.Kl=new a.zb;this.eE=0;this.pn=null;this.yx=-1}b.prototype.compare=function(a,b,c){c=a.ea(c);var d=this.ne.ab,e;this.yx==b?e=this.eE:(this.pn=d.dc(b),null==this.pn?(a=d.a,a.Pc(d.Iw(b),this.Wd),this.pn=this.Wd,e=this.Wd.xe(this.ne.Zg,0)):e=this.pn.xe(this.ne.Zg,0),this.eE=e,this.yx=b);a=d.dc(c);var f;null==a?(a=d.a,a.Pc(d.Iw(c),this.Kl),a=this.Kl,f=this.Kl.xe(this.ne.Zg,0)):f=a.xe(this.ne.Zg,0);e==f&&(b=d.nt(b),c=d.nt(c),c=Math.min(b?this.pn.ia:
this.pn.ka,c?a.ia:a.ka),b=0.5*(c+this.ne.Zg),b==this.ne.Zg&&(b=c),e=this.pn.xe(b,0),f=a.xe(b,0));return e<f?-1:e>f?1:0};b.prototype.reset=function(){this.yx=-1};return b}(),d=function(){function d(){this.Rl=this.Dk=null;this.$a=new a.bj;this.$a.kM();this.Md=new c(this);this.$a.In(this.Md)}d.prototype.WM=function(){var b=!1;this.Pt&&(b=this.XM());if(1==this.a.fa(this.V)){var c=this.a.Wb(this.V),b=this.a.Fw(c);this.a.Cy(c,!0);return 0>b?(b=this.a.Db(c),this.a.lF(b),this.a.Wi(c,this.a.Va(b)),!0):!1}this.Ak=
this.a.Tv();this.ln=this.a.Tv();for(c=this.a.Wb(this.V);-1!=c;c=this.a.cc(c))this.a.Pp(c,this.Ak,0),this.a.Pp(c,this.ln,-1);c=new a.ha(0);this.Zg=NaN;var d=new a.b;this.kr=this.a.fa(this.V);this.gn=this.a.re();this.ar=this.a.re();for(var e=this.Dk.hc(this.Dk.Xd);-1!=e;e=this.Dk.cb(e)){var f=this.Dk.getData(e);this.a.vc(f,d);d.y!=this.Zg&&0!=c.size&&(b=this.xr(c)||b,this.Md.reset(),c.clear(!1));c.add(f);this.Zg=d.y;if(0==this.kr)break}0<this.kr&&(b=this.xr(c)||b,c.clear(!1));this.a.cf(this.gn);this.a.cf(this.ar);
for(c=this.a.Wb(this.V);-1!=c;)if(3==this.a.Ei(c,this.Ak)){this.a.Cy(c,!0);d=c;for(c=this.a.Ei(c,this.ln);-1!=c;)e=this.a.Ei(c,this.ln),this.a.aQ(this.V,this.a.cc(d),c),d=c,c=e;c=this.a.cc(d)}else this.a.Cy(c,!1),c=this.a.cc(c);this.a.sy(this.Ak);this.a.sy(this.ln);return b};d.prototype.xr=function(a){return this.VQ(a)};d.prototype.VQ=function(c){var d=!1;null==this.ab&&(this.ab=new b(this.a));null==this.Rl?(this.Rl=new a.ha(0),this.Rl.yb(16)):this.Rl.clear(!1);this.UQ(c);for(var e=0,f=c.size;e<f;e++){var g=
c.get(e);-1!=g&&this.bD(g,-1)}for(e=0;e<this.Rl.size&&0<this.kr;e++)if(c=this.Rl.get(e),g=this.ab.Cw(this.$a.ea(c)),f=-1,0==this.a.Ei(g,this.Ak)){for(var g=this.$a.he(c),l=c,k=!1;-1!=g;){var m=this.$a.ea(g),q=this.ab.Cw(m),r=this.a.Ei(q,this.Ak);if(0!=r){f=q;break}l=g;g=this.$a.he(g)}-1==g?(k=!0,g=l):(m=this.$a.ea(g),k=this.ab.nt(m),g=this.$a.cb(g),k=!k);do{m=this.$a.ea(g);q=this.ab.Cw(m);r=this.a.Ei(q,this.Ak);if(0==r&&(k!=this.ab.nt(m)&&(d=this.a.Db(q),this.a.lF(d),this.a.Wi(q,this.a.Va(d)),d=!0),
this.a.Pp(q,this.Ak,k?3:2),k||(l=this.a.Ei(f,this.ln),this.a.Pp(f,this.ln,q),this.a.Pp(q,this.ln,l)),this.kr--,0==this.kr))return d;f=q;l=g;g=this.$a.cb(g);k=!k}while(l!=c)}return d};d.prototype.UQ=function(a){for(var b=0,c=a.size;b<c;b++){var d=a.get(b),e=this.a.Sa(d,this.gn),f=this.a.Sa(d,this.ar);if(-1!=e){var g=this.$a.ea(e);this.ab.hC(g);this.a.mb(d,this.gn,-1)}-1!=f&&(g=this.$a.ea(f),this.ab.hC(g),this.a.mb(d,this.ar,-1));g=-1;-1!=e&&-1!=f?(this.$a.ld(e,-1),this.$a.ld(f,-1),a.set(b,-1)):g=-1!=
e?e:f;-1!=g&&(this.bD(d,g)||this.$a.ld(g,-1),a.set(b,-1))}};d.prototype.bD=function(b,c){var d=new a.b,e=new a.b;this.a.vc(b,d);var f=this.a.Y(b);this.a.vc(f,e);var g=!1;if(d.y<e.y){var g=!0,l=this.ab.GE(b),k;-1==c?k=this.$a.addElement(l,-1):(k=c,this.$a.Vi(k,l));l=this.a.Sa(f,this.gn);-1==l?this.a.mb(f,this.gn,k):this.a.mb(f,this.ar,k);f=this.a.sd(b);0==this.a.Ei(f,this.Ak)&&this.Rl.add(k)}f=this.a.Va(b);this.a.vc(f,e);d.y<e.y&&(g=!0,l=this.ab.GE(f),-1==c?k=this.$a.addElement(l,-1):(k=c,this.$a.Vi(k,
l)),l=this.a.Sa(f,this.gn),-1==l?this.a.mb(f,this.gn,k):this.a.mb(f,this.ar,k),f=this.a.sd(b),0==this.a.Ei(f,this.Ak)&&this.Rl.add(k));return g};d.aa=function(a,b,c,f){var g=new d;g.a=a;g.V=b;g.Dk=c;g.Pt=f;return g.WM()};d.prototype.XM=function(){var b=new a.ha(0),c=new a.ha(0),d=-1,e=-1,f=new a.b;f.Eh();for(var g=-1,l=-1,k=-1,m=new a.b,q=this.Dk.hc(this.Dk.Xd);-1!=q;q=this.Dk.cb(q)){var r=this.Dk.getData(q);this.a.vc(r,m);var s=this.a.sd(r);f.vb(m)&&l==s?(-1==e&&(d=this.a.Tv(),e=this.a.re()),-1==
k&&(k=c.size,this.a.mb(g,e,k),c.add(1),-1==this.a.Ei(s,d)&&(this.a.Pp(s,d,g),b.add(s))),this.a.mb(r,e,k),c.JF(c.uc()+1)):(k=-1,f.K(m));g=r;l=s}if(0==b.size)return!1;f=new a.ha(0);g=new a.ha(0);l=0;for(k=b.size;l<k;l++){var s=b.get(l),t=this.a.Ei(s,d),r=this.a.Sa(t,e);f.clear(!1);g.clear(!1);f.add(t);g.add(r);for(r=this.a.Y(t);r!=t;r=this.a.Y(r)){var u=r,m=this.a.Sa(u,e);if(-1!=m)if(0==g.size)g.add(m),f.add(u);else if(g.uc()==m){var q=f.uc(),w=this.a.Y(q),t=this.a.Y(u);this.a.Tc(q,t);this.a.Uc(t,q);
this.a.Tc(u,w);this.a.Uc(w,u);u=[!1];w=this.a.aD(this.V,w,this.a.Db(s),u);this.a.mb(r,e,-1);u[0]&&this.a.Dh(s,t);r=this.a.Ia(s);t=this.a.Ia(w);r-=t;this.a.hm(s,r);c.set(m,c.get(m)-1);1==c.get(m)&&(c.set(m,0),g.bf(),f.bf());r=t=q}else f.add(r),g.add(m)}}this.a.sy(d);this.a.cf(e);return!0};return d}();a.zI=d})(A||(A={}));(function(a){var b=function(){function b(){}b.prototype.Ag=function(){this.Lx=this.jb=null};b.prototype.get=function(){return this.Lx};b.prototype.set=function(b){this.Lx=b;if(null!=
b)throw b.F()==a.j.Line&&(this.jb=b),a.g.xa();};b.prototype.create=function(b){if(b==a.j.Line)this.kq();else throw a.g.sa("Not Implemented");};b.prototype.kq=function(){null==this.jb&&(this.jb=new a.zb);this.Lx=this.jb};return b}();a.Ag=b})(A||(A={}));(function(a){a=a.EI||(a.EI={});a[a.enumLineSeg=1]="enumLineSeg";a[a.enumBezierSeg=2]="enumBezierSeg";a[a.enumArcSeg=4]="enumArcSeg";a[a.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask";a[a.enumSegmentMask=7]="enumSegmentMask";a[a.enumDensified=
8]="enumDensified"})(A||(A={}));(function(a){var b=function(){return function(a){this.ri=a;this.cz=this.dz=1;this.jy=this.iy=this.ky=0}}(),c=function(){function c(){this.mp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Jj=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.of=new a.Wa;this.la=this.eu=0;this.bn=[];this.hr=[];this.au=[];this.op=[];this.Ix=[]}c.prototype.my=function(a){if(null!=a){for(var b=0,c=a.length;b<c;b++)this.nR(a[b]);a.length=0}};c.prototype.nR=function(a){a.ri=null;this.op.push(a)};c.prototype.mu=
function(a){if(0===this.op.length)var c=new b(a);else c=this.op[this.op.length-1],c.ri=a,this.op.length-=1;return c};c.prototype.cO=function(a,b){return 0==a?this.hr[b]:this.au[b]};c.prototype.Yx=function(){this.eu>=this.Ix.length&&this.Ix.push(new a.Ag);var b=this.Ix[this.eu];this.eu++;return b};c.prototype.clear=function(){this.my(this.bn);this.my(this.hr);this.my(this.au);this.eu=0};c.prototype.An=function(a){this.bn.push(this.mu(a))};c.prototype.kk=function(a){return 0==a?this.hr.length:this.au.length};
c.prototype.Ho=function(a,b){return this.cO(a,b).ri};c.prototype.Ha=function(b,c){if(2!=this.bn.length)throw a.g.xa();this.la=b;var d=a.vi.Sy(0.01*b),f=!1,g=this.bn[0],l=this.bn[1];if(c||0!=(g.ri.cq(l.ri,b,!0)&5)){if(g.ri.F()==a.j.Line){var k=g.ri;if(l.ri.F()==a.j.Line){var m=l.ri,q=a.zb.nv(k,m,null,this.mp,this.Jj,b);if(0==q)throw a.zb.nv(k,m,null,this.mp,this.Jj,b),a.g.xa();var r=Array(9);a.J.Os(r,null);for(var s=0;s<q;s++){var t=this.mp[s],u=this.Jj[s],w=g.jy,x=1;0==t?(w=g.ky,x=g.dz):1==t&&(w=
g.iy,x=g.cz);var C=l.jy,y=1;0==u?(C=l.ky,y=l.dz):1==u&&(C=l.iy,y=l.cz);var A=new a.b;w==C?(w=new a.b,k.Lb(t,w),t=new a.b,m.Lb(u,t),u=x+y,y/=u,a.vi.BD(w,t,y,A),a.b.$b(A,w)+a.b.$b(A,t)>d&&(f=!0)):w>C?(k.Lb(t,A),t=new a.b,m.Lb(u,t),a.b.$b(A,t)>d&&(f=!0)):(m.Lb(u,A),w=new a.b,k.Lb(t,w),a.b.$b(A,w)>d&&(f=!0));r[s]=A}g=0;l=-1;for(s=0;s<=q;s++)y=s<q?this.mp[s]:1,y!=g&&(d=this.Yx(),k.Bi(g,y,d),-1!=l&&d.get().fd(r[l]),s!=q&&d.get().wd(r[s]),g=y,this.hr.push(this.mu(d.get()))),l=s;k=[0,0,0,0,0,0,0,0,0];for(s=
0;s<q;s++)k[s]=s;1<q&&this.Jj[0]>this.Jj[1]&&(y=this.Jj[0],this.Jj[0]=this.Jj[1],this.Jj[1]=y,s=k[0],k[0]=k[1],k[1]=s);g=0;l=-1;for(s=0;s<=q;s++)y=s<q?this.Jj[s]:1,y!=g&&(d=this.Yx(),m.Bi(g,y,d),-1!=l&&(g=k[l],d.get().fd(r[g])),s!=q&&(g=k[s],d.get().wd(r[g])),g=y,this.au.push(this.mu(d.get()))),l=s;return f}}throw a.g.xa();}return!1};c.prototype.Sw=function(b,c,d){c.copyTo(this.of);if(1!=this.bn.length)throw a.g.xa();this.la=b;var f=this.bn[0];if(d||f.ri.ps(c.A(),b,!0))if(f.ri.F()==a.j.Line){b=f.ri;
var g=b.Hd(c.A(),!1);this.mp[0]=g;var l=f.jy;d=1;0==g?(l=f.ky,d=f.dz):1==g&&(l=f.iy,d=f.cz);f=new a.b;0==l?(l=new a.b,b.Lb(g,l),g=c.A(),c=1/(d+1),a.vi.BD(l,g,c,f)):0<l?(f=new a.b,b.Lb(g,f)):f=c.A();d=0;g=-1;for(l=0;1>=l;l++){c=1>l?this.mp[l]:1;if(c!=d){var k=this.Yx();b.Bi(d,c,k);-1!=g&&k.get().fd(f);1!=l&&k.get().wd(f);d=c;this.hr.push(this.mu(k.get()))}g=l}this.of.jc(f)}else throw a.g.xa();};return c}();a.gA=c})(A||(A={}));(function(a){var b=function(){function b(c){this.Oq=this.zj=this.jb=null;
this.zk=this.Fe=this.Hc=this.ze=this.Sg=this.Ra=0;this.bb=null;this.zl=!1;this.ze=-1;this.Sg=this.Hc=0;this.Ra=-1;this.bb=c;this.Fe=this.bq(this.Sg);this.zl=!1;this.zj=null;this.zk=-1;this.Oq=new a.b}b.Xn=function(c,d){if(0>d||d>=c.G())throw a.g.Vc();var f=new b(c),g=c.Dw(d);f.Hc=d-c.Fa(g);f.Sg=g+1;f.Ra=g;f.Fe=f.bq(f.Ra);f.zk=f.bb.Fa(f.Ra);return f};b.Un=function(c,d,f){if(0>d||d>=c.fa()||0>f)throw a.g.Vc();var g=c.wc(d)?0:1;if(f>=c.Ia(d)-g)throw a.g.Vc();c=new b(c);c.ze=-1;c.Hc=f;c.Ra=d;c.Sg=c.Hc+
1;c.Fe=c.bq(c.Sg);c.zk=c.bb.Fa(c.Ra);return c};b.prototype.wR=function(b){if(this.bb!=b.bb)throw a.g.ya();this.ze=b.ze;this.Hc=b.Hc;this.Ra=b.Ra;this.Sg=b.Sg;this.Fe=b.Fe;this.zl=b.zl;this.zk=b.zk;this.zj=null};b.prototype.ja=function(){this.ze!=this.Hc&&this.JA();if(this.zl)this.Hc=(this.Hc+1)%this.Fe;else{if(this.Hc==this.Fe)throw a.g.Vc();this.Hc++}return this.zj};b.prototype.oi=function(){if(this.zl)this.Hc=(this.Fe+this.Hc-1)%this.Fe;else{if(0==this.Hc)throw a.g.Vc();this.Hc--}this.Hc!=this.ze&&
this.JA();return this.zj};b.prototype.xR=function(){this.ze=-1;this.Hc=0};b.prototype.yR=function(){this.Hc=this.Fe;this.ze=-1};b.prototype.Tb=function(a,b){void 0===b&&(b=-1);if(0<=this.Ra&&this.Ra<this.bb.fa()){var c=this.tJ();if(a>=c&&a<this.bb.Ec(this.Ra)){this.ze=-1;this.Hc=a-c;return}}c=0<=b&&b<this.bb.fa()&&a>=this.bb.Fa(b)&&a<this.bb.Ec(b)?b:this.bb.Dw(a);this.Sg=c+1;this.Ra=c;this.ze=-1;this.Hc=a-this.bb.Fa(c);this.Fe=this.bq(c);this.zk=this.bb.Fa(this.Ra)};b.prototype.lb=function(){this.Ra=
this.Sg;if(this.Ra>=this.bb.fa())return!1;this.ze=-1;this.Hc=0;this.Fe=this.bq(this.Ra);this.zk=this.bb.Fa(this.Ra);this.Sg++;return!0};b.prototype.Lk=function(){this.Fe=this.Hc=this.ze=-1;this.Sg=0;this.zk=this.Ra=-1};b.prototype.uy=function(b){if(0>b)throw a.g.Vc();this.Sg=b;this.zk=this.Fe=this.Hc=this.ze=this.Ra=-1};b.prototype.bq=function(a){if(this.bb.tc())return 0;var b=1;this.bb.wc(a)&&(b=0);return this.bb.Ia(a)-b};b.prototype.lD=function(){return this.ze==this.Fe-1&&this.bb.wc(this.Ra)};
b.prototype.MR=function(){this.zl=!0};b.prototype.Kb=function(){return this.bb.kb.f[this.Ra]+this.ze};b.prototype.tJ=function(){return this.bb.Fa(this.Ra)};b.prototype.Cm=function(){return this.lD()?this.bb.Fa(this.Ra):this.Kb()+1};b.prototype.wl=function(){return 0==this.ze};b.prototype.Km=function(){return this.ze==this.Fe-1};b.prototype.Ma=function(){return this.Hc<this.Fe};b.prototype.Nw=function(){return 0<this.Hc};b.prototype.wm=function(){var a=new b(this.bb);a.ze=this.ze;a.Hc=this.Hc;a.Fe=
this.Fe;a.Ra=this.Ra;a.Sg=this.Sg;a.bb=this.bb;a.zl=this.zl;return a};b.prototype.JA=function(){if(0>this.Hc||this.Hc>=this.Fe)throw a.g.Vc();this.ze=this.Hc;var b=this.Kb();this.bb.lc();var c=this.bb.Ge,d=1;null!=c&&(d=c.read(b)&7);c=this.bb.description;switch(d){case 1:null==this.jb&&(this.jb=new a.zb);this.zj=this.jb;break;case 2:throw a.g.sa("internal error");case 4:throw a.g.xa();default:throw a.g.xa();}this.zj.Qf(c);d=this.Cm();this.bb.vc(b,this.Oq);this.zj.fd(this.Oq);this.bb.vc(d,this.Oq);
this.zj.wd(this.Oq);for(var f=1,g=c.Ba;f<g;f++)for(var k=c.Id(f),m=a.qa.Xa(k),q=0;q<m;q++){var r=this.bb.md(k,b,q);this.zj.Ly(k,q,r);r=this.bb.md(k,d,q);this.zj.By(k,q,r)}};b.prototype.XO=function(){return this.Ra==this.bb.fa()-1};return b}();a.FI=b})(A||(A={}));(function(a){var b=function(){function b(c){c instanceof a.U?(this.ZD=c,this.va=-1,this.Wh=1):(this.CP=c.slice(0),this.va=-1,this.Wh=c.length)}b.prototype.za=function(){return this.va};b.prototype.next=function(){return this.va<this.Wh-1?
(this.va++,null!=this.ZD?this.ZD:this.CP[this.va]):null};return b}();a.Qc=b})(A||(A={}));(function(a){var b=function(){return function(){this.next=null}}(),c=function(){function c(){this.Ap=this.iu=this.ju=this.wj=this.eh=0;this.aC=!1;this.eG=0;this.am=this.wf=this.Vk=this.hh=null;this.Mk=0;this.Jv=null;this.wj=this.eh=-1}c.prototype.uS=function(b,c,d){this.eh=b;this.wj=c;this.hh=this.Vk=null;this.Ap=0;this.Jv=d;null==this.am&&(this.am=a.J.Lh(384,0));this.hG()};c.prototype.ba=function(){return this.eh};
c.prototype.ca=function(){return this.wj};c.prototype.flush=function(){0<this.Mk&&(this.Jv.XB(this.am,this.Mk),this.Mk=0)};c.prototype.hG=function(){if(0<this.Ap){for(var a=0;a<this.wj;a++){for(var b=this.Vk[a];null!=b;){var c=b,b=b.next;c.next=null}this.Vk[a]=null}this.hh=null}this.ju=this.wj;this.iu=-1;this.Ap=0};c.prototype.fF=function(a){this.aC=a==c.Zu;for(a=this.ju;a<=this.iu;a++)this.UJ(),this.OJ(a),this.uM();this.hG()};c.prototype.yv=function(c,d,f,g){if(d!=g){var l=1;d>g&&(l=c,c=f,f=l,l=
d,d=g,g=l,l=-1);if(!(0>g||d>=this.wj)){0>c&&0>f?f=c=-1:c>=this.eh&&f>=this.eh&&(f=c=this.eh);var k=(f-c)/(g-d);g>this.wj&&(g=this.wj,f=k*(g-d)+c);0>d&&(c=k*(0-d)+c,d=0);var m=Math.max(this.eh+1,8388607);-8388607>c?(d=(0-c)/k+d,c=0):c>m&&(d=(this.eh-c)/k+d,c=this.eh);-8388607>f?g=(0-c)/k+d:f>m&&(g=(this.eh-c)/k+d);d=a.J.truncate(d);g=a.J.truncate(g);d!=g&&(f=new b,f.x=a.J.truncate(4294967296*c),f.y=d,f.H=g,f.oM=a.J.truncate(4294967296*k),f.dir=l,null==this.Vk&&(this.Vk=a.J.Lh(this.wj,null)),f.next=
this.Vk[f.y],this.Vk[f.y]=f,f.y<this.ju&&(this.ju=f.y),f.H>this.iu&&(this.iu=f.H),this.Ap++)}}};c.prototype.UJ=function(){if(null!=this.hh){for(var a=!1,b=null,c=this.hh;null!=c;)if(c.y++,c.y==c.H){var d=c,c=c.next;null!=b?b.next=c:this.hh=c;d.next=null}else c.x+=c.oM,null!=b&&b.x>c.x&&(a=!0),b=c,c=c.next;a&&(this.hh=this.dG(this.hh))}};c.prototype.OJ=function(a){if(!(a>=this.wj)){var b=this.Vk[a];if(null!=b){this.Vk[a]=null;b=this.dG(b);this.Ap-=this.eG;a=this.hh;for(var c=!0,d=b,f=null;null!=a&&
null!=d;)a.x>d.x?(c&&(this.hh=d),c=d.next,d.next=a,null!=f&&(f.next=d),f=d,d=c):(c=a.next,a.next=d,null!=f&&(f.next=a),f=a,a=c),c=!1;null==this.hh&&(this.hh=b)}}};c.Mz=function(a,b){return 0>a?0:a>b?b:a};c.prototype.uM=function(){if(null!=this.hh)for(var b=0,d=this.hh,f=a.J.truncate(a.J.FD(d.x)),g=d.next;null!=g;g=g.next)if(b=this.aC?b^1:b+g.dir,g.x>d.x){var k=a.J.truncate(a.J.FD(g.x));0!=b&&(d=c.Mz(f,this.eh),f=c.Mz(k,this.eh),f>d&&d<this.eh&&(this.am[this.Mk++]=d,this.am[this.Mk++]=f,this.am[this.Mk++]=
g.y,this.Mk==this.am.length&&(this.Jv.XB(this.am,this.Mk),this.Mk=0)));d=g;f=k}};c.prototype.dG=function(b){for(var d=0,f=b;null!=f;f=f.next)d++;this.eG=d;if(1==d)return b;null==this.wf?this.wf=a.J.Lh(Math.max(d,16),null):this.wf.length<d&&(this.wf=a.J.Lh(Math.max(d,2*this.wf.length),null));for(var g=0,f=b;null!=f;f=f.next)this.wf[g++]=f;2==d?this.wf[0].x>this.wf[1].x&&(b=this.wf[0],this.wf[0]=this.wf[1],this.wf[1]=b):c.oP(this.wf,d,function(a,b){return a==b?0:a.x<b.x?-1:a.x>b.x?1:0});b=this.wf[0];
this.wf[0]=null;f=b;for(g=1;g<d;g++)f.next=this.wf[g],f=this.wf[g],this.wf[g]=null;f.next=null;return b};c.oP=function(a,b,c){if(b==a.length)a.sort(c);else{var d=a.slice(0,0),f=a.slice(b);b=a.slice(0,b).sort(c);a.length=0;a.push.apply(a,d.concat(b).concat(f))}};c.Zu=0;c.rT=1;return c}();a.dv=c})(A||(A={}));(function(a){var b=function(){function b(){}b.prototype.Jh=function(a,b){var c=this.a.Sa(a,this.tp);this.yk==c&&(this.yk=this.ae.cb(this.yk));this.Ym==c&&(this.Ym=this.ae.cb(this.Ym));this.ae.Kc(this.Nx,
c);this.hj(a);if(b&&(c=this.a.sd(a),-1!=c&&this.a.Db(c)==a)){var d=this.a.Y(a);if(d!=a){var f=this.a.sd(d);if(f==c){this.a.Dh(c,d);return}d=this.a.Va(a);if(d!=a&&(f=this.a.sd(d),f==c)){this.a.Dh(c,d);return}}this.a.Dh(c,-1);this.a.Wi(c,-1)}};b.prototype.yA=function(){for(var b=!1,c=0,d=new a.b;;){c++;null==this.nh?(this.nh=new a.ha(0),this.Lq=new a.ha(0),this.je=new a.ha(0)):(this.nh.clear(!1),this.Lq.clear(!1),this.je.clear(!1));for(var f=this.Ym,g=0,k=!0;f!=this.yk;){var m=this.ae.getData(f),q=
new a.b;this.a.vc(m,q);k&&(this.a.vc(m,d),k=!1);var q=this.a.Va(m),r=this.a.Y(m);-559038737!=this.a.Sa(q,this.fg)&&(this.nh.add(q),this.a.mb(q,this.fg,-559038737),this.Lq.add(m),this.je.add(g++));-559038737!=this.a.Sa(r,this.fg)&&(this.nh.add(r),this.a.mb(r,this.fg,-559038737),this.Lq.add(m),this.je.add(g++));f=this.ae.cb(f)}if(2>this.nh.size)break;var s=this;this.je.yd(0,this.je.size,function(a,b){return s.lJ(a,b)});f=0;for(g=this.je.size;f<g;f++)k=this.je.get(f),k=this.nh.get(k),this.a.mb(k,this.fg,
f),q=new a.b,this.a.vc(k,q);q=this.yJ(d);f=0;for(g=this.je.size;f<g;f++)k=this.je.get(f),-1!=k&&(k=this.nh.get(k),this.a.mb(k,this.fg,-1));if(q)b=!0;else break}return b};b.prototype.yJ=function(a){for(var b=!1,c=!0;c;){var c=!1,d=0;-1==this.je.get(d)&&(d=this.fl(d));for(var f=this.fl(d),g=0,k=this.je.size;g<k&&-1!=d&&-1!=f&&d!=f;g++){var m=this.je.get(d),f=this.je.get(f),m=this.nh.get(m),f=this.nh.get(f),q=this.a.Y(m);this.a.ot(q,a)||(q=this.a.Va(m));var r=this.a.Y(f);this.a.ot(r,a)||(r=this.a.Va(f));
var s=this.ns(q,m),t=this.ns(r,f),v=s?this.a.Va(q):this.a.Y(q),u=t?this.a.Va(r):this.a.Y(r),w=!1;this.ho(q)?w=!0:this.ho(r)?w=!0:this.ho(m)?w=!0:this.ho(f)?w=!0:this.ho(v)?w=!0:this.ho(u)&&(w=!0);!w&&this.a.Bq(m,f)&&(w=!0,this.BA(s,t,q,m,r,f));!w&&this.a.Bq(v,u)&&(w=!0,this.BA(!s,!t,q,v,r,u));w&&(b=!0);c=c||w;d=this.fl(d);f=this.fl(d)}}if(!b){d=0;-1==this.je.get(d)&&(d=this.fl(d));f=this.fl(d);g=0;for(k=this.je.size;g<k&&-1!=d&&-1!=f&&d!=f;g++)m=this.je.get(d),f=this.je.get(f),m=this.nh.get(m),f=
this.nh.get(f),q=this.a.Y(m),this.a.ot(q,a)||(q=this.a.Va(m)),r=this.a.Y(f),this.a.ot(r,a)||(r=this.a.Va(f)),s=this.ns(q,m),t=this.ns(r,f),v=s?this.a.Va(q):this.a.Y(q),u=t?this.a.Va(r):this.a.Y(r),this.pJ(s,t,m,q,v,f,r,u)&&(b=!0),d=this.fl(d),f=this.fl(d)}return b};b.prototype.BJ=function(){this.a.Mb(this.V)==a.j.Polygon&&1==this.a.Dm(this.V)&&(new a.Of).CQ(this.Pt,this.a,this.V);var b=!1,c=!0;this.fg=this.tp=-1;var d=this.a.G(this.V),f=new a.ha(0);f.yb(d);for(var g=this.a.Wb(this.V);-1!=g;g=this.a.cc(g))for(var k=
this.a.Db(g),m=0,q=this.a.Ia(g);m<q;m++)f.add(k),k=this.a.Y(k);var r=this.a.dd.f,s=this.a.dd.Jc;this.a.xb.lc();var t=this.a.xb.Ca[0].f;f.yd(0,d,function(a,b){var c=r[s*a],d=r[s*b],e=t[2*c],c=t[2*c+1],f=t[2*d],d=t[2*d+1],e=c<d?-1:c>d?1:e<f?-1:e>f?1:0;0==e&&(e=r[s*a+3],d=r[s*b+3],e=e<d?-1:e==d?0:1);return e});this.tp=this.a.re();this.ae=new a.Zn;this.Nx=this.ae.jh(0);this.ae.$l(d);for(g=0;g<d;g++)k=f.get(g),m=this.ae.addElement(this.Nx,k),this.a.mb(k,this.tp,m);this.fg=this.a.re();this.yk=-1;for(this.sA()&&
(b=!0);c;){c=!1;d=0;f=!1;do{f=!1;this.Ym=-1;for(var q=0,g=new a.b,m=new a.b,u=this.ae.hc(this.Nx);-1!=u;)k=this.ae.getData(u),-1!=this.Ym?(this.a.vc(k,m),g.vb(m))?q++:(g.K(m),this.yk=u,0<q&&(k=this.yA())&&(f=!0,-1!=this.yk&&(k=this.ae.getData(this.yk),this.a.vc(k,g))),this.Ym=u=this.yk,q=0):(this.Ym=u,this.a.vc(this.ae.getData(u),g),q=0),-1!=u&&(u=this.ae.cb(u));this.yk=-1;0<q&&(k=this.yA())&&(f=!0);if(10<d++)throw a.g.xa();f&&this.sJ();this.sA()&&(f=!0);c=c||f&&!1;b=b||f}while(f)}this.a.cf(this.tp);
this.a.cf(this.fg);return b=a.zI.aa(this.a,this.V,this.ae,this.Pt)||b};b.prototype.ns=function(a,b){return this.a.Y(b)==a?!1:!0};b.prototype.pJ=function(a,b,c,d,f,g,k,m){if(d==k)return this.hj(c),this.hj(g),!1;var q=this.a.Sa(c,this.fg),r=this.a.Sa(f,this.fg),s=this.a.Sa(g,this.fg),t=this.a.Sa(m,this.fg);c=[0,0,0,0,0,0,0,0];var v=[0,0,0,0];c[0]=0;v[0]=q;c[1]=0;v[1]=r;c[2]=1;v[2]=s;c[3]=1;v[3]=t;for(q=1;4>q;q++){r=v[q];s=c[q];for(t=q-1;0<=t&&v[t]>r;)v[t+1]=v[t],c[t+1]=c[t],t--;v[t+1]=r;c[t+1]=s}v=
0;0!=c[0]&&(v|=1);0!=c[1]&&(v|=2);0!=c[2]&&(v|=4);0!=c[3]&&(v|=8);if(5!=v&&10!=v)return!1;a==b?a?(this.a.Tc(m,d),this.a.Uc(d,m),this.a.Tc(f,k),this.a.Uc(k,f)):(this.a.Uc(m,d),this.a.Tc(d,m),this.a.Uc(f,k),this.a.Tc(k,f)):a?(this.a.Uc(d,g),this.a.Tc(g,d),this.a.Uc(k,f),this.a.Tc(f,k)):(this.a.Tc(d,g),this.a.Uc(g,d),this.a.Tc(k,f),this.a.Uc(f,k));return!0};b.prototype.BA=function(a,b,c,d,f,g){this.oU?this.AJ():this.zJ(a,b,c,d,f,g)};b.prototype.AJ=function(){throw a.g.sa("not implemented.");};b.prototype.zJ=
function(a,b,c,d,f,g){if(a!=b)a?(this.a.Tc(c,f),this.a.Uc(f,c),this.a.Tc(g,d),this.a.Uc(d,g),this.qm(f,c),this.Jh(f,!0),this.a.Ui(f,!0),this.hj(c),this.qm(g,d),this.Jh(g,!0),this.a.Ui(g,!1)):(this.a.Tc(f,c),this.a.Uc(c,f),this.a.Tc(d,g),this.a.Uc(g,d),this.qm(f,c),this.Jh(f,!0),this.a.Ui(f,!1),this.hj(c),this.qm(g,d),this.Jh(g,!0),this.a.Ui(g,!0)),this.hj(d);else{var k=a?c:d,m=b?f:g;a=a?d:c;b=b?g:f;f=!1;this.a.Tc(k,m);this.a.Tc(m,k);this.a.Uc(a,b);this.a.Uc(b,a);for(g=b;g!=m;)c=this.a.Va(g),d=this.a.Y(g),
this.a.Uc(g,d),this.a.Tc(g,c),f=f||g==k,g=d;f||(c=this.a.Va(m),d=this.a.Y(m),this.a.Uc(m,d),this.a.Tc(m,c));this.qm(m,k);this.Jh(m,!0);this.a.Ui(m,!1);this.hj(k);this.qm(b,a);this.Jh(b,!0);this.a.Ui(b,!1);this.hj(a)}};b.prototype.sA=function(){for(var a=!1,b=this.a.Wb(this.V);-1!=b;){for(var c=this.a.Db(b),d=0,f=this.a.Ia(b);d<f&&1<f;){var g=this.a.Va(c),k=this.a.Y(c);this.a.Bq(g,k)?(a=!0,this.Jh(c,!1),this.a.vf(c,!0),this.Jh(k,!1),this.a.vf(k,!0),c=g,d=0,f=this.a.Ia(b)):(c=k,d++)}if(2>this.a.Ia(b)){a=
this.a.Db(b);d=0;for(f=this.a.Ia(b);d<f;d++)this.Jh(a,!1),a=this.a.Y(a);b=this.a.Br(b);a=!0}else b=this.a.cc(b)}return a};b.prototype.ho=function(a){for(var b=!1;;){var c=this.a.Y(a),d=this.a.Va(a);if(c==a)return this.Jh(a,!0),this.a.Ui(a,!1),!0;if(!this.a.Bq(c,d))break;b=!0;this.hj(d);this.hj(c);this.Jh(a,!0);this.a.Ui(a,!1);this.qm(c,d);this.Jh(c,!0);this.a.Ui(c,!0);if(c==d)break;a=d}return b};b.prototype.sJ=function(){for(var a=0,b=this.ae.hc(this.ae.Xd);-1!=b;b=this.ae.cb(b)){var c=this.ae.getData(b);
this.a.im(c,-1)}for(var d=0,f=this.a.Wb(this.V);-1!=f;)if(b=this.a.Db(f),-1==b||-1!=this.a.sd(b))c=f,f=this.a.cc(f),this.a.xu(c);else{this.a.im(b,f);for(var g=1,c=this.a.Y(b);c!=b;c=this.a.Y(c))this.a.im(c,f),g++;this.a.Ir(f,!1);this.a.hm(f,g);this.a.Wi(f,this.a.Va(b));d+=g;a++;f=this.a.cc(f)}for(b=this.ae.hc(this.ae.Xd);-1!=b;b=this.ae.cb(b))c=this.ae.getData(b),-1==this.a.sd(c)&&(f=this.a.aD(this.V,c,c,null),d+=this.a.Ia(f),a++);this.a.gm(this.V,a);this.a.Pk(this.V,d);a=0;for(d=this.a.ad;-1!=d;d=
this.a.we(d))a+=this.a.G(d);this.a.ZF(a)};b.prototype.fl=function(a){for(var b=0,c=this.je.size-1;b<c;b++)if(a=(a+1)%this.je.size,-1!=this.je.get(a))return a;return-1};b.prototype.qm=function(a,b){var c=this.a.Sa(b,this.tp),d=this.a.Sa(b,this.fg);this.a.Yy(a,b);this.a.mb(b,this.tp,c);this.a.mb(b,this.fg,d)};b.prototype.hj=function(a){var b=this.a.Sa(a,this.fg);-1!=b&&(this.je.set(b,-1),this.a.mb(a,this.fg,-1))};b.aa=function(a,c,d,f,g){var k=new b;k.a=a;k.V=c;k.xx=d;k.Pt=f;k.Ee=g;return k.BJ()};b.prototype.lJ=
function(b,c){var d=this.nh.get(b),f=new a.b;this.a.vc(d,f);var d=new a.b,g=this.nh.get(c);this.a.vc(g,d);if(f.vb(d))return 0;var k=this.Lq.get(b),g=new a.b;this.a.vc(k,g);var m=this.Lq.get(c),k=new a.b;this.a.vc(m,k);m=new a.b;m.qc(f,g);f=new a.b;f.qc(d,k);return a.b.aq(m,f)};return b}();a.nm=b})(A||(A={}));(function(a){(function(a){a[a.Local=0]="Local";a[a.Geographic=1]="Geographic";a[a.Projected=2]="Projected";a[a.Unknown=3]="Unknown"})(a.GI||(a.GI={}));(function(a){a[a.Integer32=0]="Integer32";
a[a.Integer64=1]="Integer64";a[a.FloatingPoint=2]="FloatingPoint"})(a.qI||(a.qI={}));var b=function(){function b(){this.eo="";this.mi=0;this.Sl=null}b.prototype.Rc=function(){return this.mi};b.prototype.wq=function(){var b=0.001;0!=this.mi?b=a.ks.RM(this.mi):null!=this.Sl&&(b=a.mA.SM(this.Sl));return b};b.prototype.Te=function(){if(0!=this.mi)return a.Ub.Rd(a.ks.cC(this.mi));if(null!=this.Sl)return a.mA.TM(this.Sl)};b.Bm=function(b){if(0!=b.mi){if(!0===a.ks.VO(b.mi))return 1;if(!0===a.ks.YO(b.mi))return 2}return 3};
b.create=function(c){if(0>=c)throw a.g.O("Invalid or unsupported wkid: "+c);var d=new b;d.mi=c;return d};b.ML=function(c){if(null==c||0==c.length)throw a.g.O("Cannot create SpatialReference from null or empty text.");var d=new b;d.Sl=c;return d};b.prototype.mc=function(a){return this==a?!0:null==a||this.constructor!=a.constructor||this.mi!=a.mi||0==this.mi&&this.Sl!==a.Sl?!1:!0};b.lN=function(b,c){var d=Math.PI/180,f=new a.da;a.nH.oN(b.A().x*d,b.A().y*d,c.A().x*d,c.A().y*d,f);return f.o};b.prototype.toString=
function(){return"[ tol: "+this.vq()+"; wkid: "+this.Rc()+"; wkt: "+this.Sl+"]"};b.prototype.ic=function(){if(""!==this.eo)return this.eo;var a=this.toString();if(Array.prototype.reduce)return this.eo="S"+a.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0);var b=0;if(0===a.length)return"";for(var c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return this.eo="S"+b};b.prototype.vq=function(){return this.wq()};b.iU=!0;b.DT=2147483645;b.ET=9007199254740990;return b}();a.Nf=
b})(A||(A={}));(function(a){function b(a,c){89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);var d=0.017453292519943*c;return[111319.49079327169*a,3189068.5*Math.log((1+Math.sin(d))/(1-Math.sin(d)))]}function c(a,b,d){a=57.29577951308232*(a/6378137);return d?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]}function d(b,c){var e=b.wm();if(b.F()===a.j.Point){var f=
c(e.lk(),e.mk());e.jc(f[0],f[1])}else if(b.F()===a.j.Envelope){var f=c(b.S.w,b.S.D,!0),g=c(b.S.C,b.S.H,!0);e.L(f[0],f[1],g[0],g[1])}else{f=new a.b;for(g=0;g<e.G();g++){e.A(g,f);var h=c(f.x,f.y,!0);f.na(h[0],h[1]);e.jc(g,f)}}return e}function e(a){return d(a,c)}function f(a){return d(a,b)}var g=function(){function b(){}b.Wr=function(b){var c=Math.PI/180,d=Math.sin(b.y*c),d=0.9933056200098026*(d/(1-0.006694379990197414*d*d)-6.111035746609262*Math.log((1-0.0818191908429643*d)/(1+0.0818191908429643*d)));
return a.b.Pa(6378137*b.x*c,3189068.5*d)};b.Vu=function(b,c,d,e){var f=1/298.257223563,g=Math.sin(d);d=Math.cos(d);var h=(1-f)*Math.tan(b);b=1/Math.sqrt(1+h*h);for(var l=h*b,k=Math.atan2(h,d),h=b*g*b*g,n=1-h,m=2.7233160610754688E11*n/4.040829998466145E13,q=1+m/16384*(4096+m*(-768+m*(320-175*m))),r=m/1024*(256+m*(-128+m*(74-47*m))),m=e/(6356752.31424518*q),s=2*Math.PI,t,u,z,w;1E-12<Math.abs(m-s);)z=Math.cos(2*k+m),t=Math.sin(m),u=Math.cos(m),w=r*t*(z+r/4*(u*(-1+2*z*z)-r/6*z*(-3+4*t*t)*(-3+4*z*z))),
s=m,m=e/(6356752.31424518*q)+w;e=l*t-b*u*d;e=Math.atan2(l*u+b*t*d,(1-f)*Math.sqrt(h+e*e));n=f/16*n*(4+f*(4-3*n));f=Math.atan2(t*g,b*u-l*t*d)-(1-n)*f*Math.sqrt(h)*(m+n*t*(z+n*u*(-1+2*z*z)));return a.b.Pa((c+f)/(Math.PI/180),e/(Math.PI/180))};b.bN=function(a,b,c,d){var e=1/298.257223563,f=d-b,g=Math.atan((1-e)*Math.tan(a)),h=Math.atan((1-e)*Math.tan(c)),l=Math.sin(g),g=Math.cos(g),k=Math.sin(h),h=Math.cos(h),n=f,m,q=1E3,r,s,t,v,u,z,w;do{t=Math.sin(n);v=Math.cos(n);s=Math.sqrt(h*t*h*t+(g*k-l*h*v)*(g*
k-l*h*v));if(0===s)return 0;v=l*k+g*h*v;u=Math.atan2(s,v);z=g*h*t/s;r=1-z*z;t=v-2*l*k/r;isNaN(t)&&(t=0);w=e/16*r*(4+e*(4-3*r));m=n;n=f+(1-w)*e*z*(u+w*s*(t+w*v*(-1+2*t*t)))}while(1E-12<Math.abs(n-m)&&0<--q);if(0===q)return l=d-b,{azimuth:Math.atan2(Math.sin(l)*Math.cos(c),Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(l)),geodesicDistance:6371009*Math.acos(Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos(d-b))};a=2.7233160610754688E11*r/4.040829998466145E13;b=a/1024*(256+a*(-128+
a*(74-47*a)));return{azimuth:Math.atan2(h*Math.sin(n),g*k-l*h*Math.cos(n)),kN:6356752.31424518*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(u-b*s*(t+b/4*(v*(-1+2*t*t)-b/6*t*(-3+4*s*s)*(-3+4*t*t)))),xU:Math.atan2(g*Math.sin(n),g*k*Math.cos(n)-l*h)}};b.nT=function(b){var c=b.hasAttribute(1),d=b.hasAttribute(2),e=[],f=b.fa(),g=null,h=null;c&&(g=b.oc(1));d&&(h=b.oc(2));for(var l=new a.b,k=0;k<f;k++){for(var n=b.Fa(k),m=b.Ia(k),q=0,r=0,s=NaN,t=NaN,u=NaN,z=NaN,w=b.wc(k),x=[],C=n;C<n+m;C++){b.A(C,l);var z=
u=NaN,y=[l.x,l.y];c&&(u=g.get(C),y.push(u));d&&(f=h.get(C),y.push(z));C==n&&w&&(q=l.x,r=l.y,s=u,t=z);x.push(y)}!w||q==l.x&&r==l.y&&(!c||isNaN(s)&&isNaN(u)||s==u)&&(!d||isNaN(t)&&isNaN(z)||t==z)||x.push(x[0].slice(0));e.push(x)}return e};b.ew=function(a,c){var d=b.nT(a),e=Math.PI/180;637.100877151506>c&&(c=637.100877151506);for(var f=[],g=0;g<d.length;g++){var h=d[g],l;f.push(l=[]);l.push([h[0][0],h[0][1]]);var k,n,m,q,r,s;k=h[0][0]*e;n=h[0][1]*e;for(r=0;r<h.length-1;r++)if(m=h[r+1][0]*e,q=h[r+1][1]*
e,k!==m||n!==q){q=b.bN(n,k,q,m);m=q.azimuth;q=q.kN;var t=q/c;if(1<t){for(s=1;s<=t-1;s++){var v=b.Vu(n,k,m,s*c);l.push([v.x,v.y])}s=b.Vu(n,k,m,(q+Math.floor(t-1)*c)/2);l.push([s.x,s.y])}n=b.Vu(n,k,m,q);l.push([n.x,n.y]);k=n.x*e;n=n.y*e}}return{mF:f}};b.jN=function(c){for(var d=[],e=0;e<c.length;e++){var f=c[e],f=b.ew(f,1E4);d.push(f)}c=[];for(var g,h,l=0;l<d.length;l++){for(var f=d[l],k=0,e=0;e<f.mF.length;e++){var n=f.mF[e];g=b.Wr(a.b.Pa(n[0][0],n[0][1]));h=b.Wr(a.b.Pa(n[n.length-1][0],n[n.length-
1][1]));var m=h.x*g.y-g.x*h.y,q;for(q=0;q<n.length-1;q++)g=b.Wr(a.b.Pa(n[q+1][0],n[q+1][1])),h=b.Wr(a.b.Pa(n[q][0],n[q][1])),m+=h.x*g.y-g.x*h.y;m/=4046.87;k+=m}c.push(4046.85642*(k/-2))}return c};return b}();a.oH=g;g=function(){function b(){}b.ny=function(a,c,d,e,f,g,h){b.AG[a.ic()]=c;0==isNaN(d)&&(b.CG[a.ic()]=d);0==isNaN(e)&&(b.hz[a.ic()]=e);0==isNaN(f)&&(b.lG[a.ic()]=f);b.EG[a.ic()]=g;null!==h&&(b.GG[a.ic()]=h)};b.wu=function(a,c,d){b.IG[a.ic()+"-"+c.ic()]=d};b.Fm=function(c){c=b.AG[c.ic()];if(void 0==
c)throw a.g.qe();return c};b.IC=function(c){c=b.CG[c.ic()];if(void 0==c)throw a.g.qe();return c};b.et=function(c){c=b.hz[c.ic()];if(void 0==c)throw a.g.qe();return c};b.Ss=function(c){c=b.lG[c.ic()];if(void 0==c)throw a.g.qe();return c};b.Gm=function(c){c=b.GG[c.ic()];if(void 0==c)throw a.g.qe();return a.i.Pa(c[0],c[1],c[2],c[3])};b.Oo=function(c){c=b.EG[c.ic()];if(void 0==c)throw a.g.qe();return c};b.Wl=function(c,d,e){if(d.mc(e))return c;var f=b.IG[d.ic()+"-"+e.ic()];if(void 0!==f)return f(c,d,
e);throw a.g.qe();};b.su=function(){throw a.g.qe();};b.pN=function(){throw a.g.qe();};b.XQ=function(){throw a.g.qe();};b.SN=function(){throw a.g.qe();};b.oR=function(){var b=a.Nf.create(102100),c=a.Nf.create(3857),d=a.Nf.create(4326);a.Za.ny(b,d,NaN,NaN,NaN,!1,null);a.Za.ny(d,d,1,0.0033528106647474805,6378137,!0,[-180,-90,180,90]);a.Za.ny(c,d,NaN,NaN,NaN,!1,null);a.Za.wu(b,d,e);a.Za.wu(d,b,f);a.Za.wu(c,d,e);a.Za.wu(d,c,f)};b.AG=[];b.CG=[];b.hz=[];b.lG=[];b.EG=[];b.GG=[];b.IG=[];return b}();a.Za=g})(A||
(A={}));A.Za.oR();(function(a){var b=function(){function b(a){this.f=null;this.qg=-1;this.Yc=this.size=this.Xe=0;this.Jc=a}b.prototype.Kc=function(a){a<this.Xe?(this.f[a*this.Jc]=this.qg,this.qg=a):this.Xe--;this.size--};b.prototype.P=function(a,b){return this.f[a*this.Jc+b]};b.prototype.N=function(a,b,c){this.f[a*this.Jc+b]=c};b.prototype.ce=function(){var b=this.qg;if(-1==b){if(this.Xe==this.Yc){b=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.Yc)throw a.g.Vc();
this.Hm(b)}b=this.Xe;this.Xe++}else this.qg=this.f[b*this.Jc];this.size++;for(var c=b*this.Jc+this.Jc,d=b*this.Jc;d<c;d++)this.f[d]=-1;return b};b.prototype.Qj=function(b){var c=this.qg;if(-1==c){if(this.Xe==this.Yc){c=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Yc)throw a.g.Vc();this.Hm(c)}c=this.Xe;this.Xe++}else this.qg=this.f[c*this.Jc];this.size++;for(var d=c*this.Jc,f=this.Jc,g=0;g<f;g++)this.f[d+g]=b[g];return c};b.prototype.Nh=function(a){this.qg=-1;
this.size=this.Xe=0;a&&(this.f=null,this.Yc=0)};b.prototype.ee=function(a){a>this.Yc&&this.Hm(a)};b.prototype.Ou=function(a,b,c){var d=this.f[this.Jc*b+c];this.f[this.Jc*b+c]=this.f[this.Jc*a+c];this.f[this.Jc*a+c]=d};b.Zk=function(){return-2};b.mm=function(){return-3};b.Yw=function(a){return 0<=a};b.prototype.Hm=function(a){null==this.f&&(this.f=[]);this.Yc=a};return b}();a.Gc=b;b=function(){function b(a){this.f=new Int32Array(0);this.qg=-1;this.Yc=this.size=this.Xe=0;this.Jc=a}b.prototype.Kc=function(a){a<
this.Xe?(this.f[a*this.Jc]=this.qg,this.qg=a):this.Xe--;this.size--};b.prototype.P=function(a,b){return this.f[a*this.Jc+b]};b.prototype.N=function(a,b,c){this.f[a*this.Jc+b]=c};b.prototype.ce=function(){var b=this.qg;if(-1==b){if(this.Xe==this.Yc){b=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.Yc)throw a.g.Vc();this.Hm(b)}b=this.Xe;this.Xe++}else this.qg=this.f[b*this.Jc];this.size++;for(var c=b*this.Jc;c<b*this.Jc+this.Jc;c++)this.f[c]=-1;return b};b.prototype.Qj=
function(b){var c=this.qg;if(-1==c){if(this.Xe==this.Yc){c=0!=this.Yc?a.J.truncate(3*(this.Yc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Yc)throw a.g.Vc();this.Hm(c)}c=this.Xe;this.Xe++}else this.qg=this.f[c*this.Jc];this.size++;for(var d=c*this.Jc,f=0;f<b.length;f++)this.f[d+f]=b[f];return c};b.prototype.Nh=function(a){this.qg=-1;this.size=this.Xe=0;a&&(this.f=null,this.Yc=0)};b.prototype.ee=function(a){a>this.Yc&&this.Hm(a)};b.prototype.Ou=function(a,b,c){var d=this.f[this.Jc*b+c];this.f[this.Jc*
b+c]=this.f[this.Jc*a+c];this.f[this.Jc*a+c]=d};b.Zk=function(){return-2};b.mm=function(){return-3};b.Yw=function(a){return 0<=a};b.prototype.Hm=function(a){null==this.f&&(this.f=new Int32Array(0));var b=new Int32Array(this.Jc*a);b.set(this.f,0);this.f=b;this.Yc=a};return b}();a.HI=b;!0===a.ah.Sk&&(a.Gc=a.HI)})(A||(A={}));(function(a){var b;(function(a){a[a.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";a[a.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";a[a.enumInputModeSimplifyWinding=
5]="enumInputModeSimplifyWinding";a[a.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon"})(b||(b={}));var c=function(){function b(c){this.ne=c;this.Zg=NaN;this.LD=new a.Ag;this.MD=new a.Ag;this.zq=new a.Od;this.Aq=new a.Od}b.prototype.compare=function(a,b,c){a=a.ea(c);this.ne.hy(b,this.LD);this.ne.hy(a,this.MD);b=this.LD.get();a=this.MD.get();this.zq.L(b.oa,b.ma);this.Aq.L(a.oa,a.ma);if(this.zq.wa<this.Aq.ra)return-1;if(this.zq.ra>this.Aq.wa)return 1;c=b.ka==b.ia;var d=a.ka==a.ia;if(c||
d){if(c&&d)return 0;if(b.ka==a.ka&&b.oa==a.oa)return c?1:-1;if(b.ia==a.ia&&b.ma==a.ma)return c?-1:1}c=b.xe(this.Zg,this.zq.ra);d=a.xe(this.Zg,this.Aq.ra);c==d&&(c=Math.min(b.ia,a.ia),d=0.5*(c+this.Zg),d==this.Zg&&(d=c),c=b.xe(d,this.zq.ra),d=a.xe(d,this.Aq.ra));return c<d?-1:c>d?1:0};b.prototype.$F=function(a){this.Zg=a};return b}(),d=function(){function b(c){this.bb=c;this.uE=new a.Ag;this.of=new a.b;this.wx=new a.Od}b.prototype.dS=function(a){this.of.K(a)};b.prototype.compare=function(a,b){this.bb.hy(a.ea(b),
this.uE);var c=this.uE.get();this.wx.L(c.oa,c.ma);if(this.of.x<this.wx.ra)return-1;if(this.of.x>this.wx.wa)return 1;c=c.xe(this.of.y,this.of.x);return this.of.x<c?-1:this.of.x>c?1:0};return b}(),e=function(){function e(){this.OD=this.Vh=this.Yh=this.ox=this.Qm=this.ke=this.yc=this.Ig=this.Ud=null;this.tn=this.eg=-1;this.ND=!0;this.sx=!1;this.px=NaN;this.ei=new a.xd;this.DK=2147483647;this.CK=a.J.truncate(-2147483648);this.Kf=this.Nd=this.Ek=this.jp=this.Bl=this.ip=this.Yq=this.Be=-1;this.ua=0}e.prototype.Lv=
function(a){this.px=a};e.prototype.Ul=function(){null==this.Ud&&(this.Ud=new a.Gc(8));var b=this.Ud.ce();this.Ud.N(b,1,0);return b};e.prototype.jQ=function(){null==this.yc&&(this.yc=new a.Gc(8));var b=this.yc.ce();this.yc.N(b,2,0);this.yc.N(b,3,0);var c=this.yc.ce();this.yc.N(c,2,0);this.yc.N(c,3,0);this.GF(b,c);this.GF(c,b);return b};e.prototype.FE=function(){null==this.ke&&(this.ke=new a.Gc(8));var b=this.ke.ce();this.ke.N(b,2,0);return b};e.prototype.PR=function(a,b){this.Ud.N(a,7,b)};e.prototype.em=
function(a,b){this.Ud.N(a,2,b)};e.prototype.OR=function(a,b){this.Ud.N(a,1,b)};e.prototype.eS=function(a,b){this.Ud.N(a,3,b)};e.prototype.bS=function(a,b){this.Ud.N(a,4,b)};e.prototype.Jp=function(a,b){this.Ud.N(a,5,b)};e.prototype.tN=function(a){return this.Ud.P(a,5)};e.prototype.NR=function(a,b){this.Ud.N(a,6,b)};e.prototype.HJ=function(a,b){this.NR(b,a)};e.prototype.FF=function(a,b){this.yc.N(a,1,b)};e.prototype.GF=function(a,b){this.yc.N(a,4,b)};e.prototype.Rk=function(a,b){this.yc.N(a,5,b)};
e.prototype.Qk=function(a,b){this.yc.N(a,6,b)};e.prototype.UR=function(a,b){this.yc.N(a,2,b)};e.prototype.Cu=function(a,b){this.yc.N(a,3,b)};e.prototype.zC=function(a){return this.yc.P(a,3)};e.prototype.Hr=function(a,b){this.yc.N(a,7,b)};e.prototype.zG=function(a,b){if(-1!=this.ql(a))for(var c=b?-1:a,d=this.ql(a);-1!=d;d=this.yq(d))this.a.mb(this.Gi(d),this.jp,c)};e.prototype.Su=function(a,b){-1!=a&&(this.zG(a,b),this.zG(this.ta(a),b))};e.prototype.Fr=function(a,b){this.ke.N(a,1,b)};e.prototype.yg=
function(a,b){this.ke.N(a,2,b)};e.prototype.cm=function(a,b){this.ke.N(a,3,b);this.KR(a,this.sN(b));this.JR(b,a)};e.prototype.JR=function(a,b){this.ke.N(a,4,b)};e.prototype.KR=function(a,b){this.ke.N(a,5,b)};e.prototype.AF=function(a,b){this.ke.N(a,6,b)};e.prototype.yF=function(a,b){this.ke.N(a,7,b)};e.prototype.xF=function(a,b){this.Qm.write(a,b)};e.prototype.zF=function(a,b){this.ox.write(a,b)};e.prototype.aT=function(b){var c=0,d=0,e=this.pC(b),f=new a.b,g=new a.b,h=new a.b;this.rq(e,f);g.K(f);
var l=e;do this.pl(l,h),d+=a.b.Gb(g,h),this.Qe(this.ta(l))!=b&&(c+=0.5*(h.x-f.x-(g.x-f.x))*(h.y-f.y+(g.y-f.y))),g.K(h),l=this.Xb(l);while(l!=e);this.Qm.write(b,c);this.ox.write(b,d)};e.prototype.FQ=function(b){var e=new c(this),f=new a.bj;f.ee(a.J.truncate(this.ua/2));f.In(e);for(var g=new a.ha(0),h=this.Eg(),k=null,m=0,q=new a.b,r=this.Be;-1!=r;r=this.Bf(r)){m++;var s=this.te(r);if(-1!=s){g.df(0);if(!this.US(f,h,g,s)){this.A(r,q);e.$F(q.y);var t=s;do{var u=this.ub(t,h);-1!=u&&(f.ld(u,-1),this.Cb(t,
h,-2));t=this.Xb(this.ta(t))}while(s!=t);t=s;do u=this.ub(t,h),-1==u&&(u=f.addElement(t,-1),g.add(u)),t=this.Xb(this.ta(t));while(s!=t)}for(s=g.size-1;0<=s;s--)u=g.get(s),t=f.ea(u),this.Cb(this.ta(t),h,u),this.EQ(f,u,b)}else-1==this.lw(r)&&(null==k&&(k=new d(this)),this.A(r,q),k.dS(q),t=f.FR(k),s=this.Ek,-1!=t&&(u=f.ea(t),this.Qe(u)==this.Qe(this.ta(u))&&(u=this.BC(f,t)),-1!=u&&(s=this.Qe(u))),this.HJ(s,r))}this.kh(h)};e.prototype.EQ=function(a,c,d){var e=a.ea(c),f=this.Qe(e);if(-1==this.zm(f)){var g=
this.BC(a,c),h=this.ta(e),l=this.Qe(h);this.xo(f);this.xo(l);var k=this.zm(f),m=this.zm(l);-1==g&&-1==k&&(l==f?(this.cm(l,this.Ek),k=m=this.Ek):(-1==m&&(this.cm(l,this.Ek),m=this.Ek),this.cm(f,l),k=l));if(-1!=g){var q=this.Qe(g);-1==m&&(0>=this.xo(q)?(m=this.zm(q),this.cm(l,m)):(this.cm(l,q),m=q),l==f&&(k=m))}-1==k&&this.VS(f,l);0==d?this.$Q(a,c,e,g,f,l):d==b.enumInputModeSimplifyWinding?this.aR(a,c,e,h,f,l):d==b.enumInputModeSimplifyAlternate&&this.ZQ(e,g,f,l)}};e.prototype.$Q=function(a,b,c,d,e,
f){var g=this.pj(e);if(-1!=d){var h=this.pj(f),l=this.pj(this.Qe(d));d=g&h&l;l^=l&this.Gg(c);l|=d;0!=l&&(this.yg(f,h|l),this.yg(e,l|g),g=g||l)}for(b=a.cb(b);-1!=b;b=a.cb(b)){d=a.ea(b);c=this.Qe(this.ta(d));e=this.pj(c);f=this.Gg(d);h=this.Qe(d);l=this.pj(h);d=e&l&g;g^=g&f;g|=d;if(0==g)break;this.yg(c,e|g);this.yg(h,l|g)}};e.prototype.aR=function(b,c,d,e,f,g){if(f!=g){d=this.ub(d,this.Kf);d+=this.ub(e,this.Kf);e=0;var h=new a.ha(0),l=new a.ha(0);l.add(0);for(var k=b.hc(-1);k!=c;k=b.cb(k)){var m=b.ea(k),
q=this.ta(m),r=this.Qe(m),s=this.Qe(q);if(r!=s){m=this.ub(m,this.Kf);m+=this.ub(q,this.Kf);e+=m;q=!1;0!=h.size&&h.uc()==s&&(l.bf(),h.bf(),q=!0);if(-1==this.zm(s))throw a.g.xa();q&&this.zm(s)==r||(l.add(e),h.add(r))}}e+=d;0!=h.size&&h.uc()==g&&(l.bf(),h.bf());0!=e?0==l.uc()&&(b=this.a.ad,b=this.za(b),this.yg(f,b)):0!=l.uc()&&(b=this.a.ad,b=this.za(b),this.yg(f,b))}};e.prototype.ZQ=function(a,b,c,d){var e=this.za(this.a.ad);if(-1==b)this.yg(d,this.tn),a=this.ub(a,this.eg),0!=(a&1)?this.yg(c,e):this.yg(c,
this.tn);else{var f=this.pj(d);0==f&&(f=this.pj(this.Qe(b)),this.yg(d,f));a=this.ub(a,this.eg);0!=(a&1)?this.yg(c,f==e?this.tn:e):this.yg(c,f)}};e.prototype.US=function(a,b,c,d){var e=d,f=-1,g=-1,h=0;do{if(2==h)return!1;var l=this.ub(e,b);if(-1!=l){if(-1!=f)return!1;f=l}else{if(-1!=g)return!1;g=e}h++;e=this.Xb(this.ta(e))}while(d!=e);if(-1==g||-1==f)return!1;this.Cb(a.ea(f),b,-2);a.Vi(f,g);c.add(f);return!0};e.prototype.VS=function(a,b){var c=this.xo(a);if(0!=c){var d=this.xo(b);0<c&&0>d?this.cm(a,
b):0>c&&0<d?this.cm(a,b):(c=this.zm(b),-1!=c&&this.cm(a,c))}};e.prototype.QL=function(c,d){this.jp=this.a.re();for(var e=0,f=d.size;e<f;e++){var g=d.get(e),h=this.a.Sa(g,this.Bl),l=this.a.Vf(this.a.sd(g)),k=this.a.Mb(l);if(a.U.Lc(k)){var m=this.a.Y(g);if(-1!=m){var q=this.a.Sa(m,this.Bl);if(h!=q){var r=this.jQ(),s=this.ta(r),t=this.Ig.ce();this.Ig.N(t,0,g);this.Ig.N(t,1,-1);this.Hr(r,t);this.FF(r,h);t=this.te(h);-1==t?(this.em(h,r),this.Rk(r,s),this.Qk(s,r)):(h=this.ge(t),this.Rk(t,s),this.Qk(s,t),
this.Qk(h,r),this.Rk(r,h));this.FF(s,q);h=this.te(q);-1==h?(this.em(q,s),this.Qk(r,s),this.Rk(s,r)):(q=this.ge(h),this.Rk(h,r),this.Qk(r,h),this.Qk(q,s),this.Rk(s,q));l=this.za(l);0==c?(this.Cb(s,this.Nd,0),this.Cb(r,this.Nd,k==a.j.Polygon?l:0)):c==b.enumInputModeSimplifyWinding?(q=new a.b,this.a.A(g,q),g=new a.b,this.a.A(m,g),h=m=0,0>q.compare(g)?m=1:h=-1,this.Cb(s,this.Nd,0),this.Cb(r,this.Nd,0),this.Cb(r,this.Kf,m),this.Cb(s,this.Kf,h)):c==b.enumInputModeIsSimplePolygon?(this.Cb(s,this.Nd,this.tn),
this.Cb(r,this.Nd,k==a.j.Polygon?l:0)):c==b.enumInputModeSimplifyAlternate&&(this.Cb(s,this.Nd,0),this.Cb(r,this.Nd,0),this.Cb(r,this.eg,1),this.Cb(s,this.eg,1));k=k==a.j.Polygon?this.CK:0;this.Cu(r,l|k);this.Cu(s,l|k)}}}}};e.prototype.YP=function(a,b){var c=this.ql(b);if(-1!=c){var d=this.ql(a);this.Ig.N(c,1,d);this.Hr(a,c);this.Hr(b,-1)}var e=this.ta(a),f=this.ta(b),c=this.ql(f);-1!=c&&(d=this.ql(e),this.Ig.N(c,1,d),this.Hr(e,c),this.Hr(f,-1))};e.prototype.zS=function(c){function d(a,b){return f.kL(a,
b)}var e=new a.ha(0);e.yb(10);for(var f=this,g=this.Be;-1!=g;g=this.Bf(g)){e.clear(!1);var h=this.te(g);if(-1!=h){var l=h;do e.add(l),l=this.Xb(this.ta(l));while(l!=h);if(1<e.size){l=!0;if(2<e.size)e.yd(0,e.size,d),e.add(e.get(0));else if(0<this.jL(e.get(0),e.get(1))){var k=e.get(0);e.set(0,e.get(1));e.set(1,k)}else l=!1;for(var m=k=e.get(0),q=this.kf(m),r=this.ta(m),s=-1,t=1,u=e.size;t<u;t++){var w=e.get(t),x=this.ta(w),y=this.rj(x);if(y==q&&w!=m){if(0==c)s=this.zC(m)|this.zC(w),this.Cu(m,s),this.Cu(r,
s),this.Cb(m,this.Nd,this.ub(m,this.Nd)|this.ub(w,this.Nd)),this.Cb(r,this.Nd,this.ub(r,this.Nd)|this.ub(x,this.Nd));else if(-1!=this.Kf)s=this.ub(m,this.Kf)+this.ub(w,this.Kf),x=this.ub(r,this.Kf)+this.ub(x,this.Kf),this.Cb(m,this.Kf,s),this.Cb(r,this.Kf,x);else{if(c==b.enumInputModeIsSimplePolygon){this.ei=new a.xd(5,g,-1);return}-1!=this.eg&&(s=this.ub(m,this.eg)+this.ub(w,this.eg),x=this.ub(r,this.eg)+this.ub(x,this.eg),this.Cb(m,this.eg,s),this.Cb(r,this.eg,x))}this.YP(m,w);this.Vv(w);s=m;e.set(t,
-1);w==k&&(e.set(0,-1),k=-1)}else this.Su(s,!1),s=-1,m=w,q=y,r=x}this.Su(s,!1);s=-1;if(l){k=-1;t=0;for(u=e.size;t<u;t++)if(w=e.get(t),-1!=w)if(-1==k)m=k=w,q=this.kf(m),r=this.ta(m);else if(w!=m&&(x=this.ta(w),y=this.rj(x),this.Qk(r,w),this.Rk(w,r),m=w,q=y,r=x,c==b.enumInputModeIsSimplePolygon&&(this.ub(w,this.Nd)|this.ub(this.ge(w),this.Nd))==(this.tn|1))){this.ei=new a.xd(5,g,-1);return}this.em(g,k)}else{k=-1;t=0;for(u=e.size;t<u;t++)if(w=e.get(t),-1!=w){k=w;break}h!=k&&this.em(g,k)}}}}};e.prototype.zK=
function(){for(var b=-1,c=this.Eg(),d=this.Be;-1!=d;d=this.Bf(d)){var e=this.te(d);if(-1!=e){var f=e;do{if(1!=this.ub(f,c)){var g=this.FE();this.Fr(g,f);this.yF(g,b);-1!=b&&this.AF(b,g);var b=g,h=0,l=f;do h|=this.ub(l,this.Nd),this.UR(l,g),this.Cb(l,c,1),l=this.Xb(l);while(l!=f);this.yg(g,h)}f=this.Xb(this.ta(f))}while(f!=e)}}g=this.FE();this.Fr(g,-1);this.yF(g,b);-1!=b&&this.AF(b,g);this.Ek=g;this.Qm=a.rd.Zc(this.ke.size,NaN);this.ox=a.rd.Zc(this.ke.size,NaN);this.xF(this.Ek,Infinity);this.zF(this.Ek,
Infinity);this.kh(c)};e.prototype.DN=function(a,b,c){b=-1!=b?b:this.te(a);if(-1==b)return-1;for(a=b;;){if(1!=this.ub(b,c))return b;b=this.Xb(this.ta(b));if(b==a)return-1}};e.prototype.tR=function(){for(var a=this.Eg(),b=this.Be;-1!=b;b=this.Bf(b))for(var c=-1;;){var d=this.DN(b,c,a);if(-1==d)break;for(var c=this.Xb(this.ta(d)),e=d;;){var f=this.Xb(e),g=this.ge(e),h=this.ta(e);if(g==h){this.aM(e);if(c==e||c==h)c=-1;if(e==d||g==d){d=f;if(e==d||g==d)break;e=f;continue}}else this.Cb(e,a,1);e=f;if(e==
d)break}}};e.prototype.zy=function(c,d,e,f){this.xg();this.ND=f;this.a=c;this.ip=this.a.RB();c=new a.ha(0);c.yb(null!=e?this.a.G(e.get(0)):this.a.qd);var g=0,h=1,l=null!=e?e.get(0):this.a.ad;for(f=1;-1!=l;){this.a.EF(l,this.ip,h);for(var h=h<<1,k=this.a.Wb(l);-1!=k;k=this.a.cc(k))for(var m=this.a.Db(k),q=0,r=this.a.Ia(k);q<r;q++)c.add(m),m=this.a.Y(m);a.U.Lm(this.a.Mb(l))||(g+=this.a.fa(l));null!=e?(l=f<e.size?e.get(f):-1,f++):l=this.a.we(l)}this.tn=h;this.ua=c.size;this.a.Lu(c,this.ua);null==this.Ig&&
(this.Ig=new a.Gc(2),this.Ud=new a.Gc(8),this.yc=new a.Gc(8),this.ke=new a.Gc(8));this.Ig.ee(this.ua);this.Ud.ee(this.ua+10);this.yc.ee(2*this.ua+32);this.ke.ee(Math.max(32,g));this.Bl=this.a.re();e=new a.b;f=0;g=new a.b;e.Eh();for(h=0;h<=this.ua;h++)if(h<this.ua?(m=c.get(h),this.a.A(m,g)):g.Eh(),!e.vb(g)){if(f<h){m=this.Ul();for(r=q=-1;f<h;f++)r=c.get(f),this.a.mb(r,this.Bl,m),l=this.Ig.ce(),this.Ig.N(l,0,r),this.Ig.N(l,1,q),q=l,k=this.a.sd(r),l=this.a.Vf(k),l=this.za(l),this.OR(m,this.nd(m)|l);
this.PR(m,q);this.Jp(m,this.a.hb(r));-1!=this.Yq&&this.bS(this.Yq,m);this.eS(m,this.Yq);this.Yq=m;-1==this.Be&&(this.Be=m)}f=h;e.K(g)}this.Nd=this.Eg();d==b.enumInputModeSimplifyWinding&&(this.Kf=this.Eg());d==b.enumInputModeSimplifyAlternate&&(this.eg=this.Eg());this.QL(d,c);0==this.ei.yh&&(this.zS(d),0==this.ei.yh&&(isNaN(this.px)||this.YK()?(this.zK(),0==this.ei.yh&&(this.kh(this.Nd),this.Nd=-1,this.ND&&this.FQ(d))):this.sx=!0))};e.prototype.Vv=function(a){var b=this.Xb(a),c=this.ge(a),d=this.ta(a),
e=this.Xb(d),f=this.ge(d);b!=d&&(this.Qk(f,b),this.Rk(b,f));c!=d&&(this.Qk(c,e),this.Rk(e,c));c=this.rj(a);this.te(c)==a&&(e!=a?this.em(c,e):this.em(c,-1));e=this.rj(d);this.te(e)==d&&(b!=d?this.em(e,b):this.em(e,-1));this.yc.Kc(a);this.yc.Kc(d)};e.prototype.BC=function(a,b){for(var c=b;;)if(c=a.he(c),-1!=c){var d=a.ea(c);if(this.Qe(d)!=this.Qe(this.ta(d)))return d}else return-1};e.prototype.Kp=function(a,b,c){void 0===c&&(c=!0);this.zy(a,0,null,c)};e.prototype.tF=function(c,d){var e=new a.ha(0);
e.add(d);this.zy(c,b.enumInputModeSimplifyAlternate,e,c.Mb(d)==a.j.Polygon)};e.prototype.uF=function(c,d){var e=new a.ha(0);e.add(d);this.zy(c,b.enumInputModeSimplifyWinding,e,!0)};e.prototype.xg=function(){null!=this.a&&(-1!=this.ip&&(this.a.sR(this.ip),this.ip=-1),-1!=this.Bl&&(this.a.cf(this.Bl),this.Bl=-1),-1!=this.jp&&(this.a.cf(this.jp),this.jp=-1),-1!=this.Nd&&(this.kh(this.Nd),this.Nd=-1),-1!=this.Kf&&(this.kh(this.Kf),this.Kf=-1),-1!=this.eg&&(this.kh(this.eg),this.eg=-1),this.a=null,this.Ud.Nh(!0),
this.Ig.Nh(!0),this.Yq=this.Be=-1,null!=this.yc&&this.yc.Nh(!0),null!=this.Yh&&(this.Yh.length=0),null!=this.Vh&&(this.Vh.length=0),null!=this.OD&&(this.OD.length=0),null!=this.ke&&this.ke.Nh(!0),this.Ek=-1,this.Qm=null)};e.prototype.te=function(a){return this.Ud.P(a,2)};e.prototype.A=function(a,b){this.a.SC(this.tN(a),b)};e.prototype.nd=function(a){return this.Ud.P(a,1)};e.prototype.Bf=function(a){return this.Ud.P(a,4)};e.prototype.lw=function(a){return this.Ud.P(a,6)};e.prototype.ol=function(a){return this.Ud.P(a,
7)};e.prototype.yq=function(a){return this.Ig.P(a,1)};e.prototype.Gi=function(a){return this.Ig.P(a,0)};e.prototype.Sf=function(a,b){var c=this.Vh[b];return c.size<=a?-1:c.read(a)};e.prototype.fm=function(a,b,c){b=this.Vh[b];b.size<=a&&b.resize(this.Ud.size,-1);b.write(a,c)};e.prototype.to=function(){null==this.Vh&&(this.Vh=[]);for(var b=a.ha.Zc(this.Ud.Yc,-1),c=0,d=this.Vh.length;c<d;c++)if(null==this.Vh[c])return this.Vh[c]=b,c;this.Vh.push(b);return this.Vh.length-1};e.prototype.uo=function(a){this.Vh[a]=
null};e.prototype.rj=function(a){return this.yc.P(a,1)};e.prototype.kf=function(a){return this.rj(this.ta(a))};e.prototype.ta=function(a){return this.yc.P(a,4)};e.prototype.ge=function(a){return this.yc.P(a,5)};e.prototype.Xb=function(a){return this.yc.P(a,6)};e.prototype.Qe=function(a){return this.yc.P(a,2)};e.prototype.Re=function(a){return this.pj(this.yc.P(a,2))};e.prototype.ql=function(a){return this.yc.P(a,7)};e.prototype.rq=function(a,b){this.A(this.rj(a),b)};e.prototype.pl=function(a,b){this.A(this.kf(a),
b)};e.prototype.Gg=function(a){return this.yc.P(a,3)&this.DK};e.prototype.ub=function(a,b){var c=this.Yh[b];return c.size<=a?-1:c.read(a)};e.prototype.Cb=function(a,b,c){b=this.Yh[b];b.size<=a&&b.resize(this.yc.size,-1);b.write(a,c)};e.prototype.Eg=function(){null==this.Yh&&(this.Yh=[]);for(var b=a.ha.Zc(this.yc.Yc,-1),c=0,d=this.Yh.length;c<d;c++)if(null==this.Yh[c])return this.Yh[c]=b,c;this.Yh.push(b);return this.Yh.length-1};e.prototype.kh=function(a){this.Yh[a]=null};e.prototype.aM=function(a){var b=
this.Qe(a),c=this.Xb(a);c==this.ta(a)&&(c=this.Xb(c),c==a&&(c=-1));this.pC(b)==a&&this.Fr(b,c);c=this.Qm.read(b);isNaN(c)||(this.xF(b,NaN),this.zF(b,NaN));this.Su(a,!0);this.Vv(a)};e.prototype.bM=function(a){for(var b=0,c=a.size;b<c;b++){var d=a.get(b),e=this.Qe(this.ta(d));this.Fr(this.Qe(d),-1);this.Fr(e,-1);this.Su(d,!0);this.Vv(d)}};e.prototype.pC=function(a){return this.ke.P(a,1)};e.prototype.pj=function(a){return this.ke.P(a,2)};e.prototype.zm=function(a){return this.ke.P(a,3)};e.prototype.sN=
function(a){return this.ke.P(a,4)};e.prototype.xo=function(a){var b=this.Qm.read(a);isNaN(b)&&(this.aT(a),b=this.Qm.read(a));return b};e.prototype.za=function(a){return this.a.yC(a,this.ip)};e.prototype.se=function(a){return this.a.Sa(a,this.Bl)};e.prototype.FN=function(a){return this.a.Sa(a,this.jp)};e.prototype.EN=function(a,b){var c=this.te(a);if(-1==c)return-1;var d=c,e=-1,f=-1;do{if(this.kf(d)==b)return d;if(-1==e){e=this.te(b);if(-1==e)break;f=e}if(this.kf(f)==a)return this.ta(f);d=this.Xb(this.ta(d));
f=this.Xb(this.ta(f))}while(d!=c&&f!=e);return-1};e.prototype.hy=function(b,c){c.kq();var d=c.get(),e=new a.b;this.rq(b,e);d.fd(e);this.pl(b,e);d.wd(e)};e.prototype.kL=function(b,c){if(b==c)return 0;var d=new a.b;this.pl(b,d);var e=new a.b;this.pl(c,e);if(d.vb(e))return 0;var f=new a.b;this.rq(b,f);var g=new a.b;g.qc(d,f);d=new a.b;d.qc(e,f);return a.b.aq(g,d)};e.prototype.jL=function(b,c){if(b==c)return 0;var d=new a.b;this.pl(b,d);var e=new a.b;this.pl(c,e);if(d.vb(e))return 0;var f=new a.b;this.rq(b,
f);var g=new a.b;g.qc(d,f);d=new a.b;d.qc(e,f);return 0<=d.y&&0<g.y?a.b.aq(g,d):0};e.prototype.YK=function(){for(var b=a.vi.Sy(this.px),c=new a.b,d=new a.b,e=new a.b,f=new a.b,g=new a.b,h=this.Be;-1!=h;h=this.Bf(h)){var l=this.te(h);if(-1!=l){var k=l;this.rq(k,c);this.pl(k,d);g.qc(d,c);var m=g.Sp();do{var q=k,k=this.Xb(this.ta(k));if(k!=q){this.pl(k,e);f.qc(e,c);var q=f.Sp(),r=f.Ai(g),r=r*r/(q*m);if(Math.min(q,m)*r<=b)return!1;g.K(f);m=q;d.K(e)}}while(k!=l)}}return!0};return e}();a.fs=e})(A||(A={}));
(function(a){var b=function(){function b(){this.h=null;this.TD=new a.b;this.UD=new a.b;this.Qg=null;this.Fq=!1;this.Zm=-1}b.prototype.Ue=function(a){return a<this.Qg.length?this.Qg[a]:!1};b.prototype.ym=function(b,c,d,f){var g=a.U.ve(this.h.a.Mb(d));if(2==a.U.ve(this.h.a.Mb(c))&&1==g)this.VL(b,c,d,f);else throw a.g.xa();};b.prototype.Kp=function(b,c){null==this.h&&(this.h=new a.fs);this.h.Kp(b,c)};b.prototype.Lp=function(b,c,d){a.aj.aa(b,c,d,!0);for(c=b.ad;-1!=c;c=b.we(c))b.Mb(c)==a.j.Polygon&&a.nm.aa(b,
c,-1,this.Fq,d);this.Kp(b,d)};b.prototype.EB=function(b,c,d,f,g){var k=this.h.a;if(k.Mb(b)==a.j.Polygon)for(b=k.Wb(b);-1!=b;b=k.cc(b)){var m=k.Db(b);this.h.se(m);this.h.se(k.Y(m));var q=this.h.FN(m);if(-1!=q){var r=this.h.ub(q,d);if(1!=r&&2!=r)if(this.Ue(this.h.Re(q))){this.h.Cb(q,d,1);var r=k.Cf(c,-1),s=q,t=this.h.se(m),u=1;do{var w=this.tl(m,g);k.zi(r,w);-1!=f&&this.h.fm(t,f,1);this.h.Cb(s,d,1);var s=this.h.Xb(s),x;do w=1==u?k.Y(m):k.Va(m),x=-1!=w?this.h.se(w):-1;while(x==t);var y=this.h.rj(s);
if(y!=x){do w=1==u?k.Va(m):k.Y(m),x=-1!=w?this.h.se(w):-1;while(x==t);y!=x?(x=y,w=this.h.Gi(this.h.ol(x))):u=-u}t=x;m=w}while(s!=q);k.Hn(r,!0)}else this.h.Cb(q,d,2)}}};b.prototype.UB=function(){for(var b=this.h.Eg(),c=new a.ha(0),d=this.h.Be;-1!=d;d=this.h.Bf(d)){var f=this.h.te(d),g=f;if(-1!=f){do{if(1!=this.h.ub(g,b)){var k=this.h.ta(g);this.h.Cb(k,b,1);this.h.Cb(g,b,1);this.Ue(this.h.Re(g))&&this.Ue(this.h.Re(k))&&c.add(g)}g=this.h.Xb(this.h.ta(g))}while(g!=f)}}this.h.kh(b);this.h.bM(c)};b.prototype.tl=
function(a,b){return-1==b?a:this.jO(a,b)};b.prototype.jO=function(a,b){var c=this.h.a,d,f,g=this.h.ol(this.h.se(a));do{d=this.h.Gi(g);f=c.Vf(c.sd(d));if(f==b)return d;g=this.h.yq(g)}while(-1!=g);return a};b.prototype.Vp=function(b,c,d){this.UB();var f=this.h.a,g=f.jg(a.j.Polygon),k=this.h.Eg();this.pG(b,c,g,d,k,-1);this.h.kh(k);a.nm.aa(f,g,1,this.Fq,null);return g};b.prototype.pG=function(a,b,c,d,f,g){this.EB(a,c,f,g,d);-1!=b&&this.EB(b,c,f,g,d);a=this.h.a;for(b=this.h.Be;-1!=b;b=this.h.Bf(b)){var k=
this.h.te(b);if(-1!=k){var m=k;do{var q=this.h.ub(m,f);if(1!=q&&2!=q)if(this.Ue(this.h.Re(m))){var q=a.Cf(c,-1),r=m;do{var s=this.h.ql(r);-1!=s?s=this.h.Gi(s):(s=this.h.Gi(this.h.ql(this.h.ta(r))),s=this.h.a.Y(s));s=this.tl(s,d);a.zi(q,s);this.h.Cb(r,f,1);-1!=g&&(s=this.h.se(s),this.h.fm(s,g,1));r=this.h.Xb(r)}while(r!=m);a.Hn(q,!0)}else this.h.Cb(m,f,2);m=this.h.Xb(this.h.ta(m))}while(m!=k)}}};b.prototype.QS=function(b,c,d){var f=this.h.a,g=f.jg(a.j.Polygon),k=f.jg(a.j.Polyline),m=f.jg(a.j.MultiPoint);
this.UB();var q=-1,r=this.h.Eg(),s=this.h.to();this.pG(b,c,g,d,r,s);for(b=this.h.Be;-1!=b;b=this.h.Bf(b))if(c=this.h.te(b),-1!=c){var t=c;do{var u=this.h.ub(t,r),w=this.h.ub(this.h.ta(t),r),u=u|w;if(2==u)if(u=this.h.Gg(t),this.Ue(u)){var x=f.Cf(k,-1),y=t,u=this.zu(b,f),u=this.tl(u,d);f.zi(x,u);this.h.fm(b,s,1);do{u=this.h.kf(y);w=this.zu(u,f);w=this.tl(w,d);f.zi(x,w);this.h.Cb(y,r,1);this.h.Cb(this.h.ta(y),r,1);this.h.fm(u,s,1);y=this.h.Xb(y);u=this.h.ub(y,r);w=this.h.ub(this.h.ta(y),r);u|=w;if(2!=
u)break;u=this.h.Gg(y);if(!this.Ue(u)){this.h.Cb(y,r,1);this.h.Cb(this.h.ta(y),r,1);break}}while(y!=t)}else this.h.Cb(t,r,1),this.h.Cb(this.h.ta(t),r,1);t=this.h.Xb(this.h.ta(t))}while(t!=c)}for(b=this.h.Be;-1!=b;b=this.h.Bf(b))u=this.h.Sf(b,s),1!=u&&(u=this.h.nd(b),this.Ue(u)&&(-1==q&&(q=f.Cf(m,-1)),c=this.h.ol(b),-1!=c&&(c=this.h.Gi(c),u=this.tl(c,d),f.zi(q,u))));this.h.uo(s);this.h.kh(r);a.nm.aa(f,g,1,this.Fq,null);d=[];d[0]=m;d[1]=k;d[2]=g;return d};b.prototype.zu=function(a,b){for(var c=-1,d=
this.h.ol(a);-1!=d;d=this.h.yq(d)){var f=this.h.Gi(d);-1==c&&(c=f);var g=this.h.za(b.Vf(b.sd(f)));if(this.Ue(g)){c=f;break}}return c};b.prototype.ey=function(b,c){for(var d=this.h.rj(c),f=this.h.kf(c),g=0,k=0,m=this.h.ol(d);-1!=m;m=this.h.yq(m)){var q=this.h.Gi(m),r=b.sd(q),s=this.h.za(b.Vf(r)),t=b.Y(q),u=b.Va(q),r=b.Db(r);r==q&&(this.Zm=c);-1!=t&&this.h.se(t)==f?(g++,this.Ue(s)&&(r==t&&(this.Zm=this.h.Xb(c)),k++)):-1!=u&&this.h.se(u)==f&&(g--,this.Ue(s)&&(r==u&&(this.Zm=this.h.Xb(c)),k--))}this.h.A(d,
this.TD);this.h.A(f,this.UD);d=a.b.Gb(this.TD,this.UD);return(0!=k?k:g)*d};b.prototype.zo=function(a){return this.h.Gg(a)|this.h.Re(a)|this.h.Re(this.h.ta(a))};b.prototype.sG=function(a){for(var b=this.h.ta(this.h.ge(a)),c=-1;b!=a;){if(this.Ue(this.zo(b))){if(-1!=c)return-1;c=b}b=this.h.ta(this.h.ge(b))}return-1!=c?this.h.ta(c):-1};b.prototype.tG=function(a){for(var b=this.h.ta(this.h.Xb(a)),c=-1;b!=a;){if(this.Ue(this.zo(b))){if(-1!=c)return-1;c=b}b=this.h.ta(this.h.Xb(b))}return-1!=c?this.h.ta(c):
-1};b.prototype.jF=function(b,c,d,f,g){var k=this.h.a,m=b,q=this.h.ta(m);this.h.Cb(m,d,1);this.h.Cb(q,d,1);var r=this.ey(k,m);this.Zm=-1;for(var s=m,t=-1,u=!1,w=1;;){var x=this.h.ge(m);if(x==q)break;q=this.h.Xb(q);if(this.h.ta(x)!=q)if(m=this.sG(m),-1==m)break;else u=!0,q=this.h.ta(m);else m=x;if(m==b){t=b;break}x=this.zo(m);if(!this.Ue(x))break;this.h.Cb(m,d,1);this.h.Cb(q,d,1);s=m;r+=this.ey(k,m);w++}if(-1==t){m=b;q=this.h.ta(m);for(t=m;;){b=this.h.Xb(m);if(b==q)break;q=this.h.ge(q);if(this.h.ta(b)!=
q)if(m=this.tG(m),-1==m){u=!0;break}else q=this.h.ta(m);else m=b;x=this.zo(m);if(!this.Ue(x))break;this.h.Cb(m,d,1);this.h.Cb(q,d,1);t=m;r+=this.ey(k,m);w++}}else if(-1!=this.Zm&&(s=this.Zm,t=this.h.ge(this.Zm),this.h.ta(t)!=this.h.Xb(this.h.ta(s))&&(t=this.sG(s),-1==t)))throw a.g.xa();0<=r||(m=t,t=s,t=this.h.ta(t),s=this.h.ta(m));d=k.Cf(c,-1);m=s;s=this.h.rj(s);u=this.h.kf(t)==s&&u;r=this.zu(s,k);r=this.tl(r,g);k.zi(d,r);-1!=f&&this.h.fm(s,f,1);s=0;for(w=u?a.J.truncate((w+1)/2):-1;;){b=this.h.kf(m);
r=this.zu(b,k);r=this.tl(r,g);k.zi(d,r);s++;-1!=f&&this.h.fm(b,f,1);u&&s==w&&(d=k.Cf(c,-1),k.zi(d,r));if(m==t)break;b=this.h.Xb(m);if(this.h.ge(this.h.ta(m))!=this.h.ta(b)){if(m=this.tG(m),-1==m)throw a.g.xa();}else m=b}};b.prototype.Wp=function(b){for(var c=this.h.a.jg(a.j.Polyline),d=this.h.Eg(),f=this.h.Be;-1!=f;f=this.h.Bf(f)){var g=this.h.te(f),k=g;do 1!=this.h.ub(k,d)&&this.Ue(this.zo(k))&&this.jF(k,c,d,-1,b),k=this.h.Xb(this.h.ta(k));while(k!=g)}this.h.kh(d);return c};b.prototype.RS=function(b){for(var c=
this.h.a,d=c.jg(a.j.Polyline),f=c.jg(a.j.MultiPoint),g=this.h.Eg(),k=this.h.to(),m=-1,q=this.h.Be;-1!=q;q=this.h.Bf(q)){var r=this.h.te(q),s=r;do{var t=this.h.ub(s,g);1!=t&&(t=this.zo(s),this.Ue(t)&&this.jF(s,d,g,k,b));s=this.h.Xb(this.h.ta(s))}while(s!=r)}for(q=this.h.Be;-1!=q;q=this.h.Bf(q))t=this.h.Sf(q,k),1!=t&&(t=this.h.nd(q),this.Ue(t)&&(-1==m&&(m=c.Cf(f,-1)),r=this.h.ol(q),-1!=r&&(r=this.h.Gi(r),r=this.tl(r,b),c.zi(m,r))));this.h.kh(g);this.h.uo(k);b=[];b[0]=f;b[1]=d;return b};b.prototype.Qn=
function(){for(var b=this.h.a,c=b.jg(a.j.MultiPoint),d=b.Cf(c,-1),f=this.h.Be;-1!=f;f=this.h.Bf(f))if(this.Ue(this.h.nd(f))){for(var g=-1,k=this.h.ol(f);-1!=k;k=this.h.yq(k)){var m=this.h.Gi(k);-1==g&&(g=m);var q=this.h.za(b.Vf(b.sd(m)));if(this.Ue(q)){g=m;break}}b.zi(d,g)}return c};b.prototype.Jm=function(a){this.Qg=[];for(var b=0;b<a;b++)this.Qg[b]=!1};b.qF=function(b,c,d,f){var g=b.Qa(),k=Array(1E3);a.J.Os(k,null);var m=a.J.Lh(1E3,0),q=b.G(),r=!0,s=2==c.gb();if(1!=c.gb()&&2!=c.gb())throw a.g.xa();
for(var t=0;t<q;){var u=a.J.truncate(b.eR(k,t)-t);s?a.hd.nG(c,k,u,d,m):a.hd.oG(c,k,u,d,m);for(var w=0,x=0;x<u;x++){var y=0==m[x];f||(y=!y);y&&(r&&(r=!1,g.Qd(b,0,t)),w!=x&&g.Qd(b,t+w,t+x),w=x+1)}r||w==u||g.Qd(b,t+w,t+u);t+=u}return r?b:g};b.jD=function(c,d,f){return c instanceof a.pe?b.qF(c,d,f,!0):d instanceof a.Wa?c.u()||d.u()?c.Qa():a.aj.HE(f,c,d)?a.aj.fL(c,d):c.Qa():b.mG(c,d,f,!0)};b.lt=function(c,d,f,g){var k=new a.i;c.s(k);var m=new a.i;d.s(m);var q=new a.i;q.L(k);q.Eb(m);f=a.Ja.Ad(f,q,!0);q=
new a.i;q.L(m);m=a.Ja.zs(f);q.R(m,m);if(!k.kc(q)){if(c.gb()<=d.gb())return b.Dc(b.pb(c.Qa()),c,"\x26");if(c.gb()>d.gb())return b.Dc(b.pb(d.Qa()),c,"\x26")}m=new b;k=new a.gd;q=k.Fb(b.pb(c));d=k.Fb(b.pb(d));m.Lp(k,f,g);g=m.lt(q,d);c=b.Dc(k.jf(g),c,"\x26");a.U.Lc(c.F())&&(c.hg(2,f),c.F()==a.j.Polygon&&c.hl());return c};b.mG=function(b,c,d,f){if(b.u())return b.Qa();if(c.u())return f?b.Qa():null;var g=[null],k=[0],m=2==c.gb();if(1!=c.gb()&&2!=c.gb())throw a.g.xa();g[0]=b.A();m?a.hd.nG(c,g,1,d,k):a.hd.oG(c,
g,1,d,k);c=0==k[0];f||(c=!c);return c?b.Qa():b};b.OT=function(c,d,f){return c instanceof a.pe?b.qF(c,d,f,!1):d instanceof a.Wa?c.u()?c.Qa():d.u()?c:a.aj.HE(f,c,d)?c.Qa():c:b.mG(c,d,f,!1)};b.prototype.ME=function(b,c,d,f,g){if(b.u())return b;var k=new a.gd;b=k.Fb(b);return this.Rj(k,b,c,d,f,g)};b.prototype.DQ=function(b,c,d,f,g,k){if(g&&b.Mb(c)!=a.j.MultiPoint){var m=new a.aA;m.JS(b,d);m.og?(a.aj.aa(b,d,k,!0),g=!1):this.h.Lv(d)}else a.aj.aa(b,d,k,!0),g=!1;f&&b.Mb(c)!=a.j.MultiPoint?this.h.uF(b,c):
this.h.tF(b,c);if(this.h.sx)return this.h.xg(),this.h=null,this.Rj(b,c,d,f,!1,k);this.h.Lv(NaN);k=this.h.za(c);this.Jm(k+1);this.Qg[k]=!0;if(b.Mb(c)==a.j.Polygon||f&&b.Mb(c)!=a.j.MultiPoint)return b.Np(c,0),c=this.Vp(c,-1,-1),b=b.jf(c),b.Np(0),g?b.hg(1,0):(b.hg(2,d),b.hl()),b;if(b.Mb(c)==a.j.Polyline)return c=this.Wp(-1),b=b.jf(c),g||b.hg(2,d),b;if(b.Mb(c)==a.j.MultiPoint)return c=this.Qn(),b=b.jf(c),g||b.hg(2,d),b;throw a.g.xa();};b.prototype.Rj=function(b,c,d,f,g,k){this.h=new a.fs;try{return this.DQ(b,
c,d,f,g,k)}finally{this.h.xg()}};b.Rj=function(a,c,d,f,g){return(new b).ME(a,c,d,f,g)};b.prototype.CQ=function(b,c,d){this.Fq=b;this.h=new a.fs;b=c.Dm(d);var f=c.Mb(d);1!=b||f==a.j.MultiPoint?this.h.tF(c,d):this.h.uF(c,d);if(!this.h.sx)if(this.h.Lv(NaN),f=this.h.za(d),this.Jm(f+1),this.Qg[f]=!0,c.Mb(d)==a.j.Polygon||1==b&&c.Mb(d)!=a.j.MultiPoint)c.Np(d,0),b=this.Vp(d,-1,-1),c.Uy(b,d),c.ry(b);else if(c.Mb(d)==a.j.Polyline)b=this.Wp(-1),c.Uy(b,d),c.ry(b);else if(c.Mb(d)==a.j.MultiPoint)b=this.Qn(),
c.Uy(b,d),c.ry(b);else throw a.g.sa("internal error");};b.Qy=function(a,c,d,f){var g=new b;g.Fq=!0;return g.ME(a,c,!1,d,f)};b.prototype.ll=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),f=a.U.ve(this.h.a.Mb(c));if(d>f)return b;var g=this.h.za(b),k=this.h.za(c);this.Jm((g|k)+1);this.Qg[this.h.za(b)]=!0;if(2==d&&2==f)return this.Vp(b,c,-1);if(1==d&&2==f||1==d&&1==f)return this.Wp(-1);if(0==d)return this.Qn();throw a.g.xa();};b.prototype.TB=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),f=a.U.ve(this.h.a.Mb(c));
if(d>f)return b;if(d<f)return c;var g=this.h.za(b),k=this.h.za(c);this.Jm((g|k)+1);this.Qg[this.h.za(b)]=!0;this.Qg[this.h.za(c)]=!0;this.Qg[this.h.za(b)|this.h.za(c)]=!0;if(2==d&&2==f)return this.Vp(b,c,-1);if(1==d&&1==f)return this.Wp(-1);if(0==d&&0==f)return this.Qn();throw a.g.xa();};b.prototype.lt=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),f=a.U.ve(this.h.a.Mb(c)),g=this.h.za(b),k=this.h.za(c);this.Jm((g|k)+1);this.Qg[this.h.za(b)|this.h.za(c)]=!0;g=-1;1<this.h.a.up.Ba&&(g=b);if(2==d&&2==f)return this.Vp(b,
c,g);if(1==d&&0<f||1==f&&0<d)return this.Wp(g);if(0==d||0==f)return this.Qn();throw a.g.xa();};b.prototype.Tw=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),f=a.U.ve(this.h.a.Mb(c)),g=this.h.za(b),k=this.h.za(c);this.Jm((g|k)+1);this.Qg[this.h.za(b)|this.h.za(c)]=!0;g=-1;1<this.h.a.up.Ba&&(g=b);if(2==d&&2==f)return this.QS(b,c,g);if(1==d&&0<f||1==f&&0<d)return this.RS(g);if(0==d||0==f)return d=[],d[0]=this.Qn(),d;throw a.g.xa();};b.prototype.Pn=function(b,c){var d=a.U.ve(this.h.a.Mb(b)),f=a.U.ve(this.h.a.Mb(c)),
g=this.h.za(b),k=this.h.za(c);this.Jm((g|k)+1);this.Qg[this.h.za(b)]=!0;this.Qg[this.h.za(c)]=!0;if(2==d&&2==f)return this.Vp(b,c,-1);if(1==d&&1==f)return this.Wp(-1);if(0==d&&0==f)return this.Qn();throw a.g.xa();};b.pb=function(b){var c=b.F();return c==a.j.Envelope?(c=new a.La(b.description),b.u()||c.Xc(b,!1),c):c==a.j.Point?(c=new a.pe(b.description),b.u()||c.add(b),c):c==a.j.Line?(c=new a.Ya(b.description),b.u()||c.Cc(b,!0),c):b};b.Dc=function(b,c,d){var f=b.F();return f==a.j.Envelope?(c=new a.La(b.description),
b.u()||c.Xc(b,!1),c):f!=a.j.Point||"|"!=d&&"^"!=d?f==a.j.Line?(c=new a.Ya(b.description),b.u()||c.Cc(b,!0),c):f==a.j.Point&&"-"==d&&c.F()==a.j.Point||f==a.j.MultiPoint&&"\x26"==d&&c.F()==a.j.Point?(c=new a.Wa(b.description),b.u()||b.Td(0,c),c):b:(c=new a.pe(b.description),b.u()||c.add(b),c)};b.ll=function(c,d,f,g){if(c.u()||d.u()||c.gb()>d.gb())return b.Dc(b.pb(c),c,"-");var k=new a.i;c.s(k);var m=new a.i;d.s(m);if(!k.kc(m))return b.Dc(b.pb(c),c,"-");var q=new a.i;q.L(k);q.Eb(m);f=a.Ja.Ad(f,q,!0);
m=new b;k=new a.gd;q=k.Fb(b.pb(c));d=k.Fb(b.pb(d));m.Lp(k,f,g);g=m.ll(q,d);g=k.jf(g);c=b.Dc(g,c,"-");a.U.Lc(c.F())&&(c.hg(2,f),c.F()==a.j.Polygon&&c.hl());return c};b.TB=function(c,d,f,g){if(c.gb()>d.gb())return b.Dc(b.pb(c),c,"|");if(c.gb()<d.gb()||c.u())return b.Dc(b.pb(d),c,"|");if(d.u())return b.Dc(b.pb(c),c,"|");var k=new a.i;c.s(k);var m=new a.i;d.s(m);var q=new a.i;q.L(k);q.Eb(m);f=a.Ja.Ad(f,q,!0);if(!k.kc(m.HN(f,f)))switch(c=b.pb(c),d=b.pb(d),c.F()){case a.j.MultiPoint:return c=a.U.Zj(c),
c.Qd(d,0,-1),c;case a.j.Polyline:return c=a.U.Zj(c),c.add(d,!1),c;case a.j.Polygon:return c=a.U.Zj(c),c.add(d,!1),c;default:throw a.g.xa();}m=new b;k=new a.gd;q=k.Fb(b.pb(c));d=k.Fb(b.pb(d));m.Lp(k,f,g);d=m.TB(q,d);c=b.Dc(k.jf(d),c,"|");a.U.Lc(c.F())&&(c.hg(2,f),c.F()==a.j.Polygon&&c.hl());return c};b.nM=function(c,d,f){if(2>c.length)throw a.g.O("not enough geometries to dissolve");for(var g=0,k=0,m=c.length;k<m;k++)g=Math.max(c[k].gb(),g);var q=new a.i;q.Ka();for(var r=new a.gd,s=-1,t=0,u=-1,k=0,
m=c.length;k<m;k++)if(c[k].gb()==g)if(c[k].u())-1==u&&(u=k);else{u=k;-1==s?s=r.Fb(b.pb(c[k])):r.XJ(s,b.pb(c[k]));var w=new a.i;c[k].ed(w);q.Eb(w);t++}if(2>t)return b.pb(c[u]);c=2==g;d=a.Ja.Ad(0==g?d:null,q,!0);return(new b).Rj(r,s,d,c,!0,f)};b.Tw=function(c,d,f,g){var k=[null,null,null],m=new a.i;c.s(m);var q=new a.i;d.s(q);var r=new a.i;r.L(m);r.Eb(q);f=a.Ja.Ad(f,r,!0);r=new a.i;r.L(q);q=a.Ja.zs(f);r.R(q,q);if(!m.kc(r)){if(c.gb()<=d.gb())return c=b.Dc(b.pb(c.Qa()),c,"\x26"),k[c.gb()]=c,k;if(c.gb()>
d.gb())return c=b.Dc(b.pb(d.Qa()),c,"\x26"),k[c.gb()]=c,k}q=new b;m=new a.gd;r=m.Fb(b.pb(c));d=m.Fb(b.pb(d));q.Lp(m,f,g);g=q.Tw(r,d);for(d=0;d<g.length;d++)q=b.Dc(m.jf(g[d]),c,"\x26"),a.U.Lc(q.F())&&(q.hg(2,f),q.F()==a.j.Polygon&&q.hl()),k[q.gb()]=q;return k};b.Pn=function(c,d,f,g){if(c.gb()>d.gb())return b.Dc(b.pb(c),c,"^");if(c.gb()<d.gb()||c.u())return b.Dc(b.pb(d),c,"^");if(d.u())return b.Dc(b.pb(c),c,"^");var k=new a.i;c.s(k);var m=new a.i;d.s(m);var q=new a.i;q.L(k);q.Eb(m);f=a.Ja.Ad(f,q,!0);
m=new b;k=new a.gd;q=k.Fb(b.pb(c));d=k.Fb(b.pb(d));m.Lp(k,f,g);g=m.Pn(q,d);c=b.Dc(k.jf(g),c,"^");a.U.Lc(c.F())&&(c.hg(2,f),c.F()==a.j.Polygon&&c.hl());return c};b.tT=function(b,c,d){c=c.F();d=d.F();return b.F()==a.j.MultiPoint&&(c==a.j.Point||d==a.j.Point)&&1>=b.G()?(d=new a.Wa(b.description),b.u()||b.Td(0,d),d):b};b.prototype.YM=function(a,b){for(var c=this.h.a,d=c.Cf(a,-1),f=b.size,g=0;g<f;g++){var k=b.get(g);c.zi(d,k)}c.Hn(d,!0)};b.prototype.VR=function(a,b){for(var c=this.h.a,d=c.ad;-1!=d;d=c.we(d))if(d==
b)for(var f=c.Wb(d);-1!=f;f=c.cc(f)){var g=c.Db(f);if(-1!=g)for(var k=c.Y(g);-1!=k;){var g=this.h.se(g),m=this.h.se(k),g=this.h.EN(g,m);-1!=g&&(m=this.h.ta(g),this.h.Cb(g,a,1),this.h.Cb(m,a,2));g=k;k=c.Y(g)}}};b.prototype.WQ=function(b,c,d,f){d=this.h.za(d);f=this.h.za(f);var g=new a.ha(0);g.yb(256);for(var k=this.h.a,m=this.h.Eg(),q=this.h.Be;-1!=q;q=this.h.Bf(q)){var r=this.h.te(q);if(-1!=r){var s=r;do{if(1!=this.h.ub(s,m)){var t=s,u=s,w=!1,x=0;do{this.h.Cb(t,m,1);if(!w){var y=this.h.Gg(t);0!=(y&
f)&&0!=(this.h.Re(t)&d)&&(u=t,w=!0)}w&&(g.add(this.h.Gi(this.h.ol(this.h.rj(t)))),-1!=b&&(y=this.h.Gg(t),0!=(y&f)&&(y=this.h.ub(t,b),x|=y)));t=this.h.Xb(t)}while(t!=u);w&&0<this.h.xo(this.h.Qe(u))&&(t=k.jg(a.j.Polygon),this.YM(t,g),-1!=c&&k.EF(t,c,x));g.clear(!1)}s=this.h.Xb(this.h.ta(s))}while(s!=r)}}this.h.kh(m)};b.prototype.VL=function(a,b,c,d){this.h.tR();var f=-1;-1!=a&&(f=this.h.Eg(),this.VR(f,c));this.WQ(f,a,b,c);var g=this.h.a;a=0;for(f=g.ad;-1!=f;f=g.we(f))f!=b&&f!=c&&(d.add(f),a++);d.yd(0,
a,function(a,b){var c=g.Fw(g.Wb(a)),d=g.Fw(g.Wb(b));return c<d?-1:c==d?0:1})};b.prototype.xg=function(){null!=this.h&&(this.h.xg(),this.h=null)};return b}();a.Of=b})(A||(A={}));(function(a){var b=function(){function b(a){void 0!==a?this.Ky(a):this.IF()}b.prototype.Ku=function(){this.Pb=this.Ob=this.tb=this.sb=this.fb=this.nb=0};b.prototype.mc=function(a){return this==a?!0:a instanceof b?this.nb==a.nb&&this.sb==a.sb&&this.Ob==a.Ob&&this.tb==a.tb&&this.fb==a.fb&&this.Pb==a.Pb:!1};b.prototype.ic=function(){a.J.Rh();
a.J.Rh();a.J.Rh();a.J.Rh();a.J.Rh();return a.J.Rh()};b.prototype.Zi=function(a,b){var c=this.tb*a.x+this.fb*a.y+this.Pb;b.x=this.nb*a.x+this.sb*a.y+this.Ob;b.y=c};b.prototype.multiply=function(a){b.multiply(this,a,this)};b.multiply=function(a,b,c){var d,f,g,k,m;d=a.nb*b.nb+a.tb*b.sb;f=a.sb*b.nb+a.fb*b.sb;g=a.Ob*b.nb+a.Pb*b.sb+b.Ob;k=a.nb*b.tb+a.tb*b.fb;m=a.sb*b.tb+a.fb*b.fb;a=a.Ob*b.tb+a.Pb*b.fb+b.Pb;c.nb=d;c.sb=f;c.Ob=g;c.tb=k;c.fb=m;c.Pb=a};b.prototype.wm=function(){var a=new b;a.nb=this.nb;a.sb=
this.sb;a.Ob=this.Ob;a.tb=this.tb;a.fb=this.fb;a.Pb=this.Pb;return a};b.prototype.Zy=function(b){if(!b.u()){for(var c=[],d=0;4>d;d++)c[d]=new a.b;b.gy(c);this.TS(c,c);b.Dy(c,4)}};b.prototype.TS=function(b,c){for(var d=0;d<b.length;d++){var f=new a.b,g=b[d];f.x=this.nb*g.x+this.sb*g.y+this.Ob;f.y=this.tb*g.x+this.fb*g.y+this.Pb;c[d]=f}};b.prototype.vO=function(a,b){a.u()||b.u()||0==a.ba()||0==a.ca()?this.Ku():(this.sb=this.tb=0,this.nb=b.ba()/a.ba(),this.fb=b.ca()/a.ca(),this.Ob=b.w-a.w*this.nb,this.Pb=
b.D-a.D*this.fb)};b.prototype.SS=function(b){var c=new a.b,d=new a.b;c.na(this.nb,this.tb);d.na(this.sb,this.fb);c.sub(c);var f=0.5*c.Sp();c.na(this.nb,this.tb);d.na(this.sb,this.fb);c.add(d);c=0.5*c.Sp();return b*(f>c?Math.sqrt(f):Math.sqrt(c))};b.prototype.IF=function(){this.nb=1;this.tb=this.Ob=this.sb=0;this.fb=1;this.Pb=0};b.prototype.WO=function(){return 1==this.nb&&1==this.fb&&0==this.sb&&0==this.Ob&&0==this.tb&&0==this.Pb};b.prototype.mg=function(a){return Math.abs(this.nb*this.fb-this.tb*
this.sb)<=2*a*(Math.abs(this.nb*this.fb)+Math.abs(this.tb*this.sb))};b.prototype.On=function(a,b){this.nb=1;this.sb=0;this.Ob=a;this.tb=0;this.fb=1;this.Pb=b};b.prototype.Ky=function(a,b){void 0!==b?(this.nb=a,this.tb=this.Ob=this.sb=0,this.fb=b,this.Pb=0):this.Ky(a,a)};b.prototype.Ny=function(){this.nb=0;this.sb=1;this.Ob=0;this.tb=1;this.Pb=this.fb=0};b.prototype.iS=function(a){this.jS(Math.cos(a),Math.sin(a))};b.prototype.jS=function(a,b){this.nb=a;this.sb=-b;this.Ob=0;this.tb=b;this.fb=a;this.Pb=
0};b.prototype.shift=function(a,b){this.Ob+=a;this.Pb+=b};b.prototype.scale=function(a,b){this.nb*=a;this.sb*=a;this.Ob*=a;this.tb*=b;this.fb*=b;this.Pb*=b};b.prototype.rotate=function(a){var c=new b;c.iS(a);this.multiply(c)};b.prototype.inverse=function(a){if(void 0!==a){var b=this.nb*this.fb-this.sb*this.tb;0==b?a.Ku():(b=1/b,a.Ob=(this.sb*this.Pb-this.Ob*this.fb)*b,a.Pb=(this.Ob*this.tb-this.nb*this.Pb)*b,a.nb=this.fb*b,a.sb=-this.sb*b,a.tb=-this.tb*b,a.fb=this.nb*b)}else this.inverse(this)};return b}();
a.Bg=b})(A||(A={}));(function(a){var b=function(){function b(){}b.prototype.Ku=function(){this.fh=this.Pb=this.Ob=this.Me=this.Je=this.Ie=this.Le=this.fb=this.sb=this.ff=this.tb=this.nb=0};b.prototype.Ky=function(a,b,c){this.nb=a;this.sb=this.ff=this.tb=0;this.fb=b;this.Je=this.Ie=this.Le=0;this.Me=c;this.fh=this.Pb=this.Ob=0};b.prototype.Zy=function(b){if(b.u())return b;for(var c=new a.fe[8],d=0;8>d;d++)c[d]=new a.fe;b.gy(c);this.transform(c,8,c);b.Dy(c);return b};b.prototype.transform=function(b,
c,d){for(var f=0;f<c;f++){var g=new a.fe,k=b[f];g.x=this.nb*k.x+this.sb*k.y+this.Ie*k.z+this.Ob;g.y=this.tb*k.x+this.fb*k.y+this.Je*k.z+this.Pb;g.z=this.ff*k.x+this.Le*k.y+this.Me*k.z+this.fh;d[f]=g}};b.prototype.Rn=function(b){var c=new a.fe;c.x=this.nb*b.x+this.sb*b.y+this.Ie*b.z+this.Ob;c.y=this.tb*b.x+this.fb*b.y+this.Je*b.z+this.Pb;c.z=this.ff*b.x+this.Le*b.y+this.Me*b.z+this.fh;return c};b.prototype.yp=function(a){b.multiply(this,a,this)};b.multiply=function(a,b,c){var d,f,g,k,m,q,r,s,t,u,v;
d=a.nb*b.nb+a.tb*b.sb+a.ff*b.Ie;f=a.nb*b.tb+a.tb*b.fb+a.ff*b.Je;g=a.nb*b.ff+a.tb*b.Le+a.ff*b.Me;k=a.sb*b.nb+a.fb*b.sb+a.Le*b.Ie;m=a.sb*b.tb+a.fb*b.fb+a.Le*b.Je;q=a.sb*b.ff+a.fb*b.Le+a.Le*b.Me;r=a.Ie*b.nb+a.Je*b.sb+a.Me*b.Ie;s=a.Ie*b.tb+a.Je*b.fb+a.Me*b.Je;t=a.Ie*b.ff+a.Je*b.Le+a.Me*b.Me;u=a.Ob*b.nb+a.Pb*b.sb+a.fh*b.Ie+b.Ob;v=a.Ob*b.tb+a.Pb*b.fb+a.fh*b.Je+b.Pb;a=a.Ob*b.ff+a.Pb*b.Le+a.fh*b.Me+b.fh;c.nb=d;c.tb=f;c.ff=g;c.sb=k;c.fb=m;c.Le=q;c.Ie=r;c.Je=s;c.Me=t;c.Ob=u;c.Pb=v;c.fh=a};b.inverse=function(b,
c){var d=b.nb*(b.fb*b.Me-b.Le*b.Je)-b.tb*(b.sb*b.Me-b.Le*b.Ie)+b.ff*(b.sb*b.Je-b.fb*b.Ie);if(0!=d){var f,g,k,m,q,r,s,t,u,w,x;t=1/d;d=(b.fb*b.Me-b.Le*b.Je)*t;k=-(b.sb*b.Me-b.Le*b.Ie)*t;r=(b.sb*b.Je-b.fb*b.Ie)*t;f=-(b.tb*b.Me-b.Je*b.ff)*t;m=(b.nb*b.Me-b.ff*b.Ie)*t;s=-(b.nb*b.Je-b.tb*b.Ie)*t;g=(b.tb*b.Le-b.ff*b.fb)*t;q=-(b.nb*b.Le-b.ff*b.sb)*t;t*=b.nb*b.fb-b.tb*b.sb;u=-(b.Ob*d+b.Pb*k+b.fh*r);w=-(b.Ob*f+b.Pb*m+b.fh*s);x=-(b.Ob*g+b.Pb*q+b.fh*t);c.nb=d;c.tb=f;c.ff=g;c.sb=k;c.fb=m;c.Le=q;c.Ie=r;c.Je=s;c.Me=
t;c.Ob=u;c.Pb=w;c.fh=x}else throw a.g.sa("math singularity");};b.prototype.wm=function(){var a=new b;a.nb=this.nb;a.tb=this.tb;a.ff=this.ff;a.sb=this.sb;a.fb=this.fb;a.Le=this.Le;a.Ie=this.Ie;a.Je=this.Je;a.Me=this.Me;a.Ob=this.Ob;a.Pb=this.Pb;a.fh=this.fh;return a};return b}();a.YT=b})(A||(A={}));(function(a){var b=function(b){function d(a){if(void 0!==a)b.call(this,a.ic(),a);else{b.call(this);this.Jf=[];this.Jf[0]=0;this.Ba=1;this.Wg=[];for(a=0;10>a;a++)this.Wg[a]=-1;this.Wg[this.Jf[0]]=0}this.Ro=
!0}H(d,b);d.prototype.Oe=function(a){this.hasAttribute(a)||(this.Wg[a]=0,this.xA())};d.prototype.removeAttribute=function(b){if(0==b)throw a.g.O("Position attribue cannot be removed");this.hasAttribute(b)&&(this.Wg[b]=-1,this.xA())};d.prototype.reset=function(){this.Jf[0]=0;this.Ba=1;for(var a=0;a<this.Wg.length;a++)this.Wg[a]=-1;this.Wg[this.Jf[0]]=0;this.Ro=!0};d.prototype.pw=function(){return c.vw().add(this)};d.Tf=function(){return c.vw().hO()};d.Yn=function(){return c.vw().iO()};d.prototype.oJ=
function(){var b=this.ic();return new a.qa(b,this)};d.prototype.xA=function(){for(var a=this.Ba=0,b=0;10>a;a++)0<=this.Wg[a]&&(this.Jf[b]=a,this.Wg[a]=b,b++,this.Ba++);this.Ro=!0};d.prototype.ic=function(){this.Ro&&(this.tk=this.jj(),this.Ro=!1);return this.tk};d.prototype.mc=function(a){if(null==a)return!1;if(a==this)return!0;if(!(a instanceof d)||a.Ba!=this.Ba)return!1;for(var b=0;b<this.Ba;b++)if(this.Jf[b]!=a.Jf[b])return!1;return this.Ro!=a.Ro?!1:!0};d.prototype.qD=function(a){if(a.Ba!=this.Ba)return!1;
for(var b=0;b<this.Ba;b++)if(this.Jf[b]!=a.Jf[b])return!1;return!0};d.hu=function(a,b){for(var c=[],d=0;d<a.Ba;d++)c[d]=-1;for(var d=0,e=a.Ba;d<e;d++)c[d]=b.zf(a.Id(d));return c};d.ON=function(a,b){var c=new d(a);c.Oe(b);return c.pw()};d.PN=function(a,b){for(var c=null,f=0;10>f;f++)!a.hasAttribute(f)&&b.hasAttribute(f)&&(null==c&&(c=new d(a)),c.Oe(f));return null!=c?c.pw():a};d.ao=function(a,b){var c=new d(a);c.removeAttribute(b);return c.pw()};return d}(a.qa);a.Pd=b;var c=function(){function a(){this.map=
[];var c=new b;this.add(c);c=new b;c.Oe(1);this.add(c)}a.vw=function(){return a.kI};a.prototype.hO=function(){return a.Xn};a.prototype.iO=function(){return a.Yn};a.prototype.add=function(b){var c=b.ic();if(null!=a.Xn&&a.Xn.ic()==c&&b.qD(a.Xn))return a.Xn;if(null!=a.Yn&&a.Yn.ic()==c&&b.qD(a.Yn))return a.Yn;var d=null;void 0!==this.map[c]&&(d=this.map[c]);null==d&&(d=b.oJ(),1==d.Ba?a.Xn=d:2==d.Ba&&1==d.Id(1)?a.Yn=d:this.map[c]=d);return d};a.kI=new a;return a}()})(A||(A={}));var L=0==b.version.indexOf("4."),
Q;(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area";a[a.LinearOrAngular=3]="LinearOrAngular"})(Q||(Q={}));var R={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},X={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},V={degrees:9102,radians:9101};void 0===s.prototype.getCacheValue&&a.extend(s,{cache:null,getCacheValue:function(a){if(null===
this.cache||void 0===this.cache)this.cache={};return this.cache[a]},setCacheValue:function(a,b){if(null===this.cache||void 0===this.cache)this.cache={};this.cache[a]=b}});var O=A.Nf.create(4326),U=A.Nf.create(102100);return function(){function a(){}a.extendedSpatialReferenceInfo=function(a){if(null===a)return null;a=w(a);var b=a.Te();return{tolerance:a.vq(),unitType:null==b?-1:b.Oc,unitID:null==b?-1:b.Rc(),unitBaseFactor:null==b?0:b.Ej,unitSquareDerivative:null==b?0:A.Ub.PC(b).Rc()}};a.clip=function(a,
b){if(null===a)return null;var c=A.Qb.clip(E(a),E(b),D(a));return x(c,a.spatialReference)};a.cut=function(a,b){for(var c=E(b),c=A.Qb.ym(E(a),c,D(a)),d=[],f=0;f<c.length;f++)d.push(x(c[f],a.spatialReference));return d};a.contains=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return A.Qb.contains(E(a),E(b),D(a))};a.crosses=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return A.Qb.UL(E(a),E(b),D(a))};a.distance=function(a,b,c){if(null===
a||null===b)throw Error("Illegal Argument Exception");return A.Qb.Gb(E(a),E(b),D(a),A.Ub.Rd(u(c,3)))};a.equals=function(a,b){return null===a&&null!==b||null===b&&null!==a?!1:A.Qb.mc(E(a),E(b),D(a))};a.intersects=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return A.Qb.QO(E(a),E(b),D(a))};a.touches=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return A.Qb.touches(E(a),E(b),D(a))};a.within=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");
return A.Qb.iT(E(a),E(b),D(a))};a.disjoint=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return A.Qb.mM(E(a),E(b),D(a))};a.overlaps=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return A.Qb.sQ(E(a),E(b),D(a))};a.relate=function(a,b,c){if(null===a||null===b)throw Error("Illegal Argument Exception");return A.Qb.oy(E(a),E(b),D(a),c)};a.isSimple=function(a){if(null===a)throw Error("Illegal Argument Exception");return A.Qb.bP(E(a),D(a))};
a.simplify=function(a){if(null===a)throw Error("Illegal Argument Exception");var b=A.Qb.Py(E(a),D(a));return x(b,a.spatialReference)};a.convexHull=function(b,c){void 0===c&&(c=!1);if(null===b)throw Error("Illegal Argument Exception");if(b instanceof s){var d=A.Qb.IL(E(b),D(b));return x(d,b.spatialReference)}return a.MI(b,c)};a.MI=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=A.Qb.JL(c,b);for(d=0;d<c.length;d++)c[d]=x(c[d],a[0].spatialReference);return c};a.difference=function(b,
c){if(null===b||null===c)throw Error("Illegal Argument Exception");if(b instanceof s){var d=A.Qb.ll(E(b),E(c),D(b));return x(d,b.spatialReference)}return a.WL(b,c)};a.WL=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=A.Qb.jM(c,E(b),D(b));for(d=0;d<c.length;d++)c[d]=x(c[d],b.spatialReference);return c};a.symmetricDifference=function(b,c){if(null===b||null===c)throw Error("Illegal Argument Exception");if(b instanceof s){var d=A.Qb.Pn(E(b),E(c),D(b));return x(d,b.spatialReference)}return a.sO(b,
c)};a.sO=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=A.Qb.LS(c,E(b),D(b));for(d=0;d<c.length;d++)c[d]=x(c[d],b.spatialReference);return c};a.intersect=function(b,c){if(null===b||null===c)throw Error("Illegal Argument Exception");if(b instanceof s){var d=A.Qb.Ha(E(b),E(c),D(b));return x(d,b.spatialReference)}return a.DM(b,c)};a.DM=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));c=A.Qb.PO(c,E(b),D(b));for(d=0;d<c.length;d++)c[d]=x(c[d],b.spatialReference);return c};
a.union=function(a,b){void 0===b&&(b=null);if(null===a)return null;a instanceof s&&(a=[a],null!==b&&a.push(b));if(0===a.length)return null;for(var c=[],d=0;d<a.length;d++)c.push(E(a[d]));return x(A.Qb.$S(c,D(a[0])),a[0].spatialReference)};a.offset=function(b,c,d,e,f,g){var k=0;if(null!=e&&void 0!=e)switch(e){case "round":k=0;break;case "bevel":k=1;break;case "miter":k=2;break;case "square":k=3}return b instanceof s?(c=A.Qb.offset(E(b),D(b),c,k,f,g,A.Ub.Rd(u(d,3))),x(c,b.spatialReference)):a.pO(b,
c,d,k,f,g)};a.pO=function(a,b,c,d,f,g){if(null===a)return null;if(0===a.length)return[];for(var k=[],m=0;m<a.length;m++)k.push(E(a[m]));b=A.Qb.rQ(k,D(a[0]),b,d,f,g,A.Ub.Rd(u(c,3)));for(m=0;m<b.length;m++)b[m]=x(b[m],a[0].spatialReference);return b};a.buffer=function(b,c,d,e){void 0===e&&(e=!1);if(b instanceof s)return c=A.Qb.buffer(E(b),D(b),c,A.Ub.Rd(u(d,3)),!1,0,NaN),x(c,b.spatialReference);if("[object Array]"!==Object.prototype.toString.call(c)){for(var f=[],g=0;g<b.length;g++)f.push(c);c=f}if(c.length!=
b.length){if(0==c.length)throw Error("Illegal Argument Exception");for(var f=[],k=0,g=0;g<b.length;g++)void 0===c[g]?f.push(k):(f.push(c[g]),k=c[g]);c=f}return a.vG(b,c,d,!1,e,"geodesic",NaN)};a.geodesicBuffer=function(b,c,d,e,f,g){if(b instanceof s)return void 0===f&&(f=NaN),c=A.Qb.buffer(E(b),D(b),c,A.Ub.Rd(u(d,0)),!0,B(e),f),x(c,b.spatialReference);if("[object Array]"!==Object.prototype.toString.call(c)){for(var k=[],m=0;m<b.length;m++)k.push(c);c=k}if(c.length!=b.length){if(0==c.length)throw Error("Illegal Argument Exception");
for(var k=[],q=0,m=0;m<b.length;m++)void 0===c[m]?k.push(q):(k.push(c[m]),q=c[m]);c=k}return a.vG(b,c,d,!0,e,f,g)};a.vG=function(a,b,c,d,f,g,k){if(null===a)return null;if(0===a.length)return[];void 0===k&&(k=NaN);for(var m=[],q=0;q<a.length;q++)m.push(E(a[q]));b=A.Qb.qK(m,D(a[0]),b,A.Ub.Rd(u(c,0)),d,f,B(g),k);for(q=0;q<b.length;q++)b[q]=x(b[q],a[0].spatialReference);return b};a.nearestCoordinate=function(a,b,c){void 0===c&&(c=!0);b=A.Qb.yw(E(a),E(b),c);return{coordinate:x(b.ow(),a.spatialReference),
distance:b.rw(),isRightSide:b.Ww(),vertexIndex:b.hb(),isEmpty:b.u()}};a.nearestVertex=function(a,b){var c=A.Qb.zw(E(a),E(b));return{coordinate:x(c.ow(),a.spatialReference),distance:c.rw(),isRightSide:c.Ww(),vertexIndex:c.hb(),isEmpty:c.u()}};a.nearestVertices=function(a,b,c,d){b=E(b);c=A.Qb.Aw(E(a),b,c,d);d=[];for(b=0;b<c.length;b++)!1===c[b].u()&&d.push({coordinate:x(c[b].ow(),a.spatialReference),distance:c[b].rw(),isRightSide:c[b].Ww(),vertexIndex:c[b].hb(),isEmpty:c[b].u()});return d};a.generalize=
function(a,b,c,d){b=A.Qb.eN(E(a),D(a),b,c,A.Ub.Rd(u(d,3)));return x(b,a.spatialReference)};a.densify=function(a,b,c){b=A.Qb.mq(E(a),D(a),b,A.Ub.Rd(u(c,3)));return x(b,a.spatialReference)};a.geodesicDensify=function(a,b,c,d){void 0===d&&(d=0);b=A.Qb.ew(E(a),D(a),b,A.Ub.Rd(u(c,3)),d);return x(b,a.spatialReference)};a.rotate=function(a,b,f){if(void 0===f||null===f)switch(a.type){case "point":f=a;break;case "extent":f=L?a.get("center"):a.getCenter();break;default:f=L?a.get("extent").get("center"):a.getExtent().getCenter()}b=
L?A.Wn.rotate(a.toJSON(),b,f.toJSON()):A.Wn.rotate(a.toJson(),b,f.toJson());L?(b=d(b),b.set("spatialReference",a.spatialReference)):(b=c(b),b.setSpatialReference(a.spatialReference));return b};a.flipHorizontal=function(a,b){if(void 0===b||null===b)switch(a.type){case "point":b=a;break;case "extent":b=L?a.get("center"):a.getCenter();break;default:b=L?a.get("extent").get("center"):a.getExtent().getCenter()}var f;f=L?A.Wn.eC(a.toJSON(),b.toJSON()):A.Wn.eC(a.toJson(),b.toJson());L?(f=d(f),f.set("spatialReference",
a.spatialReference)):(f=c(f),f.setSpatialReference(a.spatialReference));return f};a.flipVertical=function(a,b){if(void 0===b||null===b)switch(a.type){case "point":b=a;break;case "extent":b=L?a.get("center"):a.getCenter();break;default:b=L?a.get("extent").get("center"):a.getExtent().getCenter()}var f;f=L?A.Wn.fC(a.toJSON(),b.toJSON()):A.Wn.fC(a.toJson(),b.toJson());L?(f=d(f),f.set("spatialReference",a.spatialReference)):(f=c(f),f.setSpatialReference(a.spatialReference));return f};a.planarArea=function(a,
b){if(null===a)throw Error("Illegal Argument Exception");return A.Qb.AQ(E(a),D(a),A.Ub.Rd(u(b,2)))};a.planarLength=function(a,b){if(null===a)throw Error("Illegal Argument Exception");return A.Qb.BQ(E(a),D(a),A.Ub.Rd(u(b,3)))};a.geodesicArea=function(a,b,c){if(null===a)throw Error("Illegal Argument Exception");return A.Qb.iN(E(a),D(a),A.Ub.Rd(u(b,2)),B(c))};a.geodesicLength=function(a,b,c){if(null===a)throw Error("Illegal Argument Exception");return A.Qb.mN(E(a),D(a),A.Ub.Rd(u(b,0)),B(c))};return a}()})},
"esri/tasks/FindParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../layerUtils".split(" "),function(q,t,b,s,r,m,k){q=q(null,{declaredClass:"esri.tasks.FindParameters",searchText:null,contains:!0,searchFields:null,outSpatialReference:null,layerIds:null,returnGeometry:!1,layerDefinitions:null,dynamicLayerInfos:null,toJson:function(){var g={searchText:this.searchText,contains:this.contains,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision},f=this.layerIds,a=this.searchFields,c=this.outSpatialReference;f&&(g.layers=f.join(","));a&&(g.searchFields=a.join(","));c&&(g.sr=c.wkid||s.toJson(c.toJson()));g.layerDefs=k._serializeLayerDefinitions(this.layerDefinitions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var d=[];b.forEach(this.dynamicLayerInfos,function(a){if(!a.subLayerIds){var c=a.id;if(this.layerIds&&-1!==b.indexOf(this.layerIds,c)){var f={id:c};f.source=a.source&&a.source.toJson();
var g;this.layerDefinitions&&this.layerDefinitions[c]&&(g=this.layerDefinitions[c]);g&&(f.definitionExpression=g);d.push(f)}}},this);f=s.toJson(d);"[]"===f&&(f="[{}]");g.dynamicLayers=f}return g}});r("extend-esri")&&t.setObject("tasks.FindParameters",q,m);return q})},"esri/tasks/FindTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ./FindResult".split(" "),function(q,t,b,s,r,m,k,g,f,a){q=q(f,{declaredClass:"esri.tasks.FindTask",
constructor:function(a,b){this._url.path+="/find";this._handler=t.hitch(this,this._handler);this.gdbVersion=b&&b.gdbVersion},_handler:function(c,d,f,g,k){try{var m=[];b.forEach(c.results,function(b,c){m[c]=new a(b)});this._successHandler([m],"onComplete",f,k)}catch(q){this._errorHandler(q,g,k)}},execute:function(a,b,f){a=this._encode(t.mixin({},this._url.query,{f:"json"},a.toJson()));var m=this._handler,q=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var r=new s(g._dfdCanceller);
r._pendingDfd=k({url:this._url.path,content:a,callbackParamName:"callback",load:function(a,c){m(a,c,b,f,r)},error:function(a){q(a,f,r)}});return r},onComplete:function(){}});r("extend-esri")&&t.setObject("tasks.FindTask",q,m);return q})},"esri/tasks/FindResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../graphic ../geometry/jsonUtils".split(" "),function(q,t,b,s,r,m){q=q(null,{declaredClass:"esri.tasks.FindResult",constructor:function(b){t.mixin(this,b);this.feature=
new r(b.geometry?m.fromJson(b.geometry):null,null,b.attributes);delete this.geometry;delete this.attributes}});b("extend-esri")&&t.setObject("tasks.FindResult",q,s);return q})},"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dojox/form/resources/HorizontalRangeSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onkeyup:_onKeyUp" role\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent\x3d"onmousedown:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv role\x3d"presentation" class\x3d"dojoxRangeSliderBarContainer" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent\x3d"onmousedown:_onBarClick"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClickMax" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent\x3d"onmousedown:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dojox/form/resources/VerticalRangeSlider.html":'\x3ctable class\x3d"dijitReset dijitSlider dijitSliderV dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton" dojoAttachEvent\x3d"onclick: increment"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" dojoAttachEvent\x3d"onclick:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV" style\x3d"text-align:center;height:100%;"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter role\x3d"presentation" style\x3d"position:relative;height:100%;" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;" role\x3d"slider"\r\n\t\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onHandleClick"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onBarClick"\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;" role\x3d"slider"\r\n\t\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onHandleClickMax"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV" style\x3d"text-align:center;height:100%;"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" dojoAttachEvent\x3d"onclick:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton" dojoAttachEvent\x3d"onclick: decrement"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/form/templates/VerticalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderV" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderDecorationC" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter class\x3d"dijitReset dijitSliderBarContainerV" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c!--#5629--\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:esri/dijit/templates/TimeSlider.html":'   \x3cdiv class\x3d"esriTimeSlider"\x3e\r\n   \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0"\x3e\r\n   \x3ctr\x3e\r\n   \x3ctd align\x3d"right" valign\x3d"middle"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPlayButton" dojoAttachEvent\x3d"onClick:_onPlay" dojoAttachPoint\x3d"playPauseBtn" type\x3d"button"\x3e${NLS_play}\x3c/button\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"center" valign\x3d"middle" width\x3d"80%" class\x3d"tsTmp"\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"left" valign\x3d"middle" width\x3d"30"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPrevButton" dojoAttachEvent\x3d"onClick:_onPrev" dojoAttachPoint\x3d"previousBtn" type\x3d"button"\x3e${NLS_previous}\x3c/button\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"left" valign\x3d"middle"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsNextButton" dojoAttachEvent\x3d"onClick:_onNext" dojoAttachPoint\x3d"nextBtn" type\x3d"button"\x3e${NLS_next}\x3c/button\x3e\x3c/td\x3e\r\n   \x3c/tr\x3e    \r\n   \x3c/table\x3e\r\n   \x3c/div\x3e',
"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(q){q(['dojo/i18n!*preload*dojo/nls/dojo*["ar","cs","da","de","el","en","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])}}});(function(){var q=this.require;q({cache:{}});!q.async&&q(["dojo"]);q.boot&&q.apply(null,q.boot)})();